{"ast":null,"code":"import { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n/**\n * IncrementalSearch module file\n */\n\nvar queryString = '';\nvar prevString = '';\nvar matches$1 = [];\nvar activeClass = 'e-active';\nvar prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\n\nfunction incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId) {\n  queryString += String.fromCharCode(keyCode);\n  setTimeout(function () {\n    queryString = '';\n  }, 1000);\n  var index;\n  queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n\n  if (prevElementId === elementId && prevString === queryString) {\n    for (var i = 0; i < matches$1.length; i++) {\n      if (matches$1[i].classList.contains(activeClass)) {\n        index = i;\n        break;\n      }\n    }\n\n    index = index + 1;\n    return matches$1[index] ? matches$1[index] : matches$1[0];\n  } else {\n    var listItems = items;\n    var strLength = queryString.length;\n    var text = void 0;\n    var item = void 0;\n    selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n    var i = selectedIndex;\n    matches$1 = [];\n\n    do {\n      if (i === listItems.length) {\n        i = -1;\n      }\n\n      if (i === -1) {\n        index = 0;\n      } else {\n        index = i;\n      }\n\n      item = listItems[index];\n      text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n\n      if (text.substr(0, strLength) === queryString) {\n        matches$1.push(listItems[index]);\n      }\n\n      i++;\n    } while (i !== selectedIndex);\n\n    prevString = queryString;\n    prevElementId = elementId;\n    return matches$1[0];\n  }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\n\n\nfunction Search(inputVal, items, searchType, ignoreCase, dataSource, fields, type) {\n  var listItems = items;\n  ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n  var itemData = {\n    item: null,\n    index: null\n  };\n\n  if (inputVal && inputVal.length) {\n    var strLength = inputVal.length;\n    var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n    queryStr = escapeCharRegExp(queryStr);\n\n    var _loop_1 = function (i, itemsData) {\n      var item = itemsData[i];\n      var text = void 0;\n      var filterValue;\n\n      if (items && dataSource) {\n        var checkField_1 = item;\n        var fieldValue_1 = fields.text.split('.');\n        dataSource.filter(function (data) {\n          Array.prototype.slice.call(fieldValue_1).forEach(function (value) {\n            /* eslint-disable security/detect-object-injection */\n            if (type === 'object' && !data.isHeader && checkField_1.textContent.toString().indexOf(data[value]) !== -1 && checkField_1.getAttribute('data-value') === data[fields.value].toString() || type === 'string' && checkField_1.textContent.toString().indexOf(data) !== -1) {\n              filterValue = type === 'object' ? data[value] : data;\n            }\n          });\n        });\n      }\n\n      text = dataSource && filterValue ? (ignoreCase ? filterValue.toLocaleLowerCase() : filterValue).replace(/^\\s+|\\s+$/g, '') : (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n      /* eslint-disable security/detect-non-literal-regexp */\n\n      if (searchType === 'Equal' && text === queryStr || searchType === 'StartsWith' && text.substr(0, strLength) === queryStr || searchType === 'EndsWith' && text.substr(text.length - queryStr.length) === queryStr || searchType === 'Contains' && new RegExp(queryStr, \"g\").test(text)) {\n        itemData.item = item;\n        itemData.index = i;\n        return {\n          value: {\n            item: item,\n            index: i\n          }\n        };\n      }\n    };\n\n    for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {\n      var state_1 = _loop_1(i, itemsData);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n\n    return itemData;\n    /* eslint-enable security/detect-non-literal-regexp */\n  }\n\n  return itemData;\n}\n/* eslint-enable security/detect-object-injection */\n\n\nfunction escapeCharRegExp(value) {\n  return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction resetIncrementalSearchValues(elementId) {\n  if (prevElementId === elementId) {\n    prevElementId = '';\n    prevString = '';\n    queryString = '';\n    matches$1 = [];\n  }\n}\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\n\n\nfunction highlightSearch(element, query, ignoreCase, type) {\n  if (query === '') {\n    return;\n  } else {\n    var ignoreRegex = ignoreCase ? 'gim' : 'gm'; // eslint-disable-next-line\n\n    query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    var replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ? '(' + query + ')$' : '(' + query + ')'; // eslint-disable-next-line security/detect-non-literal-regexp\n\n    findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n  }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\n\n\nfunction findTextNode(element, pattern) {\n  for (var index = 0; element.childNodes && index < element.childNodes.length; index++) {\n    if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n      var value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n      element.childNodes[index].nodeValue = '';\n      element.innerHTML = element.innerHTML.trim() + value;\n      break;\n    } else {\n      findTextNode(element.childNodes[index], pattern);\n    }\n  }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\n\n\nfunction revertHighlightSearch(content) {\n  var contentElement = content.querySelectorAll('.e-highlight');\n\n  for (var i = contentElement.length - 1; i >= 0; i--) {\n    var parent_1 = contentElement[i].parentNode;\n    var text = document.createTextNode(contentElement[i].textContent);\n    parent_1.replaceChild(text, contentElement[i]);\n  }\n}\n/**\n * Common source\n */\n\n\nvar __extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar FieldSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends(FieldSettings, _super);\n\n  function FieldSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property()], FieldSettings.prototype, \"text\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"value\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"iconCss\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"groupBy\", void 0);\n\n  __decorate([Property()], FieldSettings.prototype, \"htmlAttributes\", void 0);\n\n  return FieldSettings;\n}(ChildProperty);\n\nvar dropDownBaseClasses = {\n  root: 'e-dropdownbase',\n  rtl: 'e-rtl',\n  content: 'e-content',\n  selected: 'e-active',\n  hover: 'e-hover',\n  noData: 'e-nodata',\n  fixedHead: 'e-fixed-head',\n  focus: 'e-item-focus',\n  li: 'e-list-item',\n  group: 'e-list-group-item',\n  disabled: 'e-disabled',\n  grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar DISPLAYTEMPLATE_PROPERTY = 'DisplayTemplate';\nvar SPINNERTEMPLATE_PROPERTY = 'SpinnerTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\n\nvar DropDownBase =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends(DropDownBase, _super);\n  /**\n   * * Constructor for DropDownBase class\n   *\n   * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function DropDownBase(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.preventChange = false;\n    _this.isAngular = false;\n    _this.isPreventChange = false;\n    _this.isDynamicDataChange = false;\n    _this.addedNewItem = false;\n    return _this;\n  }\n\n  DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n    var newProperty = new Object();\n    var oldProperty = new Object();\n\n    var propName = function (prop) {\n      return prop;\n    };\n\n    newProperty[propName(prop)] = newProp[propName(prop)];\n    oldProperty[propName(prop)] = oldProp[propName(prop)];\n    var data = new Object();\n    data.newProperty = newProperty;\n    data.oldProperty = oldProperty;\n    return data;\n  };\n\n  DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n    var value = null;\n\n    if (!isNullOrUndefined(this.listData)) {\n      if (ignoreCase) {\n        value = this.checkValueCase(text, true, ignoreAccent);\n      } else {\n        value = this.checkValueCase(text, false, ignoreAccent);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n    var _this = this;\n\n    var value = null;\n\n    if (isTextByValue) {\n      value = text;\n    }\n\n    var dataSource = this.listData;\n    var fields = this.fields;\n    var type = this.typeOfData(dataSource).typeof;\n\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n        var item = dataSource_1[_i];\n\n        if (!isNullOrUndefined(item)) {\n          if (ignoreAccent) {\n            value = this.checkingAccent(String(item), text, ignoreCase);\n          } else {\n            if (ignoreCase) {\n              if (this.checkIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n              }\n            } else {\n              if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n              }\n            }\n          }\n        }\n      }\n    } else {\n      if (ignoreCase) {\n        dataSource.filter(function (item) {\n          var itemValue = getValue(fields.value, item);\n\n          if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n            value = getValue(fields.value, item);\n          }\n        });\n      } else {\n        if (isTextByValue) {\n          var compareValue_1 = null;\n          compareValue_1 = value;\n          dataSource.filter(function (item) {\n            var itemValue = getValue(fields.value, item);\n\n            if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n              value = getValue(fields.text, item);\n            }\n          });\n        } else {\n          dataSource.filter(function (item) {\n            if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n              value = getValue(fields.value, item);\n            }\n          });\n        }\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n    var dataItem = DataUtil.ignoreDiacritics(String(item));\n    var textItem = DataUtil.ignoreDiacritics(text.toString());\n    var value = null;\n\n    if (ignoreCase) {\n      if (this.checkIgnoreCase(dataItem, textItem)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    } else {\n      if (this.checkNonIgnoreCase(String(item), text)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n    return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n  };\n\n  DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n    return String(item) === text.toString() ? true : false;\n  };\n\n  DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n    var value = null;\n    var dataSource = this.listData;\n    var type = this.typeOfData(dataSource).typeof;\n\n    if (isTextByValue) {\n      value = dataItem.toString();\n    } else {\n      if (ignoreCase) {\n        value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n      } else {\n        value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n      }\n    }\n\n    return value;\n  };\n\n  DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n    var checkTemplate = false;\n\n    if (baseTemplate) {\n      try {\n        checkTemplate = selectAll(baseTemplate, document).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n    var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n\n    if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n      var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n      var compiledString = void 0;\n      var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n      ele.innerHTML = '';\n      var tempaltecheck = this.templateCompiler(template);\n\n      if (tempaltecheck) {\n        compiledString = compile(select(template, document).innerHTML.trim());\n      } else {\n        compiledString = compile(template);\n      }\n\n      var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n\n      if (noDataCompTemp && noDataCompTemp.length > 0) {\n        for (var i = 0; i < noDataCompTemp.length; i++) {\n          if (this.getModuleName() === 'listbox' && templateName === 'noRecordsTemplate') {\n            if (noDataCompTemp[i].nodeName === '#text') {\n              var liElem = this.createElement('li');\n              liElem.textContent = noDataCompTemp[i].textContent;\n              liElem.classList.add('e-list-nrt');\n              liElem.setAttribute('role', 'option');\n              ele.appendChild(liElem);\n            } else {\n              noDataCompTemp[i].classList.add('e-list-nr-template');\n              ele.appendChild(noDataCompTemp[i]);\n            }\n          } else {\n            ele.appendChild(noDataCompTemp[i]);\n          }\n        }\n      }\n\n      this.renderReactTemplates();\n    } else {\n      var l10nLocale = {\n        noRecordsTemplate: 'No records found',\n        actionFailureTemplate: 'Request failed'\n      };\n      var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n\n      if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n        this.l10n = componentLocale;\n      } else {\n        this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : this.getModuleName() === 'mention' ? 'mention' : 'dropdowns', l10nLocale, this.locale);\n      }\n\n      var content = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n\n      if (this.getModuleName() === 'listbox') {\n        var liElem = this.createElement('li');\n        liElem.textContent = content;\n        ele.appendChild(liElem);\n        liElem.classList.add('e-list-nrt');\n        liElem.setAttribute('role', 'option');\n      } else {\n        if (!isNullOrUndefined(ele)) {\n          ele.innerHTML = content;\n        }\n      }\n    }\n  };\n\n  DropDownBase.prototype.getLocaleName = function () {\n    return 'drop-down-base';\n  };\n\n  DropDownBase.prototype.getTextByValue = function (value) {\n    var text = this.checkValueCase(value, false, false, true);\n    return text;\n  };\n\n  DropDownBase.prototype.getFormattedValue = function (value) {\n    if (this.listData && this.listData.length) {\n      var item = void 0;\n\n      if (this.properties.allowCustomValue && this.properties.value && this.properties.value instanceof Array && this.properties.value.length > 0) {\n        item = this.typeOfData(this.properties.value);\n      } else {\n        item = this.typeOfData(this.listData);\n      }\n\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'number' || item.typeof === 'number') {\n        return parseFloat(value);\n      }\n\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'boolean' || item.typeof === 'boolean') {\n        return value === 'true' || '' + value === 'true';\n      }\n    }\n\n    return value;\n  };\n  /**\n   * Sets RTL to dropdownbase wrapper\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setEnableRtl = function () {\n    if (!isNullOrUndefined(this.enableRtlElements)) {\n      if (this.list) {\n        this.enableRtlElements.push(this.list);\n      }\n\n      if (this.enableRtl) {\n        addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n      } else {\n        removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n      }\n    }\n  };\n  /**\n   * Initialize the Component.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.initialize = function (e) {\n    this.bindEvent = true;\n    this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n\n    if (this.element.tagName === 'UL') {\n      var jsonElement = ListBase.createJsonFromElement(this.element);\n      this.setProperties({\n        fields: {\n          text: 'text',\n          value: 'text'\n        }\n      }, true);\n      this.resetList(jsonElement, this.fields);\n    } else if (this.element.tagName === 'SELECT') {\n      var dataSource = this.dataSource instanceof Array ? this.dataSource.length > 0 ? true : false : !isNullOrUndefined(this.dataSource) ? true : false;\n\n      if (!dataSource) {\n        this.renderItemsBySelect();\n      } else if (this.isDynamicDataChange) {\n        this.setListData(this.dataSource, this.fields, this.query);\n      }\n    } else {\n      this.setListData(this.dataSource, this.fields, this.query, e);\n    }\n  };\n  /**\n   * Get the properties to be maintained in persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  DropDownBase.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @param {string} value - Specifies the attribute values to add on the input element.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.updateDataAttribute = function (value) {\n    var invalidAttr = ['class', 'style', 'id', 'type', 'aria-expanded', 'aria-autocomplete', 'aria-readonly'];\n    var attr = {};\n\n    for (var a = 0; a < this.element.attributes.length; a++) {\n      if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n        attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n      }\n    }\n\n    extend(attr, value, attr);\n    this.setProperties({\n      htmlAttributes: attr\n    }, true);\n  };\n\n  DropDownBase.prototype.renderItemsBySelect = function () {\n    var element = this.element;\n    var fields = {\n      value: 'value',\n      text: 'text'\n    };\n    var jsonElement = [];\n    var group = element.querySelectorAll('select>optgroup');\n    var option = element.querySelectorAll('select>option');\n    this.getJSONfromOption(jsonElement, option, fields);\n\n    if (group.length) {\n      for (var i = 0; i < group.length; i++) {\n        var item = group[i];\n        var optionGroup = {};\n        optionGroup[fields.text] = item.label;\n        optionGroup.isHeader = true;\n        var child = item.querySelectorAll('option');\n        jsonElement.push(optionGroup);\n        this.getJSONfromOption(jsonElement, child, fields);\n      }\n\n      element.querySelectorAll('select>option');\n    }\n\n    this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n    this.resetList(jsonElement, fields);\n  };\n\n  DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n    var field = {\n      'fields': {\n        text: text,\n        value: value,\n        groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n        htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n        iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n      }\n    };\n    this.setProperties(field, true);\n  };\n\n  DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n    for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n      var option = options_1[_i];\n      var json = {};\n      json[fields.text] = option.innerText;\n      json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ? option.getAttribute(fields.value) : option.innerText;\n      items.push(json);\n    }\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.preRender = function () {\n    // there is no event handler\n    this.scrollTimer = -1;\n    this.enableRtlElements = [];\n    this.isRequested = false;\n    this.isDataFetched = false;\n    this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n    this.displayTemplateId = \"\" + this.element.id + DISPLAYTEMPLATE_PROPERTY;\n    this.spinnerTemplateId = \"\" + this.element.id + SPINNERTEMPLATE_PROPERTY;\n    this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n    this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n    this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n    this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n    this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n  };\n  /**\n   * Creates the list items of DropDownBase component.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setListData = function (dataSource, fields, query, event) {\n    var _this = this;\n\n    fields = fields ? fields : this.fields;\n    var ulElement;\n    this.isActive = true;\n    var eventArgs = {\n      cancel: false,\n      data: dataSource,\n      query: query\n    };\n    this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n    this.trigger('actionBegin', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.showSpinner();\n\n        if (dataSource instanceof DataManager) {\n          _this.isRequested = true;\n\n          if (_this.isDataFetched) {\n            _this.emptyDataRequest(fields);\n\n            return;\n          }\n\n          eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n            _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n\n            _this.trigger('actionComplete', e, function (e) {\n              if (!e.cancel) {\n                var listItems = e.result;\n\n                if (listItems.length === 0) {\n                  _this.isDataFetched = true;\n                }\n\n                ulElement = _this.renderItems(listItems, fields);\n\n                _this.onActionComplete(ulElement, listItems, e);\n\n                if (_this.groupTemplate) {\n                  _this.renderGroupTemplate(ulElement);\n                }\n\n                _this.isRequested = false;\n\n                _this.bindChildItems(listItems, ulElement, fields, e);\n              }\n            });\n          }).catch(function (e) {\n            _this.isRequested = false;\n\n            _this.onActionFailure(e);\n\n            _this.hideSpinner();\n          });\n        } else {\n          var dataManager = new DataManager(eventArgs.data);\n\n          var listItems = _this.getQuery(eventArgs.query).executeLocal(dataManager);\n\n          var localDataArgs = {\n            cancel: false,\n            result: listItems\n          };\n          _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n\n          _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n            if (!localDataArgs.cancel) {\n              ulElement = _this.renderItems(localDataArgs.result, fields);\n\n              _this.onActionComplete(ulElement, localDataArgs.result, event);\n\n              if (_this.groupTemplate) {\n                _this.renderGroupTemplate(ulElement);\n              }\n\n              _this.bindChildItems(localDataArgs.result, ulElement, fields);\n\n              setTimeout(function () {\n                if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || _this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)) {\n                  _this.updateDataList();\n                }\n              });\n            }\n          });\n        }\n      }\n    });\n  };\n\n  DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n    var _this = this;\n\n    if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n      setTimeout(function () {\n        var childNode = _this.remainingItems(_this.sortedData, fields);\n\n        append(childNode, ulElement);\n        _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n\n        _this.updateListValues();\n\n        _this.raiseDataBound(listItems, e);\n      }, 0);\n    } else {\n      this.raiseDataBound(listItems, e);\n    }\n  };\n\n  DropDownBase.prototype.updateListValues = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n    var liElement = null;\n\n    if (list) {\n      var listArr = [].slice.call(list.querySelectorAll(findNode));\n\n      for (var index = 0; index < listArr.length; index++) {\n        if (listArr[index].getAttribute(attribute) === value + '') {\n          liElement = listArr[index];\n          break;\n        }\n      }\n    }\n\n    return liElement;\n  };\n\n  DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n    this.hideSpinner();\n    var dataBoundEventArgs = {\n      items: listItems,\n      e: e\n    };\n    this.trigger('dataBound', dataBoundEventArgs);\n  };\n\n  DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n    var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n\n    if (this.itemTemplate) {\n      var listElements = this.templateListItem(spliceData, fields);\n      return [].slice.call(listElements.childNodes);\n    }\n\n    var type = this.typeOfData(spliceData).typeof;\n\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n    }\n\n    return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n  };\n\n  DropDownBase.prototype.emptyDataRequest = function (fields) {\n    var listItems = [];\n    this.onActionComplete(this.renderItems(listItems, fields), listItems);\n    this.isRequested = false;\n    this.hideSpinner();\n  };\n\n  DropDownBase.prototype.showSpinner = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.hideSpinner = function () {// Used this method in component side.\n  };\n\n  DropDownBase.prototype.onActionFailure = function (e) {\n    this.liCollections = [];\n    this.trigger('actionFailure', e);\n    this.l10nUpdate(true);\n\n    if (!isNullOrUndefined(this.list)) {\n      addClass([this.list], dropDownBaseClasses.noData);\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    this.listData = list; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n    }\n\n    this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n\n    if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n      for (var i = 0; i < ulElement.childElementCount; i++) {\n        if (ulElement.children[i].classList.contains('e-list-group-item')) {\n          if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n            addClass([ulElement.children[i]], HIDE_GROUPLIST);\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(this.list)) {\n      this.list.innerHTML = '';\n      this.list.appendChild(ulElement);\n      this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n      this.ulElement = this.list.querySelector('ul');\n      this.postRender(this.list, list, this.bindEvent);\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n    var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n\n    if (focusItem && !selectedItem) {\n      focusItem.classList.add(dropDownBaseClasses.focus);\n    }\n\n    if (list.length <= 0) {\n      this.l10nUpdate();\n      addClass([listElement], dropDownBaseClasses.noData);\n    } else {\n      listElement.classList.remove(dropDownBaseClasses.noData);\n    }\n  };\n  /**\n   * Get the query to do the data operation before list item generation.\n   *\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {Query} Returns the query to do the data query operation.\n   */\n\n\n  DropDownBase.prototype.getQuery = function (query) {\n    return query ? query : this.query ? this.query : new Query();\n  };\n  /**\n   * To render the template content for group header element.\n   *\n   * @param {HTMLElement} listEle - Specifies the group list elements.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n    if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n      var dataSource = this.dataSource;\n      var option = {\n        groupTemplateID: this.groupTemplateId,\n        isStringTemplate: this.isStringTemplate\n      };\n      var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n      var groupcheck = this.templateCompiler(this.groupTemplate);\n\n      if (groupcheck) {\n        var groupValue = select(this.groupTemplate, document).innerHTML.trim(); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n        var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this); //EJ2-55168- Group checkbox is not working with group template\n\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this); //EJ2-55168- Group checkbox is not working with group template\n\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      }\n\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * To create the ul li list items\n   *\n   * @param {object []} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the ul li list items.\n   */\n\n\n  DropDownBase.prototype.createListItems = function (dataSource, fields) {\n    if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n      if (fields.groupBy) {\n        if (this.sortOrder !== 'None') {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n\n        dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n      }\n\n      addClass([this.list], dropDownBaseClasses.grouping);\n    } else {\n      dataSource = this.getSortedDataSource(dataSource);\n    }\n\n    var options = this.listOption(dataSource, fields);\n    var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n    this.sortedData = dataSource;\n    return ListBase.createList(this.createElement, this.getModuleName() === 'autocomplete' ? spliceData : dataSource, options, true, this);\n  };\n\n  DropDownBase.prototype.listOption = function (dataSource, fields) {\n    var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n    var fieldValues = !isNullOrUndefined(fields.properties) ? fields.properties : fields;\n    var options = fields.text !== null || fields.value !== null ? {\n      fields: fieldValues,\n      showIcon: iconCss,\n      ariaAttributes: {\n        groupItemRole: 'presentation'\n      }\n    } : {\n      fields: {\n        value: 'text'\n      }\n    };\n    return extend({}, options, fields, true);\n  };\n\n  DropDownBase.prototype.setFloatingHeader = function (e) {\n    if (!isNullOrUndefined(this.list) && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n      if (isNullOrUndefined(this.fixedHeaderElement)) {\n        this.fixedHeaderElement = this.createElement('div', {\n          className: dropDownBaseClasses.fixedHead\n        });\n\n        if (!isNullOrUndefined(this.list) && !this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n          this.fixedHeaderElement.style.display = 'none';\n        }\n\n        if (!isNullOrUndefined(this.fixedHeaderElement) && !isNullOrUndefined(this.list)) {\n          prepend([this.fixedHeaderElement], this.list);\n        }\n\n        this.setFixedHeader();\n      }\n\n      if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n        this.setFixedHeader();\n      }\n\n      this.scrollStop(e);\n    }\n  };\n\n  DropDownBase.prototype.scrollStop = function (e) {\n    var target = !isNullOrUndefined(e) ? e.target : this.list;\n    var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n    var topIndex = Math.round(target.scrollTop / liHeight);\n    var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n\n    for (var i = topIndex; i > -1; i--) {\n      if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n        var currentLi = liCollections[i];\n        this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n        this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n        this.fixedHeaderElement.style.display = 'block';\n        break;\n      } else {\n        this.fixedHeaderElement.style.display = 'none';\n        this.fixedHeaderElement.style.top = 'none';\n      }\n    }\n  };\n\n  DropDownBase.prototype.getValidLi = function () {\n    return this.liCollections[0];\n  };\n  /**\n   * To render the list items\n   *\n   * @param {object[]} listData - Specifies the list of array of data.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the list items.\n   */\n\n\n  DropDownBase.prototype.renderItems = function (listData, fields) {\n    var ulElement;\n\n    if (this.itemTemplate && listData) {\n      var dataSource = listData;\n\n      if (dataSource && fields.groupBy) {\n        if (this.sortOrder !== 'None') {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n\n        dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n      } else {\n        dataSource = this.getSortedDataSource(dataSource);\n      }\n\n      this.sortedData = dataSource;\n      var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n      ulElement = this.templateListItem(this.getModuleName() === 'autocomplete' ? spliceData : dataSource, fields);\n    } else {\n      ulElement = this.createListItems(listData, fields);\n    }\n\n    return ulElement;\n  };\n\n  DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n    var option = this.listOption(dataSource, fields);\n    option.templateID = this.itemTemplateId;\n    option.isStringTemplate = this.isStringTemplate;\n    var itemcheck = this.templateCompiler(this.itemTemplate);\n\n    if (itemcheck) {\n      var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n      return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n    } else {\n      return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n    }\n  };\n\n  DropDownBase.prototype.typeOfData = function (items) {\n    var item = {\n      typeof: null,\n      item: null\n    };\n\n    for (var i = 0; !isNullOrUndefined(items) && i < items.length; i++) {\n      if (!isNullOrUndefined(items[i])) {\n        var listDataType = typeof items[i] === 'string' || typeof items[i] === 'number' || typeof items[i] === 'boolean';\n        var isNullData = listDataType ? isNullOrUndefined(items[i]) : isNullOrUndefined(getValue(this.fields.value ? this.fields.value : 'value', items[i]));\n\n        if (!isNullData) {\n          return item = {\n            typeof: typeof items[i],\n            item: items[i]\n          };\n        }\n      }\n    }\n\n    return item;\n  };\n\n  DropDownBase.prototype.setFixedHeader = function () {\n    if (!isNullOrUndefined(this.list)) {\n      this.list.parentElement.style.display = 'block';\n    }\n\n    var borderWidth = 0;\n\n    if (this.list && this.list.parentElement) {\n      borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n      /*Shorthand property not working in Firefox for getComputedStyle method.\n      Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n      Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n\n      if (isNaN(borderWidth)) {\n        var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n        var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n        var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n        var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n        borderWidth = borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth;\n      }\n    }\n\n    if (!isNullOrUndefined(this.liCollections)) {\n      var liWidth = this.getValidLi().offsetWidth - borderWidth;\n      this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n    }\n\n    setStyleAttribute(this.fixedHeaderElement, {\n      zIndex: 10\n    });\n    var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n    this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n  };\n\n  DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n    if (dataSource && this.sortOrder !== 'None') {\n      var textField = this.fields.text ? this.fields.text : 'text';\n\n      if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number' || this.typeOfData(dataSource).typeof === 'boolean') {\n        textField = '';\n      }\n\n      dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n    }\n\n    return dataSource;\n  };\n  /**\n   * Return the index of item which matched with given value in data source\n   *\n   * @param {string | number | boolean} value - Specifies given value.\n   * @returns {number} Returns the index of the item.\n   */\n\n\n  DropDownBase.prototype.getIndexByValue = function (value) {\n    var index;\n    var listItems = this.getItems();\n\n    for (var i = 0; i < listItems.length; i++) {\n      if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n        index = i;\n        break;\n      }\n    }\n\n    return index;\n  };\n  /**\n   * To dispatch the event manually\n   *\n   * @param {HTMLElement} element - Specifies the element to dispatch the event.\n   * @param {string} type - Specifies the name of the event.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.dispatchEvent = function (element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n  };\n  /**\n   * To set the current fields\n   *\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.setFields = function () {\n    if (this.fields.value && !this.fields.text) {\n      this.updateFields(this.fields.value, this.fields.value);\n    } else if (!this.fields.value && this.fields.text) {\n      this.updateFields(this.fields.text, this.fields.text);\n    } else if (!this.fields.value && !this.fields.text) {\n      this.updateFields('text', 'text');\n    }\n  };\n  /**\n   * reset the items list.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.resetList = function (dataSource, fields, query, e) {\n    if (this.list) {\n      if (this.element.tagName === 'SELECT' && this.element.options.length > 0 || this.element.tagName === 'UL' && this.element.childNodes.length > 0) {\n        var data = dataSource instanceof Array ? dataSource.length > 0 : !isNullOrUndefined(dataSource);\n\n        if (!data && this.selectData && this.selectData.length > 0) {\n          dataSource = this.selectData;\n        }\n      }\n\n      dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;\n      this.addedNewItem = false;\n      this.setListData(dataSource, fields, query, e);\n    }\n  };\n\n  DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n    if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n      this.selectData = this.listData;\n    }\n  };\n\n  DropDownBase.prototype.updateSelection = function () {// This is for after added the item, need to update the selected index values.\n  };\n\n  DropDownBase.prototype.renderList = function () {\n    // This is for render the list items.\n    this.render();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateDataSource = function (props) {\n    this.resetList(this.dataSource);\n  };\n\n  DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n    this.isDataFetched = false;\n    var updateData = {};\n\n    for (var j = 0; props.length > j; j++) {\n      if (newProp[props[j]] && props[j] === 'fields') {\n        this.setFields();\n        updateData[props[j]] = newProp[props[j]];\n      } else if (newProp[props[j]]) {\n        updateData[props[j]] = newProp[props[j]];\n      }\n    }\n\n    if (Object.keys(updateData).length > 0) {\n      if (Object.keys(updateData).indexOf('dataSource') === -1) {\n        updateData.dataSource = this.dataSource;\n      }\n\n      this.updateDataSource(updateData);\n    }\n  };\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'dropdownbase') {\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'query':\n        case 'sortOrder':\n        case 'dataSource':\n        case 'itemTemplate':\n          break;\n\n        case 'enableRtl':\n          this.setEnableRtl();\n          break;\n\n        case 'groupTemplate':\n          this.renderGroupTemplate(this.list);\n\n          if (this.ulElement && this.fixedHeaderElement) {\n            var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n            this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n          }\n\n          break;\n\n        case 'locale':\n          if (this.list && !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0) {\n            this.l10nUpdate();\n          }\n\n          break;\n\n        case 'zIndex':\n          this.setProperties({\n            zIndex: newProp.zIndex\n          }, true);\n          this.setZIndex();\n          break;\n      }\n    }\n  };\n  /**\n   * Build and render the component\n   *\n   * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.render = function (e, isEmptyData) {\n    this.list = this.createElement('div', {\n      className: dropDownBaseClasses.content,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    this.list.classList.add(dropDownBaseClasses.root);\n    this.setFields();\n    var rippleModel = {\n      duration: 300,\n      selector: '.' + dropDownBaseClasses.li\n    };\n    this.rippleFun = rippleEffect(this.list, rippleModel);\n    var group = this.element.querySelector('select>optgroup');\n\n    if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n\n    if (this.getModuleName() === 'dropdownbase') {\n      if (this.element.getAttribute('tabindex')) {\n        this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n      }\n\n      removeClass([this.element], dropDownBaseClasses.root);\n      this.element.style.display = 'none';\n      var wrapperElement = this.createElement('div');\n      this.element.parentElement.insertBefore(wrapperElement, this.element);\n      wrapperElement.appendChild(this.element);\n      wrapperElement.appendChild(this.list);\n    }\n\n    this.setEnableRtl();\n\n    if (!isEmptyData) {\n      this.initialize(e);\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  DropDownBase.prototype.getModuleName = function () {\n    return 'dropdownbase';\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n\n\n  DropDownBase.prototype.getItems = function () {\n    return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  DropDownBase.prototype.addItem = function (items, itemIndex) {\n    if (!this.list || this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox') {\n      this.renderList();\n    }\n\n    if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n      var newList = [].slice.call(this.listData);\n      newList.push(items);\n      newList = this.getSortedDataSource(newList);\n\n      if (this.fields.groupBy) {\n        newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n        itemIndex = newList.indexOf(items);\n      } else {\n        itemIndex = newList.indexOf(items);\n      }\n    }\n\n    var itemsCount = this.getItems().length;\n    var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n    items = items instanceof Array ? items : [items];\n    var index;\n    index = isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1 ? itemsCount : itemIndex;\n    var fields = this.fields;\n\n    if (items && fields.groupBy) {\n      items = ListBase.groupDataSource(items, fields.properties);\n    }\n\n    var liCollections = [];\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var isHeader = item.isHeader;\n      var li = this.createElement('li', {\n        className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li,\n        id: 'option-add-' + i\n      });\n      var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n\n      if (isHeader) {\n        li.innerText = itemText;\n      }\n\n      if (this.itemTemplate && !isHeader) {\n        var itemCheck = this.templateCompiler(this.itemTemplate);\n        var compiledString = itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n\n        if (addItemTemplate) {\n          append(addItemTemplate, li);\n        }\n      } else if (!isHeader) {\n        li.appendChild(document.createTextNode(itemText));\n      }\n\n      li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n      li.setAttribute('role', 'option');\n      this.notify('addItem', {\n        module: 'CheckBoxSelection',\n        item: li\n      });\n      liCollections.push(li);\n      this.listData.push(item);\n\n      if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n        index = null;\n      }\n\n      this.updateActionCompleteData(li, item, index); //Listbox event\n\n      this.trigger('beforeItemRender', {\n        element: li,\n        item: item\n      });\n    }\n\n    if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n      if (!isNullOrUndefined(this.list)) {\n        this.list.innerHTML = '';\n        this.list.classList.remove(dropDownBaseClasses.noData);\n\n        if (!isNullOrUndefined(this.ulElement)) {\n          this.list.appendChild(this.ulElement);\n        }\n      }\n\n      this.liCollections = liCollections;\n\n      if (!isNullOrUndefined(liCollections) && !isNullOrUndefined(this.ulElement)) {\n        append(liCollections, this.ulElement);\n      }\n\n      this.updateAddItemList(this.list, itemsCount);\n    } else {\n      if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n        this.ulElement.innerHTML = '';\n      }\n\n      var attr = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n\n        for (var j = 0; j < listGroupItem.length; j++) {\n          attr[j] = listGroupItem[j].innerText;\n        }\n\n        if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n          for (var j = 0; j < listGroupItem.length; j++) {\n            if (attr[j] === liCollections[i].innerText) {\n              if (this.sortOrder === 'None') {\n                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n              } else {\n                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n              }\n\n              i = i + 1;\n              break;\n            }\n          }\n        } else {\n          if (this.liCollections[index]) {\n            this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n          } else {\n            this.ulElement.appendChild(liCollections[i]);\n          }\n        }\n\n        var tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 0, liCollections[i]);\n        this.liCollections = tempLi;\n        index += 1;\n\n        if (this.getModuleName() === 'multiselect') {\n          this.updateDataList();\n        }\n      }\n    }\n\n    if (selectedItemValue || itemIndex === 0) {\n      this.updateSelection();\n    }\n\n    this.addedNewItem = true;\n  };\n\n  DropDownBase.prototype.validationAttribute = function (target, hidden) {\n    var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n    hidden.setAttribute('name', name);\n    target.removeAttribute('name');\n    var attributes$$1 = ['required', 'aria-required', 'form'];\n\n    for (var i = 0; i < attributes$$1.length; i++) {\n      if (!target.getAttribute(attributes$$1[i])) {\n        continue;\n      }\n\n      var attr = target.getAttribute(attributes$$1[i]);\n      hidden.setAttribute(attributes$$1[i], attr);\n      target.removeAttribute(attributes$$1[i]);\n    }\n  };\n\n  DropDownBase.prototype.setZIndex = function () {// this is for component wise\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {// this is for ComboBox custom value\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownBase.prototype.updateAddItemList = function (list, itemCount) {// this is for multiselect add item\n  };\n\n  DropDownBase.prototype.updateDataList = function () {// this is for multiselect update list items\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n\n\n  DropDownBase.prototype.getDataByValue = function (value) {\n    if (!isNullOrUndefined(this.listData)) {\n      var type = this.typeOfData(this.listData).typeof;\n\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n          var item = _a[_i];\n\n          if (!isNullOrUndefined(item) && item === value) {\n            return item;\n          }\n        }\n      } else {\n        for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n          var item = _c[_b];\n\n          if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : 'value', item) === value) {\n            return item;\n          }\n        }\n      }\n    }\n\n    return null;\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownBase.prototype.destroy = function () {\n    if (document.body.contains(this.list)) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n\n      if (!isNullOrUndefined(this.rippleFun)) {\n        this.rippleFun();\n      }\n\n      detach(this.list);\n    }\n\n    this.liCollections = null;\n    this.ulElement = null;\n    this.list = null;\n    this.enableRtlElements = null;\n    this.rippleFun = null;\n\n    _super.prototype.destroy.call(this);\n  };\n\n  __decorate([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], DropDownBase.prototype, \"fields\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"itemTemplate\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"groupTemplate\", void 0);\n\n  __decorate([Property('No records found')], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate([Property('Request failed')], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate([Property('None')], DropDownBase.prototype, \"sortOrder\", void 0);\n\n  __decorate([Property([])], DropDownBase.prototype, \"dataSource\", void 0);\n\n  __decorate([Property(null)], DropDownBase.prototype, \"query\", void 0);\n\n  __decorate([Property('StartsWith')], DropDownBase.prototype, \"filterType\", void 0);\n\n  __decorate([Property(true)], DropDownBase.prototype, \"ignoreCase\", void 0);\n\n  __decorate([Property(1000)], DropDownBase.prototype, \"zIndex\", void 0);\n\n  __decorate([Property(false)], DropDownBase.prototype, \"ignoreAccent\", void 0);\n\n  __decorate([Property()], DropDownBase.prototype, \"locale\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionBegin\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionComplete\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"actionFailure\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"select\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"dataBound\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"created\", void 0);\n\n  __decorate([Event()], DropDownBase.prototype, \"destroyed\", void 0);\n\n  DropDownBase = __decorate([NotifyPropertyChanges], DropDownBase);\n  return DropDownBase;\n}(Component);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$1 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\n\n\nvar dropDownListClasses = {\n  root: 'e-dropdownlist',\n  hover: dropDownBaseClasses.hover,\n  selected: dropDownBaseClasses.selected,\n  rtl: dropDownBaseClasses.rtl,\n  li: dropDownBaseClasses.li,\n  disable: dropDownBaseClasses.disabled,\n  base: dropDownBaseClasses.root,\n  focus: dropDownBaseClasses.focus,\n  input: 'e-input-group',\n  inputFocus: 'e-input-focus',\n  icon: 'e-input-group-icon e-ddl-icon',\n  iconAnimation: 'e-icon-anim',\n  value: 'e-input-value',\n  device: 'e-ddl-device',\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  mobileFilter: 'e-ddl-device-filter',\n  footer: 'e-ddl-footer',\n  header: 'e-ddl-header',\n  clearIcon: 'e-clear-icon',\n  clearIconHide: 'e-clear-icon-hide',\n  popupFullScreen: 'e-popup-full-page',\n  disableIcon: 'e-ddl-disable-icon',\n  hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n  container: null,\n  buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\n\nvar DropDownList =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$1(DropDownList, _super);\n  /**\n   * * Constructor for creating the DropDownList component.\n   *\n   * @param {DropDownListModel} options - Specifies the DropDownList model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function DropDownList(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.isListSearched = false;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    return _this;\n  }\n  /**\n   * Initialize the event handler.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.preRender = function () {\n    this.valueTempElement = null;\n    this.element.style.opacity = '0';\n    this.initializeData();\n\n    _super.prototype.preRender.call(this);\n\n    this.activeIndex = this.index;\n    this.queryString = '';\n  };\n\n  DropDownList.prototype.initializeData = function () {\n    this.isPopupOpen = false;\n    this.isDocumentClick = false;\n    this.isInteracted = false;\n    this.isFilterFocus = false;\n    this.beforePopupOpen = false;\n    this.initial = true;\n    this.initRemoteRender = false;\n    this.isNotSearchList = false;\n    this.isTyped = false;\n    this.isSelected = false;\n    this.preventFocus = false;\n    this.preventAutoFill = false;\n    this.isValidKey = false;\n    this.typedString = '';\n    this.isEscapeKey = false;\n    this.isPreventBlur = false;\n    this.isTabKey = false;\n    this.actionCompleteData = {\n      isUpdated: false\n    };\n    this.actionData = {\n      isUpdated: false\n    };\n    this.prevSelectPoints = {};\n    this.isSelectCustom = false;\n    this.isDropDownClick = false;\n    this.preventAltUp = false;\n    this.isCustomFilter = false;\n    this.isSecondClick = false;\n    this.previousValue = null;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n\n  DropDownList.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  };\n\n  DropDownList.prototype.renderList = function (e, isEmptyData) {\n    _super.prototype.render.call(this, e, isEmptyData);\n\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n\n  DropDownList.prototype.floatLabelChange = function () {\n    if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n      var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n\n      if (this.inputElement.value !== '' || this.isInteracted) {\n        classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n      } else {\n        classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n      }\n    }\n  };\n\n  DropDownList.prototype.resetHandler = function (e) {\n    e.preventDefault();\n    this.clearAll(e);\n  };\n\n  DropDownList.prototype.resetFocusElement = function () {\n    this.removeHover();\n    this.removeSelection();\n    this.removeFocus();\n    this.list.scrollTop = 0;\n\n    if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n      var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n\n      if (li) {\n        li.classList.add(dropDownListClasses.focus);\n      }\n    }\n  };\n\n  DropDownList.prototype.clearAll = function (e, properties) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n\n    if (isNullOrUndefined(properties) || !isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n      this.isActive = true;\n      this.resetSelection(properties);\n    }\n\n    var dataItem = this.getItemData();\n\n    if (this.previousValue === dataItem.value) {\n      return;\n    }\n\n    this.onChangeEvent(e);\n  };\n\n  DropDownList.prototype.resetSelection = function (properties) {\n    if (this.list) {\n      if (!isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n        this.selectedLI = null;\n        this.actionCompleteData.isUpdated = false;\n        this.actionCompleteData.ulElement = null;\n        this.actionCompleteData.list = null;\n        this.resetList(properties.dataSource);\n      } else {\n        if (this.allowFiltering && this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list) && this.actionCompleteData.list.length > 0) {\n          this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n        }\n\n        this.resetFocusElement();\n      }\n    }\n\n    if (!isNullOrUndefined(this.hiddenElement)) {\n      this.hiddenElement.innerHTML = '';\n    }\n\n    if (!isNullOrUndefined(this.inputElement)) {\n      this.inputElement.value = '';\n    }\n\n    this.value = null;\n    this.itemData = null;\n    this.text = null;\n    this.index = null;\n    this.activeIndex = null;\n    this.item = null;\n    this.queryString = '';\n\n    if (this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n      this.valueTempElement = null;\n    }\n\n    this.setSelection(null, null);\n    this.isSelectCustom = false;\n    this.updateIconState();\n    this.cloneElements();\n  };\n\n  DropDownList.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        if (htmlAttr === 'class') {\n          var updatedClassValue = this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ').trim();\n\n          if (updatedClassValue !== '') {\n            addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n          }\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n          this.enabled = false;\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n          this.readonly = true;\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.container.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n        } else if (htmlAttr === 'aria-label') {\n          if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            this.inputElement.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n          } else {\n            this.inputWrapper.container.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n          }\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'role', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n\n          if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            defaultAttr.push('tabindex');\n          }\n\n          if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            if (htmlAttr === 'placeholder') {\n              Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputElement);\n            } else {\n              this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n            }\n          } else {\n            this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          }\n        }\n      }\n    }\n\n    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n      this.inputWrapper.container.removeAttribute('tabindex');\n    }\n  };\n\n  DropDownList.prototype.getAriaAttributes = function () {\n    return {\n      'aria-disabled': 'false',\n      'role': 'combobox',\n      'aria-expanded': 'false',\n      'aria-live': 'polite',\n      'aria-labelledby': this.hiddenElement.id\n    };\n  };\n\n  DropDownList.prototype.setEnableRtl = function () {\n    Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = this.enableRtl;\n      this.popupObj.dataBind();\n    }\n  };\n\n  DropDownList.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputElement);\n\n    if (this.enabled) {\n      removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'false');\n      this.targetElement().setAttribute('tabindex', this.tabIndex);\n    } else {\n      this.hidePopup();\n      addClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'true');\n      this.targetElement().tabIndex = -1;\n    }\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  DropDownList.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  DropDownList.prototype.getLocaleName = function () {\n    return 'drop-down-list';\n  };\n\n  DropDownList.prototype.preventTabIndex = function (element) {\n    if (this.getModuleName() === 'dropdownlist') {\n      element.tabIndex = -1;\n    }\n  };\n\n  DropDownList.prototype.targetElement = function () {\n    return !isNullOrUndefined(this.inputWrapper) ? this.inputWrapper.container : null;\n  };\n\n  DropDownList.prototype.getNgDirective = function () {\n    return 'EJS-DROPDOWNLIST';\n  };\n\n  DropDownList.prototype.getElementByText = function (text) {\n    return this.getElementByValue(this.getValueByText(text));\n  };\n\n  DropDownList.prototype.getElementByValue = function (value) {\n    var item;\n    var listItems = this.getItems();\n\n    for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n      var liItem = listItems_1[_i];\n\n      if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n        item = liItem;\n        break;\n      }\n    }\n\n    return item;\n  };\n\n  DropDownList.prototype.initValue = function () {\n    this.renderList();\n\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n\n  DropDownList.prototype.updateValues = function () {\n    if (!isNullOrUndefined(this.value)) {\n      this.setSelection(this.getElementByValue(this.value), null);\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var element = this.getElementByText(this.text);\n\n      if (isNullOrUndefined(element)) {\n        this.setProperties({\n          text: null\n        });\n        return;\n      } else {\n        this.setSelection(element, null);\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n\n  DropDownList.prototype.onBlurHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var target = e.relatedTarget;\n    var currentTarget = e.target;\n    var isPreventBlur = this.isPreventBlur;\n    this.isPreventBlur = false; //IE 11 - issue\n\n    if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {\n      if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n        this.filterInput.focus();\n      } else {\n        this.targetElement().focus();\n      }\n\n      return;\n    }\n\n    if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {\n      if (!this.beforePopupOpen) {\n        this.isDocumentClick = false;\n      }\n\n      return;\n    }\n\n    if (this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== 'dropdownlist' && !this.inputWrapper.container.contains(target) || this.isTabKey) {\n      this.isDocumentClick = this.isPopupOpen ? true : false;\n      this.focusOutAction(e);\n      this.isTabKey = false;\n    }\n\n    if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n      this.isActive = false;\n      this.beforePopupOpen = false;\n    }\n  };\n\n  DropDownList.prototype.focusOutAction = function (e) {\n    this.isInteracted = false;\n    this.focusOut(e);\n    this.onFocusOut();\n  };\n\n  DropDownList.prototype.onFocusOut = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isSelected) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(null);\n    }\n\n    this.floatLabelChange();\n    this.dispatchEvent(this.hiddenElement, 'change');\n\n    if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n      this.dispatchEvent(this.inputElement, 'blur');\n    }\n\n    if (this.inputWrapper.clearButton) {\n      addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n    }\n\n    this.trigger('blur');\n  };\n\n  DropDownList.prototype.onFocus = function (e) {\n    if (!this.isInteracted) {\n      this.isInteracted = true;\n      var args = {\n        isInteracted: e ? true : false,\n        event: e\n      };\n      this.trigger('focus', args);\n    }\n\n    this.updateIconState();\n  };\n\n  DropDownList.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement && e.target === formElement) {\n      var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute('value');\n      this.text = val;\n    }\n  };\n\n  DropDownList.prototype.wireEvent = function () {\n    EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n    this.bindCommonEvent();\n  };\n\n  DropDownList.prototype.bindCommonEvent = function () {\n    EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    } else {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.mobileKeyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n\n    this.bindClearEvent();\n  };\n\n  DropDownList.prototype.bindClearEvent = function () {\n    if (this.showClearButton) {\n      EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n    }\n  };\n\n  DropDownList.prototype.unBindCommonEvent = function () {\n    if (!isNullOrUndefined(this.inputWrapper) && this.targetElement()) {\n      EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n    }\n\n    var formElement = this.inputElement && closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n\n    if (this.showClearButton) {\n      EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n    }\n  };\n\n  DropDownList.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.wireListEvents = function () {\n    if (!isNullOrUndefined(this.list)) {\n      EventHandler.add(this.list, 'click', this.onMouseClick, this);\n      EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n  };\n\n  DropDownList.prototype.onSearch = function (e) {\n    if (e.charCode !== 32 && e.charCode !== 13) {\n      if (this.list === undefined) {\n        this.renderList();\n      }\n\n      this.searchKeyEvent = e;\n      this.onServerIncrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onServerIncrementalSearch = function (e) {\n    if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n      this.incrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n\n    if (!this.isValidLI(li)) {\n      return;\n    }\n\n    this.setSelection(li, e);\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      history.back();\n    } else {\n      var delay = 100;\n      this.closePopup(delay, e);\n    }\n  };\n\n  DropDownList.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n\n  DropDownList.prototype.setHover = function (li) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n\n  DropDownList.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n\n  DropDownList.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  DropDownList.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n\n  DropDownList.prototype.incrementalSearch = function (e) {\n    if (this.liCollections.length > 0) {\n      var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n\n      if (!isNullOrUndefined(li)) {\n        this.setSelection(li, e);\n        this.setScrollPosition();\n      }\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      this.spinnerElement.innerHTML = '';\n      this.spinnerElement = null;\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n\n  DropDownList.prototype.keyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n    var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n    this.isEscapeKey = e.action === 'escape';\n    this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n\n    if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      var isTabAction = e.action === 'tab' || e.action === 'close';\n\n      if (isNullOrUndefined(this.list) && !this.isRequested && !isTabAction && e.action !== 'escape') {\n        this.searchKeyEvent = e;\n        this.renderList(e);\n      }\n\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n\n      if (isTabAction && this.getModuleName() !== 'autocomplete' && this.isPopupOpen || e.action === 'escape') {\n        e.preventDefault();\n      }\n\n      this.isSelected = e.action === 'escape' ? false : this.isSelected;\n      this.isTyped = isNavigation || e.action === 'escape' ? false : this.isTyped;\n\n      switch (e.action) {\n        case 'down':\n        case 'up':\n          this.updateUpDownAction(e);\n          break;\n\n        case 'pageUp':\n          this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'pageDown':\n          this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'home':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'end':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'space':\n          if (this.getModuleName() === 'dropdownlist') {\n            if (!this.beforePopupOpen) {\n              this.showPopup();\n            }\n          }\n\n          break;\n\n        case 'open':\n          this.showPopup(e);\n          break;\n\n        case 'hide':\n          this.preventAltUp = this.isPopupOpen;\n          this.hidePopup(e);\n          this.focusDropDown(e);\n          break;\n\n        case 'enter':\n          this.selectCurrentItem(e);\n          break;\n\n        case 'tab':\n          this.selectCurrentValueOnTab(e);\n          break;\n\n        case 'escape':\n        case 'close':\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n            this.focusDropDown(e);\n          }\n\n          break;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateUpDownAction = function (e) {\n    var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n\n      if (this.getModuleName() === 'autocomplete') {\n        startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n        index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      }\n\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n\n    e.preventDefault();\n  };\n\n  DropDownList.prototype.updateHomeEndAction = function (e) {\n    if (this.getModuleName() === 'dropdownlist') {\n      var findLi = 0;\n\n      if (e.action === 'home') {\n        findLi = 0;\n      } else {\n        findLi = this.getItems().length - 1;\n      }\n\n      e.preventDefault();\n\n      if (this.activeIndex === findLi) {\n        return;\n      }\n\n      this.setSelection(this.liCollections[findLi], e);\n    }\n  };\n\n  DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.selectCurrentItem(e);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n        this.focusDropDown(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.mobileKeyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isEditTextBox() && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      if (this.list === undefined && !this.isRequested) {\n        this.searchKeyEvent = e;\n        this.renderList();\n      }\n\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n\n      if (e.action === 'enter') {\n        this.selectCurrentItem(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectCurrentItem = function (e) {\n    if (this.isPopupOpen) {\n      var li = this.list.querySelector('.' + dropDownListClasses.focus);\n\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n\n      this.hidePopup(e);\n      this.focusDropDown(e);\n    } else {\n      this.showPopup();\n    }\n  };\n\n  DropDownList.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  DropDownList.prototype.getPageCount = function () {\n    var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n  };\n\n  DropDownList.prototype.pageUpSelection = function (steps, event) {\n    var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n    this.setSelection(previousItem, event);\n  };\n\n  DropDownList.prototype.pageDownSelection = function (steps, event) {\n    var list = this.getItems();\n    var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n    this.setSelection(previousItem, event);\n  };\n\n  DropDownList.prototype.unWireEvent = function () {\n    if (!isNullOrUndefined(this.inputWrapper)) {\n      EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n      EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n      EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n    }\n\n    this.unBindCommonEvent();\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.unWireListEvents = function () {\n    if (this.list) {\n      EventHandler.remove(this.list, 'click', this.onMouseClick);\n      EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n      EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    }\n  };\n\n  DropDownList.prototype.checkSelector = function (id) {\n    return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n  };\n\n  DropDownList.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.container.contains(e.target)) {\n      if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n        this.isDocumentClick = true;\n        var isActive = this.isRequested;\n        this.isInteracted = false;\n        this.hidePopup(e);\n\n        if (!isActive) {\n          this.onFocusOut();\n          this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n      }\n    } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === 'combobox' && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n      this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);\n      e.preventDefault();\n    }\n  };\n\n  DropDownList.prototype.activeStateChange = function () {\n    if (this.isDocumentClick) {\n      this.hidePopup();\n      this.onFocusOut();\n      this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n    }\n  };\n\n  DropDownList.prototype.focusDropDown = function (e) {\n    if (!this.initial && this.isFilterLayout()) {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.dropDownClick = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n      return;\n    }\n\n    var target = e.target;\n\n    if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n      e.preventDefault();\n    }\n\n    if (!this.readonly) {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n\n        if (this.isFilterLayout()) {\n          this.focusDropDown(e);\n        }\n      } else {\n        this.focusIn(e);\n        this.floatLabelChange();\n        this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n        this.isDropDownClick = true;\n        this.showPopup(e);\n      } // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n      var proxy_1 = this; // eslint-disable-next-line max-len\n\n      var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;\n\n      if (!this.isSecondClick) {\n        setTimeout(function () {\n          proxy_1.cloneElements();\n          proxy_1.isSecondClick = true;\n        }, duration);\n      }\n    } else {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.cloneElements = function () {\n    if (this.list) {\n      var ulElement = this.list.querySelector('ul');\n\n      if (ulElement) {\n        ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n        this.actionCompleteData.ulElement = ulElement;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n\n    if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n        } else {\n          _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n\n    if (this.itemData != selectedData) {\n      this.previousValue = !isNullOrUndefined(this.itemData) ? typeof this.itemData == \"object\" ? this.checkFieldValue(this.itemData, this.fields.value.split('.')) : this.itemData : null;\n    }\n\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n\n  DropDownList.prototype.activeItem = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n      this.removeSelection();\n      li.classList.add(dropDownBaseClasses.selected);\n      this.removeHover();\n      li.setAttribute('aria-selected', 'true');\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownList.prototype.setValue = function (e) {\n    var dataItem = this.getItemData();\n\n    if (dataItem.value === null) {\n      Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n    } else {\n      Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    if (this.valueTemplate && this.itemData !== null) {\n      this.setValueTemplate();\n    } else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n    }\n\n    var clearIcon = dropDownListClasses.clearIcon;\n    var isFilterElement = this.isFiltering() && this.filterInput && this.getModuleName() === 'combobox';\n    var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n    if (this.isFiltering() && clearElement) {\n      clearElement.style.removeProperty('visibility');\n    }\n\n    if (this.previousValue === dataItem.value) {\n      this.isSelected = false;\n      return true;\n    } else {\n      this.isSelected = !this.initial ? true : false;\n      this.isSelectCustom = false;\n\n      if (this.getModuleName() === 'dropdownlist') {\n        this.updateIconState();\n      }\n\n      return false;\n    }\n  };\n\n  DropDownList.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n\n  DropDownList.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n\n    if (this.setValue(e)) {\n      return;\n    }\n\n    if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter')) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(e);\n    }\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n      this.setScrollPosition(e);\n    }\n\n    if (Browser.info.name !== 'mozilla') {\n      if (this.targetElement()) {\n        attributes(this.targetElement(), {\n          'aria-describedby': this.inputElement.id !== '' ? this.inputElement.id : this.element.id\n        });\n        this.targetElement().removeAttribute('aria-live');\n      }\n    }\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n      attributes(this.targetElement(), {\n        'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n      });\n    } else if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n      attributes(this.targetElement(), {\n        'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id\n      });\n    }\n  };\n\n  DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n    var checkTemplate = false;\n\n    if (dropdownTemplate) {\n      try {\n        checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  DropDownList.prototype.setValueTemplate = function () {\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['valueTemplate']);\n\n      if (this.valueTempElement) {\n        detach(this.valueTempElement);\n        this.inputElement.style.display = 'block';\n        this.valueTempElement = null;\n      }\n    }\n\n    if (!this.valueTempElement) {\n      this.valueTempElement = this.createElement('span', {\n        className: dropDownListClasses.value\n      });\n      this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n      this.inputElement.style.display = 'none';\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.valueTempElement.innerHTML = '';\n    }\n\n    var valuecheck = this.dropdownCompiler(this.valueTemplate);\n\n    if (valuecheck) {\n      compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n    } else {\n      compiledString = compile(this.valueTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n\n    if (valueCompTemp && valueCompTemp.length > 0) {\n      for (var i = 0; i < valueCompTemp.length; i++) {\n        this.valueTempElement.appendChild(valueCompTemp[i]);\n      }\n    }\n\n    this.renderReactTemplates();\n  };\n\n  DropDownList.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  DropDownList.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n  /**\n   * To trigger the change event for list.\n   *\n   * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onChangeEvent = function (eve) {\n    var dataItem = this.getItemData();\n    var index = this.isSelectCustom ? null : this.activeIndex;\n    this.setProperties({\n      'index': index,\n      'text': dataItem.text,\n      'value': dataItem.value\n    }, true);\n    this.detachChangeEvent(eve);\n    this.dispatchEvent(this.hiddenElement, 'change');\n  };\n\n  DropDownList.prototype.detachChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  DropDownList.prototype.detachChangeEvent = function (eve) {\n    this.isSelected = false;\n    this.previousValue = this.value;\n    this.activeIndex = this.index;\n    this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n\n    if (!this.initial) {\n      var items = this.detachChanges(this.itemData);\n      var preItems = void 0;\n\n      if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n        preItems = Object.defineProperties({}, {\n          value: {\n            value: this.previousItemData,\n            enumerable: true\n          },\n          text: {\n            value: this.previousItemData,\n            enumerable: true\n          }\n        });\n      } else {\n        preItems = this.previousItemData;\n      }\n\n      this.setHiddenValue();\n      var eventArgs = {\n        e: eve,\n        item: this.item,\n        itemData: items,\n        previousItem: this.previousSelectedLI,\n        previousItemData: preItems,\n        isInteracted: eve ? true : false,\n        value: this.value,\n        element: this.element,\n        event: eve\n      };\n\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n    }\n\n    if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n      removeClass([this.inputWrapper.container], 'e-valid-input');\n    }\n  };\n\n  DropDownList.prototype.setHiddenValue = function () {\n    if (!isNullOrUndefined(this.value)) {\n      if (this.hiddenElement.querySelector('option')) {\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.textContent = this.text;\n        selectedElement.setAttribute('value', this.value.toString());\n      } else {\n        if (!isNullOrUndefined(this.hiddenElement)) {\n          this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n          var selectedElement = this.hiddenElement.querySelector('option');\n          selectedElement.setAttribute('value', this.value.toString());\n        }\n      }\n    } else {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /**\n   * Filter bar implementation\n   *\n   * @param {KeyboardEventArgs} e - Specifies the event arguments.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onFilterUp = function (e) {\n    if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n      this.isValidKey = false;\n\n      switch (e.keyCode) {\n        case 38: //up arrow\n\n        case 40:\n          //down arrow\n          if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else {\n            this.preventAutoFill = false;\n          }\n\n          this.preventAltUp = false;\n\n          if (this.getModuleName() === 'autocomplete' && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n            attributes(this.targetElement(), {\n              'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n            });\n          }\n\n          e.preventDefault();\n          break;\n\n        case 46: //delete\n\n        case 8:\n          //backspace\n          this.typedString = this.filterInput.value;\n\n          if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '') {\n            if (this.list) {\n              this.resetFocusElement();\n            }\n\n            this.activeIndex = null;\n\n            if (this.getModuleName() !== 'dropdownlist') {\n              this.preventAutoFill = true;\n              this.searchLists(e);\n\n              if (this.getModuleName() === 'autocomplete') {\n                this.hidePopup();\n              }\n            }\n          }\n\n          e.preventDefault();\n          break;\n\n        default:\n          this.typedString = this.filterInput.value;\n          this.preventAutoFill = false;\n          this.searchLists(e);\n          break;\n      }\n    } else {\n      this.isValidKey = false;\n    }\n  };\n\n  DropDownList.prototype.onFilterDown = function (e) {\n    switch (e.keyCode) {\n      case 13:\n        //enter\n        break;\n\n      case 40: //down arrow\n\n      case 38:\n        //up arrow\n        this.queryString = this.filterInput.value;\n        e.preventDefault();\n        break;\n\n      case 9:\n        //tab\n        if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n          e.preventDefault();\n        }\n\n        break;\n\n      default:\n        this.prevSelectPoints = this.getSelectionPoints();\n        this.queryString = this.filterInput.value;\n        break;\n    }\n  };\n\n  DropDownList.prototype.removeFillSelection = function () {\n    if (this.isInteracted) {\n      var selection = this.getSelectionPoints();\n      this.inputElement.setSelectionRange(selection.end, selection.end);\n    }\n  };\n\n  DropDownList.prototype.getQuery = function (query) {\n    var filterQuery;\n\n    if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n      var filterType = this.typedString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    }\n\n    return filterQuery;\n  };\n\n  DropDownList.prototype.getSelectionPoints = function () {\n    var input = this.inputElement;\n    return {\n      start: Math.abs(input.selectionStart),\n      end: Math.abs(input.selectionEnd)\n    };\n  };\n\n  DropDownList.prototype.searchLists = function (e) {\n    var _this = this;\n\n    this.isTyped = true;\n    this.activeIndex = null;\n    this.isListSearched = true;\n\n    if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n\n    this.isDataFetched = false;\n\n    if (this.isFiltering()) {\n      var eventArgs_1 = {\n        preventDefaultAction: false,\n        text: this.filterInput.value,\n        updateData: function (dataSource, query, fields) {\n          if (eventArgs_1.cancel) {\n            return;\n          }\n\n          _this.isCustomFilter = true;\n\n          _this.filteringAction(dataSource, query, fields);\n        },\n        baseEventArgs: e,\n        cancel: false\n      };\n      this.trigger('filtering', eventArgs_1, function (eventArgs) {\n        if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n          _this.filteringAction(_this.dataSource, null, _this.fields);\n        }\n      });\n    }\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  DropDownList.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFilter = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n\n  DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n    if (!isNullOrUndefined(this.filterInput)) {\n      this.beforePopupOpen = !this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '' ? false : true;\n\n      if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n        this.actionCompleteData.isUpdated = false;\n        this.isTyped = false;\n\n        if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n        }\n\n        this.isTyped = true;\n\n        if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n          this.focusIndexItem();\n          this.setScrollPosition();\n        }\n\n        this.isNotSearchList = true;\n      } else {\n        this.isNotSearchList = false;\n        query = this.filterInput.value.trim() === '' ? null : query;\n        this.resetList(dataSource, fields, query);\n      }\n\n      this.renderReactTemplates();\n    }\n  };\n\n  DropDownList.prototype.setSearchBox = function (popupElement) {\n    if (this.isFiltering()) {\n      var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ? popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n        className: dropDownListClasses.filterParent\n      });\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: dropDownListClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      var backIcon = false;\n\n      if (Browser.isDevice) {\n        backIcon = true;\n      }\n\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n\n      if (!isNullOrUndefined(this.cssClass)) {\n        if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n\n      append([this.filterInputObj.container], parentElement);\n      prepend([parentElement], popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'role': 'combobox',\n        'autocomplete': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n\n      if (!Browser.isDevice) {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.keyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      } else {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.mobileKeyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.onInput, this);\n      EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n      return this.filterInputObj;\n    } else {\n      return inputObject;\n    }\n  };\n\n  DropDownList.prototype.onInput = function (e) {\n    this.isValidKey = true; // For filtering works in mobile firefox.\n\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.typedString = this.filterInput.value;\n      this.preventAutoFill = true;\n      this.searchLists(e);\n    }\n  };\n\n  DropDownList.prototype.pasteHandler = function (e) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.typedString = _this.filterInput.value;\n\n      _this.searchLists(e);\n    });\n  };\n\n  DropDownList.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n\n    if (this.beforePopupOpen) {\n      this.renderPopup();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n\n    if (this.isNotSearchList) {\n      this.isNotSearchList = false;\n      return;\n    }\n\n    if (this.isActive) {\n      var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n\n      _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n      this.updateSelectElementData(this.allowFiltering);\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n        this.isRequested = false;\n        this.keyActionHandler(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n        this.incrementalSearch(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      this.list.scrollTop = 0;\n\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.element.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n      }\n\n      if (this.initRemoteRender) {\n        this.initial = true;\n        this.activeIndex = this.index;\n        this.initRemoteRender = false;\n\n        if (this.value && this.dataSource instanceof DataManager) {\n          var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n          var fieldValue_1 = this.fields.value.split('.');\n          var checkVal = list.some(function (x) {\n            return isNullOrUndefined(x[checkField_1]) && fieldValue_1.length > 1 ? _this.checkFieldValue(x, fieldValue_1) === _this.value : x[checkField_1] === _this.value;\n          });\n\n          if (!checkVal) {\n            this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value))).then(function (e) {\n              if (e.result.length > 0) {\n                _this.addItem(e.result, list.length);\n\n                _this.updateValues();\n              } else {\n                _this.updateValues();\n              }\n            });\n          } else {\n            this.updateValues();\n          }\n        } else {\n          this.updateValues();\n        }\n\n        this.initial = false;\n      } else if (this.getModuleName() === 'autocomplete' && this.value) {\n        this.setInputValue();\n      }\n\n      if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n        if (!this.actionCompleteData.isUpdated || !this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0)) {\n          if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n            setTimeout(function () {\n              _this.updateActionCompleteDataValues(ulElement, list);\n            }, 0);\n          } else {\n            this.updateActionCompleteDataValues(ulElement, list);\n          }\n        }\n\n        this.addNewItem(list, selectedItem);\n\n        if (!isNullOrUndefined(this.itemData)) {\n          this.focusIndexItem();\n        }\n      }\n\n      if (this.beforePopupOpen) {\n        this.renderPopup(e);\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  DropDownList.prototype.checkFieldValue = function (list, fieldValue) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var checkField = list;\n    fieldValue.forEach(function (value) {\n      checkField = checkField[value];\n    });\n    return checkField;\n  };\n\n  DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n    this.actionCompleteData = {\n      ulElement: ulElement.cloneNode(true),\n      list: list,\n      isUpdated: true\n    };\n\n    if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n      this.actionData = this.actionCompleteData;\n    }\n  };\n\n  DropDownList.prototype.addNewItem = function (listData, newElement) {\n    var _this = this;\n\n    if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n      var value_1 = this.getItemData().value;\n      var isExist = listData.some(function (data) {\n        return (typeof data === 'string' || typeof data === 'number') && data === value_1 || getValue(_this.fields.value, data) === value_1;\n      });\n\n      if (!isExist) {\n        this.addItem(this.itemData);\n      }\n    }\n  };\n\n  DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n    var _this = this;\n\n    if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n      if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n        setTimeout(function () {\n          _this.actionCompleteDataUpdate(li, item, index);\n        }, 0);\n      } else {\n        this.actionCompleteDataUpdate(li, item, index);\n      }\n    }\n  };\n\n  DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n    if (index !== null) {\n      this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n    } else {\n      this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n    }\n\n    if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n      this.actionCompleteData.list.push(item);\n    }\n  };\n\n  DropDownList.prototype.focusIndexItem = function () {\n    var value = this.getItemData().value;\n    this.activeIndex = this.getIndexByValue(value);\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.selectedLI = element;\n    this.activeItem(element);\n    this.removeFocus();\n  };\n\n  DropDownList.prototype.updateSelection = function () {\n    var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n    if (selectedItem) {\n      this.setProperties({\n        'index': this.getIndexByValue(selectedItem.getAttribute('data-value'))\n      });\n      this.activeIndex = this.index;\n    } else {\n      this.removeFocus();\n      this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n    }\n  };\n\n  DropDownList.prototype.removeFocus = function () {\n    var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n\n    if (highlightedItem && highlightedItem.length) {\n      removeClass(highlightedItem, dropDownListClasses.focus);\n    }\n  };\n\n  DropDownList.prototype.renderPopup = function (e) {\n    var _this = this;\n\n    if (this.popupObj && document.body.contains(this.popupObj.element)) {\n      this.refreshPopup();\n      return;\n    }\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle = _this.createElement('div', {\n          id: _this.element.id + '_popup',\n          className: 'e-ddl e-popup ' + (_this.cssClass !== null ? _this.cssClass : '')\n        });\n\n        var searchBox = _this.setSearchBox(popupEle);\n\n        _this.listHeight = formatUnit(_this.popupHeight);\n\n        if (_this.headerTemplate) {\n          _this.setHeaderTemplate(popupEle);\n        }\n\n        append([_this.list], popupEle);\n\n        if (_this.footerTemplate) {\n          _this.setFooterTemplate(popupEle);\n        }\n\n        document.body.appendChild(popupEle);\n        popupEle.style.visibility = 'hidden';\n\n        if (_this.popupHeight !== 'auto') {\n          _this.searchBoxHeight = 0;\n\n          if (!isNullOrUndefined(searchBox.container)) {\n            _this.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;\n            _this.listHeight = (parseInt(_this.listHeight, 10) - _this.searchBoxHeight).toString() + 'px';\n          }\n\n          if (_this.headerTemplate) {\n            _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n            var height = Math.round(_this.header.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          if (_this.footerTemplate) {\n            _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n            var height = Math.round(_this.footer.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n          popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n        } else {\n          popupEle.style.height = 'auto';\n        }\n\n        var offsetValue = 0;\n        var left = void 0;\n\n        if (!isNullOrUndefined(_this.selectedLI) && !isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0) {\n          _this.setScrollPosition();\n        } else {\n          _this.list.scrollTop = 0;\n        }\n\n        if (Browser.isDevice && !_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' || _this.isDropDownClick && _this.getModuleName() === 'combobox')) {\n          offsetValue = _this.getOffsetValue(popupEle);\n          var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n\n          if (!isNullOrUndefined(_this.inputElement)) {\n            left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n          }\n        }\n\n        _this.getFocusElement();\n\n        _this.createPopup(popupEle, offsetValue, left);\n\n        _this.checkCollision(popupEle);\n\n        if (Browser.isDevice) {\n          _this.popupObj.element.classList.add(dropDownListClasses.device);\n\n          if (_this.getModuleName() === 'dropdownlist' || _this.getModuleName() === 'combobox' && !_this.allowFiltering && _this.isDropDownClick) {\n            _this.popupObj.collision = {\n              X: 'fit',\n              Y: 'fit'\n            };\n          }\n\n          if (_this.isFilterLayout()) {\n            _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n\n            _this.popupObj.position = {\n              X: 0,\n              Y: 0\n            };\n\n            _this.popupObj.dataBind();\n\n            attributes(_this.popupObj.element, {\n              style: 'left:0px;right:0px;top:0px;bottom:0px;'\n            });\n            addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n\n            _this.setSearchBoxPosition();\n\n            _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n            _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n            EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n            EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n          }\n        }\n\n        popupEle.style.visibility = 'visible';\n        addClass([popupEle], 'e-popup-close');\n\n        var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n\n        for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n          var element = scrollParentElements_1[_i];\n          EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n        }\n\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n\n          _this.wireListEvents();\n        }\n\n        _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n        attributes(_this.targetElement(), {\n          'aria-expanded': 'true',\n          'aria-owns': _this.inputElement.id + '_options'\n        });\n\n        _this.inputElement.setAttribute('aria-expanded', 'true');\n\n        var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n        addClass([inputParent], [dropDownListClasses.inputFocus]);\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          event: e,\n          cancel: false,\n          animation: animModel\n        };\n\n        _this.trigger('open', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            if (!isNullOrUndefined(_this.inputWrapper)) {\n              addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n            }\n\n            _this.renderReactTemplates();\n\n            if (!isNullOrUndefined(_this.popupObj)) {\n              _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.element : null);\n            }\n          } else {\n            _this.beforePopupOpen = false;\n\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n\n  DropDownList.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick)) {\n      var collision = isCollide(popupEle);\n\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n      }\n\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.getOffsetValue = function (popupEle) {\n    var popupStyles = getComputedStyle(popupEle);\n    var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n    var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n    return this.setPopupPosition(borderTop + borderBottom);\n  };\n\n  DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n    var _this = this;\n\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputWrapper.container,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      zIndex: this.zIndex,\n      close: function () {\n        if (!_this.isDocumentClick) {\n          _this.focusDropDown();\n        } // eslint-disable-next-line\n\n\n        if (_this.isReact) {\n          _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n        }\n\n        _this.isNotSearchList = false;\n        _this.isDocumentClick = false;\n\n        _this.destroyPopup();\n\n        if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n          _this.isActive = true;\n\n          _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n        }\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n\n        var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement && _this.actionCompleteData.ulElement.querySelector('li');\n\n        var ulElement = _this.list.querySelector('ul li');\n\n        if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n          attributes(_this.targetElement(), {\n            'aria-activedescendant': _this.ulElement.getElementsByClassName('e-item-focus')[0].id\n          });\n        } else if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-active')[0])) {\n          attributes(_this.targetElement(), {\n            'aria-activedescendant': _this.ulElement.getElementsByClassName('e-active')[0].id\n          });\n        }\n\n        if (_this.isFiltering() && _this.itemTemplate && _this.element.tagName === _this.getNgDirective() && actionList && ulElement && actionList.textContent !== ulElement.textContent && _this.element.tagName !== 'EJS-COMBOBOX') {\n          _this.cloneElements();\n        }\n\n        if (_this.isFilterLayout()) {\n          removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n          _this.isFilterFocus = true;\n\n          _this.filterInput.focus();\n\n          if (_this.inputWrapper.clearButton) {\n            addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n          }\n        }\n\n        _this.activeStateChange();\n      },\n      targetExitViewport: function () {\n        if (!Browser.isDevice) {\n          _this.hidePopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.isEmptyList = function () {\n    return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n  };\n\n  DropDownList.prototype.getFocusElement = function () {// combo-box used this method\n  };\n\n  DropDownList.prototype.isFilterLayout = function () {\n    return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n  };\n\n  DropDownList.prototype.scrollHandler = function () {\n    if (Browser.isDevice && (this.getModuleName() === 'dropdownlist' && !this.isFilterLayout() || this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick)) {\n      this.hidePopup();\n    }\n  };\n\n  DropDownList.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    this.popupObj.element.style.maxHeight = '100%';\n    this.popupObj.element.style.width = '100%';\n    this.list.style.maxHeight = window.innerHeight - searchBoxHeight + 'px';\n    this.list.style.height = window.innerHeight - searchBoxHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n\n  DropDownList.prototype.setPopupPosition = function (border) {\n    var offsetValue;\n    var popupOffset = border;\n    var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n    var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n    var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n    var liHeight = firstItem.getBoundingClientRect().height;\n    var listHeight = this.list.offsetHeight / 2;\n    var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n    var lastItemOffsetValue = lastItem.offsetTop;\n\n    if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n      var count = this.list.offsetHeight / liHeight;\n      var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n      offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n      this.list.scrollTop = selectedLI.offsetTop;\n    } else if (height > listHeight) {\n      offsetValue = listHeight - liHeight / 2;\n      this.list.scrollTop = height - listHeight + liHeight / 2;\n    } else {\n      offsetValue = height;\n    }\n\n    var inputHeight = this.inputWrapper.container.offsetHeight;\n    offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;\n    return -offsetValue;\n  };\n\n  DropDownList.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    if (Browser.isDevice && !this.allowFiltering && (this.getModuleName() === 'dropdownlist' || this.isDropDownClick && this.getModuleName() === 'combobox')) {\n      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n      width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + 'px';\n    }\n\n    return width;\n  };\n\n  DropDownList.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n\n  DropDownList.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n      }\n    }\n  };\n\n  DropDownList.prototype.isEditTextBox = function () {\n    return false;\n  };\n\n  DropDownList.prototype.isFiltering = function () {\n    return this.allowFiltering;\n  };\n\n  DropDownList.prototype.isPopupButton = function () {\n    return true;\n  };\n\n  DropDownList.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n\n  DropDownList.prototype.clearText = function () {\n    this.filterInput.value = this.typedString = '';\n    this.searchLists(null);\n  };\n\n  DropDownList.prototype.setEleWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.inputWrapper.container.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n\n  DropDownList.prototype.closePopup = function (delay, e) {\n    var _this = this;\n\n    this.isTyped = false;\n\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.isActive = false;\n    this.filterInputObj = null;\n    this.isDropDownClick = false;\n    this.preventAutoFill = false;\n    var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n\n    for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n      var element = scrollableParentElements_1[_i];\n      EventHandler.remove(element, 'scroll', this.scrollHandler);\n    }\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n    }\n\n    if (this.isFilterLayout()) {\n      if (!Browser.isDevice) {\n        this.searchKeyModule.destroy();\n\n        if (this.clearIconElement) {\n          EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n        }\n      }\n\n      if (this.backIconElement) {\n        EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n        EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n      }\n\n      if (!isNullOrUndefined(this.filterInput)) {\n        EventHandler.remove(this.filterInput, 'input', this.onInput);\n        EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n        EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n        EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n        EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n      }\n\n      this.filterInput = null;\n    }\n\n    attributes(this.targetElement(), {\n      'aria-expanded': 'false'\n    });\n    this.inputElement.setAttribute('aria-expanded', 'false');\n    this.targetElement().removeAttribute('aria-owns');\n    this.targetElement().removeAttribute('aria-activedescendant');\n    this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n\n    if (this.isFiltering()) {\n      this.actionCompleteData.isUpdated = false;\n    }\n\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('close', eventArgs, function (eventArgs) {\n      if (!isNullOrUndefined(_this.popupObj) && !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n        var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n\n        fixedHeader.parentNode.removeChild(fixedHeader);\n        _this.fixedHeaderElement = null;\n      }\n\n      if (!eventArgs.cancel) {\n        if (_this.getModuleName() === 'autocomplete') {\n          _this.rippleFun();\n        }\n\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.isFilterFocus = false;\n\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      detach(this.popupObj.element);\n    }\n  };\n\n  DropDownList.prototype.clickOnBackIcon = function () {\n    this.hidePopup();\n    this.focusIn();\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.render = function () {\n    if (this.element.tagName === 'INPUT') {\n      this.inputElement = this.element;\n\n      if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n        this.inputElement.setAttribute('role', 'combobox');\n      }\n\n      if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n        this.inputElement.setAttribute('type', 'text');\n      }\n\n      this.inputElement.setAttribute('aria-expanded', 'false');\n    } else {\n      this.inputElement = this.createElement('input', {\n        attrs: {\n          role: 'combobox',\n          type: 'text'\n        }\n      });\n\n      if (this.element.tagName !== this.getNgDirective()) {\n        this.element.style.display = 'none';\n      }\n\n      this.element.parentElement.insertBefore(this.inputElement, this.element);\n      this.preventTabIndex(this.inputElement);\n    }\n\n    var updatedCssClassValues = this.cssClass;\n\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(closest(this.element, 'fieldset')) && closest(this.element, 'fieldset').disabled) {\n      this.enabled = false;\n    }\n\n    this.inputWrapper = Input.createInput({\n      element: this.inputElement,\n      buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n      floatLabelType: this.floatLabelType,\n      properties: {\n        readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n        placeholder: this.placeholder,\n        cssClass: updatedCssClassValues,\n        enabled: this.enabled,\n        enableRtl: this.enableRtl,\n        showClearButton: this.showClearButton\n      }\n    }, this.createElement);\n\n    if (this.element.tagName === this.getNgDirective()) {\n      this.element.appendChild(this.inputWrapper.container);\n    } else {\n      this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n    }\n\n    this.hiddenElement = this.createElement('select', {\n      attrs: {\n        'aria-hidden': 'true',\n        'tabindex': '-1',\n        'class': dropDownListClasses.hiddenElement\n      }\n    });\n    prepend([this.hiddenElement], this.inputWrapper.container);\n    this.validationAttribute(this.element, this.hiddenElement);\n    this.setReadOnly();\n    this.setFields();\n    this.inputWrapper.container.style.width = formatUnit(this.width);\n    this.inputWrapper.container.classList.add('e-ddl');\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never') {\n      this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n\n    this.wireEvent();\n    this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n    this.element.removeAttribute('tabindex');\n    var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n    this.element.id = id;\n    this.hiddenElement.id = id + '_hidden';\n    this.targetElement().setAttribute('tabindex', this.tabIndex);\n\n    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n      this.inputElement.setAttribute('aria-label', this.getModuleName());\n    } else {\n      attributes(this.targetElement(), {\n        'aria-label': this.getModuleName()\n      });\n    }\n\n    attributes(this.targetElement(), this.getAriaAttributes());\n    this.updateDataAttribute(this.htmlAttributes);\n    this.setHTMLAttributes();\n\n    if (this.targetElement() === this.inputElement) {\n      this.inputElement.removeAttribute('aria-labelledby');\n    }\n\n    if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n      this.initValue();\n    } else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n      var selectElement = this.element;\n      this.value = selectElement.options[selectElement.selectedIndex].value;\n      this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n      this.initValue();\n    }\n\n    this.setEnabled();\n    this.preventTabIndex(this.element);\n\n    if (!this.enabled) {\n      this.targetElement().tabIndex = -1;\n    }\n\n    this.initial = false;\n    this.element.style.opacity = '';\n\n    this.inputElement.onselect = function (e) {\n      e.stopImmediatePropagation();\n    };\n\n    this.inputElement.onchange = function (e) {\n      e.stopImmediatePropagation();\n    };\n\n    if (this.element.hasAttribute('autofocus')) {\n      this.focusIn();\n    }\n\n    if (!isNullOrUndefined(this.text)) {\n      this.inputElement.setAttribute('value', this.text);\n    }\n\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n\n    var floatLabelElement = this.inputWrapper.container.getElementsByClassName('e-float-text')[0];\n\n    if (!isNullOrUndefined(this.element.id) && this.element.id !== '' && !isNullOrUndefined(floatLabelElement)) {\n      floatLabelElement.id = 'label_' + this.element.id.replace(/ /g, '_');\n      attributes(this.inputElement, {\n        'aria-labelledby': floatLabelElement.id\n      });\n    }\n\n    this.renderComplete();\n  };\n\n  DropDownList.prototype.setFooterTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.footer) {\n      if (this.isReact) {\n        this.clearTemplate(['footerTemplate']);\n      } else {\n        this.footer.innerHTML = '';\n      }\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], dropDownListClasses.footer);\n    }\n\n    var footercheck = this.dropdownCompiler(this.footerTemplate);\n\n    if (footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n    if (footerCompTemp && footerCompTemp.length > 0) {\n      append(footerCompTemp, this.footer);\n    }\n\n    append([this.footer], popupEle);\n  };\n\n  DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], dropDownListClasses.header);\n    }\n\n    var headercheck = this.dropdownCompiler(this.headerTemplate);\n\n    if (headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n    if (headerCompTemp && headerCompTemp.length) {\n      append(headerCompTemp, this.header);\n    }\n\n    var contentEle = popupEle.querySelector('div.e-content');\n    popupEle.insertBefore(this.header, contentEle);\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.setEnabled = function () {\n    this.element.setAttribute('aria-disabled', this.enabled ? 'false' : 'true');\n  };\n\n  DropDownList.prototype.setOldText = function (text) {\n    this.text = text;\n  };\n\n  DropDownList.prototype.setOldValue = function (value) {\n    this.value = value;\n  };\n\n  DropDownList.prototype.refreshPopup = function () {\n    if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === 'autocomplete')) {\n      removeClass([this.popupObj.element], 'e-popup-close');\n      this.popupObj.refreshPosition(this.inputWrapper.container);\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.checkData = function (newProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {\n      this.list = null;\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n    }\n\n    this.isListSearched = false;\n    var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n    var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n\n    if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n      this.itemData = null;\n    }\n\n    if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n      this.actionData = this.actionCompleteData;\n    } else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n      this.actionCompleteData = this.getModuleName() === 'combobox' ? {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      } : this.actionCompleteData;\n      this.actionData = this.actionCompleteData;\n    }\n  };\n\n  DropDownList.prototype.updateDataSource = function (props) {\n    if (this.inputElement.value !== '' || !isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) {\n      this.clearAll(null, props);\n    }\n\n    if (this.fields.groupBy && props.fields && !this.isGroupChecking && this.list) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n\n    if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) || !(props.dataSource === [])) {\n      this.typedString = '';\n      this.resetList(this.dataSource);\n    }\n\n    if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n      this.checkCustomValue();\n    }\n  };\n\n  DropDownList.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n    this.setProperties({\n      'text': dataItem.text,\n      'value': dataItem.value\n    });\n  };\n\n  DropDownList.prototype.updateInputFields = function () {\n    if (this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @private\n   * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n\n    if (this.getModuleName() === 'dropdownlist') {\n      this.checkData(newProp);\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          break;\n\n        case 'htmlAttributes':\n          this_1.setHTMLAttributes();\n          break;\n\n        case 'width':\n          this_1.setEleWidth(newProp.width);\n          Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n          break;\n\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this_1.filterInput) {\n            Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n          }\n\n          break;\n\n        case 'readonly':\n          if (this_1.getModuleName() !== 'dropdownlist') {\n            Input.setReadonly(newProp.readonly, this_1.inputElement);\n          }\n\n          this_1.setReadOnly();\n          break;\n\n        case 'cssClass':\n          this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n          Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n          break;\n\n        case 'enableRtl':\n          this_1.setEnableRtl();\n          break;\n\n        case 'enabled':\n          this_1.setEnable();\n          break;\n\n        case 'text':\n          if (newProp.text === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender) {\n            var li = this_1.getElementByText(newProp.text);\n\n            if (!this_1.checkValidLi(li)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n              } else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                var listLength_1 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_1);\n\n                    _this.updateValues();\n                  } else {\n                    _this.setOldText(oldProp.text);\n                  }\n                });\n              } else if (this_1.getModuleName() === 'autocomplete') {\n                this_1.setInputValue(newProp, oldProp);\n              } else {\n                this_1.setOldText(oldProp.text);\n              }\n            }\n\n            this_1.updateInputFields();\n          }\n\n          break;\n\n        case 'value':\n          if (newProp.value === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          this_1.notify('beforeValueChange', {\n            newProp: newProp\n          }); // gird component value type change\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender) {\n            var item = this_1.getElementByValue(newProp.value);\n\n            if (!this_1.checkValidLi(item)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n              } else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                var listLength_2 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_2);\n\n                    _this.updateValues();\n                  } else {\n                    _this.setOldValue(oldProp.value);\n                  }\n                });\n              } else if (this_1.getModuleName() === 'autocomplete') {\n                this_1.setInputValue(newProp, oldProp);\n              } else {\n                this_1.setOldValue(oldProp.value);\n              }\n            }\n\n            this_1.updateInputFields();\n            this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n          }\n\n          break;\n\n        case 'index':\n          if (newProp.index === null) {\n            this_1.clearAll();\n            break;\n          }\n\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n\n            this_1.renderList();\n          }\n\n          if (!this_1.initRemoteRender && this_1.liCollections) {\n            var element = this_1.liCollections[newProp.index];\n\n            if (!this_1.checkValidLi(element)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n              } else {\n                this_1.index = oldProp.index;\n              }\n            }\n\n            this_1.updateInputFields();\n          }\n\n          break;\n\n        case 'footerTemplate':\n          if (this_1.popupObj) {\n            this_1.setFooterTemplate(this_1.popupObj.element);\n          }\n\n          break;\n\n        case 'headerTemplate':\n          if (this_1.popupObj) {\n            this_1.setHeaderTemplate(this_1.popupObj.element);\n          }\n\n          break;\n\n        case 'valueTemplate':\n          if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate !== null) {\n            this_1.setValueTemplate();\n          }\n\n          break;\n\n        case 'allowFiltering':\n          if (this_1.allowFiltering) {\n            this_1.actionCompleteData = {\n              ulElement: this_1.ulElement,\n              list: this_1.listData,\n              isUpdated: true\n            };\n            this_1.actionData = this_1.actionCompleteData;\n            this_1.updateSelectElementData(this_1.allowFiltering);\n          }\n\n          break;\n\n        case 'floatLabelType':\n          Input.removeFloating(this_1.inputWrapper);\n          Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n\n          if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0] && this_1.floatLabelType !== 'Never') {\n            this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n          }\n\n          break;\n\n        case 'showClearButton':\n          Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n          this_1.bindClearEvent();\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n          }\n          break;\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      _loop_1(prop);\n    }\n  };\n\n  DropDownList.prototype.checkValidLi = function (element) {\n    if (this.isValidLI(element)) {\n      this.setSelection(element, null);\n      return true;\n    }\n\n    return false;\n  };\n\n  DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n    var _this = this;\n\n    var li;\n\n    this.updateListValues = function () {\n      if (prop === 'text') {\n        li = _this.getElementByText(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldText(oldProp);\n        }\n      } else if (prop === 'value') {\n        li = _this.getElementByValue(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldValue(oldProp);\n        }\n      } else if (prop === 'index') {\n        li = _this.liCollections[newProp];\n\n        if (!_this.checkValidLi(li)) {\n          _this.index = oldProp;\n        }\n      }\n    };\n  };\n\n  DropDownList.prototype.setReadOnly = function () {\n    if (this.readonly) {\n      addClass([this.inputWrapper.container], ['e-readonly']);\n    } else {\n      removeClass([this.inputWrapper.container], ['e-readonly']);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  DropDownList.prototype.setInputValue = function (newProp, oldProp) {};\n\n  DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n\n    if (this.popupObj) {\n      Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  DropDownList.prototype.getModuleName = function () {\n    return 'dropdownlist';\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.showPopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isFiltering() && this.dataSource instanceof DataManager && this.actionData.list !== this.actionCompleteData.list && this.actionData.list && this.actionData.ulElement) {\n      this.actionCompleteData = this.actionData;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    }\n\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n\n    this.beforePopupOpen = true;\n\n    if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n      this.isActive = true;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n      this.renderList(e);\n    }\n\n    this.invokeRenderPopup(e);\n  };\n\n  DropDownList.prototype.invokeRenderPopup = function (e) {\n    if (Browser.isDevice && this.isFilterLayout()) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_2 = this;\n\n      window.onpopstate = function () {\n        proxy_2.hidePopup();\n      };\n\n      history.pushState({}, '');\n    }\n\n    if (!isNullOrUndefined(this.list) && (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData))) {\n      this.renderPopup(e);\n    }\n  };\n\n  DropDownList.prototype.renderHightSearch = function () {// update high light search\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.hidePopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n      if (!isNullOrUndefined(this.inputElement)) {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n\n      this.isEscapeKey = false;\n\n      if (!isNullOrUndefined(this.index)) {\n        var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n        this.selectedLI = this.liCollections[this.index] || element;\n\n        if (this.selectedLI) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n\n          if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n          }\n        }\n      } else {\n        this.resetSelection();\n      }\n    }\n\n    this.closePopup(0, e);\n    var dataItem = this.getItemData();\n    var isSelectVal = !isNullOrUndefined(this.selectedLI);\n\n    if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {\n      this.isSelectCustom = false;\n      this.clearAll(e);\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Sets the focus on the component for interaction.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.focusIn = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n      return;\n    }\n\n    var isFocused = false;\n\n    if (this.preventFocus && Browser.isDevice) {\n      this.inputWrapper.container.tabIndex = 1;\n      this.inputWrapper.container.focus();\n      this.preventFocus = false;\n      isFocused = true;\n    }\n\n    if (!isFocused) {\n      this.targetElement().focus();\n    }\n\n    addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    this.onFocus(e);\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n  };\n  /**\n   * Moves the focus from the component if the component is already focused.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.focusOut = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (!this.enabled) {\n      return;\n    }\n\n    this.isTyped = true;\n    this.hidePopup(e);\n\n    if (this.targetElement()) {\n      this.targetElement().blur();\n    }\n\n    removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.destroy = function () {\n    this.isActive = false;\n    resetIncrementalSearchValues(this.element.id); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    this.hidePopup();\n    this.unWireEvent();\n\n    if (this.list) {\n      this.unWireListEvents();\n    }\n\n    if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n\n    if (this.inputElement) {\n      var attrArray = ['readonly', 'aria-disabled', 'placeholder', 'aria-labelledby', 'aria-expanded', 'autocomplete', 'aria-readonly', 'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n\n      for (var i = 0; i < attrArray.length; i++) {\n        this.inputElement.removeAttribute(attrArray[i]);\n      }\n\n      this.inputElement.setAttribute('tabindex', this.tabIndex);\n      this.inputElement.classList.remove('e-input');\n      Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    this.element.style.display = 'block';\n\n    if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n      detach(this.inputWrapper.container);\n    } else {\n      this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n      detach(this.inputWrapper.container);\n    }\n\n    this.hiddenElement = null;\n    this.inputWrapper = null;\n    this.keyboardModule = null;\n    this.ulElement = null;\n    this.list = null;\n    this.popupObj = null;\n    this.rippleFun = null;\n    this.selectedLI = null;\n    this.liCollections = null;\n    this.item = null;\n    this.inputWrapper = null;\n    this.footer = null;\n    this.header = null;\n    this.previousSelectedLI = null;\n    this.valueTempElement = null;\n    this.actionData.ulElement = null;\n\n    _super.prototype.destroy.call(this);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n\n\n  DropDownList.prototype.getItems = function () {\n    if (!this.list) {\n      if (this.dataSource instanceof DataManager) {\n        this.initRemoteRender = true;\n      }\n\n      this.renderList();\n    }\n\n    return this.ulElement ? _super.prototype.getItems.call(this) : [];\n  };\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n\n\n  DropDownList.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Allows you to clear the selected values from the component.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownList.prototype.clear = function () {\n    this.value = null;\n  };\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"cssClass\", void 0);\n\n  __decorate$1([Property('100%')], DropDownList.prototype, \"width\", void 0);\n\n  __decorate$1([Property(true)], DropDownList.prototype, \"enabled\", void 0);\n\n  __decorate$1([Property(false)], DropDownList.prototype, \"enablePersistence\", void 0);\n\n  __decorate$1([Property('300px')], DropDownList.prototype, \"popupHeight\", void 0);\n\n  __decorate$1([Property('100%')], DropDownList.prototype, \"popupWidth\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"placeholder\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$1([Property({})], DropDownList.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"query\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"valueTemplate\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"headerTemplate\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"footerTemplate\", void 0);\n\n  __decorate$1([Property(false)], DropDownList.prototype, \"allowFiltering\", void 0);\n\n  __decorate$1([Property(false)], DropDownList.prototype, \"readonly\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"text\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"value\", void 0);\n\n  __decorate$1([Property(null)], DropDownList.prototype, \"index\", void 0);\n\n  __decorate$1([Property('Never')], DropDownList.prototype, \"floatLabelType\", void 0);\n\n  __decorate$1([Property(false)], DropDownList.prototype, \"showClearButton\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"filtering\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"change\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"beforeOpen\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"open\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"close\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"blur\", void 0);\n\n  __decorate$1([Event()], DropDownList.prototype, \"focus\", void 0);\n\n  DropDownList = __decorate$1([NotifyPropertyChanges], DropDownList);\n  return DropDownList;\n}(DropDownBase);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$2 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar RTL = 'e-rtl';\nvar DROPDOWNTREE = 'e-ddt';\nvar HIDDENELEMENT = 'e-ddt-hidden';\nvar DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nvar SHOW_CHIP = 'e-show-chip';\nvar SHOW_CLEAR = 'e-show-clear';\nvar SHOW_DD_ICON = 'e-show-dd-icon';\nvar CHIP_INPUT = 'e-chip-input';\nvar INPUTFOCUS = 'e-input-focus';\nvar INPUTGROUP = 'e-input-group';\nvar ICONANIMATION = 'e-icon-anim';\nvar CLOSEICON_CLASS = 'e-clear-icon e-icons';\nvar CHIP_WRAPPER = 'e-chips-wrapper';\nvar CHIP_COLLECTION = 'e-chips-collection';\nvar CHIP = 'e-chips';\nvar CHIP_CONTENT = 'e-chipcontent';\nvar CHIP_CLOSE = 'e-chips-close';\nvar HIDEICON = 'e-icon-hide';\nvar DDTHIDEICON = 'e-ddt-icon-hide';\nvar POPUP_CLASS = 'e-ddt e-popup';\nvar PARENTITEM = 'e-list-parent';\nvar CONTENT = 'e-popup-content';\nvar DROPDOWN = 'e-dropdown';\nvar DISABLED = 'e-disabled';\nvar ICONS = 'e-icons';\nvar CHECKALLPARENT = 'e-selectall-parent';\nvar CHECKALLHIDE = 'e-hide-selectall';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar ALLTEXT = 'e-all-text';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar FILTERWRAP = 'e-filter-wrap';\nvar DDTICON = 'e-ddt-icon';\nvar FOOTER = 'e-ddt-footer';\nvar HEADER = 'e-ddt-header';\nvar NODATACONTAINER = 'e-ddt-nodata';\nvar NODATA = 'e-no-data';\nvar HEADERTEMPLATE = 'HeaderTemplate';\nvar FOOTERTEMPLATE = 'FooterTemplate';\nvar NORECORDSTEMPLATE = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nvar CUSTOMTEMPLATE = 'CustomTemplate';\nvar REMAIN_WRAPPER = 'e-remain';\nvar OVERFLOW_VIEW = 'e-overflow';\nvar SHOW_TEXT = 'e-show-text';\nvar TOTAL_COUNT_WRAPPER = 'e-total-count';\nvar REMAIN_COUNT = 'e-wrap-count';\n\nvar Fields =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$2(Fields, _super);\n\n  function Fields() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$2([Property('child')], Fields.prototype, \"child\", void 0);\n\n  __decorate$2([Property([])], Fields.prototype, \"dataSource\", void 0);\n\n  __decorate$2([Property('expanded')], Fields.prototype, \"expanded\", void 0);\n\n  __decorate$2([Property('hasChildren')], Fields.prototype, \"hasChildren\", void 0);\n\n  __decorate$2([Property('htmlAttributes')], Fields.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$2([Property('iconCss')], Fields.prototype, \"iconCss\", void 0);\n\n  __decorate$2([Property('imageUrl')], Fields.prototype, \"imageUrl\", void 0);\n\n  __decorate$2([Property('parentValue')], Fields.prototype, \"parentValue\", void 0);\n\n  __decorate$2([Property(null)], Fields.prototype, \"query\", void 0);\n\n  __decorate$2([Property('selectable')], Fields.prototype, \"selectable\", void 0);\n\n  __decorate$2([Property('selected')], Fields.prototype, \"selected\", void 0);\n\n  __decorate$2([Property(null)], Fields.prototype, \"tableName\", void 0);\n\n  __decorate$2([Property('text')], Fields.prototype, \"text\", void 0);\n\n  __decorate$2([Property('tooltip')], Fields.prototype, \"tooltip\", void 0);\n\n  __decorate$2([Property('value')], Fields.prototype, \"value\", void 0);\n\n  return Fields;\n}(ChildProperty);\n\nvar TreeSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$2(TreeSettings, _super);\n\n  function TreeSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$2([Property(false)], TreeSettings.prototype, \"autoCheck\", void 0);\n\n  __decorate$2([Property('Auto')], TreeSettings.prototype, \"expandOn\", void 0);\n\n  __decorate$2([Property(false)], TreeSettings.prototype, \"loadOnDemand\", void 0);\n\n  return TreeSettings;\n}(ChildProperty);\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\n\n\nvar DropDownTree =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$2(DropDownTree, _super);\n\n  function DropDownTree(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.filterTimer = null;\n    _this.isFilteredData = false;\n    _this.isFilterRestore = false; // eslint-disable-next-line\n\n    _this.selectedData = [];\n    _this.filterDelayTime = 300;\n    _this.isClicked = false; // Specifies if the checkAll method has been called\n\n    _this.isCheckAllCalled = false;\n    _this.isFromFilterChange = false;\n    return _this;\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string}\n   * @hidden\n   */\n\n\n  DropDownTree.prototype.getPersistData = function () {\n    var keyEntity = ['value'];\n    return this.addOnPersist(keyEntity);\n  };\n\n  DropDownTree.prototype.getLocaleName = function () {\n    return 'drop-down-tree';\n  };\n  /**\n   * Initialize the event handler.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  DropDownTree.prototype.preRender = function () {\n    this.inputFocus = false;\n    this.isPopupOpen = false;\n    this.isFirstRender = true;\n    this.isInitialized = false;\n    this.currentText = null;\n    this.currentValue = null;\n    this.oldValue = null;\n    this.removeValue = false;\n    this.selectedText = [];\n    this.treeItems = [];\n    this.dataValue = null;\n    this.isNodeSelected = false;\n    this.isDynamicChange = false;\n    this.clearIconWidth = 0;\n    this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE;\n    this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE;\n    this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE;\n    this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE;\n    this.customTemplateId = \"\" + this.element.id + CUSTOMTEMPLATE;\n    this.keyConfigs = {\n      escape: 'escape',\n      altUp: 'alt+uparrow',\n      altDown: 'alt+downarrow',\n      tab: 'tab',\n      shiftTab: 'shift+tab',\n      end: 'end',\n      enter: 'enter',\n      home: 'home',\n      moveDown: 'downarrow',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      ctrlDown: 'ctrl+downarrow',\n      ctrlUp: 'ctrl+uparrow',\n      ctrlEnter: 'ctrl+enter',\n      ctrlHome: 'ctrl+home',\n      ctrlEnd: 'ctrl+end',\n      shiftDown: 'shift+downarrow',\n      shiftUp: 'shift+uparrow',\n      shiftEnter: 'shift+enter',\n      shiftHome: 'shift+home',\n      shiftEnd: 'shift+end',\n      csDown: 'ctrl+shift+downarrow',\n      csUp: 'ctrl+shift+uparrow',\n      csEnter: 'ctrl+shift+enter',\n      csHome: 'ctrl+shift+home',\n      csEnd: 'ctrl+shift+end',\n      space: 'space',\n      ctrlA: 'ctrl+A'\n    };\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.render = function () {\n    var isTree = select('#' + this.element.id + '_tree', document);\n\n    if (isTree) {\n      var popupDiv = select('#' + this.element.id + '_popup', document);\n      detach(popupDiv ? popupDiv : isTree.parentElement);\n    }\n\n    this.ensureAutoCheck();\n\n    if (this.element.tagName === 'INPUT') {\n      this.inputEle = this.element;\n\n      if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n        this.inputEle.setAttribute('role', 'textbox');\n      }\n\n      if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n        this.inputEle.setAttribute('type', 'text');\n      }\n    } else {\n      this.inputEle = this.createElement('input', {\n        attrs: {\n          role: 'textbox',\n          type: 'text'\n        }\n      });\n      this.element.parentElement.insertBefore(this.inputEle, this.element);\n    }\n\n    this.inputObj = Input.createInput({\n      element: this.inputEle,\n      floatLabelType: this.floatLabelType,\n      buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n      properties: {\n        readonly: true,\n        placeholder: this.placeholder,\n        enabled: this.enabled,\n        cssClass: this.cssClass,\n        enableRtl: this.enableRtl\n      }\n    }, this.createElement);\n    this.inputWrapper = this.inputObj.container;\n\n    if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n      this.inputWrapper.classList.add(INPUTGROUP);\n    }\n\n    if (this.showDropDownIcon) {\n      this.inputWrapper.classList.add(SHOW_DD_ICON);\n    }\n\n    if (this.element.tagName === this.getDirective()) {\n      this.element.appendChild(this.inputWrapper);\n    }\n\n    this.createHiddenElement();\n    this.createClearIcon();\n    this.inputWrapper.classList.add(DROPDOWNTREE);\n    this.setElementWidth(this.width);\n    this.updateDataAttribute();\n    this.setHTMLAttributes();\n    this.setAttributes();\n    this.popupDiv = this.createElement('div', {\n      className: CONTENT\n    });\n    this.popupDiv.classList.add(DROPDOWN);\n    this.tree = this.createElement('div', {\n      id: this.element.id + '_tree'\n    });\n    this.popupDiv.appendChild(this.tree);\n    document.body.appendChild(this.popupDiv);\n    this.wireTreeEvents();\n    addClass([this.popupDiv], DDTHIDEICON);\n    this.renderTree();\n    this.isRemoteData = this.fields.dataSource instanceof DataManager;\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.mode !== 'Delimiter') {\n        this.createChip();\n      }\n\n      if (!this.wrapText && this.mode !== 'Custom') {\n        this.overFlowWrapper = this.createElement('span', {\n          className: OVERFLOW_VIEW + ' ' + HIDEICON\n        });\n        this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n\n        if (this.mode !== 'Box') {\n          addClass([this.overFlowWrapper], SHOW_TEXT);\n        }\n      }\n    }\n\n    if (!this.isRemoteData) {\n      this.setTreeValue();\n      this.setTreeText();\n      this.updateHiddenValue();\n      this.setSelectedValue();\n\n      if (!this.wrapText) {\n        this.updateView();\n      }\n    }\n\n    this.wireEvents();\n    var firstUl = select('.' + PARENTITEM, this.treeObj.element);\n\n    if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n      firstUl.removeAttribute('aria-multiselectable');\n    }\n\n    this.oldValue = this.value;\n    this.isInitialized = true;\n    this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate || this.noRecordsTemplate || this.customTemplate;\n    this.renderComplete();\n  };\n\n  DropDownTree.prototype.ensureAutoCheck = function () {\n    if (this.allowFiltering && this.treeSettings.autoCheck) {\n      this.setProperties({\n        treeSettings: {\n          autoCheck: false\n        }\n      }, true);\n    }\n  };\n\n  DropDownTree.prototype.hideCheckAll = function (flag) {\n    var checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n\n    if (!isNullOrUndefined(checkAllEle)) {\n      if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n        addClass([checkAllEle], CHECKALLHIDE);\n      } else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n        removeClass([checkAllEle], CHECKALLHIDE);\n      }\n    }\n  };\n\n  DropDownTree.prototype.renderFilter = function () {\n    this.filterContainer = this.createElement('div', {\n      id: this.element.id + '_filter_wrap',\n      className: FILTERWRAP\n    });\n    var filterInput = this.createElement('input', {\n      id: this.element.id + '_filter',\n      attrs: {\n        autocomplete: 'off',\n        'aria-label': this.filterBarPlaceholder\n      }\n    });\n    this.filterContainer.appendChild(filterInput);\n    prepend([this.filterContainer], this.popupEle);\n    this.filterObj = new TextBox({\n      value: '',\n      showClearButton: true,\n      placeholder: this.filterBarPlaceholder,\n      input: this.filterChangeHandler.bind(this)\n    });\n    this.filterObj.appendTo('#' + this.element.id + '_filter');\n  };\n\n  DropDownTree.prototype.filterChangeHandler = function (args) {\n    var _this = this;\n\n    if (!isNullOrUndefined(args.value)) {\n      window.clearTimeout(this.filterTimer);\n      this.filterTimer = window.setTimeout(function () {\n        _this.filterHandler(args.value, args.event);\n      }, this.filterDelayTime);\n    }\n  };\n\n  DropDownTree.prototype.filterHandler = function (value, event) {\n    var _this = this;\n\n    this.isFromFilterChange = true;\n\n    if (!this.isFilteredData) {\n      this.treeData = this.treeObj.getTreeData();\n    }\n\n    var filterFields = this.cloneFields(this.fields);\n    var args = {\n      cancel: false,\n      preventDefaultAction: false,\n      event: event,\n      text: value,\n      fields: filterFields\n    };\n    this.trigger('filtering', args, function (args) {\n      if (!args.cancel) {\n        var flag = false;\n        var fields = void 0;\n        _this.isFilteredData = true;\n\n        if (value === '') {\n          _this.isFilteredData = false;\n          _this.isFilterRestore = true;\n          fields = _this.cloneFields(_this.fields);\n        } else if (args.preventDefaultAction) {\n          fields = args.fields;\n        } else {\n          if (_this.treeDataType === 1) {\n            fields = _this.selfReferencefilter(value, args.fields);\n          } else {\n            if (_this.fields.dataSource instanceof DataManager) {\n              flag = true;\n            } else {\n              fields = _this.nestedFilter(value, args.fields);\n            }\n          }\n        }\n\n        _this.hideCheckAll(_this.isFilteredData);\n\n        if (flag) {\n          return;\n        }\n\n        _this.treeObj.fields = _this.getTreeFields(fields);\n\n        _this.treeObj.dataBind();\n      }\n    });\n  };\n\n  DropDownTree.prototype.nestedFilter = function (value, filteredFields) {\n    // eslint-disable-next-line\n    var matchedDataSource = [];\n\n    for (var i = 0; i < this.treeData.length; i++) {\n      // eslint-disable-next-line\n      var filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n\n      if (!isNullOrUndefined(filteredChild)) {\n        matchedDataSource.push(filteredChild);\n      }\n    }\n\n    filteredFields.dataSource = matchedDataSource;\n    return filteredFields;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.nestedChildFilter = function (value, node) {\n    // eslint-disable-next-line\n    var children = node[this.fields.child];\n\n    if (isNullOrUndefined(children)) {\n      return this.isMatchedNode(value, node) ? node : null;\n    } else {\n      // eslint-disable-next-line\n      var matchedChildren = [];\n\n      for (var i = 0; i < children.length; i++) {\n        // eslint-disable-next-line\n        var filteredChild = this.nestedChildFilter(value, children[i]);\n\n        if (!isNullOrUndefined(filteredChild)) {\n          matchedChildren.push(filteredChild);\n        }\n      }\n\n      var filteredItems = Object.assign({}, node);\n\n      if (matchedChildren.length !== 0) {\n        filteredItems[this.fields.child] = matchedChildren;\n        return filteredItems;\n      } else {\n        filteredItems[this.fields.child] = null;\n        return this.isMatchedNode(value, filteredItems) ? filteredItems : null;\n      }\n    }\n  };\n\n  DropDownTree.prototype.selfReferencefilter = function (value, filteredFields) {\n    // eslint-disable-next-line\n    var matchedData = []; // eslint-disable-next-line\n\n    var matchedDataSource = [];\n\n    for (var i = 0; i < this.treeData.length; i++) {\n      if (this.isMatchedNode(value, this.treeData[i])) {\n        matchedData.push(this.treeData[i]);\n      }\n    }\n\n    for (var i = 0; i < matchedData.length; i++) {\n      if (matchedDataSource.indexOf(matchedData[i]) === -1) {\n        matchedDataSource.push(matchedData[i]); // eslint-disable-next-line\n\n        var parentId = matchedData[i][this.fields.parentValue];\n\n        while (!isNullOrUndefined(parentId)) {\n          // eslint-disable-next-line\n          var parent_1 = null;\n\n          for (var j = 0; j < this.treeData.length; j++) {\n            // eslint-disable-next-line\n            var value_1 = this.treeData[j][this.fields.value];\n\n            if (!isNullOrUndefined(value_1) && value_1 === parentId) {\n              parent_1 = this.treeData[j];\n              break;\n            }\n          }\n\n          if (!isNullOrUndefined(parent_1) && matchedDataSource.indexOf(parent_1) === -1) {\n            matchedDataSource.push(parent_1);\n            parentId = parent_1[this.fields.parentValue];\n          } else {\n            break;\n          }\n        }\n      }\n    }\n\n    filteredFields.dataSource = matchedDataSource;\n    return filteredFields;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.isMatchedNode = function (value, node) {\n    var checkValue = node[this.fields.text];\n\n    if (this.ignoreCase) {\n      checkValue = checkValue.toLowerCase();\n      value = value.toLowerCase();\n    }\n\n    if (this.ignoreAccent) {\n      checkValue = DataUtil.ignoreDiacritics(checkValue);\n      value = DataUtil.ignoreDiacritics(value);\n    }\n\n    if (this.filterType === 'StartsWith') {\n      return checkValue.slice(0, value.length) === value;\n    } else if (this.filterType === 'EndsWith') {\n      return checkValue.slice(-value.length) === value;\n    } else {\n      return checkValue.indexOf(value) !== -1;\n    }\n  };\n  /* To wire events for the dropdown tree */\n\n\n  DropDownTree.prototype.wireEvents = function () {\n    EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n    EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n    EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n    EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n    EventHandler.add(window, 'resize', this.windowResize, this);\n    var formElement = closest(this.inputWrapper, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n\n  DropDownTree.prototype.wireTreeEvents = function () {\n    this.keyboardModule = new KeyboardEvents(this.tree, {\n      keyAction: this.treeAction.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n\n  DropDownTree.prototype.wireCheckAllWrapperEvents = function () {\n    this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n      keyAction: this.checkAllAction.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  /* To unwire events for the dropdown tree */\n\n\n  DropDownTree.prototype.unWireEvents = function () {\n    EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n    EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n    EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n    EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n    EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n    EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n    EventHandler.remove(window, 'resize', this.windowResize);\n    var formElement = closest(this.inputWrapper, 'form');\n\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n  };\n  /* Trigger when the dropdown is clicked */\n\n\n  DropDownTree.prototype.dropDownClick = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    if (this.isClearButtonClick) {\n      this.isClearButtonClick = false;\n      return;\n    }\n\n    if (this.isPopupOpen) {\n      this.hidePopup();\n    } else {\n      this.focusIn(e);\n      this.renderPopup();\n    }\n\n    this.showOverAllClear();\n  };\n\n  DropDownTree.prototype.mouseIn = function () {\n    if (this.enabled || !this.readonly) {\n      this.showOverAllClear();\n    }\n  };\n\n  DropDownTree.prototype.onMouseLeave = function () {\n    if (!this.inputFocus) {\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n  };\n\n  DropDownTree.prototype.getDirective = function () {\n    return 'EJS-DROPDOWNTREE';\n  };\n\n  DropDownTree.prototype.focusOut = function (e) {\n    if (!this.enabled || this.readonly || !this.inputFocus) {\n      return;\n    }\n\n    if ((Browser.isIE || Browser.info.name === 'edge') && e.target === this.inputWrapper) {\n      return;\n    }\n\n    var target = e.relatedTarget;\n\n    if (target !== this.inputEle && isNullOrUndefined(target) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n      this.onFocusOut(e);\n    }\n  };\n\n  DropDownTree.prototype.onFocusOut = function (event) {\n    this.inputFocus = false;\n\n    if (this.isPopupOpen) {\n      this.hidePopup();\n    }\n\n    if (this.isClearButtonClick) {\n      this.isClearButtonClick = false;\n    }\n\n    if (this.showClearButton) {\n      this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n\n    removeClass([this.inputWrapper], [INPUTFOCUS]);\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      var isValue = this.value ? this.value.length ? true : false : false;\n\n      if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n        if (this.chipWrapper && this.mode === 'Default') {\n          addClass([this.chipWrapper], HIDEICON);\n          removeClass([this.inputWrapper], SHOW_CHIP);\n          removeClass([this.inputEle], CHIP_INPUT);\n        }\n      }\n\n      if (!this.wrapText && isValue) {\n        this.updateView();\n      }\n    }\n\n    if (this.changeOnBlur) {\n      this.triggerChangeEvent(event);\n    }\n\n    this.removeValue = false;\n    this.oldValue = this.value;\n    this.trigger('blur');\n  };\n\n  DropDownTree.prototype.updateView = function () {\n    if (!this.showCheckBox && !this.allowMultiSelection || this.mode === 'Custom' || this.inputFocus) {\n      return;\n    }\n\n    if (this.mode !== 'Box') {\n      addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n    } else {\n      addClass([this.inputWrapper], SHOW_CHIP);\n    }\n\n    if (this.value && this.value.length !== 0) {\n      if (this.inputWrapper.contains(this.chipWrapper)) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n\n      addClass([this.inputEle], CHIP_INPUT);\n      this.updateOverFlowView();\n      this.ensurePlaceHolder();\n    }\n  };\n\n  DropDownTree.prototype.triggerChangeEvent = function (event) {\n    var isEqual = this.ddtCompareValues(this.oldValue, this.value);\n\n    if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n      var eventArgs = {\n        e: event,\n        oldValue: this.oldValue,\n        value: this.value,\n        isInteracted: event ? true : false,\n        element: this.element\n      };\n      this.trigger('change', eventArgs);\n      this.oldValue = this.value;\n    }\n  };\n\n  DropDownTree.prototype.ddtCompareValues = function (oldValue, newValue) {\n    if (oldValue === null || newValue === null) {\n      var isValid = oldValue === null ? newValue === oldValue ? true : false : oldValue.length === 0 ? newValue === oldValue : false;\n      return isValid;\n    } else if (oldValue.length !== newValue.length) {\n      return false;\n    }\n\n    for (var i = 0; i < oldValue.length; i++) {\n      if (oldValue[i] !== newValue[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  DropDownTree.prototype.focusIn = function (e) {\n    if (!this.enabled || this.readonly || this.inputFocus) {\n      return;\n    }\n\n    this.showOverAllClear();\n    this.inputFocus = true;\n    addClass([this.inputWrapper], [INPUTFOCUS]);\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.mode !== 'Delimiter' && this.inputFocus) {\n        if (this.chipWrapper && this.value && this.value.length !== 0) {\n          removeClass([this.chipWrapper], HIDEICON);\n          addClass([this.inputEle], CHIP_INPUT);\n        }\n\n        addClass([this.inputWrapper], SHOW_CHIP);\n\n        if (this.popupObj) {\n          this.popupObj.refreshPosition();\n        }\n      }\n\n      if (!this.wrapText && this.mode !== 'Custom') {\n        if (this.inputWrapper.contains(this.overFlowWrapper)) {\n          addClass([this.overFlowWrapper], HIDEICON);\n        }\n\n        if (this.mode === 'Delimiter') {\n          removeClass([this.inputWrapper], SHOW_CHIP);\n          removeClass([this.inputEle], CHIP_INPUT);\n        } else {\n          addClass([this.inputWrapper], SHOW_CHIP);\n        }\n\n        removeClass([this.inputWrapper], SHOW_TEXT);\n        this.ensurePlaceHolder();\n      }\n    }\n\n    var args = {\n      isInteracted: e ? true : false,\n      event: e\n    };\n    this.trigger('focus', args);\n  };\n\n  DropDownTree.prototype.treeAction = function (e) {\n    var _this = this;\n\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'escape':\n          case 'altUp':\n            _this.inputWrapper.focus();\n\n            e.preventDefault();\n\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            break;\n\n          case 'tab':\n          case 'shiftTab':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            break;\n\n          case 'enter':\n          case 'ctrlEnter':\n          case 'shiftEnter':\n          case 'csEnter':\n            if (!_this.showCheckBox) {\n              _this.isValueChange = true;\n              _this.keyEventArgs = e;\n            }\n\n            break;\n\n          case 'space':\n            _this.isValueChange = true;\n            _this.keyEventArgs = e;\n            break;\n\n          case 'ctrlA':\n            if (_this.allowMultiSelection) {\n              _this.selectAll(true);\n            }\n\n            break;\n\n          case 'moveRight':\n          case 'moveLeft':\n          case 'shiftDown':\n          case 'moveDown':\n          case 'ctrlDown':\n          case 'csDown':\n          case 'shiftUp':\n          case 'moveUp':\n          case 'ctrlUp':\n          case 'csUp':\n          case 'home':\n          case 'shiftHome':\n          case 'ctrlHome':\n          case 'csHome':\n          case 'end':\n          case 'shiftEnd':\n          case 'ctrlEnd':\n          case 'csEnd':\n        }\n      } else {\n        e.stopImmediatePropagation();\n      }\n    });\n  };\n\n  DropDownTree.prototype.keyActionHandler = function (e) {\n    var _this = this;\n\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'escape':\n          case 'altUp':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            break;\n\n          case 'shiftTab':\n          case 'tab':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n\n            if (_this.inputFocus) {\n              _this.onFocusOut();\n            }\n\n            break;\n\n          case 'altDown':\n            if (!_this.isPopupOpen) {\n              _this.showPopup();\n\n              e.preventDefault();\n            }\n\n            break;\n\n          case 'moveDown':\n            if (_this.showSelectAll && _this.showCheckBox) {\n              _this.checkAllParent.focus();\n            }\n\n            break;\n        }\n      }\n    });\n  };\n\n  DropDownTree.prototype.checkAllAction = function (e) {\n    var _this = this;\n\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'space':\n            _this.clickHandler(e);\n\n            break;\n\n          case 'moveDown':\n            var focusedElement = _this.treeObj.element.querySelector('li');\n\n            focusedElement.focus();\n            addClass([focusedElement], ['e-node-focus']);\n        }\n      }\n    });\n  };\n\n  DropDownTree.prototype.windowResize = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        width: this.setWidth()\n      });\n      this.popupObj.refreshPosition();\n    }\n  };\n\n  DropDownTree.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputWrapper, 'form');\n\n    if (formElement && e.target === formElement) {\n      this.isDynamicChange = true;\n      this.setProperties({\n        value: null\n      }, true);\n      this.resetValue(true);\n      this.isDynamicChange = false;\n    }\n  };\n\n  DropDownTree.prototype.getAriaAttributes = function () {\n    var disable = this.enabled ? 'false' : 'true';\n    return {\n      'aria-disabled': disable,\n      'aria-owns': this.element.id + '_options',\n      'role': 'listbox',\n      'aria-haspopup': 'true',\n      'aria-expanded': 'false',\n      'aria-activedescendant': 'null',\n      'aria-labelledby': this.hiddenElement.id\n    };\n  };\n\n  DropDownTree.prototype.updateOverFlowView = function () {\n    this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n    removeClass([this.overFlowWrapper], HIDEICON);\n\n    if (this.value && this.value.length) {\n      var data = '';\n      var overAllContainer = void 0;\n      var temp = void 0;\n      var tempData = void 0;\n      var tempIndex = 1;\n      var wrapperleng = void 0;\n      var remaining = void 0;\n      var downIconWidth = 0;\n      this.overFlowWrapper.innerHTML = ''; // eslint-disable-next-line\n\n      var l10nLocale = {\n        overflowCountTemplate: '+${count} more..',\n        totalCountTemplate: '${count} selected'\n      };\n      this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n      var remainContent = this.l10n.getConstant('overflowCountTemplate');\n      var totalContent = this.l10n.getConstant('totalCountTemplate');\n      var remainElement = this.createElement('span', {\n        className: REMAIN_WRAPPER\n      });\n      this.overFlowWrapper.appendChild(remainElement);\n      remainElement.innerText = remainContent.replace('${count}', this.value.length.toString());\n      var remainSize = remainElement.offsetWidth;\n      remove(remainElement);\n\n      if (this.showDropDownIcon) {\n        downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n      }\n\n      if (!isNullOrUndefined(this.value)) {\n        if (this.mode !== 'Box') {\n          for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n            data += index === 0 ? '' : this.delimiterChar + ' ';\n            temp = this.getOverflowVal(index);\n            data += temp;\n            temp = this.overFlowWrapper.innerHTML;\n\n            if (this.enableHtmlSanitizer) {\n              this.overFlowWrapper.innerText = data;\n            } else {\n              this.overFlowWrapper.innerHTML = data;\n            }\n\n            wrapperleng = this.overFlowWrapper.offsetWidth;\n            overAllContainer = this.inputWrapper.offsetWidth;\n\n            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n              if (tempData !== undefined && tempData !== '') {\n                temp = tempData;\n                index = tempIndex + 1;\n              }\n\n              this.overFlowWrapper.innerHTML = temp;\n              remaining = this.value.length - index;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n\n              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                var textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                textArr.pop();\n                this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                remaining++;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n              }\n\n              break;\n            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n              tempData = data;\n              tempIndex = index;\n            } else if (index === 0) {\n              tempData = '';\n              tempIndex = -1;\n            }\n          }\n        } else {\n          addClass([this.chipWrapper], HIDEICON);\n          var ele = this.chipWrapper.cloneNode(true);\n          var chips = selectAll('.' + CHIP, ele);\n\n          for (var i = 0; i < chips.length; i++) {\n            temp = this.overFlowWrapper.innerHTML;\n            this.overFlowWrapper.appendChild(chips[i]);\n            data = this.overFlowWrapper.innerHTML;\n            wrapperleng = this.overFlowWrapper.offsetWidth;\n            overAllContainer = this.inputWrapper.offsetWidth;\n\n            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n              if (tempData !== undefined && tempData !== '') {\n                temp = tempData;\n                i = tempIndex + 1;\n              }\n\n              this.overFlowWrapper.innerHTML = temp;\n              remaining = this.value.length - i;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n\n              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                remaining++;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n              }\n\n              break;\n            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n              tempData = data;\n              tempIndex = i;\n            } else if (i === 0) {\n              tempData = '';\n              tempIndex = -1;\n            }\n          }\n        }\n      }\n\n      if (remaining > 0) {\n        this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, remainContent, totalContent));\n      }\n\n      if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n        addClass([remainElement], REMAIN_COUNT);\n      }\n    } else {\n      this.overFlowWrapper.innerHTML = '';\n      addClass([this.overFlowWrapper], HIDEICON);\n    }\n\n    this.updateDelimMode();\n  };\n\n  DropDownTree.prototype.updateRemainTemplate = function (remainElement, remaining, remainContent, totalContent) {\n    if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 && this.overFlowWrapper.firstChild.nodeValue === '') {\n      this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n    }\n\n    remainElement.innerHTML = '';\n    remainElement.innerText = this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box') ? remainContent.replace('${count}', remaining.toString()) : totalContent.replace('${count}', remaining.toString());\n\n    if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n      removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n    } else {\n      addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n      removeClass([this.overFlowWrapper], REMAIN_COUNT);\n    }\n\n    return remainElement;\n  };\n\n  DropDownTree.prototype.getOverflowVal = function (index) {\n    // eslint-disable-next-line\n    var selectedData = this.getSelectedData(this.value[index]);\n    return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n  };\n\n  DropDownTree.prototype.updateDelimMode = function () {\n    if (this.mode !== 'Box') {\n      if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n        addClass([this.overFlowWrapper], REMAIN_COUNT);\n        addClass([this.overFlowWrapper], SHOW_TEXT);\n      } else {\n        this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n        removeClass([this.overFlowWrapper], REMAIN_COUNT);\n      }\n    } else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n      this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n    }\n  };\n\n  DropDownTree.prototype.createHiddenElement = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'class': HIDDENELEMENT,\n          'tabindex': '-1',\n          'multiple': ''\n        }\n      });\n    } else {\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'tabindex': '-1',\n          'class': HIDDENELEMENT\n        }\n      });\n    }\n\n    prepend([this.hiddenElement], this.inputWrapper);\n    this.validationAttribute();\n  };\n\n  DropDownTree.prototype.createClearIcon = function () {\n    this.overAllClear = this.createElement('span', {\n      className: CLOSEICON_CLASS\n    });\n    addClass([this.overAllClear], HIDEICON);\n    removeClass([this.inputWrapper], SHOW_CLEAR);\n\n    if (this.showClearButton) {\n      this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n    }\n  };\n\n  DropDownTree.prototype.validationAttribute = function () {\n    var name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n    this.hiddenElement.setAttribute('name', name);\n    this.inputEle.removeAttribute('name');\n    var attributes$$1 = ['required', 'aria-required', 'form'];\n\n    for (var i = 0; i < attributes$$1.length; i++) {\n      var attr = this.inputEle.getAttribute(attributes$$1[i]);\n\n      if (attr) {\n        this.hiddenElement.setAttribute(attributes$$1[i], attr);\n        this.inputEle.removeAttribute(attributes$$1[i]);\n      }\n    }\n  };\n\n  DropDownTree.prototype.createChip = function () {\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.chipWrapper = this.createElement('span', {\n        className: CHIP_WRAPPER\n      });\n      this.chipCollection = this.createElement('span', {\n        className: CHIP_COLLECTION\n      });\n      this.chipWrapper.appendChild(this.chipCollection);\n      this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n      addClass([this.inputWrapper], SHOW_CHIP);\n      var isValid = this.getValidMode();\n\n      if (isValid && this.value !== null && this.value && this.value.length !== 0) {\n        addClass([this.inputEle], CHIP_INPUT);\n      } else if (this.value === null || this.value && this.value.length === 0 || this.checkWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n    }\n  };\n\n  DropDownTree.prototype.getValidMode = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      return this.mode === 'Box' ? true : this.mode === 'Default' && this.inputFocus ? true : false;\n    } else {\n      return false;\n    }\n  };\n\n  DropDownTree.prototype.createSelectAllWrapper = function () {\n    this.checkAllParent = this.createElement('div', {\n      className: CHECKALLPARENT,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    this.selectAllSpan = this.createElement('span', {\n      className: ALLTEXT\n    });\n    this.selectAllSpan.textContent = '';\n    var ele = closest(this.element, '.' + BIGGER);\n    var touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n    this.checkBoxElement = createCheckBox(this.createElement, true, {\n      cssClass: touchClass\n    });\n    this.checkBoxElement.setAttribute('role', 'checkbox');\n    this.checkAllParent.appendChild(this.checkBoxElement);\n    this.checkAllParent.appendChild(this.selectAllSpan);\n    this.setLocale();\n    EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n    this.wireCheckAllWrapperEvents();\n  };\n\n  DropDownTree.prototype.clickHandler = function (e) {\n    var target;\n\n    if (e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT)) {\n      target = e.currentTarget.firstElementChild.lastElementChild;\n    } else {\n      target = e.target;\n    }\n\n    this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      this.isClicked = true;\n      var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n      this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n      this.isClicked = false;\n    }\n\n    e.preventDefault();\n  };\n\n  DropDownTree.prototype.changeState = function (wrapper, state, e) {\n    var ariaState;\n    var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n\n    if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.add(CHECK);\n      ariaState = 'true';\n\n      if (!this.isReverseUpdate) {\n        this.isCheckAllCalled = true;\n        this.treeObj.checkAll();\n\n        if (!this.changeOnBlur) {\n          this.triggerChangeEvent(e);\n        }\n      }\n\n      this.setLocale(true);\n    } else if (state === 'uncheck' && frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.remove(CHECK);\n      ariaState = 'false';\n\n      if (!this.isReverseUpdate) {\n        this.treeObj.uncheckAll();\n\n        if (!this.changeOnBlur) {\n          this.triggerChangeEvent(e);\n        }\n      }\n\n      this.setLocale(false);\n    }\n\n    this.setMultiSelect();\n    this.ensurePlaceHolder();\n    ariaState = state === 'check' ? 'true' : 'false';\n\n    if (!isNullOrUndefined(ariaState)) {\n      wrapper.setAttribute('aria-checked', ariaState);\n    }\n  };\n\n  DropDownTree.prototype.setLocale = function (unSelect) {\n    if (!this.selectAllSpan) {\n      return;\n    }\n\n    if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n      var template = unSelect ? this.unSelectAllText : this.selectAllText;\n      this.selectAllSpan.textContent = ''; // eslint-disable-next-line\n\n      var compiledString = compile(template);\n      var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n\n      for (var _i = 0, _a = compiledString({}, this, templateName, null, !this.isStringTemplate); _i < _a.length; _i++) {\n        var item = _a[_i];\n        this.selectAllSpan.textContent = item.textContent;\n      }\n    } else {\n      this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n    }\n  };\n\n  DropDownTree.prototype.setAttributes = function () {\n    this.inputEle.setAttribute('tabindex', '-1');\n    var id = this.element.getAttribute('id');\n    this.hiddenElement.id = id + '_hidden';\n    this.inputWrapper.setAttribute('tabindex', '0');\n    attributes(this.inputWrapper, this.getAriaAttributes());\n  };\n\n  DropDownTree.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        if (htmlAttr === 'class') {\n          this.inputWrapper.classList.add(this.htmlAttributes[\"\" + htmlAttr]);\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n          this.setProperties({\n            enabled: false\n          }, true);\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n          this.setProperties({\n            readonly: true\n          }, true);\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder', 'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n\n          if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            if (htmlAttr === 'placeholder') {\n              Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputEle);\n            } else {\n              this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n            }\n          } else {\n            this.inputWrapper.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          }\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateDataAttribute = function () {\n    var value = this.htmlAttributes;\n    var invalidAttr = ['class', 'style', 'id', 'type'];\n    var attr = {};\n\n    for (var a = 0; a < this.element.attributes.length; a++) {\n      if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.element.attributes[a].name === 'readonly')) {\n        attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n      }\n    }\n\n    extend(attr, value, attr);\n    this.setProperties({\n      htmlAttributes: attr\n    }, true);\n  };\n\n  DropDownTree.prototype.showOverAllClear = function () {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    if (this.overAllClear) {\n      var isValue = this.value ? this.value.length ? true : false : false;\n\n      if (isValue && this.showClearButton) {\n        removeClass([this.overAllClear], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CLEAR);\n      } else {\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n      }\n    }\n  };\n\n  DropDownTree.prototype.setTreeValue = function () {\n    if (this.value !== null && this.value.length !== 0) {\n      // eslint-disable-next-line\n      var data = void 0;\n\n      if (this.showCheckBox || this.allowMultiSelection) {\n        for (var i = 0; i < this.value.length; i++) {\n          data = this.treeObj.getTreeData(this.value[i])[0];\n\n          if (isNullOrUndefined(data)) {\n            this.value.splice(this.value.indexOf(this.value[i]), 1);\n          }\n        }\n\n        if (this.value.length !== 0) {\n          this.setValidValue();\n        }\n      } else {\n        data = this.treeObj.getTreeData(this.value[0])[0];\n\n        if (!isNullOrUndefined(data)) {\n          this.setProperties({\n            text: data[this.fields.text]\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            value: this.currentValue\n          }, true);\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.setTreeText = function () {\n    if (this.value !== null && !this.isInitialized) {\n      return;\n    }\n\n    if (this.text !== null) {\n      // eslint-disable-next-line\n      var data = void 0;\n      var valArr = [];\n\n      if (this.showCheckBox || this.allowMultiSelection) {\n        var textArr = this.text.split(this.delimiterChar);\n\n        for (var i = 0; i < textArr.length; i++) {\n          data = this.getItems(textArr[i]);\n\n          if (!isNullOrUndefined(data)) {\n            valArr.push(data[this.fields.value].toString());\n          }\n        }\n\n        if (valArr.length !== 0) {\n          this.oldValue = this.value;\n          this.setProperties({\n            value: valArr\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            text: this.currentText\n          }, true);\n        }\n      } else {\n        data = this.getItems(this.text);\n\n        if (!isNullOrUndefined(data)) {\n          this.oldValue = this.value;\n          this.setProperties({\n            value: [data[this.fields.value].toString()]\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            text: this.currentText\n          }, true);\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.setSelectedValue = function () {\n    if (this.value != null) {\n      return;\n    }\n\n    if (!this.isInitialized) {\n      this.oldValue = this.value;\n\n      if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n        this.setProperties({\n          value: this.treeObj.selectedNodes\n        }, true);\n\n        if (this.allowMultiSelection) {\n          this.updateMode();\n        }\n      } else if (this.showCheckBox && this.treeObj.checkedNodes) {\n        if (this.treeObj.checkedNodes.length > 0) {\n          this.setProperties({\n            value: this.treeObj.checkedNodes\n          }, true);\n          setValue('selectedNodes', [], this.treeObj);\n          this.treeObj.dataBind();\n          this.updateMode();\n        }\n      }\n\n      this.updateSelectedValues();\n      this.currentText = this.text;\n      this.currentValue = this.value;\n    }\n  };\n\n  DropDownTree.prototype.setValidValue = function () {\n    var _this = this;\n\n    if (!this.showCheckBox && !this.allowMultiSelection) {\n      Input.setValue(this.text, this.inputEle, this.floatLabelType);\n      var id = this.value[0].toString();\n\n      if (this.treeObj.selectedNodes[0] !== id) {\n        setValue('selectedNodes', [id], this.treeObj);\n      }\n    } else {\n      if (this.showCheckBox) {\n        var difference = this.value.filter(function (e) {\n          return _this.treeObj.checkedNodes.indexOf(e) === -1;\n        });\n\n        if (difference.length > 0 || this.treeSettings.autoCheck) {\n          this.treeObj.checkedNodes = this.value.slice();\n          this.treeObj.dataBind();\n          this.setMultiSelect();\n        }\n      } else {\n        this.treeObj.selectedNodes = this.value.slice();\n        this.selectedText = [];\n        this.updateSelectedValues();\n      }\n\n      this.treeObj.dataBind();\n    }\n\n    this.currentText = this.text;\n    this.currentValue = this.value;\n\n    if (this.isInitialized) {\n      this.triggerChangeEvent();\n    }\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getItems = function (givenText) {\n    // eslint-disable-next-line\n    var data;\n\n    if (this.treeDataType === 1) {\n      for (var i = 0; i < this.treeItems.length; i++) {\n        // eslint-disable-next-line\n        var text = getValue(this.fields.text, this.treeItems[i]);\n\n        if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n          data = this.treeItems[i];\n          break;\n        }\n      }\n    } else {\n      data = this.getNestedItems(this.treeItems, this.fields, givenText);\n    }\n\n    return data;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getNestedItems = function (data, field, givenText) {\n    // eslint-disable-next-line\n    var newData;\n\n    for (var i = 0, objlen = data.length; i < objlen; i++) {\n      // eslint-disable-next-line\n      var dataId = getValue(this.fields.text, data[i]);\n\n      if (data[i] && dataId && dataId.toString() === givenText) {\n        return data[i];\n      } else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n        // eslint-disable-next-line\n        var childData = getValue(field.child, data[i]); // eslint-disable-next-line\n\n        newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n\n        if (newData !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n        var child = 'child'; // eslint-disable-next-line\n\n        newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n\n        if (newData !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return newData;\n  };\n\n  DropDownTree.prototype.getChildType = function (mapper) {\n    return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n  };\n  /* To render the treeview */\n\n\n  DropDownTree.prototype.renderTree = function () {\n    this.treeObj = new TreeView({\n      fields: this.getTreeFields(this.fields),\n      enableRtl: this.enableRtl,\n      nodeSelected: this.onNodeSelected.bind(this),\n      nodeChecked: this.onNodeChecked.bind(this),\n      nodeChecking: this.beforeCheck.bind(this),\n      nodeExpanded: this.onNodeExpanded.bind(this),\n      actionFailure: this.onActionFailure.bind(this),\n      nodeClicked: this.onNodeClicked.bind(this),\n      dataBound: this.OnDataBound.bind(this),\n      allowMultiSelection: this.allowMultiSelection,\n      enableHtmlSanitizer: this.enableHtmlSanitizer,\n      showCheckBox: this.showCheckBox,\n      autoCheck: this.treeSettings.autoCheck,\n      sortOrder: this.sortOrder,\n      expandOn: this.treeSettings.expandOn,\n      loadOnDemand: this.treeSettings.loadOnDemand,\n      nodeSelecting: this.onBeforeSelect.bind(this),\n      nodeTemplate: this.itemTemplate\n    });\n    this.treeObj.root = this.root ? this.root : this;\n    this.treeObj.appendTo('#' + this.tree.id);\n  };\n  /* To render the popup element */\n\n\n  DropDownTree.prototype.renderPopup = function () {\n    var _this = this;\n\n    if (this.isFilteredData) {\n      this.filterObj.value = '';\n      this.treeObj.fields = this.getTreeFields(this.fields);\n      this.isFilterRestore = true;\n      this.isFilteredData = false;\n      this.hideCheckAll(false);\n    }\n\n    var isCancelled = false;\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        addClass([_this.inputWrapper], [ICONANIMATION]);\n\n        if (_this.isFirstRender) {\n          _this.popupEle = _this.createElement('div', {\n            id: _this.element.id + '_popup',\n            className: POPUP_CLASS + ' ' + (_this.cssClass != null ? _this.cssClass : '')\n          });\n          document.body.appendChild(_this.popupEle);\n\n          _this.createPopup(_this.popupEle);\n        } else {\n          _this.popupEle = _this.popupObj.element;\n        }\n      } else {\n        isCancelled = true;\n      }\n\n      if (_this.isFirstRender && !isCancelled) {\n        prepend([_this.popupDiv], _this.popupEle);\n        removeClass([_this.popupDiv], DDTHIDEICON);\n\n        if (_this.allowFiltering) {\n          _this.renderFilter();\n        }\n\n        if (_this.showCheckBox && _this.showSelectAll && !_this.popupDiv.classList.contains(NODATA)) {\n          _this.createSelectAllWrapper();\n\n          _this.popupEle.insertBefore(_this.checkAllParent, _this.popupDiv);\n        }\n\n        if (_this.headerTemplate) {\n          _this.setHeaderTemplate();\n        }\n\n        if (_this.footerTemplate) {\n          _this.setFooterTemplate();\n        }\n\n        _this.isFirstRender = false;\n        /* eslint-disable */\n\n        if (_this.hasTemplate && _this.portals) {\n          _this.portals = _this.portals.concat(_this.treeObj.portals);\n          /* eslint-enable */\n\n          _this.renderReactTemplates();\n        }\n      }\n\n      if (!isCancelled) {\n        attributes(_this.inputWrapper, {\n          'aria-expanded': 'true'\n        });\n\n        _this.popupObj.show(null, _this.zIndex === 1000 ? _this.inputEle : null);\n\n        removeClass([_this.popupEle], DDTHIDEICON);\n\n        _this.updatePopupHeight();\n\n        _this.popupObj.refreshPosition();\n\n        if (!(_this.showCheckBox && _this.showSelectAll) && !_this.popupDiv.classList.contains(NODATA) && _this.treeItems.length > 0) {\n          var focusedElement = _this.treeObj.element.querySelector('li');\n\n          focusedElement.focus();\n          addClass([focusedElement], ['e-node-focus']);\n        }\n\n        if (_this.checkSelectAll && _this.checkBoxElement) {\n          var wrap = closest(_this.checkBoxElement, '.' + CHECKBOXWRAP);\n\n          _this.changeState(wrap, 'check');\n\n          _this.checkSelectAll = false;\n        }\n\n        if (_this.allowFiltering) {\n          removeClass([_this.inputWrapper], [INPUTFOCUS]);\n\n          _this.filterObj.element.focus();\n        }\n\n        var eventArgs = {\n          popup: _this.popupObj\n        };\n\n        _this.trigger('open', eventArgs);\n      }\n    });\n  };\n\n  DropDownTree.prototype.updatePopupHeight = function () {\n    if (this.isFirstRender) {\n      return;\n    }\n\n    var popupHeight = this.getHeight();\n    this.popupEle.style.maxHeight = popupHeight;\n\n    if (this.allowFiltering) {\n      var height = Math.round(this.filterContainer.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    if (this.headerTemplate) {\n      var height = Math.round(this.header.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    if (this.showCheckBox && this.showSelectAll && !this.popupDiv.classList.contains(NODATA)) {\n      var height = Math.round(this.checkAllParent.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    if (this.footerTemplate) {\n      var height = Math.round(this.footer.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n\n    var border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n    border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n    popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n    this.popupDiv.style.maxHeight = popupHeight;\n  };\n\n  DropDownTree.prototype.createPopup = function (element) {\n    var _this = this;\n\n    if (this.isFirstRender) {\n      this.popupObj = new Popup(element, {\n        width: this.setWidth(),\n        targetType: 'relative',\n        collision: {\n          X: 'flip',\n          Y: 'flip'\n        },\n        relateTo: this.inputWrapper,\n        zIndex: this.zIndex,\n        enableRtl: this.enableRtl,\n        position: {\n          X: 'left',\n          Y: 'bottom'\n        },\n        close: function () {\n          _this.isPopupOpen = false;\n        },\n        open: function () {\n          EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n          _this.isPopupOpen = true;\n        },\n        targetExitViewport: function () {\n          if (!Browser.isDevice) {\n            _this.hidePopup();\n          }\n        }\n      });\n    }\n  };\n  /* To calculate the width when change via set model */\n\n\n  DropDownTree.prototype.setElementWidth = function (inputWidth) {\n    var ddElement = this.inputWrapper;\n\n    if (!isNullOrUndefined(inputWidth)) {\n      if (typeof inputWidth === 'number') {\n        ddElement.style.width = formatUnit(inputWidth);\n      } else if (typeof inputWidth === 'string') {\n        ddElement.style.width = inputWidth.match(/px|%|em/) ? inputWidth : formatUnit(inputWidth);\n      }\n    }\n  };\n  /* To calculate the width of the popup */\n\n\n  DropDownTree.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n    } else if (typeof this.popupWidth === 'string') {\n      width = this.popupWidth.match(/px|em/) ? this.popupWidth : width;\n    }\n\n    return width;\n  };\n  /* To calculate the height of the popup */\n\n\n  DropDownTree.prototype.getHeight = function () {\n    var height = formatUnit(this.popupHeight);\n\n    if (height.indexOf('%') > -1) {\n      // Will set the height of the popup according to the view port height\n      height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n    } else if (typeof this.popupHeight === 'string') {\n      height = this.popupHeight.match(/px|em/) ? this.popupHeight : height;\n    }\n\n    return height;\n  };\n\n  DropDownTree.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    var isTree = closest(target, '.' + PARENTITEM);\n    var isFilter = closest(target, '.' + FILTERWRAP);\n    var isHeader = closest(target, '.' + HEADER);\n    var isFooter = closest(target, '.' + FOOTER);\n    var isScroller = target.classList.contains(DROPDOWN) ? true : matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview');\n\n    if (this.isPopupOpen && (this.inputWrapper.contains(target) || isTree || isScroller || isHeader || isFooter) || (this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) || this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT) || target.classList.contains(CHECKBOXFRAME)))) {\n      this.isDocumentClick = false;\n      e.preventDefault();\n    } else if (!isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.contains(target) && this.inputFocus && !isFilter) {\n      this.focusOut(e);\n    }\n  };\n\n  DropDownTree.prototype.onActionFailure = function (e) {\n    this.trigger('actionFailure', e);\n    this.l10nUpdate(true);\n    addClass([this.popupDiv], NODATA);\n  };\n\n  DropDownTree.prototype.OnDataBound = function (args) {\n    this.treeItems = args.data;\n\n    if (this.treeItems.length <= 0) {\n      this.l10nUpdate();\n      addClass([this.popupDiv], NODATA);\n      this.hideCheckAll(true);\n    } else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n      removeClass([this.popupDiv], NODATA);\n      this.hideCheckAll(false);\n    }\n\n    this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n\n    if (this.isFirstRender && this.isRemoteData) {\n      this.setTreeValue();\n      this.setTreeText();\n      this.updateHiddenValue();\n      this.setSelectedValue();\n\n      if (!this.wrapText) {\n        this.updateView();\n      }\n\n      this.treeObj.element.focus();\n    }\n\n    var eventArgs = {\n      data: args.data\n    };\n    this.trigger('dataBound', eventArgs);\n\n    if (this.filterObj === null) {\n      this.isFilteredData = false;\n    }\n\n    if (this.isFilteredData) {\n      this.treeObj.expandAll();\n    }\n\n    if (this.isFilterRestore) {\n      this.restoreFilterSelection();\n      this.isFilterRestore = false;\n    }\n  };\n\n  DropDownTree.prototype.restoreFilterSelection = function () {\n    if (this.showCheckBox) {\n      this.treeObj.checkedNodes = this.value ? this.value : [];\n    } else {\n      this.treeObj.selectedNodes = this.value ? this.value : [];\n    }\n  };\n  /* To set cssclass for the dropdowntree */\n\n\n  DropDownTree.prototype.setCssClass = function (newClass, oldClass) {\n    var elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(newClass) && newClass !== '') {\n      addClass(elements, newClass.split(' '));\n    }\n  };\n\n  DropDownTree.prototype.setEnableRTL = function (state) {\n    if (state) {\n      this.inputWrapper.classList.add(RTL);\n    } else {\n      this.inputWrapper.classList.remove(RTL);\n    }\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = state;\n      this.popupObj.dataBind();\n    }\n\n    if (this.treeObj) {\n      this.treeObj.enableRtl = state;\n      this.treeObj.dataBind();\n    }\n  };\n  /* To set enable property */\n\n\n  DropDownTree.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputEle);\n\n    if (this.enabled) {\n      removeClass([this.inputWrapper], DISABLED);\n      this.inputEle.setAttribute('aria-disabled', 'false');\n      this.inputWrapper.setAttribute('aria-disabled', 'false');\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      addClass([this.inputWrapper], DISABLED);\n\n      if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n        removeClass([this.inputWrapper], [INPUTFOCUS]);\n      }\n\n      this.inputEle.setAttribute('aria-disabled', 'true');\n      this.inputWrapper.setAttribute('aria-disabled', 'true');\n    }\n  };\n\n  DropDownTree.prototype.cloneFields = function (fields) {\n    var clonedField = {\n      dataSource: fields.dataSource,\n      value: fields.value,\n      text: fields.text,\n      parentValue: fields.parentValue,\n      child: this.cloneChildField(fields.child),\n      hasChildren: fields.hasChildren,\n      expanded: fields.expanded,\n      iconCss: fields.iconCss,\n      imageUrl: fields.imageUrl,\n      htmlAttributes: fields.htmlAttributes,\n      query: fields.query,\n      selected: fields.selected,\n      selectable: fields.selectable,\n      tableName: fields.tableName,\n      tooltip: fields.tooltip\n    };\n    return clonedField;\n  };\n\n  DropDownTree.prototype.cloneChildField = function (fields) {\n    if (typeof fields === 'string') {\n      return fields;\n    } else {\n      var clonedField = {\n        dataSource: fields.dataSource,\n        value: fields.value,\n        text: fields.text,\n        parentValue: fields.parentValue,\n        child: fields.child ? this.cloneChildField(fields.child) : null,\n        hasChildren: fields.hasChildren,\n        expanded: fields.expanded,\n        iconCss: fields.iconCss,\n        imageUrl: fields.imageUrl,\n        htmlAttributes: fields.htmlAttributes,\n        query: fields.query,\n        selected: fields.selected,\n        selectable: fields.selectable,\n        tableName: fields.tableName,\n        tooltip: fields.tooltip\n      };\n      return clonedField;\n    }\n  };\n\n  DropDownTree.prototype.getTreeFields = function (fields) {\n    var treeFields = {\n      dataSource: fields.dataSource,\n      id: fields.value,\n      text: fields.text,\n      parentID: fields.parentValue,\n      child: this.getTreeChildren(fields.child),\n      hasChildren: fields.hasChildren,\n      expanded: fields.expanded,\n      iconCss: fields.iconCss,\n      imageUrl: fields.imageUrl,\n      isChecked: fields.selected,\n      htmlAttributes: fields.htmlAttributes,\n      query: fields.query,\n      selectable: fields.selectable,\n      selected: fields.selected,\n      tableName: fields.tableName,\n      tooltip: fields.tooltip\n    };\n    return treeFields;\n  };\n\n  DropDownTree.prototype.getTreeChildren = function (mapper) {\n    if (typeof mapper === 'string') {\n      return mapper;\n    } else if (!isNullOrUndefined(mapper)) {\n      mapper = this.getActualProperties(mapper);\n      var childFields = mapper;\n\n      if (mapper.value) {\n        childFields.id = mapper.value;\n      }\n\n      if (mapper.parentValue) {\n        childFields.parentID = mapper.parentValue;\n      }\n\n      if (mapper.child) {\n        childFields.child = this.getTreeChildren(mapper.child);\n      }\n\n      if (mapper.selected && this.showCheckBox) {\n        childFields.isChecked = mapper.selected;\n      }\n\n      return childFields;\n    }\n\n    return null;\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getTreeDataType = function (ds, field) {\n    if (this.fields.dataSource instanceof DataManager) {\n      for (var i = 0; i < ds.length; i++) {\n        if (typeof field.child === 'string' && isNullOrUndefined(getValue(field.child, ds[i]))) {\n          return 1;\n        }\n      }\n\n      return 2;\n    }\n\n    if (isNullOrUndefined(this.fields.dataSource)) this.fields.dataSource = [];\n\n    for (var i = 0, len = this.fields.dataSource.length; i < len; i++) {\n      if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, this.fields.dataSource[i]))) {\n        return 2;\n      }\n\n      if (!isNullOrUndefined(getValue(field.parentValue, this.fields.dataSource[i])) || !isNullOrUndefined(getValue(field.hasChildren, this.fields.dataSource[i]))) {\n        return 1;\n      }\n    }\n\n    return 1;\n  };\n  /* Triggers when the tree fields is changed dynamically */\n\n\n  DropDownTree.prototype.setFields = function () {\n    this.resetValue();\n\n    if (this.hasTemplate) {\n      this.updateTemplate();\n    }\n\n    this.treeObj.fields = this.getTreeFields(this.fields);\n    this.treeObj.dataBind();\n  };\n\n  DropDownTree.prototype.getEventArgs = function (args) {\n    // eslint-disable-next-line\n    var checkData = args.data; // eslint-disable-next-line\n\n    var selectData = args.nodeData;\n    var state;\n\n    if (this.showCheckBox) {\n      if (args.action === 'check') {\n        state = 'select';\n      } else if (args.action === 'uncheck') {\n        state = 'un-select';\n      }\n    }\n\n    var eventArgs = {\n      action: this.showCheckBox ? state : args.action,\n      isInteracted: this.isClicked ? true : args.isInteracted,\n      item: args.node,\n      itemData: this.showCheckBox ? checkData[0] : selectData\n    };\n    return eventArgs;\n  };\n\n  DropDownTree.prototype.onBeforeSelect = function (args) {\n    if (args.isInteracted) {\n      this.oldValue = this.value ? this.value.slice() : this.value;\n\n      if (this.value === null) {\n        this.setProperties({\n          value: []\n        }, true);\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateHiddenValue = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      return;\n    }\n\n    if (this.value && this.value.length) {\n      this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n    } else {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /* Triggers when the tree node is selected */\n\n\n  DropDownTree.prototype.onNodeSelected = function (args) {\n    if (this.showCheckBox) {\n      return;\n    }\n\n    var selectedText;\n\n    if (args.isInteracted) {\n      var id = getValue('id', args.nodeData).toString();\n\n      if (!this.allowMultiSelection) {\n        this.hiddenElement.innerHTML = '';\n        this.setProperties({\n          value: [id]\n        }, true);\n\n        if (this.itemTemplate) {\n          selectedText = getValue('text', this.treeObj.getNode(id));\n        } else {\n          selectedText = getValue('text', args.nodeData).toString();\n        }\n\n        Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n        this.setProperties({\n          text: selectedText\n        }, true);\n        this.currentText = this.text;\n        this.currentValue = this.value;\n        attributes(this.inputWrapper, {\n          'aria-describedby': this.element.id\n        });\n        attributes(this.inputWrapper, {\n          'aria-activedescendant': id.toString()\n        });\n        this.updateHiddenValue();\n        this.showOverAllClear();\n        this.hidePopup();\n        this.isNodeSelected = true;\n      } else if (this.allowMultiSelection) {\n        this.setMultiSelect();\n      }\n    }\n\n    var eventArgs = this.getEventArgs(args);\n    this.trigger('select', eventArgs);\n\n    if (this.isValueChange && !this.changeOnBlur) {\n      this.triggerChangeEvent(this.keyEventArgs);\n      this.isValueChange = false;\n    }\n  };\n\n  DropDownTree.prototype.onNodeClicked = function (args) {\n    if (!this.changeOnBlur && this.isNodeSelected) {\n      this.triggerChangeEvent(args.event);\n      this.isNodeSelected = false;\n    }\n\n    var target = args.event.target;\n\n    if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n      this.isClicked = true; // eslint-disable-next-line\n\n      var getNodeDetails = this.treeObj.getNode(args.node);\n\n      if (getNodeDetails.isChecked === 'true') {\n        this.treeObj.uncheckAll([args.node]);\n      } else {\n        this.treeObj.checkAll([args.node]);\n      }\n\n      this.isClicked = false;\n      this.setMultiSelect();\n      this.ensurePlaceHolder();\n    }\n\n    if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n      this.triggerChangeEvent(args.event);\n    }\n  };\n\n  DropDownTree.prototype.onNodeChecked = function (args) {\n    var eventArgs = this.getEventArgs(args);\n    this.trigger('select', eventArgs);\n\n    if (this.isFilteredData && args.action === 'uncheck') {\n      var id = getValue('id', args.data[0]).toString();\n      this.removeSelectedData(id, true);\n    }\n\n    if (!this.isChipDelete && args.isInteracted) {\n      this.setMultiSelect();\n      this.ensurePlaceHolder();\n    }\n\n    if (this.showSelectAll && this.checkBoxElement) {\n      var nodes = this.treeObj.element.querySelectorAll('li');\n      var checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n      var wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n\n      if (wrap && args.action === 'uncheck' && (args.isInteracted || checkedNodes.length === 0)) {\n        this.isReverseUpdate = true;\n        this.changeState(wrap, 'uncheck');\n        this.isReverseUpdate = false;\n      } else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length && (args.isInteracted || this.isCheckAllCalled)) {\n        this.isReverseUpdate = true;\n        this.isCheckAllCalled = false;\n        this.changeState(wrap, 'check');\n        this.isReverseUpdate = false;\n      }\n    }\n  };\n\n  DropDownTree.prototype.beforeCheck = function (args) {\n    if (args.isInteracted) {\n      this.oldValue = this.value ? this.value.slice() : this.value;\n    }\n  };\n\n  DropDownTree.prototype.onNodeExpanded = function (args) {\n    if (this.hasTemplate && this.portals) {\n      this.portals = [].concat(this.treeObj.portals);\n      /* eslint-enable */\n\n      this.renderReactTemplates();\n    }\n  };\n\n  DropDownTree.prototype.updateClearButton = function (state) {\n    if (state) {\n      if (!this.inputWrapper.contains(this.overAllClear)) {\n        this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n      } else {\n        removeClass([this.overAllClear], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CLEAR);\n      }\n    } else {\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n\n    if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n      var chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n\n      for (var i = 0; i < chipClose.length; i++) {\n        if (!state) {\n          addClass([chipClose[i]], HIDEICON);\n        } else {\n          removeClass([chipClose[i]], HIDEICON);\n        }\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateDropDownIconState = function (state) {\n    var spinIcon = select('.' + DDTICON, this.inputWrapper);\n\n    if (state) {\n      if (!spinIcon) {\n        Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n      } else {\n        removeClass([spinIcon], HIDEICON);\n      }\n\n      addClass([this.inputWrapper], SHOW_DD_ICON);\n    } else {\n      addClass([spinIcon], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_DD_ICON);\n    }\n  };\n\n  DropDownTree.prototype.updateMode = function () {\n    if (this.mode === 'Custom') {\n      return;\n    }\n\n    if (this.mode !== 'Delimiter') {\n      if (!this.inputWrapper.contains(this.chipWrapper)) {\n        this.createChip();\n      }\n\n      var isValid = this.getValidMode();\n\n      if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n        removeClass([this.chipWrapper], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CHIP);\n      } else if (!isValid) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n\n      var isValue = this.value !== null ? this.value.length !== 0 ? true : false : false;\n\n      if (isValid && isValue) {\n        addClass([this.inputEle], CHIP_INPUT);\n      } else {\n        removeClass([this.inputEle], CHIP_INPUT);\n      }\n    } else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n      removeClass([this.inputEle], CHIP_INPUT);\n\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n    }\n  };\n\n  DropDownTree.prototype.ensurePlaceHolder = function () {\n    if (isNullOrUndefined(this.value) || this.value && this.value.length === 0) {\n      removeClass([this.inputEle], CHIP_INPUT);\n\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n    }\n  };\n\n  DropDownTree.prototype.ensureClearIconPosition = function (floatLabelType) {\n    if (floatLabelType !== 'Never') {\n      this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n    }\n  };\n\n  DropDownTree.prototype.setMultiSelectValue = function (newValues) {\n    if (!this.isFilteredData) {\n      this.setProperties({\n        value: this.isFromFilterChange && newValues && newValues.length == 0 ? this.value : newValues\n      }, true);\n      this.isFromFilterChange = false;\n\n      if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n        this.treeObj.selectedNodes = this.value.slice();\n        this.treeObj.dataBind();\n      }\n    } else {\n      var selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n\n      for (var i = 0; i < newValues.length; i++) {\n        if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n          selectedValues.push(newValues[i]);\n        }\n      }\n\n      this.setProperties({\n        value: selectedValues\n      }, true);\n    }\n  };\n\n  DropDownTree.prototype.setMultiSelect = function () {\n    if (this.showCheckBox && !this.isDynamicChange) {\n      this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n    } else {\n      var ddtValue = this.allowMultiSelection ? this.showCheckBox ? this.treeObj.checkedNodes : this.treeObj.selectedNodes : this.value ? this.showCheckBox ? this.value : [this.value[0]] : null;\n      this.setMultiSelectValue(ddtValue);\n\n      if (this.showCheckBox && this.value !== null) {\n        this.treeObj.checkedNodes = this.value;\n        this.treeObj.dataBind();\n      }\n    }\n\n    this.selectedText = [];\n    var checkSelection = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n\n    if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n      removeClass([this.inputEle], CHIP_INPUT);\n      detach(this.chipWrapper);\n    }\n\n    var isValid = this.getValidMode();\n\n    if (isValid && this.value !== null) {\n      addClass([this.inputEle], CHIP_INPUT);\n\n      if (this.chipWrapper) {\n        removeClass([this.chipWrapper], HIDEICON);\n      }\n    }\n\n    var isValue = this.value ? this.value.length ? true : false : false;\n\n    if (this.chipWrapper && this.mode === 'Box' && !isValue) {\n      addClass([this.chipWrapper], HIDEICON);\n      removeClass([this.inputEle], CHIP_INPUT);\n    }\n\n    this.updateSelectedValues();\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getSelectedData = function (value) {\n    // eslint-disable-next-line\n    var data = null;\n\n    if (this.isFilteredData) {\n      for (var i = 0; i < this.selectedData.length; i++) {\n        if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n          data = this.selectedData[i];\n          break;\n        }\n      }\n    }\n\n    if (isNullOrUndefined(data)) {\n      if (this.treeSettings.loadOnDemand) {\n        data = this.getNodeData(value);\n      } else {\n        data = this.treeObj.getNode(value);\n      }\n\n      if (!isNullOrUndefined(data)) {\n        this.selectedData.push(data);\n      }\n    }\n\n    return data;\n  };\n\n  DropDownTree.prototype.getNodeData = function (id) {\n    var childItems;\n\n    if (isNullOrUndefined(id)) {\n      return childItems;\n    } else if (this.treeDataType === 1) {\n      for (var i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n        var dataId = getValue(this.fields.value, this.treeItems[i]);\n\n        if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n          return this.treeItems[i];\n        }\n      }\n    } else {\n      return this.getChildNodeData(this.treeItems, this.fields, id);\n    }\n\n    return childItems;\n  };\n\n  DropDownTree.prototype.getChildNodeData = function (obj, mapper, id) {\n    var newChildItems;\n\n    if (isNullOrUndefined(obj)) {\n      return newChildItems;\n    }\n\n    for (var i = 0, objlen = obj.length; i < objlen; i++) {\n      var dataValue = getValue(mapper.value, obj[i]);\n\n      if (obj[i] && dataValue && dataValue.toString() === id) {\n        return obj[i];\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        var childNodeData = getValue(mapper.child, obj[i]);\n        newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n\n        if (newChildItems !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        var child = 'child';\n        newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n\n        if (newChildItems !== undefined) {\n          break;\n        }\n      }\n    }\n\n    return newChildItems;\n  };\n\n  DropDownTree.prototype.getChildMapperFields = function (mapper) {\n    return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n  };\n\n  DropDownTree.prototype.removeSelectedData = function (value, muteOnChange) {\n    var selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n    selectedValues.splice(selectedValues.indexOf(value), 1);\n    this.setProperties({\n      value: selectedValues\n    }, muteOnChange);\n\n    for (var i = 0; i < this.selectedData.length; i++) {\n      if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n        this.selectedData.splice(i, 1);\n        break;\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateSelectedValues = function () {\n    this.dataValue = '';\n    var temp;\n    var text;\n    var textValue = ''; // eslint-disable-next-line\n\n    var selectedData;\n    this.hiddenElement.innerHTML = '';\n    var hiddenInputValue = '';\n\n    if ((!this.isChipDelete || this.treeSettings.autoCheck) && this.inputWrapper.contains(this.chipWrapper)) {\n      this.chipCollection.innerHTML = '';\n    }\n\n    if (!this.isFilteredData) {\n      this.selectedData = [];\n    }\n\n    if (!isNullOrUndefined(this.value)) {\n      for (var i = 0, len = this.value.length; i < len; i++) {\n        selectedData = this.getSelectedData(this.value[i]);\n        text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n        this.selectedText.push(text);\n        temp = this.selectedText[this.selectedText.length - 1];\n\n        if (this.selectedText.length > 1) {\n          this.dataValue += this.delimiterChar + ' ' + temp;\n          textValue += ',' + temp;\n        } else {\n          this.dataValue += temp;\n          textValue += temp;\n        }\n\n        if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) && (this.allowMultiSelection || this.showCheckBox)) {\n          this.setChipValues(temp, this.value[i]);\n        }\n\n        hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' + this.selectedText[this.selectedText.length - 1] + '</option>';\n      }\n\n      if (this.selectedText.length >= 1) {\n        this.setProperties({\n          text: textValue\n        }, true);\n      }\n\n      this.hiddenElement.innerHTML = hiddenInputValue;\n\n      if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n        this.setTagValues();\n      }\n    }\n\n    var isValid = this.getValidMode();\n\n    if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n    }\n\n    Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n\n    if (textValue === '') {\n      this.setProperties({\n        text: null\n      }, true);\n    } else {\n      this.setProperties({\n        text: textValue\n      }, true);\n    }\n\n    if (this.showClearButton && this.inputFocus) {\n      this.showOverAllClear();\n    }\n\n    if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n      this.popupObj.refreshPosition();\n    }\n\n    this.currentText = this.text;\n    this.currentValue = this.value;\n  };\n\n  DropDownTree.prototype.setChipValues = function (text, value) {\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.createChip();\n    }\n\n    var chip = this.createElement('span', {\n      className: CHIP,\n      attrs: {\n        'data-value': value\n      }\n    });\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT\n    });\n    var chipClose = this.createElement('span', {\n      className: CHIP_CLOSE + ' ' + ICONS\n    });\n\n    if (this.enableHtmlSanitizer) {\n      chipContent.innerText = text;\n    } else {\n      chipContent.innerHTML = text;\n    }\n\n    chip.appendChild(chipContent);\n    this.chipCollection.appendChild(chip);\n\n    if (this.showClearButton) {\n      chip.appendChild(chipClose);\n      EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n    }\n  };\n\n  DropDownTree.prototype.setTagValues = function () {\n    if (this.value === null || this.text == null) {\n      return;\n    }\n\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.createChip();\n    }\n\n    if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n      addClass([this.inputWrapper], SHOW_CHIP);\n    }\n\n    var chip = this.createElement('span', {\n      className: CHIP\n    });\n\n    if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n      addClass([this.inputEle], CHIP_INPUT);\n    }\n\n    if (this.chipWrapper.classList.contains(HIDEICON)) {\n      removeClass([this.chipWrapper], HIDEICON);\n    }\n\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT\n    });\n    var template = this.customTemplate;\n    var templateId = this.customTemplateId;\n    var templatestring = 'customTemplate';\n    var compiledString = this.templateComplier(template);\n    var tempArr = compiledString({\n      'value': this.value,\n      'text': this.text\n    }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, chipContent);\n    }\n\n    chip.appendChild(chipContent);\n    this.chipCollection.appendChild(chip);\n  };\n\n  DropDownTree.prototype.setSelectAllWrapper = function (state) {\n    if (this.isFirstRender) {\n      return;\n    }\n\n    if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n      this.createSelectAllWrapper();\n      this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n    } else if (this.popupEle.contains(this.checkAllParent)) {\n      detach(this.checkAllParent);\n      this.checkAllParent = null;\n    }\n  };\n\n  DropDownTree.prototype.setHeaderTemplate = function () {\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], HEADER);\n    } // eslint-disable-next-line\n\n\n    var compiledString = this.templateComplier(this.headerTemplate);\n    var tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, this.header);\n    }\n\n    this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n  }; // eslint-disable-next-line\n\n\n  DropDownTree.prototype.templateComplier = function (template) {\n    if (template) {\n      // eslint-disable-next-line\n      try {\n        if (document.querySelectorAll(template).length) {\n          return compile(document.querySelector(template).innerHTML.trim());\n        } else {\n          return compile(template);\n        }\n      } catch (e) {\n        return compile(template);\n      }\n    }\n\n    return compile(template);\n  };\n\n  DropDownTree.prototype.setFooterTemplate = function () {\n    if (this.footer) {\n      this.footer.innerHTML = '';\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], FOOTER);\n    } // eslint-disable-next-line\n\n\n    var compiledString = this.templateComplier(this.footerTemplate);\n    var tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, this.footer);\n    }\n\n    append([this.footer], this.popupEle);\n  };\n\n  DropDownTree.prototype.clearAll = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    this.resetValue();\n    this.showOverAllClear();\n\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.popupObj) {\n        this.popupObj.refreshPosition();\n      }\n\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(true);\n      }\n    }\n\n    if (e) {\n      this.isClearButtonClick = true;\n    }\n\n    if (!this.changeOnBlur) {\n      this.triggerChangeEvent(e);\n    }\n  };\n\n  DropDownTree.prototype.removeChip = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n\n    var element = e.target.parentElement;\n    var value = element.getAttribute('data-value');\n\n    if (this.chipCollection) {\n      if (element) {\n        remove(element);\n      }\n    }\n\n    this.isChipDelete = true;\n    this.isClearButtonClick = true;\n    this.removeSelectedData(value, true);\n    this.selectedText = [];\n\n    if (this.allowMultiSelection) {\n      this.treeObj.selectedNodes = this.value.slice();\n      this.updateSelectedValues();\n    }\n\n    if (this.showCheckBox) {\n      this.treeObj.uncheckAll([value]);\n      this.clearCheckAll();\n      this.setMultiSelect();\n    }\n\n    this.triggerChangeEvent(e);\n    this.isChipDelete = false;\n    this.ensurePlaceHolder();\n  };\n\n  DropDownTree.prototype.resetValue = function (isDynamicChange) {\n    if (this.value == [] && this.text == null) {\n      return;\n    }\n\n    Input.setValue(null, this.inputEle, this.floatLabelType);\n\n    if (!isDynamicChange) {\n      this.oldValue = this.value;\n      this.setProperties({\n        value: []\n      }, true);\n    }\n\n    this.dataValue = null;\n    this.setProperties({\n      text: null\n    }, true);\n    this.selectedData = [];\n    setValue('selectedNodes', [], this.treeObj);\n    this.hiddenElement.innerHTML = '';\n\n    if (this.showCheckBox) {\n      this.treeObj.uncheckAll();\n      this.setMultiSelect();\n      this.clearCheckAll();\n    }\n\n    if (this.oldValue === null && !isDynamicChange) {\n      this.removeValue = true;\n    } else if (isDynamicChange) {\n      this.triggerChangeEvent();\n    }\n\n    if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n      this.chipCollection.innerHTML = '';\n\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(true);\n      }\n\n      this.ensurePlaceHolder();\n    }\n  };\n\n  DropDownTree.prototype.clearCheckAll = function () {\n    if (this.showSelectAll && this.value && this.value.length === 0) {\n      this.setLocale(false);\n    }\n  };\n\n  DropDownTree.prototype.selectAllItems = function (state) {\n    if (this.showCheckBox) {\n      if (state) {\n        this.isCheckAllCalled = true;\n        this.treeObj.checkAll();\n      } else {\n        this.treeObj.uncheckAll();\n      }\n\n      this.checkSelectAll = true;\n    } else if (this.allowMultiSelection) {\n      if (!state) {\n        this.treeObj.selectedNodes = [];\n      } else {\n        var li = selectAll('li', this.treeObj.element);\n        var id = void 0;\n        var arr = [];\n\n        for (var i = 0; i < li.length; i++) {\n          id = li[i].getAttribute('data-uid').toString();\n          arr.push(id);\n        }\n\n        this.treeObj.selectedNodes = arr;\n      }\n    }\n\n    this.updateMode();\n    this.setMultiSelect();\n\n    if (!this.wrapText) {\n      if (state) {\n        this.updateView();\n      } else {\n        this.updateOverflowWrapper(true);\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateTreeSettings = function (prop) {\n    var value = Object.keys(prop.treeSettings)[0];\n\n    if (value === 'autoCheck') {\n      this.ensureAutoCheck();\n      this.treeObj.autoCheck = this.treeSettings.autoCheck;\n    } else if (value === 'loadOnDemand') {\n      this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n    } else if (value === 'expandOn') {\n      this.treeObj.expandOn = this.treeSettings.expandOn;\n      this.treeObj.dataBind();\n      return;\n    }\n\n    this.treeObj.dataBind();\n    this.setMultiSelect();\n    this.updateValue(this.value);\n  };\n\n  DropDownTree.prototype.updateCheckBoxState = function (checkBox) {\n    if (this.hasTemplate) {\n      this.updateTemplate();\n    }\n\n    if (!this.wrapText) {\n      this.updateOverflowWrapper(false);\n    }\n\n    this.treeObj.showCheckBox = checkBox;\n    this.treeObj.dataBind();\n    this.isDynamicChange = true;\n    this.setSelectAllWrapper(this.showSelectAll);\n\n    if (this.showSelectAll) {\n      this.setLocale();\n    }\n\n    if (this.showCheckBox) {\n      this.updateMode();\n    }\n\n    this.setMultiSelect();\n    this.isDynamicChange = false;\n  };\n\n  DropDownTree.prototype.updateTemplate = function () {\n    if (this.popupObj) {\n      this.clearTemplate();\n      /* eslint-disable */\n\n      this.portals = [];\n      /* eslint-enable */\n\n      this.popupObj.destroy();\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n        this.isFirstRender = true;\n        this.renderPopup();\n      } else {\n        this.isFirstRender = true;\n      }\n    }\n  };\n\n  DropDownTree.prototype.l10nUpdate = function (actionFailure) {\n    if (this.noRecord) {\n      this.noRecord.innerHTML = '';\n    } else {\n      this.noRecord = this.createElement('div');\n    }\n\n    if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n      var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n      var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n      var templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate'; // eslint-disable-next-line\n\n      var compiledString = this.templateComplier(template);\n      var tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n\n      if (tempArr) {\n        tempArr = Array.prototype.slice.call(tempArr);\n        append(tempArr, this.noRecord);\n        addClass([this.noRecord], NODATACONTAINER);\n        prepend([this.noRecord], this.popupDiv);\n      }\n    } else {\n      // eslint-disable-next-line\n      var l10nLocale = {\n        noRecordsTemplate: 'No Records Found',\n        actionFailureTemplate: 'The Request Failed'\n      };\n      this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n      this.noRecord.innerHTML = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n      addClass([this.noRecord], NODATACONTAINER);\n      prepend([this.noRecord], this.popupDiv);\n    }\n  };\n\n  DropDownTree.prototype.updateRecordTemplate = function (action) {\n    if (this.treeItems && this.treeItems.length <= 0) {\n      this.l10nUpdate(action);\n\n      if (this.hasTemplate) {\n        this.updateTemplate();\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateOverflowWrapper = function (state) {\n    if (!state) {\n      if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n        this.overFlowWrapper = this.createElement('span', {\n          className: OVERFLOW_VIEW + ' ' + HIDEICON\n        });\n        this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n      }\n    } else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n      this.overFlowWrapper.innerHTML = '';\n    }\n  };\n\n  DropDownTree.prototype.updateMultiSelection = function (state) {\n    if (!this.wrapText) {\n      this.updateOverflowWrapper(false);\n    }\n\n    this.treeObj.allowMultiSelection = state;\n    this.treeObj.dataBind();\n    this.updateOption();\n\n    if (this.allowMultiSelection) {\n      this.updateMode();\n    }\n\n    this.setMultiSelect();\n  };\n\n  DropDownTree.prototype.updateAllowFiltering = function (state) {\n    if (!this.isFirstRender) {\n      if (state) {\n        this.renderFilter();\n      } else {\n        this.destroyFilter();\n      }\n    }\n\n    this.ensureAutoCheck();\n  };\n\n  DropDownTree.prototype.updateFilterPlaceHolder = function () {\n    if (this.filterObj) {\n      this.filterObj.placeholder = this.filterBarPlaceholder;\n      this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n    }\n  };\n\n  DropDownTree.prototype.updateValue = function (value) {\n    this.isDynamicChange = true;\n\n    if (isNullOrUndefined(value) || value.length === 0) {\n      this.resetValue(true);\n    } else {\n      this.setTreeValue();\n\n      if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n        this.updateOverflowWrapper(false);\n        this.updateView();\n      }\n    }\n\n    this.updateHiddenValue();\n    this.isDynamicChange = false;\n  };\n\n  DropDownTree.prototype.updateText = function (text) {\n    if (isNullOrUndefined(text)) {\n      this.resetValue();\n    } else {\n      this.setTreeText();\n\n      if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n        this.updateOverflowWrapper(false);\n        this.updateView();\n      }\n    }\n\n    this.updateHiddenValue();\n  };\n\n  DropDownTree.prototype.updateModelMode = function () {\n    var validMode = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n\n    if (!validMode) {\n      return;\n    }\n\n    if (!this.wrapText) {\n      var overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n\n      if (overFlow) {\n        overFlow.innerHTML = '';\n      }\n    }\n\n    this.updateMode();\n    this.setMultiSelect();\n\n    if (!this.wrapText && this.value && this.value.length !== 0) {\n      this.updateOverFlowView();\n      addClass([this.inputEle], CHIP_INPUT);\n\n      if (this.mode === 'Box') {\n        removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n      } else {\n        addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n      }\n    }\n  };\n\n  DropDownTree.prototype.updateOption = function () {\n    if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n      this.hiddenElement.setAttribute('multiple', '');\n    } else if (this.hiddenElement.hasAttribute('multiple') && !this.allowMultiSelection && !this.showCheckBox) {\n      this.hiddenElement.removeAttribute('multiple');\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {DropDownTreeModel} newProp - specifies the newProp value.\n   * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n   * @returns {void}\n   * @private\n   */\n\n\n  DropDownTree.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'width':\n          this.setElementWidth(newProp.width);\n\n          if (this.popupObj) {\n            this.popupObj.element.style.width = this.setWidth();\n          }\n\n          break;\n\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this.inputEle);\n          break;\n\n        case 'cssClass':\n          this.setCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n\n        case 'enableRtl':\n          this.setEnableRTL(this.enableRtl);\n          break;\n\n        case 'fields':\n          this.setFields();\n          break;\n\n        case 'readonly':\n          Input.setReadonly(newProp.readonly, this.inputEle);\n          break;\n\n        case 'enabled':\n          this.setEnable();\n          break;\n\n        case 'floatLabelType':\n          Input.removeFloating(this.inputObj);\n          Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n          this.ensureClearIconPosition(newProp.floatLabelType);\n          break;\n\n        case 'showClearButton':\n          this.updateClearButton(newProp.showClearButton);\n          break;\n\n        case 'allowFiltering':\n          this.updateAllowFiltering(newProp.allowFiltering);\n          break;\n\n        case 'filterBarPlaceholder':\n          this.updateFilterPlaceHolder();\n          break;\n\n        case 'value':\n          this.oldValue = oldProp.value;\n          this.updateValue(newProp.value);\n          break;\n\n        case 'text':\n          this.updateText(newProp.text);\n          break;\n\n        case 'allowMultiSelection':\n          this.updateMultiSelection(newProp.allowMultiSelection);\n          break;\n\n        case 'mode':\n          if (!this.showCheckBox && !this.allowMultiSelection) {\n            return;\n          }\n\n          if (this.mode === 'Custom') {\n            if (this.overFlowWrapper) {\n              detach(this.overFlowWrapper);\n            }\n\n            if (this.chipWrapper) {\n              detach(this.chipWrapper);\n            }\n\n            this.setTagValues();\n          } else {\n            if (oldProp.mode === 'Custom') {\n              this.updateOverflowWrapper(this.wrapText);\n            }\n\n            this.updateModelMode();\n          }\n\n          break;\n\n        case 'delimiterChar':\n          if (this.mode === 'Box') {\n            return;\n          }\n\n          if (this.showCheckBox || this.allowMultiSelection) {\n            this.setMultiSelect();\n          }\n\n          break;\n\n        case 'selectAllText':\n          if (this.showCheckBox && this.showSelectAll) {\n            this.setLocale();\n          }\n\n          break;\n\n        case 'unSelectAllText':\n          if (this.showCheckBox && this.showSelectAll) {\n            this.setLocale(false);\n          }\n\n          break;\n\n        case 'showSelectAll':\n          if (this.showCheckBox) {\n            this.setSelectAllWrapper(newProp.showSelectAll);\n            this.updatePopupHeight();\n          }\n\n          break;\n\n        case 'showCheckBox':\n          this.updateCheckBoxState(newProp.showCheckBox);\n\n          if (!this.wrapText) {\n            this.updateOverflowWrapper(true);\n          }\n\n          this.updatePopupHeight();\n          this.updateOption();\n          break;\n\n        case 'treeSettings':\n          this.updateTreeSettings(newProp);\n          break;\n\n        case 'customTemplate':\n          if (this.mode !== \"Custom\") {\n            return;\n          }\n\n          this.chipCollection.innerHTML = \"\";\n          this.setTagValues();\n          break;\n\n        case 'sortOrder':\n          if (this.hasTemplate) {\n            this.updateTemplate();\n          }\n\n          this.treeObj.sortOrder = newProp.sortOrder;\n          this.treeObj.dataBind();\n          this.updateValue(this.value);\n          break;\n\n        case 'showDropDownIcon':\n          this.updateDropDownIconState(newProp.showDropDownIcon);\n          break;\n\n        case 'popupWidth':\n          if (this.popupObj) {\n            this.popupObj.element.style.width = this.setWidth();\n          }\n\n          break;\n\n        case 'popupHeight':\n          if (this.popupObj) {\n            this.updatePopupHeight();\n          }\n\n          break;\n\n        case 'zIndex':\n          if (this.popupObj) {\n            this.popupObj.zIndex = newProp.zIndex;\n            this.popupObj.dataBind();\n          }\n\n          break;\n\n        case 'headerTemplate':\n          this.updateTemplate();\n          break;\n\n        case 'footerTemplate':\n          this.updateTemplate();\n          break;\n\n        case 'itemTemplate':\n          this.updateTemplate();\n          this.treeObj.nodeTemplate = newProp.itemTemplate;\n          this.treeObj.dataBind();\n          break;\n\n        case 'noRecordsTemplate':\n          this.updateRecordTemplate();\n          break;\n\n        case 'actionFailureTemplate':\n          this.updateRecordTemplate(true);\n          break;\n\n        case 'htmlAttributes':\n          this.setHTMLAttributes();\n          break;\n\n        case 'wrapText':\n          this.updateOverflowWrapper(this.wrapText);\n\n          if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n            this.updateView();\n          } else {\n            addClass([this.overFlowWrapper], HIDEICON);\n\n            if (this.chipWrapper && this.mode === 'Box') {\n              removeClass([this.chipWrapper], HIDEICON);\n            } else {\n              removeClass([this.inputWrapper], SHOW_CHIP);\n              removeClass([this.inputEle], CHIP_INPUT);\n            }\n\n            this.ensurePlaceHolder();\n          }\n\n          break;\n      }\n    }\n  };\n  /**\n   * Allows you to clear the selected values from the Dropdown Tree component.\n   *\n   * @method clear\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.clear = function () {\n    this.clearAll();\n\n    if (this.inputFocus) {\n      this.onFocusOut();\n    } else {\n      if (this.changeOnBlur) {\n        this.triggerChangeEvent();\n      }\n\n      this.removeValue = false;\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.destroy = function () {\n    this.clearTemplate();\n    this.unWireEvents();\n    this.setCssClass(null, this.cssClass);\n    this.setProperties({\n      value: []\n    }, true);\n    this.setProperties({\n      text: null\n    }, true);\n    this.treeObj.destroy();\n    this.destroyFilter();\n\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      detach(this.popupObj.element);\n    }\n\n    if (this.element.tagName !== this.getDirective()) {\n      this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n    }\n\n    Input.setValue(null, this.inputEle, this.floatLabelType);\n    detach(this.inputWrapper);\n    detach(this.popupDiv);\n    this.element.classList.remove('e-input');\n\n    if (this.showCheckBox || this.allowMultiSelection) {\n      this.element.classList.remove(CHIP_INPUT);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  DropDownTree.prototype.destroyFilter = function () {\n    if (this.filterObj) {\n      this.filterObj.destroy();\n      detach(this.filterObj.element);\n      detach(this.filterContainer);\n      this.filterObj = null;\n    }\n  };\n  /**\n   * Ensures visibility of the Dropdown Tree item by using item value or item element.\n   * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n   * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n   *\n   * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.ensureVisible = function (item) {\n    this.treeObj.ensureVisible(item);\n  };\n  /**\n   * To get the updated data source of the Dropdown Tree.\n   *\n   * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n   * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n   */\n  // eslint-disable-next-line\n\n\n  DropDownTree.prototype.getData = function (item) {\n    return this.treeObj.getTreeData(item);\n  };\n  /**\n   * Close the Dropdown tree pop-up.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.hidePopup = function () {\n    var eventArgs = {\n      popup: this.popupObj\n    };\n    this.inputWrapper.classList.remove(ICONANIMATION);\n\n    if (this.popupEle) {\n      addClass([this.popupEle], DDTHIDEICON);\n    }\n\n    attributes(this.inputWrapper, {\n      'aria-expanded': 'false'\n    });\n\n    if (this.popupObj && this.isPopupOpen) {\n      this.popupObj.hide();\n\n      if (this.inputFocus) {\n        this.inputWrapper.focus();\n\n        if (this.allowFiltering) {\n          addClass([this.inputWrapper], [INPUTFOCUS]);\n        }\n      }\n\n      this.trigger('close', eventArgs);\n    }\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected or deselected.\n   *\n   * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n   * @returns {void}\n   *\n   */\n\n\n  DropDownTree.prototype.selectAll = function (state) {\n    this.selectAllItems(state);\n  };\n  /**\n   * Opens the popup that displays the Dropdown Tree items.\n   *\n   * @returns {void}\n   */\n\n\n  DropDownTree.prototype.showPopup = function () {\n    if (!this.enabled || this.readonly || this.isPopupOpen) {\n      return;\n    }\n\n    this.renderPopup();\n    this.focusIn();\n  };\n  /**\n   * Return the module name.\n   *\n   * @private\n   * @returns {string} - returns the module name.\n   */\n\n\n  DropDownTree.prototype.getModuleName = function () {\n    return 'dropdowntree';\n  };\n\n  __decorate$2([Property('The Request Failed')], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"allowFiltering\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"changeOnBlur\", void 0);\n\n  __decorate$2([Property('')], DropDownTree.prototype, \"cssClass\", void 0);\n\n  __decorate$2([Property(\"${value.length} item(s) selected\")], DropDownTree.prototype, \"customTemplate\", void 0);\n\n  __decorate$2([Property(',')], DropDownTree.prototype, \"delimiterChar\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"enabled\", void 0);\n\n  __decorate$2([Complex({}, Fields)], DropDownTree.prototype, \"fields\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$2([Property('StartsWith')], DropDownTree.prototype, \"filterType\", void 0);\n\n  __decorate$2([Property('Never')], DropDownTree.prototype, \"floatLabelType\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"footerTemplate\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"ignoreAccent\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"ignoreCase\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"headerTemplate\", void 0);\n\n  __decorate$2([Property({})], DropDownTree.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"itemTemplate\", void 0);\n\n  __decorate$2([Property('Default')], DropDownTree.prototype, \"mode\", void 0);\n\n  __decorate$2([Property('No Records Found')], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"placeholder\", void 0);\n\n  __decorate$2([Property('300px')], DropDownTree.prototype, \"popupHeight\", void 0);\n\n  __decorate$2([Property('100%')], DropDownTree.prototype, \"popupWidth\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"readonly\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"showSelectAll\", void 0);\n\n  __decorate$2([Property('Select All')], DropDownTree.prototype, \"selectAllText\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"showCheckBox\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"showClearButton\", void 0);\n\n  __decorate$2([Property(true)], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n\n  __decorate$2([Property('None')], DropDownTree.prototype, \"sortOrder\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"text\", void 0);\n\n  __decorate$2([Complex({}, TreeSettings)], DropDownTree.prototype, \"treeSettings\", void 0);\n\n  __decorate$2([Property('Unselect All')], DropDownTree.prototype, \"unSelectAllText\", void 0);\n\n  __decorate$2([Property(null)], DropDownTree.prototype, \"value\", void 0);\n\n  __decorate$2([Property('100%')], DropDownTree.prototype, \"width\", void 0);\n\n  __decorate$2([Property(1000)], DropDownTree.prototype, \"zIndex\", void 0);\n\n  __decorate$2([Property(false)], DropDownTree.prototype, \"wrapText\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"actionFailure\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"beforeOpen\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"change\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"close\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"blur\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"created\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"dataBound\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"destroyed\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"filtering\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"focus\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"keyPress\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"open\", void 0);\n\n  __decorate$2([Event()], DropDownTree.prototype, \"select\", void 0);\n\n  DropDownTree = __decorate$2([NotifyPropertyChanges], DropDownTree);\n  return DropDownTree;\n}(Component);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$3 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\n\n\nvar SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nvar inputObject$1 = {\n  container: null,\n  buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\n\nvar ComboBox =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$3(ComboBox, _super);\n  /**\n   * *Constructor for creating the component\n   *\n   * @param {ComboBoxModel} options - Specifies the ComboBox model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function ComboBox(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.preRender = function () {\n    _super.prototype.preRender.call(this);\n  };\n\n  ComboBox.prototype.getLocaleName = function () {\n    return 'combo-box';\n  };\n\n  ComboBox.prototype.wireEvent = function () {\n    if (this.getModuleName() === 'combobox') {\n      EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n      EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n    }\n\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n      EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n    }\n\n    EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n\n    if (!this.readonly) {\n      EventHandler.add(this.inputElement, 'input', this.onInput, this);\n      EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n    }\n\n    this.bindCommonEvent();\n  };\n\n  ComboBox.prototype.preventBlur = function (e) {\n    if (!this.allowFiltering && document.activeElement !== this.inputElement && !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice) {\n      e.preventDefault();\n    }\n  };\n\n  ComboBox.prototype.onBlurHandler = function (e) {\n    var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n\n    if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n      this.customValue(e);\n    }\n\n    _super.prototype.onBlurHandler.call(this, e);\n  };\n\n  ComboBox.prototype.targetElement = function () {\n    return this.inputElement;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ComboBox.prototype.setOldText = function (text) {\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    this.customValue();\n    this.removeSelection();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ComboBox.prototype.setOldValue = function (value) {\n    if (this.allowCustom) {\n      this.valueMuteChange(this.value);\n    } else {\n      this.valueMuteChange(null);\n    }\n\n    this.removeSelection();\n    this.setHiddenValue();\n  };\n\n  ComboBox.prototype.valueMuteChange = function (value) {\n    var inputValue = isNullOrUndefined(value) ? null : value.toString();\n    Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n    this.setProperties({\n      value: value,\n      text: value,\n      index: null\n    }, true);\n    this.activeIndex = this.index;\n    var fields = this.fields;\n    var dataItem = {};\n    dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n    dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n    this.itemData = dataItem;\n    this.item = null;\n\n    if (this.previousValue !== this.value) {\n      this.detachChangeEvent(null);\n    }\n  };\n\n  ComboBox.prototype.updateValues = function () {\n    if (!isNullOrUndefined(this.value)) {\n      var li = this.getElementByValue(this.value);\n\n      if (li) {\n        this.setSelection(li, null);\n      } else if (this.allowCustom) {\n        this.valueMuteChange(this.value);\n      } else {\n        this.valueMuteChange(null);\n      }\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var li = this.getElementByText(this.text);\n\n      if (li) {\n        this.setSelection(li, null);\n      } else {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.customValue();\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n\n  ComboBox.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n\n  ComboBox.prototype.getAriaAttributes = function () {\n    var ariaAttributes = {\n      'role': 'combobox',\n      'aria-autocomplete': 'both',\n      'aria-labelledby': this.hiddenElement.id,\n      'aria-expanded': 'false',\n      'aria-readonly': this.readonly.toString(),\n      'autocomplete': 'off',\n      'autocapitalize': 'off',\n      'spellcheck': 'false'\n    };\n    return ariaAttributes;\n  };\n\n  ComboBox.prototype.searchLists = function (e) {\n    this.isTyped = true;\n\n    if (this.isFiltering()) {\n      _super.prototype.searchLists.call(this, e);\n\n      if (this.ulElement && this.filterInput.value.trim() === '') {\n        this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n      }\n    } else {\n      if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n        this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n      }\n\n      this.incrementalSearch(e);\n    }\n  };\n\n  ComboBox.prototype.getNgDirective = function () {\n    return 'EJS-COMBOBOX';\n  };\n\n  ComboBox.prototype.setSearchBox = function () {\n    this.filterInput = this.inputElement;\n    return this.isFiltering() ? this.inputWrapper : inputObject$1;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ComboBox.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    if (this.isSelectCustom) {\n      this.removeSelection();\n    }\n\n    if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped) {\n      setTimeout(function () {\n        _this.inlineSearch();\n      });\n    }\n  };\n\n  ComboBox.prototype.getFocusElement = function () {\n    var dataItem = this.isSelectCustom ? {\n      text: ''\n    } : this.getItemData();\n    var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : this.list;\n    var isSelected = dataItem.text === this.inputElement.value && !isNullOrUndefined(selected);\n\n    if (isSelected) {\n      return selected;\n    }\n\n    if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n      var inputValue = this.inputElement.value;\n      var dataSource = this.sortedData;\n      var type = this.typeOfData(dataSource).typeof;\n      var activeItem = Search(inputValue, this.liCollections, this.filterType, true, dataSource, this.fields, type);\n      var activeElement = activeItem.item;\n\n      if (!isNullOrUndefined(activeElement)) {\n        var count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n        var height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n\n        if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n          this.removeFocus();\n          var fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n          this.list.scrollTop = count * height + fixedHead;\n          addClass([activeElement], dropDownListClasses.focus);\n        }\n      } else {\n        if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n          this.removeFocus();\n          this.list.scrollTop = 0;\n        }\n      }\n\n      return activeElement;\n    } else {\n      return null;\n    }\n  };\n\n  ComboBox.prototype.setValue = function (e) {\n    if (e && e.type === 'keydown' && e.action === 'enter') {\n      this.removeFillSelection();\n    }\n\n    if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n      this.preventAutoFill = false;\n      this.inlineSearch(e);\n      return false;\n    } else {\n      return _super.prototype.setValue.call(this, e);\n    }\n  };\n\n  ComboBox.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n\n    if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n      this.setProperties({\n        'value': dataItem.value\n      }, !this.allowCustom);\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = this.getModuleName() === 'autocomplete' ? this.inputWrapper.buttons[0] || this.inputWrapper.clearButton || Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement) : this.inputWrapper.buttons[0] || this.inputWrapper.clearButton;\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n\n      if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n        detach(this.spinnerElement);\n      } else {\n        this.spinnerElement.innerHTML = '';\n      }\n\n      this.spinnerElement = null;\n    }\n  };\n\n  ComboBox.prototype.setAutoFill = function (activeElement, isHover) {\n    if (!isHover) {\n      this.setHoverList(activeElement);\n    }\n\n    if (this.autofill && !this.preventAutoFill) {\n      var currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n      var currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n\n      if (this.getModuleName() === 'combobox') {\n        if (!this.isSelected && this.previousValue !== currentFillValue) {\n          this.updateSelectedItem(activeElement, null);\n          this.isSelected = true;\n          this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n        } else {\n          this.updateSelectedItem(activeElement, null, true);\n        }\n      }\n\n      if (!this.isAndroidAutoFill(currentValue)) {\n        this.setAutoFillSelection(currentValue, isHover);\n      }\n    }\n  };\n\n  ComboBox.prototype.isAndroidAutoFill = function (value) {\n    if (Browser.isAndroid) {\n      var currentPoints = this.getSelectionPoints();\n      var prevEnd = this.prevSelectPoints.end;\n      var curEnd = currentPoints.end;\n      var prevStart = this.prevSelectPoints.start;\n      var curStart = currentPoints.start;\n\n      if (prevEnd !== 0 && (prevEnd === value.length && prevStart === value.length || prevStart > curStart && prevEnd > curEnd || prevEnd === curEnd && prevStart === curStart)) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n\n  ComboBox.prototype.clearAll = function (e, property) {\n    if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n      _super.prototype.clearAll.call(this, e);\n    }\n\n    if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n      this.searchLists(e);\n    }\n  };\n\n  ComboBox.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  ComboBox.prototype.inlineSearch = function (e) {\n    var isKeyNavigate = e && (e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown');\n    var activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n\n    if (!isNullOrUndefined(activeElement)) {\n      if (!isKeyNavigate) {\n        var value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n        this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n      }\n\n      this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n      this.setAutoFill(activeElement, isKeyNavigate);\n    } else if (this.inputElement.value === '') {\n      this.activeIndex = null;\n\n      if (!isNullOrUndefined(this.list)) {\n        this.list.scrollTop = 0;\n        var focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n        this.setHoverList(focusItem);\n      }\n    } else {\n      this.activeIndex = null;\n      this.removeSelection();\n\n      if (this.liCollections && this.liCollections.length > 0 && !this.isCustomFilter) {\n        this.removeFocus();\n      }\n    }\n  };\n\n  ComboBox.prototype.incrementalSearch = function (e) {\n    this.showPopup(e);\n\n    if (!isNullOrUndefined(this.listData)) {\n      this.inlineSearch(e);\n      e.preventDefault();\n    }\n  };\n\n  ComboBox.prototype.setAutoFillSelection = function (currentValue, isKeyNavigate) {\n    if (isKeyNavigate === void 0) {\n      isKeyNavigate = false;\n    }\n\n    var selection = this.getSelectionPoints();\n    var value = this.inputElement.value.substr(0, selection.start);\n\n    if (value && value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase()) {\n      var inputValue = value + currentValue.substr(value.length, currentValue.length);\n      Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n    } else if (isKeyNavigate) {\n      Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n    }\n  };\n\n  ComboBox.prototype.getValueByText = function (text) {\n    return _super.prototype.getValueByText.call(this, text, true, this.ignoreAccent);\n  };\n\n  ComboBox.prototype.unWireEvent = function () {\n    if (this.getModuleName() === 'combobox') {\n      EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n      EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n    }\n\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n      EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n    }\n\n    if (this.inputElement) {\n      EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n\n      if (!this.readonly) {\n        EventHandler.remove(this.inputElement, 'input', this.onInput);\n        EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n        EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n        EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n      }\n    }\n\n    this.unBindCommonEvent();\n  };\n\n  ComboBox.prototype.setSelection = function (li, e) {\n    _super.prototype.setSelection.call(this, li, e);\n\n    if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n      this.removeFocus();\n    }\n  };\n\n  ComboBox.prototype.selectCurrentItem = function (e) {\n    var li;\n\n    if (this.isPopupOpen) {\n      if (this.isSelected) {\n        li = this.list.querySelector('.' + dropDownListClasses.selected);\n      } else {\n        li = this.list.querySelector('.' + dropDownListClasses.focus);\n      }\n\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n    }\n\n    if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n      this.clearAll(e);\n    } else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n      this.customValue(e);\n    }\n\n    this.hidePopup(e);\n  };\n\n  ComboBox.prototype.setHoverList = function (li) {\n    this.removeSelection();\n\n    if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n      this.removeFocus();\n      li.classList.add(dropDownListClasses.focus);\n    }\n  };\n\n  ComboBox.prototype.targetFocus = function (e) {\n    if (Browser.isDevice && !this.allowFiltering) {\n      this.preventFocus = false;\n    }\n\n    this.onFocus(e);\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n  };\n\n  ComboBox.prototype.dropDownClick = function (e) {\n    e.preventDefault();\n\n    if (Browser.isDevice && !this.isFiltering()) {\n      this.preventFocus = true;\n    }\n\n    _super.prototype.dropDownClick.call(this, e);\n  };\n\n  ComboBox.prototype.customValue = function (e) {\n    var _this = this;\n\n    var value = this.getValueByText(this.inputElement.value);\n\n    if (!this.allowCustom && this.inputElement.value !== '') {\n      var previousValue = this.previousValue;\n      var currentValue = this.value;\n      this.setProperties({\n        value: value\n      });\n\n      if (isNullOrUndefined(this.value)) {\n        Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n\n      if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n        this.onChangeEvent(null);\n      }\n    } else if (this.inputElement.value.trim() !== '') {\n      var previousValue_1 = this.value;\n\n      if (isNullOrUndefined(value)) {\n        var value_1 = this.inputElement.value === '' ? null : this.inputElement.value; // eslint-disable-next-line max-len\n\n        var eventArgs = {\n          text: value_1,\n          item: {}\n        };\n\n        if (!this.initial) {\n          this.trigger('customValueSpecifier', eventArgs, function (eventArgs) {\n            _this.updateCustomValueCallback(value_1, eventArgs, previousValue_1, e);\n          });\n        } else {\n          this.updateCustomValueCallback(value_1, eventArgs, previousValue_1);\n        }\n      } else {\n        this.isSelectCustom = false;\n        this.setProperties({\n          value: value\n        });\n\n        if (previousValue_1 !== this.value) {\n          this.onChangeEvent(e);\n        }\n      }\n    } else if (this.allowCustom) {\n      this.isSelectCustom = true;\n    }\n  };\n\n  ComboBox.prototype.updateCustomValueCallback = function (value, eventArgs, previousValue, e) {\n    var fields = this.fields;\n    var item = eventArgs.item;\n    var dataItem = {};\n\n    if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n      dataItem = item;\n    } else {\n      setValue(fields.text, value, dataItem);\n      setValue(fields.value, value, dataItem);\n    }\n\n    this.itemData = dataItem;\n    var changeData = {\n      text: getValue(fields.text, this.itemData),\n      value: getValue(fields.value, this.itemData),\n      index: null\n    };\n    this.setProperties(changeData, true);\n    this.setSelection(null, null);\n    this.isSelectCustom = true;\n\n    if (previousValue !== this.value) {\n      this.onChangeEvent(e);\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n   * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'combobox') {\n      this.checkData(newProp);\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'readonly':\n          Input.setReadonly(this.readonly, this.inputElement);\n\n          if (this.readonly) {\n            EventHandler.remove(this.inputElement, 'input', this.onInput);\n            EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n            EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n          } else {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n            EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n          }\n\n          this.setReadOnly();\n          break;\n\n        case 'allowFiltering':\n          this.setSearchBox();\n\n          if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this);\n          }\n\n          break;\n\n        case 'allowCustom':\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var comboProps = this.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this, comboProps.newProperty, comboProps.oldProperty);\n\n            if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate && this.getModuleName() === 'combobox') {\n              _super.prototype.renderList.call(this);\n            }\n\n            break;\n          }\n      }\n    }\n  };\n  /**\n   * To initialize the control rendering.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.render = function () {\n    _super.prototype.render.call(this);\n\n    this.setSearchBox();\n\n    if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n      _super.prototype.renderList.call(this);\n    }\n\n    this.renderComplete();\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  ComboBox.prototype.getModuleName = function () {\n    return 'combobox';\n  };\n  /**\n   * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.filter = function (dataSource, query, fields) {\n    _super.prototype.filter.call(this, dataSource, query, fields);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.showPopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    _super.prototype.showPopup.call(this, e);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in open state.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.hidePopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n\n    if (!isNullOrUndefined(this.listData)) {\n      var isEscape = this.isEscapeKey;\n\n      if (this.isEscapeKey) {\n        Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.isEscapeKey = false;\n      }\n\n      if (this.autofill) {\n        this.removeFillSelection();\n      }\n\n      var dataItem = this.isSelectCustom ? {\n        text: ''\n      } : this.getItemData();\n      var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : null;\n\n      if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n        if (this.isSelected) {\n          this.onChangeEvent(e);\n          this.isSelectCustom = false;\n        }\n\n        _super.prototype.hidePopup.call(this, e);\n\n        return;\n      }\n\n      if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n        var dataSource = this.sortedData;\n        var type = this.typeOfData(dataSource).typeof;\n        var searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true, dataSource, this.fields, type);\n        this.selectedLI = searchItem.item;\n\n        if (isNullOrUndefined(searchItem.index)) {\n          searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true, dataSource, this.fields, type).index;\n        }\n\n        this.activeIndex = searchItem.index;\n\n        if (!isNullOrUndefined(this.selectedLI)) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n        } else if (isEscape) {\n          this.isSelectCustom = true;\n          this.removeSelection();\n        }\n      }\n\n      if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n        this.customValue(e);\n      }\n    }\n\n    if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n      this.customValue();\n    }\n\n    _super.prototype.hidePopup.call(this, e);\n  };\n  /**\n   * Sets the focus to the component for interaction.\n   *\n   * @returns {void}\n   */\n\n\n  ComboBox.prototype.focusIn = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (Browser.isDevice && !this.isFiltering()) {\n      this.preventFocus = true;\n    }\n\n    _super.prototype.focusIn.call(this);\n  };\n  /**\n   * Allows you to clear the selected values from the component.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.clear = function () {\n    this.value = null;\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Moves the focus from the component if the component is already focused.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.focusOut = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    _super.prototype.focusOut.call(this, e);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.getItems = function () {\n    return _super.prototype.getItems.call(this);\n  };\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   * @deprecated\n   */\n\n\n  ComboBox.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n\n  ComboBox.prototype.renderHightSearch = function () {// update high light search\n  };\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"autofill\", void 0);\n\n  __decorate$3([Property(true)], ComboBox.prototype, \"allowCustom\", void 0);\n\n  __decorate$3([Property({})], ComboBox.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"allowFiltering\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"query\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"index\", void 0);\n\n  __decorate$3([Property(true)], ComboBox.prototype, \"showClearButton\", void 0);\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"enableRtl\", void 0);\n\n  __decorate$3([Event()], ComboBox.prototype, \"customValueSpecifier\", void 0);\n\n  __decorate$3([Event()], ComboBox.prototype, \"filtering\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"valueTemplate\", void 0);\n\n  __decorate$3([Property('Never')], ComboBox.prototype, \"floatLabelType\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"cssClass\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"headerTemplate\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"footerTemplate\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"placeholder\", void 0);\n\n  __decorate$3([Property('100%')], ComboBox.prototype, \"width\", void 0);\n\n  __decorate$3([Property('300px')], ComboBox.prototype, \"popupHeight\", void 0);\n\n  __decorate$3([Property('100%')], ComboBox.prototype, \"popupWidth\", void 0);\n\n  __decorate$3([Property(false)], ComboBox.prototype, \"readonly\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"text\", void 0);\n\n  __decorate$3([Property(null)], ComboBox.prototype, \"value\", void 0);\n\n  ComboBox = __decorate$3([NotifyPropertyChanges], ComboBox);\n  return ComboBox;\n}(DropDownList);\n/**\n * export all modules from current location\n */\n\n\nvar __extends$4 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\n\n\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\n\nvar AutoComplete =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$4(AutoComplete, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function AutoComplete(options, element) {\n    var _this_1 = _super.call(this, options, element) || this;\n\n    _this_1.isFiltered = false;\n    _this_1.searchList = false;\n    return _this_1;\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.preRender = function () {\n    _super.prototype.preRender.call(this);\n  };\n\n  AutoComplete.prototype.getLocaleName = function () {\n    return 'auto-complete';\n  };\n\n  AutoComplete.prototype.getNgDirective = function () {\n    return 'EJS-AUTOCOMPLETE';\n  };\n\n  AutoComplete.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.value) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.value) ? this.value : this.queryString;\n\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n\n    if (!isNullOrUndefined(this.suggestionCount)) {\n      // Since defualt value of suggestioncount is 20, checked the condition\n      if (this.suggestionCount !== 20) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n\n      filterQuery.take(this.suggestionCount);\n    }\n\n    return filterQuery;\n  };\n\n  AutoComplete.prototype.searchLists = function (e) {\n    var _this_1 = this;\n\n    this.isTyped = true;\n    this.isDataFetched = this.isSelectCustom = false;\n\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.renderList.call(this, e, true);\n    }\n\n    this.queryString = this.filterInput.value;\n\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields, null, e);\n      return;\n    }\n\n    this.isSelected = false;\n    this.activeIndex = null;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.filterInput.value,\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n\n        _this_1.isFiltered = true;\n\n        _this_1.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this_1.isFiltered && !eventArgs.preventDefaultAction) {\n        _this_1.searchList = true;\n\n        _this_1.filterAction(_this_1.dataSource, null, _this_1.fields, e);\n      }\n    });\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  AutoComplete.prototype.filter = function (dataSource, query, fields) {\n    this.isFiltered = true;\n    this.filterAction(dataSource, query, fields);\n  };\n\n  AutoComplete.prototype.filterAction = function (dataSource, query, fields, e) {\n    this.beforePopupOpen = true;\n\n    if (this.queryString !== '' && this.queryString.length >= this.minLength) {\n      this.resetList(dataSource, fields, query, e);\n    } else {\n      this.hidePopup(e);\n      this.beforePopupOpen = false;\n    }\n\n    this.renderReactTemplates();\n  };\n\n  AutoComplete.prototype.clearAll = function (e, property) {\n    if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n      _super.prototype.clearAll.call(this, e);\n    }\n\n    if (this.beforePopupOpen) {\n      this.hidePopup();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  AutoComplete.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    this.fixedHeaderElement = null;\n\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    var item = this.list.querySelector('.' + dropDownListClasses.li);\n\n    if (!isNullOrUndefined(item)) {\n      removeClass([item], dropDownListClasses.focus);\n    }\n\n    this.postBackAction();\n  };\n\n  AutoComplete.prototype.postBackAction = function () {\n    if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n      var items = [this.liCollections[0]];\n      var dataSource = this.listData;\n      var type = this.typeOfData(dataSource).typeof;\n      var searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase, dataSource, this.fields, type);\n      this.searchList = false;\n\n      if (!isNullOrUndefined(searchItem.item)) {\n        _super.prototype.setAutoFill.call(this, this.liCollections[0], true);\n      }\n    }\n  };\n\n  AutoComplete.prototype.setSelection = function (li, e) {\n    if (!this.isValidLI(li)) {\n      this.selectedLI = li;\n      return;\n    }\n\n    if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter' && e.action !== 'tab' && this.isValidLI(li)) {\n      var value = this.getFormattedValue(li.getAttribute('data-value'));\n      this.activeIndex = this.getIndexByValue(value);\n      this.setHoverList(li);\n      this.selectedLI = li;\n      this.setScrollPosition(e);\n\n      if (this.autofill && this.isPopupOpen) {\n        this.preventAutoFill = false;\n        var isKeyNavigate = e && e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown';\n\n        _super.prototype.setAutoFill.call(this, li, isKeyNavigate);\n      }\n    } else {\n      _super.prototype.setSelection.call(this, li, e);\n    }\n  };\n\n  AutoComplete.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this_1 = this;\n\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this_1.highlight) {\n          if (_this_1.element.tagName === _this_1.getNgDirective() && _this_1.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n            }, 0);\n          } else {\n            highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n\n      fields.itemCreated = function (e) {\n        if (_this_1.highlight) {\n          highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n        }\n\n        itemCreated_1.apply(_this_1, [e]);\n      };\n    }\n\n    return fields;\n  };\n\n  AutoComplete.prototype.isFiltering = function () {\n    return true;\n  };\n\n  AutoComplete.prototype.renderPopup = function (e) {\n    this.list.scrollTop = 0;\n\n    _super.prototype.renderPopup.call(this, e);\n  };\n\n  AutoComplete.prototype.isEditTextBox = function () {\n    return true && this.inputElement.value.trim() !== '';\n  };\n\n  AutoComplete.prototype.isPopupButton = function () {\n    return this.showPopupButton;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  AutoComplete.prototype.isSelectFocusItem = function (element) {\n    return false;\n  };\n\n  AutoComplete.prototype.setInputValue = function (newProp, oldProp) {\n    var oldValue = oldProp && oldProp.text ? oldProp.text : oldProp ? oldProp.value : oldProp;\n    var value = newProp && newProp.text ? newProp.text : newProp && newProp.value ? newProp.value : this.value;\n\n    if (value && this.typedString === '' && !this.allowCustom && !(this.dataSource instanceof DataManager)) {\n      var checkFields_1_1 = this.typeOfData(this.dataSource).typeof === 'string' ? '' : this.fields.value;\n      var listLength_1 = this.getItems().length;\n      var query = new Query();\n\n      var _this_2 = this;\n\n      new DataManager(this.dataSource).executeQuery(query.where(new Predicate(checkFields_1_1, 'equal', value))).then(function (e) {\n        if (e.result.length > 0) {\n          _this_2.value = checkFields_1_1 !== '' ? e.result[0][_this_2.fields.value].toString() : e.result[0].toString();\n\n          _this_2.addItem(e.result, listLength_1);\n\n          _this_2.updateValues();\n        } else {\n          newProp && newProp.text ? _this_2.setOldText(oldValue) : newProp && newProp.value ? _this_2.setOldValue(oldValue) : _this_2.updateValues();\n        }\n      });\n    } else if (newProp) {\n      newProp.text ? this.setOldText(oldValue) : this.setOldValue(oldValue);\n    }\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n\n\n  AutoComplete.prototype.showPopup = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n\n    this.beforePopupOpen = true;\n    this.preventAutoFill = true;\n\n    if (isNullOrUndefined(this.list)) {\n      this.renderList(e);\n    } else {\n      this.resetList(this.dataSource, this.fields, null, e);\n    }\n  };\n  /**\n   * Hides the popup if it is in open state.\n   *\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.hidePopup = function (e) {\n    _super.prototype.hidePopup.call(this, e);\n\n    this.activeIndex = -1;\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n   * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'showPopupButton':\n          if (this.showPopupButton) {\n            var button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n            this.inputWrapper.buttons[0] = button;\n            Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n\n            if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0]) && this.floatLabelType !== 'Never') {\n              this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n            }\n\n            if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n              EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n            }\n          } else {\n            detach(this.inputWrapper.buttons[0]);\n            this.inputWrapper.buttons[0] = null;\n          }\n\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var atcProps = this.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this, atcProps.newProperty, atcProps.oldProperty);\n\n            break;\n          }\n      }\n    }\n  };\n\n  AutoComplete.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  AutoComplete.prototype.getModuleName = function () {\n    return 'autocomplete';\n  };\n  /**\n   * To initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  AutoComplete.prototype.render = function () {\n    _super.prototype.render.call(this);\n  };\n\n  __decorate$4([Complex({\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], AutoComplete.prototype, \"fields\", void 0);\n\n  __decorate$4([Property(true)], AutoComplete.prototype, \"ignoreCase\", void 0);\n\n  __decorate$4([Property(false)], AutoComplete.prototype, \"showPopupButton\", void 0);\n\n  __decorate$4([Property(false)], AutoComplete.prototype, \"highlight\", void 0);\n\n  __decorate$4([Property(20)], AutoComplete.prototype, \"suggestionCount\", void 0);\n\n  __decorate$4([Property({})], AutoComplete.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"query\", void 0);\n\n  __decorate$4([Property(1)], AutoComplete.prototype, \"minLength\", void 0);\n\n  __decorate$4([Property('Contains')], AutoComplete.prototype, \"filterType\", void 0);\n\n  __decorate$4([Event()], AutoComplete.prototype, \"filtering\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"index\", void 0);\n\n  __decorate$4([Property('Never')], AutoComplete.prototype, \"floatLabelType\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"valueTemplate\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$4([Property(false)], AutoComplete.prototype, \"allowFiltering\", void 0);\n\n  __decorate$4([Property(null)], AutoComplete.prototype, \"text\", void 0);\n\n  AutoComplete = __decorate$4([NotifyPropertyChanges], AutoComplete);\n  return AutoComplete;\n}(ComboBox);\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\n\n\nvar FLOATLINE = 'e-float-line';\nvar FLOATTEXT = 'e-float-text';\nvar LABELTOP = 'e-label-top';\nvar LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n  var floatLinelement = createElement('span', {\n    className: FLOATLINE\n  });\n  var floatLabelElement = createElement('label', {\n    className: FLOATTEXT\n  });\n  var id = element.getAttribute('id') ? element.getAttribute('id') : getUniqueID('ej2_multiselect');\n  element.id = id;\n\n  if (!isNullOrUndefined(element.id) && element.id !== '') {\n    floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n    attributes(inputElement, {\n      'aria-labelledby': floatLabelElement.id\n    });\n  }\n\n  if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n    floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n    inputElement.removeAttribute('placeholder');\n  }\n\n  floatLabelElement.innerText = encodePlaceholder(placeholder);\n  searchWrapper.appendChild(floatLinelement);\n  searchWrapper.appendChild(floatLabelElement);\n  overAllWrapper.classList.add('e-float-input');\n  updateFloatLabelState(value, floatLabelElement);\n\n  if (floatLabelType === 'Always') {\n    if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n      removeClass([floatLabelElement], LABELBOTTOM);\n    }\n\n    addClass([floatLabelElement], LABELTOP);\n  }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\n\n\nfunction updateFloatLabelState(value, label) {\n  if (value && value.length > 0) {\n    addClass([label], LABELTOP);\n    removeClass([label], LABELBOTTOM);\n  } else {\n    removeClass([label], LABELTOP);\n    addClass([label], LABELBOTTOM);\n  }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n  var placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n  var floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n  var placeholderText;\n\n  if (!isNullOrUndefined(placeholderElement)) {\n    placeholderText = placeholderElement.innerText;\n    detach(searchWrapper.querySelector('.' + FLOATTEXT));\n    setPlaceHolder(value, inputElement, placeholderText);\n\n    if (!isNullOrUndefined(floatLine)) {\n      detach(searchWrapper.querySelector('.' + FLOATLINE));\n    }\n  } else {\n    placeholderText = placeholder !== null ? placeholder : '';\n    setPlaceHolder(value, inputElement, placeholderText);\n  }\n\n  overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction setPlaceHolder(value, inputElement, placeholder) {\n  if (value && value.length) {\n    inputElement.placeholder = '';\n  } else {\n    inputElement.placeholder = placeholder;\n  }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\n\n\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n  overAllWrapper.classList.add('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n\n  if (!isNullOrUndefined(label)) {\n    addClass([label], LABELTOP);\n\n    if (label.classList.contains(LABELBOTTOM)) {\n      removeClass([label], LABELBOTTOM);\n    }\n  }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\n\n\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  overAllWrapper.classList.remove('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n\n  if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n    if (label.classList.contains(LABELTOP)) {\n      removeClass([label], LABELTOP);\n    }\n\n    addClass([label], LABELBOTTOM);\n  }\n}\n\nfunction encodePlaceholder(placeholder) {\n  var result = '';\n\n  if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n    var spanElement = document.createElement('span');\n    spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n    var hiddenInput = spanElement.children[0];\n    result = hiddenInput.placeholder;\n  }\n\n  return result;\n}\n/* eslint-enable valid-jsdoc */\n\n\nvar __extends$5 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n\nvar FOCUS = 'e-input-focus';\nvar DISABLED$1 = 'e-disabled';\nvar OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nvar ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nvar ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nvar HIDE_LIST = 'e-hide-listitem';\nvar DELIMITER_VIEW = 'e-delim-view';\nvar CHIP_WRAPPER$1 = 'e-chips-collection';\nvar CHIP$1 = 'e-chips';\nvar CHIP_CONTENT$1 = 'e-chipcontent';\nvar CHIP_CLOSE$1 = 'e-chips-close';\nvar CHIP_SELECTED = 'e-chip-selected';\nvar SEARCHBOX_WRAPPER = 'e-searcher';\nvar DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nvar ZERO_SIZE = 'e-zero-size';\nvar REMAIN_WRAPPER$1 = 'e-remain';\nvar CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nvar DELIMITER_WRAPPER = 'e-delim-values';\nvar POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nvar INPUT_ELEMENT = 'e-dropdownbase';\nvar RTL_CLASS = 'e-rtl';\nvar CLOSE_ICON_HIDE = 'e-close-icon-hide';\nvar MOBILE_CHIP = 'e-mob-chip';\nvar FOOTER$1 = 'e-ddl-footer';\nvar HEADER$1 = 'e-ddl-header';\nvar DISABLE_ICON = 'e-ddl-disable-icon';\nvar SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nvar HIDDEN_ELEMENT = 'e-multi-hidden';\nvar destroy = 'destroy';\nvar dropdownIcon = 'e-input-group-icon e-ddl-icon';\nvar iconAnimation = 'e-icon-anim';\nvar TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nvar BOX_ELEMENT = 'e-multiselect-box';\nvar FILTERPARENT = 'e-filter-parent';\nvar CUSTOM_WIDTH = 'e-search-custom-width';\nvar FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\n\nvar MultiSelect =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$5(MultiSelect, _super);\n  /**\n   * Constructor for creating the DropDownList widget.\n   *\n   * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function MultiSelect(option, element) {\n    var _this = _super.call(this, option, element) || this;\n\n    _this.clearIconWidth = 0;\n    _this.previousFilterText = '';\n    _this.isValidKey = false;\n    _this.selectAllEventData = [];\n    _this.selectAllEventEle = [];\n    _this.resetMainList = null;\n    _this.resetFilteredData = false;\n    _this.scrollFocusStatus = false;\n    _this.keyDownStatus = false;\n    return _this;\n  }\n\n  MultiSelect.prototype.enableRTL = function (state) {\n    if (state) {\n      this.overAllWrapper.classList.add(RTL_CLASS);\n    } else {\n      this.overAllWrapper.classList.remove(RTL_CLASS);\n    }\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = state;\n      this.popupObj.dataBind();\n    }\n  };\n\n  MultiSelect.prototype.requiredModules = function () {\n    var modules = [];\n\n    if (this.mode === 'CheckBox') {\n      this.isGroupChecking = this.enableGroupCheckBox;\n\n      if (this.enableGroupCheckBox) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.enableSelectionOrder = false;\n        this.isProtectedOnChange = prevOnChange;\n      }\n\n      this.allowCustomValue = false;\n      this.hideSelectedItem = false;\n      this.closePopupOnSelect = false;\n      modules.push({\n        member: 'CheckBoxSelection',\n        args: [this]\n      });\n    }\n\n    return modules;\n  };\n\n  MultiSelect.prototype.updateHTMLAttribute = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        switch (htmlAttr) {\n          case 'class':\n            {\n              var updatedClassValue = this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ').trim();\n\n              if (updatedClassValue !== '') {\n                addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                addClass([this.popupWrapper], updatedClassValue.split(' '));\n              }\n\n              break;\n            }\n\n          case 'disabled':\n            this.enable(false);\n            break;\n\n          case 'placeholder':\n            if (!this.placeholder) {\n              this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              this.setProperties({\n                placeholder: this.inputElement.placeholder\n              }, true);\n              this.refreshPlaceHolder();\n            }\n\n            break;\n\n          default:\n            {\n              var defaultAttr = ['id'];\n              var validateAttr = ['name', 'required', 'aria-required', 'form'];\n              var containerAttr = ['title', 'role', 'style', 'class'];\n\n              if (defaultAttr.indexOf(htmlAttr) > -1) {\n                this.element.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              } else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              } else if (containerAttr.indexOf(htmlAttr) > -1) {\n                this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              } else if (htmlAttr !== 'size' && !isNullOrUndefined(this.inputElement)) {\n                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              }\n\n              break;\n            }\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateReadonly = function (state) {\n    if (!isNullOrUndefined(this.inputElement)) {\n      if (state || this.mode === 'CheckBox') {\n        this.inputElement.setAttribute('readonly', 'true');\n      } else {\n        this.inputElement.removeAttribute('readonly');\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateClearButton = function (state) {\n    if (state) {\n      if (this.overAllClear.parentNode) {\n        this.overAllClear.style.display = '';\n      } else {\n        this.componentWrapper.appendChild(this.overAllClear);\n      }\n\n      this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n    } else {\n      this.overAllClear.style.display = 'none';\n      this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n    }\n  };\n\n  MultiSelect.prototype.updateCssClass = function () {\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      var updatedCssClassValues = this.cssClass;\n      updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n\n      if (updatedCssClassValues !== '') {\n        addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n        addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateOldPropCssClass = function (oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n\n      if (oldClass !== '') {\n        removeClass([this.overAllWrapper], oldClass.split(' '));\n        removeClass([this.popupWrapper], oldClass.split(' '));\n      }\n    }\n  };\n\n  MultiSelect.prototype.onPopupShown = function (e) {\n    var _this = this;\n\n    if (Browser.isDevice && this.mode === 'CheckBox' && this.allowFiltering) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_1 = this;\n\n      window.onpopstate = function () {\n        proxy_1.hidePopup();\n        proxy_1.inputElement.focus();\n      };\n\n      history.pushState({}, '');\n    }\n\n    var animModel = {\n      name: 'FadeIn',\n      duration: 100\n    };\n    var eventArgs = {\n      popup: this.popupObj,\n      event: e,\n      cancel: false,\n      animation: animModel\n    };\n    this.trigger('open', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.focusAtFirstListItem();\n\n        if (_this.popupObj) {\n          document.body.appendChild(_this.popupObj.element);\n        }\n\n        if (_this.mode === 'CheckBox' && _this.enableGroupCheckBox && !isNullOrUndefined(_this.fields.groupBy)) {\n          _this.updateListItems(_this.list.querySelectorAll('li.e-list-item'), _this.mainList.querySelectorAll('li.e-list-item'));\n        }\n\n        if (_this.mode === 'CheckBox' || _this.showDropDownIcon) {\n          addClass([_this.overAllWrapper], [iconAnimation]);\n        }\n\n        _this.refreshPopup();\n\n        _this.renderReactTemplates();\n\n        if (_this.popupObj) {\n          _this.popupObj.show(eventArgs.animation, _this.zIndex === 1000 ? _this.element : null);\n        }\n\n        attributes(_this.inputElement, {\n          'aria-expanded': 'true',\n          'aria-owns': _this.inputElement.id + '_options'\n        });\n\n        _this.updateAriaActiveDescendant();\n\n        if (_this.isFirstClick) {\n          _this.loadTemplate();\n        }\n      }\n    });\n  };\n\n  MultiSelect.prototype.updateListItems = function (listItems, mainListItems) {\n    for (var i = 0; i < listItems.length; i++) {\n      this.findGroupStart(listItems[i]);\n      this.findGroupStart(mainListItems[i]);\n    }\n\n    this.deselectHeader();\n  };\n\n  MultiSelect.prototype.loadTemplate = function () {\n    this.refreshListItems(null);\n\n    if (this.mode === 'CheckBox') {\n      this.removeFocus();\n    }\n\n    this.notify('reOrder', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      e: this\n    });\n  };\n\n  MultiSelect.prototype.setScrollPosition = function () {\n    if ((!this.hideSelectedItem && this.mode !== 'CheckBox' || this.mode === 'CheckBox' && !this.enableSelectionOrder) && !isNullOrUndefined(this.value) && this.value.length > 0) {\n      var valueEle = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', this.value[this.value.length - 1]);\n\n      if (!isNullOrUndefined(valueEle)) {\n        this.scrollBottom(valueEle);\n      }\n    }\n  };\n\n  MultiSelect.prototype.focusAtFirstListItem = function () {\n    if (this.ulElement && this.ulElement.querySelector('li.' + dropDownBaseClasses.li)) {\n      var element = void 0;\n\n      if (this.mode === 'CheckBox') {\n        this.removeFocus();\n        return;\n      } else {\n        element = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n      }\n\n      if (element !== null) {\n        this.removeFocus();\n        this.addListFocus(element);\n      }\n    }\n  };\n\n  MultiSelect.prototype.focusAtLastListItem = function (data) {\n    var activeElement;\n\n    if (data) {\n      activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n    } else {\n      if (this.value && this.value.length) {\n        Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n      } else {\n        activeElement = null;\n      }\n    }\n\n    if (activeElement && activeElement.item !== null) {\n      this.addListFocus(activeElement.item);\n      this.scrollBottom(activeElement.item, activeElement.index);\n    }\n  };\n\n  MultiSelect.prototype.getAriaAttributes = function () {\n    var ariaAttributes = {\n      'aria-disabled': 'false',\n      'role': 'combobox',\n      'aria-expanded': 'false'\n    };\n    return ariaAttributes;\n  };\n\n  MultiSelect.prototype.updateListARIA = function () {\n    if (!isNullOrUndefined(this.ulElement)) {\n      attributes(this.ulElement, {\n        'id': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-hidden': 'false'\n      });\n    }\n\n    var disableStatus = !isNullOrUndefined(this.inputElement) && this.inputElement.disabled ? true : false;\n\n    if (!this.isPopupOpen() && !isNullOrUndefined(this.inputElement)) {\n      attributes(this.inputElement, this.getAriaAttributes());\n    }\n\n    if (disableStatus) {\n      attributes(this.inputElement, {\n        'aria-disabled': 'true'\n      });\n    }\n\n    this.ensureAriaDisabled(disableStatus ? 'true' : 'false');\n  };\n\n  MultiSelect.prototype.ensureAriaDisabled = function (status) {\n    if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n      var attr = this.htmlAttributes;\n      extend(attr, {\n        'aria-disabled': status\n      }, attr);\n      this.setProperties({\n        htmlAttributes: attr\n      }, true);\n    }\n  };\n\n  MultiSelect.prototype.removelastSelection = function (e) {\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n    var value = elements[elements.length - 1].getAttribute('data-value');\n\n    if (!isNullOrUndefined(this.value)) {\n      this.tempValues = this.value.slice();\n    }\n\n    var customValue = this.getFormattedValue(value);\n\n    if (this.allowCustomValue && (value !== 'false' && customValue === false || !isNullOrUndefined(customValue) && customValue.toString() === 'NaN')) {\n      customValue = value;\n    }\n\n    this.removeValue(customValue, e);\n    this.removeChipSelection();\n    this.updateDelimeter(this.delimiterChar, e);\n    this.makeTextBoxEmpty();\n\n    if (this.mainList && this.listData) {\n      this.refreshSelection();\n    }\n\n    this.checkPlaceholderSize();\n  };\n\n  MultiSelect.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n\n    this.renderPopup();\n    this.onPopupShown();\n  };\n\n  MultiSelect.prototype.targetElement = function () {\n    this.targetInputElement = this.inputElement;\n\n    if (this.mode === 'CheckBox' && this.allowFiltering) {\n      this.notify('targetElement', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox'\n      });\n    }\n\n    return this.targetInputElement.value;\n  };\n\n  MultiSelect.prototype.getForQuery = function (valuecheck) {\n    var predicate;\n    var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n\n    for (var i = 0; i < valuecheck.length; i++) {\n      if (i === 0) {\n        predicate = new Predicate(field, 'equal', valuecheck[i]);\n      } else {\n        predicate = predicate.or(field, 'equal', valuecheck[i]);\n      }\n    }\n\n    return this.getQuery(this.query).where(predicate);\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  MultiSelect.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    this.updateSelectElementData(this.allowFiltering); // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    var proxy = this;\n\n    if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n      for (var i = 0; i < this.value.length; i++) {\n        var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, 'li', 'data-value', proxy.value[i]);\n\n        if (!checkEle && !(this.dataSource instanceof DataManager)) {\n          this.value.splice(i, 1);\n          i -= 1;\n        }\n      }\n    }\n\n    var valuecheck = [];\n\n    if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n      valuecheck = this.presentItemValue(this.ulElement);\n    }\n\n    if (valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value) && this.listData != null) {\n      this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n    } else {\n      this.updateActionList(ulElement, list, e);\n    }\n\n    if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n      this.removeFocus();\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n\n\n  MultiSelect.prototype.updateActionList = function (ulElement, list, e, isUpdated) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    if (this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('selectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox'\n      });\n    }\n\n    if (!this.mainList && !this.mainData) {\n      this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n      this.mainData = list;\n      this.mainListCollection = this.liCollections;\n    } else if (isNullOrUndefined(this.mainData) || this.mainData.length === 0) {\n      this.mainData = list;\n    }\n\n    if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering && this.inputElement.value && this.inputElement.value !== '') {\n      this.checkForCustomValue(this.tempQuery, this.fields);\n      return;\n    }\n\n    if (this.value && this.value.length && (this.mode !== 'CheckBox' && !isNullOrUndefined(this.inputElement) && this.inputElement.value.trim() !== '' || this.mode === 'CheckBox' || (this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering && this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === '')) {\n      this.refreshSelection();\n    }\n\n    this.updateListARIA();\n    this.unwireListEvents();\n    this.wireListEvents();\n\n    if (!isNullOrUndefined(this.setInitialValue)) {\n      this.setInitialValue();\n    }\n\n    if (!isNullOrUndefined(this.selectAllAction)) {\n      this.selectAllAction();\n    }\n\n    if (this.setDynValue) {\n      if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.initialTextUpdate();\n      }\n\n      this.initialValueUpdate();\n      this.initialUpdate();\n      this.refreshPlaceHolder();\n\n      if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n        this.updateValueState(null, this.value, null);\n      }\n    }\n\n    this.renderPopup();\n\n    if (this.beforePopupOpen) {\n      this.beforePopupOpen = false;\n      this.onPopupShown(e);\n    }\n  };\n\n  MultiSelect.prototype.refreshSelection = function () {\n    var value;\n    var element;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n    if (!isNullOrUndefined(this.value)) {\n      for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n        value = this.value[index];\n        element = this.findListElement(this.list, 'li', 'data-value', value);\n\n        if (element) {\n          addClass([element], className);\n\n          if (this.hideSelectedItem && element.previousSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group) && (!element.nextElementSibling || element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n            addClass([element.previousElementSibling], className);\n          }\n\n          if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            this.hideGroupItem(value);\n          }\n\n          if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n            removeClass([element], dropDownBaseClasses.focus);\n            var listEle = element.parentElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n\n            if (listEle.length > 0) {\n              addClass([listEle[0]], dropDownBaseClasses.focus);\n              this.updateAriaActiveDescendant();\n            } else {\n              //EJ2-57588 - for this task, we prevent the ul element cloning ( this.ulElement = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n              if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                this.l10nUpdate();\n                addClass([this.list], dropDownBaseClasses.noData);\n              }\n            }\n          }\n\n          element.setAttribute('aria-selected', 'true');\n\n          if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n            var ariaValue = element.getElementsByClassName('e-check').length;\n\n            if (ariaValue === 0) {\n              var args = {\n                module: 'CheckBoxSelection',\n                enable: this.mode === 'CheckBox',\n                li: element,\n                e: null\n              };\n              this.notify('updatelist', args);\n            }\n          }\n        }\n      }\n    }\n\n    this.checkSelectAll();\n    this.checkMaxSelection();\n  };\n\n  MultiSelect.prototype.hideGroupItem = function (value) {\n    var element;\n    var element1;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n    var i = 0;\n    var j = 0;\n    var temp = true;\n    var temp1 = true;\n\n    do {\n      if (element && element.previousElementSibling && !element.previousElementSibling.classList.contains(HIDE_LIST) && element.previousElementSibling.classList.contains(dropDownBaseClasses.li)) {\n        temp = false;\n      }\n\n      if (!temp || !element || element.previousElementSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)) {\n        i = 10;\n      } else {\n        element = element.previousElementSibling;\n      }\n\n      if (element1 && element1.nextElementSibling && !element1.nextElementSibling.classList.contains(HIDE_LIST) && element1.nextElementSibling.classList.contains(dropDownBaseClasses.li)) {\n        temp1 = false;\n      }\n\n      if (!temp1 || !element1 || element1.nextElementSibling && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group)) {\n        j = 10;\n      } else {\n        element1 = element1.nextElementSibling;\n      }\n    } while (i < 10 || j < 10);\n\n    if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n      addClass([element.previousElementSibling], className);\n    } else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n      removeClass([element.previousElementSibling], className);\n    }\n  };\n\n  MultiSelect.prototype.getValidLi = function () {\n    var liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n    return !isNullOrUndefined(liElement) ? liElement : this.liCollections[0];\n  };\n\n  MultiSelect.prototype.checkSelectAll = function () {\n    var groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n    var listItem = this.list.querySelectorAll('li.e-list-item');\n    var searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n    var searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n\n    if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      searchActiveCount = searchActiveCount - groupItemLength;\n    }\n\n    if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength) && this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'check'\n      });\n    } else if (searchCount !== searchActiveCount && this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'uncheck'\n      });\n    }\n\n    if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n      for (var i = 0; i < listItem.length; i++) {\n        this.findGroupStart(listItem[i]);\n      }\n\n      this.deselectHeader();\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.openClick = function (e) {\n    if (!this.openOnClick && this.mode !== 'CheckBox') {\n      if (this.targetElement() !== '') {\n        this.showPopup();\n      } else {\n        this.hidePopup(e);\n      }\n    } else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n      this.showPopup();\n    }\n  };\n\n  MultiSelect.prototype.keyUp = function (e) {\n    if (this.mode === 'CheckBox' && !this.openOnClick) {\n      var char = String.fromCharCode(e.keyCode);\n      var isWordCharacter = char.match(/\\w/);\n\n      if (!isNullOrUndefined(isWordCharacter)) {\n        this.isValidKey = true;\n      }\n    }\n\n    this.isValidKey = this.isPopupOpen() && e.keyCode === 8 || this.isValidKey;\n    this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n\n    if (this.isValidKey) {\n      this.isValidKey = false;\n      this.expandTextbox();\n      this.showOverAllClear();\n\n      switch (e.keyCode) {\n        default:\n          // For filtering works in mobile firefox\n          this.search(e);\n      }\n    }\n  };\n  /**\n   * To filter the multiselect data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.filter = function (dataSource, query, fields) {\n    this.isFiltered = true;\n    this.remoteFilterAction = true;\n    this.dataUpdater(dataSource, query, fields);\n  };\n\n  MultiSelect.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n\n    if (this.filterAction) {\n      if (this.targetElement() !== null) {\n        var dataType = this.typeOfData(this.dataSource).typeof;\n\n        if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n          filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n        } else {\n          var fields = this.fields;\n          filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n        }\n      }\n\n      return filterQuery;\n    } else {\n      return query ? query : this.query ? this.query : new Query();\n    }\n  };\n\n  MultiSelect.prototype.dataUpdater = function (dataSource, query, fields) {\n    this.isDataFetched = false;\n\n    if (this.targetElement().trim() === '') {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n\n      if (this.backCommand) {\n        this.remoteCustomValue = false;\n\n        if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n          this.mainData = [];\n        }\n\n        this.onActionComplete(list, this.mainData);\n\n        if (this.value && this.value.length) {\n          this.refreshSelection();\n        }\n\n        if (this.keyCode !== 8) {\n          this.focusAtFirstListItem();\n        }\n\n        this.notify('reOrder', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          e: this\n        });\n      }\n    } else {\n      this.resetList(dataSource, fields, query);\n\n      if (this.allowCustomValue) {\n        if (!(dataSource instanceof DataManager)) {\n          this.checkForCustomValue(query, fields);\n        } else {\n          this.remoteCustomValue = true;\n          this.tempQuery = query;\n        }\n      }\n    }\n\n    this.refreshPopup();\n\n    if (this.mode === 'CheckBox') {\n      this.removeFocus();\n    }\n  };\n\n  MultiSelect.prototype.checkForCustomValue = function (query, fields) {\n    var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n\n    if (this.allowCustomValue && dataChecks) {\n      var value = this.inputElement.value;\n      var field = fields ? fields : this.fields;\n      var customData = !isNullOrUndefined(this.mainData) && this.mainData.length > 0 ? this.mainData[0] : this.mainData;\n\n      if (typeof customData !== 'string' && typeof customData !== 'number' && typeof customData !== 'boolean') {\n        var dataItem = {};\n        setValue(field.text, value, dataItem);\n\n        if (typeof getValue(this.fields.value ? this.fields.value : 'value', customData) === 'number') {\n          setValue(field.value, Math.random(), dataItem);\n        } else {\n          setValue(field.value, value, dataItem);\n        }\n\n        var tempData = JSON.parse(JSON.stringify(this.listData));\n        tempData.splice(0, 0, dataItem);\n        this.resetList(tempData, field, query);\n      } else {\n        var tempData = JSON.parse(JSON.stringify(this.listData));\n        tempData.splice(0, 0, this.inputElement.value);\n        tempData[0] = typeof customData === 'number' && !isNaN(parseFloat(tempData[0])) ? parseFloat(tempData[0]) : tempData[0];\n        tempData[0] = typeof customData === 'boolean' ? tempData[0] === 'true' ? true : tempData[0] === 'false' ? false : tempData[0] : tempData[0];\n        this.resetList(tempData, field);\n      }\n    }\n\n    if (this.value && this.value.length) {\n      this.refreshSelection();\n    }\n  };\n\n  MultiSelect.prototype.getNgDirective = function () {\n    return 'EJS-MULTISELECT';\n  };\n\n  MultiSelect.prototype.wrapperClick = function (e) {\n    this.setDynValue = false;\n\n    if (!this.enabled) {\n      return;\n    }\n\n    if (e.target === this.overAllClear) {\n      e.preventDefault();\n      return;\n    }\n\n    if (!this.inputFocus) {\n      this.inputElement.focus();\n    }\n\n    if (!this.readonly) {\n      if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n        if (this.isPopupOpen()) {\n          this.refreshPopup();\n        }\n\n        return;\n      }\n\n      if (!this.isPopupOpen() && (this.openOnClick || this.showDropDownIcon && e.target && e.target.className === dropdownIcon)) {\n        this.showPopup(e);\n      } else {\n        this.hidePopup(e);\n\n        if (this.mode === 'CheckBox') {\n          this.showOverAllClear();\n          this.inputFocus = true;\n\n          if (!this.overAllWrapper.classList.contains(FOCUS)) {\n            this.overAllWrapper.classList.add(FOCUS);\n          }\n        }\n      }\n    }\n\n    if (!(this.targetElement() && this.targetElement() !== '')) {\n      e.preventDefault();\n    }\n  };\n\n  MultiSelect.prototype.enable = function (state) {\n    if (state) {\n      this.overAllWrapper.classList.remove(DISABLED$1);\n      this.inputElement.removeAttribute('disabled');\n      attributes(this.inputElement, {\n        'aria-disabled': 'false'\n      });\n      this.ensureAriaDisabled('false');\n    } else {\n      this.overAllWrapper.classList.add(DISABLED$1);\n      this.inputElement.setAttribute('disabled', 'true');\n      attributes(this.inputElement, {\n        'aria-disabled': 'true'\n      });\n      this.ensureAriaDisabled('true');\n    }\n\n    if (this.enabled !== state) {\n      this.enabled = state;\n    }\n\n    this.hidePopup();\n  };\n\n  MultiSelect.prototype.onBlurHandler = function (eve, isDocClickFromCheck) {\n    var target;\n\n    if (!isNullOrUndefined(eve)) {\n      target = eve.relatedTarget;\n    }\n\n    if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n      if (this.mode !== 'CheckBox') {\n        this.inputElement.focus();\n      } else if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline') || this.overAllWrapper.classList.contains('e-filled'))) {\n        addClass([this.overAllWrapper], 'e-valid-input');\n      }\n\n      return;\n    }\n\n    if (this.floatLabelType === 'Auto' && this.overAllWrapper.classList.contains('e-outline') && this.mode === 'CheckBox' && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      removeClass([this.overAllWrapper], 'e-valid-input');\n    }\n\n    if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n      this.inputFocus = false;\n      this.overAllWrapper.classList.remove(FOCUS);\n      return;\n    }\n\n    if (this.scrollFocusStatus) {\n      if (!isNullOrUndefined(eve)) {\n        eve.preventDefault();\n      }\n\n      this.inputElement.focus();\n      this.scrollFocusStatus = false;\n      return;\n    }\n\n    this.inputFocus = false;\n    this.overAllWrapper.classList.remove(FOCUS);\n\n    if (this.addTagOnBlur) {\n      var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n      var listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n      var allowChipAddition = listLiElement && !listLiElement.classList.contains(className) ? true : false;\n\n      if (allowChipAddition) {\n        this.updateListSelection(listLiElement, eve);\n\n        if (this.mode === 'Delimiter') {\n          this.updateDelimeter(this.delimiterChar);\n        }\n      }\n    }\n\n    this.updateDataList();\n\n    if (this.resetMainList) {\n      this.mainList = this.resetMainList;\n      this.resetMainList = null;\n    }\n\n    this.refreshListItems(null);\n\n    if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n      this.updateDelimView();\n    }\n\n    if (this.changeOnBlur) {\n      this.updateValueState(eve, this.value, this.tempValues);\n      this.dispatchEvent(this.hiddenElement, 'change');\n    }\n\n    this.overAllClear.style.display = 'none';\n\n    if (this.isPopupOpen()) {\n      this.hidePopup(eve);\n    }\n\n    this.makeTextBoxEmpty();\n    this.trigger('blur');\n    this.focused = true;\n\n    if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n      this.removeChipFocus();\n    }\n\n    this.removeChipSelection();\n    this.refreshInputHight();\n    floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n    this.refreshPlaceHolder();\n\n    if ((this.allowFiltering || this.enableSelectionOrder === true && this.mode === 'CheckBox') && !isNullOrUndefined(this.mainList)) {\n      this.ulElement = this.mainList;\n    }\n\n    this.checkPlaceholderSize();\n    Input.createSpanElement(this.overAllWrapper, this.createElement);\n    this.calculateWidth();\n\n    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n      this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n  };\n\n  MultiSelect.prototype.calculateWidth = function () {\n    var elementWidth;\n\n    if (this.overAllWrapper) {\n      if (!this.showDropDownIcon || this.overAllWrapper.querySelector('.' + 'e-label-top')) {\n        elementWidth = this.overAllWrapper.clientWidth - 2 * parseInt(getComputedStyle(this.inputElement).paddingRight);\n      } else {\n        var downIconWidth = this.dropIcon.offsetWidth + parseInt(getComputedStyle(this.dropIcon).marginRight);\n        elementWidth = this.overAllWrapper.clientWidth - (downIconWidth + 2 * parseInt(getComputedStyle(this.inputElement).paddingRight));\n      }\n\n      Input.calculateWidth(elementWidth, this.overAllWrapper, this.getModuleName());\n    }\n  };\n\n  MultiSelect.prototype.checkPlaceholderSize = function () {\n    if (this.showDropDownIcon) {\n      var downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n      this.setPlaceholderSize(downIconWidth);\n    } else {\n      if (!isNullOrUndefined(this.dropIcon)) {\n        this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n      }\n    }\n  };\n\n  MultiSelect.prototype.setPlaceholderSize = function (downIconWidth) {\n    if (isNullOrUndefined(this.value) || this.value.length === 0) {\n      if (this.dropIcon.offsetWidth !== 0) {\n        this.searchWrapper.style.width = 'calc(100% - ' + (downIconWidth + 10) + 'px';\n      } else {\n        addClass([this.searchWrapper], CUSTOM_WIDTH);\n      }\n    } else if (!isNullOrUndefined(this.value)) {\n      this.searchWrapper.removeAttribute('style');\n      removeClass([this.searchWrapper], CUSTOM_WIDTH);\n    }\n  };\n\n  MultiSelect.prototype.refreshInputHight = function () {\n    if (!isNullOrUndefined(this.searchWrapper)) {\n      if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n        this.searchWrapper.classList.remove(ZERO_SIZE);\n      } else {\n        this.searchWrapper.classList.add(ZERO_SIZE);\n      }\n    }\n  };\n\n  MultiSelect.prototype.validateValues = function (newValue, oldValue) {\n    return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n  };\n\n  MultiSelect.prototype.updateValueState = function (event, newVal, oldVal) {\n    var newValue = newVal ? newVal : [];\n    var oldValue = oldVal ? oldVal : [];\n\n    if (this.initStatus && this.validateValues(newValue, oldValue)) {\n      var eventArgs = {\n        e: event,\n        oldValue: oldVal,\n        value: newVal,\n        isInteracted: event ? true : false,\n        element: this.element,\n        event: event\n      };\n\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n\n      this.updateTempValue();\n\n      if (!this.changeOnBlur) {\n        this.dispatchEvent(this.hiddenElement, 'change');\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateTempValue = function () {\n    if (!this.value) {\n      this.tempValues = this.value;\n    } else {\n      this.tempValues = this.value.slice();\n    }\n  };\n\n  MultiSelect.prototype.updateAriaActiveDescendant = function () {\n    if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n      attributes(this.inputElement, {\n        'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n      });\n    }\n  };\n\n  MultiSelect.prototype.getPagingCount = function () {\n    var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    return Math.round(this.list.offsetHeight / parseInt(height, 10));\n  };\n\n  MultiSelect.prototype.pageUpSelection = function (steps) {\n    var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n    this.addListFocus(previousItem);\n    this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n  };\n\n  MultiSelect.prototype.pageDownSelection = function (steps) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    var list = this.getItems();\n    var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n    this.addListFocus(previousItem);\n    this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n  };\n\n  MultiSelect.prototype.getItems = function () {\n    if (!this.list) {\n      _super.prototype.render.call(this);\n    }\n\n    return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ? this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')') : [];\n  };\n\n  MultiSelect.prototype.focusInHandler = function (e) {\n    var _this = this;\n\n    if (this.enabled) {\n      this.showOverAllClear();\n      this.inputFocus = true;\n\n      if (this.value && this.value.length) {\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n          this.chipCollectionWrapper.style.display = '';\n        } else {\n          this.showDelimWrapper();\n        }\n\n        if (this.mode !== 'CheckBox') {\n          this.viewWrapper.style.display = 'none';\n        }\n      }\n\n      if (this.mode !== 'CheckBox') {\n        this.searchWrapper.classList.remove(ZERO_SIZE);\n      }\n\n      this.checkPlaceholderSize();\n\n      if (this.focused) {\n        var args = {\n          isInteracted: e ? true : false,\n          event: e\n        };\n        this.trigger('focus', args);\n        this.focused = false;\n      }\n\n      if (!this.overAllWrapper.classList.contains(FOCUS)) {\n        this.overAllWrapper.classList.add(FOCUS);\n      }\n\n      floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n\n      if (this.isPopupOpen()) {\n        this.refreshPopup();\n      }\n\n      setTimeout(function () {\n        _this.calculateWidth();\n      }, 150);\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  MultiSelect.prototype.showDelimWrapper = function () {\n    if (this.mode === 'CheckBox') {\n      this.viewWrapper.style.display = '';\n    } else {\n      this.delimiterWrapper.style.display = '';\n    }\n\n    this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n  };\n\n  MultiSelect.prototype.hideDelimWrapper = function () {\n    this.delimiterWrapper.style.display = 'none';\n    this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n  };\n\n  MultiSelect.prototype.expandTextbox = function () {\n    var size = 5;\n\n    if (this.placeholder) {\n      size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n    }\n\n    if (this.inputElement.value.length > size) {\n      this.inputElement.size = this.inputElement.value.length;\n    } else {\n      this.inputElement.size = size;\n    }\n  };\n\n  MultiSelect.prototype.isPopupOpen = function () {\n    return this.popupWrapper !== null && this.popupWrapper.parentElement !== null;\n  };\n\n  MultiSelect.prototype.refreshPopup = function () {\n    if (this.popupObj && this.mobFilter) {\n      this.popupObj.setProperties({\n        width: this.calcPopupWidth()\n      });\n      this.popupObj.refreshPosition(this.overAllWrapper);\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  MultiSelect.prototype.checkTextLength = function () {\n    return this.targetElement().length < 1;\n  };\n\n  MultiSelect.prototype.popupKeyActions = function (e) {\n    switch (e.keyCode) {\n      case 38:\n        this.hidePopup(e);\n\n        if (this.mode === 'CheckBox') {\n          this.inputElement.focus();\n        }\n\n        e.preventDefault();\n        break;\n\n      case 40:\n        if (!this.isPopupOpen()) {\n          this.showPopup(e);\n          e.preventDefault();\n        }\n\n        break;\n    }\n  };\n\n  MultiSelect.prototype.updateAriaAttribute = function () {\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (!isNullOrUndefined(focusedItem)) {\n      this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n\n      if (this.allowFiltering) {\n        var filterInput = this.popupWrapper.querySelector('.' + FILTERINPUT);\n        filterInput && filterInput.setAttribute('aria-activedescendant', focusedItem.id);\n      } else if (this.mode == \"CheckBox\") {\n        this.overAllWrapper.setAttribute('aria-activedescendant', focusedItem.id);\n      }\n    }\n  };\n\n  MultiSelect.prototype.homeNavigation = function (isHome) {\n    this.removeFocus();\n    var scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n    if (scrollEle.length > 0) {\n      var element = scrollEle[isHome ? 0 : scrollEle.length - 1];\n      element.classList.add(dropDownBaseClasses.focus);\n      this.scrollBottom(element);\n      this.updateAriaActiveDescendant();\n    }\n  };\n\n  MultiSelect.prototype.onKeyDown = function (e) {\n    if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n      return;\n    }\n\n    this.keyCode = e.keyCode;\n    this.keyDownStatus = true;\n\n    if (e.keyCode > 111 && e.keyCode < 124) {\n      return;\n    }\n\n    if (e.altKey) {\n      this.popupKeyActions(e);\n      return;\n    } else if (this.isPopupOpen()) {\n      var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n      var activeIndex = void 0;\n\n      switch (e.keyCode) {\n        case 36:\n        case 35:\n          this.homeNavigation(e.keyCode === 36 ? true : false);\n          break;\n\n        case 33:\n          e.preventDefault();\n\n          if (focusedItem) {\n            this.getIndexByValue(focusedItem.getAttribute('data-value'));\n            this.pageUpSelection(activeIndex - this.getPagingCount());\n            this.updateAriaAttribute();\n          }\n\n          return;\n\n        case 34:\n          e.preventDefault();\n\n          if (focusedItem) {\n            this.getIndexByValue(focusedItem.getAttribute('data-value'));\n            this.pageDownSelection(activeIndex + this.getPagingCount());\n            this.updateAriaAttribute();\n          }\n\n          return;\n\n        case 38:\n          this.arrowUp(e);\n          break;\n\n        case 40:\n          this.arrowDown(e);\n          break;\n\n        case 27:\n          e.preventDefault();\n          this.hidePopup(e);\n\n          if (this.mode === 'CheckBox') {\n            this.inputElement.focus();\n          }\n\n          return;\n\n        case 13:\n          e.preventDefault();\n\n          if (this.mode !== 'CheckBox') {\n            this.selectByKey(e);\n          }\n\n          this.checkPlaceholderSize();\n          return;\n\n        case 32:\n          this.spaceKeySelection(e);\n          return;\n\n        case 9:\n          e.preventDefault();\n          this.hidePopup(e);\n          this.inputElement.focus();\n          this.overAllWrapper.classList.add(FOCUS);\n      }\n    } else {\n      switch (e.keyCode) {\n        case 13:\n        case 9:\n        case 16:\n        case 17:\n        case 20:\n          return;\n\n        case 40:\n          if (this.openOnClick) {\n            this.showPopup();\n          }\n\n          break;\n\n        case 27:\n          e.preventDefault();\n          this.escapeAction();\n          return;\n      }\n    }\n\n    if (this.checkTextLength()) {\n      this.keyNavigation(e);\n    }\n\n    if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n      if (this.allowFiltering) {\n        this.previousFilterText = this.targetElement();\n      }\n\n      this.checkBackCommand(e);\n    }\n\n    this.expandTextbox();\n\n    if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n      this.refreshPopup();\n    }\n  };\n\n  MultiSelect.prototype.arrowDown = function (e) {\n    e.preventDefault();\n    this.moveByList(1);\n    this.keyAction = true;\n\n    if (document.activeElement.classList.contains(FILTERINPUT) || this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list) {\n      EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n    }\n\n    this.updateAriaAttribute();\n  };\n\n  MultiSelect.prototype.arrowUp = function (e) {\n    e.preventDefault();\n    this.keyAction = true;\n    var list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    }\n\n    var focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n    var index = Array.prototype.slice.call(list).indexOf(focuseElem);\n\n    if (index <= 0 && this.mode === 'CheckBox' && this.allowFiltering) {\n      this.keyAction = false;\n      this.notify('inputFocus', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'focus'\n      });\n    }\n\n    this.moveByList(-1);\n    this.updateAriaAttribute();\n  };\n\n  MultiSelect.prototype.spaceKeySelection = function (e) {\n    if (this.mode === 'CheckBox') {\n      if (!document.activeElement.classList.contains(FILTERINPUT)) {\n        e.preventDefault();\n        this.keyAction = true;\n      }\n\n      this.selectByKey(e);\n    }\n\n    this.checkPlaceholderSize();\n  };\n\n  MultiSelect.prototype.checkBackCommand = function (e) {\n    if (e.keyCode === 8 && this.allowFiltering ? this.targetElement() !== this.previousFilterText : this.targetElement() === '') {\n      this.backCommand = false;\n    } else {\n      this.backCommand = true;\n    }\n  };\n\n  MultiSelect.prototype.keyNavigation = function (e) {\n    if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox' && this.value && this.value.length) {\n      switch (e.keyCode) {\n        case 37:\n          //left arrow\n          e.preventDefault();\n          this.moveBy(-1, e);\n          break;\n\n        case 39:\n          //right arrow\n          e.preventDefault();\n          this.moveBy(1, e);\n          break;\n\n        case 8:\n          this.removelastSelection(e);\n          break;\n\n        case 46:\n          //del\n          this.removeSelectedChip(e);\n          break;\n      }\n    } else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n      if (this.value && this.value.length) {\n        e.preventDefault();\n        var temp = this.value[this.value.length - 1];\n        this.removeValue(temp, e);\n        this.updateDelimeter(this.delimiterChar, e);\n        this.focusAtLastListItem(temp);\n      }\n    }\n  };\n\n  MultiSelect.prototype.selectByKey = function (e) {\n    this.removeChipSelection();\n    this.selectListByKey(e);\n\n    if (this.hideSelectedItem) {\n      this.focusAtFirstListItem();\n    }\n  };\n\n  MultiSelect.prototype.escapeAction = function () {\n    var temp = this.tempValues ? this.tempValues.slice() : [];\n\n    if (this.value && this.validateValues(this.value, temp)) {\n      if (this.mode !== 'CheckBox') {\n        this.value = temp;\n        this.initialValueUpdate();\n      }\n\n      if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n        this.chipCollectionWrapper.style.display = '';\n      } else {\n        this.showDelimWrapper();\n      }\n\n      this.refreshPlaceHolder();\n\n      if (this.value.length) {\n        this.showOverAllClear();\n      } else {\n        this.hideOverAllClear();\n      }\n    }\n\n    this.makeTextBoxEmpty();\n  };\n\n  MultiSelect.prototype.scrollBottom = function (selectedLI, activeIndex) {\n    var currentOffset = this.list.offsetHeight;\n    var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n    var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n    var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n    boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n    if (activeIndex === 0) {\n      this.list.scrollTop = 0;\n    } else if (nextBottom > currentOffset) {\n      this.list.scrollTop = nextOffset;\n    } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n      this.list.scrollTop = nextOffset;\n    }\n  };\n\n  MultiSelect.prototype.scrollTop = function (selectedLI, activeIndex) {\n    var nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n    nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n    var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n\n    if (activeIndex === 0) {\n      this.list.scrollTop = 0;\n    } else if (nextOffset < 0) {\n      this.list.scrollTop = this.list.scrollTop + nextOffset;\n    } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n      this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n    }\n  };\n\n  MultiSelect.prototype.selectListByKey = function (e) {\n    var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n    var limit = this.value && this.value.length ? this.value.length : 0;\n    var target;\n\n    if (li !== null) {\n      if (li.classList.contains('e-active')) {\n        limit = limit - 1;\n      }\n\n      if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n        this.updateListSelection(li, e);\n        this.addListFocus(li);\n\n        if (this.mode === 'CheckBox') {\n          this.updateDelimView();\n          this.updateDelimeter(this.delimiterChar, e);\n          this.refreshInputHight();\n          this.checkPlaceholderSize();\n\n          if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            target = li.firstElementChild.lastElementChild;\n            this.findGroupStart(target);\n            this.deselectHeader();\n          }\n        } else {\n          this.updateDelimeter(this.delimiterChar, e);\n        }\n\n        this.makeTextBoxEmpty();\n\n        if (this.mode !== 'CheckBox') {\n          this.refreshListItems(li.textContent);\n        }\n\n        if (!this.changeOnBlur) {\n          this.updateValueState(e, this.value, this.tempValues);\n        }\n\n        this.refreshPopup();\n      } else {\n        if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n          target = li.firstElementChild.lastElementChild;\n\n          if (target.classList.contains('e-check')) {\n            this.selectAllItem(false, e, li);\n          } else {\n            this.selectAllItem(true, e, li);\n          }\n        }\n      }\n\n      this.refreshSelection();\n\n      if (this.closePopupOnSelect) {\n        this.hidePopup(e);\n      }\n    }\n\n    this.refreshPlaceHolder();\n  };\n\n  MultiSelect.prototype.refreshListItems = function (data) {\n    if ((this.allowFiltering || this.mode === 'CheckBox' && this.enableSelectionOrder === true || this.allowCustomValue) && this.mainList && this.listData) {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      this.onActionComplete(list, this.mainData);\n      this.focusAtLastListItem(data);\n\n      if (this.value && this.value.length) {\n        this.refreshSelection();\n      }\n    } else if (!isNullOrUndefined(this.fields.groupBy) && this.value && this.value.length) {\n      this.refreshSelection();\n    }\n  };\n\n  MultiSelect.prototype.removeSelectedChip = function (e) {\n    var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n    var temp;\n\n    if (selectedElem !== null) {\n      if (!isNullOrUndefined(this.value)) {\n        this.tempValues = this.value.slice();\n      }\n\n      temp = selectedElem.nextElementSibling;\n\n      if (temp !== null) {\n        this.removeChipSelection();\n        this.addChipSelection(temp, e);\n      }\n\n      this.removeValue(selectedElem.getAttribute('data-value'), e);\n      this.makeTextBoxEmpty();\n    }\n\n    if (this.closePopupOnSelect) {\n      this.hidePopup(e);\n    }\n\n    this.checkPlaceholderSize();\n  };\n\n  MultiSelect.prototype.moveByTop = function (state) {\n    var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n    var index;\n\n    if (elements.length > 1) {\n      this.removeFocus();\n      index = state ? 0 : elements.length - 1;\n      this.addListFocus(elements[index]);\n      this.scrollBottom(elements[index], index);\n    }\n\n    this.updateAriaAttribute();\n  };\n\n  MultiSelect.prototype.moveByList = function (position) {\n    if (this.list) {\n      var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n\n      if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n        elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n      }\n\n      var selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n      var temp = -1;\n\n      if (elements.length) {\n        for (var index = 0; index < elements.length; index++) {\n          if (elements[index] === selectedElem) {\n            temp = index;\n            break;\n          }\n        }\n\n        if (position > 0) {\n          if (temp < elements.length - 1) {\n            this.removeFocus();\n            this.addListFocus(elements[++temp]);\n            this.updateCheck(elements[temp]);\n            this.scrollBottom(elements[temp], temp);\n          }\n        } else {\n          if (temp > 0) {\n            this.removeFocus();\n            this.addListFocus(elements[--temp]);\n            this.updateCheck(elements[temp]);\n            this.scrollTop(elements[temp], temp);\n          }\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateCheck = function (element) {\n    if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      var checkElement = element.firstElementChild.lastElementChild;\n\n      if (checkElement.classList.contains('e-check')) {\n        element.classList.add('e-active');\n      } else {\n        element.classList.remove('e-active');\n      }\n    }\n  };\n\n  MultiSelect.prototype.moveBy = function (position, e) {\n    var temp;\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n    var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n\n    if (selectedElem === null) {\n      if (position < 0) {\n        this.addChipSelection(elements[elements.length - 1], e);\n      }\n    } else {\n      if (position < 0) {\n        temp = selectedElem.previousElementSibling;\n\n        if (temp !== null) {\n          this.removeChipSelection();\n          this.addChipSelection(temp, e);\n        }\n      } else {\n        temp = selectedElem.nextElementSibling;\n        this.removeChipSelection();\n\n        if (temp !== null) {\n          this.addChipSelection(temp, e);\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.chipClick = function (e) {\n    if (this.enabled) {\n      var elem = closest(e.target, '.' + CHIP$1);\n      this.removeChipSelection();\n      this.addChipSelection(elem, e);\n    }\n  };\n\n  MultiSelect.prototype.removeChipSelection = function () {\n    if (this.chipCollectionWrapper) {\n      this.removeChipFocus();\n    }\n  };\n\n  MultiSelect.prototype.addChipSelection = function (element, e) {\n    addClass([element], CHIP_SELECTED);\n    this.trigger('chipSelection', e);\n  };\n\n  MultiSelect.prototype.onChipRemove = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n\n    if (this.enabled && !this.readonly) {\n      var element = e.target.parentElement;\n      var customVal = element.getAttribute('data-value');\n      var value = this.getFormattedValue(customVal);\n\n      if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n        value = customVal;\n      }\n\n      if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n        this.hidePopup(e);\n      }\n\n      if (!this.inputFocus) {\n        this.inputElement.focus();\n      }\n\n      this.removeValue(value, e);\n\n      if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n        this.onActionComplete(list, this.mainData);\n      }\n\n      this.updateDelimeter(this.delimiterChar, e);\n\n      if (this.placeholder && this.floatLabelType === 'Never') {\n        this.makeTextBoxEmpty();\n        this.checkPlaceholderSize();\n      } else {\n        this.inputElement.value = '';\n      }\n\n      e.preventDefault();\n    }\n  };\n\n  MultiSelect.prototype.makeTextBoxEmpty = function () {\n    this.inputElement.value = '';\n    this.refreshPlaceHolder();\n  };\n\n  MultiSelect.prototype.refreshPlaceHolder = function () {\n    if (this.placeholder && this.floatLabelType === 'Never') {\n      if (this.value && this.value.length || !isNullOrUndefined(this.text) && this.text !== '') {\n        this.inputElement.placeholder = '';\n      } else {\n        this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n      }\n    } else {\n      this.setFloatLabelType();\n    }\n\n    this.expandTextbox();\n  };\n\n  MultiSelect.prototype.removeAllItems = function (value, eve, isClearAll, element, mainElement) {\n    var index = this.value.indexOf(value);\n    var removeVal = this.value.slice(0);\n    removeVal.splice(index, 1);\n    this.setProperties({\n      value: [].concat([], removeVal)\n    }, true);\n    element.setAttribute('aria-selected', 'false');\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    removeClass([element], className);\n    this.notify('activeList', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      li: element,\n      e: this,\n      index: index\n    });\n    this.invokeCheckboxSelection(element, eve, isClearAll);\n    this.updateMainList(true, value, mainElement);\n    this.updateChipStatus();\n  };\n\n  MultiSelect.prototype.invokeCheckboxSelection = function (element, eve, isClearAll) {\n    this.notify('updatelist', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      li: element,\n      e: eve\n    });\n    this.updateAriaActiveDescendant();\n\n    if (this.value && this.value.length !== this.mainData.length && this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll)) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'uncheck'\n      });\n    }\n  };\n\n  MultiSelect.prototype.removeValue = function (value, eve, length, isClearAll) {\n    var _this = this;\n\n    var index = this.value.indexOf(this.getFormattedValue(value));\n\n    if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n      index = this.value.indexOf(value.toString());\n    }\n\n    var targetEle = eve && eve.target;\n    isClearAll = isClearAll || targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n    if (index !== -1) {\n      var element_1 = this.findListElement(this.list, 'li', 'data-value', value);\n      var val_1 = this.getDataByValue(value);\n      var eventArgs = {\n        e: eve,\n        item: element_1,\n        itemData: val_1,\n        isInteracted: eve ? true : false,\n        cancel: false\n      };\n      this.trigger('removing', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          _this.removeIndex++;\n        } else {\n          var removeVal = _this.value.slice(0);\n\n          removeVal.splice(index, 1);\n\n          _this.setProperties({\n            value: [].concat([], removeVal)\n          }, true);\n\n          if (element_1 !== null) {\n            var hideElement = _this.findListElement(_this.mainList, 'li', 'data-value', value);\n\n            element_1.setAttribute('aria-selected', 'false');\n            removeClass([element_1], className);\n\n            if (hideElement) {\n              hideElement.setAttribute('aria-selected', 'false');\n              removeClass([element_1, hideElement], className);\n            }\n\n            _this.notify('activeList', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox',\n              li: element_1,\n              e: _this,\n              index: index\n            });\n\n            _this.invokeCheckboxSelection(element_1, eve, isClearAll);\n          }\n\n          if (_this.hideSelectedItem && _this.fields.groupBy && element_1) {\n            _this.hideGroupItem(value);\n          }\n\n          if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox' && _this.isPopupOpen()) {\n            _super.prototype.scrollStop.call(_this);\n          }\n\n          _this.updateMainList(true, value);\n\n          _this.removeChip(value);\n\n          _this.updateChipStatus();\n\n          var limit = _this.value && _this.value.length ? _this.value.length : 0;\n\n          if (limit < _this.maximumSelectionLength) {\n            var collection = _this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n\n            removeClass(collection, 'e-disable');\n          }\n\n          _this.trigger('removed', eventArgs);\n\n          var targetEle_1 = eve && eve.currentTarget;\n          var isSelectAll = targetEle_1 && targetEle_1.classList.contains('e-selectall-parent') ? true : null;\n\n          if (!_this.changeOnBlur && !isClearAll && eve && length && !isSelectAll) {\n            _this.updateValueState(eve, _this.value, _this.tempValues);\n          }\n\n          if (length) {\n            _this.selectAllEventData.push(val_1);\n\n            _this.selectAllEventEle.push(element_1);\n          }\n\n          if (length === 1) {\n            if (!_this.changeOnBlur) {\n              _this.updateValueState(eve, _this.value, _this.tempValues);\n            }\n\n            var args = {\n              event: eve,\n              items: _this.selectAllEventEle,\n              itemData: _this.selectAllEventData,\n              isInteracted: eve ? true : false,\n              isChecked: false\n            };\n\n            _this.trigger('selectedAll', args);\n\n            _this.selectAllEventData = [];\n            _this.selectAllEventEle = [];\n          }\n\n          if (isClearAll && (length === 1 || length === null)) {\n            _this.clearAllCallback(eve, isClearAll);\n          }\n        }\n      });\n    }\n  };\n\n  MultiSelect.prototype.updateMainList = function (state, value, mainElement) {\n    if (this.allowFiltering || this.mode === 'CheckBox') {\n      var element2 = mainElement ? mainElement : this.findListElement(this.mainList, 'li', 'data-value', value);\n\n      if (element2) {\n        if (state) {\n          element2.setAttribute('aria-selected', 'false');\n          removeClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n\n          if (this.mode === 'CheckBox') {\n            removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n          }\n        } else {\n          element2.setAttribute('aria-selected', 'true');\n          addClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n\n          if (this.mode === 'CheckBox') {\n            addClass([element2.firstElementChild.lastElementChild], 'e-check');\n          }\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.removeChip = function (value) {\n    if (this.chipCollectionWrapper) {\n      var element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n\n      if (element) {\n        remove(element);\n      }\n    }\n  };\n\n  MultiSelect.prototype.setWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.overAllWrapper.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.overAllWrapper.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n\n  MultiSelect.prototype.updateChipStatus = function () {\n    if (this.value && this.value.length) {\n      if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n        this.chipCollectionWrapper.style.display = '';\n      }\n\n      if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n        this.showDelimWrapper();\n      }\n\n      this.showOverAllClear();\n    } else {\n      if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n        this.chipCollectionWrapper.style.display = 'none';\n      }\n\n      if (!isNullOrUndefined(this.delimiterWrapper)) {\n        this.delimiterWrapper.style.display = 'none';\n      }\n\n      this.hideOverAllClear();\n    }\n  };\n\n  MultiSelect.prototype.addValue = function (value, text, eve) {\n    if (!this.value) {\n      this.value = [];\n    }\n\n    if (this.value.indexOf(value) < 0) {\n      this.setProperties({\n        value: [].concat([], this.value, [value])\n      }, true);\n    }\n\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.removeFocus();\n\n    if (element) {\n      this.addListFocus(element);\n      this.addListSelection(element);\n    }\n\n    if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n      this.addChip(text, value, eve);\n    }\n\n    if (this.hideSelectedItem && this.fields.groupBy) {\n      this.hideGroupItem(value);\n    }\n\n    this.updateChipStatus();\n    this.checkMaxSelection();\n  };\n\n  MultiSelect.prototype.checkMaxSelection = function () {\n    var limit = this.value && this.value.length ? this.value.length : 0;\n\n    if (limit === this.maximumSelectionLength) {\n      var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n      addClass(collection, 'e-disable');\n    }\n  };\n\n  MultiSelect.prototype.dispatchSelect = function (value, eve, element, isNotTrigger, length) {\n    var _this = this;\n\n    var list = this.listData;\n\n    if (this.initStatus && !isNotTrigger) {\n      var val_2 = this.getDataByValue(value);\n      var eventArgs = {\n        e: eve,\n        item: element,\n        itemData: val_2,\n        isInteracted: eve ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          if (length) {\n            _this.selectAllEventData.push(val_2);\n\n            _this.selectAllEventEle.push(element);\n          }\n\n          if (length === 1) {\n            var args = {\n              event: eve,\n              items: _this.selectAllEventEle,\n              itemData: _this.selectAllEventData,\n              isInteracted: eve ? true : false,\n              isChecked: true\n            };\n\n            _this.trigger('selectedAll', args);\n\n            _this.selectAllEventData = [];\n          }\n\n          if (_this.allowCustomValue && _this.isServerRendered && _this.listData !== list) {\n            _this.listData = list;\n          }\n\n          _this.updateListSelectEventCallback(value, element, eve);\n\n          if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox') {\n            _super.prototype.scrollStop.call(_this);\n          }\n        }\n      });\n    }\n  };\n\n  MultiSelect.prototype.addChip = function (text, value, e) {\n    if (this.chipCollectionWrapper) {\n      this.getChip(text, value, e);\n    }\n  };\n\n  MultiSelect.prototype.removeChipFocus = function () {\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1 + '.' + CHIP_SELECTED);\n    removeClass(elements, CHIP_SELECTED);\n\n    if (Browser.isDevice) {\n      var closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n\n      for (var index = 0; index < closeElements.length; index++) {\n        closeElements[index].style.display = 'none';\n      }\n    }\n  };\n\n  MultiSelect.prototype.onMobileChipInteraction = function (e) {\n    var chipElem = closest(e.target, '.' + CHIP$1);\n    var chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n\n    if (this.enabled && !this.readonly) {\n      if (!chipElem.classList.contains(CHIP_SELECTED)) {\n        this.removeChipFocus();\n        chipClose.style.display = '';\n        chipElem.classList.add(CHIP_SELECTED);\n      }\n\n      this.refreshPopup();\n      e.preventDefault();\n    }\n  };\n\n  MultiSelect.prototype.multiCompiler = function (multiselectTemplate) {\n    var checkTemplate = false;\n\n    if (multiselectTemplate) {\n      try {\n        checkTemplate = selectAll(multiselectTemplate, document).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  MultiSelect.prototype.getChip = function (data, value, e) {\n    var _this = this;\n\n    var itemData = {\n      text: value,\n      value: value\n    };\n    var chip = this.createElement('span', {\n      className: CHIP$1,\n      attrs: {\n        'data-value': value,\n        'title': data\n      }\n    });\n    var compiledString;\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT$1\n    });\n    var chipClose = this.createElement('span', {\n      className: CHIP_CLOSE$1\n    });\n\n    if (this.mainData) {\n      itemData = this.getDataByValue(value);\n    }\n\n    if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n      var valuecheck = this.multiCompiler(this.valueTemplate);\n\n      if (valuecheck) {\n        compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n      } else {\n        compiledString = compile(this.valueTemplate);\n      } // eslint-disable-next-line\n\n\n      var valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n\n      if (valueCompTemp && valueCompTemp.length > 0) {\n        for (var i = 0; i < valueCompTemp.length; i++) {\n          chipContent.appendChild(valueCompTemp[i]);\n        }\n      }\n\n      this.renderReactTemplates();\n    } else if (this.enableHtmlSanitizer) {\n      chipContent.innerText = data;\n    } else {\n      chipContent.innerHTML = data;\n    }\n\n    chip.appendChild(chipContent);\n    var eventArgs = {\n      isInteracted: e ? true : false,\n      itemData: itemData,\n      e: e,\n      setClass: function (classes) {\n        addClass([chip], classes);\n      },\n      cancel: false\n    };\n    this.isPreventChange = this.isAngular && this.preventChange;\n    this.trigger('tagging', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        if (Browser.isDevice) {\n          chip.classList.add(MOBILE_CHIP);\n          append([chipClose], chip);\n          chipClose.style.display = 'none';\n          EventHandler.add(chip, 'click', _this.onMobileChipInteraction, _this);\n        } else {\n          EventHandler.add(chip, 'mousedown', _this.chipClick, _this);\n\n          if (_this.showClearButton) {\n            chip.appendChild(chipClose);\n          }\n        }\n\n        EventHandler.add(chipClose, 'mousedown', _this.onChipRemove, _this);\n\n        _this.chipCollectionWrapper.appendChild(chip);\n\n        if (!_this.changeOnBlur && e) {\n          _this.updateValueState(e, _this.value, _this.tempValues);\n        }\n      }\n    });\n  };\n\n  MultiSelect.prototype.calcPopupWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.componentWrapper.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    return width;\n  };\n\n  MultiSelect.prototype.mouseIn = function () {\n    if (this.enabled && !this.readonly) {\n      this.showOverAllClear();\n    }\n  };\n\n  MultiSelect.prototype.mouseOut = function () {\n    if (!this.inputFocus) {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n\n  MultiSelect.prototype.listOption = function (dataSource, fields) {\n    var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n    var fieldProperty = isNullOrUndefined(fields.properties) ? fields : fields.properties;\n    this.listCurrentOptions = fields.text !== null || fields.value !== null ? {\n      fields: fieldProperty,\n      showIcon: iconCss,\n      ariaAttributes: {\n        groupItemRole: 'presentation'\n      }\n    } : {\n      fields: {\n        value: 'text'\n      }\n    };\n    extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n\n    if (this.mode === 'CheckBox') {\n      this.notify('listoption', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        dataSource: dataSource,\n        fieldProperty: fieldProperty\n      });\n    }\n\n    return this.listCurrentOptions;\n  };\n\n  MultiSelect.prototype.renderPopup = function () {\n    var _this = this;\n\n    if (!this.list) {\n      _super.prototype.render.call(this);\n    }\n\n    if (!this.popupObj) {\n      if (!isNullOrUndefined(this.popupWrapper)) {\n        document.body.appendChild(this.popupWrapper);\n        var checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n\n        if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n          checkboxFilter.remove();\n          this.filterParent = null;\n        }\n\n        var overAllHeight = parseInt(this.popupHeight, 10);\n        this.popupWrapper.style.visibility = 'hidden';\n\n        if (this.headerTemplate) {\n          this.setHeaderTemplate();\n          overAllHeight -= this.header.offsetHeight;\n        }\n\n        append([this.list], this.popupWrapper);\n\n        if (this.footerTemplate) {\n          this.setFooterTemplate();\n          overAllHeight -= this.footer.offsetHeight;\n        }\n\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight -= this.selectAllHeight;\n        } else if (this.mode === 'CheckBox' && !this.showSelectAll && !this.headerTemplate && !this.footerTemplate) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight = parseInt(this.popupHeight, 10);\n        } else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight = parseInt(this.popupHeight, 10);\n\n          if (this.headerTemplate && this.header) {\n            overAllHeight -= this.header.offsetHeight;\n          }\n\n          if (this.footerTemplate && this.footer) {\n            overAllHeight -= this.footer.offsetHeight;\n          }\n        }\n\n        if (this.mode === 'CheckBox') {\n          var args = {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            popupElement: this.popupWrapper\n          };\n\n          if (this.allowFiltering) {\n            this.notify('searchBox', args);\n            overAllHeight -= this.searchBoxHeight;\n          }\n\n          addClass([this.popupWrapper], 'e-checkbox');\n        }\n\n        if (this.popupHeight !== 'auto') {\n          this.list.style.maxHeight = formatUnit(overAllHeight);\n          this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n        } else {\n          this.list.style.maxHeight = formatUnit(this.popupHeight);\n        }\n\n        this.popupObj = new Popup(this.popupWrapper, {\n          width: this.calcPopupWidth(),\n          targetType: 'relative',\n          position: {\n            X: 'left',\n            Y: 'bottom'\n          },\n          relateTo: this.overAllWrapper,\n          collision: {\n            X: 'flip',\n            Y: 'flip'\n          },\n          offsetY: 1,\n          enableRtl: this.enableRtl,\n          zIndex: this.zIndex,\n          close: function () {\n            if (_this.popupObj.element.parentElement) {\n              _this.popupObj.unwireScrollEvents(); // For restrict the page scrolling in safari browser\n\n\n              var checkboxFilterInput = _this.popupWrapper.querySelector('.' + FILTERINPUT);\n\n              if (_this.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n                checkboxFilterInput.blur();\n              }\n\n              detach(_this.popupObj.element);\n            }\n          },\n          open: function () {\n            _this.popupObj.resolveCollision();\n\n            if (!_this.isFirstClick) {\n              var ulElement = _this.list.querySelector('ul');\n\n              if (ulElement) {\n                if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== '')) {\n                  _this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                }\n              }\n\n              _this.isFirstClick = true;\n            }\n\n            _this.popupObj.wireScrollEvents();\n\n            if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== '')) {\n              _this.loadTemplate();\n            }\n\n            _this.setScrollPosition();\n\n            if (_this.allowFiltering) {\n              _this.notify('inputFocus', {\n                module: 'CheckBoxSelection',\n                enable: _this.mode === 'CheckBox',\n                value: 'focus'\n              });\n            }\n          },\n          targetExitViewport: function () {\n            if (!Browser.isDevice) {\n              _this.hidePopup();\n            }\n          }\n        });\n\n        if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n          this.notify('deviceSearchBox', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n        }\n\n        this.popupObj.close();\n        this.popupWrapper.style.visibility = '';\n      }\n    }\n  };\n\n  MultiSelect.prototype.setHeaderTemplate = function () {\n    var compiledString;\n\n    if (this.header) {\n      this.header.remove();\n    }\n\n    this.header = this.createElement('div');\n    addClass([this.header], HEADER$1);\n    var headercheck = this.multiCompiler(this.headerTemplate);\n\n    if (headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    } // eslint-disable-next-line\n\n\n    var elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n    if (elements && elements.length > 0) {\n      append(elements, this.header);\n    }\n\n    if (this.mode === 'CheckBox' && this.showSelectAll) {\n      prepend([this.header], this.popupWrapper);\n    } else {\n      append([this.header], this.popupWrapper);\n    }\n\n    EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n  };\n\n  MultiSelect.prototype.setFooterTemplate = function () {\n    var compiledString;\n\n    if (this.footer) {\n      this.footer.remove();\n    }\n\n    this.footer = this.createElement('div');\n    addClass([this.footer], FOOTER$1);\n    var footercheck = this.multiCompiler(this.footerTemplate);\n\n    if (footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    } // eslint-disable-next-line\n\n\n    var elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n    if (elements && elements.length > 0) {\n      append(elements, this.footer);\n    }\n\n    append([this.footer], this.popupWrapper);\n    EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n  };\n\n  MultiSelect.prototype.clearAll = function (e) {\n    if (this.enabled && !this.readonly) {\n      var temp = void 0;\n\n      if (this.value && this.value.length > 0) {\n        var liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n\n        if (liElement && liElement.length > 0) {\n          this.selectAllItems(false, e);\n        } else {\n          this.removeIndex = 0;\n\n          for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n            this.removeValue(temp, e, null, true);\n          }\n        }\n\n        this.selectedElementID = null;\n        this.inputElement.removeAttribute('aria-activedescendant');\n      } else {\n        this.clearAllCallback(e);\n      }\n    }\n  };\n\n  MultiSelect.prototype.clearAllCallback = function (e, isClearAll) {\n    var tempValues = this.value ? this.value.slice() : [];\n\n    if (this.mainList && this.listData && (this.allowFiltering && this.mode !== 'CheckBox' || this.allowCustomValue)) {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      this.onActionComplete(list, this.mainData);\n    }\n\n    this.focusAtFirstListItem();\n    this.updateDelimeter(this.delimiterChar, e);\n\n    if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n      this.updateDelimView();\n    }\n\n    if (this.inputElement.value !== '') {\n      this.makeTextBoxEmpty();\n      this.search(null);\n    }\n\n    this.checkPlaceholderSize();\n\n    if (this.isPopupOpen()) {\n      this.refreshPopup();\n    }\n\n    if (!this.inputFocus) {\n      if (this.changeOnBlur) {\n        this.updateValueState(e, this.value, tempValues);\n      }\n\n      if (this.mode !== 'CheckBox') {\n        this.inputElement.focus();\n      }\n    }\n\n    if (this.mode === 'CheckBox') {\n      this.refreshPlaceHolder();\n      this.refreshInputHight();\n\n      if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.updateValueState(e, this.value, this.tempValues);\n      }\n    }\n\n    if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      this.updateValueState(e, this.value, this.tempValues);\n    }\n\n    if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n    }\n\n    e.preventDefault();\n  };\n\n  MultiSelect.prototype.windowResize = function () {\n    this.refreshPopup();\n\n    if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n      this.updateDelimView();\n    }\n  };\n\n  MultiSelect.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement && e.target === formElement) {\n      var textVal = this.element.tagName === this.getNgDirective() ? null : this.element.getAttribute('data-initial-value');\n      this.text = textVal;\n    }\n  };\n\n  MultiSelect.prototype.wireEvent = function () {\n    EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n    EventHandler.add(window, 'resize', this.windowResize, this);\n    EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n    EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n    EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n\n    if (this.mode !== 'CheckBox') {\n      EventHandler.add(this.inputElement, 'input', this.onInput, this);\n    }\n\n    EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n    EventHandler.add(this.componentWrapper, 'mouseover', this.mouseIn, this);\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n    EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n    EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n  };\n\n  MultiSelect.prototype.onInput = function (e) {\n    if (this.keyDownStatus) {\n      this.isValidKey = true;\n    } else {\n      this.isValidKey = false;\n    }\n\n    this.keyDownStatus = false; // For Filtering works in mobile firefox\n\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.search(e);\n    }\n  };\n\n  MultiSelect.prototype.pasteHandler = function (event) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.expandTextbox();\n\n      _this.search(event);\n    });\n  };\n\n  MultiSelect.prototype.search = function (e) {\n    var _this = this;\n\n    this.resetFilteredData = true;\n\n    if (!isNullOrUndefined(e)) {\n      this.keyCode = e.keyCode;\n    }\n\n    if (!this.isPopupOpen() && this.openOnClick) {\n      this.showPopup(e);\n    }\n\n    this.openClick(e);\n\n    if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && e.keyCode !== 8) {\n      this.focusAtFirstListItem();\n    } else {\n      var text = this.targetElement();\n\n      if (this.allowFiltering) {\n        var eventArgs_1 = {\n          preventDefaultAction: false,\n          text: this.targetElement(),\n          updateData: function (dataSource, query, fields) {\n            if (eventArgs_1.cancel) {\n              return;\n            }\n\n            _this.isFiltered = true;\n            _this.remoteFilterAction = true;\n\n            _this.dataUpdater(dataSource, query, fields);\n          },\n          event: e,\n          cancel: false\n        };\n        this.trigger('filtering', eventArgs_1, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            if (!_this.isFiltered && !eventArgs.preventDefaultAction) {\n              _this.filterAction = true;\n\n              _this.dataUpdater(_this.dataSource, null, _this.fields);\n            }\n          }\n        });\n      } else if (this.allowCustomValue) {\n        var query = new Query();\n        query = text !== '' ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n        this.dataUpdater(this.mainData, query, this.fields);\n      } else {\n        var liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n        var activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n\n        if (activeElement && activeElement.item !== null) {\n          this.addListFocus(activeElement.item);\n          this.list.scrollTop = activeElement.item.offsetHeight * activeElement.index;\n        } else if (this.targetElement() !== '') {\n          this.removeFocus();\n        } else {\n          this.focusAtFirstListItem();\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.preRender = function () {\n    if (this.allowFiltering === null) {\n      this.allowFiltering = this.mode === 'CheckBox' ? true : false;\n    }\n\n    this.initializeData();\n    this.updateDataAttribute(this.htmlAttributes);\n\n    _super.prototype.preRender.call(this);\n  };\n\n  MultiSelect.prototype.getLocaleName = function () {\n    return 'multi-select';\n  };\n\n  MultiSelect.prototype.initializeData = function () {\n    this.mainListCollection = [];\n    this.beforePopupOpen = false;\n    this.filterAction = false;\n    this.remoteFilterAction = false;\n    this.isFirstClick = false;\n    this.mobFilter = true;\n    this.isFiltered = false;\n    this.focused = true;\n    this.initial = true;\n    this.backCommand = true;\n  };\n\n  MultiSelect.prototype.updateData = function (delimiterChar, e) {\n    var data = '';\n    var delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n    var text = [];\n    var temp;\n    var tempData = this.listData;\n    this.listData = this.mainData;\n\n    if (!isNullOrUndefined(this.hiddenElement)) {\n      this.hiddenElement.innerHTML = '';\n    }\n\n    if (!isNullOrUndefined(this.value)) {\n      var valueLength = this.value.length;\n      var hiddenElementContent = '';\n\n      for (var index = 0; index < valueLength; index++) {\n        var valueItem = this.value[index];\n        var listValue = this.findListElement(!isNullOrUndefined(this.mainList) ? this.mainList : this.ulElement, 'li', 'data-value', valueItem);\n\n        if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n          this.value.splice(index, 1);\n          index -= 1;\n          valueLength -= 1;\n        } else {\n          if (this.listData) {\n            temp = this.getTextByValue(valueItem);\n          } else {\n            temp = valueItem;\n          }\n\n          data += temp + delimiterChar + ' ';\n          text.push(temp);\n        }\n\n        hiddenElementContent += \"<option selected value=\\\"\" + valueItem + \"\\\">\" + index + \"</option>\";\n      }\n\n      if (!isNullOrUndefined(this.hiddenElement)) {\n        this.hiddenElement.innerHTML = hiddenElementContent;\n      }\n    }\n\n    this.setProperties({\n      text: text.toString()\n    }, true);\n\n    if (delim) {\n      this.updateWrapperText(this.delimiterWrapper, data);\n      this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n      this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n      this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n    }\n\n    var targetEle = e && e.target;\n    var isClearAll = targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n\n    if (!this.changeOnBlur && e && !isClearAll || this.isSelectAll) {\n      this.isSelectAll = false;\n      this.updateValueState(e, this.value, this.tempValues);\n    }\n\n    this.listData = tempData;\n    this.addValidInputClass();\n  };\n\n  MultiSelect.prototype.initialTextUpdate = function () {\n    if (!isNullOrUndefined(this.text)) {\n      var textArr = this.text.split(this.delimiterChar);\n      var textVal = [];\n\n      for (var index = 0; textArr.length > index; index++) {\n        var val = this.getValueByText(textArr[index]);\n\n        if (!isNullOrUndefined(val)) {\n          textVal.push(val);\n        } else if (this.allowCustomValue) {\n          textVal.push(textArr[index]);\n        }\n      }\n\n      if (textVal && textVal.length) {\n        this.setProperties({\n          value: textVal\n        }, true);\n      }\n    } else {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n\n  MultiSelect.prototype.renderList = function (isEmptyData) {\n    if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n      isEmptyData = true;\n    }\n\n    _super.prototype.render.call(this, null, isEmptyData);\n\n    this.unwireListEvents();\n    this.wireListEvents();\n  };\n\n  MultiSelect.prototype.initialValueUpdate = function () {\n    if (this.list) {\n      var text = void 0;\n      var element = void 0;\n      var value = void 0;\n\n      if (this.chipCollectionWrapper) {\n        this.chipCollectionWrapper.innerHTML = '';\n      }\n\n      this.removeListSelection();\n\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          value = this.value[index];\n          element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n          text = this.getTextByValue(value);\n\n          if (element && element.getAttribute('aria-selected') !== 'true' || element && element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem && (this.mode === 'Box' || this.mode === 'Default')) {\n            this.addChip(text, value);\n            this.addListSelection(element);\n          } else if (value && this.allowCustomValue) {\n            var indexItem = this.listData.length;\n            var newValue = {};\n            setValue(this.fields.text, value, newValue);\n            setValue(this.fields.value, value, newValue);\n            var noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n            this.addItem(newValue, indexItem);\n            element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n\n            if (this.popupWrapper.contains(noDataEle)) {\n              this.list.setAttribute('style', noDataEle.getAttribute('style'));\n              this.popupWrapper.replaceChild(this.list, noDataEle);\n              this.wireListEvents();\n            }\n\n            this.addChip(text, value);\n            this.addListSelection(element);\n          }\n        }\n      }\n\n      if (this.mode === 'CheckBox') {\n        this.updateDelimView();\n\n        if (this.changeOnBlur) {\n          this.updateValueState(null, this.value, this.tempValues);\n        }\n\n        this.updateDelimeter(this.delimiterChar);\n        this.refreshInputHight();\n      } else {\n        this.updateDelimeter(this.delimiterChar);\n      }\n\n      if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n        this.notify('checkSelectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'uncheck'\n        });\n      }\n\n      if (this.mode === 'Box' || this.mode === 'Default' && this.inputFocus) {\n        this.chipCollectionWrapper.style.display = '';\n      } else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n        this.showDelimWrapper();\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.updateActionCompleteData = function (li, item) {\n    if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n      this.mainList = this.ulElement;\n\n      if (this.hideSelectedItem) {\n        addClass([li], HIDE_LIST);\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.updateAddItemList = function (list, itemCount) {\n    if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n      this.list = list;\n      this.mainList = this.ulElement = list.querySelector('ul');\n      remove(this.popupWrapper.querySelector('.e-content'));\n      this.popupObj = null;\n      this.renderPopup();\n    } else if (this.allowCustomValue) {\n      this.list = list;\n      this.mainList = this.ulElement = list.querySelector('ul');\n    }\n  };\n\n  MultiSelect.prototype.updateDataList = function () {\n    if (this.mainList && this.ulElement && !(this.isFiltered || this.filterAction || this.targetElement().trim())) {\n      var isDynamicGroupItemUpdate = this.mainList.childElementCount < this.ulElement.childElementCount;\n      var isReactTemplateUpdate = this.ulElement.childElementCount > 0 && this.ulElement.children[0].childElementCount > 0 && this.mainList.children[0].childElementCount < this.ulElement.children[0].childElementCount;\n      var isAngularTemplateUpdate = this.itemTemplate && this.ulElement.childElementCount > 0 && !(this.ulElement.childElementCount < this.mainList.childElementCount) && (this.ulElement.children[0].childElementCount > 0 || this.fields.groupBy && this.ulElement.children[1] && this.ulElement.children[1].childElementCount > 0);\n\n      if (isDynamicGroupItemUpdate || isReactTemplateUpdate || isAngularTemplateUpdate) {\n        //EJ2-57748 - for this task, we prevent the ul element cloning ( this.mainList = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n        this.mainList = this.ulElement;\n      }\n    }\n  };\n\n  MultiSelect.prototype.isValidLI = function (li) {\n    return li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) && li.classList.contains(dropDownBaseClasses.li);\n  };\n\n  MultiSelect.prototype.updateListSelection = function (li, e, length) {\n    var customVal = li.getAttribute('data-value');\n    var value = this.getFormattedValue(customVal);\n\n    if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n      value = customVal;\n    }\n\n    this.removeHover();\n\n    if (!this.value || this.value.indexOf(value) === -1) {\n      this.dispatchSelect(value, e, li, li.getAttribute('aria-selected') === 'true', length);\n    } else {\n      this.removeValue(value, e, length);\n    }\n  };\n\n  MultiSelect.prototype.updateListSelectEventCallback = function (value, li, e) {\n    var _this = this;\n\n    var text = this.getTextByValue(value);\n\n    if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n      var temp_1 = li.cloneNode(true);\n      var fieldValue = this.fields.value ? this.fields.value : 'value';\n\n      if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n        value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n      }\n\n      var data_1 = this.getDataByValue(value);\n      var eventArgs = {\n        newData: data_1,\n        cancel: false\n      };\n      this.trigger('customValueSelection', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          append([temp_1], _this.mainList);\n\n          _this.mainData.push(data_1);\n\n          _this.remoteCustomValue = false;\n\n          _this.addValue(value, text, e);\n        }\n      });\n    } else {\n      this.remoteCustomValue = false;\n      this.addValue(value, text, e);\n    }\n  };\n\n  MultiSelect.prototype.removeListSelection = function () {\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    var selectedItems = this.list.querySelectorAll('.' + className);\n    var temp = selectedItems.length;\n\n    if (selectedItems && selectedItems.length) {\n      removeClass(selectedItems, className);\n\n      while (temp > 0) {\n        selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n        temp--;\n      }\n    }\n\n    if (!isNullOrUndefined(this.mainList)) {\n      var selectItems = this.mainList.querySelectorAll('.' + className);\n      var temp1 = selectItems.length;\n\n      if (selectItems && selectItems.length) {\n        removeClass(selectItems, className);\n\n        while (temp1 > 0) {\n          selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n\n          if (this.mode === 'CheckBox') {\n            if (selectedItems && selectedItems.length > temp1 - 1) {\n              removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n            }\n\n            removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n          }\n\n          temp1--;\n        }\n      }\n    }\n  };\n\n  MultiSelect.prototype.removeHover = function () {\n    var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n    if (hoveredItem && hoveredItem.length) {\n      removeClass(hoveredItem, dropDownBaseClasses.hover);\n    }\n  };\n\n  MultiSelect.prototype.removeFocus = function () {\n    if (this.list && this.mainList) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n      var mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.focus);\n        removeClass(mainlist, dropDownBaseClasses.focus);\n      }\n    }\n  };\n\n  MultiSelect.prototype.addListHover = function (li) {\n    if (this.enabled && this.isValidLI(li)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    } else {\n      if (li !== null && li.classList.contains('e-list-group-item') && this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        this.removeHover();\n        addClass([li], dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  MultiSelect.prototype.addListFocus = function (element) {\n    if (this.enabled && this.isValidLI(element)) {\n      this.removeFocus();\n      addClass([element], dropDownBaseClasses.focus);\n      this.updateAriaActiveDescendant();\n    } else {\n      if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        addClass([element], dropDownBaseClasses.focus);\n        this.updateAriaActiveDescendant();\n      }\n    }\n  };\n\n  MultiSelect.prototype.addListSelection = function (element, mainElement) {\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n\n    if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n      addClass([element], className);\n      this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n      element.setAttribute('aria-selected', 'true');\n\n      if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n        var ariaCheck = element.getElementsByClassName('e-check').length;\n\n        if (ariaCheck === 0) {\n          this.notify('updatelist', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            li: element,\n            e: this\n          });\n        }\n      }\n\n      this.notify('activeList', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        li: element,\n        e: this\n      });\n\n      if (this.chipCollectionWrapper) {\n        this.removeChipSelection();\n      }\n\n      this.selectedElementID = element.id;\n    }\n  };\n\n  MultiSelect.prototype.updateDelimeter = function (delimChar, e) {\n    this.updateData(delimChar, e);\n  };\n\n  MultiSelect.prototype.onMouseClick = function (e) {\n    var _this = this;\n\n    this.keyCode = null;\n    this.scrollFocusStatus = false;\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n    var headerLi = closest(target, '.' + dropDownBaseClasses.group);\n\n    if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n      target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild : e.target;\n\n      if (target.classList.contains('e-check')) {\n        this.selectAllItem(false, e);\n        target.classList.remove('e-check');\n        target.classList.remove('e-stop');\n        closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n        target.setAttribute('aria-selected', 'false');\n      } else {\n        this.selectAllItem(true, e);\n        target.classList.remove('e-stop');\n        target.classList.add('e-check');\n        closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n        target.setAttribute('aria-selected', 'true');\n      }\n\n      this.refreshSelection();\n      this.checkSelectAll();\n    } else {\n      if (this.isValidLI(li)) {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n\n        if (li.classList.contains('e-active')) {\n          limit = limit - 1;\n        }\n\n        if (limit < this.maximumSelectionLength) {\n          this.updateListSelection(li, e);\n          this.checkPlaceholderSize();\n          this.addListFocus(li);\n\n          if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n            if (this.mode !== 'CheckBox') {\n              this.focusAtLastListItem(li.getAttribute('data-value'));\n              this.refreshSelection();\n            }\n          } else {\n            this.makeTextBoxEmpty();\n          }\n        }\n\n        if (this.mode === 'CheckBox') {\n          this.updateDelimView();\n\n          if (this.value && this.value.length > 50) {\n            setTimeout(function () {\n              _this.updateDelimeter(_this.delimiterChar, e);\n            }, 0);\n          } else {\n            this.updateDelimeter(this.delimiterChar, e);\n          }\n\n          this.refreshInputHight();\n        } else {\n          this.updateDelimeter(this.delimiterChar, e);\n        }\n\n        this.checkSelectAll();\n        this.refreshPopup();\n\n        if (this.hideSelectedItem) {\n          this.focusAtFirstListItem();\n        }\n\n        if (this.closePopupOnSelect) {\n          this.hidePopup(e);\n        } else {\n          e.preventDefault();\n        }\n\n        this.makeTextBoxEmpty();\n        this.findGroupStart(target);\n\n        if (this.mode !== 'CheckBox') {\n          this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n        }\n      } else {\n        e.preventDefault();\n      }\n\n      this.refreshPlaceHolder();\n      this.deselectHeader();\n    }\n  };\n\n  MultiSelect.prototype.findGroupStart = function (target) {\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      var count = 0;\n      var liChecked = 0;\n      var liUnchecked = 0;\n      var groupValues = void 0;\n\n      if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n        while (!target.getElementsByClassName('e-frame').length) {\n          target = target.parentElement;\n        }\n      }\n\n      if (target.classList.contains('e-frame')) {\n        target = target.parentElement.parentElement;\n      }\n\n      groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n      groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n\n      while (!target.classList.contains('e-list-group-item')) {\n        if (target.classList.contains('e-list-icon')) {\n          target = target.parentElement;\n        }\n\n        target = target.previousElementSibling;\n\n        if (target == null) {\n          break;\n        }\n      }\n\n      this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n    }\n  };\n\n  MultiSelect.prototype.findGroupAttrtibutes = function (listElement, checked, unChecked, count, position) {\n    while (!listElement.classList.contains('e-list-group-item')) {\n      if (listElement.classList.contains('e-list-icon')) {\n        listElement = listElement.parentElement;\n      }\n\n      if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') && listElement.classList.contains('e-list-item')) {\n        checked++;\n      } else if (listElement.classList.contains('e-list-item')) {\n        unChecked++;\n      }\n\n      count++;\n      listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n\n      if (listElement == null) {\n        break;\n      }\n    }\n\n    return [checked, unChecked, count];\n  };\n\n  MultiSelect.prototype.updateCheckBox = function (groupHeader, checked, unChecked, count) {\n    if (groupHeader === null) {\n      return;\n    }\n\n    var checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n\n    if (count === checked) {\n      checkBoxElement.classList.remove('e-stop');\n      checkBoxElement.classList.add('e-check');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      groupHeader.setAttribute('aria-selected', 'true');\n    } else if (count === unChecked) {\n      checkBoxElement.classList.remove('e-check');\n      checkBoxElement.classList.remove('e-stop');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n      groupHeader.setAttribute('aria-selected', 'false');\n    } else if (this.maximumSelectionLength === checked - 1) {\n      checkBoxElement.classList.remove('e-stop');\n      groupHeader.setAttribute('aria-selected', 'true');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      checkBoxElement.classList.add('e-check');\n    } else {\n      checkBoxElement.classList.remove('e-check');\n      checkBoxElement.classList.add('e-stop');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      groupHeader.setAttribute('aria-selected', 'false');\n    }\n  };\n\n  MultiSelect.prototype.deselectHeader = function () {\n    var limit = this.value && this.value.length ? this.value.length : 0;\n    var collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n\n    if (limit < this.maximumSelectionLength) {\n      removeClass(collection, 'e-disable');\n    }\n\n    if (limit === this.maximumSelectionLength) {\n      addClass(collection, 'e-disable');\n    }\n  };\n\n  MultiSelect.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n\n    if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy) && this.enableGroupCheckBox) {\n      currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n    }\n\n    this.addListHover(currentLi);\n  };\n\n  MultiSelect.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n\n  MultiSelect.prototype.onListMouseDown = function (e) {\n    e.preventDefault();\n    this.scrollFocusStatus = true;\n  };\n\n  MultiSelect.prototype.onDocumentClick = function (e) {\n    if (this.mode !== 'CheckBox') {\n      var target = e.target;\n\n      if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) && !this.overAllWrapper.contains(e.target)) {\n        this.scrollFocusStatus = false;\n      } else {\n        this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.inputElement;\n      }\n    }\n  };\n\n  MultiSelect.prototype.wireListEvents = function () {\n    if (!isNullOrUndefined(this.list)) {\n      EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n      EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n      EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n      EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n  };\n\n  MultiSelect.prototype.unwireListEvents = function () {\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n\n    if (this.list) {\n      EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n      EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n      EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n      EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    }\n  };\n\n  MultiSelect.prototype.hideOverAllClear = function () {\n    if (!this.value || !this.value.length || this.inputElement.value === '') {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n\n  MultiSelect.prototype.showOverAllClear = function () {\n    if ((this.value && this.value.length || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n      this.overAllClear.style.display = '';\n    } else {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n  /**\n   * Sets the focus to widget for interaction.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.focusIn = function () {\n    if (document.activeElement !== this.inputElement && this.enabled) {\n      this.inputElement.focus();\n    }\n  };\n  /**\n   * Remove the focus from widget, if the widget is in focus state.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.focusOut = function () {\n    if (document.activeElement === this.inputElement && this.enabled) {\n      this.inputElement.blur();\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      var filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n\n      if (this.overAllClear.style.display !== 'none' || filterClear) {\n        this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n      } else {\n        this.spinnerElement = this.createElement('span', {\n          className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1\n        });\n        this.componentWrapper.appendChild(this.spinnerElement);\n      }\n\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      addClass([this.spinnerElement], DISABLE_ICON);\n      showSpinner(this.spinnerElement);\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], DISABLE_ICON);\n\n      if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n        detach(this.spinnerElement);\n      } else {\n        this.spinnerElement.innerHTML = '';\n      }\n\n      this.spinnerElement = null;\n    }\n  };\n\n  MultiSelect.prototype.updateWrapperText = function (wrapperType, wrapperData) {\n    if (this.valueTemplate || !this.enableHtmlSanitizer) {\n      wrapperType.innerHTML = wrapperData;\n    } else {\n      wrapperType.innerText = SanitizeHtmlHelper.sanitize(wrapperData);\n    }\n  };\n\n  MultiSelect.prototype.updateDelimView = function () {\n    if (this.delimiterWrapper) {\n      this.hideDelimWrapper();\n    }\n\n    if (this.chipCollectionWrapper) {\n      this.chipCollectionWrapper.style.display = 'none';\n    }\n\n    if (!isNullOrUndefined(this.viewWrapper)) {\n      this.viewWrapper.style.display = '';\n      this.viewWrapper.style.width = '';\n      this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n    }\n\n    if (this.value && this.value.length) {\n      var data = '';\n      var temp = void 0;\n      var tempData = void 0;\n      var tempIndex = 1;\n      var wrapperleng = void 0;\n      var remaining = void 0;\n      var downIconWidth = 0;\n      var overAllContainer = void 0;\n      this.updateWrapperText(this.viewWrapper, data);\n      var l10nLocale = {\n        noRecordsTemplate: 'No records found',\n        actionFailureTemplate: 'Request failed',\n        overflowCountTemplate: '+${count} more..',\n        totalCountTemplate: '${count} selected'\n      };\n      var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n\n      if (l10n.getConstant('actionFailureTemplate') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.locale);\n      }\n\n      if (l10n.getConstant('noRecordsTemplate') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.locale);\n      }\n\n      var remainContent = l10n.getConstant('overflowCountTemplate');\n      var totalContent = l10n.getConstant('totalCountTemplate');\n      var raminElement = this.createElement('span', {\n        className: REMAIN_WRAPPER$1\n      });\n      var remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n      raminElement.innerText = remainCompildTemp;\n      this.viewWrapper.appendChild(raminElement);\n      this.renderReactTemplates();\n      var remainSize = raminElement.offsetWidth;\n      remove(raminElement);\n\n      if (this.showDropDownIcon) {\n        downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n      }\n\n      this.checkClearIconWidth();\n\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          data += index === 0 ? '' : this.delimiterChar + ' ';\n          temp = this.getOverflowVal(index);\n          data += temp;\n          temp = this.viewWrapper.innerHTML;\n          this.updateWrapperText(this.viewWrapper, data);\n          wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n          overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n\n          if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n            if (tempData !== undefined && tempData !== '') {\n              temp = tempData;\n              index = tempIndex + 1;\n            }\n\n            this.updateWrapperText(this.viewWrapper, temp);\n            remaining = this.value.length - index;\n            wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n\n            while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.innerHTML !== '') {\n              var textArr = [];\n              this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n              remaining = this.value.length;\n              wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n            }\n\n            break;\n          } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n            tempData = data;\n            tempIndex = index;\n          } else if (index === 0) {\n            tempData = '';\n            tempIndex = -1;\n          }\n        }\n      }\n\n      if (remaining > 0) {\n        var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n        this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n        this.updateRemainWidth(this.viewWrapper, totalWidth);\n        this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n      }\n    } else {\n      if (!isNullOrUndefined(this.viewWrapper)) {\n        this.viewWrapper.innerHTML = '';\n        this.viewWrapper.style.display = 'none';\n      }\n    }\n  };\n\n  MultiSelect.prototype.checkClearIconWidth = function () {\n    if (this.showClearButton) {\n      this.clearIconWidth = this.overAllClear.offsetWidth;\n    }\n  };\n\n  MultiSelect.prototype.updateRemainWidth = function (viewWrapper, totalWidth) {\n    if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < viewWrapper.offsetWidth + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10) + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)) {\n      viewWrapper.style.width = totalWidth + 'px';\n    }\n  };\n\n  MultiSelect.prototype.updateRemainTemplate = function (raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n    if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n      viewWrapper.removeChild(viewWrapper.firstChild);\n    }\n\n    raminElement.innerHTML = '';\n    var remainTemp = remainContent.replace('${count}', remaining.toString());\n    var totalTemp = totalContent.replace('${count}', remaining.toString());\n    raminElement.innerText = viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 ? remainTemp : totalTemp;\n\n    if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n      viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n    } else {\n      viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n      this.updateRemainWidth(viewWrapper, totalWidth);\n    }\n\n    return raminElement;\n  };\n\n  MultiSelect.prototype.updateRemainingText = function (raminElement, downIconWidth, remaining, remainContent, totalContent) {\n    var overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n    var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n\n    if (wrapperleng + downIconWidth >= overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n      while (wrapperleng + downIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n        var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n        textArr.pop();\n        this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n\n        if (this.viewWrapper.firstChild.nodeValue === '') {\n          this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n        }\n\n        remaining++;\n        wrapperleng = this.viewWrapper.offsetWidth;\n      }\n\n      var totalWidth = overAllContainer - downIconWidth;\n      this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n    }\n  };\n\n  MultiSelect.prototype.getOverflowVal = function (index) {\n    var temp;\n\n    if (this.mainData && this.mainData.length) {\n      if (this.mode === 'CheckBox') {\n        var newTemp = this.listData;\n        this.listData = this.mainData;\n        temp = this.getTextByValue(this.value[index]);\n        this.listData = newTemp;\n      } else {\n        temp = this.getTextByValue(this.value[index]);\n      }\n    } else {\n      temp = this.value[index];\n    }\n\n    return temp;\n  };\n\n  MultiSelect.prototype.unWireEvent = function () {\n    if (!isNullOrUndefined(this.componentWrapper)) {\n      EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n    }\n\n    EventHandler.remove(window, 'resize', this.windowResize);\n\n    if (!isNullOrUndefined(this.inputElement)) {\n      EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n      EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n\n      if (this.mode !== 'CheckBox') {\n        EventHandler.remove(this.inputElement, 'input', this.onInput);\n      }\n\n      EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n      var formElement = closest(this.inputElement, 'form');\n\n      if (formElement) {\n        EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n      }\n\n      EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n    }\n\n    if (!isNullOrUndefined(this.componentWrapper)) {\n      EventHandler.remove(this.componentWrapper, 'mouseover', this.mouseIn);\n      EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n    }\n\n    if (!isNullOrUndefined(this.overAllClear)) {\n      EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n    }\n\n    if (!isNullOrUndefined(this.inputElement)) {\n      EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n    }\n  };\n\n  MultiSelect.prototype.selectAllItem = function (state, event, list) {\n    var li;\n\n    if (!isNullOrUndefined(this.list)) {\n      li = this.list.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n    }\n\n    if (this.value && this.value.length && event && event.target && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n      li = this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n    }\n\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      var target = event ? this.groupTemplate ? closest(event.target, '.e-list-group-item') : event.target : null;\n      target = event && event.keyCode === 32 ? list : target;\n      target = target && target.classList.contains('e-frame') ? target.parentElement.parentElement : target;\n\n      if (target && target.classList.contains('e-list-group-item')) {\n        var listElement = target.nextElementSibling;\n\n        if (isNullOrUndefined(listElement)) {\n          return;\n        }\n\n        while (listElement.classList.contains('e-list-item')) {\n          if (state) {\n            if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n              var selectionLimit = this.value && this.value.length ? this.value.length : 0;\n\n              if (listElement.classList.contains('e-active')) {\n                selectionLimit -= 1;\n              }\n\n              if (selectionLimit < this.maximumSelectionLength) {\n                this.updateListSelection(listElement, event);\n              }\n            }\n          } else {\n            if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n              this.updateListSelection(listElement, event);\n            }\n          }\n\n          listElement = listElement.nextElementSibling;\n\n          if (listElement == null) {\n            break;\n          }\n        }\n\n        if (target.classList.contains('e-list-group-item')) {\n          var focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n\n          if (focusedElement) {\n            focusedElement.classList.remove('e-item-focus');\n          }\n\n          if (state) {\n            target.classList.add('e-active');\n          } else {\n            target.classList.remove('e-active');\n          }\n\n          target.classList.add('e-item-focus');\n          this.updateAriaActiveDescendant();\n        }\n\n        this.textboxValueUpdate();\n        this.checkPlaceholderSize();\n\n        if (!this.changeOnBlur && event) {\n          this.updateValueState(event, this.value, this.tempValues);\n        }\n      } else {\n        this.updateValue(event, li, state);\n      }\n    } else {\n      this.updateValue(event, li, state);\n    }\n\n    this.addValidInputClass();\n  };\n\n  MultiSelect.prototype.updateValue = function (event, li, state) {\n    var _this = this;\n\n    var length = li.length;\n    var beforeSelectArgs = {\n      event: event,\n      items: state ? li : [],\n      itemData: state ? this.listData : [],\n      isInteracted: event ? true : false,\n      isChecked: state,\n      preventSelectEvent: false\n    };\n    this.trigger('beforeSelectAll', beforeSelectArgs);\n\n    if (li && li.length) {\n      var index_1 = 0;\n      var count_1 = 0;\n\n      if (this.enableGroupCheckBox) {\n        count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n      } else {\n        count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n      }\n\n      if (!beforeSelectArgs.preventSelectEvent) {\n        while (index_1 < length && index_1 <= 50 && index_1 < count_1) {\n          this.updateListSelection(li[index_1], event, length - index_1);\n\n          if (this.enableGroupCheckBox) {\n            this.findGroupStart(li[index_1]);\n          }\n\n          index_1++;\n        }\n\n        if (length > 50) {\n          setTimeout(function () {\n            while (index_1 < length && index_1 < count_1) {\n              _this.updateListSelection(li[index_1], event, length - index_1);\n\n              if (_this.enableGroupCheckBox) {\n                _this.findGroupStart(li[index_1]);\n              }\n\n              index_1++;\n            }\n\n            _this.updatedataValueItems(event);\n\n            if (!_this.changeOnBlur) {\n              _this.updateValueState(event, _this.value, _this.tempValues);\n\n              _this.isSelectAll = _this.isSelectAll ? !_this.isSelectAll : _this.isSelectAll;\n            }\n\n            _this.updateHiddenElement();\n          }, 0);\n        }\n      } else {\n        for (var i = 0; i < li.length && i < count_1; i++) {\n          this.removeHover();\n          var customVal = li[i].getAttribute('data-value');\n          var value = this.getFormattedValue(customVal);\n          var mainElement = this.mainList ? this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n\n          if (state) {\n            this.value = !this.value ? [] : this.value;\n\n            if (this.value.indexOf(value) < 0) {\n              this.setProperties({\n                value: [].concat([], this.value, [value])\n              }, true);\n            }\n\n            this.removeFocus();\n            this.addListSelection(li[i], mainElement);\n            this.updateChipStatus();\n            this.checkMaxSelection();\n          } else {\n            this.removeAllItems(value, event, false, li[i], mainElement);\n          }\n\n          if (this.enableGroupCheckBox) {\n            this.findGroupStart(li[i]);\n          }\n        }\n\n        if (!state) {\n          var limit = this.value && this.value.length ? this.value.length : 0;\n\n          if (limit < this.maximumSelectionLength) {\n            var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n            removeClass(collection, 'e-disable');\n          }\n        }\n\n        var args = {\n          event: event,\n          items: state ? li : [],\n          itemData: state ? this.listData : [],\n          isInteracted: event ? true : false,\n          isChecked: state\n        };\n        this.trigger('selectedAll', args);\n      }\n    }\n\n    this.updatedataValueItems(event);\n    this.checkPlaceholderSize();\n\n    if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n      if (!this.changeOnBlur) {\n        this.updateValueState(event, this.value, this.tempValues);\n        this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n      }\n\n      this.updateHiddenElement();\n    }\n  };\n\n  MultiSelect.prototype.updateHiddenElement = function () {\n    var _this = this;\n\n    var hiddenValue = '';\n    var wrapperText = '';\n    var data = '';\n    var text = [];\n\n    if (this.mode === 'CheckBox') {\n      this.value.map(function (value, index) {\n        hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n\n        if (_this.listData) {\n          data = _this.getTextByValue(value);\n        } else {\n          data = value;\n        }\n\n        wrapperText += data + _this.delimiterChar + ' ';\n        text.push(data);\n      });\n      this.hiddenElement.innerHTML = hiddenValue;\n      this.updateWrapperText(this.delimiterWrapper, wrapperText);\n      this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n      this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n      this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n      this.setProperties({\n        text: text.toString()\n      }, true);\n      this.refreshInputHight();\n      this.refreshPlaceHolder();\n    }\n  };\n\n  MultiSelect.prototype.updatedataValueItems = function (event) {\n    this.deselectHeader();\n    this.textboxValueUpdate(event);\n  };\n\n  MultiSelect.prototype.textboxValueUpdate = function (event) {\n    var isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent') || closest(event.target, '.e-close-hooker'));\n\n    if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n      this.updateDelimView();\n    } else {\n      this.searchWrapper.classList.remove(ZERO_SIZE);\n    }\n\n    if (this.mode === 'CheckBox') {\n      this.updateDelimView();\n\n      if (!(isRemoveAll || this.isSelectAll)) {\n        this.updateDelimeter(this.delimiterChar, event);\n      }\n\n      this.refreshInputHight();\n    } else {\n      this.updateDelimeter(this.delimiterChar, event);\n    }\n\n    this.refreshPlaceHolder();\n  };\n\n  MultiSelect.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MultiSelect.prototype.updateDataSource = function (prop) {\n    if (isNullOrUndefined(this.list)) {\n      this.renderPopup();\n    } else {\n      this.resetList(this.dataSource);\n    }\n\n    if (this.value && this.value.length) {\n      this.setProperties({\n        'value': this.value\n      });\n      this.refreshSelection();\n    }\n  };\n\n  MultiSelect.prototype.onLoadSelect = function () {\n    this.setDynValue = true;\n    this.renderPopup();\n  };\n\n  MultiSelect.prototype.selectAllItems = function (state, event) {\n    var _this = this;\n\n    if (isNullOrUndefined(this.list)) {\n      this.selectAllAction = function () {\n        if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n          var args = {\n            module: 'CheckBoxSelection',\n            enable: _this.mode === 'CheckBox',\n            value: state ? 'check' : 'uncheck'\n          };\n\n          _this.notify('checkSelectAll', args);\n        }\n\n        _this.selectAllItem(state, event);\n\n        _this.selectAllAction = null;\n      };\n\n      _super.prototype.render.call(this);\n    } else {\n      this.selectAllAction = null;\n\n      if (this.mode === 'CheckBox' && this.showSelectAll) {\n        var args = {\n          value: state ? 'check' : 'uncheck',\n          enable: this.mode === 'CheckBox',\n          module: 'CheckBoxSelection'\n        };\n        this.notify('checkSelectAll', args);\n      }\n\n      this.selectAllItem(state, event);\n    }\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n\n\n  MultiSelect.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n   * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n      if (this.resetFilteredData) {\n        // The filtered data is not being reset in the component after the user focuses out.\n        this.resetMainList = !this.resetMainList ? this.mainList : this.resetMainList;\n        this.resetFilteredData = false;\n      }\n\n      this.mainList = null;\n      this.mainData = null;\n      this.isFirstClick = false;\n      this.isDynamicDataChange = true;\n    }\n\n    if (this.getModuleName() === 'multiselect') {\n      this.filterAction = false;\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          if (this.mode === 'CheckBox' && this.showSelectAll) {\n            if (!isNullOrUndefined(this.popupObj)) {\n              this.popupObj.destroy();\n              this.popupObj = null;\n            }\n\n            this.renderPopup();\n          }\n\n          break;\n\n        case 'htmlAttributes':\n          this.updateHTMLAttribute();\n          break;\n\n        case 'showClearButton':\n          this.updateClearButton(newProp.showClearButton);\n          break;\n\n        case 'text':\n          this.updateVal(this.value, this.value, 'text');\n          break;\n\n        case 'value':\n          this.updateVal(this.value, oldProp.value, 'value');\n          this.addValidInputClass();\n\n          if (!this.closePopupOnSelect && this.isPopupOpen()) {\n            this.refreshPopup();\n          }\n\n          this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n          break;\n\n        case 'width':\n          this.setWidth(newProp.width);\n          this.popupObj.setProperties({\n            width: this.calcPopupWidth()\n          });\n          break;\n\n        case 'placeholder':\n          this.refreshPlaceHolder();\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this.allowFiltering) {\n            this.notify('filterBarPlaceholder', {\n              filterBarPlaceholder: newProp.filterBarPlaceholder\n            });\n          }\n\n          break;\n\n        case 'delimiterChar':\n          if (this.mode !== 'Box') {\n            this.updateDelimView();\n          }\n\n          this.updateData(newProp.delimiterChar);\n          break;\n\n        case 'cssClass':\n          this.updateOldPropCssClass(oldProp.cssClass);\n          this.updateCssClass();\n          this.calculateWidth();\n          break;\n\n        case 'enableRtl':\n          this.enableRTL(newProp.enableRtl);\n\n          _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n\n          break;\n\n        case 'readonly':\n          this.updateReadonly(newProp.readonly);\n          this.hidePopup();\n          break;\n\n        case 'enabled':\n          this.hidePopup();\n          this.enable(newProp.enabled);\n          break;\n\n        case 'showSelectAll':\n          if (this.popupObj) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n          }\n\n          this.renderPopup();\n          break;\n\n        case 'showDropDownIcon':\n          this.dropDownIcon();\n          break;\n\n        case 'floatLabelType':\n          this.setFloatLabelType();\n          this.addValidInputClass();\n          Input.createSpanElement(this.overAllWrapper, this.createElement);\n          this.calculateWidth();\n\n          if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n          }\n\n          break;\n\n        case 'enableSelectionOrder':\n          break;\n\n        case 'selectAllText':\n          this.notify('selectAllText', false);\n          break;\n\n        case 'popupHeight':\n          if (this.popupObj) {\n            var overAllHeight = parseInt(this.popupHeight, 10);\n\n            if (this.popupHeight !== 'auto') {\n              this.list.style.maxHeight = formatUnit(overAllHeight);\n              this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n            } else {\n              this.list.style.maxHeight = formatUnit(this.popupHeight);\n            }\n          }\n\n          break;\n\n        case 'headerTemplate':\n        case 'footerTemplate':\n          this.reInitializePoup();\n          break;\n\n        case 'allowFiltering':\n          if (this.mode === 'CheckBox' && this.popupObj) {\n            this.reInitializePoup();\n          }\n\n          this.updateSelectElementData(this.allowFiltering);\n          break;\n\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var msProps = this.getPropObject(prop, newProp, oldProp);\n\n            _super.prototype.onPropertyChanged.call(this, msProps.newProperty, msProps.oldProperty);\n          }\n          break;\n      }\n    }\n  };\n\n  MultiSelect.prototype.reInitializePoup = function () {\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      this.popupObj = null;\n    }\n\n    this.renderPopup();\n  };\n\n  MultiSelect.prototype.presentItemValue = function (ulElement) {\n    var valuecheck = [];\n\n    for (var i = 0; i < this.value.length; i++) {\n      var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, 'li', 'data-value', this.value[i]);\n\n      if (!checkEle) {\n        valuecheck.push(this.value[i]);\n      }\n    }\n\n    return valuecheck;\n  };\n\n  MultiSelect.prototype.addNonPresentItems = function (valuecheck, ulElement, list, event) {\n    var _this = this;\n\n    this.dataSource.executeQuery(this.getForQuery(valuecheck)).then(function (e) {\n      if (e.result.length > 0) {\n        _this.addItem(e.result, list.length);\n      }\n\n      _this.updateActionList(ulElement, list, event);\n    });\n  };\n\n  MultiSelect.prototype.updateVal = function (newProp, oldProp, prop) {\n    if (!this.list) {\n      this.onLoadSelect();\n    } else if (this.dataSource instanceof DataManager && (!this.listData || !(this.mainList && this.mainData))) {\n      this.onLoadSelect();\n    } else {\n      var valuecheck = [];\n\n      if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n        valuecheck = this.presentItemValue(this.ulElement);\n      }\n\n      if (prop == 'value' && valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value) && this.listData != null) {\n        this.mainData = null;\n        this.setDynValue = true;\n        this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n      } else {\n        if (prop === 'text') {\n          this.initialTextUpdate();\n          newProp = this.value;\n        }\n\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n          this.tempValues = oldProp;\n        } // eslint-disable-next-line\n\n\n        if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus && this.isPopupOpen() && this.mainData !== this.listData) {\n          var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n          this.onActionComplete(list, this.mainData);\n        }\n\n        this.initialValueUpdate();\n\n        if (this.mode !== 'Box' && !this.inputFocus) {\n          this.updateDelimView();\n        }\n\n        if (!this.inputFocus) {\n          this.refreshInputHight();\n        }\n\n        this.refreshPlaceHolder();\n\n        if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n          this.updateValueState(null, newProp, oldProp);\n        }\n\n        this.checkPlaceholderSize();\n      }\n    }\n\n    if (!this.changeOnBlur) {\n      this.updateValueState(null, newProp, oldProp);\n    }\n  };\n  /**\n   * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Hides the popup, if the popup in a open state.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.hidePopup = function (e) {\n    var _this = this;\n\n    var delay = 100;\n\n    if (this.isPopupOpen()) {\n      var animModel = {\n        name: 'FadeOut',\n        duration: 100,\n        delay: delay ? delay : 0\n      };\n      var eventArgs = {\n        popup: this.popupObj,\n        cancel: false,\n        animation: animModel,\n        event: e || null\n      };\n      this.trigger('close', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          if (_this.fields.groupBy && _this.mode !== 'CheckBox' && _this.fixedHeaderElement) {\n            remove(_this.fixedHeaderElement);\n            _this.fixedHeaderElement = null;\n          }\n\n          _this.beforePopupOpen = false;\n\n          _this.overAllWrapper.classList.remove(iconAnimation);\n\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n\n          attributes(_this.inputElement, {\n            'aria-expanded': 'false'\n          });\n\n          _this.inputElement.removeAttribute('aria-owns');\n\n          _this.inputElement.removeAttribute('aria-activedescendant');\n\n          if (_this.allowFiltering) {\n            _this.notify('inputFocus', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox',\n              value: 'clear'\n            });\n          }\n\n          _this.popupObj.hide();\n\n          removeClass([document.body, _this.popupObj.element], 'e-popup-full-page');\n          EventHandler.remove(_this.list, 'keydown', _this.onKeyDown);\n        }\n      });\n    }\n  };\n  /**\n   * Shows the popup, if the popup in a closed state.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.showPopup = function (e) {\n    var _this = this;\n\n    if (!this.enabled) {\n      return;\n    }\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        if (!_this.ulElement) {\n          _this.beforePopupOpen = true;\n\n          _super.prototype.render.call(_this, e);\n\n          if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n            _this.notify('popupFullScreen', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox'\n            });\n          }\n\n          return;\n        }\n\n        if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n          _this.notify('popupFullScreen', {\n            module: 'CheckBoxSelection',\n            enable: _this.mode === 'CheckBox'\n          });\n        }\n\n        var mainLiLength = _this.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n\n        var liLength = _this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n\n        if (mainLiLength > 0 && mainLiLength === liLength && liLength === _this.mainData.length && !(_this.targetElement() !== '' && _this.allowCustomValue)) {\n          _this.beforePopupOpen = false;\n          return;\n        }\n\n        _this.onPopupShown(e);\n      }\n    });\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected/deselected.\n   * parameter\n   * `true`   - Selects entire list items.\n   * `false`  - Un Selects entire list items.\n   *\n   * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.selectAll = function (state) {\n    this.isSelectAll = true;\n    this.selectAllItems(state);\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  MultiSelect.prototype.getModuleName = function () {\n    return 'multiselect';\n  };\n  /**\n   * Allows you to clear the selected values from the Multiselect component.\n   *\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.clear = function () {\n    var _this = this;\n\n    this.selectAll(false);\n\n    if (this.value && this.value.length) {\n      setTimeout(function () {\n        _this.setProperties({\n          value: null\n        }, true);\n      }, 0);\n    } else {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.render = function () {\n    this.setDynValue = this.initStatus = false;\n    this.isSelectAll = false;\n    this.selectAllEventEle = [];\n    this.searchWrapper = this.createElement('span', {\n      className: SEARCHBOX_WRAPPER + ' ' + (this.mode === 'Box' ? BOX_ELEMENT : '')\n    });\n    this.viewWrapper = this.createElement('span', {\n      className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER,\n      styles: 'display:none;'\n    });\n    this.overAllClear = this.createElement('span', {\n      className: CLOSEICON_CLASS$1,\n      styles: 'display:none;'\n    });\n    this.componentWrapper = this.createElement('div', {\n      className: ELEMENT_WRAPPER\n    });\n    this.overAllWrapper = this.createElement('div', {\n      className: OVER_ALL_WRAPPER\n    });\n\n    if (this.mode === 'CheckBox') {\n      addClass([this.overAllWrapper], 'e-checkbox');\n    }\n\n    if (Browser.isDevice) {\n      this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n    }\n\n    this.setWidth(this.width);\n    this.overAllWrapper.appendChild(this.componentWrapper);\n    this.popupWrapper = this.createElement('div', {\n      id: this.element.id + '_popup',\n      className: POPUP_WRAPPER\n    });\n\n    if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n      this.delimiterWrapper = this.createElement('span', {\n        className: DELIMITER_WRAPPER,\n        styles: 'display:none'\n      });\n      this.componentWrapper.appendChild(this.delimiterWrapper);\n    } else {\n      this.chipCollectionWrapper = this.createElement('span', {\n        className: CHIP_WRAPPER$1,\n        styles: 'display:none'\n      });\n\n      if (this.mode === 'Default') {\n        this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n      } else if (this.mode === 'Box') {\n        this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n      }\n\n      this.componentWrapper.appendChild(this.chipCollectionWrapper);\n    }\n\n    if (this.mode !== 'Box') {\n      this.componentWrapper.appendChild(this.viewWrapper);\n    }\n\n    this.componentWrapper.appendChild(this.searchWrapper);\n\n    if (this.showClearButton && !Browser.isDevice) {\n      this.componentWrapper.appendChild(this.overAllClear);\n    } else {\n      this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n    }\n\n    this.dropDownIcon();\n    this.inputElement = this.createElement('input', {\n      className: INPUT_ELEMENT,\n      attrs: {\n        spellcheck: 'false',\n        type: 'text',\n        autocomplete: 'off',\n        tabindex: '0',\n        role: 'combobox'\n      }\n    });\n\n    if (this.mode === 'Default' || this.mode === 'Box') {\n      this.inputElement.setAttribute('aria-describedby', this.chipCollectionWrapper.id);\n    }\n\n    if (this.element.tagName !== this.getNgDirective()) {\n      this.element.style.display = 'none';\n    }\n\n    if (this.element.tagName === this.getNgDirective()) {\n      this.element.appendChild(this.overAllWrapper);\n      this.searchWrapper.appendChild(this.inputElement);\n    } else {\n      this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n      this.searchWrapper.appendChild(this.inputElement);\n      this.searchWrapper.appendChild(this.element);\n      this.element.removeAttribute('tabindex');\n    }\n\n    if (this.floatLabelType !== 'Never') {\n      createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n    } else if (this.floatLabelType === 'Never') {\n      this.refreshPlaceHolder();\n    }\n\n    this.addValidInputClass();\n    this.element.style.opacity = '';\n    var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n    this.element.id = id;\n    this.hiddenElement = this.createElement('select', {\n      attrs: {\n        'aria-hidden': 'true',\n        'class': HIDDEN_ELEMENT,\n        'tabindex': '-1',\n        'multiple': ''\n      }\n    });\n    this.componentWrapper.appendChild(this.hiddenElement);\n    this.validationAttribute(this.element, this.hiddenElement);\n\n    if (this.mode !== 'CheckBox') {\n      this.hideOverAllClear();\n    }\n\n    if (!isNullOrUndefined(closest(this.element, \"fieldset\")) && closest(this.element, \"fieldset\").disabled) {\n      this.enabled = false;\n    }\n\n    this.wireEvent();\n    this.enable(this.enabled);\n    this.enableRTL(this.enableRtl);\n    this.checkInitialValue();\n\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n\n    Input.createSpanElement(this.overAllWrapper, this.createElement);\n    this.calculateWidth();\n\n    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n      this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n\n    this.renderComplete();\n  };\n\n  MultiSelect.prototype.checkInitialValue = function () {\n    var _this = this;\n\n    var isData = this.dataSource instanceof Array ? this.dataSource.length > 0 : !isNullOrUndefined(this.dataSource);\n\n    if (!(this.value && this.value.length) && isNullOrUndefined(this.text) && !isData && this.element.tagName === 'SELECT' && this.element.options.length > 0) {\n      var optionsElement = this.element.options;\n      var valueCol = [];\n      var textCol = '';\n\n      for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n        var opt = optionsElement[index];\n\n        if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n          if (opt.getAttribute('value')) {\n            valueCol.push(opt.getAttribute('value'));\n          } else {\n            textCol += opt.text + this.delimiterChar;\n          }\n        }\n      }\n\n      if (valueCol.length > 0) {\n        this.setProperties({\n          value: valueCol\n        }, true);\n      } else if (textCol !== '') {\n        this.setProperties({\n          text: textCol\n        }, true);\n      }\n\n      if (valueCol.length > 0 || textCol !== '') {\n        this.refreshInputHight();\n        this.refreshPlaceHolder();\n      }\n    }\n\n    if (this.value && this.value.length || !isNullOrUndefined(this.text)) {\n      if (!this.list) {\n        _super.prototype.render.call(this);\n      }\n    }\n\n    if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      this.initialTextUpdate();\n    }\n\n    if (this.value && this.value.length) {\n      if (!(this.dataSource instanceof DataManager)) {\n        this.initialValueUpdate();\n        this.initialUpdate();\n      } else {\n        this.setInitialValue = function () {\n          _this.initStatus = false;\n\n          _this.initialValueUpdate();\n\n          _this.initialUpdate();\n\n          _this.setInitialValue = null;\n          _this.initStatus = true;\n        };\n      }\n\n      this.updateTempValue();\n    } else {\n      this.initialUpdate();\n    }\n\n    this.initStatus = true;\n    this.checkAutoFocus();\n\n    if (!isNullOrUndefined(this.text)) {\n      this.element.setAttribute('data-initial-value', this.text);\n    }\n  };\n\n  MultiSelect.prototype.checkAutoFocus = function () {\n    if (this.element.hasAttribute('autofocus')) {\n      this.inputElement.focus();\n    }\n  };\n\n  MultiSelect.prototype.setFloatLabelType = function () {\n    removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n\n    if (this.floatLabelType !== 'Never') {\n      createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n    }\n  };\n\n  MultiSelect.prototype.addValidInputClass = function () {\n    if (!isNullOrUndefined(this.overAllWrapper)) {\n      if (!isNullOrUndefined(this.value) && this.value.length || this.floatLabelType === 'Always') {\n        addClass([this.overAllWrapper], 'e-valid-input');\n      } else {\n        removeClass([this.overAllWrapper], 'e-valid-input');\n      }\n    }\n  };\n\n  MultiSelect.prototype.dropDownIcon = function () {\n    if (this.showDropDownIcon) {\n      this.dropIcon = this.createElement('span', {\n        className: dropdownIcon\n      });\n      this.componentWrapper.appendChild(this.dropIcon);\n      addClass([this.componentWrapper], ['e-down-icon']);\n    } else {\n      if (!isNullOrUndefined(this.dropIcon)) {\n        this.dropIcon.parentElement.removeChild(this.dropIcon);\n        removeClass([this.componentWrapper], ['e-down-icon']);\n      }\n    }\n  };\n\n  MultiSelect.prototype.initialUpdate = function () {\n    if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n      this.updateDelimView();\n    }\n\n    this.updateCssClass();\n    this.updateHTMLAttribute();\n    this.updateReadonly(this.readonly);\n    this.refreshInputHight();\n    this.checkPlaceholderSize();\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  MultiSelect.prototype.destroy = function () {\n    // eslint-disable-next-line\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    if (this.popupObj) {\n      this.popupObj.hide();\n    }\n\n    this.notify(destroy, {});\n    this.unwireListEvents();\n    this.unWireEvent();\n    this.list = null;\n    this.popupObj = null;\n    this.mainList = null;\n    this.mainData = null;\n    this.filterParent = null;\n    this.ulElement = null;\n    this.mainListCollection = null;\n\n    _super.prototype.destroy.call(this);\n\n    var temp = ['readonly', 'aria-disabled', 'placeholder'];\n    var length = temp.length;\n\n    if (!isNullOrUndefined(this.inputElement)) {\n      while (length > 0) {\n        this.inputElement.removeAttribute(temp[length - 1]);\n        length--;\n      }\n    }\n\n    if (!isNullOrUndefined(this.element)) {\n      this.element.removeAttribute('data-initial-value');\n      this.element.style.display = 'block';\n    }\n\n    if (this.overAllWrapper && this.overAllWrapper.parentElement) {\n      if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n        remove(this.overAllWrapper);\n      } else {\n        this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n        remove(this.overAllWrapper);\n      }\n    }\n\n    this.componentWrapper = null;\n    this.overAllClear = null;\n    this.overAllWrapper = null;\n    this.hiddenElement = null;\n    this.searchWrapper = null;\n    this.viewWrapper = null;\n    this.chipCollectionWrapper = null;\n    this.targetInputElement = null;\n    this.popupWrapper = null;\n    this.inputElement = null;\n    this.delimiterWrapper = null;\n    this.popupObj = null;\n    this.popupWrapper = null;\n    this.liCollections = null;\n    this.header = null;\n    this.mainList = null;\n    this.mainListCollection = null;\n    this.footer = null;\n    this.selectAllEventEle = null;\n  };\n\n  __decorate$5([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], MultiSelect.prototype, \"fields\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enablePersistence\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"groupTemplate\", void 0);\n\n  __decorate$5([Property('No records found')], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate$5([Property('Request failed')], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate$5([Property('None')], MultiSelect.prototype, \"sortOrder\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"enabled\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate$5([Property([])], MultiSelect.prototype, \"dataSource\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"query\", void 0);\n\n  __decorate$5([Property('StartsWith')], MultiSelect.prototype, \"filterType\", void 0);\n\n  __decorate$5([Property(1000)], MultiSelect.prototype, \"zIndex\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"ignoreAccent\", void 0);\n\n  __decorate$5([Property()], MultiSelect.prototype, \"locale\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"cssClass\", void 0);\n\n  __decorate$5([Property('100%')], MultiSelect.prototype, \"width\", void 0);\n\n  __decorate$5([Property('300px')], MultiSelect.prototype, \"popupHeight\", void 0);\n\n  __decorate$5([Property('100%')], MultiSelect.prototype, \"popupWidth\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"placeholder\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$5([Property({})], MultiSelect.prototype, \"htmlAttributes\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"valueTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"headerTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"footerTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"itemTemplate\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"allowFiltering\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"changeOnBlur\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"allowCustomValue\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"showClearButton\", void 0);\n\n  __decorate$5([Property(1000)], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"readonly\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"text\", void 0);\n\n  __decorate$5([Property(null)], MultiSelect.prototype, \"value\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n\n  __decorate$5([Property('Default')], MultiSelect.prototype, \"mode\", void 0);\n\n  __decorate$5([Property(',')], MultiSelect.prototype, \"delimiterChar\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"ignoreCase\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n\n  __decorate$5([Property('Never')], MultiSelect.prototype, \"floatLabelType\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"showSelectAll\", void 0);\n\n  __decorate$5([Property('Select All')], MultiSelect.prototype, \"selectAllText\", void 0);\n\n  __decorate$5([Property('Unselect All')], MultiSelect.prototype, \"unSelectAllText\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n\n  __decorate$5([Property(true)], MultiSelect.prototype, \"openOnClick\", void 0);\n\n  __decorate$5([Property(false)], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"change\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"removing\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"removed\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"selectedAll\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"beforeOpen\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"open\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"close\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"blur\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"focus\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"chipSelection\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"filtering\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"tagging\", void 0);\n\n  __decorate$5([Event()], MultiSelect.prototype, \"customValueSelection\", void 0);\n\n  MultiSelect = __decorate$5([NotifyPropertyChanges], MultiSelect);\n  return MultiSelect;\n}(DropDownBase);\n\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME$1 = 'e-frame';\nvar CHECK$1 = 'e-check';\nvar CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\n\nvar CheckBoxSelection =\n/** @__PURE__ @class */\nfunction () {\n  function CheckBoxSelection(parent) {\n    this.activeLi = [];\n    this.activeEle = [];\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n\n  CheckBoxSelection.prototype.getModuleName = function () {\n    return 'CheckBoxSelection';\n  };\n\n  CheckBoxSelection.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on('updatelist', this.listSelection, this);\n    this.parent.on('listoption', this.listOption, this);\n    this.parent.on('selectAll', this.setSelectAll, this);\n    this.parent.on('checkSelectAll', this.checkSelectAll, this);\n    this.parent.on('searchBox', this.setSearchBox, this);\n    this.parent.on('blur', this.onBlurHandler, this);\n    this.parent.on('targetElement', this.targetElement, this);\n    this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n    this.parent.on('inputFocus', this.getFocus, this);\n    this.parent.on('reOrder', this.setReorder, this);\n    this.parent.on('activeList', this.getActiveList, this);\n    this.parent.on('selectAllText', this.setLocale, this);\n    this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n    EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n    this.parent.on('addItem', this.checboxCreate, this);\n    this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n  };\n\n  CheckBoxSelection.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off('updatelist', this.listSelection);\n    this.parent.off('listoption', this.listOption);\n    this.parent.off('selectAll', this.setSelectAll);\n    this.parent.off('checkSelectAll', this.checkSelectAll);\n    this.parent.off('searchBox', this.setSearchBox);\n    this.parent.off('blur', this.onBlurHandler);\n    this.parent.off('targetElement', this.targetElement);\n    this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n    this.parent.off('inputFocus', this.getFocus);\n    this.parent.off('reOrder', this.setReorder);\n    this.parent.off('activeList', this.getActiveList);\n    this.parent.off('selectAllText', this.setLocale);\n    this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n    this.parent.off('addItem', this.checboxCreate);\n    this.parent.off('popupFullScreen', this.setPopupFullScreen);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.listOption = function (args) {\n    var _this = this;\n\n    if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n      };\n    } else {\n      var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n  };\n\n  CheckBoxSelection.prototype.setPlaceholder = function (props) {\n    Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n  };\n\n  CheckBoxSelection.prototype.checboxCreate = function (e) {\n    var item;\n\n    if (!isNullOrUndefined(e.item)) {\n      item = e.item;\n    } else {\n      item = e;\n    }\n\n    if (this.parent.enableGroupCheckBox || item.className !== 'e-list-group-item ' && item.className !== 'e-list-group-item') {\n      var checkboxEle = createCheckBox(this.parent.createElement, true);\n      var icon = select('div.' + ICON, item);\n      item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n      select('.' + CHECKBOXFRAME$1, checkboxEle);\n\n      if (this.parent.enableGroupCheckBox) {\n        this.parent.popupWrapper.classList.add('e-multiselect-group');\n      }\n\n      return item;\n    } else {\n      return item;\n    }\n  };\n\n  CheckBoxSelection.prototype.setSelectAll = function () {\n    if (this.parent.showSelectAll) {\n      if (isNullOrUndefined(this.checkAllParent)) {\n        this.checkAllParent = this.parent.createElement('div', {\n          className: checkAllParent\n        });\n        this.selectAllSpan = this.parent.createElement('span', {\n          className: 'e-all-text'\n        });\n        this.selectAllSpan.textContent = '';\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        this.checboxCreate(this.checkAllParent);\n\n        if (this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            append([this.checkAllParent], this.parent.filterParent);\n          } else {\n            append([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n\n        if (!this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n          } else {\n            prepend([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n\n        EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n      }\n\n      if (this.parent.list.classList.contains('e-nodata') || this.parent.listData && this.parent.listData.length <= 1 && !this.parent.isDynamicDataChange || this.parent.isDynamicDataChange && this.parent.listData && this.parent.listData.length <= 1) {\n        this.checkAllParent.style.display = 'none';\n      } else {\n        this.checkAllParent.style.display = 'block';\n      }\n\n      this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    } else if (!isNullOrUndefined(this.checkAllParent)) {\n      this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n      this.checkAllParent = null;\n    }\n  };\n\n  CheckBoxSelection.prototype.destroy = function () {\n    this.removeEventListener();\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.checkAllParent = null;\n    this.clearIconElement = null;\n    this.filterInput = null;\n    this.filterInputObj = null;\n    this.checkWrapper = null;\n    this.selectAllSpan = null;\n  };\n\n  CheckBoxSelection.prototype.listSelection = function (args) {\n    var target;\n\n    if (!isNullOrUndefined(args.e)) {\n      var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n      target = !isNullOrUndefined(args.e.target) ? args.e.target.classList.contains('e-frame') && (!this.parent.showSelectAll || this.checkAllParent && !this.checkAllParent.contains(args.e.target)) ? args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1] : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n    } else {\n      var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n      target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n    }\n\n    if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n      target = args.li.firstElementChild.childNodes[1];\n    }\n\n    if (!isNullOrUndefined(target)) {\n      this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n    }\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n      var selectAll$$1 = false;\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n    }\n  };\n\n  CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll$$1) {\n    this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n  };\n\n  CheckBoxSelection.prototype.clickHandler = function (e) {\n    var target;\n\n    if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n      target = e.currentTarget.firstElementChild.lastElementChild;\n    } else {\n      target = e.currentTarget;\n    }\n\n    this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n    var selectAll$$1 = true;\n\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n    }\n\n    e.preventDefault();\n  };\n\n  CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll$$1) {\n    var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n\n    if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n      frameSpan.classList.remove(INDETERMINATE);\n      frameSpan.classList.add(CHECK$1);\n\n      if (selectAll$$1) {\n        this.parent.selectAllItems(true, e);\n        this.setLocale(true);\n      }\n    } else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n      removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n\n      if (selectAll$$1) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    } else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n      removeClass([frameSpan], [CHECK$1]);\n      frameSpan.classList.add(INDETERMINATE);\n\n      if (selectAll$$1) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    }\n  };\n\n  CheckBoxSelection.prototype.setSearchBox = function (args) {\n    if (isNullOrUndefined(this.parent.filterParent)) {\n      this.parent.filterParent = this.parent.createElement('span', {\n        className: filterParent\n      });\n      this.filterInput = this.parent.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: filterInput\n      });\n      this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n      var backIcon = false;\n\n      if (Browser.isDevice) {\n        backIcon = true;\n        this.parent.mobFilter = false;\n      }\n\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n        properties: {\n          placeholder: this.parent.filterBarPlaceholder\n        }\n      }, this.parent.createElement);\n\n      if (!isNullOrUndefined(this.parent.cssClass)) {\n        if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n\n      append([this.filterInputObj.container], this.parent.filterParent);\n      prepend([this.parent.filterParent], args.popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'role': 'combobox',\n        'autocomplete': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n      EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n      EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n      this.parent.searchBoxHeight = this.filterInputObj.container.parentElement.getBoundingClientRect().height;\n      return this.filterInputObj;\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n    this.parent.hidePopup();\n    removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n    this.parent.inputElement.focus();\n  };\n\n  CheckBoxSelection.prototype.clearText = function (e) {\n    this.parent.targetInputElement.value = '';\n\n    if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n      this.parent.search(null);\n    }\n\n    this.parent.refreshPopup();\n    this.parent.refreshListItems(null);\n    this.clearIconElement.style.visibility = 'hidden';\n    this.filterInput.focus();\n    this.setReorder(e);\n    e.preventDefault();\n  };\n\n  CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n    this.parent.popupObj.element.classList.add(device);\n    this.parent.popupObj.element.classList.add(mobileFilter);\n    this.parent.popupObj.position = {\n      X: 0,\n      Y: 0\n    };\n    this.parent.popupObj.dataBind();\n    this.setSearchBoxPosition();\n    this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n    this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n    this.clearIconElement.style.visibility = 'hidden';\n    EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n    EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n  };\n\n  CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    var selectAllHeight = 0;\n\n    if (this.checkAllParent) {\n      selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    }\n\n    this.parent.popupObj.element.style.maxHeight = '100%';\n    this.parent.popupObj.element.style.width = '100%';\n    this.parent.list.style.maxHeight = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    this.parent.list.style.height = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n\n  CheckBoxSelection.prototype.setPopupFullScreen = function () {\n    attributes(this.parent.popupObj.element, {\n      style: 'left:0px;right:0px;top:0px;bottom:0px;'\n    });\n    addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n    this.parent.popupObj.element.style.maxHeight = '100%';\n    this.parent.popupObj.element.style.width = '100%';\n  };\n\n  CheckBoxSelection.prototype.targetElement = function () {\n    if (!isNullOrUndefined(this.clearIconElement)) {\n      this.parent.targetInputElement = this.filterInput;\n      this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n    }\n\n    return this.parent.targetInputElement.value;\n  };\n\n  CheckBoxSelection.prototype.onBlurHandler = function (e) {\n    if (!this.parent.element.classList.contains('e-listbox')) {\n      var target = void 0;\n\n      if (this.parent.keyAction) {\n        return;\n      }\n\n      if (Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.target;\n      }\n\n      if (!Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.relatedTarget;\n      } // eslint-disable-next-line max-len\n\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target) && !Browser.isIE && this.filterInput) {\n        this.filterInput.focus();\n        return;\n      }\n\n      if (this.parent.scrollFocusStatus && this.filterInput) {\n        e.preventDefault();\n        this.filterInput.focus();\n        this.parent.scrollFocusStatus = false;\n        return;\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n        this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.overAllWrapper.classList.remove(FOCUS$1);\n        this.parent.trigger('blur');\n        this.parent.focused = true;\n      }\n\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n        this.parent.hidePopup();\n      }\n    }\n  };\n\n  CheckBoxSelection.prototype.onDocumentClick = function (e) {\n    if (this.parent.getLocaleName() !== 'listbox') {\n      var target = e.target;\n\n      if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n        if (!(this.filterInput && this.filterInput.value !== '')) {\n          e.preventDefault();\n        }\n      }\n\n      if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) && !isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target)) {\n        if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n          this.parent.inputFocus = false;\n          this.parent.scrollFocusStatus = false;\n          this.parent.hidePopup();\n          this.parent.onBlurHandler(e, true);\n          this.parent.focused = true;\n        }\n      } else {\n        this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.filterInput;\n      }\n\n      if (!isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') && !this.parent.isPopupOpen()) {\n        if (Browser.isIE) {\n          this.parent.onBlurHandler();\n        } else {\n          this.parent.onBlurHandler(e);\n        }\n      }\n\n      if (this.filterInput === target) {\n        this.filterInput.focus();\n      }\n    }\n  };\n\n  CheckBoxSelection.prototype.getFocus = function (e) {\n    this.parent.overAllWrapper.classList.remove(FOCUS$1);\n\n    if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n      this.parent.keyAction = false;\n      return;\n    }\n\n    if (e.value === 'focus') {\n      this.filterInput.focus();\n      this.parent.removeFocus();\n      EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n    }\n\n    if (e.value === 'clear') {\n      this.filterInput.value = '';\n      this.clearIconElement.style.visibility = 'hidden';\n    }\n  };\n\n  CheckBoxSelection.prototype.checkSelectAll = function (e) {\n    if (e.value === 'check') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale(true);\n    }\n\n    if (e.value === 'uncheck') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n\n    if (e.value === 'indeterminate') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n  };\n\n  CheckBoxSelection.prototype.setLocale = function (unSelect) {\n    if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n      var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n      this.selectAllSpan.textContent = '';\n      var compiledString = compile(template);\n      var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n\n      for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n        var item = _a[_i];\n        this.selectAllSpan.textContent = item.textContent;\n      }\n    } else {\n      var l10nLocale = {\n        selectAllText: 'Select All',\n        unSelectAllText: 'Unselect All'\n      };\n      var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n\n      if (l10n.getConstant('selectAllText') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n      }\n\n      this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n    }\n  };\n\n  CheckBoxSelection.prototype.getActiveList = function (args) {\n    if (args.li.classList.contains('e-active')) {\n      this.activeLi.push(args.li.cloneNode(true));\n    } else {\n      this.activeLi.splice(args.index, 1);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CheckBoxSelection.prototype.setReorder = function (args) {\n    if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n      var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n      var remLi = void 0;\n      var ulEle_1 = this.parent.createElement('ul', {\n        className: 'e-list-parent e-ul e-reorder'\n      });\n\n      if (activeLiCount > 0) {\n        var activeListItems = this.parent.ulElement.querySelectorAll('li.e-active');\n        activeListItems.forEach(function (item) {\n          ulEle_1.appendChild(item);\n        });\n        remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n        addClass(remLi, 'e-reorder-hide');\n        prepend([ulEle_1], this.parent.list);\n      }\n\n      this.parent.focusAtFirstListItem();\n    }\n  };\n\n  return CheckBoxSelection;\n}();\n/**\n * export all modules from current location\n */\n\n\nvar __extends$6 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n/**\n * Defines the Selection settings of List Box.\n */\n\n\nvar SelectionSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$6(SelectionSettings, _super);\n\n  function SelectionSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$6([Property('Multiple')], SelectionSettings.prototype, \"mode\", void 0);\n\n  __decorate$6([Property(false)], SelectionSettings.prototype, \"showCheckbox\", void 0);\n\n  __decorate$6([Property(false)], SelectionSettings.prototype, \"showSelectAll\", void 0);\n\n  __decorate$6([Property('Left')], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n\n  return SelectionSettings;\n}(ChildProperty);\n/**\n * Defines the toolbar settings of List Box.\n */\n\n\nvar ToolbarSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$6(ToolbarSettings, _super);\n\n  function ToolbarSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$6([Property([])], ToolbarSettings.prototype, \"items\", void 0);\n\n  __decorate$6([Property('Right')], ToolbarSettings.prototype, \"position\", void 0);\n\n  return ToolbarSettings;\n}(ChildProperty);\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\n\n\nvar ListBox =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$6(ListBox, _super);\n  /**\n   * Constructor for creating the ListBox component.\n   *\n   * @param {ListBoxModel} options - Specifies ListBox model\n   * @param {string | HTMLElement} element - Specifies the element.\n   */\n\n\n  function ListBox(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.isValidKey = false;\n    _this.isDataSourceUpdate = false;\n    _this.keyDownStatus = false;\n    return _this;\n  }\n\n  ListBox_1 = ListBox;\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}.\n   * @private\n   */\n\n  ListBox.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Build and render the component.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.render = function () {\n    this.inputString = '';\n    this.initLoad = true;\n    this.isCustomFiltering = false;\n    this.initialSelectedOptions = this.value;\n\n    _super.prototype.render.call(this);\n\n    this.setEnabled();\n    this.renderComplete();\n  };\n\n  ListBox.prototype.initWrapper = function () {\n    var hiddenSelect = this.createElement('select', {\n      className: 'e-hidden-select',\n      attrs: {\n        'multiple': ''\n      }\n    });\n    hiddenSelect.style.visibility = 'hidden';\n    this.list.classList.add('e-listbox-wrapper');\n\n    if (this.itemTemplate) {\n      this.list.classList.add('e-list-template');\n    }\n\n    this.list.classList.add('e-wrapper');\n    this.list.classList.add('e-lib');\n\n    if (this.element.tagName === 'EJS-LISTBOX') {\n      this.element.setAttribute('tabindex', '0');\n\n      if (this.initLoad) {\n        this.element.appendChild(this.list);\n      }\n    } else {\n      if (this.initLoad) {\n        this.element.parentElement.insertBefore(this.list, this.element);\n      }\n\n      this.list.insertBefore(this.element, this.list.firstChild);\n      this.element.style.display = 'none';\n    }\n\n    this.list.insertBefore(hiddenSelect, this.list.firstChild);\n\n    if (this.list.getElementsByClassName('e-list-item')[0]) {\n      this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n    }\n\n    if (this.itemTemplate) {\n      this.renderReactTemplates();\n    }\n\n    removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n    this.validationAttribute(this.element, hiddenSelect);\n    this.list.setAttribute('role', 'listbox');\n    attributes(this.list, {\n      'role': 'listbox',\n      'aria-label': 'listbox',\n      'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false'\n    });\n    this.updateSelectionSettings();\n  };\n\n  ListBox.prototype.updateSelectionSettings = function () {\n    if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n      var l10nSelect = new L10n(this.getModuleName(), {\n        selectAllText: 'Select All',\n        unSelectAllText: 'Unselect All'\n      }, this.locale);\n      this.showSelectAll = true;\n      this.selectAllText = l10nSelect.getConstant('selectAllText');\n      this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n      this.popupWrapper = this.list;\n      this.checkBoxSelectionModule.checkAllParent = null;\n      this.notify('selectAll', {});\n    }\n  };\n\n  ListBox.prototype.initDraggable = function () {\n    var _this = this;\n\n    if (this.ulElement) {\n      this.ulElement.id = this.element.id + '_parent';\n    }\n\n    if (this.allowDragAndDrop) {\n      new Sortable(this.ulElement, {\n        scope: this.scope,\n        itemClass: 'e-list-item',\n        dragStart: this.triggerDragStart.bind(this),\n        drag: this.triggerDrag.bind(this),\n        beforeDrop: this.beforeDragEnd.bind(this),\n        drop: this.dragEnd.bind(this),\n        placeHolder: function () {\n          return _this.createElement('span', {\n            className: 'e-placeholder'\n          });\n        },\n        helper: function (e) {\n          var wrapper = _this.list.cloneNode();\n\n          var ele = e.sender.cloneNode(true);\n          wrapper.appendChild(ele);\n\n          var refEle = _this.getItems()[0];\n\n          wrapper.style.width = refEle.offsetWidth + 'px';\n          wrapper.style.height = refEle.offsetHeight + 'px';\n\n          if ((_this.value && _this.value.length) > 1 && _this.isSelected(ele)) {\n            ele.appendChild(_this.createElement('span', {\n              className: 'e-list-badge',\n              innerHTML: _this.value.length + ''\n            }));\n          }\n\n          wrapper.style.zIndex = getZindexPartial(_this.element) + '';\n          return wrapper;\n        }\n      });\n    }\n  };\n\n  ListBox.prototype.updateActionCompleteData = function (li, item, index) {\n    this.jsonData.splice(index, 0, item);\n  };\n\n  ListBox.prototype.initToolbar = function () {\n    var pos = this.toolbarSettings.position;\n    var prevScope = this.element.getAttribute('data-value');\n\n    if (this.toolbarSettings.items.length) {\n      var toolElem = this.createElement('div', {\n        className: 'e-listbox-tool',\n        attrs: {\n          'role': 'toolbar'\n        }\n      });\n      var wrapper = this.createElement('div', {\n        className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n      });\n      this.list.parentElement.insertBefore(wrapper, this.list);\n      wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n      wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n      this.createButtons(toolElem);\n\n      if (!this.element.id) {\n        this.element.id = getUniqueID('e-' + this.getModuleName());\n      }\n\n      if (this.scope) {\n        document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n      } else {\n        this.updateToolBarState();\n      }\n    }\n\n    var scope = this.element.getAttribute('data-value');\n\n    if (prevScope && scope && prevScope !== scope) {\n      this.tBListBox = getComponent(document.getElementById(prevScope), this.getModuleName());\n      this.tBListBox.updateToolBarState();\n    } else if (scope) {\n      this.tBListBox = getComponent(document.getElementById(scope), this.getModuleName());\n      this.tBListBox.updateToolBarState();\n    }\n  };\n\n  ListBox.prototype.createButtons = function (toolElem) {\n    var _this = this;\n\n    var btn;\n    var ele;\n    var title;\n    var l10n = new L10n(this.getModuleName(), {\n      moveUp: 'Move Up',\n      moveDown: 'Move Down',\n      moveTo: 'Move To',\n      moveFrom: 'Move From',\n      moveAllTo: 'Move All To',\n      moveAllFrom: 'Move All From'\n    }, this.locale);\n    this.toolbarSettings.items.forEach(function (value) {\n      title = l10n.getConstant(value);\n      ele = _this.createElement('button', {\n        attrs: {\n          'type': 'button',\n          'data-value': value,\n          'title': title,\n          'aria-label': title\n        }\n      });\n      toolElem.appendChild(ele);\n      btn = new Button({\n        iconCss: 'e-icons e-' + value.toLowerCase()\n      }, ele);\n      btn.createElement = _this.createElement;\n    });\n  };\n\n  ListBox.prototype.validationAttribute = function (input, hiddenSelect) {\n    _super.prototype.validationAttribute.call(this, input, hiddenSelect);\n\n    hiddenSelect.required = input.required;\n    input.required = false;\n  };\n\n  ListBox.prototype.setHeight = function () {\n    var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n    ele.style.height = formatUnit(this.height);\n\n    if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n      addClass([this.list], 'e-filter-list');\n    } else {\n      removeClass([this.list], 'e-filter-list');\n    }\n  };\n\n  ListBox.prototype.setCssClass = function () {\n    var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n    if (this.cssClass) {\n      addClass([wrap], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n\n    if (this.enableRtl) {\n      addClass([this.list], 'e-rtl');\n    }\n  };\n\n  ListBox.prototype.setEnable = function () {\n    var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n    if (this.enabled) {\n      removeClass([ele], cssClass.disabled);\n    } else {\n      addClass([ele], cssClass.disabled);\n    }\n  };\n\n  ListBox.prototype.showSpinner = function () {\n    if (!this.spinner) {\n      this.spinner = this.createElement('div', {\n        className: 'e-listbox-wrapper'\n      });\n    }\n\n    this.spinner.style.height = formatUnit(this.height);\n    this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n    createSpinner({\n      target: this.spinner\n    }, this.createElement);\n    showSpinner(this.spinner);\n  };\n\n  ListBox.prototype.hideSpinner = function () {\n    if (this.spinner.querySelector('.e-spinner-pane')) {\n      hideSpinner(this.spinner);\n    }\n\n    if (this.spinner.parentElement) {\n      detach(this.spinner);\n    }\n  };\n\n  ListBox.prototype.onInput = function () {\n    this.isDataSourceUpdate = false;\n\n    if (this.keyDownStatus) {\n      this.isValidKey = true;\n    } else {\n      this.isValidKey = false;\n    }\n\n    this.keyDownStatus = false;\n    this.refreshClearIcon();\n  };\n\n  ListBox.prototype.clearText = function () {\n    this.filterInput.value = '';\n    this.refreshClearIcon();\n    var event = document.createEvent('KeyboardEvent');\n    this.isValidKey = true;\n    this.KeyUp(event);\n  };\n\n  ListBox.prototype.refreshClearIcon = function () {\n    if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n  };\n\n  ListBox.prototype.onActionComplete = function (ulElement, list, e) {\n    var searchEle;\n\n    if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n      searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n    }\n\n    if (list.length === 0) {\n      var noRecElem = ulElement.childNodes[0];\n\n      if (noRecElem) {\n        ulElement.removeChild(noRecElem);\n      }\n    }\n\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n      this.list.insertBefore(searchEle, this.list.firstElementChild);\n      this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n      this.filterWireEvents(searchEle);\n    }\n\n    this.initWrapper();\n    this.setSelection();\n    this.initDraggable();\n    this.mainList = this.ulElement;\n\n    if (this.initLoad) {\n      this.jsonData = [];\n      extend(this.jsonData, list, []);\n      this.initToolbarAndStyles();\n      this.wireEvents();\n\n      if (this.showCheckbox) {\n        this.setCheckboxPosition();\n      }\n\n      if (this.allowFiltering) {\n        this.setFiltering();\n      }\n    } else {\n      if (this.isDataSourceUpdate) {\n        this.jsonData = [];\n        extend(this.jsonData, list, []);\n        this.isDataSourceUpdate = false;\n      }\n\n      if (this.allowFiltering) {\n        var filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n        var txtLength = this.filterInput.value.length;\n        filterElem.selectionStart = txtLength;\n        filterElem.selectionEnd = txtLength;\n        filterElem.focus();\n      }\n    }\n\n    if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n      var scope = this.scope.replace('#', '');\n      var scopedLB = getComponent(document.getElementById(scope), this.getModuleName());\n      scopedLB.initToolbar();\n    }\n\n    this.initLoad = false;\n  };\n\n  ListBox.prototype.initToolbarAndStyles = function () {\n    this.initToolbar();\n    this.setCssClass();\n    this.setEnable();\n    this.setHeight();\n  };\n\n  ListBox.prototype.triggerDragStart = function (args) {\n    var _this = this;\n\n    var badge;\n    args = extend(this.getDragArgs(args), {\n      dragSelected: true\n    });\n\n    if (Browser.isIos) {\n      this.list.style.overflow = 'hidden';\n    }\n\n    this.trigger('dragStart', args, function (dragEventArgs) {\n      _this.allowDragAll = dragEventArgs.dragSelected;\n\n      if (!_this.allowDragAll) {\n        badge = _this.ulElement.getElementsByClassName('e-list-badge')[0];\n\n        if (badge) {\n          detach(badge);\n        }\n      }\n    });\n  };\n\n  ListBox.prototype.triggerDrag = function (args) {\n    var scrollParent;\n    var boundRect;\n    var scrollMoved = 36;\n    var scrollHeight = 10;\n\n    if (this.itemTemplate && args.target) {\n      if (args.target && args.target.closest('.e-list-item')) {\n        scrollHeight = args.target.closest('.e-list-item').scrollHeight;\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var listItem = args.element.querySelector('.e-list-item');\n\n        if (listItem) {\n          scrollHeight = listItem.scrollHeight;\n        }\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var event = args.event;\n    var wrapper;\n\n    if (args.target && (args.target.classList.contains('e-listbox-wrapper') || args.target.classList.contains('e-list-item') || args.target.classList.contains('e-filter-parent') || args.target.classList.contains('e-input-group') || args.target.closest('.e-list-item'))) {\n      if (args.target.classList.contains('e-list-item') || args.target.classList.contains('e-filter-parent') || args.target.classList.contains('e-input-group') || args.target.closest('.e-list-item')) {\n        wrapper = args.target.closest('.e-listbox-wrapper');\n      } else {\n        wrapper = args.target;\n      }\n\n      if (this.allowFiltering) {\n        scrollParent = wrapper.querySelector('.e-list-parent');\n      } else {\n        scrollParent = wrapper;\n      }\n\n      boundRect = scrollParent.getBoundingClientRect();\n\n      if (boundRect.y + scrollParent.offsetHeight - (event.pageY + scrollMoved) < 1) {\n        scrollParent.scrollTop = scrollParent.scrollTop + scrollHeight;\n      } else if (event.pageY - scrollMoved - boundRect.y < 1) {\n        scrollParent.scrollTop = scrollParent.scrollTop - scrollHeight;\n      }\n    }\n\n    if (args.target === null) {\n      return;\n    }\n\n    this.trigger('drag', this.getDragArgs(args));\n  };\n\n  ListBox.prototype.beforeDragEnd = function (args) {\n    this.dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n\n    if (this.value.indexOf(this.dragValue) > -1) {\n      args.items = this.getDataByValues(this.value);\n    } else {\n      args.items = this.getDataByValues([this.dragValue]);\n    }\n\n    this.trigger('beforeDrop', args);\n  };\n\n  ListBox.prototype.dragEnd = function (args) {\n    var _this = this;\n\n    var listData;\n    var liColl;\n    var jsonData;\n    var droppedData;\n    var selectedOptions;\n    var sortedData;\n    var dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n    var listObj = this.getComponent(args.droppedElement);\n    var getArgs = this.getDragArgs({\n      target: args.droppedElement\n    }, true);\n    var sourceArgs = {\n      previousData: this.dataSource\n    };\n    var destArgs = {\n      previousData: listObj.dataSource\n    };\n    var dragArgs = extend({}, getArgs, {\n      target: args.target,\n      source: {\n        previousData: this.dataSource\n      },\n      previousIndex: args.previousIndex,\n      currentIndex: args.currentIndex\n    });\n\n    if (listObj !== this) {\n      var sourceArgs1 = extend(sourceArgs, {\n        currentData: this.listData\n      });\n      dragArgs = extend(dragArgs, {\n        source: sourceArgs1,\n        destination: destArgs\n      });\n    }\n\n    if (Browser.isIos) {\n      this.list.style.overflow = '';\n    }\n\n    var targetListObj = this.getComponent(args.target);\n\n    if (targetListObj && targetListObj.listData.length === 0) {\n      var noRecElem = targetListObj.ulElement.childNodes[0];\n\n      if (noRecElem) {\n        targetListObj.ulElement.removeChild(noRecElem);\n      }\n    }\n\n    if (listObj === this) {\n      var ul_1 = this.ulElement;\n      listData = [].slice.call(this.listData);\n      liColl = [].slice.call(this.liCollections);\n      jsonData = [].slice.call(this.jsonData);\n      sortedData = [].slice.call(this.sortedData);\n      var toSortIdx_1 = args.currentIndex;\n      var toIdx_1 = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n      var rIdx = listData.indexOf(this.getDataByValue(dropValue));\n      var jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n      var sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n      listData.splice(toIdx_1, 0, listData.splice(rIdx, 1)[0]);\n      sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx, 1)[0]);\n      jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx, 1)[0]);\n      liColl.splice(toIdx_1, 0, liColl.splice(rIdx, 1)[0]);\n\n      if (this.allowDragAll) {\n        selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n        selectedOptions.forEach(function (value) {\n          if (value !== dropValue) {\n            var idx = listData.indexOf(_this.getDataByValue(value));\n            var jsonIdx_1 = jsonData.indexOf(_this.getDataByValue(value));\n            var sIdx_1 = sortedData.indexOf(_this.getDataByValue(value));\n\n            if (idx > toIdx_1) {\n              toIdx_1++;\n            }\n\n            jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx_1, 1)[0]);\n            listData.splice(toIdx_1, 0, listData.splice(idx, 1)[0]);\n            sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx_1, 1)[0]);\n            liColl.splice(toIdx_1, 0, liColl.splice(idx, 1)[0]);\n            ul_1.insertBefore(_this.getItems()[_this.getIndexByValue(value)], ul_1.getElementsByClassName('e-placeholder')[0]);\n          }\n        });\n      }\n\n      this.listData = listData;\n      this.jsonData = jsonData;\n      this.sortedData = sortedData;\n      this.liCollections = liColl;\n    } else {\n      var li_1;\n      var fLiColl_1 = [].slice.call(this.liCollections);\n      var currIdx_1 = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n      var ul_2 = listObj.ulElement;\n      listData = [].slice.call(listObj.listData);\n      liColl = [].slice.call(listObj.liCollections);\n      jsonData = [].slice.call(listObj.jsonData);\n      sortedData = [].slice.call(listObj.sortedData);\n      selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll ? this.value : [dropValue];\n      var fListData_1 = [].slice.call(this.listData);\n      var fSortData_1 = [].slice.call(this.sortedData);\n      selectedOptions.forEach(function (value, index) {\n        droppedData = _this.getDataByValue(value);\n\n        var srcIdx = _this.listData.indexOf(droppedData);\n\n        var jsonSrcIdx = _this.jsonData.indexOf(droppedData);\n\n        var sortIdx = _this.sortedData.indexOf(droppedData);\n\n        fListData_1.splice(srcIdx, 1);\n\n        _this.jsonData.splice(jsonSrcIdx, 1);\n\n        fSortData_1.splice(sortIdx, 1);\n        _this.listData = fListData_1;\n        _this.sortedData = fSortData_1;\n        var destIdx = value === dropValue ? args.currentIndex : currIdx_1;\n        listData.splice(destIdx, 0, droppedData);\n        jsonData.splice(destIdx, 0, droppedData);\n        sortedData.splice(destIdx, 0, droppedData);\n        liColl.splice(destIdx, 0, fLiColl_1.splice(srcIdx, 1)[0]);\n\n        if (!value) {\n          var liCollElem_1 = _this.getItems();\n\n          for (var i = 0; i < liCollElem_1.length; i++) {\n            if (liCollElem_1[i].getAttribute('data-value') === null && liCollElem_1[i].classList.contains('e-list-item')) {\n              li_1 = liCollElem_1[i];\n              break;\n            }\n          }\n        } else {\n          li_1 = _this.getItems()[_this.getIndexByValue(value)];\n        }\n\n        if (!li_1) {\n          li_1 = args.helper;\n        }\n\n        _this.removeSelected(_this, value === dropValue ? [args.droppedElement] : [li_1]);\n\n        ul_2.insertBefore(li_1, ul_2.getElementsByClassName('e-placeholder')[0]);\n        currIdx_1++;\n      });\n\n      if (this.fields.groupBy) {\n        var sourceElem = this.renderItems(this.listData, this.fields);\n        this.updateListItems(sourceElem, this.ulElement);\n        this.setSelection();\n      }\n\n      if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n        var sortable = getComponent(ul_2, 'sortable');\n        var sourceElem = listObj.renderItems(listData, listObj.fields);\n        listObj.updateListItems(sourceElem, ul_2);\n        this.setSelection();\n\n        if (sortable.placeHolderElement) {\n          ul_2.appendChild(sortable.placeHolderElement);\n        }\n\n        ul_2.appendChild(args.helper);\n        listObj.setSelection();\n      }\n\n      this.liCollections = fLiColl_1;\n      listObj.liCollections = liColl;\n      listObj.jsonData = extend([], [], jsonData, false);\n      listObj.listData = extend([], [], listData, false);\n      listObj.sortedData = extend([], [], sortedData, false);\n\n      if (this.listData.length === 0) {\n        this.l10nUpdate();\n      }\n    }\n\n    if (this === listObj) {\n      var sourceArgs1 = extend(sourceArgs, {\n        currentData: listData\n      });\n      dragArgs = extend(dragArgs, {\n        source: sourceArgs1\n      });\n    } else {\n      var dragArgs1 = extend(destArgs, {\n        currentData: listData\n      });\n      dragArgs = extend(dragArgs, {\n        destination: dragArgs1\n      });\n    }\n\n    this.trigger('drop', dragArgs); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var liCollElem = dragArgs.elements;\n\n    if (liCollElem.length) {\n      for (var i = 0; i < liCollElem.length; i++) {\n        liCollElem[i].classList.remove('e-grabbed');\n      }\n    }\n  };\n\n  ListBox.prototype.updateListItems = function (sourceElem, destElem) {\n    var i = 0;\n    destElem.innerHTML = '';\n\n    while (i < sourceElem.childNodes.length) {\n      destElem.appendChild(sourceElem.childNodes[i]);\n    }\n  };\n\n  ListBox.prototype.removeSelected = function (listObj, elems) {\n    if (listObj.selectionSettings.showCheckbox) {\n      elems.forEach(function (ele) {\n        ele.getElementsByClassName('e-frame')[0].classList.remove('e-check');\n      });\n    } else {\n      removeClass(elems, cssClass.selected);\n    }\n  };\n\n  ListBox.prototype.getCurIdx = function (listObj, idx) {\n    if (listObj.fields.groupBy) {\n      idx -= [].slice.call(listObj.ulElement.children).slice(0, idx).filter(function (ele) {\n        return ele.classList.contains(cssClass.group);\n      }).length;\n    }\n\n    return idx;\n  };\n\n  ListBox.prototype.getComponent = function (li) {\n    var listObj;\n    var ele = this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox') : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox');\n\n    if (ele) {\n      listObj = getComponent(ele, this.getModuleName());\n    }\n\n    return listObj;\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.setEnabled = function () {\n    this.element.setAttribute('aria-disabled', this.enabled ? 'false' : 'true');\n  };\n\n  ListBox.prototype.listOption = function (dataSource, fields) {\n    this.listCurrentOptions = _super.prototype.listOption.call(this, dataSource, fields);\n    this.listCurrentOptions = extend({}, this.listCurrentOptions, {\n      itemCreated: this.triggerBeforeItemRender.bind(this)\n    }, true);\n    this.notify('listoption', {\n      module: 'CheckBoxSelection'\n    });\n    return this.listCurrentOptions;\n  };\n\n  ListBox.prototype.triggerBeforeItemRender = function (e) {\n    e.item.setAttribute('tabindex', '-1');\n    this.trigger('beforeItemRender', {\n      element: e.item,\n      item: e.curData\n    });\n  };\n\n  ListBox.prototype.requiredModules = function () {\n    var modules = [];\n\n    if (this.selectionSettings.showCheckbox) {\n      modules.push({\n        member: 'CheckBoxSelection',\n        args: [this]\n      });\n    }\n\n    return modules;\n  };\n  /**\n   * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n   *\n   * @param {string[]} items - Text items that needs to be enabled/disabled.\n   * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n   * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.enableItems = function (items, enable, isValue) {\n    var _this = this;\n\n    if (enable === void 0) {\n      enable = true;\n    }\n\n    var li;\n    items.forEach(function (item) {\n      var text = item;\n      li = _this.findListElement(_this.list, 'li', 'data-value', isValue ? text : _this.getValueByText(text));\n\n      if (!li) {\n        return;\n      }\n\n      if (enable) {\n        removeClass([li], cssClass.disabled);\n        li.removeAttribute('aria-disabled');\n      } else {\n        addClass([li], cssClass.disabled);\n        li.setAttribute('aria-disabled', 'true');\n      }\n    });\n  };\n  /**\n   * Based on the state parameter, specified list item will be selected/deselected.\n   *\n   * @param {string[]} items - Array of text value of the item.\n   * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n   * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.selectItems = function (items, state, isValue) {\n    if (state === void 0) {\n      state = true;\n    }\n\n    if (state && !this.selectionSettings.showCheckbox && this.selectionSettings.mode === 'Single') {\n      this.getSelectedItems().forEach(function (li) {\n        li.classList.remove('e-active');\n        li.removeAttribute('aria-selected');\n        removeClass([li], cssClass.selected);\n      });\n    }\n\n    this.setSelection(items, state, !isValue);\n    this.updateSelectedOptions();\n    var selElems = [];\n\n    for (var i = 0; i < items.length; i++) {\n      var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n\n      for (var j = 0; j < liColl.length; j++) {\n        if (items[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n          selElems.push(liColl[j]);\n        }\n      }\n    }\n\n    this.triggerChange(selElems, null);\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected/deselected.\n   *\n   * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.selectAll = function (state) {\n    if (state === void 0) {\n      state = true;\n    }\n\n    this.selectAllItems(state);\n  };\n  /**\n   * Adds a new item to the list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.addItems = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Removes a item from the list. By default, removed the last item in the list,\n   * but you can remove based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to remove the item from the list.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.removeItems = function (items, itemIndex) {\n    this.removeItem(items, itemIndex);\n  };\n  /**\n   * Removes a item from the list. By default, removed the last item in the list,\n   * but you can remove based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to remove the item from the list.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.removeItem = function (items, itemIndex) {\n    var liCollections = [];\n    var liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n\n    if (items) {\n      items = items instanceof Array ? items : [items];\n      var fields = this.fields;\n      var dataValue = void 0;\n      var objValue = void 0;\n      var dupData = [];\n      var itemIdx = void 0;\n      extend(dupData, [], this.jsonData);\n      var removeIdxes = [];\n      var removeLiIdxes = [];\n\n      for (var j = 0; j < items.length; j++) {\n        if (items[j] instanceof Object) {\n          dataValue = getValue(fields.value, items[j]);\n        } else {\n          dataValue = items[j].toString();\n        }\n\n        for (var i = 0, len = dupData.length; i < len; i++) {\n          if (dupData[i] instanceof Object) {\n            objValue = getValue(fields.value, dupData[i]);\n          } else {\n            objValue = dupData[i].toString();\n          }\n\n          if (objValue === dataValue) {\n            itemIdx = this.getIndexByValue(dataValue);\n            var idx = itemIdx === i ? itemIdx : i;\n            liCollections.push(liElement[idx]);\n            removeIdxes.push(idx);\n            removeLiIdxes.push(idx);\n          }\n        }\n      }\n\n      for (var k = removeIdxes.length - 1; k >= 0; k--) {\n        this.listData.splice(removeIdxes[k], 1);\n      }\n\n      for (var k = removeIdxes.length - 1; k >= 0; k--) {\n        this.jsonData.splice(removeIdxes[k], 1);\n      }\n\n      for (var k = removeLiIdxes.length - 1; k >= 0; k--) {\n        this.updateLiCollection(removeLiIdxes[k]);\n      }\n    } else {\n      itemIndex = itemIndex ? itemIndex : 0;\n      liCollections.push(liElement[itemIndex]);\n      this.listData.splice(itemIndex, 1);\n      this.jsonData.splice(itemIndex, 1);\n      this.updateLiCollection(itemIndex);\n    }\n\n    for (var i = 0; i < liCollections.length; i++) {\n      this.ulElement.removeChild(liCollections[i]);\n    }\n\n    if (this.listData.length === 0) {\n      this.l10nUpdate();\n    }\n\n    this.value = [];\n    this.updateToolBarState();\n  };\n  /**\n   * Gets the array of data Object that matches the given array of values.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n   * @returns {object[]}.\n   */\n\n\n  ListBox.prototype.getDataByValues = function (value) {\n    var data = [];\n\n    for (var i = 0; i < value.length; i++) {\n      data.push(this.getDataByValue(value[i]));\n    }\n\n    return data;\n  };\n  /**\n   * Moves the given value(s) / selected value(s) upwards.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveUp = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(true, false, elem);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) downwards.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveDown = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(false, false, elem);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n   * @param {number} index - Specifies the index.\n   * @param {string} targetId - Specifies the target id.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveTo = function (value, index, targetId) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    var tlistbox = targetId ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n    this.moveData(this, tlistbox, false, elem, index);\n  };\n  /**\n   * Moves all the values from one ListBox to the scoped ListBox.\n   *\n   * @param  { string } targetId - Specifies the scoped ListBox ID.\n   * @param  { string } index - Specifies the index to where the items moved.\n   * @returns {void}\n   */\n\n\n  ListBox.prototype.moveAllTo = function (targetId, index) {\n    if (this.listData.length > 0) {\n      var tlistbox = targetId ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n      this.moveAllData(this, tlistbox, false, index);\n    }\n  };\n  /* eslint-disable */\n\n  /**\n   * Gets the updated dataSource in ListBox.\n   *\n   * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n   */\n\n  /* eslint-enable */\n\n\n  ListBox.prototype.getDataList = function () {\n    return this.jsonData;\n  };\n  /* eslint-disable */\n\n  /**\n   * Returns the sorted Data in ListBox.\n   *\n   * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n   */\n\n  /* eslint-enable */\n\n\n  ListBox.prototype.getSortedList = function () {\n    var sortData;\n    var tempData;\n    sortData = tempData = this.sortedData;\n\n    if (this.fields.groupBy) {\n      sortData = [];\n\n      for (var i = 0; i < tempData.length; i++) {\n        if (tempData[i].isHeader) {\n          continue;\n        }\n\n        sortData.push(tempData[i]);\n      }\n    }\n\n    return sortData;\n  };\n\n  ListBox.prototype.getElemByValue = function (value) {\n    var elem = [];\n\n    for (var i = 0; i < value.length; i++) {\n      elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n    }\n\n    return elem;\n  };\n\n  ListBox.prototype.updateLiCollection = function (index) {\n    var tempLi = [].slice.call(this.liCollections);\n    tempLi.splice(index, 1);\n    this.liCollections = tempLi;\n  };\n\n  ListBox.prototype.selectAllItems = function (state, event) {\n    var _this = this;\n\n    [].slice.call(this.getItems()).forEach(function (li) {\n      if (!li.classList.contains(cssClass.disabled)) {\n        if (_this.selectionSettings.showCheckbox) {\n          var ele = li.getElementsByClassName('e-check')[0];\n\n          if (!ele && state || ele && !state) {\n            _this.notify('updatelist', {\n              li: li,\n              module: 'listbox'\n            });\n\n            if (_this.maximumSelectionLength >= _this.list.querySelectorAll('.e-list-item span.e-check').length) {\n              _this.checkMaxSelection();\n            }\n          }\n        } else {\n          if (state) {\n            li.classList.add(cssClass.selected);\n          } else {\n            li.classList.remove(cssClass.selected);\n          }\n        }\n      }\n    });\n    this.updateSelectedOptions();\n\n    if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n      var liEle = this.list.getElementsByTagName('li');\n      var index = 0;\n\n      if (state) {\n        var _loop_1 = function () {\n          var dataValue1 = this_1.getFormattedValue(liEle[index].getAttribute('data-value'));\n\n          if (!this_1.value.some(function (e) {\n            return e === dataValue1;\n          })) {\n            this_1.value.push(this_1.getFormattedValue(liEle[index].getAttribute('data-value')));\n          }\n        };\n\n        var this_1 = this;\n\n        for (index = 0; index < liEle.length; index++) {\n          _loop_1();\n        }\n      } else {\n        var _loop_2 = function () {\n          var dataValue2 = this_2.getFormattedValue(liEle[index].getAttribute('data-value'));\n          this_2.value = this_2.value.filter(function (e) {\n            return e !== dataValue2;\n          });\n        };\n\n        var this_2 = this;\n\n        for (index = 0; index < liEle.length; index++) {\n          _loop_2();\n        }\n      }\n\n      if (document.querySelectorAll('ul').length < 2) {\n        this.updateMainList();\n      }\n    }\n\n    this.triggerChange(this.getSelectedItems(), event);\n  };\n\n  ListBox.prototype.updateMainList = function () {\n    var mainList = this.mainList.querySelectorAll('.e-list-item');\n    var ulList = this.ulElement.querySelectorAll('.e-list-item');\n    var mainCount = mainList.length;\n    var ulEleCount = ulList.length;\n\n    if (this.selectionSettings.showCheckbox || document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount) {\n      var listindex = 0;\n      var valueindex = 0;\n      var count = 0;\n\n      for (listindex; listindex < mainCount;) {\n        if (this.value) {\n          for (valueindex; valueindex < this.value.length; valueindex++) {\n            if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n              count++;\n            }\n          }\n        }\n\n        if (!count && this.selectionSettings.showCheckbox) {\n          mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n        }\n\n        if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n          this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n          listindex = 0;\n        } else {\n          listindex++;\n        }\n\n        count = 0;\n        valueindex = 0;\n      }\n    }\n  };\n\n  ListBox.prototype.wireEvents = function () {\n    var form = closest(this.element, 'form');\n    var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n    EventHandler.add(this.list, 'click', this.clickHandler, this);\n    EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n    EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n    this.wireToolbarEvent();\n\n    if (this.selectionSettings.showCheckbox) {\n      EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n    }\n\n    if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n    }\n\n    if (form) {\n      EventHandler.add(form, 'reset', this.formResetHandler, this);\n    }\n  };\n\n  ListBox.prototype.wireToolbarEvent = function () {\n    if (this.toolbarSettings.items.length) {\n      EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n    }\n  };\n\n  ListBox.prototype.unwireEvents = function () {\n    var form = closest(this.element, 'form');\n    var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n    EventHandler.remove(this.list, 'click', this.clickHandler);\n    EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n    EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n\n    if (this.allowFiltering && this.clearFilterIconElem) {\n      EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n    }\n\n    if (this.toolbarSettings.items.length) {\n      EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n    }\n\n    if (form) {\n      EventHandler.remove(form, 'reset', this.formResetHandler);\n    }\n  };\n\n  ListBox.prototype.clickHandler = function (e) {\n    this.selectHandler(e);\n  };\n\n  ListBox.prototype.checkSelectAll = function () {\n    var searchCount = 0;\n    var liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n\n    for (var i = 0; i < liItems.length; i++) {\n      if (!liItems[i].classList.contains('e-disabled')) {\n        searchCount++;\n      }\n    }\n\n    var len = this.getSelectedItems().length;\n\n    if (this.showSelectAll && searchCount) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        value: searchCount === len ? 'check' : len === 0 ? 'uncheck' : 'indeterminate'\n      });\n    }\n  };\n\n  ListBox.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n\n    if (this.allowFiltering) {\n      var filterType = this.inputString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (dataType === null) {\n        dataType = this.typeOfData(this.jsonData).typeof;\n      }\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query : this.query ? this.query : new Query();\n    }\n\n    return filterQuery;\n  };\n\n  ListBox.prototype.setFiltering = function () {\n    var filterInputObj;\n\n    if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n      this.filterParent = this.createElement('span', {\n        className: listBoxClasses.filterParent\n      });\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: listBoxClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: [listBoxClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n      append([filterInputObj.container], this.filterParent);\n      prepend([this.filterParent], this.list);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'aria-label': 'search list item',\n        'autocomplete': 'off',\n        'autocorrect': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n\n      if (this.height.toString().indexOf('%') < 0) {\n        addClass([this.list], 'e-filter-list');\n      }\n\n      this.inputString = this.filterInput.value;\n      this.filterWireEvents();\n      return filterInputObj;\n    }\n  };\n\n  ListBox.prototype.filterWireEvents = function (filterElem) {\n    if (filterElem) {\n      this.filterInput = filterElem.querySelector('.e-input-filter');\n    }\n\n    this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n\n    if (this.clearFilterIconElem) {\n      EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n\n      if (!filterElem) {\n        this.clearFilterIconElem.style.visibility = 'hidden';\n      }\n    }\n\n    EventHandler.add(this.filterInput, 'input', this.onInput, this);\n    EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n    EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n  };\n\n  ListBox.prototype.selectHandler = function (e, isKey) {\n    var isSelect = true;\n    var currSelIdx;\n    var li = closest(e.target, '.' + 'e-list-item');\n    var selectedLi = [li];\n\n    if (li && li.parentElement) {\n      currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n\n      if (!this.selectionSettings.showCheckbox) {\n        if ((e.ctrlKey || e.metaKey || Browser.isDevice) && this.isSelected(li)) {\n          li.classList.remove(cssClass.selected);\n          li.removeAttribute('aria-selected');\n          isSelect = false;\n        } else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || e.metaKey || Browser.isDevice))) {\n          this.getSelectedItems().forEach(function (ele) {\n            ele.removeAttribute('aria-selected');\n          });\n          removeClass(this.getSelectedItems(), cssClass.selected);\n        }\n      } else {\n        isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n      }\n\n      if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n        selectedLi = [].slice.call(li.parentElement.children).slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1).filter(function (ele) {\n          return ele.classList.contains('e-list-item');\n        });\n      } else {\n        this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n      }\n\n      if (isSelect) {\n        if (!this.selectionSettings.showCheckbox) {\n          addClass(selectedLi, cssClass.selected);\n        }\n\n        selectedLi.forEach(function (ele) {\n          ele.setAttribute('aria-selected', 'true');\n        });\n        this.list.setAttribute('aria-activedescendant', li.id);\n      } else {\n        selectedLi.forEach(function (ele) {\n          ele.setAttribute('aria-selected', 'false');\n        });\n      }\n\n      if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) && (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) && !(this.maximumSelectionLength < (this.value && this.value.length))) {\n        this.notify('updatelist', {\n          li: li,\n          e: e,\n          module: 'listbox'\n        });\n      }\n\n      if (this.allowFiltering && !isKey) {\n        var liDataValue_1 = this.getFormattedValue(li.getAttribute('data-value'));\n\n        if (!isSelect) {\n          this.value = this.value.filter(function (value1) {\n            return value1 !== liDataValue_1;\n          });\n        } else {\n          var values = [];\n          extend(values, this.value);\n          values.push(liDataValue_1);\n          this.value = values;\n        }\n\n        if (document.querySelectorAll('ul').length < 2) {\n          this.updateMainList();\n        }\n      }\n\n      this.updateSelectedOptions();\n      this.triggerChange(this.getSelectedItems(), e);\n\n      if (this.list) {\n        this.checkMaxSelection();\n      }\n    }\n  };\n\n  ListBox.prototype.triggerChange = function (selectedLis, event) {\n    this.trigger('change', {\n      elements: selectedLis,\n      items: this.getDataByElements(selectedLis),\n      value: this.value,\n      event: event\n    });\n  };\n\n  ListBox.prototype.getDataByElems = function (elems) {\n    var data = [];\n\n    for (var i = 0, len = elems.length; i < len; i++) {\n      data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n    }\n\n    return data;\n  };\n\n  ListBox.prototype.getDataByElements = function (elems) {\n    var data = [];\n    var value;\n    var sIdx = 0;\n\n    if (!isNullOrUndefined(this.listData)) {\n      var type = this.typeOfData(this.listData).typeof;\n\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n          var item = _a[_i];\n\n          for (var i = sIdx, len = elems.length; i < len; i++) {\n            value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n\n            if (!isNullOrUndefined(item) && item === value) {\n              sIdx = i;\n              data.push(item);\n              break;\n            }\n          }\n\n          if (elems.length === data.length) {\n            break;\n          }\n        }\n      } else {\n        for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n          var item = _c[_b];\n\n          for (var i = sIdx, len = elems.length; i < len; i++) {\n            value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n\n            if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : 'value', item) === value) {\n              sIdx = i;\n              data.push(item);\n              break;\n            }\n          }\n\n          if (elems.length === data.length) {\n            break;\n          }\n        }\n      }\n\n      return data;\n    }\n\n    return null;\n  };\n\n  ListBox.prototype.checkMaxSelection = function () {\n    var limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n\n    if (this.selectionSettings.showCheckbox) {\n      var index = 0;\n      var liCollElem = this.list.getElementsByClassName('e-list-item');\n\n      for (index; index < liCollElem.length; index++) {\n        if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n          if (limit === this.maximumSelectionLength) {\n            liCollElem[index].classList.add('e-disable');\n          } else if (liCollElem[index].classList.contains('e-disable')) {\n            liCollElem[index].classList.remove('e-disable');\n          }\n        }\n      }\n    }\n  };\n\n  ListBox.prototype.toolbarClickHandler = function (e) {\n    var btn = closest(e.target, 'button');\n\n    if (btn) {\n      this.toolbarAction = btn.getAttribute('data-value');\n\n      if (btn.disabled) {\n        return;\n      }\n\n      switch (this.toolbarAction) {\n        case 'moveUp':\n          this.moveUpDown(true);\n          break;\n\n        case 'moveDown':\n          this.moveUpDown();\n          break;\n\n        case 'moveTo':\n          this.moveItemTo();\n          break;\n\n        case 'moveFrom':\n          this.moveItemFrom();\n          break;\n\n        case 'moveAllTo':\n          this.moveAllItemTo();\n          break;\n\n        case 'moveAllFrom':\n          this.moveAllItemFrom();\n          break;\n\n        default:\n          this.trigger('actionBegin', {\n            cancel: false,\n            items: this.getDataByElems(this.getSelectedItems()),\n            eventName: this.toolbarAction\n          });\n          break;\n      }\n    }\n  };\n\n  ListBox.prototype.moveUpDown = function (isUp, isKey, value) {\n    var _this = this;\n\n    var elems = this.getSelectedItems();\n\n    if (value) {\n      elems = value;\n    }\n\n    if ((isUp && this.isSelected(this.ulElement.firstElementChild) || !isUp && this.isSelected(this.ulElement.lastElementChild)) && !value) {\n      return;\n    }\n\n    var tempItems = this.getDataByElems(elems);\n    var localDataArgs = {\n      cancel: false,\n      items: tempItems,\n      eventName: this.toolbarAction\n    };\n    this.trigger('actionBegin', localDataArgs);\n\n    if (localDataArgs.cancel) {\n      return;\n    }\n\n    (isUp ? elems : elems.reverse()).forEach(function (ele) {\n      var jsonToIdx = Array.prototype.indexOf.call(_this.ulElement.querySelectorAll('.e-list-item'), ele);\n      var idx = Array.prototype.indexOf.call(_this.ulElement.children, ele);\n      moveTo(_this.ulElement, _this.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n\n      _this.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n    });\n    this.trigger('actionComplete', {\n      items: tempItems,\n      eventName: this.toolbarAction\n    });\n    elems[0].focus();\n\n    if (!isKey && this.toolbarSettings.items.length) {\n      this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n    }\n\n    this.updateToolBarState();\n  };\n\n  ListBox.prototype.moveItemTo = function () {\n    this.moveData(this, this.getScopedListBox());\n  };\n\n  ListBox.prototype.moveItemFrom = function () {\n    this.moveData(this.getScopedListBox(), this);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {ListBox} fListBox - Specifies the from listbox.\n   * @param {ListBox} tListBox - Specifies the to listbox.\n   * @param {boolean} isKey - Specifies the key.\n   * @param {Element[]} value - Specifies the value.\n   * @param {number} index - Specifies the index.\n   * @returns {void}\n   * @private\n   */\n\n\n  ListBox.prototype.moveData = function (fListBox, tListBox, isKey, value, index) {\n    var idx = [];\n    var dataIdx = [];\n    var jsonIdx = [];\n    var sortIdx = [];\n    var listData = [].slice.call(fListBox.listData);\n    var tListData = [].slice.call(tListBox.listData);\n    var sortData = [].slice.call(fListBox.sortedData);\n    var tSortData = [].slice.call(tListBox.sortedData);\n    var fliCollections = [].slice.call(fListBox.liCollections);\n    var dataLiIdx = [];\n    var tliCollections = [].slice.call(tListBox.liCollections);\n    var tempItems = [];\n    var data = [];\n    var elems = fListBox.getSelectedItems();\n\n    if (value) {\n      elems = value;\n    }\n\n    var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n    fListBox.value = [];\n\n    if (elems.length) {\n      this.removeSelected(fListBox, elems);\n      elems.forEach(function (ele) {\n        idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n        // To update lb view data\n\n        dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele)); // To update lb listdata data\n\n        dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0])); // To update lb sorted data\n\n        sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0])); // To update lb original data\n\n        jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n      });\n\n      if (this.sortOrder !== 'None') {\n        sortIdx.forEach(function (i) {\n          tempItems.push(fListBox.sortedData[i]);\n        });\n      } else {\n        jsonIdx.forEach(function (i) {\n          tempItems.push(fListBox.jsonData[i]);\n        });\n      }\n\n      var localDataArgs = {\n        cancel: false,\n        items: tempItems,\n        eventName: this.toolbarAction\n      };\n      fListBox.trigger('actionBegin', localDataArgs);\n\n      if (localDataArgs.cancel) {\n        return;\n      }\n\n      var rLiCollection_1 = [];\n      dataLiIdx.sort(function (n1, n2) {\n        return n1 - n2;\n      }).reverse().forEach(function (i) {\n        rLiCollection_1.push(fliCollections.splice(i, 1)[0]);\n      });\n      fListBox.liCollections = fliCollections;\n\n      if (index) {\n        var toColl = tliCollections.splice(0, index);\n        tListBox.liCollections = toColl.concat(rLiCollection_1.reverse()).concat(tliCollections);\n      } else {\n        tListBox.liCollections = tliCollections.concat(rLiCollection_1.reverse());\n      }\n\n      if (tListBox.listData.length === 0) {\n        var noRecElem = tListBox.ulElement.childNodes[0];\n\n        if (noRecElem) {\n          tListBox.ulElement.removeChild(noRecElem);\n        }\n      }\n\n      dataIdx.sort(function (n1, n2) {\n        return n2 - n1;\n      }).forEach(function (i) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        listData.splice(i, 1)[0];\n      });\n      sortIdx.sort(function (n1, n2) {\n        return n2 - n1;\n      }).forEach(function (i) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        sortData.splice(i, 1)[0];\n      });\n      jsonIdx.slice().reverse().forEach(function (i) {\n        data.push(fListBox.jsonData.splice(i, 1)[0]);\n      });\n\n      if (isRefresh) {\n        if (fListBox.fields.groupBy) {\n          var sourceElem = fListBox.renderItems(listData, fListBox.fields);\n          fListBox.updateListItems(sourceElem, fListBox.ulElement);\n        } else {\n          elems.forEach(function (ele) {\n            detach(ele);\n          });\n        }\n      } else {\n        moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n        fListBox.trigger('actionComplete', {\n          items: tempItems,\n          eventName: this.toolbarAction\n        });\n      }\n\n      if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n        tListBox.mainList = tListBox.ulElement;\n      }\n\n      fListBox.updateMainList();\n      var tJsonData = [].slice.call(tListBox.jsonData);\n      tSortData = [].slice.call(tListBox.sortedData);\n      this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n\n      if (isKey) {\n        this.list.focus();\n      }\n\n      fListBox.listData = listData;\n      fListBox.sortedData = sortData;\n      index = index ? index : tListData.length;\n\n      for (var i = tempItems.length - 1; i >= 0; i--) {\n        tListData.splice(index, 0, tempItems[i]);\n        tJsonData.splice(index, 0, tempItems[i]);\n        tSortData.splice(index, 0, tempItems[i]);\n      }\n\n      tListBox.listData = tListData;\n      tListBox.jsonData = tJsonData;\n      tListBox.sortedData = tSortData;\n\n      if (isRefresh) {\n        var sourceElem = tListBox.renderItems(tListData, tListBox.fields);\n        tListBox.updateListItems(sourceElem, tListBox.ulElement);\n        tListBox.setSelection();\n        fListBox.trigger('actionComplete', {\n          items: tempItems,\n          eventName: this.toolbarAction\n        });\n      }\n\n      fListBox.updateSelectedOptions();\n\n      if (fListBox.listData.length === 0) {\n        fListBox.l10nUpdate();\n      }\n    }\n\n    if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n      fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n    }\n  };\n\n  ListBox.prototype.selectNextList = function (elems, dataLiIdx, dataIdx, inst) {\n    var childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n    var ele;\n    var liIdx;\n    var validIdx = -1;\n\n    if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n      liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n      ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n      validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n\n      if (validIdx > -1) {\n        inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected);\n      }\n    }\n  };\n\n  ListBox.prototype.moveAllItemTo = function () {\n    this.moveAllData(this, this.getScopedListBox());\n  };\n\n  ListBox.prototype.moveAllItemFrom = function () {\n    this.moveAllData(this.getScopedListBox(), this);\n  };\n\n  ListBox.prototype.moveAllData = function (fListBox, tListBox, isKey, index) {\n    var listData = [].slice.call(tListBox.listData);\n    var jsonData = [].slice.call(tListBox.jsonData);\n    var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n    this.removeSelected(fListBox, fListBox.getSelectedItems());\n    var tempItems = [].slice.call(fListBox.listData);\n    var localDataArgs = {\n      cancel: false,\n      items: tempItems,\n      eventName: this.toolbarAction\n    };\n    fListBox.trigger('actionBegin', localDataArgs);\n\n    if (localDataArgs.cancel) {\n      return;\n    }\n\n    if (tListBox.listData.length === 0) {\n      var noRecElem = tListBox.ulElement.childNodes[0];\n\n      if (noRecElem) {\n        tListBox.ulElement.removeChild(noRecElem);\n      }\n    }\n\n    if (isRefresh) {\n      var noRecElem = fListBox.ulElement.childNodes[0];\n\n      if (noRecElem) {\n        fListBox.ulElement.removeChild(noRecElem);\n      }\n    }\n\n    moveTo(fListBox.ulElement, tListBox.ulElement, // eslint-disable-next-line prefer-spread\n    Array.apply(null, {\n      length: fListBox.ulElement.childElementCount\n    }).map(Number.call, Number), index);\n    this.trigger('actionComplete', {\n      items: tempItems,\n      eventName: this.toolbarAction\n    });\n\n    if (isKey) {\n      this.list.focus();\n    }\n\n    index = index ? index : listData.length;\n\n    for (var i = 0; i < fListBox.listData.length; i++) {\n      listData.splice(index + i, 0, fListBox.listData[i]);\n    }\n\n    for (var i = 0; i < fListBox.jsonData.length; i++) {\n      jsonData.splice(index + i, 0, fListBox.jsonData[i]);\n    }\n\n    var fliCollections = [].slice.call(fListBox.liCollections);\n    var tliCollections = [].slice.call(tListBox.liCollections);\n    fListBox.liCollections = [];\n\n    if (index) {\n      var toColl = tliCollections.splice(0, index);\n      tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n    } else {\n      tListBox.liCollections = tliCollections.concat(fliCollections);\n    }\n\n    fListBox.value = [];\n    listData = listData.filter(function (data) {\n      return data.isHeader !== true;\n    });\n    var sortedData = listData.filter(function (val) {\n      return tListBox.jsonData.indexOf(val) === -1;\n    });\n\n    for (var i = 0; i < sortedData.length; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      tListBox.jsonData.splice(index + i, 0, sortedData[i]);\n    }\n\n    tListBox.listData = listData;\n\n    if (fListBox.listData.length === fListBox.jsonData.length) {\n      fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n    } else if (fListBox.allowFiltering) {\n      for (var i = 0; i < fListBox.listData.length; i++) {\n        for (var j = 0; j < fListBox.jsonData.length; j++) {\n          if (fListBox.listData[i] === fListBox.jsonData[j]) {\n            fListBox.jsonData.splice(j, 1);\n          }\n        }\n      }\n\n      fListBox.listData = fListBox.sortedData = [];\n    }\n\n    if (isRefresh) {\n      var sourceElem = tListBox.renderItems(listData, tListBox.fields);\n      tListBox.updateListItems(sourceElem, tListBox.ulElement);\n      this.trigger('actionComplete', {\n        items: tempItems,\n        eventName: this.toolbarAction\n      });\n    } else {\n      tListBox.sortedData = listData;\n    }\n\n    fListBox.updateSelectedOptions();\n\n    if (fListBox.listData.length === 0) {\n      fListBox.l10nUpdate();\n    }\n  };\n\n  ListBox.prototype.changeData = function (fromIdx, toIdx, jsonToIdx, ele) {\n    var listData = [].slice.call(this.listData);\n    var jsonData = [].slice.call(this.jsonData);\n    var sortData = [].slice.call(this.sortedData);\n    var jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n    var sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n    var liColl = [].slice.call(this.liCollections);\n    listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n    jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n    sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n    liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n    this.listData = listData;\n    this.jsonData = jsonData;\n    this.liCollections = liColl;\n    this.sortedData = sortData;\n  };\n\n  ListBox.prototype.getSelectedItems = function () {\n    var ele = [];\n\n    if (this.selectionSettings.showCheckbox) {\n      [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach(function (cbox) {\n        ele.push(closest(cbox, '.' + 'e-list-item'));\n      });\n    } else {\n      ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n    }\n\n    return ele;\n  };\n\n  ListBox.prototype.getScopedListBox = function () {\n    var _this = this;\n\n    var listObj;\n\n    if (this.scope) {\n      [].slice.call(document.querySelectorAll(this.scope)).forEach(function (ele) {\n        if (getComponent(ele, _this.getModuleName())) {\n          listObj = getComponent(ele, _this.getModuleName());\n        }\n      });\n    }\n\n    return listObj;\n  };\n\n  ListBox.prototype.getGrabbedItems = function (args) {\n    var grabbItems = false;\n\n    for (var i = 0; i < this.value.length; i++) {\n      if (this.value[i] === this.getFormattedValue(args.target.getAttribute('data-value'))) {\n        grabbItems = true;\n        break;\n      }\n    }\n\n    if (grabbItems) {\n      for (var i = 0; i < this.value.length; i++) {\n        var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n\n        for (var j = 0; j < liColl.length; j++) {\n          if (this.value[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n            liColl[j].classList.add('e-grabbed');\n          }\n        }\n      }\n    }\n\n    var elems;\n\n    if (this.isAngular) {\n      elems = Array.prototype.slice.call(this.element.getElementsByClassName('e-list-parent')[0].querySelectorAll('.e-grabbed'));\n    } else {\n      elems = Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll('.e-grabbed'));\n    }\n\n    return elems;\n  };\n\n  ListBox.prototype.getDragArgs = function (args, isDragEnd) {\n    var elems = this.getGrabbedItems(args);\n\n    if (elems.length) {\n      if (isDragEnd) {\n        elems.push(args.target);\n      }\n    } else {\n      elems = [args.target];\n    }\n\n    return {\n      elements: elems,\n      items: this.getDataByElems(elems)\n    };\n  };\n\n  ListBox.prototype.onKeyDown = function (e) {\n    this.keyDownHandler(e);\n    e.stopPropagation();\n  };\n\n  ListBox.prototype.keyDownHandler = function (e) {\n    if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && !this.allowFiltering) {\n      if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n        return;\n      }\n\n      e.preventDefault();\n\n      if (e.keyCode === 32 && this.ulElement.children.length) {\n        this.selectHandler({\n          target: this.ulElement.getElementsByClassName('e-focused')[0],\n          ctrlKey: e.ctrlKey,\n          shiftKey: e.shiftKey\n        });\n      } else if (e.keyCode === 65 && e.ctrlKey) {\n        this.selectAll();\n      } else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n        this.moveUpDown(e.keyCode === 38 ? true : false, true);\n      } else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n        var listObj = this.tBListBox || this.getScopedListBox();\n\n        if (e.keyCode === 39) {\n          if (e.shiftKey) {\n            this.moveAllData(this, listObj, true);\n          } else {\n            this.moveData(this, listObj, true);\n          }\n        } else {\n          if (e.shiftKey) {\n            this.moveAllData(listObj, this, true);\n          } else {\n            this.moveData(listObj, this, true);\n          }\n        }\n      } else if (e.keyCode !== 37 && e.keyCode !== 39 && e.code !== 'KeyA') {\n        this.upDownKeyHandler(e);\n      }\n    } else if (this.allowFiltering) {\n      if (e.keyCode === 40 || e.keyCode === 38) {\n        this.upDownKeyHandler(e);\n      }\n    }\n  };\n\n  ListBox.prototype.upDownKeyHandler = function (e) {\n    var ul = this.ulElement;\n    var defaultIdx = e.keyCode === 40 || e.keyCode === 36 ? 0 : ul.childElementCount - 1;\n    var fliIdx = defaultIdx;\n    var fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n\n    if (fli) {\n      if (e.keyCode !== 35 && e.keyCode !== 36) {\n        fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n\n        if (e.keyCode === 40) {\n          fliIdx++;\n        } else {\n          fliIdx--;\n        }\n\n        if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n          return;\n        }\n      }\n\n      removeClass([fli], 'e-focused');\n    }\n\n    var cli = ul.children[fliIdx];\n\n    if (cli) {\n      fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n\n      if (fliIdx === -1) {\n        addClass([fli], 'e-focused');\n        return;\n      }\n\n      ul.children[fliIdx].focus();\n      ul.children[fliIdx].classList.add('e-focused');\n\n      if (!e.ctrlKey || !this.selectionSettings.showCheckbox && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n        this.selectHandler({\n          target: ul.children[fliIdx],\n          ctrlKey: e.ctrlKey,\n          shiftKey: e.shiftKey\n        }, true);\n      }\n\n      if (this.selectionSettings.showCheckbox && e.ctrlKey && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n        var selectedidx = Array.prototype.indexOf.call(ul.children, fli);\n        var sidx = e.code === 'Home' ? 0 : selectedidx;\n        var eidx = e.code === 'Home' ? selectedidx : ul.children.length - 1;\n\n        for (var i = sidx; i <= eidx; i++) {\n          var item = ul.children[i];\n          this.notify('updatelist', {\n            li: item,\n            e: {\n              target: this.ulElement.getElementsByClassName('e-focused')[0],\n              ctrlKey: e.ctrlKey,\n              shiftKey: e.shiftKey\n            },\n            module: 'listbox'\n          });\n        }\n      }\n    }\n  };\n\n  ListBox.prototype.KeyUp = function (e) {\n    var _this = this;\n\n    var char = String.fromCharCode(e.keyCode);\n    var isWordCharacter = char.match(/\\w/);\n\n    if (!isNullOrUndefined(isWordCharacter)) {\n      this.isValidKey = true;\n    }\n\n    this.isValidKey = e.keyCode === 8 || e.keyCode === 46 || this.isValidKey;\n\n    if (this.isValidKey) {\n      this.isValidKey = false;\n\n      switch (e.keyCode) {\n        default:\n          if (this.allowFiltering) {\n            var eventArgsData_1 = {\n              preventDefaultAction: false,\n              text: this.targetElement(),\n              updateData: function (dataSource, query, fields) {\n                if (eventArgsData_1.cancel) {\n                  return;\n                }\n\n                _this.isFiltered = true;\n                _this.remoteFilterAction = true;\n\n                _this.dataUpdater(dataSource, query, fields);\n              },\n              event: e,\n              cancel: false\n            };\n            this.trigger('filtering', eventArgsData_1, function (args) {\n              _this.isDataFetched = false;\n\n              if (args.cancel || _this.filterInput.value !== '' && _this.isFiltered) {\n                return;\n              }\n\n              if (!args.cancel && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                _this.inputString = _this.filterInput.value;\n\n                _this.filteringAction(_this.jsonData, new Query(), _this.fields);\n              }\n\n              if (!_this.isFiltered && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                _this.dataUpdater(_this.jsonData, new Query(), _this.fields);\n              }\n            });\n          }\n\n      }\n    }\n  };\n  /**\n   * To filter the data from given data source by using query.\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}.\n   */\n\n\n  ListBox.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFiltering = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n\n  ListBox.prototype.filteringAction = function (dataSource, query, fields) {\n    this.resetList(dataSource, fields, query);\n  };\n\n  ListBox.prototype.targetElement = function () {\n    this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n    return this.targetInputElement.value;\n  };\n\n  ListBox.prototype.dataUpdater = function (dataSource, query, fields) {\n    this.isDataFetched = false;\n    var backCommand = true;\n\n    if (this.targetElement().trim() === '') {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n\n      if (backCommand) {\n        this.remoteCustomValue = false;\n        this.onActionComplete(list, this.jsonData);\n        this.notify('reOrder', {\n          module: 'CheckBoxSelection',\n          enable: this.selectionSettings.showCheckbox,\n          e: this\n        });\n      }\n    } else {\n      this.resetList(dataSource, fields, query);\n    }\n  };\n\n  ListBox.prototype.focusOutHandler = function () {\n    var ele = this.list.getElementsByClassName('e-focused')[0];\n\n    if (ele) {\n      ele.classList.remove('e-focused');\n    }\n\n    if (this.allowFiltering) {\n      this.refreshClearIcon();\n    }\n  };\n\n  ListBox.prototype.getValidIndex = function (cli, index, keyCode) {\n    var cul = this.ulElement;\n\n    if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n      if (keyCode === 40 || keyCode === 36) {\n        index++;\n      } else {\n        index--;\n      }\n    }\n\n    if (index < 0 || index === cul.childElementCount) {\n      return -1;\n    }\n\n    cli = cul.childNodes[index];\n\n    if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n      index = this.getValidIndex(cli, index, keyCode);\n    }\n\n    return index;\n  };\n\n  ListBox.prototype.updateSelectedOptions = function () {\n    var _this = this;\n\n    var selectedOptions = [];\n    var values = [];\n    extend(values, this.value);\n    this.getSelectedItems().forEach(function (ele) {\n      if (!ele.classList.contains('e-grabbed')) {\n        selectedOptions.push(_this.getFormattedValue(ele.getAttribute('data-value')));\n      }\n    });\n\n    if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n      if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n        for (var i = 0; i < selectedOptions.length; i++) {\n          if (values.indexOf(selectedOptions[i]) > -1) {\n            continue;\n          } else {\n            values.push(selectedOptions[i]);\n          }\n        }\n\n        this.setProperties({\n          value: values\n        }, true);\n      } else {\n        this.setProperties({\n          value: selectedOptions\n        }, true);\n      }\n    }\n\n    this.updateSelectTag();\n    this.updateToolBarState();\n\n    if (this.tBListBox) {\n      this.tBListBox.updateToolBarState();\n    }\n  };\n\n  ListBox.prototype.clearSelection = function (values) {\n    var _this = this;\n\n    if (values === void 0) {\n      values = this.value;\n    }\n\n    if (this.selectionSettings.showCheckbox) {\n      var dvalue_1;\n      this.getSelectedItems().forEach(function (li) {\n        dvalue_1 = _this.getFormattedValue(li.getAttribute('data-value'));\n\n        if (values.indexOf(dvalue_1) < 0) {\n          li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n          li.removeAttribute('aria-selected');\n        }\n      });\n    }\n  };\n\n  ListBox.prototype.setSelection = function (values, isSelect, isText) {\n    var _this = this;\n\n    if (values === void 0) {\n      values = this.value;\n    }\n\n    if (isSelect === void 0) {\n      isSelect = true;\n    }\n\n    if (isText === void 0) {\n      isText = false;\n    }\n\n    var li;\n    var liselect;\n\n    if (values) {\n      values.forEach(function (value) {\n        var text;\n\n        if (isText) {\n          text = _this.getValueByText(value);\n        } else {\n          text = value;\n        }\n\n        if (typeof text === 'string') {\n          text = text.split('\\\\').join('\\\\\\\\');\n          li = _this.list.querySelector('[data-value=\"' + text.replace(/\"/g, '\\\\\"') + '\"]');\n        } else {\n          li = _this.list.querySelector('[data-value=\"' + text + '\"]');\n        }\n\n        if (li) {\n          if (_this.selectionSettings.showCheckbox) {\n            liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n          } else {\n            liselect = li.classList.contains('e-selected');\n          }\n\n          if (!isSelect && liselect || isSelect && !liselect && li) {\n            if (_this.selectionSettings.showCheckbox) {\n              _this.notify('updatelist', {\n                li: li,\n                module: 'listbox'\n              });\n\n              li.focus();\n            } else {\n              if (isSelect) {\n                li.classList.add(cssClass.selected);\n                li.setAttribute('aria-selected', 'true');\n                li.focus();\n              } else {\n                li.classList.remove(cssClass.selected);\n                li.removeAttribute('aria-selected');\n              }\n            }\n          }\n        }\n      });\n    }\n\n    this.updateSelectTag();\n  };\n\n  ListBox.prototype.updateSelectTag = function () {\n    var ele = this.getSelectTag();\n    var innerHTML = '';\n    ele.innerHTML = '';\n\n    if (this.value) {\n      for (var i = 0, len = this.value.length; i < len; i++) {\n        innerHTML += '<option selected>' + this.value[i] + '</option>';\n      }\n\n      ele.innerHTML += innerHTML;\n\n      for (var i = 0, len = ele.childNodes.length; i < len; i++) {\n        ele.childNodes[i].setAttribute('value', this.value[i].toString());\n      }\n    }\n\n    this.checkSelectAll();\n  };\n\n  ListBox.prototype.checkDisabledState = function (inst) {\n    return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n  };\n\n  ListBox.prototype.updateToolBarState = function () {\n    var _this = this;\n\n    if (this.toolbarSettings.items.length) {\n      var listObj_1 = this.getScopedListBox();\n      var wrap_1 = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n      this.toolbarSettings.items.forEach(function (value) {\n        var btn = wrap_1.querySelector('[data-value=\"' + value + '\"]');\n\n        switch (value) {\n          case 'moveAllTo':\n            btn.disabled = _this.checkDisabledState(_this);\n            break;\n\n          case 'moveAllFrom':\n            btn.disabled = _this.checkDisabledState(listObj_1);\n            break;\n\n          case 'moveFrom':\n            btn.disabled = listObj_1.value && listObj_1.value.length ? false : true;\n            break;\n\n          case 'moveUp':\n            btn.disabled = _this.value && _this.value.length && !_this.isSelected(_this.ulElement.children[0]) ? false : true;\n            break;\n\n          case 'moveDown':\n            btn.disabled = _this.value && _this.value.length && !_this.isSelected(_this.ulElement.children[_this.ulElement.childElementCount - 1]) ? false : true;\n            break;\n\n          default:\n            btn.disabled = _this.value && _this.value.length ? false : true;\n            break;\n        }\n      });\n    }\n  };\n\n  ListBox.prototype.setCheckboxPosition = function () {\n    var listWrap = this.list;\n\n    if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n      listWrap.classList.remove('e-right');\n    }\n\n    if (this.selectionSettings.checkboxPosition === 'Right') {\n      listWrap.classList.add('e-right');\n    }\n  };\n\n  ListBox.prototype.showCheckbox = function (showCheckbox) {\n    var index = 0;\n    var liColl = this.list.lastElementChild.querySelectorAll('li');\n    var liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n\n    if (showCheckbox) {\n      this.ulElement = this.renderItems(this.listData, this.fields);\n      this.mainList = this.ulElement;\n      this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n      this.list.appendChild(this.ulElement);\n\n      if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n        var l10nShow = new L10n(this.getModuleName(), {\n          selectAllText: 'Select All',\n          unSelectAllText: 'Unselect All'\n        }, this.locale);\n        this.showSelectAll = true;\n        this.selectAllText = l10nShow.getConstant('selectAllText');\n        this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n        this.popupWrapper = this.list;\n        this.checkBoxSelectionModule.checkAllParent = null;\n        this.notify('selectAll', {});\n        this.checkSelectAll();\n      }\n    } else {\n      if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n        this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n      }\n\n      for (index; index < liCollLen; index++) {\n        if (liColl[index].classList.contains('e-list-item')) {\n          liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n        }\n\n        if (liColl[index].hasAttribute('aria-selected')) {\n          liColl[index].removeAttribute('aria-selected');\n        }\n      }\n\n      this.mainList = this.ulElement;\n    }\n\n    this.value = [];\n  };\n\n  ListBox.prototype.isSelected = function (ele) {\n    if (!isNullOrUndefined(ele)) {\n      return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n    } else {\n      return false;\n    }\n  };\n\n  ListBox.prototype.getSelectTag = function () {\n    return this.list.getElementsByClassName('e-hidden-select')[0];\n  };\n\n  ListBox.prototype.getToolElem = function () {\n    return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n  };\n\n  ListBox.prototype.formResetHandler = function () {\n    this.value = this.initialSelectedOptions;\n  };\n  /**\n   * Return the module name.\n   *\n   * @private\n   * @returns {string} - Module name\n   */\n\n\n  ListBox.prototype.getModuleName = function () {\n    return 'listbox';\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n\n\n  ListBox.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  ListBox.prototype.getLocaleName = function () {\n    return 'listbox';\n  };\n\n  ListBox.prototype.destroy = function () {\n    this.unwireEvents();\n\n    if (this.element.tagName === 'EJS-LISTBOX') {\n      this.element.innerHTML = '';\n    } else {\n      this.element.style.display = 'inline-block';\n\n      if (this.toolbarSettings.items.length) {\n        this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n        detach(this.list.nextElementSibling);\n      }\n\n      this.list.parentElement.insertBefore(this.element, this.list);\n    }\n\n    _super.prototype.destroy.call(this);\n\n    this.enableRtlElements = [];\n    this.liCollections = null;\n    this.list = null;\n    this.ulElement = null;\n    this.mainList = null;\n    this.spinner = null;\n    this.rippleFun = null;\n\n    if (this.itemTemplate) {\n      this.clearTemplate();\n    }\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {ListBoxModel} newProp - Specifies the new properties.\n   * @param {ListBoxModel} oldProp - Specifies the old properties.\n   * @returns {void}\n   * @private\n   */\n\n\n  ListBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n\n    _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n\n    this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([wrap], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([wrap], newProp.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n          }\n\n          break;\n\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            this.list.classList.add('e-rtl');\n          } else {\n            this.list.classList.remove('e-rtl');\n          }\n\n          break;\n\n        case 'value':\n          removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n          this.clearSelection(this.value);\n          this.setSelection();\n          break;\n\n        case 'height':\n          this.setHeight();\n          break;\n\n        case 'enabled':\n          this.setEnable();\n          break;\n\n        case 'allowDragAndDrop':\n          if (newProp.allowDragAndDrop) {\n            this.initDraggable();\n          } else {\n            getComponent(this.ulElement, 'sortable').destroy();\n          }\n\n          break;\n\n        case 'allowFiltering':\n          if (this.allowFiltering) {\n            this.setFiltering();\n          } else {\n            this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n            this.filterParent = null;\n            removeClass([this.list], 'e-filter-list');\n          }\n\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this.allowFiltering) {\n            if (this.filterInput) {\n              Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n            }\n          }\n\n          break;\n\n        case 'scope':\n          if (this.allowDragAndDrop) {\n            getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n          }\n\n          if (this.toolbarSettings.items.length) {\n            if (oldProp.scope) {\n              getComponent(document.querySelector(oldProp.scope), this.getModuleName()).tBListBox = null;\n            }\n\n            if (newProp.scope) {\n              getComponent(document.querySelector(newProp.scope), this.getModuleName()).tBListBox = this;\n            }\n          }\n\n          break;\n\n        case 'toolbarSettings':\n          {\n            var ele = void 0;\n            var pos = newProp.toolbarSettings.position;\n            var toolElem = this.getToolElem();\n\n            if (pos) {\n              removeClass([wrap], ['e-right', 'e-left']);\n              wrap.classList.add('e-' + pos.toLowerCase());\n\n              if (pos === 'Left') {\n                wrap.insertBefore(toolElem, this.list);\n              } else {\n                wrap.appendChild(toolElem);\n              }\n            }\n\n            if (newProp.toolbarSettings.items) {\n              if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                ele = this.list.parentElement;\n                ele.parentElement.insertBefore(this.list, ele);\n                detach(ele);\n              }\n\n              this.initToolbarAndStyles();\n              this.wireToolbarEvent();\n            }\n\n            break;\n          }\n\n        case 'selectionSettings':\n          {\n            var showSelectAll = newProp.selectionSettings.showSelectAll;\n            var showCheckbox = newProp.selectionSettings.showCheckbox;\n\n            if (!isNullOrUndefined(showSelectAll)) {\n              this.showSelectAll = showSelectAll;\n\n              if (this.showSelectAll) {\n                var l10nSel = new L10n(this.getModuleName(), {\n                  selectAllText: 'Select All',\n                  unSelectAllText: 'Unselect All'\n                }, this.locale);\n                this.checkBoxSelectionModule.checkAllParent = null;\n                this.showSelectAll = true;\n                this.selectAllText = l10nSel.getConstant('selectAllText');\n                this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                this.popupWrapper = this.list;\n              }\n\n              this.notify('selectAll', {});\n              this.checkSelectAll();\n            }\n\n            if (!isNullOrUndefined(showCheckbox)) {\n              this.showCheckbox(showCheckbox);\n            }\n\n            if (this.selectionSettings.showCheckbox) {\n              this.setCheckboxPosition();\n            }\n\n            break;\n          }\n\n        case 'dataSource':\n          this.isDataSourceUpdate = true;\n          this.jsonData = [].slice.call(this.dataSource);\n          break;\n      }\n    }\n  };\n\n  var ListBox_1;\n\n  __decorate$6([Property('')], ListBox.prototype, \"cssClass\", void 0);\n\n  __decorate$6([Property([])], ListBox.prototype, \"value\", void 0);\n\n  __decorate$6([Property('')], ListBox.prototype, \"height\", void 0);\n\n  __decorate$6([Property(true)], ListBox.prototype, \"enabled\", void 0);\n\n  __decorate$6([Property(false)], ListBox.prototype, \"enablePersistence\", void 0);\n\n  __decorate$6([Property(false)], ListBox.prototype, \"allowDragAndDrop\", void 0);\n\n  __decorate$6([Property(1000)], ListBox.prototype, \"maximumSelectionLength\", void 0);\n\n  __decorate$6([Property(false)], ListBox.prototype, \"allowFiltering\", void 0);\n\n  __decorate$6([Property('')], ListBox.prototype, \"scope\", void 0);\n\n  __decorate$6([Property(true)], ListBox.prototype, \"ignoreCase\", void 0);\n\n  __decorate$6([Property(null)], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"beforeItemRender\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"filtering\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"select\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"change\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"beforeDrop\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"dragStart\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"drag\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"drop\", void 0);\n\n  __decorate$6([Event()], ListBox.prototype, \"dataBound\", void 0);\n\n  __decorate$6([Property(null)], ListBox.prototype, \"groupTemplate\", void 0);\n\n  __decorate$6([Property('Request failed')], ListBox.prototype, \"actionFailureTemplate\", void 0);\n\n  __decorate$6([Property(1000)], ListBox.prototype, \"zIndex\", void 0);\n\n  __decorate$6([Property(false)], ListBox.prototype, \"ignoreAccent\", void 0);\n\n  __decorate$6([Complex({}, ToolbarSettings)], ListBox.prototype, \"toolbarSettings\", void 0);\n\n  __decorate$6([Complex({}, SelectionSettings)], ListBox.prototype, \"selectionSettings\", void 0);\n\n  ListBox = ListBox_1 = __decorate$6([NotifyPropertyChanges], ListBox);\n  return ListBox;\n}(DropDownBase);\n\nvar listBoxClasses = {\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  clearIcon: 'e-clear-icon'\n};\n/**\n * export all modules from current location\n */\n\nvar __extends$7 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\n\n\nvar Mention =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$7(Mention, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {MentionModel} options - Specifies the MentionComponent model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function Mention(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n   * @param {MentionModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'minLength':\n          this.minLength = newProp.minLength;\n          break;\n\n        case 'suffixText':\n          this.suffixText = newProp.suffixText;\n          break;\n\n        case 'allowSpaces':\n          this.allowSpaces = newProp.allowSpaces;\n          break;\n\n        case 'mentionChar':\n          this.mentionChar = newProp.mentionChar;\n          break;\n\n        case 'showMentionChar':\n          this.showMentionChar = newProp.showMentionChar;\n          break;\n\n        case 'cssClass':\n          this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n      }\n    }\n  };\n\n  Mention.prototype.updateCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    this.setCssClass(newClass, [this.inputElement], oldClass);\n\n    if (this.popupObj) {\n      this.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n\n  Mention.prototype.setCssClass = function (cssClass$$1, elements, oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(cssClass$$1) && cssClass$$1 !== '') {\n      addClass(elements, cssClass$$1.split(' '));\n    }\n  };\n\n  Mention.prototype.initializeData = function () {\n    this.isSelected = false;\n    this.isFiltered = false;\n    this.beforePopupOpen = false;\n    this.initRemoteRender = false;\n    this.isListResetted = false;\n    this.isPopupOpen = false;\n    this.isCollided = false;\n    this.lineBreak = false;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Mention.prototype.preRender = function () {\n    this.initializeData();\n\n    _super.prototype.preRender.call(this);\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Mention.prototype.render = function () {\n    var isSelector = typeof this.target === 'string';\n    this.inputElement = !isNullOrUndefined(this.target) ? this.checkAndUpdateInternalComponent(isSelector ? document.querySelector(this.target) : this.target) : this.element;\n\n    if (this.isContentEditable(this.inputElement)) {\n      this.inputElement.setAttribute('contenteditable', 'true');\n      addClass([this.inputElement], ['e-mention']);\n\n      if (isNullOrUndefined(this.target)) {\n        addClass([this.inputElement], ['e-editable-element']);\n      }\n    }\n\n    this.inputElement.setAttribute('role', 'textbox');\n    this.queryString = this.elementValue();\n    this.wireEvent();\n  };\n\n  Mention.prototype.wireEvent = function () {\n    EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n    this.bindCommonEvent();\n  };\n\n  Mention.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n    this.unBindCommonEvent();\n  };\n\n  Mention.prototype.bindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.inputElement, {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Mention.prototype.hideSpinner = function () {\n    this.hideWaitingSpinner();\n  };\n\n  Mention.prototype.hideWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n    }\n\n    if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n      detach(this.spinnerTemplateElement);\n    }\n  };\n\n  Mention.prototype.checkAndUpdateInternalComponent = function (targetElement) {\n    if (!this.isVue && targetElement.classList.contains('e-richtexteditor')) {\n      return targetElement.querySelector('.e-content');\n    }\n\n    if (this.isVue && targetElement.nodeName === 'TEXTAREA' && targetElement.classList.contains('e-rte-hidden')) {\n      var parentElement = targetElement.parentElement;\n\n      if (parentElement && parentElement.classList.contains('e-richtexteditor')) {\n        return parentElement.querySelector('.e-content');\n      }\n    }\n\n    return targetElement;\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.showWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.popupObj)) {\n      if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n        this.spinnerElement = this.popupObj.element;\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n        showSpinner(this.spinnerElement);\n      }\n\n      if (!isNullOrUndefined(this.spinnerTemplate)) {\n        this.setSpinnerTemplate();\n      }\n    }\n  };\n\n  Mention.prototype.keyActionHandler = function (e) {\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n    var isTabAction = e.action === 'tab' || e.action === 'close';\n\n    if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape' && e.action !== 'space') {\n      this.renderList();\n    }\n\n    if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n      return;\n    }\n\n    if (e.action === 'escape') {\n      e.preventDefault();\n    }\n\n    this.isSelected = e.action === 'escape' ? false : this.isSelected;\n\n    switch (e.action) {\n      case 'down':\n      case 'up':\n        this.updateUpDownAction(e);\n        break;\n\n      case 'tab':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n          var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n          if (li) {\n            this.setSelection(li, e);\n          }\n\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n          }\n        }\n\n        break;\n\n      case 'enter':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n\n          if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n            this.updateSelectedItem(this.selectedLI, e, false, true);\n          }\n        }\n\n        break;\n\n      case 'escape':\n        if (this.isPopupOpen) {\n          this.hidePopup(e);\n        }\n\n        break;\n    }\n  };\n\n  Mention.prototype.updateUpDownAction = function (e) {\n    var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n      if (!isNullOrUndefined(li)) {\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n      }\n\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n      startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n      index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n\n    if (this.isPopupOpen) {\n      e.preventDefault();\n    }\n  };\n\n  Mention.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  Mention.prototype.unBindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n  };\n\n  Mention.prototype.onKeyUp = function (e) {\n    var rangetextContent;\n    this.isTyped = e.code !== 'Enter' && e.code !== 'Space' && e.code !== 'ArrowDown' && e.code !== 'ArrowUp' ? true : false;\n\n    if (document.activeElement != this.inputElement) {\n      this.inputElement.focus();\n    }\n\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n      rangetextContent = this.range.startContainer.textContent.split('');\n    }\n\n    var currentRange = this.getTextRange();\n    var lastWordRange = this.getLastLetter(currentRange); // eslint-disable-next-line security/detect-non-literal-regexp\n\n    var Regex = new RegExp(this.mentionChar, 'g');\n    var charRegex = new RegExp('[a-zA-Z]', 'g');\n\n    if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    }\n\n    if (!currentRange || !lastWordRange || e.code === 'Enter' || e.keyCode === 27 || lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1 || this.isContentEditable(this.inputElement) && this.range.startContainer && this.range.startContainer.previousElementSibling && this.range.startContainer.textContent.split('').length > 0 && (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 || this.range.startContainer.nodeType === 1)) {\n      if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1 && !this.isMatchedText() && currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ' && this.list && this.list.querySelectorAll('ul').length > 0) {\n        this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n        this.searchLists(e);\n      } else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange) && e.code !== 'ArrowDown' && e.code !== 'ArrowUp') {\n        this.hidePopup();\n        this.lineBreak = true;\n      }\n\n      return;\n    }\n\n    this.queryString = lastWordRange.replace(this.mentionChar, '');\n\n    if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) && this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n      this.searchLists(e);\n\n      if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n        if (!this.isContentEditable(this.inputElement)) {\n          this.showPopup();\n        } else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement && e.keyCode !== 9) {\n          this.showPopup();\n        }\n      }\n    } else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj || isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) || !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element))) {\n      if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n        this.searchLists(e);\n      }\n\n      this.resetList(this.dataSource, this.fields);\n\n      if (isNullOrUndefined(this.list)) {\n        this.initValue();\n      }\n\n      if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n        this.didPopupOpenByTypingInitialChar = true;\n        this.showPopup();\n\n        if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n          this.showWaitingSpinner();\n        }\n\n        this.lineBreak = false;\n      }\n    } else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 && e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n      this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n      this.searchLists(e);\n    } else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n      this.searchLists(e);\n\n      if (!this.isListResetted) {\n        this.resetList(this.dataSource, this.fields);\n      }\n    }\n\n    this.isListResetted = false;\n  };\n\n  Mention.prototype.isMatchedText = function () {\n    var isMatched = false;\n\n    for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n      if (this.getTextRange() && this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n        isMatched = true;\n      }\n    }\n\n    return isMatched;\n  };\n\n  Mention.prototype.getCurrentRange = function () {\n    this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n    return this.range;\n  };\n\n  Mention.prototype.searchLists = function (e) {\n    var _this = this;\n\n    this.isDataFetched = false;\n\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.render.call(this);\n\n      this.unWireListEvents();\n      this.wireListEvents();\n    }\n\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields);\n      return;\n    }\n\n    this.isSelected = false;\n    this.activeIndex = null;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.queryString,\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n\n        _this.isFiltered = true;\n\n        _this.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n        _this.filterAction(_this.dataSource, null, _this.fields);\n      }\n    });\n  };\n\n  Mention.prototype.filterAction = function (dataSource, query, fields) {\n    this.beforePopupOpen = true;\n\n    if (this.queryString.length >= this.minLength) {\n      this.resetList(dataSource, fields, query);\n      this.isListResetted = true;\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.beforePopupOpen = false;\n    }\n\n    this.setDataIndex();\n    this.renderReactTemplates();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n    if (this.isActive) {\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.inputElement.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n      }\n\n      var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n\n      if (focusItem) {\n        focusItem.classList.add(dropDownBaseClasses.selected);\n        this.selectedLI = focusItem;\n        var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n        this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n      }\n    }\n  };\n\n  Mention.prototype.setDataIndex = function () {\n    for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n      this.liCollections[i].setAttribute('data-index', i.toString());\n    }\n  };\n\n  Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this = this;\n\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n            }, 0);\n          } else {\n            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n        }\n\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n\n    return fields;\n  };\n\n  Mention.prototype.elementValue = function () {\n    if (!this.isContentEditable(this.inputElement)) {\n      return this.inputElement.value.replace(this.mentionChar, '');\n    } else {\n      return this.inputElement.textContent.replace(this.mentionChar, '');\n    }\n  };\n\n  Mention.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? this.elementValue() : this.queryString;\n\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n\n    if (!isNullOrUndefined(this.suggestionCount)) {\n      // Since defualt value of suggestioncount is 25, checked the condition\n      if (this.suggestionCount !== 25) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n\n      filterQuery.take(this.suggestionCount);\n    }\n\n    return filterQuery;\n  };\n\n  Mention.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n\n  Mention.prototype.getTextRange = function () {\n    var text;\n\n    if (!this.isContentEditable(this.inputElement)) {\n      var component = this.inputElement;\n\n      if (!isNullOrUndefined(component)) {\n        var startPos = component.selectionStart;\n\n        if (component.value && startPos >= 0) {\n          text = component.value.substring(0, startPos);\n        }\n      }\n    } else {\n      if (this.range) {\n        var selectedElem = this.range.startContainer;\n\n        if (!isNullOrUndefined(selectedElem)) {\n          var workingNodeContent = selectedElem.textContent;\n          var selectStartOffset = this.range.startOffset;\n\n          if (workingNodeContent && selectStartOffset >= 0) {\n            text = workingNodeContent.substring(0, selectStartOffset);\n          }\n        }\n      }\n    }\n\n    return text;\n  };\n\n  Mention.prototype.getLastLetter = function (text) {\n    if (isNullOrUndefined(text)) {\n      return '';\n    }\n\n    var textValue = text.replace(/\\u00A0/g, ' ');\n    var words = textValue.split(/\\s+/);\n    var wordCnt = words.length - 1;\n    return words[wordCnt].trim();\n  };\n\n  Mention.prototype.isContentEditable = function (element) {\n    return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.showPopup = function () {\n    this.beforePopupOpen = true;\n\n    if (document.activeElement != this.inputElement) {\n      this.inputElement.focus();\n    }\n\n    this.queryString = this.didPopupOpenByTypingInitialChar ? this.queryString : '';\n    this.didPopupOpenByTypingInitialChar = false;\n\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n    }\n\n    if (!this.isTyped) {\n      this.resetList(this.dataSource, this.fields);\n    }\n\n    if (isNullOrUndefined(this.list)) {\n      this.initValue();\n    }\n\n    this.renderPopup();\n    attributes(this.inputElement, {\n      'aria-activedescendant': this.selectedElementID\n    });\n\n    if (this.selectedElementID == null) {\n      this.inputElement.removeAttribute('aria-activedescendant');\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.hidePopup = function (e) {\n    this.removeSelection();\n    this.closePopup(0, e);\n  };\n\n  Mention.prototype.closePopup = function (delay, e) {\n    var _this = this;\n\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.inputElement.removeAttribute('aria-owns');\n    this.inputElement.removeAttribute('aria-activedescendant');\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('closed', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && _this.popupObj) {\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n\n  Mention.prototype.renderPopup = function () {\n    var _this = this;\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle_1;\n\n        if (isNullOrUndefined(_this.target)) {\n          popupEle_1 = _this.createElement('div', {\n            id: _this.inputElement.id + '_popup',\n            className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n          });\n        } else {\n          popupEle_1 = _this.element;\n\n          if (_this.cssClass != null) {\n            addClass([popupEle_1], _this.cssClass.split(' '));\n          }\n        }\n\n        if (!isNullOrUndefined(_this.target)) {\n          popupEle_1.id = _this.inputElement.id + '_popup';\n        }\n\n        _this.listHeight = formatUnit(_this.popupHeight);\n\n        if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n          var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n          if (!isNullOrUndefined(li)) {\n            _this.selectedLI = li;\n\n            var value = _this.getFormattedValue(li.getAttribute('data-value'));\n\n            _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n          }\n        }\n\n        append([_this.list], popupEle_1);\n\n        if (_this.inputElement.parentElement && _this.inputElement.parentElement.parentElement && _this.inputElement.parentElement.parentElement.classList.contains('e-richtexteditor')) {\n          if (popupEle_1.firstElementChild && popupEle_1.firstElementChild.childElementCount > 0) {\n            popupEle_1.firstElementChild.setAttribute('aria-owns', _this.inputElement.parentElement.parentElement.id);\n          }\n        }\n\n        if (!_this.popupObj || !document.body.contains(_this.popupObj.element) || !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n          document.body.appendChild(popupEle_1);\n        }\n\n        var coordinates_1;\n        popupEle_1.style.visibility = 'hidden';\n\n        _this.setHeight(popupEle_1);\n\n        var offsetValue = 0;\n        var left = 0;\n\n        _this.initializePopup(popupEle_1, offsetValue, left);\n\n        _this.checkCollision(popupEle_1);\n\n        popupEle_1.style.visibility = 'visible';\n        addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n\n          _this.wireListEvents();\n        }\n\n        _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n        attributes(_this.inputElement, {\n          'aria-owns': _this.inputElement.id + '_options',\n          'aria-activedescendant': _this.selectedElementID\n        });\n\n        if (_this.selectedElementID == null) {\n          _this.inputElement.removeAttribute('aria-activedescendant');\n        }\n\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          cancel: false,\n          animation: animModel\n        };\n\n        _this.trigger('opened', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            _this.renderReactTemplates();\n\n            _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.inputElement : null);\n\n            if (isNullOrUndefined(_this.getTriggerCharPosition())) {\n              return;\n            }\n\n            coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n\n            if (!_this.isCollided) {\n              popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n            } else {\n              popupEle_1.style.left = formatUnit(coordinates_1.left);\n              popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(_this.popupHeight.toString()));\n              _this.isCollided = false;\n            }\n\n            popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n\n            _this.setHeight(popupEle_1);\n\n            popupEle_1.style.zIndex = _this.zIndex === 1000 ? getZindexPartial(popupEle_1).toString() : _this.zIndex.toString();\n          } else {\n            _this.beforePopupOpen = false;\n\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n\n  Mention.prototype.setHeight = function (popupEle) {\n    if (this.popupHeight !== 'auto' && this.list) {\n      this.list.style.maxHeight = (parseInt(this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n      popupEle.style.maxHeight = formatUnit(this.popupHeight);\n    } else {\n      popupEle.style.height = 'auto';\n    }\n  };\n\n  Mention.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'mention')) {\n      var coordinates = this.getCoordinates(this.inputElement, this.getTriggerCharPosition());\n      var collision = isCollide(popupEle, null, coordinates.left, coordinates.top);\n\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n        this.isCollided = true;\n      }\n\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  Mention.prototype.getTriggerCharPosition = function () {\n    var mostRecentTriggerCharPos;\n    var currentRange = this.getTextRange();\n\n    if (currentRange !== undefined && currentRange !== null) {\n      mostRecentTriggerCharPos = 0;\n      var idx = currentRange.lastIndexOf(this.mentionChar);\n\n      if (idx >= mostRecentTriggerCharPos) {\n        mostRecentTriggerCharPos = idx;\n      }\n    }\n\n    return mostRecentTriggerCharPos ? mostRecentTriggerCharPos : 0;\n  };\n\n  Mention.prototype.initializePopup = function (element, offsetValue, left) {\n    var _this = this;\n\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputElement,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      actionOnScroll: 'hide',\n      zIndex: this.zIndex,\n      close: function () {\n        _this.destroyPopup();\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n\n        _this.setDataIndex();\n      }\n    });\n  };\n\n  Mention.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    return width;\n  };\n\n  Mention.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.popupObj.destroy();\n\n    if (isNullOrUndefined(this.target)) {\n      detach(this.popupObj.element);\n    } else {\n      this.popupObj.element.innerHTML = '';\n      this.popupObj.element.removeAttribute('style');\n      this.popupObj.element.removeAttribute('aria-disabled');\n    }\n  };\n\n  Mention.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n      this.hidePopup(e);\n    }\n  };\n\n  Mention.prototype.getCoordinates = function (element, position) {\n    var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n    var div;\n    var span;\n    var range;\n    var globalRange;\n    var coordinates;\n    var computed;\n    var rect;\n\n    if (!this.isContentEditable(this.inputElement)) {\n      div = this.createElement('div', {\n        className: 'e-form-mirror-div'\n      });\n      document.body.appendChild(div);\n      computed = getComputedStyle(element);\n      div.style.position = 'absolute';\n      div.style.visibility = 'hidden'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      properties.forEach(function (prop) {\n        // eslint-disable-next-line security/detect-object-injection\n        div.style[prop] = computed[prop];\n      });\n      div.textContent = element.value.substring(0, position);\n\n      if (this.inputElement.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n      }\n\n      span = this.createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      rect = element.getBoundingClientRect();\n    } else {\n      var selectedNodePosition = this.getTriggerCharPosition();\n      globalRange = this.range;\n      range = document.createRange();\n\n      if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n        range.setStart(globalRange.startContainer, selectedNodePosition);\n        range.setEnd(globalRange.startContainer, selectedNodePosition);\n      } else {\n        range.setStart(globalRange.startContainer, globalRange.startOffset);\n        range.setEnd(globalRange.startContainer, globalRange.endOffset);\n      }\n\n      this.isTyped = false;\n      range.collapse(false);\n      rect = range.getBoundingClientRect().top === 0 ? range.startContainer.getClientRects()[0] : range.getBoundingClientRect();\n    }\n\n    var doc = document.documentElement;\n    var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n    var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n    var width = 0;\n\n    if (!isNullOrUndefined(range) && range.getBoundingClientRect().top === 0) {\n      for (var i = 0; i < this.range.startContainer.childNodes.length; i++) {\n        if (this.range.startContainer.childNodes[i].nodeType !== Node.TEXT_NODE && this.range.startContainer.childNodes[i].textContent.trim() !== '') {\n          width += this.range.startContainer.childNodes[i].getClientRects()[0].width;\n        } else if (this.range.startContainer.childNodes[i].textContent !== '') {\n          var span_1 = document.createElement(\"span\");\n          span_1.innerHTML = this.range.startContainer.childNodes[i].nodeValue;\n          document.body.appendChild(span_1);\n          var textNodeWidth = span_1.offsetWidth;\n          document.body.removeChild(span_1);\n          width += textNodeWidth;\n        }\n      }\n    }\n\n    if (!this.isContentEditable(this.inputElement)) {\n      coordinates = {\n        top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) + parseInt(computed.fontSize, 10) + 3 - element.scrollTop - (this.isCollided ? 10 : 0),\n        left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n      };\n      document.body.removeChild(div);\n    } else {\n      coordinates = {\n        top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10) - (this.isCollided ? 10 : 0),\n        left: rect.left + windowLeft + width\n      };\n    }\n\n    return coordinates;\n  };\n\n  Mention.prototype.initValue = function () {\n    this.renderList();\n\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n\n  Mention.prototype.updateValues = function () {\n    var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (!isNullOrUndefined(li)) {\n      this.setSelection(li, null);\n    }\n  };\n\n  Mention.prototype.renderList = function () {\n    _super.prototype.render.call(this);\n\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, 'click', this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, 'click', this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n\n  Mention.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n\n    if (!this.isValidLI(li)) {\n      return;\n    }\n\n    this.isSelected = true;\n    this.setSelection(li, e);\n    var delay = 100;\n    this.closePopup(delay, e);\n    this.inputElement.focus();\n  };\n\n  Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n\n    if (!preventSelect && !isNullOrUndefined(e) && !(e.action === \"down\" || e.action === \"up\")) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n          _this.isSelected = false;\n          _this.isSelectCancel = true;\n        } else {\n          _this.selectEventCallback(li, selectedData, value);\n\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, selectedData, value);\n\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n\n  Mention.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n\n  Mention.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n      this.setScrollPosition(e);\n    }\n\n    if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n      return;\n    }\n\n    if (isNullOrUndefined(e) || this.setValue(e)) {\n      return;\n    }\n  };\n\n  Mention.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n\n  Mention.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n\n  Mention.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop;\n      }\n    }\n  };\n\n  Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n\n    if (selectLi) {\n      addClass([li], dropDownBaseClasses.selected);\n    }\n\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n\n  Mention.prototype.detachChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  Mention.prototype.setValue = function (e) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate();\n      }\n\n      this.updateMentionValue(e);\n      return true;\n    } else {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate(e);\n      } else {\n        this.updateMentionValue(e);\n      }\n\n      return true;\n    }\n  };\n\n  Mention.prototype.updateMentionValue = function (e) {\n    var dataItem = this.getItemData();\n    var textSuffix;\n    var value;\n    var endPos;\n    var range;\n    var globalRange;\n    var selection = this.inputElement.ownerDocument.getSelection();\n    var startPos = this.getTriggerCharPosition();\n    textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n\n    if (this.isSelectCancel) {\n      this.isSelectCancel = false;\n      return;\n    }\n\n    if (dataItem.text !== null) {\n      value = this.mentionVal(dataItem.text);\n    }\n\n    if (!this.isContentEditable(this.inputElement)) {\n      var myField = this.inputElement;\n      var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n      value += textSuffix;\n      endPos = startPos + this.mentionChar.length;\n      endPos += currentTriggerSnippet.length;\n      myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n      myField.selectionStart = startPos + value.length;\n      myField.selectionEnd = startPos + value.length;\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.onChangeEvent(e);\n    } else {\n      endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n\n      if (this.range && this.range.startContainer.textContent.trim() !== this.mentionChar) {\n        endPos = this.range.endOffset;\n      }\n\n      globalRange = this.range;\n      range = document.createRange();\n\n      if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1 || this.getTextRange() && this.getTextRange().trim() === this.mentionChar) {\n        range.setStart(globalRange.startContainer, startPos);\n        range.setEnd(globalRange.startContainer, endPos);\n      } else {\n        if (globalRange.commonAncestorContainer.textContent.trim() !== '' && !isNullOrUndefined(globalRange.commonAncestorContainer.textContent.trim()) && this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n          range.setStart(globalRange.startContainer, globalRange.startOffset - 1);\n          range.setEnd(globalRange.startContainer, globalRange.endOffset - 1);\n        } else {\n          range.setStart(globalRange.startContainer, globalRange.startOffset);\n          range.setEnd(globalRange.startContainer, globalRange.endOffset);\n        }\n      }\n\n      this.isTyped = false;\n      range.deleteContents();\n      var element = this.createElement('div');\n      element.innerHTML = value;\n      var frag = document.createDocumentFragment();\n      var node = void 0;\n      var lastNode = void 0; // eslint-disable-next-line no-cond-assign\n\n      while (node = element.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n\n      range.insertNode(frag);\n\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      this.onChangeEvent(e);\n    }\n  };\n\n  Mention.prototype.mentionVal = function (value) {\n    var showChar = this.showMentionChar ? this.mentionChar : '';\n\n    if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n      value = this.displayTempElement.innerHTML;\n    }\n\n    if (this.isContentEditable(this.inputElement)) {\n      return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n    } else {\n      return showChar + value;\n    }\n  };\n\n  Mention.prototype.setDisplayTemplate = function (e) {\n    var _this = this;\n\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['displayTemplate']);\n\n      if (this.displayTempElement) {\n        detach(this.displayTempElement);\n        this.displayTempElement = null;\n      }\n    }\n\n    if (!this.displayTempElement) {\n      this.displayTempElement = this.createElement('div');\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.displayTempElement.innerHTML = '';\n    }\n\n    compiledString = compile(this.displayTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n\n    if (displayCompTemp && displayCompTemp.length > 0) {\n      append(displayCompTemp, this.displayTempElement);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.renderTemplates();\n    } else {\n      this.renderTemplates(function () {\n        _this.updateMentionValue(e);\n      });\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Mention.prototype.renderTemplates = function (callBack) {\n    this.renderReactTemplates(callBack);\n  };\n\n  Mention.prototype.setSpinnerTemplate = function () {\n    var _this = this;\n\n    var compiledString; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    if (this.isReact) {\n      this.clearTemplate(['spinnerTemplate']);\n\n      if (this.spinnerTemplateElement) {\n        detach(this.spinnerTemplateElement);\n        this.spinnerTemplateElement = null;\n      }\n    }\n\n    if (!this.spinnerTemplateElement) {\n      this.spinnerTemplateElement = this.createElement('div');\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.spinnerTemplateElement.innerHTML = '';\n    }\n\n    compiledString = compile(this.spinnerTemplate); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n\n    if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n      for (var i = 0; i < spinnerCompTemp.length; i++) {\n        this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n      }\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.isReact) {\n      this.renderTemplates();\n      this.popupObj.element.appendChild(this.spinnerTemplateElement);\n    } else {\n      this.renderTemplates(function () {\n        _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n      });\n    }\n  };\n\n  Mention.prototype.onChangeEvent = function (eve) {\n    this.isSelected = false;\n    var items = this.detachMentionChanges(this.itemData);\n    var preItems;\n\n    if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n      preItems = Object.defineProperties({}, {\n        value: {\n          value: this.previousItemData,\n          enumerable: true\n        },\n        text: {\n          value: this.previousItemData,\n          enumerable: true\n        }\n      });\n    } else {\n      preItems = this.previousItemData;\n    }\n\n    var eventArgs = {\n      e: eve,\n      item: this.item,\n      itemData: items,\n      previousItem: this.previousSelectedLI,\n      previousItemData: preItems,\n      isInteracted: eve ? true : false,\n      value: this.item.innerHTML,\n      element: this.inputElement\n    };\n    this.trigger('change', eventArgs);\n  };\n\n  Mention.prototype.detachMentionChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  Mention.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n\n  Mention.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  Mention.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n\n  Mention.prototype.setHover = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n\n  Mention.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  Mention.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n\n  Mention.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   */\n\n\n  Mention.prototype.search = function (text, positionX, positionY) {\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n    }\n\n    var currentRange = this.getTextRange();\n    var lastWordRange = this.getLastLetter(currentRange);\n\n    if (this.ignoreCase && (text === lastWordRange || text === lastWordRange.toLowerCase()) || !this.ignoreCase && text === lastWordRange) {\n      this.resetList(this.dataSource, this.fields);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n\n      return;\n    }\n\n    if (isNullOrUndefined(this.list)) {\n      this.renderList();\n      this.renderPopup();\n    } else {\n      this.showPopup();\n    }\n\n    this.popupObj.element.style.left = formatUnit(positionX);\n    this.popupObj.element.style.top = formatUnit(positionY);\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n\n\n  Mention.prototype.destroy = function () {\n    this.hidePopup();\n    this.unWireEvent();\n\n    if (this.list) {\n      this.unWireListEvents();\n    }\n\n    if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  Mention.prototype.getLocaleName = function () {\n    return 'mention';\n  };\n\n  Mention.prototype.getNgDirective = function () {\n    return 'EJS-MENTION';\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n\n\n  Mention.prototype.getModuleName = function () {\n    return 'mention';\n  };\n\n  __decorate$7([Property(null)], Mention.prototype, \"cssClass\", void 0);\n\n  __decorate$7([Property('@')], Mention.prototype, \"mentionChar\", void 0);\n\n  __decorate$7([Property(false)], Mention.prototype, \"showMentionChar\", void 0);\n\n  __decorate$7([Property(false)], Mention.prototype, \"allowSpaces\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"suffixText\", void 0);\n\n  __decorate$7([Property(25)], Mention.prototype, \"suggestionCount\", void 0);\n\n  __decorate$7([Property(0)], Mention.prototype, \"minLength\", void 0);\n\n  __decorate$7([Property('None')], Mention.prototype, \"sortOrder\", void 0);\n\n  __decorate$7([Property(true)], Mention.prototype, \"ignoreCase\", void 0);\n\n  __decorate$7([Property(false)], Mention.prototype, \"highlight\", void 0);\n\n  __decorate$7([Property()], Mention.prototype, \"locale\", void 0);\n\n  __decorate$7([Property('auto')], Mention.prototype, \"popupWidth\", void 0);\n\n  __decorate$7([Property('300px')], Mention.prototype, \"popupHeight\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"displayTemplate\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"itemTemplate\", void 0);\n\n  __decorate$7([Property('No records found')], Mention.prototype, \"noRecordsTemplate\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"spinnerTemplate\", void 0);\n\n  __decorate$7([Property()], Mention.prototype, \"target\", void 0);\n\n  __decorate$7([Property([])], Mention.prototype, \"dataSource\", void 0);\n\n  __decorate$7([Property(null)], Mention.prototype, \"query\", void 0);\n\n  __decorate$7([Property('Contains')], Mention.prototype, \"filterType\", void 0);\n\n  __decorate$7([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], Mention.prototype, \"fields\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"actionBegin\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"actionComplete\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"actionFailure\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"change\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"beforeOpen\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"opened\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"closed\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"select\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"filtering\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"created\", void 0);\n\n  __decorate$7([Event()], Mention.prototype, \"destroyed\", void 0);\n\n  Mention = __decorate$7([NotifyPropertyChanges], Mention);\n  return Mention;\n}(DropDownBase);\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\n\nexport { incrementalSearch, Search, escapeCharRegExp, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox, Mention };","map":{"version":3,"names":["Animation","Browser","ChildProperty","Complex","Component","Event","EventHandler","KeyboardEvents","L10n","NotifyPropertyChanges","Property","SanitizeHtmlHelper","addClass","append","attributes","classList","closest","compile","createElement","detach","extend","formatUnit","getComponent","getUniqueID","getValue","isNullOrUndefined","isUndefined","matches","prepend","remove","removeClass","rippleEffect","select","selectAll","setStyleAttribute","setValue","DataManager","DataUtil","Predicate","Query","ListBase","Sortable","cssClass","moveTo","Popup","createSpinner","getZindexPartial","hideSpinner","isCollide","showSpinner","Input","TextBox","Button","createCheckBox","TreeView","queryString","prevString","matches$1","activeClass","prevElementId","incrementalSearch","keyCode","items","selectedIndex","ignoreCase","elementId","String","fromCharCode","setTimeout","index","toLowerCase","i","length","contains","listItems","strLength","text","item","innerText","substr","push","Search","inputVal","searchType","dataSource","fields","type","undefined","itemData","queryStr","toLocaleLowerCase","escapeCharRegExp","_loop_1","itemsData","filterValue","checkField_1","fieldValue_1","split","filter","data","Array","prototype","slice","call","forEach","value","isHeader","textContent","toString","indexOf","getAttribute","replace","RegExp","test","state_1","resetIncrementalSearchValues","highlightSearch","element","query","ignoreRegex","replaceQuery","findTextNode","pattern","childNodes","nodeType","trim","nodeValue","innerHTML","revertHighlightSearch","content","contentElement","querySelectorAll","parent_1","parentNode","document","createTextNode","replaceChild","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","__decorate","decorators","target","key","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FieldSettings","_super","apply","dropDownBaseClasses","root","rtl","selected","hover","noData","fixedHead","focus","li","group","disabled","grouping","ITEMTEMPLATE_PROPERTY","DISPLAYTEMPLATE_PROPERTY","SPINNERTEMPLATE_PROPERTY","VALUETEMPLATE_PROPERTY","GROUPTEMPLATE_PROPERTY","HEADERTEMPLATE_PROPERTY","FOOTERTEMPLATE_PROPERTY","NORECORDSTEMPLATE_PROPERTY","ACTIONFAILURETEMPLATE_PROPERTY","HIDE_GROUPLIST","DropDownBase","options","_this","preventChange","isAngular","isPreventChange","isDynamicDataChange","addedNewItem","getPropObject","prop","newProp","oldProp","newProperty","oldProperty","propName","getValueByText","ignoreAccent","listData","checkValueCase","isTextByValue","typeOfData","typeof","_i","dataSource_1","checkingAccent","checkIgnoreCase","getItemValue","checkNonIgnoreCase","itemValue","compareValue_1","dataItem","ignoreDiacritics","textItem","typedText","getFormattedValue","templateCompiler","baseTemplate","checkTemplate","exception","l10nUpdate","actionFailure","ele","getModuleName","ulElement","list","noRecordsTemplate","actionFailureTemplate","template","compiledString","templateId","actionFailureTemplateId","noRecordsTemplateId","tempaltecheck","templateName","noDataCompTemp","isStringTemplate","nodeName","liElem","add","setAttribute","appendChild","renderReactTemplates","l10nLocale","componentLocale","getLocaleName","locale","getConstant","l10n","getTextByValue","properties","allowCustomValue","parseFloat","setEnableRtl","enableRtlElements","enableRtl","initialize","e","bindEvent","id","tagName","jsonElement","createJsonFromElement","setProperties","resetList","renderItemsBySelect","setListData","getPersistData","addOnPersist","updateDataAttribute","invalidAttr","attr","a","name","htmlAttributes","option","getJSONfromOption","optionGroup","label","child","updateFields","groupBy","iconCss","field","options_1","json","preRender","scrollTimer","isRequested","isDataFetched","itemTemplateId","displayTemplateId","spinnerTemplateId","valueTemplateId","groupTemplateId","headerTemplateId","footerTemplateId","event","isActive","eventArgs","cancel","trigger","emptyDataRequest","executeQuery","getQuery","then","result","renderItems","onActionComplete","groupTemplate","renderGroupTemplate","bindChildItems","catch","onActionFailure","dataManager","executeLocal","localDataArgs","itemTemplate","childElementCount","children","updateDataList","childNode","remainingItems","sortedData","liCollections","updateListValues","raiseDataBound","findListElement","findNode","attribute","liElement","listArr","dataBoundEventArgs","spliceData","skip","listElements","templateListItem","createListItemFromArray","listOption","createListItemFromJson","isReact","clearTemplate","fixedHeaderElement","querySelector","postRender","listElement","focusItem","selectedItem","listEle","groupTemplateID","headerItems","groupcheck","groupValue","tempHeaders","isGroupChecking","notify","module","createListItems","sortOrder","getSortedDataSource","groupDataSource","take","createList","fieldValues","showIcon","ariaAttributes","groupItemRole","setFloatingHeader","className","style","display","setFixedHeader","zIndex","scrollStop","liHeight","parseInt","getComputedStyle","getValidLi","getPropertyValue","topIndex","Math","round","scrollTop","currentLi","top","templateID","itemcheck","renderContentTemplate","listDataType","isNullData","parentElement","borderWidth","defaultView","isNaN","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","liWidth","offsetWidth","width","firstLi","textField","getDataSource","addSorting","getIndexByValue","getItems","dispatchEvent","evt","createEvent","initEvent","setFields","selectData","updateSelectElementData","isFiltering","updateSelection","renderList","render","updateDataSource","props","setUpdateInitial","updateData","j","keys","onPropertyChanged","_a","setZIndex","isEmptyData","attrs","rippleModel","duration","selector","rippleFun","wrapperElement","insertBefore","addItem","itemIndex","newList","itemsCount","selectedItemValue","itemText","itemCheck","addItemTemplate","updateActionCompleteData","updateAddItemList","listGroupItem","tempLi","splice","validationAttribute","hidden","removeAttribute","attributes$$1","itemCount","getDataByValue","_b","_c","destroy","body","__extends$1","__decorate$1","dropDownListClasses","disable","base","input","inputFocus","icon","iconAnimation","device","backIcon","filterBarClearIcon","filterInput","filterParent","mobileFilter","footer","header","clearIcon","clearIconHide","popupFullScreen","disableIcon","hiddenElement","inputObject","container","buttons","DropDownList","isListSearched","valueTempElement","opacity","initializeData","activeIndex","isPopupOpen","isDocumentClick","isInteracted","isFilterFocus","beforePopupOpen","initial","initRemoteRender","isNotSearchList","isTyped","isSelected","preventFocus","preventAutoFill","isValidKey","typedString","isEscapeKey","isPreventBlur","isTabKey","actionCompleteData","isUpdated","actionData","prevSelectPoints","isSelectCustom","isDropDownClick","preventAltUp","isCustomFilter","isSecondClick","previousValue","keyConfigure","tab","enter","escape","end","home","down","up","pageUp","pageDown","open","close","hide","space","popupObj","unWireListEvents","wireListEvents","floatLabelChange","floatLabelType","floatElement","inputWrapper","inputElement","resetHandler","preventDefault","clearAll","resetFocusElement","removeHover","removeSelection","removeFocus","previousItemData","resetSelection","getItemData","onChangeEvent","selectedLI","allowFiltering","cloneNode","setSelection","updateIconState","cloneElements","setHTMLAttributes","htmlAttr","updatedClassValue","enabled","setEnable","readonly","dataBind","defaultAttr","validateAttr","setPlaceholder","getAriaAttributes","setEnabled","targetElement","tabIndex","hidePopup","preventTabIndex","getNgDirective","getElementByText","getElementByValue","listItems_1","liItem","initValue","updateValues","setHiddenValue","showClearButton","onBlurHandler","relatedTarget","currentTarget","isFilterLayout","activeElement","focusOutAction","focusOut","onFocusOut","clearButton","onFocus","args","resetValueHandler","formElement","val","wireEvent","dropDownClick","focusIn","onSearch","bindCommonEvent","isDevice","keyboardModule","keyAction","keyActionHandler","bind","keyConfigs","eventName","mobileKeyActionHandler","bindClearEvent","unBindCommonEvent","onMouseClick","onMouseOver","onMouseLeave","charCode","searchKeyEvent","onServerIncrementalSearch","isValidLI","history","back","delay","closePopup","setHover","hoveredItem","hasAttribute","setScrollPosition","spinnerElement","filterInputObj","preventAction","action","preventHomeEnd","isNavigation","isEditTextBox","isTabAction","updateUpDownAction","pageUpSelection","getPageCount","pageDownSelection","updateHomeEndAction","showPopup","focusDropDown","selectCurrentItem","selectCurrentValueOnTab","focusEle","isSelectFocusItem","startIndex","nextItem","findLi","getBoundingClientRect","height","steps","previousItem","unWireEvent","checkSelector","onDocumentClick","isIE","info","activeStateChange","which","button","proxy_1","updateSelectedItem","preventSelect","isSelection","selectedData","detachChanges","selectEventCallback","setSelectOptions","checkFieldValue","focusedItem","activeItem","valueTemplate","setValueTemplate","previousSibling","isFilterElement","clearElement","removeProperty","previousSelectedLI","getElementsByClassName","dropdownCompiler","dropdownTemplate","valuecheck","valueCompTemp","selectedItems","dataValue","dataText","eve","detachChangeEvent","defineProperties","enumerable","preItems","selectedElement","onFilterUp","ctrlKey","searchLists","onFilterDown","getSelectionPoints","removeFillSelection","selection","setSelectionRange","filterQuery","clone","filterType","dataType","where","start","abs","selectionStart","selectionEnd","visibility","eventArgs_1","preventDefaultAction","filteringAction","baseEventArgs","focusIndexItem","setSearchBox","popupElement","createInput","placeholder","filterBarPlaceholder","clearIconElement","clearText","searchKeyModule","onInput","pasteHandler","renderPopup","checkVal","some","x","setInputValue","updateActionCompleteDataValues","addNewItem","fieldValue","checkField","newElement","value_1","isExist","actionCompleteDataUpdate","highlightedItem","refreshPopup","popupEle","searchBox","listHeight","popupHeight","headerTemplate","setHeaderTemplate","footerTemplate","setFooterTemplate","searchBoxHeight","maxHeight","offsetValue","left","getOffsetValue","firstItem","isEmptyList","textIndent","paddingLeft","getFocusElement","createPopup","checkCollision","collision","X","Y","position","setSearchBoxPosition","backIconElement","clickOnBackIcon","scrollParentElements","getScrollableParent","scrollParentElements_1","scrollHandler","selectedElementID","inputParent","animModel","popupInstance","popup","animation","show","destroyPopup","marginTop","resolveCollision","popupStyles","borderTop","borderBottom","setPopupPosition","setWidth","targetType","relateTo","offsetY","offsetX","actionList","targetExitViewport","window","innerHeight","border","popupOffset","lastItem","offsetHeight","offsetTop","lastItemOffsetValue","count","paddingBottom","inputHeight","popupWidth","inputWidth","scrollBottom","isInitial","currentOffset","nextBottom","nextOffset","paddingTop","boxRange","isPopupButton","setEleWidth","match","scrollableParentElements","scrollableParentElements_1","fixedHeader","removeChild","role","updatedCssClassValues","setReadOnly","calculateWidth","selectElement","onselect","stopImmediatePropagation","onchange","floatLabelElement","renderComplete","footercheck","footerCompTemp","headercheck","headerCompTemp","contentEle","setOldText","setOldValue","refreshPosition","checkData","isChangeValue","isChangeText","checkCustomValue","updateInputFields","this_1","setReadonly","setCssClass","checkValidLi","setSelectionData","listLength_1","listLength_2","removeFloating","addFloating","setClearButton","ddlProps","newClass","oldClass","invokeRenderPopup","proxy_2","onpopstate","pushState","renderHightSearch","isSelectVal","isFocused","blur","attrArray","clear","__extends$2","__decorate$2","RTL","DROPDOWNTREE","HIDDENELEMENT","DROPDOWNICON","SHOW_CHIP","SHOW_CLEAR","SHOW_DD_ICON","CHIP_INPUT","INPUTFOCUS","INPUTGROUP","ICONANIMATION","CLOSEICON_CLASS","CHIP_WRAPPER","CHIP_COLLECTION","CHIP","CHIP_CONTENT","CHIP_CLOSE","HIDEICON","DDTHIDEICON","POPUP_CLASS","PARENTITEM","CONTENT","DROPDOWN","DISABLED","ICONS","CHECKALLPARENT","CHECKALLHIDE","BIGGER","SMALL","ALLTEXT","CHECKBOXFRAME","CHECK","CHECKBOXWRAP","FILTERWRAP","DDTICON","FOOTER","HEADER","NODATACONTAINER","NODATA","HEADERTEMPLATE","FOOTERTEMPLATE","NORECORDSTEMPLATE","ACTIONFAILURETEMPLATE","CUSTOMTEMPLATE","REMAIN_WRAPPER","OVERFLOW_VIEW","SHOW_TEXT","TOTAL_COUNT_WRAPPER","REMAIN_COUNT","Fields","TreeSettings","DropDownTree","filterTimer","isFilteredData","isFilterRestore","filterDelayTime","isClicked","isCheckAllCalled","isFromFilterChange","keyEntity","isFirstRender","isInitialized","currentText","currentValue","oldValue","removeValue","selectedText","treeItems","isNodeSelected","isDynamicChange","clearIconWidth","customTemplateId","altUp","altDown","shiftTab","moveDown","moveLeft","moveRight","moveUp","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","ctrlA","isTree","popupDiv","ensureAutoCheck","inputEle","inputObj","showDropDownIcon","getDirective","createHiddenElement","createClearIcon","setElementWidth","setAttributes","tree","wireTreeEvents","renderTree","isRemoteData","allowMultiSelection","showCheckBox","mode","createChip","wrapText","overFlowWrapper","setTreeValue","setTreeText","updateHiddenValue","setSelectedValue","updateView","wireEvents","firstUl","treeObj","hasTemplate","customTemplate","treeSettings","autoCheck","hideCheckAll","flag","checkAllEle","renderFilter","filterContainer","autocomplete","filterObj","filterChangeHandler","appendTo","clearTimeout","filterHandler","treeData","getTreeData","filterFields","cloneFields","treeDataType","selfReferencefilter","nestedFilter","getTreeFields","filteredFields","matchedDataSource","filteredChild","nestedChildFilter","node","isMatchedNode","matchedChildren","filteredItems","assign","matchedData","parentId","parentValue","checkValue","mouseIn","overAllClear","windowResize","treeAction","wireCheckAllWrapperEvents","checkAllParent","checkAllAction","unWireEvents","isClearButtonClick","showOverAllClear","isValue","chipWrapper","changeOnBlur","triggerChangeEvent","updateOverFlowView","ensurePlaceHolder","isEqual","ddtCompareValues","isChipDelete","newValue","isValid","observedArgs","isValueChange","keyEventArgs","showSelectAll","clickHandler","focusedElement","resetValue","overAllContainer","temp","tempData","tempIndex","wrapperleng","remaining","downIconWidth","overflowCountTemplate","totalCountTemplate","remainContent","totalContent","remainElement","remainSize","delimiterChar","getOverflowVal","enableHtmlSanitizer","textArr","pop","join","chips","lastChild","updateRemainTemplate","updateDelimMode","firstChild","getSelectedData","loadOnDemand","chipCollection","getValidMode","checkWrapper","createSelectAllWrapper","selectAllSpan","touchClass","checkBoxElement","setLocale","firstElementChild","lastElementChild","checkElement","changeState","wrapper","state","ariaState","frameSpan","isReverseUpdate","checkAll","uncheckAll","setMultiSelect","unSelect","selectAllText","unSelectAllText","setValidValue","valArr","selectedNodes","updateMode","checkedNodes","updateSelectedValues","difference","givenText","getNestedItems","newData","objlen","dataId","childData","getChildType","mapper","nodeSelected","onNodeSelected","nodeChecked","onNodeChecked","nodeChecking","beforeCheck","nodeExpanded","onNodeExpanded","nodeClicked","onNodeClicked","dataBound","OnDataBound","expandOn","nodeSelecting","onBeforeSelect","nodeTemplate","isCancelled","portals","concat","updatePopupHeight","checkSelectAll","wrap","getHeight","ddElement","documentElement","clientHeight","isFilter","isFooter","isScroller","getTreeDataType","expandAll","restoreFilterSelection","elements","setEnableRTL","clonedField","cloneChildField","hasChildren","expanded","imageUrl","selectable","tableName","tooltip","treeFields","parentID","getTreeChildren","isChecked","getActualProperties","childFields","ds","len","updateTemplate","getEventArgs","nodeData","getNode","getNodeDetails","removeSelectedData","nodes","updateClearButton","nextSibling","chipClose","updateDropDownIconState","spinIcon","appendSpan","ensureClearIconPosition","setMultiSelectValue","newValues","selectedValues","ddtValue","checkSelection","getNodeData","childItems","getChildNodeData","obj","newChildItems","childNodeData","getChildMapperFields","muteOnChange","textValue","hiddenInputValue","setChipValues","setTagValues","chip","chipContent","removeChip","templatestring","templateComplier","tempArr","setSelectAllWrapper","updateOverflowWrapper","clearCheckAll","selectAllItems","arr","updateTreeSettings","updateValue","updateCheckBoxState","checkBox","noRecord","updateRecordTemplate","updateMultiSelection","updateOption","updateAllowFiltering","destroyFilter","updateFilterPlaceHolder","updateText","updateModelMode","validMode","overFlow","ensureVisible","getData","__extends$3","__decorate$3","SPINNER_CLASS","inputObject$1","ComboBox","preventBlur","targetFocus","inputValue","customValue","allowCustom","valueMuteChange","setHoverList","inlineSearch","autofill","setAutoFill","isHover","currentFillValue","isAndroidAutoFill","setAutoFillSelection","isAndroid","currentPoints","prevEnd","curEnd","prevStart","curStart","property","isKeyNavigate","previousValue_1","updateCustomValueCallback","changeData","comboProps","isEscape","searchItem","__extends$4","__decorate$4","AutoComplete","_this_1","isFiltered","searchList","mapping","suggestionCount","queryElements","queries","fn","filterAction","minLength","postBackAction","fieldsSettings","itemCreated","highlight","itemCreated_1","showPopupButton","checkFields_1_1","_this_2","atcProps","isHighlight","FLOATLINE","FLOATTEXT","LABELTOP","LABELBOTTOM","createFloatLabel","overAllWrapper","searchWrapper","floatLinelement","encodePlaceholder","updateFloatLabelState","componentWrapper","placeholderElement","floatLine","placeholderText","setPlaceHolder","floatLabelFocus","floatLabelBlur","spanElement","hiddenInput","__extends$5","__decorate$5","FOCUS","DISABLED$1","OVER_ALL_WRAPPER","ELEMENT_WRAPPER","ELEMENT_MOBILE_WRAPPER","HIDE_LIST","DELIMITER_VIEW","CHIP_WRAPPER$1","CHIP$1","CHIP_CONTENT$1","CHIP_CLOSE$1","CHIP_SELECTED","SEARCHBOX_WRAPPER","DELIMITER_VIEW_WRAPPER","ZERO_SIZE","REMAIN_WRAPPER$1","CLOSEICON_CLASS$1","DELIMITER_WRAPPER","POPUP_WRAPPER","INPUT_ELEMENT","RTL_CLASS","CLOSE_ICON_HIDE","MOBILE_CHIP","FOOTER$1","HEADER$1","DISABLE_ICON","SPINNER_CLASS$1","HIDDEN_ELEMENT","dropdownIcon","TOTAL_COUNT_WRAPPER$1","BOX_ELEMENT","FILTERPARENT","CUSTOM_WIDTH","FILTERINPUT","MultiSelect","previousFilterText","selectAllEventData","selectAllEventEle","resetMainList","resetFilteredData","scrollFocusStatus","keyDownStatus","enableRTL","requiredModules","modules","enableGroupCheckBox","prevOnChange","isProtectedOnChange","enableSelectionOrder","hideSelectedItem","closePopupOnSelect","member","updateHTMLAttribute","popupWrapper","enable","refreshPlaceHolder","containerAttr","updateReadonly","updateCssClass","updateOldPropCssClass","onPopupShown","focusAtFirstListItem","updateListItems","mainList","updateAriaActiveDescendant","isFirstClick","loadTemplate","mainListItems","findGroupStart","deselectHeader","refreshListItems","valueEle","addListFocus","focusAtLastListItem","updateListARIA","disableStatus","ensureAriaDisabled","status","removelastSelection","chipCollectionWrapper","tempValues","removeChipSelection","updateDelimeter","makeTextBoxEmpty","refreshSelection","checkPlaceholderSize","targetInputElement","getForQuery","predicate","or","proxy","checkEle","presentItemValue","addNonPresentItems","updateActionList","mainData","mainListCollection","remoteCustomValue","checkForCustomValue","tempQuery","unwireListEvents","setInitialValue","selectAllAction","setDynValue","initialTextUpdate","initialValueUpdate","initialUpdate","updateValueState","previousElementSibling","nextElementSibling","hideGroupItem","ariaValue","checkMaxSelection","element1","temp1","groupItemLength","listItem","searchCount","searchActiveCount","maximumSelectionLength","openClick","openOnClick","keyUp","char","isWordCharacter","expandTextbox","search","remoteFilterAction","dataUpdater","backCommand","dataChecks","customData","random","JSON","parse","stringify","wrapperClick","isDocClickFromCheck","addTagOnBlur","listLiElement","allowChipAddition","updateListSelection","updateDelimView","focused","removeChipFocus","refreshInputHight","createSpanElement","elementWidth","clientWidth","paddingRight","dropIcon","marginRight","setPlaceholderSize","validateValues","sort","newVal","oldVal","initStatus","updateTempValue","getPagingCount","collection","focusInHandler","showDelimWrapper","viewWrapper","delimiterWrapper","hideDelimWrapper","size","mobFilter","calcPopupWidth","checkTextLength","popupKeyActions","updateAriaAttribute","homeNavigation","isHome","scrollEle","onKeyDown","altKey","arrowUp","arrowDown","selectByKey","spaceKeySelection","escapeAction","keyNavigation","checkBackCommand","moveByList","focuseElem","moveBy","removeSelectedChip","selectListByKey","hideOverAllClear","limit","selectAllItem","selectedElem","addChipSelection","moveByTop","updateCheck","chipClick","elem","onChipRemove","customVal","setFloatLabelType","removeAllItems","isClearAll","mainElement","removeVal","invokeCheckboxSelection","updateMainList","updateChipStatus","isSelectAll","targetEle","element_1","val_1","removeIndex","hideElement","targetEle_1","clearAllCallback","element2","addValue","addListSelection","addChip","dispatchSelect","isNotTrigger","val_2","isServerRendered","updateListSelectEventCallback","getChip","closeElements","onMobileChipInteraction","chipElem","multiCompiler","multiselectTemplate","setClass","classes","mouseOut","fieldProperty","listCurrentOptions","checkboxFilter","overAllHeight","selectAllHeight","unwireScrollEvents","checkboxFilterInput","wireScrollEvents","onListMouseDown","textVal","delim","valueLength","hiddenElementContent","valueItem","listValue","updateWrapperText","addValidInputClass","removeListSelection","indexItem","noDataEle","isDynamicGroupItemUpdate","isReactTemplateUpdate","isAngularTemplateUpdate","temp_1","data_1","selectItems","mainlist","addListHover","ariaCheck","delimChar","headerLi","liChecked","liUnchecked","groupValues","findGroupAttrtibutes","updateCheckBox","checked","unChecked","groupHeader","filterClear","wrapperType","wrapperData","sanitize","raminElement","remainCompildTemp","checkClearIconWidth","totalWidth","updateRemainWidth","updateRemainingText","remainTemp","totalTemp","newTemp","selectionLimit","textboxValueUpdate","beforeSelectArgs","preventSelectEvent","index_1","count_1","updatedataValueItems","updateHiddenElement","hiddenValue","wrapperText","map","isRemoveAll","onLoadSelect","updateVal","dropDownIcon","reInitializePoup","msProps","mainLiLength","liLength","styles","spellcheck","tabindex","checkInitialValue","isData","optionsElement","valueCol","textCol","optionsLen","opt","checkAutoFocus","ICON","CHECKBOXFRAME$1","CHECK$1","CHECKBOXWRAP$1","INDETERMINATE","searchBackIcon","FOCUS$1","CheckBoxSelection","parent","activeLi","activeEle","removeEventListener","addEventListener","isDestroyed","on","listSelection","setSelectAll","setDeviceSearchBox","getFocus","setReorder","getActiveList","checboxCreate","setPopupFullScreen","off","checkboxEle","frameElm","checkboxWrapper","selectAll$$1","validateCheckNode","checkWrap","isCheck","isPrevent","activeLiCount","remLi","ulEle_1","activeListItems","__extends$6","__decorate$6","SelectionSettings","ToolbarSettings","ListBox","isDataSourceUpdate","ListBox_1","inputString","initLoad","isCustomFiltering","initialSelectedOptions","initWrapper","hiddenSelect","selectionSettings","updateSelectionSettings","showCheckbox","l10nSelect","checkBoxSelectionModule","initDraggable","allowDragAndDrop","scope","itemClass","dragStart","triggerDragStart","drag","triggerDrag","beforeDrop","beforeDragEnd","drop","dragEnd","placeHolder","helper","sender","refEle","jsonData","initToolbar","pos","toolbarSettings","prevScope","toolElem","createButtons","updateToolBarState","tBListBox","getElementById","btn","title","moveFrom","moveAllTo","moveAllFrom","required","setHeight","spinner","refreshClearIcon","KeyUp","listBoxClasses","searchEle","noRecElem","filterWireEvents","initToolbarAndStyles","setCheckboxPosition","setFiltering","filterElem","txtLength","scopedLB","badge","getDragArgs","dragSelected","isIos","overflow","dragEventArgs","allowDragAll","scrollParent","boundRect","scrollMoved","scrollHeight","y","pageY","dragValue","droppedElement","getDataByValues","liColl","droppedData","selectedOptions","dropValue","listObj","getArgs","sourceArgs","previousData","destArgs","dragArgs","source","previousIndex","currentIndex","sourceArgs1","currentData","destination","targetListObj","ul_1","toSortIdx_1","toIdx_1","getCurIdx","rIdx","jsonIdx","sIdx","idx","jsonIdx_1","sIdx_1","li_1","fLiColl_1","currIdx_1","ul_2","fListData_1","fSortData_1","srcIdx","jsonSrcIdx","sortIdx","destIdx","liCollElem_1","removeSelected","sourceElem","sortable","placeHolderElement","dragArgs1","liCollElem","destElem","elems","triggerBeforeItemRender","curData","enableItems","getSelectedItems","updateSelectedOptions","selElems","triggerChange","addItems","removeItems","removeItem","objValue","dupData","itemIdx","removeIdxes","removeLiIdxes","k","updateLiCollection","getElemByValue","moveUpDown","targetId","tlistbox","getScopedListBox","moveData","moveAllData","getDataList","getSortedList","sortData","liEle","getElementsByTagName","dataValue1","_loop_2","dataValue2","this_2","ulList","mainCount","ulEleCount","listindex","valueindex","form","keyDownHandler","focusOutHandler","wireToolbarEvent","formResetHandler","getToolElem","toolbarClickHandler","unwireEvents","clearFilterIconElem","selectHandler","liItems","isKey","isSelect","currSelIdx","selectedLi","metaKey","shiftKey","min","prevSelIdx","max","liDataValue_1","value1","values","selectedLis","getDataByElements","getDataByElems","toolbarAction","moveItemTo","moveItemFrom","moveAllItemTo","moveAllItemFrom","isUp","tempItems","reverse","jsonToIdx","fListBox","tListBox","dataIdx","tListData","tSortData","fliCollections","dataLiIdx","tliCollections","isRefresh","rLiCollection_1","n1","n2","toColl","tJsonData","selectNextList","inst","childCnt","liIdx","validIdx","getValidIndex","Number","fromIdx","toIdx","cbox","getGrabbedItems","grabbItems","isDragEnd","stopPropagation","code","upDownKeyHandler","ul","defaultIdx","fliIdx","fli","cli","selectedidx","sidx","eidx","eventArgsData_1","cul","updateSelectTag","clearSelection","dvalue_1","isText","liselect","getSelectTag","checkDisabledState","listObj_1","wrap_1","listWrap","checkboxPosition","liCollLen","l10nShow","l10nSel","__extends$7","__decorate$7","Mention","suffixText","allowSpaces","mentionChar","showMentionChar","cssClass$$1","isListResetted","isCollided","lineBreak","isSelector","checkAndUpdateInternalComponent","isContentEditable","elementValue","onKeyUp","hideWaitingSpinner","spinnerTemplate","spinnerTemplateElement","isVue","showWaitingSpinner","setSpinnerTemplate","rangetextContent","range","getCurrentRange","startContainer","currentRange","getTextRange","lastWordRange","getLastLetter","Regex","charRegex","isMatchedText","charAt","substring","lastIndexOf","charCodeAt","didPopupOpenByTypingInitialChar","isMatched","ownerDocument","getSelection","getRangeAt","setDataIndex","component","startPos","workingNodeContent","selectStartOffset","startOffset","words","wordCnt","popupEle_1","coordinates_1","initializePopup","getTriggerCharPosition","getCoordinates","cssText","coordinates","mostRecentTriggerCharPos","actionOnScroll","div","span","globalRange","computed","rect","selectedNodePosition","createRange","setStart","setEnd","endOffset","collapse","getClientRects","doc","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","Node","TEXT_NODE","span_1","textNodeWidth","fontSize","offsetLeft","isSelectCancel","selectLi","displayTemplate","setDisplayTemplate","updateMentionValue","textSuffix","endPos","mentionVal","myField","currentTriggerSnippet","commonAncestorContainer","deleteContents","frag","createDocumentFragment","lastNode","insertNode","cloneRange","setStartAfter","removeAllRanges","addRange","showChar","displayTempElement","displayCompTemp","renderTemplates","callBack","spinnerCompTemp","detachMentionChanges","positionX","positionY"],"sources":["D:/Primary files/Hims UI/node_modules/@syncfusion/ej2-dropdowns/dist/es6/ej2-dropdowns.es5.js"],"sourcesContent":["import { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, append, attributes, classList, closest, compile, createElement, detach, extend, formatUnit, getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n\n/**\n * IncrementalSearch module file\n */\nvar queryString = '';\nvar prevString = '';\nvar matches$1 = [];\nvar activeClass = 'e-active';\nvar prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\nfunction incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId) {\n    queryString += String.fromCharCode(keyCode);\n    setTimeout(function () {\n        queryString = '';\n    }, 1000);\n    var index;\n    queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n    if (prevElementId === elementId && prevString === queryString) {\n        for (var i = 0; i < matches$1.length; i++) {\n            if (matches$1[i].classList.contains(activeClass)) {\n                index = i;\n                break;\n            }\n        }\n        index = index + 1;\n        return matches$1[index] ? matches$1[index] : matches$1[0];\n    }\n    else {\n        var listItems = items;\n        var strLength = queryString.length;\n        var text = void 0;\n        var item = void 0;\n        selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n        var i = selectedIndex;\n        matches$1 = [];\n        do {\n            if (i === listItems.length) {\n                i = -1;\n            }\n            if (i === -1) {\n                index = 0;\n            }\n            else {\n                index = i;\n            }\n            item = listItems[index];\n            text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n            if (text.substr(0, strLength) === queryString) {\n                matches$1.push(listItems[index]);\n            }\n            i++;\n        } while (i !== selectedIndex);\n        prevString = queryString;\n        prevElementId = elementId;\n        return matches$1[0];\n    }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\nfunction Search(inputVal, items, searchType, ignoreCase, dataSource, fields, type) {\n    var listItems = items;\n    ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n    var itemData = { item: null, index: null };\n    if (inputVal && inputVal.length) {\n        var strLength = inputVal.length;\n        var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n        queryStr = escapeCharRegExp(queryStr);\n        var _loop_1 = function (i, itemsData) {\n            var item = itemsData[i];\n            var text = void 0;\n            var filterValue;\n            if (items && dataSource) {\n                var checkField_1 = item;\n                var fieldValue_1 = fields.text.split('.');\n                dataSource.filter(function (data) {\n                    Array.prototype.slice.call(fieldValue_1).forEach(function (value) {\n                        /* eslint-disable security/detect-object-injection */\n                        if (type === 'object' && (!data.isHeader && checkField_1.textContent.toString().indexOf(data[value]) !== -1) && checkField_1.getAttribute('data-value') === data[fields.value].toString() || type === 'string' && checkField_1.textContent.toString().indexOf(data) !== -1) {\n                            filterValue = type === 'object' ? data[value] : data;\n                        }\n                    });\n                });\n            }\n            text = dataSource && filterValue ? (ignoreCase ? filterValue.toLocaleLowerCase() : filterValue).replace(/^\\s+|\\s+$/g, '') : (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n            /* eslint-disable security/detect-non-literal-regexp */\n            if ((searchType === 'Equal' && text === queryStr) || (searchType === 'StartsWith' && text.substr(0, strLength) === queryStr) || (searchType === 'EndsWith' && text.substr(text.length - queryStr.length) === queryStr) || (searchType === 'Contains' && new RegExp(queryStr, \"g\").test(text))) {\n                itemData.item = item;\n                itemData.index = i;\n                return { value: { item: item, index: i } };\n            }\n        };\n        for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {\n            var state_1 = _loop_1(i, itemsData);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        return itemData;\n        /* eslint-enable security/detect-non-literal-regexp */\n    }\n    return itemData;\n}\n/* eslint-enable security/detect-object-injection */\nfunction escapeCharRegExp(value) {\n    return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nfunction resetIncrementalSearchValues(elementId) {\n    if (prevElementId === elementId) {\n        prevElementId = '';\n        prevString = '';\n        queryString = '';\n        matches$1 = [];\n    }\n}\n\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\nfunction highlightSearch(element, query, ignoreCase, type) {\n    if (query === '') {\n        return;\n    }\n    else {\n        var ignoreRegex = ignoreCase ? 'gim' : 'gm';\n        // eslint-disable-next-line\n        query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n        var replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ?\n            '(' + query + ')$' : '(' + query + ')';\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n    }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\nfunction findTextNode(element, pattern) {\n    for (var index = 0; element.childNodes && (index < element.childNodes.length); index++) {\n        if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n            var value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n            element.childNodes[index].nodeValue = '';\n            element.innerHTML = element.innerHTML.trim() + value;\n            break;\n        }\n        else {\n            findTextNode(element.childNodes[index], pattern);\n        }\n    }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\nfunction revertHighlightSearch(content) {\n    var contentElement = content.querySelectorAll('.e-highlight');\n    for (var i = contentElement.length - 1; i >= 0; i--) {\n        var parent_1 = contentElement[i].parentNode;\n        var text = document.createTextNode(contentElement[i].textContent);\n        parent_1.replaceChild(text, contentElement[i]);\n    }\n}\n\n/**\n * Common source\n */\n\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FieldSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends(FieldSettings, _super);\n    function FieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"groupBy\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"htmlAttributes\", void 0);\n    return FieldSettings;\n}(ChildProperty));\nvar dropDownBaseClasses = {\n    root: 'e-dropdownbase',\n    rtl: 'e-rtl',\n    content: 'e-content',\n    selected: 'e-active',\n    hover: 'e-hover',\n    noData: 'e-nodata',\n    fixedHead: 'e-fixed-head',\n    focus: 'e-item-focus',\n    li: 'e-list-item',\n    group: 'e-list-group-item',\n    disabled: 'e-disabled',\n    grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar DISPLAYTEMPLATE_PROPERTY = 'DisplayTemplate';\nvar SPINNERTEMPLATE_PROPERTY = 'SpinnerTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\nvar DropDownBase = /** @__PURE__ @class */ (function (_super) {\n    __extends(DropDownBase, _super);\n    /**\n     * * Constructor for DropDownBase class\n     *\n     * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownBase(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        _this.isPreventChange = false;\n        _this.isDynamicDataChange = false;\n        _this.addedNewItem = false;\n        return _this;\n    }\n    DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n        var newProperty = new Object();\n        var oldProperty = new Object();\n        var propName = function (prop) {\n            return prop;\n        };\n        newProperty[propName(prop)] = newProp[propName(prop)];\n        oldProperty[propName(prop)] = oldProp[propName(prop)];\n        var data = new Object();\n        data.newProperty = newProperty;\n        data.oldProperty = oldProperty;\n        return data;\n    };\n    DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n        var value = null;\n        if (!isNullOrUndefined(this.listData)) {\n            if (ignoreCase) {\n                value = this.checkValueCase(text, true, ignoreAccent);\n            }\n            else {\n                value = this.checkValueCase(text, false, ignoreAccent);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n        var _this = this;\n        var value = null;\n        if (isTextByValue) {\n            value = text;\n        }\n        var dataSource = this.listData;\n        var fields = this.fields;\n        var type = this.typeOfData(dataSource).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n                var item = dataSource_1[_i];\n                if (!isNullOrUndefined(item)) {\n                    if (ignoreAccent) {\n                        value = this.checkingAccent(String(item), text, ignoreCase);\n                    }\n                    else {\n                        if (ignoreCase) {\n                            if (this.checkIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase);\n                            }\n                        }\n                        else {\n                            if (this.checkNonIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (ignoreCase) {\n                dataSource.filter(function (item) {\n                    var itemValue = getValue(fields.value, item);\n                    if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n                        value = getValue(fields.value, item);\n                    }\n                });\n            }\n            else {\n                if (isTextByValue) {\n                    var compareValue_1 = null;\n                    compareValue_1 = value;\n                    dataSource.filter(function (item) {\n                        var itemValue = getValue(fields.value, item);\n                        if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n                            value = getValue(fields.text, item);\n                        }\n                    });\n                }\n                else {\n                    dataSource.filter(function (item) {\n                        if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n                            value = getValue(fields.value, item);\n                        }\n                    });\n                }\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n        var dataItem = DataUtil.ignoreDiacritics(String(item));\n        var textItem = DataUtil.ignoreDiacritics(text.toString());\n        var value = null;\n        if (ignoreCase) {\n            if (this.checkIgnoreCase(dataItem, textItem)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        else {\n            if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n        return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n    };\n    DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n        return String(item) === text.toString() ? true : false;\n    };\n    DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n        var value = null;\n        var dataSource = this.listData;\n        var type = this.typeOfData(dataSource).typeof;\n        if (isTextByValue) {\n            value = dataItem.toString();\n        }\n        else {\n            if (ignoreCase) {\n                value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n            }\n            else {\n                value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n        var checkTemplate = false;\n        if (baseTemplate) {\n            try {\n                checkTemplate = (selectAll(baseTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n        var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n        if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n            var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            var compiledString = void 0;\n            var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            ele.innerHTML = '';\n            var tempaltecheck = this.templateCompiler(template);\n            if (tempaltecheck) {\n                compiledString = compile(select(template, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(template);\n            }\n            var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n            if (noDataCompTemp && noDataCompTemp.length > 0) {\n                for (var i = 0; i < noDataCompTemp.length; i++) {\n                    if (this.getModuleName() === 'listbox' && templateName === 'noRecordsTemplate') {\n                        if (noDataCompTemp[i].nodeName === '#text') {\n                            var liElem = this.createElement('li');\n                            liElem.textContent = noDataCompTemp[i].textContent;\n                            liElem.classList.add('e-list-nrt');\n                            liElem.setAttribute('role', 'option');\n                            ele.appendChild(liElem);\n                        }\n                        else {\n                            noDataCompTemp[i].classList.add('e-list-nr-template');\n                            ele.appendChild(noDataCompTemp[i]);\n                        }\n                    }\n                    else {\n                        ele.appendChild(noDataCompTemp[i]);\n                    }\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else {\n            var l10nLocale = { noRecordsTemplate: 'No records found', actionFailureTemplate: 'Request failed' };\n            var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n            if (componentLocale.getConstant('actionFailureTemplate') !== '') {\n                this.l10n = componentLocale;\n            }\n            else {\n                this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' :\n                    this.getModuleName() === 'mention' ? 'mention' : 'dropdowns', l10nLocale, this.locale);\n            }\n            var content = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n            if (this.getModuleName() === 'listbox') {\n                var liElem = this.createElement('li');\n                liElem.textContent = content;\n                ele.appendChild(liElem);\n                liElem.classList.add('e-list-nrt');\n                liElem.setAttribute('role', 'option');\n            }\n            else {\n                if (!isNullOrUndefined(ele)) {\n                    ele.innerHTML = content;\n                }\n            }\n        }\n    };\n    DropDownBase.prototype.getLocaleName = function () {\n        return 'drop-down-base';\n    };\n    DropDownBase.prototype.getTextByValue = function (value) {\n        var text = this.checkValueCase(value, false, false, true);\n        return text;\n    };\n    DropDownBase.prototype.getFormattedValue = function (value) {\n        if (this.listData && this.listData.length) {\n            var item = void 0;\n            if (this.properties.allowCustomValue && this.properties.value && this.properties.value instanceof Array && this.properties.value.length > 0) {\n                item = this.typeOfData(this.properties.value);\n            }\n            else {\n                item = this.typeOfData(this.listData);\n            }\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'number'\n                || item.typeof === 'number') {\n                return parseFloat(value);\n            }\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'boolean'\n                || item.typeof === 'boolean') {\n                return ((value === 'true') || ('' + value === 'true'));\n            }\n        }\n        return value;\n    };\n    /**\n     * Sets RTL to dropdownbase wrapper\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setEnableRtl = function () {\n        if (!isNullOrUndefined(this.enableRtlElements)) {\n            if (this.list) {\n                this.enableRtlElements.push(this.list);\n            }\n            if (this.enableRtl) {\n                addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n            }\n            else {\n                removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n            }\n        }\n    };\n    /**\n     * Initialize the Component.\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.initialize = function (e) {\n        this.bindEvent = true;\n        this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n        if (this.element.tagName === 'UL') {\n            var jsonElement = ListBase.createJsonFromElement(this.element);\n            this.setProperties({ fields: { text: 'text', value: 'text' } }, true);\n            this.resetList(jsonElement, this.fields);\n        }\n        else if (this.element.tagName === 'SELECT') {\n            var dataSource = this.dataSource instanceof Array ? (this.dataSource.length > 0 ? true : false)\n                : !isNullOrUndefined(this.dataSource) ? true : false;\n            if (!dataSource) {\n                this.renderItemsBySelect();\n            }\n            else if (this.isDynamicDataChange) {\n                this.setListData(this.dataSource, this.fields, this.query);\n            }\n        }\n        else {\n            this.setListData(this.dataSource, this.fields, this.query, e);\n        }\n    };\n    /**\n     * Get the properties to be maintained in persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownBase.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @param {string} value - Specifies the attribute values to add on the input element.\n     * @returns {void}\n     */\n    DropDownBase.prototype.updateDataAttribute = function (value) {\n        var invalidAttr = ['class', 'style', 'id', 'type', 'aria-expanded', 'aria-autocomplete', 'aria-readonly'];\n        var attr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    };\n    DropDownBase.prototype.renderItemsBySelect = function () {\n        var element = this.element;\n        var fields = { value: 'value', text: 'text' };\n        var jsonElement = [];\n        var group = element.querySelectorAll('select>optgroup');\n        var option = element.querySelectorAll('select>option');\n        this.getJSONfromOption(jsonElement, option, fields);\n        if (group.length) {\n            for (var i = 0; i < group.length; i++) {\n                var item = group[i];\n                var optionGroup = {};\n                optionGroup[fields.text] = item.label;\n                optionGroup.isHeader = true;\n                var child = item.querySelectorAll('option');\n                jsonElement.push(optionGroup);\n                this.getJSONfromOption(jsonElement, child, fields);\n            }\n            element.querySelectorAll('select>option');\n        }\n        this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n        this.resetList(jsonElement, fields);\n    };\n    DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n        var field = {\n            'fields': {\n                text: text,\n                value: value,\n                groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n                htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n                iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n            }\n        };\n        this.setProperties(field, true);\n    };\n    DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n        for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n            var option = options_1[_i];\n            var json = {};\n            json[fields.text] = option.innerText;\n            json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ?\n                option.getAttribute(fields.value) : option.innerText;\n            items.push(json);\n        }\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.preRender = function () {\n        // there is no event handler\n        this.scrollTimer = -1;\n        this.enableRtlElements = [];\n        this.isRequested = false;\n        this.isDataFetched = false;\n        this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n        this.displayTemplateId = \"\" + this.element.id + DISPLAYTEMPLATE_PROPERTY;\n        this.spinnerTemplateId = \"\" + this.element.id + SPINNERTEMPLATE_PROPERTY;\n        this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n        this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n        this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n        this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n        this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n    };\n    /**\n     * Creates the list items of DropDownBase component.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.setListData = function (dataSource, fields, query, event) {\n        var _this = this;\n        fields = fields ? fields : this.fields;\n        var ulElement;\n        this.isActive = true;\n        var eventArgs = { cancel: false, data: dataSource, query: query };\n        this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n        this.trigger('actionBegin', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.showSpinner();\n                if (dataSource instanceof DataManager) {\n                    _this.isRequested = true;\n                    if (_this.isDataFetched) {\n                        _this.emptyDataRequest(fields);\n                        return;\n                    }\n                    eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n                        _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                        _this.trigger('actionComplete', e, function (e) {\n                            if (!e.cancel) {\n                                var listItems = e.result;\n                                if (listItems.length === 0) {\n                                    _this.isDataFetched = true;\n                                }\n                                ulElement = _this.renderItems(listItems, fields);\n                                _this.onActionComplete(ulElement, listItems, e);\n                                if (_this.groupTemplate) {\n                                    _this.renderGroupTemplate(ulElement);\n                                }\n                                _this.isRequested = false;\n                                _this.bindChildItems(listItems, ulElement, fields, e);\n                            }\n                        });\n                    }).catch(function (e) {\n                        _this.isRequested = false;\n                        _this.onActionFailure(e);\n                        _this.hideSpinner();\n                    });\n                }\n                else {\n                    var dataManager = new DataManager(eventArgs.data);\n                    var listItems = (_this.getQuery(eventArgs.query)).executeLocal(dataManager);\n                    var localDataArgs = { cancel: false, result: listItems };\n                    _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                    _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n                        if (!localDataArgs.cancel) {\n                            ulElement = _this.renderItems(localDataArgs.result, fields);\n                            _this.onActionComplete(ulElement, localDataArgs.result, event);\n                            if (_this.groupTemplate) {\n                                _this.renderGroupTemplate(ulElement);\n                            }\n                            _this.bindChildItems(localDataArgs.result, ulElement, fields);\n                            setTimeout(function () {\n                                if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && (ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || (_this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)))) {\n                                    _this.updateDataList();\n                                }\n                            });\n                        }\n                    });\n                }\n            }\n        });\n    };\n    DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n        var _this = this;\n        if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n            setTimeout(function () {\n                var childNode = _this.remainingItems(_this.sortedData, fields);\n                append(childNode, ulElement);\n                _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                _this.updateListValues();\n                _this.raiseDataBound(listItems, e);\n            }, 0);\n        }\n        else {\n            this.raiseDataBound(listItems, e);\n        }\n    };\n    DropDownBase.prototype.updateListValues = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n        var liElement = null;\n        if (list) {\n            var listArr = [].slice.call(list.querySelectorAll(findNode));\n            for (var index = 0; index < listArr.length; index++) {\n                if (listArr[index].getAttribute(attribute) === (value + '')) {\n                    liElement = listArr[index];\n                    break;\n                }\n            }\n        }\n        return liElement;\n    };\n    DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n        this.hideSpinner();\n        var dataBoundEventArgs = {\n            items: listItems,\n            e: e\n        };\n        this.trigger('dataBound', dataBoundEventArgs);\n    };\n    DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n        var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n        if (this.itemTemplate) {\n            var listElements = this.templateListItem(spliceData, fields);\n            return [].slice.call(listElements.childNodes);\n        }\n        var type = this.typeOfData(spliceData).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n        }\n        return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n    };\n    DropDownBase.prototype.emptyDataRequest = function (fields) {\n        var listItems = [];\n        this.onActionComplete(this.renderItems(listItems, fields), listItems);\n        this.isRequested = false;\n        this.hideSpinner();\n    };\n    DropDownBase.prototype.showSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.hideSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.onActionFailure = function (e) {\n        this.liCollections = [];\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        if (!isNullOrUndefined(this.list)) {\n            addClass([this.list], dropDownBaseClasses.noData);\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        this.listData = list;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n        }\n        this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n        if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n            for (var i = 0; i < ulElement.childElementCount; i++) {\n                if (ulElement.children[i].classList.contains('e-list-group-item')) {\n                    if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n                        addClass([ulElement.children[i]], HIDE_GROUPLIST);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(this.list)) {\n            this.list.innerHTML = '';\n            this.list.appendChild(ulElement);\n            this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n            this.ulElement = this.list.querySelector('ul');\n            this.postRender(this.list, list, this.bindEvent);\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n        var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n        if (focusItem && !selectedItem) {\n            focusItem.classList.add(dropDownBaseClasses.focus);\n        }\n        if (list.length <= 0) {\n            this.l10nUpdate();\n            addClass([listElement], dropDownBaseClasses.noData);\n        }\n        else {\n            listElement.classList.remove(dropDownBaseClasses.noData);\n        }\n    };\n    /**\n     * Get the query to do the data operation before list item generation.\n     *\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {Query} Returns the query to do the data query operation.\n     */\n    DropDownBase.prototype.getQuery = function (query) {\n        return query ? query : this.query ? this.query : new Query();\n    };\n    /**\n     * To render the template content for group header element.\n     *\n     * @param {HTMLElement} listEle - Specifies the group list elements.\n     * @returns {void}\n     */\n    DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n        if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n            var dataSource = this.dataSource;\n            var option = { groupTemplateID: this.groupTemplateId, isStringTemplate: this.isStringTemplate };\n            var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n            var groupcheck = this.templateCompiler(this.groupTemplate);\n            if (groupcheck) {\n                var groupValue = select(this.groupTemplate, document).innerHTML.trim();\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * To create the ul li list items\n     *\n     * @param {object []} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the ul li list items.\n     */\n    DropDownBase.prototype.createListItems = function (dataSource, fields) {\n        if (dataSource && fields.groupBy || this.element.querySelector('optgroup')) {\n            if (fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            addClass([this.list], dropDownBaseClasses.grouping);\n        }\n        else {\n            dataSource = this.getSortedDataSource(dataSource);\n        }\n        var options = this.listOption(dataSource, fields);\n        var spliceData = (dataSource.length > 100) ?\n            new DataManager(dataSource).executeLocal(new Query().take(100))\n            : dataSource;\n        this.sortedData = dataSource;\n        return ListBase.createList(this.createElement, (this.getModuleName() === 'autocomplete') ? spliceData : dataSource, options, true, this);\n    };\n    DropDownBase.prototype.listOption = function (dataSource, fields) {\n        var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        var fieldValues = !isNullOrUndefined(fields.properties) ?\n            fields.properties : fields;\n        var options = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldValues,\n            showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        return extend({}, options, fields, true);\n    };\n    DropDownBase.prototype.setFloatingHeader = function (e) {\n        if (!isNullOrUndefined(this.list) && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n            if (isNullOrUndefined(this.fixedHeaderElement)) {\n                this.fixedHeaderElement = this.createElement('div', { className: dropDownBaseClasses.fixedHead });\n                if (!isNullOrUndefined(this.list) && !this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n                    this.fixedHeaderElement.style.display = 'none';\n                }\n                if (!isNullOrUndefined(this.fixedHeaderElement) && !isNullOrUndefined(this.list)) {\n                    prepend([this.fixedHeaderElement], this.list);\n                }\n                this.setFixedHeader();\n            }\n            if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n                this.setFixedHeader();\n            }\n            this.scrollStop(e);\n        }\n    };\n    DropDownBase.prototype.scrollStop = function (e) {\n        var target = !isNullOrUndefined(e) ? e.target : this.list;\n        var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n        var topIndex = Math.round(target.scrollTop / liHeight);\n        var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n        for (var i = topIndex; i > -1; i--) {\n            if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {\n                var currentLi = liCollections[i];\n                this.fixedHeaderElement.innerHTML = currentLi.innerHTML;\n                this.fixedHeaderElement.style.top = target.scrollTop + 'px';\n                this.fixedHeaderElement.style.display = 'block';\n                break;\n            }\n            else {\n                this.fixedHeaderElement.style.display = 'none';\n                this.fixedHeaderElement.style.top = 'none';\n            }\n        }\n    };\n    DropDownBase.prototype.getValidLi = function () {\n        return this.liCollections[0];\n    };\n    /**\n     * To render the list items\n     *\n     * @param {object[]} listData - Specifies the list of array of data.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the list items.\n     */\n    DropDownBase.prototype.renderItems = function (listData, fields) {\n        var ulElement;\n        if (this.itemTemplate && listData) {\n            var dataSource = listData;\n            if (dataSource && fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            else {\n                dataSource = this.getSortedDataSource(dataSource);\n            }\n            this.sortedData = dataSource;\n            var spliceData = (dataSource.length > 100) ?\n                new DataManager(dataSource).executeLocal(new Query().take(100))\n                : dataSource;\n            ulElement = this.templateListItem((this.getModuleName() === 'autocomplete') ? spliceData : dataSource, fields);\n        }\n        else {\n            ulElement = this.createListItems(listData, fields);\n        }\n        return ulElement;\n    };\n    DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n        var option = this.listOption(dataSource, fields);\n        option.templateID = this.itemTemplateId;\n        option.isStringTemplate = this.isStringTemplate;\n        var itemcheck = this.templateCompiler(this.itemTemplate);\n        if (itemcheck) {\n            var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n            return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n        }\n        else {\n            return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n        }\n    };\n    DropDownBase.prototype.typeOfData = function (items) {\n        var item = { typeof: null, item: null };\n        for (var i = 0; (!isNullOrUndefined(items) && i < items.length); i++) {\n            if (!isNullOrUndefined(items[i])) {\n                var listDataType = typeof (items[i]) === 'string' ||\n                    typeof (items[i]) === 'number' || typeof (items[i]) === 'boolean';\n                var isNullData = listDataType ? isNullOrUndefined(items[i]) :\n                    isNullOrUndefined(getValue((this.fields.value ? this.fields.value : 'value'), items[i]));\n                if (!isNullData) {\n                    return item = { typeof: typeof items[i], item: items[i] };\n                }\n            }\n        }\n        return item;\n    };\n    DropDownBase.prototype.setFixedHeader = function () {\n        if (!isNullOrUndefined(this.list)) {\n            this.list.parentElement.style.display = 'block';\n        }\n        var borderWidth = 0;\n        if (this.list && this.list.parentElement) {\n            borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n            /*Shorthand property not working in Firefox for getComputedStyle method.\n            Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n            Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n            if (isNaN(borderWidth)) {\n                var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n                var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n                var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n                var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n                borderWidth = (borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth);\n            }\n        }\n        if (!isNullOrUndefined(this.liCollections)) {\n            var liWidth = this.getValidLi().offsetWidth - borderWidth;\n            this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n        }\n        setStyleAttribute(this.fixedHeaderElement, { zIndex: 10 });\n        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n    };\n    DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n        if (dataSource && this.sortOrder !== 'None') {\n            var textField = this.fields.text ? this.fields.text : 'text';\n            if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number'\n                || this.typeOfData(dataSource).typeof === 'boolean') {\n                textField = '';\n            }\n            dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n        }\n        return dataSource;\n    };\n    /**\n     * Return the index of item which matched with given value in data source\n     *\n     * @param {string | number | boolean} value - Specifies given value.\n     * @returns {number} Returns the index of the item.\n     */\n    DropDownBase.prototype.getIndexByValue = function (value) {\n        var index;\n        var listItems = this.getItems();\n        for (var i = 0; i < listItems.length; i++) {\n            if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * To dispatch the event manually\n     *\n     * @param {HTMLElement} element - Specifies the element to dispatch the event.\n     * @param {string} type - Specifies the name of the event.\n     * @returns {void}\n     */\n    DropDownBase.prototype.dispatchEvent = function (element, type) {\n        var evt = document.createEvent('HTMLEvents');\n        evt.initEvent(type, false, true);\n        element.dispatchEvent(evt);\n    };\n    /**\n     * To set the current fields\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setFields = function () {\n        if (this.fields.value && !this.fields.text) {\n            this.updateFields(this.fields.value, this.fields.value);\n        }\n        else if (!this.fields.value && this.fields.text) {\n            this.updateFields(this.fields.text, this.fields.text);\n        }\n        else if (!this.fields.value && !this.fields.text) {\n            this.updateFields('text', 'text');\n        }\n    };\n    /**\n     * reset the items list.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.resetList = function (dataSource, fields, query, e) {\n        if (this.list) {\n            if ((this.element.tagName === 'SELECT' && this.element.options.length > 0)\n                || (this.element.tagName === 'UL' && this.element.childNodes.length > 0)) {\n                var data = dataSource instanceof Array ? (dataSource.length > 0)\n                    : !isNullOrUndefined(dataSource);\n                if (!data && this.selectData && this.selectData.length > 0) {\n                    dataSource = this.selectData;\n                }\n            }\n            dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;\n            this.addedNewItem = false;\n            this.setListData(dataSource, fields, query, e);\n        }\n    };\n    DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n        if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n            this.selectData = this.listData;\n        }\n    };\n    DropDownBase.prototype.updateSelection = function () {\n        // This is for after added the item, need to update the selected index values.\n    };\n    DropDownBase.prototype.renderList = function () {\n        // This is for render the list items.\n        this.render();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateDataSource = function (props) {\n        this.resetList(this.dataSource);\n    };\n    DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n        this.isDataFetched = false;\n        var updateData = {};\n        for (var j = 0; props.length > j; j++) {\n            if (newProp[props[j]] && props[j] === 'fields') {\n                this.setFields();\n                updateData[props[j]] = newProp[props[j]];\n            }\n            else if (newProp[props[j]]) {\n                updateData[props[j]] = newProp[props[j]];\n            }\n        }\n        if (Object.keys(updateData).length > 0) {\n            if (Object.keys(updateData).indexOf('dataSource') === -1) {\n                updateData.dataSource = this.dataSource;\n            }\n            this.updateDataSource(updateData);\n        }\n    };\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'dropdownbase') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'query':\n                case 'sortOrder':\n                case 'dataSource':\n                case 'itemTemplate':\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'groupTemplate':\n                    this.renderGroupTemplate(this.list);\n                    if (this.ulElement && this.fixedHeaderElement) {\n                        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n                        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n                    }\n                    break;\n                case 'locale':\n                    if (this.list && (!isNullOrUndefined(this.liCollections) && this.liCollections.length === 0)) {\n                        this.l10nUpdate();\n                    }\n                    break;\n                case 'zIndex':\n                    this.setProperties({ zIndex: newProp.zIndex }, true);\n                    this.setZIndex();\n                    break;\n            }\n        }\n    };\n    /**\n     * Build and render the component\n     *\n     * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.render = function (e, isEmptyData) {\n        this.list = this.createElement('div', { className: dropDownBaseClasses.content, attrs: { 'tabindex': '0' } });\n        this.list.classList.add(dropDownBaseClasses.root);\n        this.setFields();\n        var rippleModel = { duration: 300, selector: '.' + dropDownBaseClasses.li };\n        this.rippleFun = rippleEffect(this.list, rippleModel);\n        var group = this.element.querySelector('select>optgroup');\n        if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (this.getModuleName() === 'dropdownbase') {\n            if (this.element.getAttribute('tabindex')) {\n                this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n            }\n            removeClass([this.element], dropDownBaseClasses.root);\n            this.element.style.display = 'none';\n            var wrapperElement = this.createElement('div');\n            this.element.parentElement.insertBefore(wrapperElement, this.element);\n            wrapperElement.appendChild(this.element);\n            wrapperElement.appendChild(this.list);\n        }\n        this.setEnableRtl();\n        if (!isEmptyData) {\n            this.initialize(e);\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownBase.prototype.getModuleName = function () {\n        return 'dropdownbase';\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownBase.prototype.getItems = function () {\n        return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    DropDownBase.prototype.addItem = function (items, itemIndex) {\n        if (!this.list || (this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox')) {\n            this.renderList();\n        }\n        if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n            var newList = [].slice.call(this.listData);\n            newList.push(items);\n            newList = this.getSortedDataSource(newList);\n            if (this.fields.groupBy) {\n                newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n                itemIndex = newList.indexOf(items);\n            }\n            else {\n                itemIndex = newList.indexOf(items);\n            }\n        }\n        var itemsCount = this.getItems().length;\n        var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        items = (items instanceof Array ? items : [items]);\n        var index;\n        index = (isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1) ? itemsCount : itemIndex;\n        var fields = this.fields;\n        if (items && fields.groupBy) {\n            items = ListBase.groupDataSource(items, fields.properties);\n        }\n        var liCollections = [];\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var isHeader = item.isHeader;\n            var li = this.createElement('li', { className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li, id: 'option-add-' + i });\n            var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n            if (isHeader) {\n                li.innerText = itemText;\n            }\n            if (this.itemTemplate && !isHeader) {\n                var itemCheck = this.templateCompiler(this.itemTemplate);\n                var compiledString = itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n                if (addItemTemplate) {\n                    append(addItemTemplate, li);\n                }\n            }\n            else if (!isHeader) {\n                li.appendChild(document.createTextNode(itemText));\n            }\n            li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n            li.setAttribute('role', 'option');\n            this.notify('addItem', { module: 'CheckBoxSelection', item: li });\n            liCollections.push(li);\n            this.listData.push(item);\n            if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n                index = null;\n            }\n            this.updateActionCompleteData(li, item, index);\n            //Listbox event\n            this.trigger('beforeItemRender', { element: li, item: item });\n        }\n        if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n            if (!isNullOrUndefined(this.list)) {\n                this.list.innerHTML = '';\n                this.list.classList.remove(dropDownBaseClasses.noData);\n                if (!isNullOrUndefined(this.ulElement)) {\n                    this.list.appendChild(this.ulElement);\n                }\n            }\n            this.liCollections = liCollections;\n            if (!isNullOrUndefined(liCollections) && !isNullOrUndefined(this.ulElement)) {\n                append(liCollections, this.ulElement);\n            }\n            this.updateAddItemList(this.list, itemsCount);\n        }\n        else {\n            if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n                this.ulElement.innerHTML = '';\n            }\n            var attr = [];\n            for (var i = 0; i < items.length; i++) {\n                var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n                for (var j = 0; j < listGroupItem.length; j++) {\n                    attr[j] = listGroupItem[j].innerText;\n                }\n                if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n                    for (var j = 0; j < listGroupItem.length; j++) {\n                        if (attr[j] === liCollections[i].innerText) {\n                            if (this.sortOrder === 'None') {\n                                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n                            }\n                            else {\n                                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n                            }\n                            i = i + 1;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.liCollections[index]) {\n                        this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n                    }\n                    else {\n                        this.ulElement.appendChild(liCollections[i]);\n                    }\n                }\n                var tempLi = [].slice.call(this.liCollections);\n                tempLi.splice(index, 0, liCollections[i]);\n                this.liCollections = tempLi;\n                index += 1;\n                if (this.getModuleName() === 'multiselect') {\n                    this.updateDataList();\n                }\n            }\n        }\n        if (selectedItemValue || itemIndex === 0) {\n            this.updateSelection();\n        }\n        this.addedNewItem = true;\n    };\n    DropDownBase.prototype.validationAttribute = function (target, hidden) {\n        var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n        hidden.setAttribute('name', name);\n        target.removeAttribute('name');\n        var attributes$$1 = ['required', 'aria-required', 'form'];\n        for (var i = 0; i < attributes$$1.length; i++) {\n            if (!target.getAttribute(attributes$$1[i])) {\n                continue;\n            }\n            var attr = target.getAttribute(attributes$$1[i]);\n            hidden.setAttribute(attributes$$1[i], attr);\n            target.removeAttribute(attributes$$1[i]);\n        }\n    };\n    DropDownBase.prototype.setZIndex = function () {\n        // this is for component wise\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {\n        // this is for ComboBox custom value\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateAddItemList = function (list, itemCount) {\n        // this is for multiselect add item\n    };\n    DropDownBase.prototype.updateDataList = function () {\n        // this is for multiselect update list items\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownBase.prototype.getDataByValue = function (value) {\n        if (!isNullOrUndefined(this.listData)) {\n            var type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (!isNullOrUndefined(item) && item === value) {\n                        return item;\n                    }\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                        return item;\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownBase.prototype.destroy = function () {\n        if (document.body.contains(this.list)) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            if (!isNullOrUndefined(this.rippleFun)) {\n                this.rippleFun();\n            }\n            detach(this.list);\n        }\n        this.liCollections = null;\n        this.ulElement = null;\n        this.list = null;\n        this.enableRtlElements = null;\n        this.rippleFun = null;\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], DropDownBase.prototype, \"fields\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"itemTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"groupTemplate\", void 0);\n    __decorate([\n        Property('No records found')\n    ], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n    __decorate([\n        Property('Request failed')\n    ], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n    __decorate([\n        Property('None')\n    ], DropDownBase.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property([])\n    ], DropDownBase.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"query\", void 0);\n    __decorate([\n        Property('StartsWith')\n    ], DropDownBase.prototype, \"filterType\", void 0);\n    __decorate([\n        Property(true)\n    ], DropDownBase.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(1000)\n    ], DropDownBase.prototype, \"zIndex\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownBase.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], DropDownBase.prototype, \"locale\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"destroyed\", void 0);\n    DropDownBase = __decorate([\n        NotifyPropertyChanges\n    ], DropDownBase);\n    return DropDownBase;\n}(Component));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\nvar dropDownListClasses = {\n    root: 'e-dropdownlist',\n    hover: dropDownBaseClasses.hover,\n    selected: dropDownBaseClasses.selected,\n    rtl: dropDownBaseClasses.rtl,\n    li: dropDownBaseClasses.li,\n    disable: dropDownBaseClasses.disabled,\n    base: dropDownBaseClasses.root,\n    focus: dropDownBaseClasses.focus,\n    input: 'e-input-group',\n    inputFocus: 'e-input-focus',\n    icon: 'e-input-group-icon e-ddl-icon',\n    iconAnimation: 'e-icon-anim',\n    value: 'e-input-value',\n    device: 'e-ddl-device',\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    mobileFilter: 'e-ddl-device-filter',\n    footer: 'e-ddl-footer',\n    header: 'e-ddl-header',\n    clearIcon: 'e-clear-icon',\n    clearIconHide: 'e-clear-icon-hide',\n    popupFullScreen: 'e-popup-full-page',\n    disableIcon: 'e-ddl-disable-icon',\n    hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n    container: null,\n    buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\nvar DropDownList = /** @__PURE__ @class */ (function (_super) {\n    __extends$1(DropDownList, _super);\n    /**\n     * * Constructor for creating the DropDownList component.\n     *\n     * @param {DropDownListModel} options - Specifies the DropDownList model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownList(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isListSearched = false;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        return _this;\n    }\n    /**\n     * Initialize the event handler.\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.preRender = function () {\n        this.valueTempElement = null;\n        this.element.style.opacity = '0';\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n        this.activeIndex = this.index;\n        this.queryString = '';\n    };\n    DropDownList.prototype.initializeData = function () {\n        this.isPopupOpen = false;\n        this.isDocumentClick = false;\n        this.isInteracted = false;\n        this.isFilterFocus = false;\n        this.beforePopupOpen = false;\n        this.initial = true;\n        this.initRemoteRender = false;\n        this.isNotSearchList = false;\n        this.isTyped = false;\n        this.isSelected = false;\n        this.preventFocus = false;\n        this.preventAutoFill = false;\n        this.isValidKey = false;\n        this.typedString = '';\n        this.isEscapeKey = false;\n        this.isPreventBlur = false;\n        this.isTabKey = false;\n        this.actionCompleteData = { isUpdated: false };\n        this.actionData = { isUpdated: false };\n        this.prevSelectPoints = {};\n        this.isSelectCustom = false;\n        this.isDropDownClick = false;\n        this.preventAltUp = false;\n        this.isCustomFilter = false;\n        this.isSecondClick = false;\n        this.previousValue = null;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    };\n    DropDownList.prototype.setZIndex = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    };\n    DropDownList.prototype.renderList = function (e, isEmptyData) {\n        _super.prototype.render.call(this, e, isEmptyData);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    DropDownList.prototype.floatLabelChange = function () {\n        if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n            var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n            if (this.inputElement.value !== '' || this.isInteracted) {\n                classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n            }\n            else {\n                classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n            }\n        }\n    };\n    DropDownList.prototype.resetHandler = function (e) {\n        e.preventDefault();\n        this.clearAll(e);\n    };\n    DropDownList.prototype.resetFocusElement = function () {\n        this.removeHover();\n        this.removeSelection();\n        this.removeFocus();\n        this.list.scrollTop = 0;\n        if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n            var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n            if (li) {\n                li.classList.add(dropDownListClasses.focus);\n            }\n        }\n    };\n    DropDownList.prototype.clearAll = function (e, properties) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        if (isNullOrUndefined(properties) || (!isNullOrUndefined(properties) &&\n            (isNullOrUndefined(properties.dataSource) ||\n                (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n            this.isActive = true;\n            this.resetSelection(properties);\n        }\n        var dataItem = this.getItemData();\n        if (this.previousValue === dataItem.value) {\n            return;\n        }\n        this.onChangeEvent(e);\n    };\n    DropDownList.prototype.resetSelection = function (properties) {\n        if (this.list) {\n            if ((!isNullOrUndefined(properties) &&\n                (isNullOrUndefined(properties.dataSource) ||\n                    (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n                this.selectedLI = null;\n                this.actionCompleteData.isUpdated = false;\n                this.actionCompleteData.ulElement = null;\n                this.actionCompleteData.list = null;\n                this.resetList(properties.dataSource);\n            }\n            else {\n                if (this.allowFiltering && this.getModuleName() !== 'autocomplete'\n                    && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list) &&\n                    this.actionCompleteData.list.length > 0) {\n                    this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n                }\n                this.resetFocusElement();\n            }\n        }\n        if (!isNullOrUndefined(this.hiddenElement)) {\n            this.hiddenElement.innerHTML = '';\n        }\n        if (!isNullOrUndefined(this.inputElement)) {\n            this.inputElement.value = '';\n        }\n        this.value = null;\n        this.itemData = null;\n        this.text = null;\n        this.index = null;\n        this.activeIndex = null;\n        this.item = null;\n        this.queryString = '';\n        if (this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n            this.valueTempElement = null;\n        }\n        this.setSelection(null, null);\n        this.isSelectCustom = false;\n        this.updateIconState();\n        this.cloneElements();\n    };\n    DropDownList.prototype.setHTMLAttributes = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                if (htmlAttr === 'class') {\n                    var updatedClassValue = (this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ')).trim();\n                    if (updatedClassValue !== '') {\n                        addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n                    }\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n                    this.enabled = false;\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n                    this.readonly = true;\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.container.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n                }\n                else if (htmlAttr === 'aria-label') {\n                    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n                        this.inputElement.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                    else {\n                        this.inputWrapper.container.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                }\n                else {\n                    var defaultAttr = ['title', 'id', 'placeholder',\n                        'role', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    var validateAttr = ['name', 'required'];\n                    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n                        defaultAttr.push('tabindex');\n                    }\n                    if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputElement);\n                        }\n                        else {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                }\n            }\n        }\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            this.inputWrapper.container.removeAttribute('tabindex');\n        }\n    };\n    DropDownList.prototype.getAriaAttributes = function () {\n        return {\n            'aria-disabled': 'false',\n            'role': 'combobox',\n            'aria-expanded': 'false',\n            'aria-live': 'polite',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    };\n    DropDownList.prototype.setEnableRtl = function () {\n        Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n        if (this.popupObj) {\n            this.popupObj.enableRtl = this.enableRtl;\n            this.popupObj.dataBind();\n        }\n    };\n    DropDownList.prototype.setEnable = function () {\n        Input.setEnabled(this.enabled, this.inputElement);\n        if (this.enabled) {\n            removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'false');\n            this.targetElement().setAttribute('tabindex', this.tabIndex);\n        }\n        else {\n            this.hidePopup();\n            addClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'true');\n            this.targetElement().tabIndex = -1;\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownList.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    DropDownList.prototype.getLocaleName = function () {\n        return 'drop-down-list';\n    };\n    DropDownList.prototype.preventTabIndex = function (element) {\n        if (this.getModuleName() === 'dropdownlist') {\n            element.tabIndex = -1;\n        }\n    };\n    DropDownList.prototype.targetElement = function () {\n        return !isNullOrUndefined(this.inputWrapper) ? this.inputWrapper.container : null;\n    };\n    DropDownList.prototype.getNgDirective = function () {\n        return 'EJS-DROPDOWNLIST';\n    };\n    DropDownList.prototype.getElementByText = function (text) {\n        return this.getElementByValue(this.getValueByText(text));\n    };\n    DropDownList.prototype.getElementByValue = function (value) {\n        var item;\n        var listItems = this.getItems();\n        for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n            var liItem = listItems_1[_i];\n            if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n                item = liItem;\n                break;\n            }\n        }\n        return item;\n    };\n    DropDownList.prototype.initValue = function () {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    DropDownList.prototype.updateValues = function () {\n        if (!isNullOrUndefined(this.value)) {\n            this.setSelection(this.getElementByValue(this.value), null);\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            var element = this.getElementByText(this.text);\n            if (isNullOrUndefined(element)) {\n                this.setProperties({ text: null });\n                return;\n            }\n            else {\n                this.setSelection(element, null);\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    };\n    DropDownList.prototype.onBlurHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        var target = e.relatedTarget;\n        var currentTarget = e.target;\n        var isPreventBlur = this.isPreventBlur;\n        this.isPreventBlur = false;\n        //IE 11 - issue\n        if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) ||\n            !this.isFilterLayout() && isNullOrUndefined(target))) {\n            if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n                this.filterInput.focus();\n            }\n            else {\n                this.targetElement().focus();\n            }\n            return;\n        }\n        if (this.isDocumentClick || (!isNullOrUndefined(this.popupObj)\n            && document.body.contains(this.popupObj.element) &&\n            this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter))) {\n            if (!this.beforePopupOpen) {\n                this.isDocumentClick = false;\n            }\n            return;\n        }\n        if (((this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement)\n            && (document.activeElement !== target || (document.activeElement === target &&\n                currentTarget.classList.contains(dropDownListClasses.inputFocus)))) ||\n            (isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering &&\n                currentTarget !== this.inputWrapper.container) || this.getModuleName() !== 'dropdownlist' &&\n            !this.inputWrapper.container.contains(target) || this.isTabKey) {\n            this.isDocumentClick = this.isPopupOpen ? true : false;\n            this.focusOutAction(e);\n            this.isTabKey = false;\n        }\n        if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n            this.isActive = false;\n            this.beforePopupOpen = false;\n        }\n    };\n    DropDownList.prototype.focusOutAction = function (e) {\n        this.isInteracted = false;\n        this.focusOut(e);\n        this.onFocusOut();\n    };\n    DropDownList.prototype.onFocusOut = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isSelected) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(null);\n        }\n        this.floatLabelChange();\n        this.dispatchEvent(this.hiddenElement, 'change');\n        if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n            this.dispatchEvent(this.inputElement, 'blur');\n        }\n        if (this.inputWrapper.clearButton) {\n            addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        }\n        this.trigger('blur');\n    };\n    DropDownList.prototype.onFocus = function (e) {\n        if (!this.isInteracted) {\n            this.isInteracted = true;\n            var args = { isInteracted: e ? true : false, event: e };\n            this.trigger('focus', args);\n        }\n        this.updateIconState();\n    };\n    DropDownList.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            var val = (this.element.tagName === this.getNgDirective()) ? null : this.inputElement.getAttribute('value');\n            this.text = val;\n        }\n    };\n    DropDownList.prototype.wireEvent = function () {\n        EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n        this.bindCommonEvent();\n    };\n    DropDownList.prototype.bindCommonEvent = function () {\n        EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        else {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.mobileKeyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        this.bindClearEvent();\n    };\n    DropDownList.prototype.bindClearEvent = function () {\n        if (this.showClearButton) {\n            EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n        }\n    };\n    DropDownList.prototype.unBindCommonEvent = function () {\n        if (!isNullOrUndefined(this.inputWrapper) && this.targetElement()) {\n            EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n        }\n        var formElement = this.inputElement && closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n        if (this.showClearButton) {\n            EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n        }\n    };\n    DropDownList.prototype.updateIconState = function () {\n        if (this.showClearButton) {\n            if (this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.wireListEvents = function () {\n        if (!isNullOrUndefined(this.list)) {\n            EventHandler.add(this.list, 'click', this.onMouseClick, this);\n            EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n            EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n        }\n    };\n    DropDownList.prototype.onSearch = function (e) {\n        if (e.charCode !== 32 && e.charCode !== 13) {\n            if (this.list === undefined) {\n                this.renderList();\n            }\n            this.searchKeyEvent = e;\n            this.onServerIncrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onServerIncrementalSearch = function (e) {\n        if (!this.isRequested && !isNullOrUndefined(this.list) &&\n            !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n            this.incrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.setSelection(li, e);\n        if (Browser.isDevice && this.isFilterLayout()) {\n            history.back();\n        }\n        else {\n            var delay = 100;\n            this.closePopup(delay, e);\n        }\n    };\n    DropDownList.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    DropDownList.prototype.setHover = function (li) {\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    DropDownList.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    DropDownList.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    DropDownList.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    DropDownList.prototype.incrementalSearch = function (e) {\n        if (this.liCollections.length > 0) {\n            var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n            if (!isNullOrUndefined(li)) {\n                this.setSelection(li, e);\n                this.setScrollPosition();\n            }\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            this.spinnerElement.innerHTML = '';\n            this.spinnerElement = null;\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] ||\n                !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    DropDownList.prototype.keyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n        var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n        this.isEscapeKey = e.action === 'escape';\n        this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            var isTabAction = e.action === 'tab' || e.action === 'close';\n            if (isNullOrUndefined(this.list) && !this.isRequested && !isTabAction && e.action !== 'escape') {\n                this.searchKeyEvent = e;\n                this.renderList(e);\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                isNavigation && this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if ((isTabAction && this.getModuleName() !== 'autocomplete') && this.isPopupOpen\n                || e.action === 'escape') {\n                e.preventDefault();\n            }\n            this.isSelected = e.action === 'escape' ? false : this.isSelected;\n            this.isTyped = (isNavigation || e.action === 'escape') ? false : this.isTyped;\n            switch (e.action) {\n                case 'down':\n                case 'up':\n                    this.updateUpDownAction(e);\n                    break;\n                case 'pageUp':\n                    this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'pageDown':\n                    this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'home':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'end':\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'space':\n                    if (this.getModuleName() === 'dropdownlist') {\n                        if (!this.beforePopupOpen) {\n                            this.showPopup();\n                        }\n                    }\n                    break;\n                case 'open':\n                    this.showPopup(e);\n                    break;\n                case 'hide':\n                    this.preventAltUp = this.isPopupOpen;\n                    this.hidePopup(e);\n                    this.focusDropDown(e);\n                    break;\n                case 'enter':\n                    this.selectCurrentItem(e);\n                    break;\n                case 'tab':\n                    this.selectCurrentValueOnTab(e);\n                    break;\n                case 'escape':\n                case 'close':\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                        this.focusDropDown(e);\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownList.prototype.updateUpDownAction = function (e) {\n        var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            if (this.getModuleName() === 'autocomplete') {\n                startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n                index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            }\n            var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex]\n                : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        e.preventDefault();\n    };\n    DropDownList.prototype.updateHomeEndAction = function (e) {\n        if (this.getModuleName() === 'dropdownlist') {\n            var findLi = 0;\n            if (e.action === 'home') {\n                findLi = 0;\n            }\n            else {\n                findLi = this.getItems().length - 1;\n            }\n            e.preventDefault();\n            if (this.activeIndex === findLi) {\n                return;\n            }\n            this.setSelection(this.liCollections[findLi], e);\n        }\n    };\n    DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.selectCurrentItem(e);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                this.focusDropDown(e);\n            }\n        }\n    };\n    DropDownList.prototype.mobileKeyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if ((this.isEditTextBox()) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            if (this.list === undefined && !this.isRequested) {\n                this.searchKeyEvent = e;\n                this.renderList();\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if (e.action === 'enter') {\n                this.selectCurrentItem(e);\n            }\n        }\n    };\n    DropDownList.prototype.selectCurrentItem = function (e) {\n        if (this.isPopupOpen) {\n            var li = this.list.querySelector('.' + dropDownListClasses.focus);\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n            this.hidePopup(e);\n            this.focusDropDown(e);\n        }\n        else {\n            this.showPopup();\n        }\n    };\n    DropDownList.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    DropDownList.prototype.getPageCount = function () {\n        var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n    };\n    DropDownList.prototype.pageUpSelection = function (steps, event) {\n        var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n        this.setSelection(previousItem, event);\n    };\n    DropDownList.prototype.pageDownSelection = function (steps, event) {\n        var list = this.getItems();\n        var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n        this.setSelection(previousItem, event);\n    };\n    DropDownList.prototype.unWireEvent = function () {\n        if (!isNullOrUndefined(this.inputWrapper)) {\n            EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n            EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n            EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n        }\n        this.unBindCommonEvent();\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.unWireListEvents = function () {\n        if (this.list) {\n            EventHandler.remove(this.list, 'click', this.onMouseClick);\n            EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n            EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n        }\n    };\n    DropDownList.prototype.checkSelector = function (id) {\n        return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n    };\n    DropDownList.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) &&\n            !isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.container.contains(e.target)) {\n            if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n                this.isDocumentClick = true;\n                var isActive = this.isRequested;\n                this.isInteracted = false;\n                this.hidePopup(e);\n                if (!isActive) {\n                    this.onFocusOut();\n                    this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n                }\n            }\n        }\n        else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput)\n            && !(this.getModuleName() === 'combobox' &&\n                !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n            this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() ||\n                document.activeElement === this.filterInput);\n            e.preventDefault();\n        }\n    };\n    DropDownList.prototype.activeStateChange = function () {\n        if (this.isDocumentClick) {\n            this.hidePopup();\n            this.onFocusOut();\n            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n    };\n    DropDownList.prototype.focusDropDown = function (e) {\n        if (!this.initial && this.isFilterLayout()) {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.dropDownClick = function (e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n            return;\n        }\n        var target = e.target;\n        if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n            e.preventDefault();\n        }\n        if (!this.readonly) {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                if (this.isFilterLayout()) {\n                    this.focusDropDown(e);\n                }\n            }\n            else {\n                this.focusIn(e);\n                this.floatLabelChange();\n                this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n                this.isDropDownClick = true;\n                this.showPopup(e);\n            }\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            // eslint-disable-next-line max-len\n            var duration = (this.element.tagName === this.getNgDirective() && this.itemTemplate) ? 500 : 100;\n            if (!this.isSecondClick) {\n                setTimeout(function () {\n                    proxy_1.cloneElements();\n                    proxy_1.isSecondClick = true;\n                }, duration);\n            }\n        }\n        else {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.cloneElements = function () {\n        if (this.list) {\n            var ulElement = this.list.querySelector('ul');\n            if (ulElement) {\n                ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                this.actionCompleteData.ulElement = ulElement;\n            }\n        }\n    };\n    DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                }\n                else {\n                    _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, e, preventSelect, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        if (this.itemData != selectedData) {\n            this.previousValue = (!isNullOrUndefined(this.itemData)) ? typeof this.itemData == \"object\" ? this.checkFieldValue(this.itemData, this.fields.value.split('.')) : this.itemData : null;\n        }\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    DropDownList.prototype.activeItem = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n            this.removeSelection();\n            li.classList.add(dropDownBaseClasses.selected);\n            this.removeHover();\n            li.setAttribute('aria-selected', 'true');\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.setValue = function (e) {\n        var dataItem = this.getItemData();\n        if (dataItem.value === null) {\n            Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        else {\n            Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n        }\n        else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n        }\n        var clearIcon = dropDownListClasses.clearIcon;\n        var isFilterElement = this.isFiltering() && this.filterInput && (this.getModuleName() === 'combobox');\n        var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n        if (this.isFiltering() && clearElement) {\n            clearElement.style.removeProperty('visibility');\n        }\n        if (this.previousValue === dataItem.value) {\n            this.isSelected = false;\n            return true;\n        }\n        else {\n            this.isSelected = !this.initial ? true : false;\n            this.isSelectCustom = false;\n            if (this.getModuleName() === 'dropdownlist') {\n                this.updateIconState();\n            }\n            return false;\n        }\n    };\n    DropDownList.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    DropDownList.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.setValue(e)) {\n            return;\n        }\n        if ((!this.isPopupOpen && !isNullOrUndefined(li)) || (this.isPopupOpen && !isNullOrUndefined(e) &&\n            (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter'))) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(e);\n        }\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n            this.setScrollPosition(e);\n        }\n        if (Browser.info.name !== 'mozilla') {\n            if (this.targetElement()) {\n                attributes(this.targetElement(), { 'aria-describedby': this.inputElement.id !== '' ? this.inputElement.id : this.element.id });\n                this.targetElement().removeAttribute('aria-live');\n            }\n        }\n        if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n            attributes(this.targetElement(), { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n        }\n        else if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n            attributes(this.targetElement(), { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id });\n        }\n    };\n    DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n        var checkTemplate = false;\n        if (dropdownTemplate) {\n            try {\n                checkTemplate = (document.querySelectorAll(dropdownTemplate).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownList.prototype.setValueTemplate = function () {\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['valueTemplate']);\n            if (this.valueTempElement) {\n                detach(this.valueTempElement);\n                this.inputElement.style.display = 'block';\n                this.valueTempElement = null;\n            }\n        }\n        if (!this.valueTempElement) {\n            this.valueTempElement = this.createElement('span', { className: dropDownListClasses.value });\n            this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n            this.inputElement.style.display = 'none';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.valueTempElement.innerHTML = '';\n        }\n        var valuecheck = this.dropdownCompiler(this.valueTemplate);\n        if (valuecheck) {\n            compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.valueTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n        if (valueCompTemp && valueCompTemp.length > 0) {\n            for (var i = 0; i < valueCompTemp.length; i++) {\n                this.valueTempElement.appendChild(valueCompTemp[i]);\n            }\n        }\n        this.renderReactTemplates();\n    };\n    DropDownList.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    DropDownList.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    /**\n     * To trigger the change event for list.\n     *\n     * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onChangeEvent = function (eve) {\n        var dataItem = this.getItemData();\n        var index = this.isSelectCustom ? null : this.activeIndex;\n        this.setProperties({ 'index': index, 'text': dataItem.text, 'value': dataItem.value }, true);\n        this.detachChangeEvent(eve);\n        this.dispatchEvent(this.hiddenElement, 'change');\n    };\n    DropDownList.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    DropDownList.prototype.detachChangeEvent = function (eve) {\n        this.isSelected = false;\n        this.previousValue = this.value;\n        this.activeIndex = this.index;\n        this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n        if (!this.initial) {\n            var items = this.detachChanges(this.itemData);\n            var preItems = void 0;\n            if (typeof this.previousItemData === 'string' ||\n                typeof this.previousItemData === 'boolean' ||\n                typeof this.previousItemData === 'number') {\n                preItems = Object.defineProperties({}, {\n                    value: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    },\n                    text: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    }\n                });\n            }\n            else {\n                preItems = this.previousItemData;\n            }\n            this.setHiddenValue();\n            var eventArgs = {\n                e: eve,\n                item: this.item,\n                itemData: items,\n                previousItem: this.previousSelectedLI,\n                previousItemData: preItems,\n                isInteracted: eve ? true : false,\n                value: this.value,\n                element: this.element,\n                event: eve\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n        }\n        if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n            removeClass([this.inputWrapper.container], 'e-valid-input');\n        }\n    };\n    DropDownList.prototype.setHiddenValue = function () {\n        if (!isNullOrUndefined(this.value)) {\n            if (this.hiddenElement.querySelector('option')) {\n                var selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.textContent = this.text;\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n            else {\n                if (!isNullOrUndefined(this.hiddenElement)) {\n                    this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n                    var selectedElement = this.hiddenElement.querySelector('option');\n                    selectedElement.setAttribute('value', this.value.toString());\n                }\n            }\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    };\n    /**\n     * Filter bar implementation\n     *\n     * @param {KeyboardEventArgs} e - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onFilterUp = function (e) {\n        if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                case 38: //up arrow\n                case 40: //down arrow\n                    if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else {\n                        this.preventAutoFill = false;\n                    }\n                    this.preventAltUp = false;\n                    if (this.getModuleName() === 'autocomplete' && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n                        attributes(this.targetElement(), { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n                    }\n                    e.preventDefault();\n                    break;\n                case 46: //delete\n                case 8: //backspace\n                    this.typedString = this.filterInput.value;\n                    if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '') {\n                        if (this.list) {\n                            this.resetFocusElement();\n                        }\n                        this.activeIndex = null;\n                        if (this.getModuleName() !== 'dropdownlist') {\n                            this.preventAutoFill = true;\n                            this.searchLists(e);\n                            if (this.getModuleName() === 'autocomplete') {\n                                this.hidePopup();\n                            }\n                        }\n                    }\n                    e.preventDefault();\n                    break;\n                default:\n                    this.typedString = this.filterInput.value;\n                    this.preventAutoFill = false;\n                    this.searchLists(e);\n                    break;\n            }\n        }\n        else {\n            this.isValidKey = false;\n        }\n    };\n    DropDownList.prototype.onFilterDown = function (e) {\n        switch (e.keyCode) {\n            case 13: //enter\n                break;\n            case 40: //down arrow\n            case 38: //up arrow\n                this.queryString = this.filterInput.value;\n                e.preventDefault();\n                break;\n            case 9: //tab\n                if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n                    e.preventDefault();\n                }\n                break;\n            default:\n                this.prevSelectPoints = this.getSelectionPoints();\n                this.queryString = this.filterInput.value;\n                break;\n        }\n    };\n    DropDownList.prototype.removeFillSelection = function () {\n        if (this.isInteracted) {\n            var selection = this.getSelectionPoints();\n            this.inputElement.setSelectionRange(selection.end, selection.end);\n        }\n    };\n    DropDownList.prototype.getQuery = function (query) {\n        var filterQuery;\n        if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n            var filterType = this.typedString === '' ? 'contains' : this.filterType;\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        }\n        return filterQuery;\n    };\n    DropDownList.prototype.getSelectionPoints = function () {\n        var input = this.inputElement;\n        return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };\n    };\n    DropDownList.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isTyped = true;\n        this.activeIndex = null;\n        this.isListSearched = true;\n        if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n            var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n        this.isDataFetched = false;\n        if (this.isFiltering()) {\n            var eventArgs_1 = {\n                preventDefaultAction: false,\n                text: this.filterInput.value,\n                updateData: function (dataSource, query, fields) {\n                    if (eventArgs_1.cancel) {\n                        return;\n                    }\n                    _this.isCustomFilter = true;\n                    _this.filteringAction(dataSource, query, fields);\n                },\n                baseEventArgs: e,\n                cancel: false\n            };\n            this.trigger('filtering', eventArgs_1, function (eventArgs) {\n                if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n                    _this.filteringAction(_this.dataSource, null, _this.fields);\n                }\n            });\n        }\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    DropDownList.prototype.filter = function (dataSource, query, fields) {\n        this.isCustomFilter = true;\n        this.filteringAction(dataSource, query, fields);\n    };\n    DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n        if (!isNullOrUndefined(this.filterInput)) {\n            this.beforePopupOpen = (!this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '') ?\n                false : true;\n            if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n                this.actionCompleteData.isUpdated = false;\n                this.isTyped = false;\n                if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n                }\n                this.isTyped = true;\n                if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n                    this.focusIndexItem();\n                    this.setScrollPosition();\n                }\n                this.isNotSearchList = true;\n            }\n            else {\n                this.isNotSearchList = false;\n                query = (this.filterInput.value.trim() === '') ? null : query;\n                this.resetList(dataSource, fields, query);\n            }\n            this.renderReactTemplates();\n        }\n    };\n    DropDownList.prototype.setSearchBox = function (popupElement) {\n        if (this.isFiltering()) {\n            var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ?\n                popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n                className: dropDownListClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: dropDownListClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ?\n                    [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            if (!isNullOrUndefined(this.cssClass)) {\n                if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], parentElement);\n            prepend([parentElement], popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'role': 'combobox',\n                'autocomplete': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            if (!Browser.isDevice) {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.keyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            else {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.mobileKeyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            EventHandler.add(this.filterInput, 'input', this.onInput, this);\n            EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n            return this.filterInputObj;\n        }\n        else {\n            return inputObject;\n        }\n    };\n    DropDownList.prototype.onInput = function (e) {\n        this.isValidKey = true;\n        // For filtering works in mobile firefox.\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.typedString = this.filterInput.value;\n            this.preventAutoFill = true;\n            this.searchLists(e);\n        }\n    };\n    DropDownList.prototype.pasteHandler = function (e) {\n        var _this = this;\n        setTimeout(function () {\n            _this.typedString = _this.filterInput.value;\n            _this.searchLists(e);\n        });\n    };\n    DropDownList.prototype.onActionFailure = function (e) {\n        _super.prototype.onActionFailure.call(this, e);\n        if (this.beforePopupOpen) {\n            this.renderPopup();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        var _this = this;\n        if (this.isNotSearchList) {\n            this.isNotSearchList = false;\n            return;\n        }\n        if (this.isActive) {\n            var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n            _super.prototype.onActionComplete.call(this, ulElement, list, e);\n            this.updateSelectElementData(this.allowFiltering);\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n                this.isRequested = false;\n                this.keyActionHandler(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n                this.incrementalSearch(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            this.list.scrollTop = 0;\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n            }\n            if (this.initRemoteRender) {\n                this.initial = true;\n                this.activeIndex = this.index;\n                this.initRemoteRender = false;\n                if (this.value && this.dataSource instanceof DataManager) {\n                    var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n                    var fieldValue_1 = this.fields.value.split('.');\n                    var checkVal = list.some(function (x) {\n                        return isNullOrUndefined(x[checkField_1]) && fieldValue_1.length > 1 ?\n                            _this.checkFieldValue(x, fieldValue_1) === _this.value : x[checkField_1] === _this.value;\n                    });\n                    if (!checkVal) {\n                        this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value)))\n                            .then(function (e) {\n                            if (e.result.length > 0) {\n                                _this.addItem(e.result, list.length);\n                                _this.updateValues();\n                            }\n                            else {\n                                _this.updateValues();\n                            }\n                        });\n                    }\n                    else {\n                        this.updateValues();\n                    }\n                }\n                else {\n                    this.updateValues();\n                }\n                this.initial = false;\n            }\n            else if (this.getModuleName() === 'autocomplete' && this.value) {\n                this.setInputValue();\n            }\n            if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n                if (!this.actionCompleteData.isUpdated || ((!this.isCustomFilter\n                    && !this.isFilterFocus) || (isNullOrUndefined(this.itemData) && this.allowFiltering)\n                    && ((this.dataSource instanceof DataManager)\n                        || (!isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) &&\n                            this.dataSource.length !== 0)))) {\n                    if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                        setTimeout(function () {\n                            _this.updateActionCompleteDataValues(ulElement, list);\n                        }, 0);\n                    }\n                    else {\n                        this.updateActionCompleteDataValues(ulElement, list);\n                    }\n                }\n                this.addNewItem(list, selectedItem);\n                if (!isNullOrUndefined(this.itemData)) {\n                    this.focusIndexItem();\n                }\n            }\n            if (this.beforePopupOpen) {\n                this.renderPopup(e);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DropDownList.prototype.checkFieldValue = function (list, fieldValue) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var checkField = list;\n        fieldValue.forEach(function (value) {\n            checkField = checkField[value];\n        });\n        return checkField;\n    };\n    DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n        this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list: list, isUpdated: true };\n        if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.addNewItem = function (listData, newElement) {\n        var _this = this;\n        if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n            var value_1 = this.getItemData().value;\n            var isExist = listData.some(function (data) {\n                return (((typeof data === 'string' || typeof data === 'number') && data === value_1) ||\n                    (getValue(_this.fields.value, data) === value_1));\n            });\n            if (!isExist) {\n                this.addItem(this.itemData);\n            }\n        }\n    };\n    DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n        var _this = this;\n        if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n            if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                setTimeout(function () {\n                    _this.actionCompleteDataUpdate(li, item, index);\n                }, 0);\n            }\n            else {\n                this.actionCompleteDataUpdate(li, item, index);\n            }\n        }\n    };\n    DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n        if (index !== null) {\n            this.actionCompleteData.ulElement.\n                insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n        }\n        else {\n            this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n        }\n        if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n            this.actionCompleteData.list.push(item);\n        }\n    };\n    DropDownList.prototype.focusIndexItem = function () {\n        var value = this.getItemData().value;\n        this.activeIndex = this.getIndexByValue(value);\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.selectedLI = element;\n        this.activeItem(element);\n        this.removeFocus();\n    };\n    DropDownList.prototype.updateSelection = function () {\n        var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        if (selectedItem) {\n            this.setProperties({ 'index': this.getIndexByValue(selectedItem.getAttribute('data-value')) });\n            this.activeIndex = this.index;\n        }\n        else {\n            this.removeFocus();\n            this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.removeFocus = function () {\n        var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n        if (highlightedItem && highlightedItem.length) {\n            removeClass(highlightedItem, dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.renderPopup = function (e) {\n        var _this = this;\n        if (this.popupObj && document.body.contains(this.popupObj.element)) {\n            this.refreshPopup();\n            return;\n        }\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle = _this.createElement('div', {\n                    id: _this.element.id + '_popup', className: 'e-ddl e-popup ' + (_this.cssClass !== null ? _this.cssClass : '')\n                });\n                var searchBox = _this.setSearchBox(popupEle);\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (_this.headerTemplate) {\n                    _this.setHeaderTemplate(popupEle);\n                }\n                append([_this.list], popupEle);\n                if (_this.footerTemplate) {\n                    _this.setFooterTemplate(popupEle);\n                }\n                document.body.appendChild(popupEle);\n                popupEle.style.visibility = 'hidden';\n                if (_this.popupHeight !== 'auto') {\n                    _this.searchBoxHeight = 0;\n                    if (!isNullOrUndefined(searchBox.container)) {\n                        _this.searchBoxHeight = (searchBox.container.parentElement).getBoundingClientRect().height;\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (_this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.headerTemplate) {\n                        _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n                        var height = Math.round(_this.header.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.footerTemplate) {\n                        _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n                        var height = Math.round(_this.footer.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n                    popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n                }\n                else {\n                    popupEle.style.height = 'auto';\n                }\n                var offsetValue = 0;\n                var left = void 0;\n                if (!isNullOrUndefined(_this.selectedLI) && (!isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0)) {\n                    _this.setScrollPosition();\n                }\n                else {\n                    _this.list.scrollTop = 0;\n                }\n                if (Browser.isDevice && (!_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' ||\n                    (_this.isDropDownClick && _this.getModuleName() === 'combobox')))) {\n                    offsetValue = _this.getOffsetValue(popupEle);\n                    var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n                    if (!isNullOrUndefined(_this.inputElement)) {\n                        left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                            parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) +\n                            parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n                    }\n                }\n                _this.getFocusElement();\n                _this.createPopup(popupEle, offsetValue, left);\n                _this.checkCollision(popupEle);\n                if (Browser.isDevice) {\n                    _this.popupObj.element.classList.add(dropDownListClasses.device);\n                    if (_this.getModuleName() === 'dropdownlist' || (_this.getModuleName() === 'combobox'\n                        && !_this.allowFiltering && _this.isDropDownClick)) {\n                        _this.popupObj.collision = { X: 'fit', Y: 'fit' };\n                    }\n                    if (_this.isFilterLayout()) {\n                        _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n                        _this.popupObj.position = { X: 0, Y: 0 };\n                        _this.popupObj.dataBind();\n                        attributes(_this.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n                        addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n                        _this.setSearchBoxPosition();\n                        _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n                        _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n                        EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n                        EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n                    }\n                }\n                popupEle.style.visibility = 'visible';\n                addClass([popupEle], 'e-popup-close');\n                var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n                for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n                    var element = scrollParentElements_1[_i];\n                    EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n                }\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n                attributes(_this.targetElement(), { 'aria-expanded': 'true', 'aria-owns': _this.inputElement.id + '_options' });\n                _this.inputElement.setAttribute('aria-expanded', 'true');\n                var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n                addClass([inputParent], [dropDownListClasses.inputFocus]);\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, event: e, cancel: false, animation: animModel };\n                _this.trigger('open', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        if (!isNullOrUndefined(_this.inputWrapper)) {\n                            addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n                        }\n                        _this.renderReactTemplates();\n                        if (!isNullOrUndefined(_this.popupObj)) {\n                            _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.element : null);\n                        }\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    DropDownList.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick))) {\n            var collision = isCollide(popupEle);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.getOffsetValue = function (popupEle) {\n        var popupStyles = getComputedStyle(popupEle);\n        var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n        var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n        return this.setPopupPosition(borderTop + borderBottom);\n    };\n    DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputWrapper.container, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' },\n            zIndex: this.zIndex,\n            close: function () {\n                if (!_this.isDocumentClick) {\n                    _this.focusDropDown();\n                }\n                // eslint-disable-next-line\n                if (_this.isReact) {\n                    _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n                }\n                _this.isNotSearchList = false;\n                _this.isDocumentClick = false;\n                _this.destroyPopup();\n                if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n                    _this.isActive = true;\n                    _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n                }\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement &&\n                    _this.actionCompleteData.ulElement.querySelector('li');\n                var ulElement = _this.list.querySelector('ul li');\n                if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n                    attributes(_this.targetElement(), { 'aria-activedescendant': _this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n                }\n                else if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-active')[0])) {\n                    attributes(_this.targetElement(), { 'aria-activedescendant': _this.ulElement.getElementsByClassName('e-active')[0].id });\n                }\n                if (_this.isFiltering() && _this.itemTemplate && (_this.element.tagName === _this.getNgDirective()) &&\n                    (actionList && ulElement && actionList.textContent !== ulElement.textContent) &&\n                    _this.element.tagName !== 'EJS-COMBOBOX') {\n                    _this.cloneElements();\n                }\n                if (_this.isFilterLayout()) {\n                    removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n                    _this.isFilterFocus = true;\n                    _this.filterInput.focus();\n                    if (_this.inputWrapper.clearButton) {\n                        addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n                    }\n                }\n                _this.activeStateChange();\n            },\n            targetExitViewport: function () {\n                if (!Browser.isDevice) {\n                    _this.hidePopup();\n                }\n            }\n        });\n    };\n    DropDownList.prototype.isEmptyList = function () {\n        return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n    };\n    DropDownList.prototype.getFocusElement = function () {\n        // combo-box used this method\n    };\n    DropDownList.prototype.isFilterLayout = function () {\n        return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n    };\n    DropDownList.prototype.scrollHandler = function () {\n        if (Browser.isDevice && ((this.getModuleName() === 'dropdownlist' &&\n            !this.isFilterLayout()) || (this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick))) {\n            this.hidePopup();\n        }\n    };\n    DropDownList.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        this.popupObj.element.style.maxHeight = '100%';\n        this.popupObj.element.style.width = '100%';\n        this.list.style.maxHeight = (window.innerHeight - searchBoxHeight) + 'px';\n        this.list.style.height = (window.innerHeight - searchBoxHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    DropDownList.prototype.setPopupPosition = function (border) {\n        var offsetValue;\n        var popupOffset = border;\n        var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n        var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n        var liHeight = firstItem.getBoundingClientRect().height;\n        var listHeight = this.list.offsetHeight / 2;\n        var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n        var lastItemOffsetValue = lastItem.offsetTop;\n        if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) &&\n            this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n            var count = this.list.offsetHeight / liHeight;\n            var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n            offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n            this.list.scrollTop = selectedLI.offsetTop;\n        }\n        else if (height > listHeight) {\n            offsetValue = listHeight - liHeight / 2;\n            this.list.scrollTop = height - listHeight + liHeight / 2;\n        }\n        else {\n            offsetValue = height;\n        }\n        var inputHeight = this.inputWrapper.container.offsetHeight;\n        offsetValue = offsetValue + liHeight + popupOffset - ((liHeight - inputHeight) / 2);\n        return -offsetValue;\n    };\n    DropDownList.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === 'dropdownlist' ||\n            (this.isDropDownClick && this.getModuleName() === 'combobox')))) {\n            var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n            width = (parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) +\n                parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2) + 'px';\n        }\n        return width;\n    };\n    DropDownList.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    DropDownList.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                    this.fixedHeaderElement.offsetHeight : 0);\n            }\n        }\n    };\n    DropDownList.prototype.isEditTextBox = function () {\n        return false;\n    };\n    DropDownList.prototype.isFiltering = function () {\n        return this.allowFiltering;\n    };\n    DropDownList.prototype.isPopupButton = function () {\n        return true;\n    };\n    DropDownList.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    DropDownList.prototype.clearText = function () {\n        this.filterInput.value = this.typedString = '';\n        this.searchLists(null);\n    };\n    DropDownList.prototype.setEleWidth = function (width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.inputWrapper.container.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.inputWrapper.container.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    };\n    DropDownList.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        this.isTyped = false;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.isActive = false;\n        this.filterInputObj = null;\n        this.isDropDownClick = false;\n        this.preventAutoFill = false;\n        var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n        for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n            var element = scrollableParentElements_1[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n        if (Browser.isDevice && this.isFilterLayout()) {\n            removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n        }\n        if (this.isFilterLayout()) {\n            if (!Browser.isDevice) {\n                this.searchKeyModule.destroy();\n                if (this.clearIconElement) {\n                    EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n                }\n            }\n            if (this.backIconElement) {\n                EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n                EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n            }\n            if (!isNullOrUndefined(this.filterInput)) {\n                EventHandler.remove(this.filterInput, 'input', this.onInput);\n                EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n                EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n                EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n                EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n            }\n            this.filterInput = null;\n        }\n        attributes(this.targetElement(), { 'aria-expanded': 'false' });\n        this.inputElement.setAttribute('aria-expanded', 'false');\n        this.targetElement().removeAttribute('aria-owns');\n        this.targetElement().removeAttribute('aria-activedescendant');\n        this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n        if (this.isFiltering()) {\n            this.actionCompleteData.isUpdated = false;\n        }\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('close', eventArgs, function (eventArgs) {\n            if (!isNullOrUndefined(_this.popupObj) &&\n                !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n                var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n                fixedHeader.parentNode.removeChild(fixedHeader);\n                _this.fixedHeaderElement = null;\n            }\n            if (!eventArgs.cancel) {\n                if (_this.getModuleName() === 'autocomplete') {\n                    _this.rippleFun();\n                }\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    DropDownList.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.isFilterFocus = false;\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            detach(this.popupObj.element);\n        }\n    };\n    DropDownList.prototype.clickOnBackIcon = function () {\n        this.hidePopup();\n        this.focusIn();\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.render = function () {\n        if (this.element.tagName === 'INPUT') {\n            this.inputElement = this.element;\n            if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n                this.inputElement.setAttribute('role', 'combobox');\n            }\n            if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n                this.inputElement.setAttribute('type', 'text');\n            }\n            this.inputElement.setAttribute('aria-expanded', 'false');\n        }\n        else {\n            this.inputElement = this.createElement('input', { attrs: { role: 'combobox', type: 'text' } });\n            if (this.element.tagName !== this.getNgDirective()) {\n                this.element.style.display = 'none';\n            }\n            this.element.parentElement.insertBefore(this.inputElement, this.element);\n            this.preventTabIndex(this.inputElement);\n        }\n        var updatedCssClassValues = this.cssClass;\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(closest(this.element, 'fieldset')) && closest(this.element, 'fieldset').disabled) {\n            this.enabled = false;\n        }\n        this.inputWrapper = Input.createInput({\n            element: this.inputElement,\n            buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n            floatLabelType: this.floatLabelType,\n            properties: {\n                readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n                placeholder: this.placeholder,\n                cssClass: updatedCssClassValues,\n                enabled: this.enabled,\n                enableRtl: this.enableRtl,\n                showClearButton: this.showClearButton\n            }\n        }, this.createElement);\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.inputWrapper.container);\n        }\n        else {\n            this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n        }\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': dropDownListClasses.hiddenElement }\n        });\n        prepend([this.hiddenElement], this.inputWrapper.container);\n        this.validationAttribute(this.element, this.hiddenElement);\n        this.setReadOnly();\n        this.setFields();\n        this.inputWrapper.container.style.width = formatUnit(this.width);\n        this.inputWrapper.container.classList.add('e-ddl');\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never') {\n            this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n        this.wireEvent();\n        this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n        this.element.removeAttribute('tabindex');\n        var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement.id = id + '_hidden';\n        this.targetElement().setAttribute('tabindex', this.tabIndex);\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            this.inputElement.setAttribute('aria-label', this.getModuleName());\n        }\n        else {\n            attributes(this.targetElement(), { 'aria-label': this.getModuleName() });\n        }\n        attributes(this.targetElement(), this.getAriaAttributes());\n        this.updateDataAttribute(this.htmlAttributes);\n        this.setHTMLAttributes();\n        if (this.targetElement() === this.inputElement) {\n            this.inputElement.removeAttribute('aria-labelledby');\n        }\n        if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n            this.initValue();\n        }\n        else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n            var selectElement = this.element;\n            this.value = selectElement.options[selectElement.selectedIndex].value;\n            this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n            this.initValue();\n        }\n        this.setEnabled();\n        this.preventTabIndex(this.element);\n        if (!this.enabled) {\n            this.targetElement().tabIndex = -1;\n        }\n        this.initial = false;\n        this.element.style.opacity = '';\n        this.inputElement.onselect = function (e) {\n            e.stopImmediatePropagation();\n        };\n        this.inputElement.onchange = function (e) {\n            e.stopImmediatePropagation();\n        };\n        if (this.element.hasAttribute('autofocus')) {\n            this.focusIn();\n        }\n        if (!isNullOrUndefined(this.text)) {\n            this.inputElement.setAttribute('value', this.text);\n        }\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        var floatLabelElement = this.inputWrapper.container.getElementsByClassName('e-float-text')[0];\n        if (!isNullOrUndefined(this.element.id) && this.element.id !== '' && !isNullOrUndefined(floatLabelElement)) {\n            floatLabelElement.id = 'label_' + this.element.id.replace(/ /g, '_');\n            attributes(this.inputElement, { 'aria-labelledby': floatLabelElement.id });\n        }\n        this.renderComplete();\n    };\n    DropDownList.prototype.setFooterTemplate = function (popupEle) {\n        var compiledString;\n        if (this.footer) {\n            if (this.isReact) {\n                this.clearTemplate(['footerTemplate']);\n            }\n            else {\n                this.footer.innerHTML = '';\n            }\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], dropDownListClasses.footer);\n        }\n        var footercheck = this.dropdownCompiler(this.footerTemplate);\n        if (footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (footerCompTemp && footerCompTemp.length > 0) {\n            append(footerCompTemp, this.footer);\n        }\n        append([this.footer], popupEle);\n    };\n    DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n        var compiledString;\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], dropDownListClasses.header);\n        }\n        var headercheck = this.dropdownCompiler(this.headerTemplate);\n        if (headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (headerCompTemp && headerCompTemp.length) {\n            append(headerCompTemp, this.header);\n        }\n        var contentEle = popupEle.querySelector('div.e-content');\n        popupEle.insertBefore(this.header, contentEle);\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.setEnabled = function () {\n        this.element.setAttribute('aria-disabled', (this.enabled) ? 'false' : 'true');\n    };\n    DropDownList.prototype.setOldText = function (text) {\n        this.text = text;\n    };\n    DropDownList.prototype.setOldValue = function (value) {\n        this.value = value;\n    };\n    DropDownList.prototype.refreshPopup = function () {\n        if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) &&\n            ((this.allowFiltering && !(Browser.isDevice && this.isFilterLayout())) || this.getModuleName() === 'autocomplete')) {\n            removeClass([this.popupObj.element], 'e-popup-close');\n            this.popupObj.refreshPosition(this.inputWrapper.container);\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.checkData = function (newProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering &&\n            !(this.isListSearched && (newProp.dataSource instanceof DataManager))) {\n            this.list = null;\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n        }\n        this.isListSearched = false;\n        var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n        var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n        if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n            this.itemData = null;\n        }\n        if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n            this.actionData = this.actionCompleteData;\n        }\n        else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            this.actionCompleteData = this.getModuleName() === 'combobox' ?\n                { ulElement: null, list: null, isUpdated: false } : this.actionCompleteData;\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.updateDataSource = function (props) {\n        if (this.inputElement.value !== '' || (!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0)))) {\n            this.clearAll(null, props);\n        }\n        if ((this.fields.groupBy && props.fields) && !this.isGroupChecking && this.list) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0))) || !(props.dataSource === [])) {\n            this.typedString = '';\n            this.resetList(this.dataSource);\n        }\n        if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n            this.checkCustomValue();\n        }\n    };\n    DropDownList.prototype.checkCustomValue = function () {\n        this.itemData = this.getDataByValue(this.value);\n        var dataItem = this.getItemData();\n        this.setProperties({ 'text': dataItem.text, 'value': dataItem.value });\n    };\n    DropDownList.prototype.updateInputFields = function () {\n        if (this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @private\n     * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n     * @returns {void}\n     */\n    DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        if (this.getModuleName() === 'dropdownlist') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'query':\n                case 'dataSource': break;\n                case 'htmlAttributes':\n                    this_1.setHTMLAttributes();\n                    break;\n                case 'width':\n                    this_1.setEleWidth(newProp.width);\n                    Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this_1.filterInput) {\n                        Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n                    }\n                    break;\n                case 'readonly':\n                    if (this_1.getModuleName() !== 'dropdownlist') {\n                        Input.setReadonly(newProp.readonly, this_1.inputElement);\n                    }\n                    this_1.setReadOnly();\n                    break;\n                case 'cssClass':\n                    this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n                    break;\n                case 'enableRtl':\n                    this_1.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this_1.setEnable();\n                    break;\n                case 'text':\n                    if (newProp.text === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var li = this_1.getElementByText(newProp.text);\n                        if (!this_1.checkValidLi(li)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n                            }\n                            else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                                var listLength_1 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_1);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldText(oldProp.text);\n                                    }\n                                });\n                            }\n                            else if (this_1.getModuleName() === 'autocomplete') {\n                                this_1.setInputValue(newProp, oldProp);\n                            }\n                            else {\n                                this_1.setOldText(oldProp.text);\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'value':\n                    if (newProp.value === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    this_1.notify('beforeValueChange', { newProp: newProp }); // gird component value type change\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var item = this_1.getElementByValue(newProp.value);\n                        if (!this_1.checkValidLi(item)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n                            }\n                            else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                                var listLength_2 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_2);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldValue(oldProp.value);\n                                    }\n                                });\n                            }\n                            else if (this_1.getModuleName() === 'autocomplete') {\n                                this_1.setInputValue(newProp, oldProp);\n                            }\n                            else {\n                                this_1.setOldValue(oldProp.value);\n                            }\n                        }\n                        this_1.updateInputFields();\n                        this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n                    }\n                    break;\n                case 'index':\n                    if (newProp.index === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender && this_1.liCollections) {\n                        var element = this_1.liCollections[newProp.index];\n                        if (!this_1.checkValidLi(element)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n                            }\n                            else {\n                                this_1.index = oldProp.index;\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'footerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setFooterTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'headerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setHeaderTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'valueTemplate':\n                    if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate !== null) {\n                        this_1.setValueTemplate();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this_1.allowFiltering) {\n                        this_1.actionCompleteData = {\n                            ulElement: this_1.ulElement,\n                            list: this_1.listData, isUpdated: true\n                        };\n                        this_1.actionData = this_1.actionCompleteData;\n                        this_1.updateSelectElementData(this_1.allowFiltering);\n                    }\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this_1.inputWrapper);\n                    Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n                    if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0] && this_1.floatLabelType !== 'Never') {\n                        this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n                    }\n                    break;\n                case 'showClearButton':\n                    Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n                    this_1.bindClearEvent();\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n                        _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n                    }\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    DropDownList.prototype.checkValidLi = function (element) {\n        if (this.isValidLI(element)) {\n            this.setSelection(element, null);\n            return true;\n        }\n        return false;\n    };\n    DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n        var _this = this;\n        var li;\n        this.updateListValues = function () {\n            if (prop === 'text') {\n                li = _this.getElementByText(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldText(oldProp);\n                }\n            }\n            else if (prop === 'value') {\n                li = _this.getElementByValue(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldValue(oldProp);\n                }\n            }\n            else if (prop === 'index') {\n                li = _this.liCollections[newProp];\n                if (!_this.checkValidLi(li)) {\n                    _this.index = oldProp;\n                }\n            }\n        };\n    };\n    DropDownList.prototype.setReadOnly = function () {\n        if (this.readonly) {\n            addClass([this.inputWrapper.container], ['e-readonly']);\n        }\n        else {\n            removeClass([this.inputWrapper.container], ['e-readonly']);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DropDownList.prototype.setInputValue = function (newProp, oldProp) {\n    };\n    DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n        if (this.popupObj) {\n            Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownList.prototype.getModuleName = function () {\n        return 'dropdownlist';\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showPopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isFiltering() && this.dataSource instanceof DataManager && (this.actionData.list !== this.actionCompleteData.list) &&\n            this.actionData.list && this.actionData.ulElement) {\n            this.actionCompleteData = this.actionData;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n            this.isActive = true;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) ||\n            this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n            this.renderList(e);\n        }\n        this.invokeRenderPopup(e);\n    };\n    DropDownList.prototype.invokeRenderPopup = function (e) {\n        if (Browser.isDevice && this.isFilterLayout()) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_2 = this;\n            window.onpopstate = function () {\n                proxy_2.hidePopup();\n            };\n            history.pushState({}, '');\n        }\n        if (!isNullOrUndefined(this.list) && (!isNullOrUndefined(this.list.children[0]) ||\n            this.list.classList.contains(dropDownBaseClasses.noData))) {\n            this.renderPopup(e);\n        }\n    };\n    DropDownList.prototype.renderHightSearch = function () {\n        // update high light search\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hidePopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n            if (!isNullOrUndefined(this.inputElement)) {\n                Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n            }\n            this.isEscapeKey = false;\n            if (!isNullOrUndefined(this.index)) {\n                var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n                this.selectedLI = this.liCollections[this.index] || element;\n                if (this.selectedLI) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                    if (this.valueTemplate && this.itemData !== null) {\n                        this.setValueTemplate();\n                    }\n                }\n            }\n            else {\n                this.resetSelection();\n            }\n        }\n        this.closePopup(0, e);\n        var dataItem = this.getItemData();\n        var isSelectVal = !isNullOrUndefined(this.selectedLI);\n        if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom ||\n            isSelectVal && this.inputElement.value !== dataItem.text)) {\n            this.isSelectCustom = false;\n            this.clearAll(e);\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Sets the focus on the component for interaction.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusIn = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n            return;\n        }\n        var isFocused = false;\n        if (this.preventFocus && Browser.isDevice) {\n            this.inputWrapper.container.tabIndex = 1;\n            this.inputWrapper.container.focus();\n            this.preventFocus = false;\n            isFocused = true;\n        }\n        if (!isFocused) {\n            this.targetElement().focus();\n        }\n        addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        this.onFocus(e);\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    };\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusOut = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (!this.enabled) {\n            return;\n        }\n        this.isTyped = true;\n        this.hidePopup(e);\n        if (this.targetElement()) {\n            this.targetElement().blur();\n        }\n        removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownList.prototype.destroy = function () {\n        this.isActive = false;\n        resetIncrementalSearchValues(this.element.id);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        if (this.inputElement) {\n            var attrArray = ['readonly', 'aria-disabled', 'placeholder', 'aria-labelledby',\n                'aria-expanded', 'autocomplete', 'aria-readonly', 'autocapitalize',\n                'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n            for (var i = 0; i < attrArray.length; i++) {\n                this.inputElement.removeAttribute(attrArray[i]);\n            }\n            this.inputElement.setAttribute('tabindex', this.tabIndex);\n            this.inputElement.classList.remove('e-input');\n            Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        this.element.style.display = 'block';\n        if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n            detach(this.inputWrapper.container);\n        }\n        else {\n            this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n            detach(this.inputWrapper.container);\n        }\n        this.hiddenElement = null;\n        this.inputWrapper = null;\n        this.keyboardModule = null;\n        this.ulElement = null;\n        this.list = null;\n        this.popupObj = null;\n        this.rippleFun = null;\n        this.selectedLI = null;\n        this.liCollections = null;\n        this.item = null;\n        this.inputWrapper = null;\n        this.footer = null;\n        this.header = null;\n        this.previousSelectedLI = null;\n        this.valueTempElement = null;\n        this.actionData.ulElement = null;\n        _super.prototype.destroy.call(this);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownList.prototype.getItems = function () {\n        if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n            }\n            this.renderList();\n        }\n        return this.ulElement ? _super.prototype.getItems.call(this) : [];\n    };\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownList.prototype.getDataByValue = function (value) {\n        return _super.prototype.getDataByValue.call(this, value);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.clear = function () {\n        this.value = null;\n    };\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"cssClass\", void 0);\n    __decorate$1([\n        Property('100%')\n    ], DropDownList.prototype, \"width\", void 0);\n    __decorate$1([\n        Property(true)\n    ], DropDownList.prototype, \"enabled\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"enablePersistence\", void 0);\n    __decorate$1([\n        Property('300px')\n    ], DropDownList.prototype, \"popupHeight\", void 0);\n    __decorate$1([\n        Property('100%')\n    ], DropDownList.prototype, \"popupWidth\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"placeholder\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$1([\n        Property({})\n    ], DropDownList.prototype, \"htmlAttributes\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"query\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"valueTemplate\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"headerTemplate\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"footerTemplate\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"allowFiltering\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"readonly\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"text\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"value\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"index\", void 0);\n    __decorate$1([\n        Property('Never')\n    ], DropDownList.prototype, \"floatLabelType\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"showClearButton\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"filtering\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"change\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"beforeOpen\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"open\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"close\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"blur\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"focus\", void 0);\n    DropDownList = __decorate$1([\n        NotifyPropertyChanges\n    ], DropDownList);\n    return DropDownList;\n}(DropDownBase));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RTL = 'e-rtl';\nvar DROPDOWNTREE = 'e-ddt';\nvar HIDDENELEMENT = 'e-ddt-hidden';\nvar DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nvar SHOW_CHIP = 'e-show-chip';\nvar SHOW_CLEAR = 'e-show-clear';\nvar SHOW_DD_ICON = 'e-show-dd-icon';\nvar CHIP_INPUT = 'e-chip-input';\nvar INPUTFOCUS = 'e-input-focus';\nvar INPUTGROUP = 'e-input-group';\nvar ICONANIMATION = 'e-icon-anim';\nvar CLOSEICON_CLASS = 'e-clear-icon e-icons';\nvar CHIP_WRAPPER = 'e-chips-wrapper';\nvar CHIP_COLLECTION = 'e-chips-collection';\nvar CHIP = 'e-chips';\nvar CHIP_CONTENT = 'e-chipcontent';\nvar CHIP_CLOSE = 'e-chips-close';\nvar HIDEICON = 'e-icon-hide';\nvar DDTHIDEICON = 'e-ddt-icon-hide';\nvar POPUP_CLASS = 'e-ddt e-popup';\nvar PARENTITEM = 'e-list-parent';\nvar CONTENT = 'e-popup-content';\nvar DROPDOWN = 'e-dropdown';\nvar DISABLED = 'e-disabled';\nvar ICONS = 'e-icons';\nvar CHECKALLPARENT = 'e-selectall-parent';\nvar CHECKALLHIDE = 'e-hide-selectall';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar ALLTEXT = 'e-all-text';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar FILTERWRAP = 'e-filter-wrap';\nvar DDTICON = 'e-ddt-icon';\nvar FOOTER = 'e-ddt-footer';\nvar HEADER = 'e-ddt-header';\nvar NODATACONTAINER = 'e-ddt-nodata';\nvar NODATA = 'e-no-data';\nvar HEADERTEMPLATE = 'HeaderTemplate';\nvar FOOTERTEMPLATE = 'FooterTemplate';\nvar NORECORDSTEMPLATE = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nvar CUSTOMTEMPLATE = 'CustomTemplate';\nvar REMAIN_WRAPPER = 'e-remain';\nvar OVERFLOW_VIEW = 'e-overflow';\nvar SHOW_TEXT = 'e-show-text';\nvar TOTAL_COUNT_WRAPPER = 'e-total-count';\nvar REMAIN_COUNT = 'e-wrap-count';\nvar Fields = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(Fields, _super);\n    function Fields() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$2([\n        Property('child')\n    ], Fields.prototype, \"child\", void 0);\n    __decorate$2([\n        Property([])\n    ], Fields.prototype, \"dataSource\", void 0);\n    __decorate$2([\n        Property('expanded')\n    ], Fields.prototype, \"expanded\", void 0);\n    __decorate$2([\n        Property('hasChildren')\n    ], Fields.prototype, \"hasChildren\", void 0);\n    __decorate$2([\n        Property('htmlAttributes')\n    ], Fields.prototype, \"htmlAttributes\", void 0);\n    __decorate$2([\n        Property('iconCss')\n    ], Fields.prototype, \"iconCss\", void 0);\n    __decorate$2([\n        Property('imageUrl')\n    ], Fields.prototype, \"imageUrl\", void 0);\n    __decorate$2([\n        Property('parentValue')\n    ], Fields.prototype, \"parentValue\", void 0);\n    __decorate$2([\n        Property(null)\n    ], Fields.prototype, \"query\", void 0);\n    __decorate$2([\n        Property('selectable')\n    ], Fields.prototype, \"selectable\", void 0);\n    __decorate$2([\n        Property('selected')\n    ], Fields.prototype, \"selected\", void 0);\n    __decorate$2([\n        Property(null)\n    ], Fields.prototype, \"tableName\", void 0);\n    __decorate$2([\n        Property('text')\n    ], Fields.prototype, \"text\", void 0);\n    __decorate$2([\n        Property('tooltip')\n    ], Fields.prototype, \"tooltip\", void 0);\n    __decorate$2([\n        Property('value')\n    ], Fields.prototype, \"value\", void 0);\n    return Fields;\n}(ChildProperty));\nvar TreeSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(TreeSettings, _super);\n    function TreeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$2([\n        Property(false)\n    ], TreeSettings.prototype, \"autoCheck\", void 0);\n    __decorate$2([\n        Property('Auto')\n    ], TreeSettings.prototype, \"expandOn\", void 0);\n    __decorate$2([\n        Property(false)\n    ], TreeSettings.prototype, \"loadOnDemand\", void 0);\n    return TreeSettings;\n}(ChildProperty));\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\nvar DropDownTree = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(DropDownTree, _super);\n    function DropDownTree(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.filterTimer = null;\n        _this.isFilteredData = false;\n        _this.isFilterRestore = false;\n        // eslint-disable-next-line\n        _this.selectedData = [];\n        _this.filterDelayTime = 300;\n        _this.isClicked = false;\n        // Specifies if the checkAll method has been called\n        _this.isCheckAllCalled = false;\n        _this.isFromFilterChange = false;\n        return _this;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string}\n     * @hidden\n     */\n    DropDownTree.prototype.getPersistData = function () {\n        var keyEntity = ['value'];\n        return this.addOnPersist(keyEntity);\n    };\n    DropDownTree.prototype.getLocaleName = function () {\n        return 'drop-down-tree';\n    };\n    /**\n     * Initialize the event handler.\n     *\n     * @returns {void}\n     * @private\n     */\n    DropDownTree.prototype.preRender = function () {\n        this.inputFocus = false;\n        this.isPopupOpen = false;\n        this.isFirstRender = true;\n        this.isInitialized = false;\n        this.currentText = null;\n        this.currentValue = null;\n        this.oldValue = null;\n        this.removeValue = false;\n        this.selectedText = [];\n        this.treeItems = [];\n        this.dataValue = null;\n        this.isNodeSelected = false;\n        this.isDynamicChange = false;\n        this.clearIconWidth = 0;\n        this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE;\n        this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE;\n        this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE;\n        this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE;\n        this.customTemplateId = \"\" + this.element.id + CUSTOMTEMPLATE;\n        this.keyConfigs = {\n            escape: 'escape',\n            altUp: 'alt+uparrow',\n            altDown: 'alt+downarrow',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            end: 'end',\n            enter: 'enter',\n            home: 'home',\n            moveDown: 'downarrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlUp: 'ctrl+uparrow',\n            ctrlEnter: 'ctrl+enter',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftEnter: 'shift+enter',\n            shiftHome: 'shift+home',\n            shiftEnd: 'shift+end',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            csEnter: 'ctrl+shift+enter',\n            csHome: 'ctrl+shift+home',\n            csEnd: 'ctrl+shift+end',\n            space: 'space',\n            ctrlA: 'ctrl+A'\n        };\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownTree.prototype.render = function () {\n        var isTree = select('#' + this.element.id + '_tree', document);\n        if (isTree) {\n            var popupDiv = select('#' + this.element.id + '_popup', document);\n            detach(popupDiv ? popupDiv : isTree.parentElement);\n        }\n        this.ensureAutoCheck();\n        if (this.element.tagName === 'INPUT') {\n            this.inputEle = this.element;\n            if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n                this.inputEle.setAttribute('role', 'textbox');\n            }\n            if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n                this.inputEle.setAttribute('type', 'text');\n            }\n        }\n        else {\n            this.inputEle = this.createElement('input', { attrs: { role: 'textbox', type: 'text' } });\n            this.element.parentElement.insertBefore(this.inputEle, this.element);\n        }\n        this.inputObj = Input.createInput({\n            element: this.inputEle,\n            floatLabelType: this.floatLabelType,\n            buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n            properties: {\n                readonly: true,\n                placeholder: this.placeholder,\n                enabled: this.enabled,\n                cssClass: this.cssClass,\n                enableRtl: this.enableRtl\n            }\n        }, this.createElement);\n        this.inputWrapper = this.inputObj.container;\n        if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n            this.inputWrapper.classList.add(INPUTGROUP);\n        }\n        if (this.showDropDownIcon) {\n            this.inputWrapper.classList.add(SHOW_DD_ICON);\n        }\n        if (this.element.tagName === this.getDirective()) {\n            this.element.appendChild(this.inputWrapper);\n        }\n        this.createHiddenElement();\n        this.createClearIcon();\n        this.inputWrapper.classList.add(DROPDOWNTREE);\n        this.setElementWidth(this.width);\n        this.updateDataAttribute();\n        this.setHTMLAttributes();\n        this.setAttributes();\n        this.popupDiv = this.createElement('div', { className: CONTENT });\n        this.popupDiv.classList.add(DROPDOWN);\n        this.tree = this.createElement('div', { id: this.element.id + '_tree' });\n        this.popupDiv.appendChild(this.tree);\n        document.body.appendChild(this.popupDiv);\n        this.wireTreeEvents();\n        addClass([this.popupDiv], DDTHIDEICON);\n        this.renderTree();\n        this.isRemoteData = this.fields.dataSource instanceof DataManager;\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter') {\n                this.createChip();\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n                if (this.mode !== 'Box') {\n                    addClass([this.overFlowWrapper], SHOW_TEXT);\n                }\n            }\n        }\n        if (!this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n        }\n        this.wireEvents();\n        var firstUl = select('.' + PARENTITEM, this.treeObj.element);\n        if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n            firstUl.removeAttribute('aria-multiselectable');\n        }\n        this.oldValue = this.value;\n        this.isInitialized = true;\n        this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate\n            || this.noRecordsTemplate || this.customTemplate;\n        this.renderComplete();\n    };\n    DropDownTree.prototype.ensureAutoCheck = function () {\n        if (this.allowFiltering && this.treeSettings.autoCheck) {\n            this.setProperties({ treeSettings: { autoCheck: false } }, true);\n        }\n    };\n    DropDownTree.prototype.hideCheckAll = function (flag) {\n        var checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n        if (!isNullOrUndefined(checkAllEle)) {\n            if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n                addClass([checkAllEle], CHECKALLHIDE);\n            }\n            else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n                removeClass([checkAllEle], CHECKALLHIDE);\n            }\n        }\n    };\n    DropDownTree.prototype.renderFilter = function () {\n        this.filterContainer = this.createElement('div', {\n            id: this.element.id + '_filter_wrap',\n            className: FILTERWRAP\n        });\n        var filterInput = this.createElement('input', {\n            id: this.element.id + '_filter',\n            attrs: { autocomplete: 'off', 'aria-label': this.filterBarPlaceholder }\n        });\n        this.filterContainer.appendChild(filterInput);\n        prepend([this.filterContainer], this.popupEle);\n        this.filterObj = new TextBox({\n            value: '',\n            showClearButton: true,\n            placeholder: this.filterBarPlaceholder,\n            input: this.filterChangeHandler.bind(this)\n        });\n        this.filterObj.appendTo('#' + this.element.id + '_filter');\n    };\n    DropDownTree.prototype.filterChangeHandler = function (args) {\n        var _this = this;\n        if (!isNullOrUndefined(args.value)) {\n            window.clearTimeout(this.filterTimer);\n            this.filterTimer = window.setTimeout(function () { _this.filterHandler(args.value, args.event); }, this.filterDelayTime);\n        }\n    };\n    DropDownTree.prototype.filterHandler = function (value, event) {\n        var _this = this;\n        this.isFromFilterChange = true;\n        if (!this.isFilteredData) {\n            this.treeData = this.treeObj.getTreeData();\n        }\n        var filterFields = this.cloneFields(this.fields);\n        var args = {\n            cancel: false,\n            preventDefaultAction: false,\n            event: event,\n            text: value,\n            fields: filterFields\n        };\n        this.trigger('filtering', args, function (args) {\n            if (!args.cancel) {\n                var flag = false;\n                var fields = void 0;\n                _this.isFilteredData = true;\n                if (value === '') {\n                    _this.isFilteredData = false;\n                    _this.isFilterRestore = true;\n                    fields = _this.cloneFields(_this.fields);\n                }\n                else if (args.preventDefaultAction) {\n                    fields = args.fields;\n                }\n                else {\n                    if (_this.treeDataType === 1) {\n                        fields = _this.selfReferencefilter(value, args.fields);\n                    }\n                    else {\n                        if (_this.fields.dataSource instanceof DataManager) {\n                            flag = true;\n                        }\n                        else {\n                            fields = _this.nestedFilter(value, args.fields);\n                        }\n                    }\n                }\n                _this.hideCheckAll(_this.isFilteredData);\n                if (flag) {\n                    return;\n                }\n                _this.treeObj.fields = _this.getTreeFields(fields);\n                _this.treeObj.dataBind();\n            }\n        });\n    };\n    DropDownTree.prototype.nestedFilter = function (value, filteredFields) {\n        // eslint-disable-next-line\n        var matchedDataSource = [];\n        for (var i = 0; i < this.treeData.length; i++) {\n            // eslint-disable-next-line\n            var filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n            if (!isNullOrUndefined(filteredChild)) {\n                matchedDataSource.push(filteredChild);\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.nestedChildFilter = function (value, node) {\n        // eslint-disable-next-line\n        var children = node[this.fields.child];\n        if (isNullOrUndefined(children)) {\n            return (this.isMatchedNode(value, node)) ? node : null;\n        }\n        else {\n            // eslint-disable-next-line\n            var matchedChildren = [];\n            for (var i = 0; i < children.length; i++) {\n                // eslint-disable-next-line\n                var filteredChild = this.nestedChildFilter(value, children[i]);\n                if (!isNullOrUndefined(filteredChild)) {\n                    matchedChildren.push(filteredChild);\n                }\n            }\n            var filteredItems = Object.assign({}, node);\n            if (matchedChildren.length !== 0) {\n                filteredItems[this.fields.child] = matchedChildren;\n                return filteredItems;\n            }\n            else {\n                filteredItems[this.fields.child] = null;\n                return (this.isMatchedNode(value, filteredItems)) ? filteredItems : null;\n            }\n        }\n    };\n    DropDownTree.prototype.selfReferencefilter = function (value, filteredFields) {\n        // eslint-disable-next-line\n        var matchedData = [];\n        // eslint-disable-next-line\n        var matchedDataSource = [];\n        for (var i = 0; i < this.treeData.length; i++) {\n            if (this.isMatchedNode(value, this.treeData[i])) {\n                matchedData.push(this.treeData[i]);\n            }\n        }\n        for (var i = 0; i < matchedData.length; i++) {\n            if (matchedDataSource.indexOf(matchedData[i]) === -1) {\n                matchedDataSource.push(matchedData[i]);\n                // eslint-disable-next-line\n                var parentId = matchedData[i][this.fields.parentValue];\n                while (!isNullOrUndefined(parentId)) {\n                    // eslint-disable-next-line\n                    var parent_1 = null;\n                    for (var j = 0; j < this.treeData.length; j++) {\n                        // eslint-disable-next-line\n                        var value_1 = this.treeData[j][this.fields.value];\n                        if (!isNullOrUndefined(value_1) && (value_1 === parentId)) {\n                            parent_1 = this.treeData[j];\n                            break;\n                        }\n                    }\n                    if (!isNullOrUndefined(parent_1) && (matchedDataSource.indexOf(parent_1) === -1)) {\n                        matchedDataSource.push(parent_1);\n                        parentId = parent_1[this.fields.parentValue];\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.isMatchedNode = function (value, node) {\n        var checkValue = node[this.fields.text];\n        if (this.ignoreCase) {\n            checkValue = checkValue.toLowerCase();\n            value = value.toLowerCase();\n        }\n        if (this.ignoreAccent) {\n            checkValue = DataUtil.ignoreDiacritics(checkValue);\n            value = DataUtil.ignoreDiacritics(value);\n        }\n        if (this.filterType === 'StartsWith') {\n            return checkValue.slice(0, value.length) === value;\n        }\n        else if (this.filterType === 'EndsWith') {\n            return checkValue.slice(-value.length) === value;\n        }\n        else {\n            return checkValue.indexOf(value) !== -1;\n        }\n    };\n    /* To wire events for the dropdown tree */\n    DropDownTree.prototype.wireEvents = function () {\n        EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n        EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n        EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n        EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    DropDownTree.prototype.wireTreeEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.tree, {\n            keyAction: this.treeAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    DropDownTree.prototype.wireCheckAllWrapperEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n            keyAction: this.checkAllAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    /* To unwire events for the dropdown tree */\n    DropDownTree.prototype.unWireEvents = function () {\n        EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n        EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n        EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n        EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n        EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n        EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        EventHandler.remove(window, 'resize', this.windowResize);\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n    };\n    /* Trigger when the dropdown is clicked */\n    DropDownTree.prototype.dropDownClick = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n            return;\n        }\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        else {\n            this.focusIn(e);\n            this.renderPopup();\n        }\n        this.showOverAllClear();\n    };\n    DropDownTree.prototype.mouseIn = function () {\n        if (this.enabled || !this.readonly) {\n            this.showOverAllClear();\n        }\n    };\n    DropDownTree.prototype.onMouseLeave = function () {\n        if (!this.inputFocus) {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n    };\n    DropDownTree.prototype.getDirective = function () {\n        return 'EJS-DROPDOWNTREE';\n    };\n    DropDownTree.prototype.focusOut = function (e) {\n        if (!this.enabled || this.readonly || !this.inputFocus) {\n            return;\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && (e.target === this.inputWrapper)) {\n            return;\n        }\n        var target = e.relatedTarget;\n        if ((target !== this.inputEle) && (isNullOrUndefined(target)) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n            this.onFocusOut(e);\n        }\n    };\n    DropDownTree.prototype.onFocusOut = function (event) {\n        this.inputFocus = false;\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n        }\n        if (this.showClearButton) {\n            this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        removeClass([this.inputWrapper], [INPUTFOCUS]);\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            var isValue = this.value ? (this.value.length ? true : false) : false;\n            if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n                if (this.chipWrapper && (this.mode === 'Default')) {\n                    addClass([this.chipWrapper], HIDEICON);\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n            }\n            if (!this.wrapText && isValue) {\n                this.updateView();\n            }\n        }\n        if (this.changeOnBlur) {\n            this.triggerChangeEvent(event);\n        }\n        this.removeValue = false;\n        this.oldValue = this.value;\n        this.trigger('blur');\n    };\n    DropDownTree.prototype.updateView = function () {\n        if ((!this.showCheckBox && !this.allowMultiSelection) || this.mode === 'Custom' || this.inputFocus) {\n            return;\n        }\n        if (this.mode !== 'Box') {\n            addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n        }\n        else {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        if (this.value && this.value.length !== 0) {\n            if (this.inputWrapper.contains(this.chipWrapper)) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n            addClass([this.inputEle], CHIP_INPUT);\n            this.updateOverFlowView();\n            this.ensurePlaceHolder();\n        }\n    };\n    DropDownTree.prototype.triggerChangeEvent = function (event) {\n        var isEqual = this.ddtCompareValues(this.oldValue, this.value);\n        if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n            var eventArgs = {\n                e: event,\n                oldValue: this.oldValue,\n                value: this.value,\n                isInteracted: event ? true : false,\n                element: this.element\n            };\n            this.trigger('change', eventArgs);\n            this.oldValue = this.value;\n        }\n    };\n    DropDownTree.prototype.ddtCompareValues = function (oldValue, newValue) {\n        if (oldValue === null || newValue === null) {\n            var isValid = oldValue === null ? ((newValue === oldValue) ? true : false) :\n                (oldValue.length === 0 ? (newValue === oldValue) : false);\n            return isValid;\n        }\n        else if (oldValue.length !== newValue.length) {\n            return false;\n        }\n        for (var i = 0; i < oldValue.length; i++) {\n            if (oldValue[i] !== newValue[i]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    DropDownTree.prototype.focusIn = function (e) {\n        if (!this.enabled || this.readonly || this.inputFocus) {\n            return;\n        }\n        this.showOverAllClear();\n        this.inputFocus = true;\n        addClass([this.inputWrapper], [INPUTFOCUS]);\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter' && this.inputFocus) {\n                if (this.chipWrapper && (this.value && this.value.length !== 0)) {\n                    removeClass([this.chipWrapper], HIDEICON);\n                    addClass([this.inputEle], CHIP_INPUT);\n                }\n                addClass([this.inputWrapper], SHOW_CHIP);\n                if (this.popupObj) {\n                    this.popupObj.refreshPosition();\n                }\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                if (this.inputWrapper.contains(this.overFlowWrapper)) {\n                    addClass([this.overFlowWrapper], HIDEICON);\n                }\n                if (this.mode === 'Delimiter') {\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n                else {\n                    addClass([this.inputWrapper], SHOW_CHIP);\n                }\n                removeClass([this.inputWrapper], SHOW_TEXT);\n                this.ensurePlaceHolder();\n            }\n        }\n        var args = { isInteracted: e ? true : false, event: e };\n        this.trigger('focus', args);\n    };\n    DropDownTree.prototype.treeAction = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        _this.inputWrapper.focus();\n                        e.preventDefault();\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'tab':\n                    case 'shiftTab':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'enter':\n                    case 'ctrlEnter':\n                    case 'shiftEnter':\n                    case 'csEnter':\n                        if (!_this.showCheckBox) {\n                            _this.isValueChange = true;\n                            _this.keyEventArgs = e;\n                        }\n                        break;\n                    case 'space':\n                        _this.isValueChange = true;\n                        _this.keyEventArgs = e;\n                        break;\n                    case 'ctrlA':\n                        if (_this.allowMultiSelection) {\n                            _this.selectAll(true);\n                        }\n                        break;\n                    case 'moveRight':\n                    case 'moveLeft':\n                    case 'shiftDown':\n                    case 'moveDown':\n                    case 'ctrlDown':\n                    case 'csDown':\n                    case 'shiftUp':\n                    case 'moveUp':\n                    case 'ctrlUp':\n                    case 'csUp':\n                    case 'home':\n                    case 'shiftHome':\n                    case 'ctrlHome':\n                    case 'csHome':\n                    case 'end':\n                    case 'shiftEnd':\n                    case 'ctrlEnd':\n                    case 'csEnd':\n                }\n            }\n            else {\n                e.stopImmediatePropagation();\n            }\n        });\n    };\n    DropDownTree.prototype.keyActionHandler = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'shiftTab':\n                    case 'tab':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        if (_this.inputFocus) {\n                            _this.onFocusOut();\n                        }\n                        break;\n                    case 'altDown':\n                        if (!_this.isPopupOpen) {\n                            _this.showPopup();\n                            e.preventDefault();\n                        }\n                        break;\n                    case 'moveDown':\n                        if (_this.showSelectAll && _this.showCheckBox) {\n                            _this.checkAllParent.focus();\n                        }\n                        break;\n                }\n            }\n        });\n    };\n    DropDownTree.prototype.checkAllAction = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'space':\n                        _this.clickHandler(e);\n                        break;\n                    case 'moveDown':\n                        var focusedElement = _this.treeObj.element.querySelector('li');\n                        focusedElement.focus();\n                        addClass([focusedElement], ['e-node-focus']);\n                }\n            }\n        });\n    };\n    DropDownTree.prototype.windowResize = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ width: this.setWidth() });\n            this.popupObj.refreshPosition();\n        }\n    };\n    DropDownTree.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement && e.target === formElement) {\n            this.isDynamicChange = true;\n            this.setProperties({ value: null }, true);\n            this.resetValue(true);\n            this.isDynamicChange = false;\n        }\n    };\n    DropDownTree.prototype.getAriaAttributes = function () {\n        var disable = this.enabled ? 'false' : 'true';\n        return {\n            'aria-disabled': disable,\n            'aria-owns': this.element.id + '_options',\n            'role': 'listbox',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false',\n            'aria-activedescendant': 'null',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    };\n    DropDownTree.prototype.updateOverFlowView = function () {\n        this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n        removeClass([this.overFlowWrapper], HIDEICON);\n        if (this.value && this.value.length) {\n            var data = '';\n            var overAllContainer = void 0;\n            var temp = void 0;\n            var tempData = void 0;\n            var tempIndex = 1;\n            var wrapperleng = void 0;\n            var remaining = void 0;\n            var downIconWidth = 0;\n            this.overFlowWrapper.innerHTML = '';\n            // eslint-disable-next-line\n            var l10nLocale = { overflowCountTemplate: '+${count} more..', totalCountTemplate: '${count} selected' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            var remainContent = this.l10n.getConstant('overflowCountTemplate');\n            var totalContent = this.l10n.getConstant('totalCountTemplate');\n            var remainElement = this.createElement('span', { className: REMAIN_WRAPPER });\n            this.overFlowWrapper.appendChild(remainElement);\n            remainElement.innerText = remainContent.replace('${count}', this.value.length.toString());\n            var remainSize = remainElement.offsetWidth;\n            remove(remainElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n            }\n            if (!isNullOrUndefined(this.value)) {\n                if (this.mode !== 'Box') {\n                    for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                        data += (index === 0) ? '' : this.delimiterChar + ' ';\n                        temp = this.getOverflowVal(index);\n                        data += temp;\n                        temp = this.overFlowWrapper.innerHTML;\n                        if (this.enableHtmlSanitizer) {\n                            this.overFlowWrapper.innerText = data;\n                        }\n                        else {\n                            this.overFlowWrapper.innerHTML = data;\n                        }\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                index = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - index;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                var textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                                textArr.pop();\n                                this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = index;\n                        }\n                        else if (index === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n                else {\n                    addClass([this.chipWrapper], HIDEICON);\n                    var ele = this.chipWrapper.cloneNode(true);\n                    var chips = selectAll('.' + CHIP, ele);\n                    for (var i = 0; i < chips.length; i++) {\n                        temp = this.overFlowWrapper.innerHTML;\n                        this.overFlowWrapper.appendChild(chips[i]);\n                        data = this.overFlowWrapper.innerHTML;\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                i = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - i;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = i;\n                        }\n                        else if (i === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n            }\n            if (remaining > 0) {\n                this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, remainContent, totalContent));\n            }\n            if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([remainElement], REMAIN_COUNT);\n            }\n        }\n        else {\n            this.overFlowWrapper.innerHTML = '';\n            addClass([this.overFlowWrapper], HIDEICON);\n        }\n        this.updateDelimMode();\n    };\n    DropDownTree.prototype.updateRemainTemplate = function (remainElement, remaining, remainContent, totalContent) {\n        if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 &&\n            this.overFlowWrapper.firstChild.nodeValue === '') {\n            this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n        }\n        remainElement.innerHTML = '';\n        remainElement.innerText = (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) ?\n            remainContent.replace('${count}', remaining.toString()) : totalContent.replace('${count}', remaining.toString());\n        if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n            removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n        }\n        else {\n            addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n            removeClass([this.overFlowWrapper], REMAIN_COUNT);\n        }\n        return remainElement;\n    };\n    DropDownTree.prototype.getOverflowVal = function (index) {\n        // eslint-disable-next-line\n        var selectedData = this.getSelectedData(this.value[index]);\n        return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n    };\n    DropDownTree.prototype.updateDelimMode = function () {\n        if (this.mode !== 'Box') {\n            if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([this.overFlowWrapper], REMAIN_COUNT);\n                addClass([this.overFlowWrapper], SHOW_TEXT);\n            }\n            else {\n                this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n                removeClass([this.overFlowWrapper], REMAIN_COUNT);\n            }\n        }\n        else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n            this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n        }\n    };\n    DropDownTree.prototype.createHiddenElement = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'class': HIDDENELEMENT, 'tabindex': '-1', 'multiple': '' }\n            });\n        }\n        else {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': HIDDENELEMENT }\n            });\n        }\n        prepend([this.hiddenElement], this.inputWrapper);\n        this.validationAttribute();\n    };\n    DropDownTree.prototype.createClearIcon = function () {\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS\n        });\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n        if (this.showClearButton) {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    };\n    DropDownTree.prototype.validationAttribute = function () {\n        var name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n        this.hiddenElement.setAttribute('name', name);\n        this.inputEle.removeAttribute('name');\n        var attributes$$1 = ['required', 'aria-required', 'form'];\n        for (var i = 0; i < attributes$$1.length; i++) {\n            var attr = this.inputEle.getAttribute(attributes$$1[i]);\n            if (attr) {\n                this.hiddenElement.setAttribute(attributes$$1[i], attr);\n                this.inputEle.removeAttribute(attributes$$1[i]);\n            }\n        }\n    };\n    DropDownTree.prototype.createChip = function () {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.chipWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER\n            });\n            this.chipCollection = this.createElement('span', {\n                className: CHIP_COLLECTION\n            });\n            this.chipWrapper.appendChild(this.chipCollection);\n            this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n            addClass([this.inputWrapper], SHOW_CHIP);\n            var isValid = this.getValidMode();\n            if (isValid && this.value !== null && (this.value && this.value.length !== 0)) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else if (this.value === null || (this.value && this.value.length === 0) || this.checkWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    };\n    DropDownTree.prototype.getValidMode = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return this.mode === 'Box' ? true : (this.mode === 'Default' && this.inputFocus) ? true : false;\n        }\n        else {\n            return false;\n        }\n    };\n    DropDownTree.prototype.createSelectAllWrapper = function () {\n        this.checkAllParent = this.createElement('div', {\n            className: CHECKALLPARENT, attrs: { 'tabindex': '0' }\n        });\n        this.selectAllSpan = this.createElement('span', {\n            className: ALLTEXT\n        });\n        this.selectAllSpan.textContent = '';\n        var ele = closest(this.element, '.' + BIGGER);\n        var touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n        this.checkBoxElement = createCheckBox(this.createElement, true, { cssClass: touchClass });\n        this.checkBoxElement.setAttribute('role', 'checkbox');\n        this.checkAllParent.appendChild(this.checkBoxElement);\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n        this.wireCheckAllWrapperEvents();\n    };\n    DropDownTree.prototype.clickHandler = function (e) {\n        var target;\n        if ((e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT))) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.target;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            this.isClicked = true;\n            var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n            this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n            this.isClicked = false;\n        }\n        e.preventDefault();\n    };\n    DropDownTree.prototype.changeState = function (wrapper, state, e) {\n        var ariaState;\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n            frameSpan.classList.add(CHECK);\n            ariaState = 'true';\n            if (!this.isReverseUpdate) {\n                this.isCheckAllCalled = true;\n                this.treeObj.checkAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(true);\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK))) {\n            frameSpan.classList.remove(CHECK);\n            ariaState = 'false';\n            if (!this.isReverseUpdate) {\n                this.treeObj.uncheckAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(false);\n        }\n        this.setMultiSelect();\n        this.ensurePlaceHolder();\n        ariaState = state === 'check' ? 'true' : 'false';\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n    };\n    DropDownTree.prototype.setLocale = function (unSelect) {\n        if (!this.selectAllSpan) {\n            return;\n        }\n        if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n            var template = unSelect ? this.unSelectAllText : this.selectAllText;\n            this.selectAllSpan.textContent = '';\n            // eslint-disable-next-line\n            var compiledString = compile(template);\n            var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (var _i = 0, _a = compiledString({}, this, templateName, null, !this.isStringTemplate); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n        }\n    };\n    DropDownTree.prototype.setAttributes = function () {\n        this.inputEle.setAttribute('tabindex', '-1');\n        var id = this.element.getAttribute('id');\n        this.hiddenElement.id = id + '_hidden';\n        this.inputWrapper.setAttribute('tabindex', '0');\n        attributes(this.inputWrapper, this.getAriaAttributes());\n    };\n    DropDownTree.prototype.setHTMLAttributes = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                if (htmlAttr === 'class') {\n                    this.inputWrapper.classList.add(this.htmlAttributes[\"\" + htmlAttr]);\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n                    this.setProperties({ enabled: false }, true);\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n                    this.setProperties({ readonly: true }, true);\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n                }\n                else {\n                    var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder',\n                        'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    var validateAttr = ['name', 'required'];\n                    if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputEle);\n                        }\n                        else {\n                            this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.updateDataAttribute = function () {\n        var value = this.htmlAttributes;\n        var invalidAttr = ['class', 'style', 'id', 'type'];\n        var attr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    };\n    DropDownTree.prototype.showOverAllClear = function () {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.overAllClear) {\n            var isValue = this.value ? (this.value.length ? true : false) : false;\n            if (isValue && this.showClearButton) {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n            else {\n                addClass([this.overAllClear], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n    };\n    DropDownTree.prototype.setTreeValue = function () {\n        if (this.value !== null && this.value.length !== 0) {\n            // eslint-disable-next-line\n            var data = void 0;\n            if (this.showCheckBox || this.allowMultiSelection) {\n                for (var i = 0; i < this.value.length; i++) {\n                    data = this.treeObj.getTreeData(this.value[i])[0];\n                    if (isNullOrUndefined(data)) {\n                        this.value.splice(this.value.indexOf(this.value[i]), 1);\n                    }\n                }\n                if (this.value.length !== 0) {\n                    this.setValidValue();\n                }\n            }\n            else {\n                data = this.treeObj.getTreeData(this.value[0])[0];\n                if (!isNullOrUndefined(data)) {\n                    this.setProperties({ text: data[this.fields.text] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ value: this.currentValue }, true);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.setTreeText = function () {\n        if (this.value !== null && !this.isInitialized) {\n            return;\n        }\n        if (this.text !== null) {\n            // eslint-disable-next-line\n            var data = void 0;\n            var valArr = [];\n            if (this.showCheckBox || this.allowMultiSelection) {\n                var textArr = this.text.split(this.delimiterChar);\n                for (var i = 0; i < textArr.length; i++) {\n                    data = this.getItems(textArr[i]);\n                    if (!isNullOrUndefined(data)) {\n                        valArr.push(data[this.fields.value].toString());\n                    }\n                }\n                if (valArr.length !== 0) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: valArr }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n            else {\n                data = this.getItems(this.text);\n                if (!isNullOrUndefined(data)) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: [data[this.fields.value].toString()] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.setSelectedValue = function () {\n        if (this.value != null) {\n            return;\n        }\n        if (!this.isInitialized) {\n            this.oldValue = this.value;\n            if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n                this.setProperties({ value: this.treeObj.selectedNodes }, true);\n                if (this.allowMultiSelection) {\n                    this.updateMode();\n                }\n            }\n            else if (this.showCheckBox && this.treeObj.checkedNodes) {\n                if (this.treeObj.checkedNodes.length > 0) {\n                    this.setProperties({ value: this.treeObj.checkedNodes }, true);\n                    setValue('selectedNodes', [], this.treeObj);\n                    this.treeObj.dataBind();\n                    this.updateMode();\n                }\n            }\n            this.updateSelectedValues();\n            this.currentText = this.text;\n            this.currentValue = this.value;\n        }\n    };\n    DropDownTree.prototype.setValidValue = function () {\n        var _this = this;\n        if (!this.showCheckBox && !this.allowMultiSelection) {\n            Input.setValue(this.text, this.inputEle, this.floatLabelType);\n            var id = this.value[0].toString();\n            if (this.treeObj.selectedNodes[0] !== id) {\n                setValue('selectedNodes', [id], this.treeObj);\n            }\n        }\n        else {\n            if (this.showCheckBox) {\n                var difference = this.value.filter(function (e) {\n                    return _this.treeObj.checkedNodes.indexOf(e) === -1;\n                });\n                if (difference.length > 0 || this.treeSettings.autoCheck) {\n                    this.treeObj.checkedNodes = this.value.slice();\n                    this.treeObj.dataBind();\n                    this.setMultiSelect();\n                }\n            }\n            else {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.selectedText = [];\n                this.updateSelectedValues();\n            }\n            this.treeObj.dataBind();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n        if (this.isInitialized) {\n            this.triggerChangeEvent();\n        }\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getItems = function (givenText) {\n        // eslint-disable-next-line\n        var data;\n        if (this.treeDataType === 1) {\n            for (var i = 0; i < this.treeItems.length; i++) {\n                // eslint-disable-next-line\n                var text = getValue(this.fields.text, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n                    data = this.treeItems[i];\n                    break;\n                }\n            }\n        }\n        else {\n            data = this.getNestedItems(this.treeItems, this.fields, givenText);\n        }\n        return data;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getNestedItems = function (data, field, givenText) {\n        // eslint-disable-next-line\n        var newData;\n        for (var i = 0, objlen = data.length; i < objlen; i++) {\n            // eslint-disable-next-line\n            var dataId = getValue(this.fields.text, data[i]);\n            if (data[i] && dataId && dataId.toString() === givenText) {\n                return data[i];\n            }\n            else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n                // eslint-disable-next-line\n                var childData = getValue(field.child, data[i]);\n                // eslint-disable-next-line\n                newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n                var child = 'child';\n                // eslint-disable-next-line\n                newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newData;\n    };\n    DropDownTree.prototype.getChildType = function (mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    };\n    /* To render the treeview */\n    DropDownTree.prototype.renderTree = function () {\n        this.treeObj = new TreeView({\n            fields: this.getTreeFields(this.fields),\n            enableRtl: this.enableRtl,\n            nodeSelected: this.onNodeSelected.bind(this),\n            nodeChecked: this.onNodeChecked.bind(this),\n            nodeChecking: this.beforeCheck.bind(this),\n            nodeExpanded: this.onNodeExpanded.bind(this),\n            actionFailure: this.onActionFailure.bind(this),\n            nodeClicked: this.onNodeClicked.bind(this),\n            dataBound: this.OnDataBound.bind(this),\n            allowMultiSelection: this.allowMultiSelection,\n            enableHtmlSanitizer: this.enableHtmlSanitizer,\n            showCheckBox: this.showCheckBox,\n            autoCheck: this.treeSettings.autoCheck,\n            sortOrder: this.sortOrder,\n            expandOn: this.treeSettings.expandOn,\n            loadOnDemand: this.treeSettings.loadOnDemand,\n            nodeSelecting: this.onBeforeSelect.bind(this),\n            nodeTemplate: this.itemTemplate\n        });\n        this.treeObj.root = this.root ? this.root : this;\n        this.treeObj.appendTo('#' + this.tree.id);\n    };\n    /* To render the popup element */\n    DropDownTree.prototype.renderPopup = function () {\n        var _this = this;\n        if (this.isFilteredData) {\n            this.filterObj.value = '';\n            this.treeObj.fields = this.getTreeFields(this.fields);\n            this.isFilterRestore = true;\n            this.isFilteredData = false;\n            this.hideCheckAll(false);\n        }\n        var isCancelled = false;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                addClass([_this.inputWrapper], [ICONANIMATION]);\n                if (_this.isFirstRender) {\n                    _this.popupEle = _this.createElement('div', {\n                        id: _this.element.id + '_popup', className: POPUP_CLASS + ' ' + (_this.cssClass != null ? _this.cssClass : '')\n                    });\n                    document.body.appendChild(_this.popupEle);\n                    _this.createPopup(_this.popupEle);\n                }\n                else {\n                    _this.popupEle = _this.popupObj.element;\n                }\n            }\n            else {\n                isCancelled = true;\n            }\n            if (_this.isFirstRender && !isCancelled) {\n                prepend([_this.popupDiv], _this.popupEle);\n                removeClass([_this.popupDiv], DDTHIDEICON);\n                if (_this.allowFiltering) {\n                    _this.renderFilter();\n                }\n                if (_this.showCheckBox && _this.showSelectAll && (!_this.popupDiv.classList.contains(NODATA))) {\n                    _this.createSelectAllWrapper();\n                    _this.popupEle.insertBefore(_this.checkAllParent, _this.popupDiv);\n                }\n                if (_this.headerTemplate) {\n                    _this.setHeaderTemplate();\n                }\n                if (_this.footerTemplate) {\n                    _this.setFooterTemplate();\n                }\n                _this.isFirstRender = false;\n                /* eslint-disable */\n                if (_this.hasTemplate && _this.portals) {\n                    _this.portals = _this.portals.concat(_this.treeObj.portals);\n                    /* eslint-enable */\n                    _this.renderReactTemplates();\n                }\n            }\n            if (!isCancelled) {\n                attributes(_this.inputWrapper, { 'aria-expanded': 'true' });\n                _this.popupObj.show(null, (_this.zIndex === 1000) ? _this.inputEle : null);\n                removeClass([_this.popupEle], DDTHIDEICON);\n                _this.updatePopupHeight();\n                _this.popupObj.refreshPosition();\n                if (!(_this.showCheckBox && _this.showSelectAll) && (!_this.popupDiv.classList.contains(NODATA)\n                    && _this.treeItems.length > 0)) {\n                    var focusedElement = _this.treeObj.element.querySelector('li');\n                    focusedElement.focus();\n                    addClass([focusedElement], ['e-node-focus']);\n                }\n                if (_this.checkSelectAll && _this.checkBoxElement) {\n                    var wrap = closest(_this.checkBoxElement, '.' + CHECKBOXWRAP);\n                    _this.changeState(wrap, 'check');\n                    _this.checkSelectAll = false;\n                }\n                if (_this.allowFiltering) {\n                    removeClass([_this.inputWrapper], [INPUTFOCUS]);\n                    _this.filterObj.element.focus();\n                }\n                var eventArgs = { popup: _this.popupObj };\n                _this.trigger('open', eventArgs);\n            }\n        });\n    };\n    DropDownTree.prototype.updatePopupHeight = function () {\n        if (this.isFirstRender) {\n            return;\n        }\n        var popupHeight = this.getHeight();\n        this.popupEle.style.maxHeight = popupHeight;\n        if (this.allowFiltering) {\n            var height = Math.round(this.filterContainer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.headerTemplate) {\n            var height = Math.round(this.header.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.showCheckBox && this.showSelectAll && (!this.popupDiv.classList.contains(NODATA))) {\n            var height = Math.round(this.checkAllParent.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.footerTemplate) {\n            var height = Math.round(this.footer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        var border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n        border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n        this.popupDiv.style.maxHeight = popupHeight;\n    };\n    DropDownTree.prototype.createPopup = function (element) {\n        var _this = this;\n        if (this.isFirstRender) {\n            this.popupObj = new Popup(element, {\n                width: this.setWidth(),\n                targetType: 'relative',\n                collision: { X: 'flip', Y: 'flip' },\n                relateTo: this.inputWrapper,\n                zIndex: this.zIndex,\n                enableRtl: this.enableRtl,\n                position: { X: 'left', Y: 'bottom' },\n                close: function () {\n                    _this.isPopupOpen = false;\n                },\n                open: function () {\n                    EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                    _this.isPopupOpen = true;\n                },\n                targetExitViewport: function () {\n                    if (!Browser.isDevice) {\n                        _this.hidePopup();\n                    }\n                }\n            });\n        }\n    };\n    /* To calculate the width when change via set model */\n    DropDownTree.prototype.setElementWidth = function (inputWidth) {\n        var ddElement = this.inputWrapper;\n        if (!isNullOrUndefined(inputWidth)) {\n            if (typeof inputWidth === 'number') {\n                ddElement.style.width = formatUnit(inputWidth);\n            }\n            else if (typeof inputWidth === 'string') {\n                ddElement.style.width = (inputWidth.match(/px|%|em/)) ? (inputWidth) :\n                    (formatUnit(inputWidth));\n            }\n        }\n    };\n    /* To calculate the width of the popup */\n    DropDownTree.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupWidth === 'string') {\n            width = (this.popupWidth.match(/px|em/)) ? (this.popupWidth) : width;\n        }\n        return width;\n    };\n    /* To calculate the height of the popup */\n    DropDownTree.prototype.getHeight = function () {\n        var height = formatUnit(this.popupHeight);\n        if (height.indexOf('%') > -1) {\n            // Will set the height of the popup according to the view port height\n            height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupHeight === 'string') {\n            height = (this.popupHeight.match(/px|em/)) ? (this.popupHeight) : height;\n        }\n        return height;\n    };\n    DropDownTree.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var isTree = closest(target, '.' + PARENTITEM);\n        var isFilter = closest(target, '.' + FILTERWRAP);\n        var isHeader = closest(target, '.' + HEADER);\n        var isFooter = closest(target, '.' + FOOTER);\n        var isScroller = target.classList.contains(DROPDOWN) ? true :\n            (matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview'));\n        if ((this.isPopupOpen && (this.inputWrapper.contains(target) || isTree || isScroller || isHeader || isFooter)) ||\n            ((this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) ||\n                (this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT)\n                    || target.classList.contains(CHECKBOXFRAME)))))) {\n            this.isDocumentClick = false;\n            e.preventDefault();\n        }\n        else if (!isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.contains(target) && this.inputFocus && !isFilter) {\n            this.focusOut(e);\n        }\n    };\n    DropDownTree.prototype.onActionFailure = function (e) {\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        addClass([this.popupDiv], NODATA);\n    };\n    DropDownTree.prototype.OnDataBound = function (args) {\n        this.treeItems = args.data;\n        if (this.treeItems.length <= 0) {\n            this.l10nUpdate();\n            addClass([this.popupDiv], NODATA);\n            this.hideCheckAll(true);\n        }\n        else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n            removeClass([this.popupDiv], NODATA);\n            this.hideCheckAll(false);\n        }\n        this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n        if (this.isFirstRender && this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n            this.treeObj.element.focus();\n        }\n        var eventArgs = { data: args.data };\n        this.trigger('dataBound', eventArgs);\n        if (this.filterObj === null) {\n            this.isFilteredData = false;\n        }\n        if (this.isFilteredData) {\n            this.treeObj.expandAll();\n        }\n        if (this.isFilterRestore) {\n            this.restoreFilterSelection();\n            this.isFilterRestore = false;\n        }\n    };\n    DropDownTree.prototype.restoreFilterSelection = function () {\n        if (this.showCheckBox) {\n            this.treeObj.checkedNodes = this.value ? this.value : [];\n        }\n        else {\n            this.treeObj.selectedNodes = this.value ? this.value : [];\n        }\n    };\n    /* To set cssclass for the dropdowntree */\n    DropDownTree.prototype.setCssClass = function (newClass, oldClass) {\n        var elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(newClass) && newClass !== '') {\n            addClass(elements, newClass.split(' '));\n        }\n    };\n    DropDownTree.prototype.setEnableRTL = function (state) {\n        if (state) {\n            this.inputWrapper.classList.add(RTL);\n        }\n        else {\n            this.inputWrapper.classList.remove(RTL);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n        if (this.treeObj) {\n            this.treeObj.enableRtl = state;\n            this.treeObj.dataBind();\n        }\n    };\n    /* To set enable property */\n    DropDownTree.prototype.setEnable = function () {\n        Input.setEnabled(this.enabled, this.inputEle);\n        if (this.enabled) {\n            removeClass([this.inputWrapper], DISABLED);\n            this.inputEle.setAttribute('aria-disabled', 'false');\n            this.inputWrapper.setAttribute('aria-disabled', 'false');\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            addClass([this.inputWrapper], DISABLED);\n            if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n                removeClass([this.inputWrapper], [INPUTFOCUS]);\n            }\n            this.inputEle.setAttribute('aria-disabled', 'true');\n            this.inputWrapper.setAttribute('aria-disabled', 'true');\n        }\n    };\n    DropDownTree.prototype.cloneFields = function (fields) {\n        var clonedField = {\n            dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n            child: this.cloneChildField(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes, query: fields.query,\n            selected: fields.selected, selectable: fields.selectable, tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return clonedField;\n    };\n    DropDownTree.prototype.cloneChildField = function (fields) {\n        if (typeof fields === 'string') {\n            return fields;\n        }\n        else {\n            var clonedField = {\n                dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n                child: (fields.child ? this.cloneChildField(fields.child) : null), hasChildren: fields.hasChildren,\n                expanded: fields.expanded, iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes,\n                query: fields.query, selected: fields.selected, selectable: fields.selectable, tableName: fields.tableName, tooltip: fields.tooltip\n            };\n            return clonedField;\n        }\n    };\n    DropDownTree.prototype.getTreeFields = function (fields) {\n        var treeFields = {\n            dataSource: fields.dataSource, id: fields.value, text: fields.text, parentID: fields.parentValue,\n            child: this.getTreeChildren(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, isChecked: fields.selected,\n            htmlAttributes: fields.htmlAttributes, query: fields.query, selectable: fields.selectable, selected: fields.selected,\n            tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return treeFields;\n    };\n    DropDownTree.prototype.getTreeChildren = function (mapper) {\n        if (typeof mapper === 'string') {\n            return mapper;\n        }\n        else if (!isNullOrUndefined(mapper)) {\n            mapper = this.getActualProperties(mapper);\n            var childFields = mapper;\n            if (mapper.value) {\n                childFields.id = mapper.value;\n            }\n            if (mapper.parentValue) {\n                childFields.parentID = mapper.parentValue;\n            }\n            if (mapper.child) {\n                childFields.child = this.getTreeChildren(mapper.child);\n            }\n            if (mapper.selected && this.showCheckBox) {\n                childFields.isChecked = mapper.selected;\n            }\n            return childFields;\n        }\n        return null;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getTreeDataType = function (ds, field) {\n        if (this.fields.dataSource instanceof DataManager) {\n            for (var i = 0; i < ds.length; i++) {\n                if ((typeof field.child === 'string') && isNullOrUndefined(getValue(field.child, ds[i]))) {\n                    return 1;\n                }\n            }\n            return 2;\n        }\n        if (isNullOrUndefined(this.fields.dataSource))\n            this.fields.dataSource = [];\n        for (var i = 0, len = this.fields.dataSource.length; i < len; i++) {\n            if ((typeof field.child === 'string') && !isNullOrUndefined(getValue(field.child, this.fields.dataSource[i]))) {\n                return 2;\n            }\n            if (!isNullOrUndefined(getValue(field.parentValue, this.fields.dataSource[i])) || !isNullOrUndefined(getValue(field.hasChildren, this.fields.dataSource[i]))) {\n                return 1;\n            }\n        }\n        return 1;\n    };\n    /* Triggers when the tree fields is changed dynamically */\n    DropDownTree.prototype.setFields = function () {\n        this.resetValue();\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        this.treeObj.fields = this.getTreeFields(this.fields);\n        this.treeObj.dataBind();\n    };\n    DropDownTree.prototype.getEventArgs = function (args) {\n        // eslint-disable-next-line\n        var checkData = args.data;\n        // eslint-disable-next-line\n        var selectData = args.nodeData;\n        var state;\n        if (this.showCheckBox) {\n            if (args.action === 'check') {\n                state = 'select';\n            }\n            else if (args.action === 'uncheck') {\n                state = 'un-select';\n            }\n        }\n        var eventArgs = {\n            action: this.showCheckBox ? state : args.action,\n            isInteracted: this.isClicked ? true : args.isInteracted,\n            item: args.node,\n            itemData: this.showCheckBox ? checkData[0] : selectData\n        };\n        return eventArgs;\n    };\n    DropDownTree.prototype.onBeforeSelect = function (args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n            if (this.value === null) {\n                this.setProperties({ value: [] }, true);\n            }\n        }\n    };\n    DropDownTree.prototype.updateHiddenValue = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return;\n        }\n        if (this.value && this.value.length) {\n            this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    };\n    /* Triggers when the tree node is selected */\n    DropDownTree.prototype.onNodeSelected = function (args) {\n        if (this.showCheckBox) {\n            return;\n        }\n        var selectedText;\n        if (args.isInteracted) {\n            var id = getValue('id', args.nodeData).toString();\n            if (!this.allowMultiSelection) {\n                this.hiddenElement.innerHTML = '';\n                this.setProperties({ value: [id] }, true);\n                if (this.itemTemplate) {\n                    selectedText = getValue('text', this.treeObj.getNode(id));\n                }\n                else {\n                    selectedText = getValue('text', args.nodeData).toString();\n                }\n                Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n                this.setProperties({ text: selectedText }, true);\n                this.currentText = this.text;\n                this.currentValue = this.value;\n                attributes(this.inputWrapper, { 'aria-describedby': this.element.id });\n                attributes(this.inputWrapper, { 'aria-activedescendant': id.toString() });\n                this.updateHiddenValue();\n                this.showOverAllClear();\n                this.hidePopup();\n                this.isNodeSelected = true;\n            }\n            else if (this.allowMultiSelection) {\n                this.setMultiSelect();\n            }\n        }\n        var eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isValueChange && !this.changeOnBlur) {\n            this.triggerChangeEvent(this.keyEventArgs);\n            this.isValueChange = false;\n        }\n    };\n    DropDownTree.prototype.onNodeClicked = function (args) {\n        if (!this.changeOnBlur && this.isNodeSelected) {\n            this.triggerChangeEvent(args.event);\n            this.isNodeSelected = false;\n        }\n        var target = args.event.target;\n        if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n            this.isClicked = true;\n            // eslint-disable-next-line\n            var getNodeDetails = this.treeObj.getNode(args.node);\n            if (getNodeDetails.isChecked === 'true') {\n                this.treeObj.uncheckAll([args.node]);\n            }\n            else {\n                this.treeObj.checkAll([args.node]);\n            }\n            this.isClicked = false;\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n            this.triggerChangeEvent(args.event);\n        }\n    };\n    DropDownTree.prototype.onNodeChecked = function (args) {\n        var eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isFilteredData && args.action === 'uncheck') {\n            var id = getValue('id', args.data[0]).toString();\n            this.removeSelectedData(id, true);\n        }\n        if (!this.isChipDelete && args.isInteracted) {\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (this.showSelectAll && this.checkBoxElement) {\n            var nodes = this.treeObj.element.querySelectorAll('li');\n            var checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n            var wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n            if (wrap && args.action === 'uncheck' && (args.isInteracted || checkedNodes.length === 0)) {\n                this.isReverseUpdate = true;\n                this.changeState(wrap, 'uncheck');\n                this.isReverseUpdate = false;\n            }\n            else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length && (args.isInteracted || this.isCheckAllCalled)) {\n                this.isReverseUpdate = true;\n                this.isCheckAllCalled = false;\n                this.changeState(wrap, 'check');\n                this.isReverseUpdate = false;\n            }\n        }\n    };\n    DropDownTree.prototype.beforeCheck = function (args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n        }\n    };\n    DropDownTree.prototype.onNodeExpanded = function (args) {\n        if (this.hasTemplate && this.portals) {\n            this.portals = [].concat(this.treeObj.portals);\n            /* eslint-enable */\n            this.renderReactTemplates();\n        }\n    };\n    DropDownTree.prototype.updateClearButton = function (state) {\n        if (state) {\n            if (!this.inputWrapper.contains(this.overAllClear)) {\n                this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n            }\n            else {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n        else {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            var chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n            for (var i = 0; i < chipClose.length; i++) {\n                if (!state) {\n                    addClass([chipClose[i]], HIDEICON);\n                }\n                else {\n                    removeClass([chipClose[i]], HIDEICON);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.updateDropDownIconState = function (state) {\n        var spinIcon = select('.' + DDTICON, this.inputWrapper);\n        if (state) {\n            if (!spinIcon) {\n                Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n            }\n            else {\n                removeClass([spinIcon], HIDEICON);\n            }\n            addClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n        else {\n            addClass([spinIcon], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n    };\n    DropDownTree.prototype.updateMode = function () {\n        if (this.mode === 'Custom') {\n            return;\n        }\n        if (this.mode !== 'Delimiter') {\n            if (!this.inputWrapper.contains(this.chipWrapper)) {\n                this.createChip();\n            }\n            var isValid = this.getValidMode();\n            if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n                removeClass([this.chipWrapper], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CHIP);\n            }\n            else if (!isValid) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n            var isValue = this.value !== null ? (this.value.length !== 0 ? true : false) : false;\n            if (isValid && isValue) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else {\n                removeClass([this.inputEle], CHIP_INPUT);\n            }\n        }\n        else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n    };\n    DropDownTree.prototype.ensurePlaceHolder = function () {\n        if (isNullOrUndefined(this.value) || (this.value && this.value.length === 0)) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    };\n    DropDownTree.prototype.ensureClearIconPosition = function (floatLabelType) {\n        if (floatLabelType !== 'Never') {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    };\n    DropDownTree.prototype.setMultiSelectValue = function (newValues) {\n        if (!this.isFilteredData) {\n            this.setProperties({ value: this.isFromFilterChange && newValues && newValues.length == 0 ? this.value : newValues }, true);\n            this.isFromFilterChange = false;\n            if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.treeObj.dataBind();\n            }\n        }\n        else {\n            var selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n            for (var i = 0; i < newValues.length; i++) {\n                if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n                    selectedValues.push(newValues[i]);\n                }\n            }\n            this.setProperties({ value: selectedValues }, true);\n        }\n    };\n    DropDownTree.prototype.setMultiSelect = function () {\n        if (this.showCheckBox && !this.isDynamicChange) {\n            this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n        }\n        else {\n            var ddtValue = this.allowMultiSelection ? (this.showCheckBox ? this.treeObj.checkedNodes\n                : this.treeObj.selectedNodes) : (this.value ? (this.showCheckBox ? this.value : [this.value[0]]) : null);\n            this.setMultiSelectValue(ddtValue);\n            if (this.showCheckBox && this.value !== null) {\n                this.treeObj.checkedNodes = this.value;\n                this.treeObj.dataBind();\n            }\n        }\n        this.selectedText = [];\n        var checkSelection = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            detach(this.chipWrapper);\n        }\n        var isValid = this.getValidMode();\n        if (isValid && this.value !== null) {\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                removeClass([this.chipWrapper], HIDEICON);\n            }\n        }\n        var isValue = this.value ? (this.value.length ? true : false) : false;\n        if (this.chipWrapper && (this.mode === 'Box' && !isValue)) {\n            addClass([this.chipWrapper], HIDEICON);\n            removeClass([this.inputEle], CHIP_INPUT);\n        }\n        this.updateSelectedValues();\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getSelectedData = function (value) {\n        // eslint-disable-next-line\n        var data = null;\n        if (this.isFilteredData) {\n            for (var i = 0; i < this.selectedData.length; i++) {\n                if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                    data = this.selectedData[i];\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(data)) {\n            if (this.treeSettings.loadOnDemand) {\n                data = this.getNodeData(value);\n            }\n            else {\n                data = this.treeObj.getNode(value);\n            }\n            if (!isNullOrUndefined(data)) {\n                this.selectedData.push(data);\n            }\n        }\n        return data;\n    };\n    DropDownTree.prototype.getNodeData = function (id) {\n        var childItems;\n        if (isNullOrUndefined(id)) {\n            return childItems;\n        }\n        else if (this.treeDataType === 1) {\n            for (var i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n                var dataId = getValue(this.fields.value, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n                    return this.treeItems[i];\n                }\n            }\n        }\n        else {\n            return this.getChildNodeData(this.treeItems, this.fields, id);\n        }\n        return childItems;\n    };\n    DropDownTree.prototype.getChildNodeData = function (obj, mapper, id) {\n        var newChildItems;\n        if (isNullOrUndefined(obj)) {\n            return newChildItems;\n        }\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            var dataValue = getValue(mapper.value, obj[i]);\n            if (obj[i] && dataValue && dataValue.toString() === id) {\n                return obj[i];\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                var childNodeData = getValue(mapper.child, obj[i]);\n                newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                var child = 'child';\n                newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newChildItems;\n    };\n    DropDownTree.prototype.getChildMapperFields = function (mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    };\n    DropDownTree.prototype.removeSelectedData = function (value, muteOnChange) {\n        var selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n        selectedValues.splice(selectedValues.indexOf(value), 1);\n        this.setProperties({ value: selectedValues }, muteOnChange);\n        for (var i = 0; i < this.selectedData.length; i++) {\n            if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                this.selectedData.splice(i, 1);\n                break;\n            }\n        }\n    };\n    DropDownTree.prototype.updateSelectedValues = function () {\n        this.dataValue = '';\n        var temp;\n        var text;\n        var textValue = '';\n        // eslint-disable-next-line\n        var selectedData;\n        this.hiddenElement.innerHTML = '';\n        var hiddenInputValue = '';\n        if ((!this.isChipDelete || this.treeSettings.autoCheck) && (this.inputWrapper.contains(this.chipWrapper))) {\n            this.chipCollection.innerHTML = '';\n        }\n        if (!this.isFilteredData) {\n            this.selectedData = [];\n        }\n        if (!isNullOrUndefined(this.value)) {\n            for (var i = 0, len = this.value.length; i < len; i++) {\n                selectedData = this.getSelectedData(this.value[i]);\n                text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n                this.selectedText.push(text);\n                temp = this.selectedText[this.selectedText.length - 1];\n                if (this.selectedText.length > 1) {\n                    this.dataValue += (this.delimiterChar + ' ' + temp);\n                    textValue += (',' + temp);\n                }\n                else {\n                    this.dataValue += temp;\n                    textValue += temp;\n                }\n                if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) &&\n                    (this.allowMultiSelection || this.showCheckBox)) {\n                    this.setChipValues(temp, this.value[i]);\n                }\n                hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' +\n                    this.selectedText[this.selectedText.length - 1] + '</option>';\n            }\n            if (this.selectedText.length >= 1) {\n                this.setProperties({ text: textValue }, true);\n            }\n            this.hiddenElement.innerHTML = hiddenInputValue;\n            if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n                this.setTagValues();\n            }\n        }\n        var isValid = this.getValidMode();\n        if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n        Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n        if (textValue === '') {\n            this.setProperties({ text: null }, true);\n        }\n        else {\n            this.setProperties({ text: textValue }, true);\n        }\n        if (this.showClearButton && this.inputFocus) {\n            this.showOverAllClear();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n            this.popupObj.refreshPosition();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n    };\n    DropDownTree.prototype.setChipValues = function (text, value) {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        var chip = this.createElement('span', {\n            className: CHIP,\n            attrs: { 'data-value': value }\n        });\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        var chipClose = this.createElement('span', { className: CHIP_CLOSE + ' ' + ICONS });\n        if (this.enableHtmlSanitizer) {\n            chipContent.innerText = text;\n        }\n        else {\n            chipContent.innerHTML = text;\n        }\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n        if (this.showClearButton) {\n            chip.appendChild(chipClose);\n            EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n        }\n    };\n    DropDownTree.prototype.setTagValues = function () {\n        if (this.value === null || this.text == null) {\n            return;\n        }\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        var chip = this.createElement('span', {\n            className: CHIP,\n        });\n        if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n            addClass([this.inputEle], CHIP_INPUT);\n        }\n        if (this.chipWrapper.classList.contains(HIDEICON)) {\n            removeClass([this.chipWrapper], HIDEICON);\n        }\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        var template = this.customTemplate;\n        var templateId = this.customTemplateId;\n        var templatestring = 'customTemplate';\n        var compiledString = this.templateComplier(template);\n        var tempArr = compiledString({ 'value': this.value, 'text': this.text }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, chipContent);\n        }\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n    };\n    DropDownTree.prototype.setSelectAllWrapper = function (state) {\n        if (this.isFirstRender) {\n            return;\n        }\n        if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n            this.createSelectAllWrapper();\n            this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n        }\n        else if (this.popupEle.contains(this.checkAllParent)) {\n            detach(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    };\n    DropDownTree.prototype.setHeaderTemplate = function () {\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], HEADER);\n        }\n        // eslint-disable-next-line\n        var compiledString = this.templateComplier(this.headerTemplate);\n        var tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.header);\n        }\n        this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.templateComplier = function (template) {\n        if (template) {\n            // eslint-disable-next-line\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (e) {\n                return compile(template);\n            }\n        }\n        return compile(template);\n    };\n    DropDownTree.prototype.setFooterTemplate = function () {\n        if (this.footer) {\n            this.footer.innerHTML = '';\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], FOOTER);\n        }\n        // eslint-disable-next-line\n        var compiledString = this.templateComplier(this.footerTemplate);\n        var tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.footer);\n        }\n        append([this.footer], this.popupEle);\n    };\n    DropDownTree.prototype.clearAll = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        this.resetValue();\n        this.showOverAllClear();\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            if (this.popupObj) {\n                this.popupObj.refreshPosition();\n            }\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n        }\n        if (e) {\n            this.isClearButtonClick = true;\n        }\n        if (!this.changeOnBlur) {\n            this.triggerChangeEvent(e);\n        }\n    };\n    DropDownTree.prototype.removeChip = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        var element = e.target.parentElement;\n        var value = element.getAttribute('data-value');\n        if (this.chipCollection) {\n            if (element) {\n                remove(element);\n            }\n        }\n        this.isChipDelete = true;\n        this.isClearButtonClick = true;\n        this.removeSelectedData(value, true);\n        this.selectedText = [];\n        if (this.allowMultiSelection) {\n            this.treeObj.selectedNodes = this.value.slice();\n            this.updateSelectedValues();\n        }\n        if (this.showCheckBox) {\n            this.treeObj.uncheckAll([value]);\n            this.clearCheckAll();\n            this.setMultiSelect();\n        }\n        this.triggerChangeEvent(e);\n        this.isChipDelete = false;\n        this.ensurePlaceHolder();\n    };\n    DropDownTree.prototype.resetValue = function (isDynamicChange) {\n        if (this.value == [] && this.text == null) {\n            return;\n        }\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        if (!isDynamicChange) {\n            this.oldValue = this.value;\n            this.setProperties({ value: [] }, true);\n        }\n        this.dataValue = null;\n        this.setProperties({ text: null }, true);\n        this.selectedData = [];\n        setValue('selectedNodes', [], this.treeObj);\n        this.hiddenElement.innerHTML = '';\n        if (this.showCheckBox) {\n            this.treeObj.uncheckAll();\n            this.setMultiSelect();\n            this.clearCheckAll();\n        }\n        if (this.oldValue === null && !isDynamicChange) {\n            this.removeValue = true;\n        }\n        else if (isDynamicChange) {\n            this.triggerChangeEvent();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            this.chipCollection.innerHTML = '';\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n            this.ensurePlaceHolder();\n        }\n    };\n    DropDownTree.prototype.clearCheckAll = function () {\n        if (this.showSelectAll && this.value && this.value.length === 0) {\n            this.setLocale(false);\n        }\n    };\n    DropDownTree.prototype.selectAllItems = function (state) {\n        if (this.showCheckBox) {\n            if (state) {\n                this.isCheckAllCalled = true;\n                this.treeObj.checkAll();\n            }\n            else {\n                this.treeObj.uncheckAll();\n            }\n            this.checkSelectAll = true;\n        }\n        else if (this.allowMultiSelection) {\n            if (!state) {\n                this.treeObj.selectedNodes = [];\n            }\n            else {\n                var li = selectAll('li', this.treeObj.element);\n                var id = void 0;\n                var arr = [];\n                for (var i = 0; i < li.length; i++) {\n                    id = li[i].getAttribute('data-uid').toString();\n                    arr.push(id);\n                }\n                this.treeObj.selectedNodes = arr;\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText) {\n            if (state) {\n                this.updateView();\n            }\n            else {\n                this.updateOverflowWrapper(true);\n            }\n        }\n    };\n    DropDownTree.prototype.updateTreeSettings = function (prop) {\n        var value = Object.keys(prop.treeSettings)[0];\n        if (value === 'autoCheck') {\n            this.ensureAutoCheck();\n            this.treeObj.autoCheck = this.treeSettings.autoCheck;\n        }\n        else if (value === 'loadOnDemand') {\n            this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n        }\n        else if (value === 'expandOn') {\n            this.treeObj.expandOn = this.treeSettings.expandOn;\n            this.treeObj.dataBind();\n            return;\n        }\n        this.treeObj.dataBind();\n        this.setMultiSelect();\n        this.updateValue(this.value);\n    };\n    DropDownTree.prototype.updateCheckBoxState = function (checkBox) {\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.showCheckBox = checkBox;\n        this.treeObj.dataBind();\n        this.isDynamicChange = true;\n        this.setSelectAllWrapper(this.showSelectAll);\n        if (this.showSelectAll) {\n            this.setLocale();\n        }\n        if (this.showCheckBox) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n        this.isDynamicChange = false;\n    };\n    DropDownTree.prototype.updateTemplate = function () {\n        if (this.popupObj) {\n            this.clearTemplate();\n            /* eslint-disable */\n            this.portals = [];\n            /* eslint-enable */\n            this.popupObj.destroy();\n            if (this.isPopupOpen) {\n                this.hidePopup();\n                this.isFirstRender = true;\n                this.renderPopup();\n            }\n            else {\n                this.isFirstRender = true;\n            }\n        }\n    };\n    DropDownTree.prototype.l10nUpdate = function (actionFailure) {\n        if (this.noRecord) {\n            this.noRecord.innerHTML = '';\n        }\n        else {\n            this.noRecord = this.createElement('div');\n        }\n        if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n            var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            var templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line\n            var compiledString = this.templateComplier(template);\n            var tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n            if (tempArr) {\n                tempArr = Array.prototype.slice.call(tempArr);\n                append(tempArr, this.noRecord);\n                addClass([this.noRecord], NODATACONTAINER);\n                prepend([this.noRecord], this.popupDiv);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var l10nLocale = { noRecordsTemplate: 'No Records Found', actionFailureTemplate: 'The Request Failed' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            this.noRecord.innerHTML = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n            addClass([this.noRecord], NODATACONTAINER);\n            prepend([this.noRecord], this.popupDiv);\n        }\n    };\n    DropDownTree.prototype.updateRecordTemplate = function (action) {\n        if (this.treeItems && this.treeItems.length <= 0) {\n            this.l10nUpdate(action);\n            if (this.hasTemplate) {\n                this.updateTemplate();\n            }\n        }\n    };\n    DropDownTree.prototype.updateOverflowWrapper = function (state) {\n        if (!state) {\n            if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n            }\n        }\n        else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n            this.overFlowWrapper.innerHTML = '';\n        }\n    };\n    DropDownTree.prototype.updateMultiSelection = function (state) {\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.allowMultiSelection = state;\n        this.treeObj.dataBind();\n        this.updateOption();\n        if (this.allowMultiSelection) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n    };\n    DropDownTree.prototype.updateAllowFiltering = function (state) {\n        if (!this.isFirstRender) {\n            if (state) {\n                this.renderFilter();\n            }\n            else {\n                this.destroyFilter();\n            }\n        }\n        this.ensureAutoCheck();\n    };\n    DropDownTree.prototype.updateFilterPlaceHolder = function () {\n        if (this.filterObj) {\n            this.filterObj.placeholder = this.filterBarPlaceholder;\n            this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n        }\n    };\n    DropDownTree.prototype.updateValue = function (value) {\n        this.isDynamicChange = true;\n        if (isNullOrUndefined(value) || value.length === 0) {\n            this.resetValue(true);\n        }\n        else {\n            this.setTreeValue();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n        this.isDynamicChange = false;\n    };\n    DropDownTree.prototype.updateText = function (text) {\n        if (isNullOrUndefined(text)) {\n            this.resetValue();\n        }\n        else {\n            this.setTreeText();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n    };\n    DropDownTree.prototype.updateModelMode = function () {\n        var validMode = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (!validMode) {\n            return;\n        }\n        if (!this.wrapText) {\n            var overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n            if (overFlow) {\n                overFlow.innerHTML = '';\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText && (this.value && this.value.length !== 0)) {\n            this.updateOverFlowView();\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.mode === 'Box') {\n                removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n            else {\n                addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n        }\n    };\n    DropDownTree.prototype.updateOption = function () {\n        if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n            this.hiddenElement.setAttribute('multiple', '');\n        }\n        else if (this.hiddenElement.hasAttribute('multiple') && (!this.allowMultiSelection && !this.showCheckBox)) {\n            this.hiddenElement.removeAttribute('multiple');\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {DropDownTreeModel} newProp - specifies the newProp value.\n     * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n     * @returns {void}\n     * @private\n     */\n    DropDownTree.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                    this.setElementWidth(newProp.width);\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this.inputEle);\n                    break;\n                case 'cssClass':\n                    this.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL(this.enableRtl);\n                    break;\n                case 'fields':\n                    this.setFields();\n                    break;\n                case 'readonly':\n                    Input.setReadonly(newProp.readonly, this.inputEle);\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this.inputObj);\n                    Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n                    this.ensureClearIconPosition(newProp.floatLabelType);\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'allowFiltering':\n                    this.updateAllowFiltering(newProp.allowFiltering);\n                    break;\n                case 'filterBarPlaceholder':\n                    this.updateFilterPlaceHolder();\n                    break;\n                case 'value':\n                    this.oldValue = oldProp.value;\n                    this.updateValue(newProp.value);\n                    break;\n                case 'text':\n                    this.updateText(newProp.text);\n                    break;\n                case 'allowMultiSelection':\n                    this.updateMultiSelection(newProp.allowMultiSelection);\n                    break;\n                case 'mode':\n                    if (!this.showCheckBox && !this.allowMultiSelection) {\n                        return;\n                    }\n                    if (this.mode === 'Custom') {\n                        if (this.overFlowWrapper) {\n                            detach(this.overFlowWrapper);\n                        }\n                        if (this.chipWrapper) {\n                            detach(this.chipWrapper);\n                        }\n                        this.setTagValues();\n                    }\n                    else {\n                        if (oldProp.mode === 'Custom') {\n                            this.updateOverflowWrapper(this.wrapText);\n                        }\n                        this.updateModelMode();\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode === 'Box') {\n                        return;\n                    }\n                    if (this.showCheckBox || this.allowMultiSelection) {\n                        this.setMultiSelect();\n                    }\n                    break;\n                case 'selectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale();\n                    }\n                    break;\n                case 'unSelectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale(false);\n                    }\n                    break;\n                case 'showSelectAll':\n                    if (this.showCheckBox) {\n                        this.setSelectAllWrapper(newProp.showSelectAll);\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'showCheckBox':\n                    this.updateCheckBoxState(newProp.showCheckBox);\n                    if (!this.wrapText) {\n                        this.updateOverflowWrapper(true);\n                    }\n                    this.updatePopupHeight();\n                    this.updateOption();\n                    break;\n                case 'treeSettings':\n                    this.updateTreeSettings(newProp);\n                    break;\n                case 'customTemplate':\n                    if (this.mode !== \"Custom\") {\n                        return;\n                    }\n                    this.chipCollection.innerHTML = \"\";\n                    this.setTagValues();\n                    break;\n                case 'sortOrder':\n                    if (this.hasTemplate) {\n                        this.updateTemplate();\n                    }\n                    this.treeObj.sortOrder = newProp.sortOrder;\n                    this.treeObj.dataBind();\n                    this.updateValue(this.value);\n                    break;\n                case 'showDropDownIcon':\n                    this.updateDropDownIconState(newProp.showDropDownIcon);\n                    break;\n                case 'popupWidth':\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'popupHeight':\n                    if (this.popupObj) {\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'zIndex':\n                    if (this.popupObj) {\n                        this.popupObj.zIndex = newProp.zIndex;\n                        this.popupObj.dataBind();\n                    }\n                    break;\n                case 'headerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'footerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'itemTemplate':\n                    this.updateTemplate();\n                    this.treeObj.nodeTemplate = newProp.itemTemplate;\n                    this.treeObj.dataBind();\n                    break;\n                case 'noRecordsTemplate':\n                    this.updateRecordTemplate();\n                    break;\n                case 'actionFailureTemplate':\n                    this.updateRecordTemplate(true);\n                    break;\n                case 'htmlAttributes':\n                    this.setHTMLAttributes();\n                    break;\n                case 'wrapText':\n                    this.updateOverflowWrapper(this.wrapText);\n                    if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                        this.updateView();\n                    }\n                    else {\n                        addClass([this.overFlowWrapper], HIDEICON);\n                        if (this.chipWrapper && this.mode === 'Box') {\n                            removeClass([this.chipWrapper], HIDEICON);\n                        }\n                        else {\n                            removeClass([this.inputWrapper], SHOW_CHIP);\n                            removeClass([this.inputEle], CHIP_INPUT);\n                        }\n                        this.ensurePlaceHolder();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Allows you to clear the selected values from the Dropdown Tree component.\n     *\n     * @method clear\n     * @returns {void}\n     */\n    DropDownTree.prototype.clear = function () {\n        this.clearAll();\n        if (this.inputFocus) {\n            this.onFocusOut();\n        }\n        else {\n            if (this.changeOnBlur) {\n                this.triggerChangeEvent();\n            }\n            this.removeValue = false;\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownTree.prototype.destroy = function () {\n        this.clearTemplate();\n        this.unWireEvents();\n        this.setCssClass(null, this.cssClass);\n        this.setProperties({ value: [] }, true);\n        this.setProperties({ text: null }, true);\n        this.treeObj.destroy();\n        this.destroyFilter();\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            detach(this.popupObj.element);\n        }\n        if (this.element.tagName !== this.getDirective()) {\n            this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n        }\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        detach(this.inputWrapper);\n        detach(this.popupDiv);\n        this.element.classList.remove('e-input');\n        if (this.showCheckBox || this.allowMultiSelection) {\n            this.element.classList.remove(CHIP_INPUT);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    DropDownTree.prototype.destroyFilter = function () {\n        if (this.filterObj) {\n            this.filterObj.destroy();\n            detach(this.filterObj.element);\n            detach(this.filterContainer);\n            this.filterObj = null;\n        }\n    };\n    /**\n     * Ensures visibility of the Dropdown Tree item by using item value or item element.\n     * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n     * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n     * @returns {void}\n     */\n    DropDownTree.prototype.ensureVisible = function (item) {\n        this.treeObj.ensureVisible(item);\n    };\n    /**\n     * To get the updated data source of the Dropdown Tree.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n     * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n     */\n    // eslint-disable-next-line\n    DropDownTree.prototype.getData = function (item) {\n        return this.treeObj.getTreeData(item);\n    };\n    /**\n     * Close the Dropdown tree pop-up.\n     *\n     * @returns {void}\n     */\n    DropDownTree.prototype.hidePopup = function () {\n        var eventArgs = { popup: this.popupObj };\n        this.inputWrapper.classList.remove(ICONANIMATION);\n        if (this.popupEle) {\n            addClass([this.popupEle], DDTHIDEICON);\n        }\n        attributes(this.inputWrapper, { 'aria-expanded': 'false' });\n        if (this.popupObj && this.isPopupOpen) {\n            this.popupObj.hide();\n            if (this.inputFocus) {\n                this.inputWrapper.focus();\n                if (this.allowFiltering) {\n                    addClass([this.inputWrapper], [INPUTFOCUS]);\n                }\n            }\n            this.trigger('close', eventArgs);\n        }\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected or deselected.\n     *\n     * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n     * @returns {void}\n     *\n     */\n    DropDownTree.prototype.selectAll = function (state) {\n        this.selectAllItems(state);\n    };\n    /**\n     * Opens the popup that displays the Dropdown Tree items.\n     *\n     * @returns {void}\n     */\n    DropDownTree.prototype.showPopup = function () {\n        if (!this.enabled || this.readonly || this.isPopupOpen) {\n            return;\n        }\n        this.renderPopup();\n        this.focusIn();\n    };\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - returns the module name.\n     */\n    DropDownTree.prototype.getModuleName = function () {\n        return 'dropdowntree';\n    };\n    __decorate$2([\n        Property('The Request Failed')\n    ], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"allowFiltering\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"changeOnBlur\", void 0);\n    __decorate$2([\n        Property('')\n    ], DropDownTree.prototype, \"cssClass\", void 0);\n    __decorate$2([\n        Property(\"${value.length} item(s) selected\")\n    ], DropDownTree.prototype, \"customTemplate\", void 0);\n    __decorate$2([\n        Property(',')\n    ], DropDownTree.prototype, \"delimiterChar\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"enabled\", void 0);\n    __decorate$2([\n        Complex({}, Fields)\n    ], DropDownTree.prototype, \"fields\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$2([\n        Property('StartsWith')\n    ], DropDownTree.prototype, \"filterType\", void 0);\n    __decorate$2([\n        Property('Never')\n    ], DropDownTree.prototype, \"floatLabelType\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"footerTemplate\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"ignoreAccent\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"ignoreCase\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"headerTemplate\", void 0);\n    __decorate$2([\n        Property({})\n    ], DropDownTree.prototype, \"htmlAttributes\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"itemTemplate\", void 0);\n    __decorate$2([\n        Property('Default')\n    ], DropDownTree.prototype, \"mode\", void 0);\n    __decorate$2([\n        Property('No Records Found')\n    ], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"placeholder\", void 0);\n    __decorate$2([\n        Property('300px')\n    ], DropDownTree.prototype, \"popupHeight\", void 0);\n    __decorate$2([\n        Property('100%')\n    ], DropDownTree.prototype, \"popupWidth\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"readonly\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"showSelectAll\", void 0);\n    __decorate$2([\n        Property('Select All')\n    ], DropDownTree.prototype, \"selectAllText\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"showCheckBox\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"showClearButton\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n    __decorate$2([\n        Property('None')\n    ], DropDownTree.prototype, \"sortOrder\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"text\", void 0);\n    __decorate$2([\n        Complex({}, TreeSettings)\n    ], DropDownTree.prototype, \"treeSettings\", void 0);\n    __decorate$2([\n        Property('Unselect All')\n    ], DropDownTree.prototype, \"unSelectAllText\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"value\", void 0);\n    __decorate$2([\n        Property('100%')\n    ], DropDownTree.prototype, \"width\", void 0);\n    __decorate$2([\n        Property(1000)\n    ], DropDownTree.prototype, \"zIndex\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"wrapText\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"actionFailure\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"beforeOpen\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"change\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"close\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"blur\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"created\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"dataBound\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"destroyed\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"filtering\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"focus\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"keyPress\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"open\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"select\", void 0);\n    DropDownTree = __decorate$2([\n        NotifyPropertyChanges\n    ], DropDownTree);\n    return DropDownTree;\n}(Component));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\nvar SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nvar inputObject$1 = {\n    container: null,\n    buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\nvar ComboBox = /** @__PURE__ @class */ (function (_super) {\n    __extends$3(ComboBox, _super);\n    /**\n     * *Constructor for creating the component\n     *\n     * @param {ComboBoxModel} options - Specifies the ComboBox model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function ComboBox(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.preRender = function () {\n        _super.prototype.preRender.call(this);\n    };\n    ComboBox.prototype.getLocaleName = function () {\n        return 'combo-box';\n    };\n    ComboBox.prototype.wireEvent = function () {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n            EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n        }\n        EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n        if (!this.readonly) {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n            EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n        }\n        this.bindCommonEvent();\n    };\n    ComboBox.prototype.preventBlur = function (e) {\n        if ((!this.allowFiltering && document.activeElement !== this.inputElement &&\n            !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice)) {\n            e.preventDefault();\n        }\n    };\n    ComboBox.prototype.onBlurHandler = function (e) {\n        var inputValue = this.inputElement && this.inputElement.value === '' ?\n            null : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n            this.customValue(e);\n        }\n        _super.prototype.onBlurHandler.call(this, e);\n    };\n    ComboBox.prototype.targetElement = function () {\n        return this.inputElement;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.setOldText = function (text) {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.customValue();\n        this.removeSelection();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.setOldValue = function (value) {\n        if (this.allowCustom) {\n            this.valueMuteChange(this.value);\n        }\n        else {\n            this.valueMuteChange(null);\n        }\n        this.removeSelection();\n        this.setHiddenValue();\n    };\n    ComboBox.prototype.valueMuteChange = function (value) {\n        var inputValue = isNullOrUndefined(value) ? null : value.toString();\n        Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.setProperties({ value: value, text: value, index: null }, true);\n        this.activeIndex = this.index;\n        var fields = this.fields;\n        var dataItem = {};\n        dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n        dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n        this.itemData = dataItem;\n        this.item = null;\n        if (this.previousValue !== this.value) {\n            this.detachChangeEvent(null);\n        }\n    };\n    ComboBox.prototype.updateValues = function () {\n        if (!isNullOrUndefined(this.value)) {\n            var li = this.getElementByValue(this.value);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else if (this.allowCustom) {\n                this.valueMuteChange(this.value);\n            }\n            else {\n                this.valueMuteChange(null);\n            }\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            var li = this.getElementByText(this.text);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else {\n                Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.customValue();\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    };\n    ComboBox.prototype.updateIconState = function () {\n        if (this.showClearButton) {\n            if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    };\n    ComboBox.prototype.getAriaAttributes = function () {\n        var ariaAttributes = {\n            'role': 'combobox',\n            'aria-autocomplete': 'both',\n            'aria-labelledby': this.hiddenElement.id,\n            'aria-expanded': 'false',\n            'aria-readonly': this.readonly.toString(),\n            'autocomplete': 'off',\n            'autocapitalize': 'off',\n            'spellcheck': 'false'\n        };\n        return ariaAttributes;\n    };\n    ComboBox.prototype.searchLists = function (e) {\n        this.isTyped = true;\n        if (this.isFiltering()) {\n            _super.prototype.searchLists.call(this, e);\n            if (this.ulElement && this.filterInput.value.trim() === '') {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n        }\n        else {\n            if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n            this.incrementalSearch(e);\n        }\n    };\n    ComboBox.prototype.getNgDirective = function () {\n        return 'EJS-COMBOBOX';\n    };\n    ComboBox.prototype.setSearchBox = function () {\n        this.filterInput = this.inputElement;\n        return (this.isFiltering() ? this.inputWrapper : inputObject$1);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        var _this = this;\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isSelectCustom) {\n            this.removeSelection();\n        }\n        if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped) {\n            setTimeout(function () {\n                _this.inlineSearch();\n            });\n        }\n    };\n    ComboBox.prototype.getFocusElement = function () {\n        var dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n        var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : this.list;\n        var isSelected = dataItem.text === this.inputElement.value && !isNullOrUndefined(selected);\n        if (isSelected) {\n            return selected;\n        }\n        if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) &&\n            !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n            var inputValue = this.inputElement.value;\n            var dataSource = this.sortedData;\n            var type = this.typeOfData(dataSource).typeof;\n            var activeItem = Search(inputValue, this.liCollections, this.filterType, true, dataSource, this.fields, type);\n            var activeElement = activeItem.item;\n            if (!isNullOrUndefined(activeElement)) {\n                var count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n                var height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n                if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n                    this.removeFocus();\n                    var fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n                    this.list.scrollTop = count * height + fixedHead;\n                    addClass([activeElement], dropDownListClasses.focus);\n                }\n            }\n            else {\n                if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n                    this.removeFocus();\n                    this.list.scrollTop = 0;\n                }\n            }\n            return activeElement;\n        }\n        else {\n            return null;\n        }\n    };\n    ComboBox.prototype.setValue = function (e) {\n        if (e && e.type === 'keydown' && e.action === 'enter') {\n            this.removeFillSelection();\n        }\n        if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n            this.preventAutoFill = false;\n            this.inlineSearch(e);\n            return false;\n        }\n        else {\n            return _super.prototype.setValue.call(this, e);\n        }\n    };\n    ComboBox.prototype.checkCustomValue = function () {\n        this.itemData = this.getDataByValue(this.value);\n        var dataItem = this.getItemData();\n        if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n            this.setProperties({ 'value': dataItem.value }, !this.allowCustom);\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = (this.getModuleName() === 'autocomplete') ? (this.inputWrapper.buttons[0] ||\n                this.inputWrapper.clearButton ||\n                Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement)) :\n                (this.inputWrapper.buttons[0] || this.inputWrapper.clearButton);\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    };\n    ComboBox.prototype.setAutoFill = function (activeElement, isHover) {\n        if (!isHover) {\n            this.setHoverList(activeElement);\n        }\n        if (this.autofill && !this.preventAutoFill) {\n            var currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n            var currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n            if (this.getModuleName() === 'combobox') {\n                if (!this.isSelected && this.previousValue !== currentFillValue) {\n                    this.updateSelectedItem(activeElement, null);\n                    this.isSelected = true;\n                    this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                }\n                else {\n                    this.updateSelectedItem(activeElement, null, true);\n                }\n            }\n            if (!this.isAndroidAutoFill(currentValue)) {\n                this.setAutoFillSelection(currentValue, isHover);\n            }\n        }\n    };\n    ComboBox.prototype.isAndroidAutoFill = function (value) {\n        if (Browser.isAndroid) {\n            var currentPoints = this.getSelectionPoints();\n            var prevEnd = this.prevSelectPoints.end;\n            var curEnd = currentPoints.end;\n            var prevStart = this.prevSelectPoints.start;\n            var curStart = currentPoints.start;\n            if (prevEnd !== 0 && ((prevEnd === value.length && prevStart === value.length) ||\n                (prevStart > curStart && prevEnd > curEnd) || (prevEnd === curEnd && prevStart === curStart))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    ComboBox.prototype.clearAll = function (e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            _super.prototype.clearAll.call(this, e);\n        }\n        if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n            this.searchLists(e);\n        }\n    };\n    ComboBox.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    ComboBox.prototype.inlineSearch = function (e) {\n        var isKeyNavigate = (e && (e.action === 'down' || e.action === 'up' ||\n            e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown'));\n        var activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n        if (!isNullOrUndefined(activeElement)) {\n            if (!isKeyNavigate) {\n                var value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n                this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n            }\n            this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n            this.setAutoFill(activeElement, isKeyNavigate);\n        }\n        else if (this.inputElement.value === '') {\n            this.activeIndex = null;\n            if (!isNullOrUndefined(this.list)) {\n                this.list.scrollTop = 0;\n                var focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n                this.setHoverList(focusItem);\n            }\n        }\n        else {\n            this.activeIndex = null;\n            this.removeSelection();\n            if (this.liCollections && this.liCollections.length > 0 && !this.isCustomFilter) {\n                this.removeFocus();\n            }\n        }\n    };\n    ComboBox.prototype.incrementalSearch = function (e) {\n        this.showPopup(e);\n        if (!isNullOrUndefined(this.listData)) {\n            this.inlineSearch(e);\n            e.preventDefault();\n        }\n    };\n    ComboBox.prototype.setAutoFillSelection = function (currentValue, isKeyNavigate) {\n        if (isKeyNavigate === void 0) { isKeyNavigate = false; }\n        var selection = this.getSelectionPoints();\n        var value = this.inputElement.value.substr(0, selection.start);\n        if (value && (value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase())) {\n            var inputValue = value + currentValue.substr(value.length, currentValue.length);\n            Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n        }\n        else if (isKeyNavigate) {\n            Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n        }\n    };\n    ComboBox.prototype.getValueByText = function (text) {\n        return _super.prototype.getValueByText.call(this, text, true, this.ignoreAccent);\n    };\n    ComboBox.prototype.unWireEvent = function () {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n            EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n        }\n        if (this.inputElement) {\n            EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n            if (!this.readonly) {\n                EventHandler.remove(this.inputElement, 'input', this.onInput);\n                EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n            }\n        }\n        this.unBindCommonEvent();\n    };\n    ComboBox.prototype.setSelection = function (li, e) {\n        _super.prototype.setSelection.call(this, li, e);\n        if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n            this.removeFocus();\n        }\n    };\n    ComboBox.prototype.selectCurrentItem = function (e) {\n        var li;\n        if (this.isPopupOpen) {\n            if (this.isSelected) {\n                li = this.list.querySelector('.' + dropDownListClasses.selected);\n            }\n            else {\n                li = this.list.querySelector('.' + dropDownListClasses.focus);\n            }\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n        }\n        if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n            this.clearAll(e);\n        }\n        else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n            this.customValue(e);\n        }\n        this.hidePopup(e);\n    };\n    ComboBox.prototype.setHoverList = function (li) {\n        this.removeSelection();\n        if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n            this.removeFocus();\n            li.classList.add(dropDownListClasses.focus);\n        }\n    };\n    ComboBox.prototype.targetFocus = function (e) {\n        if (Browser.isDevice && !this.allowFiltering) {\n            this.preventFocus = false;\n        }\n        this.onFocus(e);\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    };\n    ComboBox.prototype.dropDownClick = function (e) {\n        e.preventDefault();\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        _super.prototype.dropDownClick.call(this, e);\n    };\n    ComboBox.prototype.customValue = function (e) {\n        var _this = this;\n        var value = this.getValueByText(this.inputElement.value);\n        if (!this.allowCustom && this.inputElement.value !== '') {\n            var previousValue = this.previousValue;\n            var currentValue = this.value;\n            this.setProperties({ value: value });\n            if (isNullOrUndefined(this.value)) {\n                Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n            }\n            if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n                this.onChangeEvent(null);\n            }\n        }\n        else if (this.inputElement.value.trim() !== '') {\n            var previousValue_1 = this.value;\n            if (isNullOrUndefined(value)) {\n                var value_1 = this.inputElement.value === '' ? null : this.inputElement.value;\n                // eslint-disable-next-line max-len\n                var eventArgs = { text: value_1, item: {} };\n                if (!this.initial) {\n                    this.trigger('customValueSpecifier', eventArgs, function (eventArgs) {\n                        _this.updateCustomValueCallback(value_1, eventArgs, previousValue_1, e);\n                    });\n                }\n                else {\n                    this.updateCustomValueCallback(value_1, eventArgs, previousValue_1);\n                }\n            }\n            else {\n                this.isSelectCustom = false;\n                this.setProperties({ value: value });\n                if (previousValue_1 !== this.value) {\n                    this.onChangeEvent(e);\n                }\n            }\n        }\n        else if (this.allowCustom) {\n            this.isSelectCustom = true;\n        }\n    };\n    ComboBox.prototype.updateCustomValueCallback = function (value, eventArgs, previousValue, e) {\n        var fields = this.fields;\n        var item = eventArgs.item;\n        var dataItem = {};\n        if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n            dataItem = item;\n        }\n        else {\n            setValue(fields.text, value, dataItem);\n            setValue(fields.value, value, dataItem);\n        }\n        this.itemData = dataItem;\n        var changeData = {\n            text: getValue(fields.text, this.itemData),\n            value: getValue(fields.value, this.itemData),\n            index: null\n        };\n        this.setProperties(changeData, true);\n        this.setSelection(null, null);\n        this.isSelectCustom = true;\n        if (previousValue !== this.value) {\n            this.onChangeEvent(e);\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n     * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'combobox') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'readonly':\n                    Input.setReadonly(this.readonly, this.inputElement);\n                    if (this.readonly) {\n                        EventHandler.remove(this.inputElement, 'input', this.onInput);\n                        EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                        EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                    }\n                    else {\n                        EventHandler.add(this.inputElement, 'input', this.onInput, this);\n                        EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n                        EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n                    }\n                    this.setReadOnly();\n                    break;\n                case 'allowFiltering':\n                    this.setSearchBox();\n                    if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n                        _super.prototype.renderList.call(this);\n                    }\n                    break;\n                case 'allowCustom':\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    var comboProps = this.getPropObject(prop, newProp, oldProp);\n                    _super.prototype.onPropertyChanged.call(this, comboProps.newProperty, comboProps.oldProperty);\n                    if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate &&\n                        this.getModuleName() === 'combobox') {\n                        _super.prototype.renderList.call(this);\n                    }\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * To initialize the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.render = function () {\n        _super.prototype.render.call(this);\n        this.setSearchBox();\n        if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this);\n        }\n        this.renderComplete();\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    ComboBox.prototype.getModuleName = function () {\n        return 'combobox';\n    };\n    /**\n     * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.filter = function (dataSource, query, fields) {\n        _super.prototype.filter.call(this, dataSource, query, fields);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.showPopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        _super.prototype.showPopup.call(this, e);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.hidePopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        var inputValue = this.inputElement && this.inputElement.value === '' ? null\n            : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData)) {\n            var isEscape = this.isEscapeKey;\n            if (this.isEscapeKey) {\n                Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.isEscapeKey = false;\n            }\n            if (this.autofill) {\n                this.removeFillSelection();\n            }\n            var dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n            var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : null;\n            if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n                if (this.isSelected) {\n                    this.onChangeEvent(e);\n                    this.isSelectCustom = false;\n                }\n                _super.prototype.hidePopup.call(this, e);\n                return;\n            }\n            if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n                var dataSource = this.sortedData;\n                var type = this.typeOfData(dataSource).typeof;\n                var searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true, dataSource, this.fields, type);\n                this.selectedLI = searchItem.item;\n                if (isNullOrUndefined(searchItem.index)) {\n                    searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true, dataSource, this.fields, type).index;\n                }\n                this.activeIndex = searchItem.index;\n                if (!isNullOrUndefined(this.selectedLI)) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                }\n                else if (isEscape) {\n                    this.isSelectCustom = true;\n                    this.removeSelection();\n                }\n            }\n            if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n                this.customValue(e);\n            }\n        }\n        if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n            this.customValue();\n        }\n        _super.prototype.hidePopup.call(this, e);\n    };\n    /**\n     * Sets the focus to the component for interaction.\n     *\n     * @returns {void}\n     */\n    ComboBox.prototype.focusIn = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        _super.prototype.focusIn.call(this);\n    };\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.clear = function () {\n        this.value = null;\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.focusOut = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        _super.prototype.focusOut.call(this, e);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     * @deprecated\n     */\n    ComboBox.prototype.getItems = function () {\n        return _super.prototype.getItems.call(this);\n    };\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     * @deprecated\n     */\n    ComboBox.prototype.getDataByValue = function (value) {\n        return _super.prototype.getDataByValue.call(this, value);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    ComboBox.prototype.renderHightSearch = function () {\n        // update high light search\n    };\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"autofill\", void 0);\n    __decorate$3([\n        Property(true)\n    ], ComboBox.prototype, \"allowCustom\", void 0);\n    __decorate$3([\n        Property({})\n    ], ComboBox.prototype, \"htmlAttributes\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"allowFiltering\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"query\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"index\", void 0);\n    __decorate$3([\n        Property(true)\n    ], ComboBox.prototype, \"showClearButton\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"enableRtl\", void 0);\n    __decorate$3([\n        Event()\n    ], ComboBox.prototype, \"customValueSpecifier\", void 0);\n    __decorate$3([\n        Event()\n    ], ComboBox.prototype, \"filtering\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"valueTemplate\", void 0);\n    __decorate$3([\n        Property('Never')\n    ], ComboBox.prototype, \"floatLabelType\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"cssClass\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"headerTemplate\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"footerTemplate\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"placeholder\", void 0);\n    __decorate$3([\n        Property('100%')\n    ], ComboBox.prototype, \"width\", void 0);\n    __decorate$3([\n        Property('300px')\n    ], ComboBox.prototype, \"popupHeight\", void 0);\n    __decorate$3([\n        Property('100%')\n    ], ComboBox.prototype, \"popupWidth\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"readonly\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"text\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"value\", void 0);\n    ComboBox = __decorate$3([\n        NotifyPropertyChanges\n    ], ComboBox);\n    return ComboBox;\n}(DropDownList));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\nvar AutoComplete = /** @__PURE__ @class */ (function (_super) {\n    __extends$4(AutoComplete, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function AutoComplete(options, element) {\n        var _this_1 = _super.call(this, options, element) || this;\n        _this_1.isFiltered = false;\n        _this_1.searchList = false;\n        return _this_1;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.preRender = function () {\n        _super.prototype.preRender.call(this);\n    };\n    AutoComplete.prototype.getLocaleName = function () {\n        return 'auto-complete';\n    };\n    AutoComplete.prototype.getNgDirective = function () {\n        return 'EJS-AUTOCOMPLETE';\n    };\n    AutoComplete.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.value)) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.value)) ? this.value : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 20, checked the condition\n            if (this.suggestionCount !== 20) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    };\n    AutoComplete.prototype.searchLists = function (e) {\n        var _this_1 = this;\n        this.isTyped = true;\n        this.isDataFetched = this.isSelectCustom = false;\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this, e, true);\n        }\n        this.queryString = this.filterInput.value;\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields, null, e);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.filterInput.value,\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this_1.isFiltered = true;\n                _this_1.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this_1.isFiltered && !eventArgs.preventDefaultAction) {\n                _this_1.searchList = true;\n                _this_1.filterAction(_this_1.dataSource, null, _this_1.fields, e);\n            }\n        });\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    AutoComplete.prototype.filter = function (dataSource, query, fields) {\n        this.isFiltered = true;\n        this.filterAction(dataSource, query, fields);\n    };\n    AutoComplete.prototype.filterAction = function (dataSource, query, fields, e) {\n        this.beforePopupOpen = true;\n        if (this.queryString !== '' && (this.queryString.length >= this.minLength)) {\n            this.resetList(dataSource, fields, query, e);\n        }\n        else {\n            this.hidePopup(e);\n            this.beforePopupOpen = false;\n        }\n        this.renderReactTemplates();\n    };\n    AutoComplete.prototype.clearAll = function (e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            _super.prototype.clearAll.call(this, e);\n        }\n        if (this.beforePopupOpen) {\n            this.hidePopup();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    AutoComplete.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        this.fixedHeaderElement = null;\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        var item = this.list.querySelector('.' + dropDownListClasses.li);\n        if (!isNullOrUndefined(item)) {\n            removeClass([item], dropDownListClasses.focus);\n        }\n        this.postBackAction();\n    };\n    AutoComplete.prototype.postBackAction = function () {\n        if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n            var items = [this.liCollections[0]];\n            var dataSource = this.listData;\n            var type = this.typeOfData(dataSource).typeof;\n            var searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase, dataSource, this.fields, type);\n            this.searchList = false;\n            if (!isNullOrUndefined(searchItem.item)) {\n                _super.prototype.setAutoFill.call(this, this.liCollections[0], true);\n            }\n        }\n    };\n    AutoComplete.prototype.setSelection = function (li, e) {\n        if (!this.isValidLI(li)) {\n            this.selectedLI = li;\n            return;\n        }\n        if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter'\n            && e.action !== 'tab' && this.isValidLI(li)) {\n            var value = this.getFormattedValue(li.getAttribute('data-value'));\n            this.activeIndex = this.getIndexByValue(value);\n            this.setHoverList(li);\n            this.selectedLI = li;\n            this.setScrollPosition(e);\n            if (this.autofill && this.isPopupOpen) {\n                this.preventAutoFill = false;\n                var isKeyNavigate = (e && e.action === 'down' || e.action === 'up' ||\n                    e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown');\n                _super.prototype.setAutoFill.call(this, li, isKeyNavigate);\n            }\n        }\n        else {\n            _super.prototype.setSelection.call(this, li, e);\n        }\n    };\n    AutoComplete.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this_1 = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this_1.highlight) {\n                    if (_this_1.element.tagName === _this_1.getNgDirective() && _this_1.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this_1.highlight) {\n                    highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                }\n                itemCreated_1.apply(_this_1, [e]);\n            };\n        }\n        return fields;\n    };\n    AutoComplete.prototype.isFiltering = function () {\n        return true;\n    };\n    AutoComplete.prototype.renderPopup = function (e) {\n        this.list.scrollTop = 0;\n        _super.prototype.renderPopup.call(this, e);\n    };\n    AutoComplete.prototype.isEditTextBox = function () {\n        return true && this.inputElement.value.trim() !== '';\n    };\n    AutoComplete.prototype.isPopupButton = function () {\n        return this.showPopupButton;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    AutoComplete.prototype.isSelectFocusItem = function (element) {\n        return false;\n    };\n    AutoComplete.prototype.setInputValue = function (newProp, oldProp) {\n        var oldValue = oldProp && oldProp.text ? oldProp.text : oldProp ? oldProp.value : oldProp;\n        var value = newProp && newProp.text ? newProp.text : newProp && newProp.value ? newProp.value : this.value;\n        if (value && this.typedString === '' && !this.allowCustom && !(this.dataSource instanceof DataManager)) {\n            var checkFields_1_1 = this.typeOfData(this.dataSource).typeof === 'string' ? '' : this.fields.value;\n            var listLength_1 = this.getItems().length;\n            var query = new Query();\n            var _this_2 = this;\n            new DataManager(this.dataSource).executeQuery(query.where(new Predicate(checkFields_1_1, 'equal', value)))\n                .then(function (e) {\n                if (e.result.length > 0) {\n                    _this_2.value = checkFields_1_1 !== '' ? e.result[0][_this_2.fields.value].toString() : e.result[0].toString();\n                    _this_2.addItem(e.result, listLength_1);\n                    _this_2.updateValues();\n                }\n                else {\n                    newProp && newProp.text ? _this_2.setOldText(oldValue) : newProp && newProp.value ? _this_2.setOldValue(oldValue) : _this_2.updateValues();\n                }\n            });\n        }\n        else if (newProp) {\n            newProp.text ? this.setOldText(oldValue) : this.setOldValue(oldValue);\n        }\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    AutoComplete.prototype.showPopup = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        this.preventAutoFill = true;\n        if (isNullOrUndefined(this.list)) {\n            this.renderList(e);\n        }\n        else {\n            this.resetList(this.dataSource, this.fields, null, e);\n        }\n    };\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     */\n    AutoComplete.prototype.hidePopup = function (e) {\n        _super.prototype.hidePopup.call(this, e);\n        this.activeIndex = -1;\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n     * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'showPopupButton':\n                    if (this.showPopupButton) {\n                        var button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n                        this.inputWrapper.buttons[0] = button;\n                        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n                        if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0]) && this.floatLabelType !== 'Never') {\n                            this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n                        }\n                        if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n                            EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n                        }\n                    }\n                    else {\n                        detach(this.inputWrapper.buttons[0]);\n                        this.inputWrapper.buttons[0] = null;\n                    }\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    var atcProps = this.getPropObject(prop, newProp, oldProp);\n                    _super.prototype.onPropertyChanged.call(this, atcProps.newProperty, atcProps.oldProperty);\n                    break;\n                }\n            }\n        }\n    };\n    AutoComplete.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    AutoComplete.prototype.getModuleName = function () {\n        return 'autocomplete';\n    };\n    /**\n     * To initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.render = function () {\n        _super.prototype.render.call(this);\n    };\n    __decorate$4([\n        Complex({ value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], AutoComplete.prototype, \"fields\", void 0);\n    __decorate$4([\n        Property(true)\n    ], AutoComplete.prototype, \"ignoreCase\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"showPopupButton\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"highlight\", void 0);\n    __decorate$4([\n        Property(20)\n    ], AutoComplete.prototype, \"suggestionCount\", void 0);\n    __decorate$4([\n        Property({})\n    ], AutoComplete.prototype, \"htmlAttributes\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"query\", void 0);\n    __decorate$4([\n        Property(1)\n    ], AutoComplete.prototype, \"minLength\", void 0);\n    __decorate$4([\n        Property('Contains')\n    ], AutoComplete.prototype, \"filterType\", void 0);\n    __decorate$4([\n        Event()\n    ], AutoComplete.prototype, \"filtering\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"index\", void 0);\n    __decorate$4([\n        Property('Never')\n    ], AutoComplete.prototype, \"floatLabelType\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"valueTemplate\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"allowFiltering\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"text\", void 0);\n    AutoComplete = __decorate$4([\n        NotifyPropertyChanges\n    ], AutoComplete);\n    return AutoComplete;\n}(ComboBox));\n\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\nvar FLOATLINE = 'e-float-line';\nvar FLOATTEXT = 'e-float-text';\nvar LABELTOP = 'e-label-top';\nvar LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n    var floatLinelement = createElement('span', { className: FLOATLINE });\n    var floatLabelElement = createElement('label', { className: FLOATTEXT });\n    var id = element.getAttribute('id') ? element.getAttribute('id') : getUniqueID('ej2_multiselect');\n    element.id = id;\n    if (!isNullOrUndefined(element.id) && element.id !== '') {\n        floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n        attributes(inputElement, { 'aria-labelledby': floatLabelElement.id });\n    }\n    if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n        floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n        inputElement.removeAttribute('placeholder');\n    }\n    floatLabelElement.innerText = encodePlaceholder(placeholder);\n    searchWrapper.appendChild(floatLinelement);\n    searchWrapper.appendChild(floatLabelElement);\n    overAllWrapper.classList.add('e-float-input');\n    updateFloatLabelState(value, floatLabelElement);\n    if (floatLabelType === 'Always') {\n        if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n            removeClass([floatLabelElement], LABELBOTTOM);\n        }\n        addClass([floatLabelElement], LABELTOP);\n    }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\nfunction updateFloatLabelState(value, label) {\n    if (value && value.length > 0) {\n        addClass([label], LABELTOP);\n        removeClass([label], LABELBOTTOM);\n    }\n    else {\n        removeClass([label], LABELTOP);\n        addClass([label], LABELBOTTOM);\n    }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n    var placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n    var floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n    var placeholderText;\n    if (!isNullOrUndefined(placeholderElement)) {\n        placeholderText = placeholderElement.innerText;\n        detach(searchWrapper.querySelector('.' + FLOATTEXT));\n        setPlaceHolder(value, inputElement, placeholderText);\n        if (!isNullOrUndefined(floatLine)) {\n            detach(searchWrapper.querySelector('.' + FLOATLINE));\n        }\n    }\n    else {\n        placeholderText = (placeholder !== null) ? placeholder : '';\n        setPlaceHolder(value, inputElement, placeholderText);\n    }\n    overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction setPlaceHolder(value, inputElement, placeholder) {\n    if (value && value.length) {\n        inputElement.placeholder = '';\n    }\n    else {\n        inputElement.placeholder = placeholder;\n    }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n    overAllWrapper.classList.add('e-input-focus');\n    var label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (!isNullOrUndefined(label)) {\n        addClass([label], LABELTOP);\n        if (label.classList.contains(LABELBOTTOM)) {\n            removeClass([label], LABELBOTTOM);\n        }\n    }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    overAllWrapper.classList.remove('e-input-focus');\n    var label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n        if (label.classList.contains(LABELTOP)) {\n            removeClass([label], LABELTOP);\n        }\n        addClass([label], LABELBOTTOM);\n    }\n}\nfunction encodePlaceholder(placeholder) {\n    var result = '';\n    if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n        var spanElement = document.createElement('span');\n        spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n        var hiddenInput = (spanElement.children[0]);\n        result = hiddenInput.placeholder;\n    }\n    return result;\n}\n/* eslint-enable valid-jsdoc */\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\nvar FOCUS = 'e-input-focus';\nvar DISABLED$1 = 'e-disabled';\nvar OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nvar ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nvar ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nvar HIDE_LIST = 'e-hide-listitem';\nvar DELIMITER_VIEW = 'e-delim-view';\nvar CHIP_WRAPPER$1 = 'e-chips-collection';\nvar CHIP$1 = 'e-chips';\nvar CHIP_CONTENT$1 = 'e-chipcontent';\nvar CHIP_CLOSE$1 = 'e-chips-close';\nvar CHIP_SELECTED = 'e-chip-selected';\nvar SEARCHBOX_WRAPPER = 'e-searcher';\nvar DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nvar ZERO_SIZE = 'e-zero-size';\nvar REMAIN_WRAPPER$1 = 'e-remain';\nvar CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nvar DELIMITER_WRAPPER = 'e-delim-values';\nvar POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nvar INPUT_ELEMENT = 'e-dropdownbase';\nvar RTL_CLASS = 'e-rtl';\nvar CLOSE_ICON_HIDE = 'e-close-icon-hide';\nvar MOBILE_CHIP = 'e-mob-chip';\nvar FOOTER$1 = 'e-ddl-footer';\nvar HEADER$1 = 'e-ddl-header';\nvar DISABLE_ICON = 'e-ddl-disable-icon';\nvar SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nvar HIDDEN_ELEMENT = 'e-multi-hidden';\nvar destroy = 'destroy';\nvar dropdownIcon = 'e-input-group-icon e-ddl-icon';\nvar iconAnimation = 'e-icon-anim';\nvar TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nvar BOX_ELEMENT = 'e-multiselect-box';\nvar FILTERPARENT = 'e-filter-parent';\nvar CUSTOM_WIDTH = 'e-search-custom-width';\nvar FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\nvar MultiSelect = /** @__PURE__ @class */ (function (_super) {\n    __extends$5(MultiSelect, _super);\n    /**\n     * Constructor for creating the DropDownList widget.\n     *\n     * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function MultiSelect(option, element) {\n        var _this = _super.call(this, option, element) || this;\n        _this.clearIconWidth = 0;\n        _this.previousFilterText = '';\n        _this.isValidKey = false;\n        _this.selectAllEventData = [];\n        _this.selectAllEventEle = [];\n        _this.resetMainList = null;\n        _this.resetFilteredData = false;\n        _this.scrollFocusStatus = false;\n        _this.keyDownStatus = false;\n        return _this;\n    }\n    MultiSelect.prototype.enableRTL = function (state) {\n        if (state) {\n            this.overAllWrapper.classList.add(RTL_CLASS);\n        }\n        else {\n            this.overAllWrapper.classList.remove(RTL_CLASS);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n    };\n    MultiSelect.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.mode === 'CheckBox') {\n            this.isGroupChecking = this.enableGroupCheckBox;\n            if (this.enableGroupCheckBox) {\n                var prevOnChange = this.isProtectedOnChange;\n                this.isProtectedOnChange = true;\n                this.enableSelectionOrder = false;\n                this.isProtectedOnChange = prevOnChange;\n            }\n            this.allowCustomValue = false;\n            this.hideSelectedItem = false;\n            this.closePopupOnSelect = false;\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    MultiSelect.prototype.updateHTMLAttribute = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                switch (htmlAttr) {\n                    case 'class': {\n                        var updatedClassValue = (this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ')).trim();\n                        if (updatedClassValue !== '') {\n                            addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                            addClass([this.popupWrapper], updatedClassValue.split(' '));\n                        }\n                        break;\n                    }\n                    case 'disabled':\n                        this.enable(false);\n                        break;\n                    case 'placeholder':\n                        if (!this.placeholder) {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                            this.setProperties({ placeholder: this.inputElement.placeholder }, true);\n                            this.refreshPlaceHolder();\n                        }\n                        break;\n                    default: {\n                        var defaultAttr = ['id'];\n                        var validateAttr = ['name', 'required', 'aria-required', 'form'];\n                        var containerAttr = ['title', 'role', 'style', 'class'];\n                        if (defaultAttr.indexOf(htmlAttr) > -1) {\n                            this.element.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        else if (containerAttr.indexOf(htmlAttr) > -1) {\n                            this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        else if (htmlAttr !== 'size' && !isNullOrUndefined(this.inputElement)) {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.updateReadonly = function (state) {\n        if (!isNullOrUndefined(this.inputElement)) {\n            if (state || this.mode === 'CheckBox') {\n                this.inputElement.setAttribute('readonly', 'true');\n            }\n            else {\n                this.inputElement.removeAttribute('readonly');\n            }\n        }\n    };\n    MultiSelect.prototype.updateClearButton = function (state) {\n        if (state) {\n            if (this.overAllClear.parentNode) {\n                this.overAllClear.style.display = '';\n            }\n            else {\n                this.componentWrapper.appendChild(this.overAllClear);\n            }\n            this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n    };\n    MultiSelect.prototype.updateCssClass = function () {\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            var updatedCssClassValues = this.cssClass;\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n            if (updatedCssClassValues !== '') {\n                addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n                addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n            }\n        }\n    };\n    MultiSelect.prototype.updateOldPropCssClass = function (oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n            if (oldClass !== '') {\n                removeClass([this.overAllWrapper], oldClass.split(' '));\n                removeClass([this.popupWrapper], oldClass.split(' '));\n            }\n        }\n    };\n    MultiSelect.prototype.onPopupShown = function (e) {\n        var _this = this;\n        if (Browser.isDevice && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            window.onpopstate = function () {\n                proxy_1.hidePopup();\n                proxy_1.inputElement.focus();\n            };\n            history.pushState({}, '');\n        }\n        var animModel = { name: 'FadeIn', duration: 100 };\n        var eventArgs = { popup: this.popupObj, event: e, cancel: false, animation: animModel };\n        this.trigger('open', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.focusAtFirstListItem();\n                if (_this.popupObj) {\n                    document.body.appendChild(_this.popupObj.element);\n                }\n                if (_this.mode === 'CheckBox' && _this.enableGroupCheckBox && !isNullOrUndefined(_this.fields.groupBy)) {\n                    _this.updateListItems(_this.list.querySelectorAll('li.e-list-item'), _this.mainList.querySelectorAll('li.e-list-item'));\n                }\n                if (_this.mode === 'CheckBox' || _this.showDropDownIcon) {\n                    addClass([_this.overAllWrapper], [iconAnimation]);\n                }\n                _this.refreshPopup();\n                _this.renderReactTemplates();\n                if (_this.popupObj) {\n                    _this.popupObj.show(eventArgs.animation, (_this.zIndex === 1000) ? _this.element : null);\n                }\n                attributes(_this.inputElement, { 'aria-expanded': 'true', 'aria-owns': _this.inputElement.id + '_options' });\n                _this.updateAriaActiveDescendant();\n                if (_this.isFirstClick) {\n                    _this.loadTemplate();\n                }\n            }\n        });\n    };\n    MultiSelect.prototype.updateListItems = function (listItems, mainListItems) {\n        for (var i = 0; i < listItems.length; i++) {\n            this.findGroupStart(listItems[i]);\n            this.findGroupStart(mainListItems[i]);\n        }\n        this.deselectHeader();\n    };\n    MultiSelect.prototype.loadTemplate = function () {\n        this.refreshListItems(null);\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n        this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n    };\n    MultiSelect.prototype.setScrollPosition = function () {\n        if (((!this.hideSelectedItem && this.mode !== 'CheckBox') || (this.mode === 'CheckBox' && !this.enableSelectionOrder)) &&\n            (!isNullOrUndefined(this.value) && (this.value.length > 0))) {\n            var valueEle = this.findListElement((this.hideSelectedItem ? this.ulElement : this.list), 'li', 'data-value', this.value[this.value.length - 1]);\n            if (!isNullOrUndefined(valueEle)) {\n                this.scrollBottom(valueEle);\n            }\n        }\n    };\n    MultiSelect.prototype.focusAtFirstListItem = function () {\n        if (this.ulElement && this.ulElement.querySelector('li.'\n            + dropDownBaseClasses.li)) {\n            var element = void 0;\n            if (this.mode === 'CheckBox') {\n                this.removeFocus();\n                return;\n            }\n            else {\n                element = this.ulElement.querySelector('li.'\n                    + dropDownBaseClasses.li + ':not(.'\n                    + HIDE_LIST + ')');\n            }\n            if (element !== null) {\n                this.removeFocus();\n                this.addListFocus(element);\n            }\n        }\n    };\n    MultiSelect.prototype.focusAtLastListItem = function (data) {\n        var activeElement;\n        if (data) {\n            activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n        }\n        else {\n            if (this.value && this.value.length) {\n                Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n            }\n            else {\n                activeElement = null;\n            }\n        }\n        if (activeElement && activeElement.item !== null) {\n            this.addListFocus(activeElement.item);\n            this.scrollBottom(activeElement.item, activeElement.index);\n        }\n    };\n    MultiSelect.prototype.getAriaAttributes = function () {\n        var ariaAttributes = {\n            'aria-disabled': 'false',\n            'role': 'combobox',\n            'aria-expanded': 'false'\n        };\n        return ariaAttributes;\n    };\n    MultiSelect.prototype.updateListARIA = function () {\n        if (!isNullOrUndefined(this.ulElement)) {\n            attributes(this.ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n        }\n        var disableStatus = !isNullOrUndefined(this.inputElement) && (this.inputElement.disabled) ? true : false;\n        if (!this.isPopupOpen() && !isNullOrUndefined(this.inputElement)) {\n            attributes(this.inputElement, this.getAriaAttributes());\n        }\n        if (disableStatus) {\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n        }\n        this.ensureAriaDisabled((disableStatus) ? 'true' : 'false');\n    };\n    MultiSelect.prototype.ensureAriaDisabled = function (status) {\n        if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n            var attr = this.htmlAttributes;\n            extend(attr, { 'aria-disabled': status }, attr);\n            this.setProperties({ htmlAttributes: attr }, true);\n        }\n    };\n    MultiSelect.prototype.removelastSelection = function (e) {\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        var value = elements[elements.length - 1].getAttribute('data-value');\n        if (!isNullOrUndefined(this.value)) {\n            this.tempValues = this.value.slice();\n        }\n        var customValue = this.getFormattedValue(value);\n        if (this.allowCustomValue && (value !== 'false' && customValue === false || (!isNullOrUndefined(customValue) &&\n            customValue.toString() === 'NaN'))) {\n            customValue = value;\n        }\n        this.removeValue(customValue, e);\n        this.removeChipSelection();\n        this.updateDelimeter(this.delimiterChar, e);\n        this.makeTextBoxEmpty();\n        if (this.mainList && this.listData) {\n            this.refreshSelection();\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.onActionFailure = function (e) {\n        _super.prototype.onActionFailure.call(this, e);\n        this.renderPopup();\n        this.onPopupShown();\n    };\n    MultiSelect.prototype.targetElement = function () {\n        this.targetInputElement = this.inputElement;\n        if (this.mode === 'CheckBox' && this.allowFiltering) {\n            this.notify('targetElement', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        return this.targetInputElement.value;\n    };\n    MultiSelect.prototype.getForQuery = function (valuecheck) {\n        var predicate;\n        var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n        for (var i = 0; i < valuecheck.length; i++) {\n            if (i === 0) {\n                predicate = new Predicate(field, 'equal', valuecheck[i]);\n            }\n            else {\n                predicate = predicate.or(field, 'equal', valuecheck[i]);\n            }\n        }\n        return this.getQuery(this.query).where(predicate);\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    MultiSelect.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        this.updateSelectElementData(this.allowFiltering);\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n            for (var i = 0; i < this.value.length; i++) {\n                var checkEle = this.findListElement(((this.allowFiltering && !isNullOrUndefined(this.mainList)) ? this.mainList : ulElement), 'li', 'data-value', proxy.value[i]);\n                if (!checkEle && !(this.dataSource instanceof DataManager)) {\n                    this.value.splice(i, 1);\n                    i -= 1;\n                }\n            }\n        }\n        var valuecheck = [];\n        if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n            valuecheck = this.presentItemValue(this.ulElement);\n        }\n        if (valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value)\n            && this.listData != null) {\n            this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n        }\n        else {\n            this.updateActionList(ulElement, list, e);\n        }\n        if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n            this.removeFocus();\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    MultiSelect.prototype.updateActionList = function (ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        if (!this.mainList && !this.mainData) {\n            this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n            this.mainData = list;\n            this.mainListCollection = this.liCollections;\n        }\n        else if (isNullOrUndefined(this.mainData) || this.mainData.length === 0) {\n            this.mainData = list;\n        }\n        if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering &&\n            this.inputElement.value && this.inputElement.value !== '') {\n            this.checkForCustomValue(this.tempQuery, this.fields);\n            return;\n        }\n        if (this.value && this.value.length && ((this.mode !== 'CheckBox' && !isNullOrUndefined(this.inputElement) && this.inputElement.value.trim() !== '') ||\n            this.mode === 'CheckBox' || ((this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering &&\n            this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === ''))) {\n            this.refreshSelection();\n        }\n        this.updateListARIA();\n        this.unwireListEvents();\n        this.wireListEvents();\n        if (!isNullOrUndefined(this.setInitialValue)) {\n            this.setInitialValue();\n        }\n        if (!isNullOrUndefined(this.selectAllAction)) {\n            this.selectAllAction();\n        }\n        if (this.setDynValue) {\n            if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.initialTextUpdate();\n            }\n            this.initialValueUpdate();\n            this.initialUpdate();\n            this.refreshPlaceHolder();\n            if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                this.updateValueState(null, this.value, null);\n            }\n        }\n        this.renderPopup();\n        if (this.beforePopupOpen) {\n            this.beforePopupOpen = false;\n            this.onPopupShown(e);\n        }\n    };\n    MultiSelect.prototype.refreshSelection = function () {\n        var value;\n        var element;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (!isNullOrUndefined(this.value)) {\n            for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                value = this.value[index];\n                element = this.findListElement(this.list, 'li', 'data-value', value);\n                if (element) {\n                    addClass([element], className);\n                    if (this.hideSelectedItem && element.previousSibling\n                        && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)\n                        && (!element.nextElementSibling ||\n                            element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                        addClass([element.previousElementSibling], className);\n                    }\n                    if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n                        this.hideGroupItem(value);\n                    }\n                    if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n                        removeClass([element], dropDownBaseClasses.focus);\n                        var listEle = element.parentElement.querySelectorAll('.' +\n                            dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n                        if (listEle.length > 0) {\n                            addClass([listEle[0]], dropDownBaseClasses.focus);\n                            this.updateAriaActiveDescendant();\n                        }\n                        else {\n                            //EJ2-57588 - for this task, we prevent the ul element cloning ( this.ulElement = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n                            if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                                this.l10nUpdate();\n                                addClass([this.list], dropDownBaseClasses.noData);\n                            }\n                        }\n                    }\n                    element.setAttribute('aria-selected', 'true');\n                    if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n                        var ariaValue = element.getElementsByClassName('e-check').length;\n                        if (ariaValue === 0) {\n                            var args = {\n                                module: 'CheckBoxSelection',\n                                enable: this.mode === 'CheckBox',\n                                li: element,\n                                e: null\n                            };\n                            this.notify('updatelist', args);\n                        }\n                    }\n                }\n            }\n        }\n        this.checkSelectAll();\n        this.checkMaxSelection();\n    };\n    MultiSelect.prototype.hideGroupItem = function (value) {\n        var element;\n        var element1;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n        var i = 0;\n        var j = 0;\n        var temp = true;\n        var temp1 = true;\n        do {\n            if (element && element.previousElementSibling\n                && (!element.previousElementSibling.classList.contains(HIDE_LIST) &&\n                    element.previousElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp = false;\n            }\n            if (!temp || !element || (element.previousElementSibling\n                && element.previousElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                i = 10;\n            }\n            else {\n                element = element.previousElementSibling;\n            }\n            if (element1 && element1.nextElementSibling\n                && (!element1.nextElementSibling.classList.contains(HIDE_LIST) &&\n                    element1.nextElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp1 = false;\n            }\n            if (!temp1 || !element1 || (element1.nextElementSibling\n                && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                j = 10;\n            }\n            else {\n                element1 = element1.nextElementSibling;\n            }\n        } while (i < 10 || j < 10);\n        if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            addClass([element.previousElementSibling], className);\n        }\n        else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            removeClass([element.previousElementSibling], className);\n        }\n    };\n    MultiSelect.prototype.getValidLi = function () {\n        var liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n        return (!isNullOrUndefined(liElement) ? liElement : this.liCollections[0]);\n    };\n    MultiSelect.prototype.checkSelectAll = function () {\n        var groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n        var listItem = this.list.querySelectorAll('li.e-list-item');\n        var searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n        var searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n        if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            searchActiveCount = searchActiveCount - groupItemLength;\n        }\n        if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength)\n            && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'check' });\n        }\n        else if ((searchCount !== searchActiveCount) && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n        }\n        if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n            for (var i = 0; i < listItem.length; i++) {\n                this.findGroupStart(listItem[i]);\n            }\n            this.deselectHeader();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.openClick = function (e) {\n        if (!this.openOnClick && this.mode !== 'CheckBox') {\n            if (this.targetElement() !== '') {\n                this.showPopup();\n            }\n            else {\n                this.hidePopup(e);\n            }\n        }\n        else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n            this.showPopup();\n        }\n    };\n    MultiSelect.prototype.keyUp = function (e) {\n        if (this.mode === 'CheckBox' && !this.openOnClick) {\n            var char = String.fromCharCode(e.keyCode);\n            var isWordCharacter = char.match(/\\w/);\n            if (!isNullOrUndefined(isWordCharacter)) {\n                this.isValidKey = true;\n            }\n        }\n        this.isValidKey = (this.isPopupOpen() && e.keyCode === 8) || this.isValidKey;\n        this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            this.expandTextbox();\n            this.showOverAllClear();\n            switch (e.keyCode) {\n                default:\n                    // For filtering works in mobile firefox\n                    this.search(e);\n            }\n        }\n    };\n    /**\n     * To filter the multiselect data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     */\n    MultiSelect.prototype.filter = function (dataSource, query, fields) {\n        this.isFiltered = true;\n        this.remoteFilterAction = true;\n        this.dataUpdater(dataSource, query, fields);\n    };\n    MultiSelect.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.filterAction) {\n            if (this.targetElement() !== null) {\n                var dataType = this.typeOfData(this.dataSource).typeof;\n                if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                    filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n                else {\n                    var fields = this.fields;\n                    filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n            }\n            return filterQuery;\n        }\n        else {\n            return query ? query : this.query ? this.query : new Query();\n        }\n    };\n    MultiSelect.prototype.dataUpdater = function (dataSource, query, fields) {\n        this.isDataFetched = false;\n        if (this.targetElement().trim() === '') {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (this.backCommand) {\n                this.remoteCustomValue = false;\n                if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n                    this.mainData = [];\n                }\n                this.onActionComplete(list, this.mainData);\n                if (this.value && this.value.length) {\n                    this.refreshSelection();\n                }\n                if (this.keyCode !== 8) {\n                    this.focusAtFirstListItem();\n                }\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n            if (this.allowCustomValue) {\n                if (!(dataSource instanceof DataManager)) {\n                    this.checkForCustomValue(query, fields);\n                }\n                else {\n                    this.remoteCustomValue = true;\n                    this.tempQuery = query;\n                }\n            }\n        }\n        this.refreshPopup();\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n    };\n    MultiSelect.prototype.checkForCustomValue = function (query, fields) {\n        var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n        if (this.allowCustomValue && dataChecks) {\n            var value = this.inputElement.value;\n            var field = fields ? fields : this.fields;\n            var customData = (!isNullOrUndefined(this.mainData) && this.mainData.length > 0) ?\n                this.mainData[0] : this.mainData;\n            if (typeof (customData) !== 'string' && typeof (customData) !== 'number' && typeof (customData) !== 'boolean') {\n                var dataItem = {};\n                setValue(field.text, value, dataItem);\n                if (typeof getValue((this.fields.value ? this.fields.value : 'value'), customData)\n                    === 'number') {\n                    setValue(field.value, Math.random(), dataItem);\n                }\n                else {\n                    setValue(field.value, value, dataItem);\n                }\n                var tempData = JSON.parse(JSON.stringify(this.listData));\n                tempData.splice(0, 0, dataItem);\n                this.resetList(tempData, field, query);\n            }\n            else {\n                var tempData = JSON.parse(JSON.stringify(this.listData));\n                tempData.splice(0, 0, this.inputElement.value);\n                tempData[0] = (typeof customData === 'number' && !isNaN(parseFloat(tempData[0]))) ?\n                    parseFloat(tempData[0]) : tempData[0];\n                tempData[0] = (typeof customData === 'boolean') ?\n                    (tempData[0] === 'true' ? true : (tempData[0] === 'false' ? false : tempData[0])) : tempData[0];\n                this.resetList(tempData, field);\n            }\n        }\n        if (this.value && this.value.length) {\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.getNgDirective = function () {\n        return 'EJS-MULTISELECT';\n    };\n    MultiSelect.prototype.wrapperClick = function (e) {\n        this.setDynValue = false;\n        if (!this.enabled) {\n            return;\n        }\n        if (e.target === this.overAllClear) {\n            e.preventDefault();\n            return;\n        }\n        if (!this.inputFocus) {\n            this.inputElement.focus();\n        }\n        if (!this.readonly) {\n            if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n                if (this.isPopupOpen()) {\n                    this.refreshPopup();\n                }\n                return;\n            }\n            if (!this.isPopupOpen() &&\n                (this.openOnClick || (this.showDropDownIcon && e.target && e.target.className === dropdownIcon))) {\n                this.showPopup(e);\n            }\n            else {\n                this.hidePopup(e);\n                if (this.mode === 'CheckBox') {\n                    this.showOverAllClear();\n                    this.inputFocus = true;\n                    if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                        this.overAllWrapper.classList.add(FOCUS);\n                    }\n                }\n            }\n        }\n        if (!(this.targetElement() && this.targetElement() !== '')) {\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.enable = function (state) {\n        if (state) {\n            this.overAllWrapper.classList.remove(DISABLED$1);\n            this.inputElement.removeAttribute('disabled');\n            attributes(this.inputElement, { 'aria-disabled': 'false' });\n            this.ensureAriaDisabled('false');\n        }\n        else {\n            this.overAllWrapper.classList.add(DISABLED$1);\n            this.inputElement.setAttribute('disabled', 'true');\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n            this.ensureAriaDisabled('true');\n        }\n        if (this.enabled !== state) {\n            this.enabled = state;\n        }\n        this.hidePopup();\n    };\n    MultiSelect.prototype.onBlurHandler = function (eve, isDocClickFromCheck) {\n        var target;\n        if (!isNullOrUndefined(eve)) {\n            target = eve.relatedTarget;\n        }\n        if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n            else if ((this.floatLabelType === 'Auto' &&\n                ((this.overAllWrapper.classList.contains('e-outline')) || (this.overAllWrapper.classList.contains('e-filled'))))) {\n                addClass([this.overAllWrapper], 'e-valid-input');\n            }\n            return;\n        }\n        if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline')) && this.mode === 'CheckBox' &&\n            ((isNullOrUndefined(this.value)) || this.value.length === 0)) {\n            removeClass([this.overAllWrapper], 'e-valid-input');\n        }\n        if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n            this.inputFocus = false;\n            this.overAllWrapper.classList.remove(FOCUS);\n            return;\n        }\n        if (this.scrollFocusStatus) {\n            if (!isNullOrUndefined(eve)) {\n                eve.preventDefault();\n            }\n            this.inputElement.focus();\n            this.scrollFocusStatus = false;\n            return;\n        }\n        this.inputFocus = false;\n        this.overAllWrapper.classList.remove(FOCUS);\n        if (this.addTagOnBlur) {\n            var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n            var listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n            var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n            var allowChipAddition = (listLiElement && !listLiElement.classList.contains(className)) ? true : false;\n            if (allowChipAddition) {\n                this.updateListSelection(listLiElement, eve);\n                if (this.mode === 'Delimiter') {\n                    this.updateDelimeter(this.delimiterChar);\n                }\n            }\n        }\n        this.updateDataList();\n        if (this.resetMainList) {\n            this.mainList = this.resetMainList;\n            this.resetMainList = null;\n        }\n        this.refreshListItems(null);\n        if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n            this.updateDelimView();\n        }\n        if (this.changeOnBlur) {\n            this.updateValueState(eve, this.value, this.tempValues);\n            this.dispatchEvent(this.hiddenElement, 'change');\n        }\n        this.overAllClear.style.display = 'none';\n        if (this.isPopupOpen()) {\n            this.hidePopup(eve);\n        }\n        this.makeTextBoxEmpty();\n        this.trigger('blur');\n        this.focused = true;\n        if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.removeChipFocus();\n        }\n        this.removeChipSelection();\n        this.refreshInputHight();\n        floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n        this.refreshPlaceHolder();\n        if ((this.allowFiltering || (this.enableSelectionOrder === true && this.mode === 'CheckBox'))\n            && !isNullOrUndefined(this.mainList)) {\n            this.ulElement = this.mainList;\n        }\n        this.checkPlaceholderSize();\n        Input.createSpanElement(this.overAllWrapper, this.createElement);\n        this.calculateWidth();\n        if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n    };\n    MultiSelect.prototype.calculateWidth = function () {\n        var elementWidth;\n        if (this.overAllWrapper) {\n            if (!this.showDropDownIcon || this.overAllWrapper.querySelector('.' + 'e-label-top')) {\n                elementWidth = this.overAllWrapper.clientWidth - 2 * (parseInt(getComputedStyle(this.inputElement).paddingRight));\n            }\n            else {\n                var downIconWidth = this.dropIcon.offsetWidth +\n                    parseInt(getComputedStyle(this.dropIcon).marginRight);\n                elementWidth = this.overAllWrapper.clientWidth - (downIconWidth + 2 * (parseInt(getComputedStyle(this.inputElement).paddingRight)));\n            }\n            Input.calculateWidth(elementWidth, this.overAllWrapper, this.getModuleName());\n        }\n    };\n    MultiSelect.prototype.checkPlaceholderSize = function () {\n        if (this.showDropDownIcon) {\n            var downIconWidth = this.dropIcon.offsetWidth +\n                parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            this.setPlaceholderSize(downIconWidth);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n            }\n        }\n    };\n    MultiSelect.prototype.setPlaceholderSize = function (downIconWidth) {\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n            if (this.dropIcon.offsetWidth !== 0) {\n                this.searchWrapper.style.width = ('calc(100% - ' + (downIconWidth + 10)) + 'px';\n            }\n            else {\n                addClass([this.searchWrapper], CUSTOM_WIDTH);\n            }\n        }\n        else if (!isNullOrUndefined(this.value)) {\n            this.searchWrapper.removeAttribute('style');\n            removeClass([this.searchWrapper], CUSTOM_WIDTH);\n        }\n    };\n    MultiSelect.prototype.refreshInputHight = function () {\n        if (!isNullOrUndefined(this.searchWrapper)) {\n            if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n                this.searchWrapper.classList.remove(ZERO_SIZE);\n            }\n            else {\n                this.searchWrapper.classList.add(ZERO_SIZE);\n            }\n        }\n    };\n    MultiSelect.prototype.validateValues = function (newValue, oldValue) {\n        return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n    };\n    MultiSelect.prototype.updateValueState = function (event, newVal, oldVal) {\n        var newValue = newVal ? newVal : [];\n        var oldValue = oldVal ? oldVal : [];\n        if (this.initStatus && this.validateValues(newValue, oldValue)) {\n            var eventArgs = {\n                e: event,\n                oldValue: oldVal,\n                value: newVal,\n                isInteracted: event ? true : false,\n                element: this.element,\n                event: event\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n            this.updateTempValue();\n            if (!this.changeOnBlur) {\n                this.dispatchEvent(this.hiddenElement, 'change');\n            }\n        }\n    };\n    MultiSelect.prototype.updateTempValue = function () {\n        if (!this.value) {\n            this.tempValues = this.value;\n        }\n        else {\n            this.tempValues = this.value.slice();\n        }\n    };\n    MultiSelect.prototype.updateAriaActiveDescendant = function () {\n        if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n            attributes(this.inputElement, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n        }\n    };\n    MultiSelect.prototype.getPagingCount = function () {\n        var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.offsetHeight / parseInt(height, 10));\n    };\n    MultiSelect.prototype.pageUpSelection = function (steps) {\n        var collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    };\n    MultiSelect.prototype.pageDownSelection = function (steps) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var list = this.getItems();\n        var collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    };\n    MultiSelect.prototype.getItems = function () {\n        if (!this.list) {\n            _super.prototype.render.call(this);\n        }\n        return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ?\n            this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')') : [];\n    };\n    MultiSelect.prototype.focusInHandler = function (e) {\n        var _this = this;\n        if (this.enabled) {\n            this.showOverAllClear();\n            this.inputFocus = true;\n            if (this.value && this.value.length) {\n                if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                    this.chipCollectionWrapper.style.display = '';\n                }\n                else {\n                    this.showDelimWrapper();\n                }\n                if (this.mode !== 'CheckBox') {\n                    this.viewWrapper.style.display = 'none';\n                }\n            }\n            if (this.mode !== 'CheckBox') {\n                this.searchWrapper.classList.remove(ZERO_SIZE);\n            }\n            this.checkPlaceholderSize();\n            if (this.focused) {\n                var args = { isInteracted: e ? true : false, event: e };\n                this.trigger('focus', args);\n                this.focused = false;\n            }\n            if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                this.overAllWrapper.classList.add(FOCUS);\n            }\n            floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n            if (this.isPopupOpen()) {\n                this.refreshPopup();\n            }\n            setTimeout(function () {\n                _this.calculateWidth();\n            }, 150);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    MultiSelect.prototype.showDelimWrapper = function () {\n        if (this.mode === 'CheckBox') {\n            this.viewWrapper.style.display = '';\n        }\n        else {\n            this.delimiterWrapper.style.display = '';\n        }\n        this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n    };\n    MultiSelect.prototype.hideDelimWrapper = function () {\n        this.delimiterWrapper.style.display = 'none';\n        this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n    };\n    MultiSelect.prototype.expandTextbox = function () {\n        var size = 5;\n        if (this.placeholder) {\n            size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n        }\n        if (this.inputElement.value.length > size) {\n            this.inputElement.size = this.inputElement.value.length;\n        }\n        else {\n            this.inputElement.size = size;\n        }\n    };\n    MultiSelect.prototype.isPopupOpen = function () {\n        return ((this.popupWrapper !== null) && (this.popupWrapper.parentElement !== null));\n    };\n    MultiSelect.prototype.refreshPopup = function () {\n        if (this.popupObj && this.mobFilter) {\n            this.popupObj.setProperties({ width: this.calcPopupWidth() });\n            this.popupObj.refreshPosition(this.overAllWrapper);\n            this.popupObj.resolveCollision();\n        }\n    };\n    MultiSelect.prototype.checkTextLength = function () {\n        return this.targetElement().length < 1;\n    };\n    MultiSelect.prototype.popupKeyActions = function (e) {\n        switch (e.keyCode) {\n            case 38:\n                this.hidePopup(e);\n                if (this.mode === 'CheckBox') {\n                    this.inputElement.focus();\n                }\n                e.preventDefault();\n                break;\n            case 40:\n                if (!this.isPopupOpen()) {\n                    this.showPopup(e);\n                    e.preventDefault();\n                }\n                break;\n        }\n    };\n    MultiSelect.prototype.updateAriaAttribute = function () {\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(focusedItem)) {\n            this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n            if (this.allowFiltering) {\n                var filterInput = this.popupWrapper.querySelector('.' + FILTERINPUT);\n                filterInput && filterInput.setAttribute('aria-activedescendant', focusedItem.id);\n            }\n            else if (this.mode == \"CheckBox\") {\n                this.overAllWrapper.setAttribute('aria-activedescendant', focusedItem.id);\n            }\n        }\n    };\n    MultiSelect.prototype.homeNavigation = function (isHome) {\n        this.removeFocus();\n        var scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (scrollEle.length > 0) {\n            var element = scrollEle[(isHome) ? 0 : (scrollEle.length - 1)];\n            element.classList.add(dropDownBaseClasses.focus);\n            this.scrollBottom(element);\n            this.updateAriaActiveDescendant();\n        }\n    };\n    MultiSelect.prototype.onKeyDown = function (e) {\n        if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n            return;\n        }\n        this.keyCode = e.keyCode;\n        this.keyDownStatus = true;\n        if (e.keyCode > 111 && e.keyCode < 124) {\n            return;\n        }\n        if (e.altKey) {\n            this.popupKeyActions(e);\n            return;\n        }\n        else if (this.isPopupOpen()) {\n            var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n            var activeIndex = void 0;\n            switch (e.keyCode) {\n                case 36:\n                case 35:\n                    this.homeNavigation((e.keyCode === 36) ? true : false);\n                    break;\n                case 33:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageUpSelection(activeIndex - this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 34:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageDownSelection(activeIndex + this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 38:\n                    this.arrowUp(e);\n                    break;\n                case 40:\n                    this.arrowDown(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.hidePopup(e);\n                    if (this.mode === 'CheckBox') {\n                        this.inputElement.focus();\n                    }\n                    return;\n                case 13:\n                    e.preventDefault();\n                    if (this.mode !== 'CheckBox') {\n                        this.selectByKey(e);\n                    }\n                    this.checkPlaceholderSize();\n                    return;\n                case 32:\n                    this.spaceKeySelection(e);\n                    return;\n                case 9:\n                    e.preventDefault();\n                    this.hidePopup(e);\n                    this.inputElement.focus();\n                    this.overAllWrapper.classList.add(FOCUS);\n            }\n        }\n        else {\n            switch (e.keyCode) {\n                case 13:\n                case 9:\n                case 16:\n                case 17:\n                case 20:\n                    return;\n                case 40:\n                    if (this.openOnClick) {\n                        this.showPopup();\n                    }\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.escapeAction();\n                    return;\n            }\n        }\n        if (this.checkTextLength()) {\n            this.keyNavigation(e);\n        }\n        if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n            if (this.allowFiltering) {\n                this.previousFilterText = this.targetElement();\n            }\n            this.checkBackCommand(e);\n        }\n        this.expandTextbox();\n        if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.refreshPopup();\n        }\n    };\n    MultiSelect.prototype.arrowDown = function (e) {\n        e.preventDefault();\n        this.moveByList(1);\n        this.keyAction = true;\n        if (document.activeElement.classList.contains(FILTERINPUT)\n            || (this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list)) {\n            EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n        }\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.arrowUp = function (e) {\n        e.preventDefault();\n        this.keyAction = true;\n        var list = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            list = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        }\n        var focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        var index = Array.prototype.slice.call(list).indexOf(focuseElem);\n        if (index <= 0 && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            this.keyAction = false;\n            this.notify('inputFocus', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'focus' });\n        }\n        this.moveByList(-1);\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.spaceKeySelection = function (e) {\n        if (this.mode === 'CheckBox') {\n            if (!document.activeElement.classList.contains(FILTERINPUT)) {\n                e.preventDefault();\n                this.keyAction = true;\n            }\n            this.selectByKey(e);\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.checkBackCommand = function (e) {\n        if (e.keyCode === 8 && this.allowFiltering ? this.targetElement() !== this.previousFilterText : this.targetElement() === '') {\n            this.backCommand = false;\n        }\n        else {\n            this.backCommand = true;\n        }\n    };\n    MultiSelect.prototype.keyNavigation = function (e) {\n        if ((this.mode !== 'Delimiter' && this.mode !== 'CheckBox') && this.value && this.value.length) {\n            switch (e.keyCode) {\n                case 37: //left arrow\n                    e.preventDefault();\n                    this.moveBy(-1, e);\n                    break;\n                case 39: //right arrow\n                    e.preventDefault();\n                    this.moveBy(1, e);\n                    break;\n                case 8:\n                    this.removelastSelection(e);\n                    break;\n                case 46: //del\n                    this.removeSelectedChip(e);\n                    break;\n            }\n        }\n        else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n            if (this.value && this.value.length) {\n                e.preventDefault();\n                var temp = this.value[this.value.length - 1];\n                this.removeValue(temp, e);\n                this.updateDelimeter(this.delimiterChar, e);\n                this.focusAtLastListItem(temp);\n            }\n        }\n    };\n    MultiSelect.prototype.selectByKey = function (e) {\n        this.removeChipSelection();\n        this.selectListByKey(e);\n        if (this.hideSelectedItem) {\n            this.focusAtFirstListItem();\n        }\n    };\n    MultiSelect.prototype.escapeAction = function () {\n        var temp = this.tempValues ? this.tempValues.slice() : [];\n        if (this.value && this.validateValues(this.value, temp)) {\n            if (this.mode !== 'CheckBox') {\n                this.value = temp;\n                this.initialValueUpdate();\n            }\n            if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else {\n                this.showDelimWrapper();\n            }\n            this.refreshPlaceHolder();\n            if (this.value.length) {\n                this.showOverAllClear();\n            }\n            else {\n                this.hideOverAllClear();\n            }\n        }\n        this.makeTextBoxEmpty();\n    };\n    MultiSelect.prototype.scrollBottom = function (selectedLI, activeIndex) {\n        var currentOffset = this.list.offsetHeight;\n        var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n        var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n        var boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n            boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextBottom > currentOffset) {\n            this.list.scrollTop = nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = nextOffset;\n        }\n    };\n    MultiSelect.prototype.scrollTop = function (selectedLI, activeIndex) {\n        var nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n        nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n            nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n        var boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextOffset < 0) {\n            this.list.scrollTop = this.list.scrollTop + nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n                this.fixedHeaderElement.offsetHeight : 0);\n        }\n    };\n    MultiSelect.prototype.selectListByKey = function (e) {\n        var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        var target;\n        if (li !== null) {\n            if (li.classList.contains('e-active')) {\n                limit = limit - 1;\n            }\n            if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                this.updateListSelection(li, e);\n                this.addListFocus(li);\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    this.updateDelimeter(this.delimiterChar, e);\n                    this.refreshInputHight();\n                    this.checkPlaceholderSize();\n                    if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                        target = li.firstElementChild.lastElementChild;\n                        this.findGroupStart(target);\n                        this.deselectHeader();\n                    }\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.makeTextBoxEmpty();\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(li.textContent);\n                }\n                if (!this.changeOnBlur) {\n                    this.updateValueState(e, this.value, this.tempValues);\n                }\n                this.refreshPopup();\n            }\n            else {\n                if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                    target = li.firstElementChild.lastElementChild;\n                    if (target.classList.contains('e-check')) {\n                        this.selectAllItem(false, e, li);\n                    }\n                    else {\n                        this.selectAllItem(true, e, li);\n                    }\n                }\n            }\n            this.refreshSelection();\n            if (this.closePopupOnSelect) {\n                this.hidePopup(e);\n            }\n        }\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.refreshListItems = function (data) {\n        if ((this.allowFiltering || (this.mode === 'CheckBox' && this.enableSelectionOrder === true)\n            || this.allowCustomValue) && this.mainList && this.listData) {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n            this.focusAtLastListItem(data);\n            if (this.value && this.value.length) {\n                this.refreshSelection();\n            }\n        }\n        else if (!isNullOrUndefined(this.fields.groupBy) && this.value && this.value.length) {\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.removeSelectedChip = function (e) {\n        var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        var temp;\n        if (selectedElem !== null) {\n            if (!isNullOrUndefined(this.value)) {\n                this.tempValues = this.value.slice();\n            }\n            temp = selectedElem.nextElementSibling;\n            if (temp !== null) {\n                this.removeChipSelection();\n                this.addChipSelection(temp, e);\n            }\n            this.removeValue(selectedElem.getAttribute('data-value'), e);\n            this.makeTextBoxEmpty();\n        }\n        if (this.closePopupOnSelect) {\n            this.hidePopup(e);\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.moveByTop = function (state) {\n        var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        var index;\n        if (elements.length > 1) {\n            this.removeFocus();\n            index = state ? 0 : (elements.length - 1);\n            this.addListFocus(elements[index]);\n            this.scrollBottom(elements[index], index);\n        }\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.moveByList = function (position) {\n        if (this.list) {\n            var elements = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                elements = this.list.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                    + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            }\n            var selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n            var temp = -1;\n            if (elements.length) {\n                for (var index = 0; index < elements.length; index++) {\n                    if (elements[index] === selectedElem) {\n                        temp = index;\n                        break;\n                    }\n                }\n                if (position > 0) {\n                    if (temp < (elements.length - 1)) {\n                        this.removeFocus();\n                        this.addListFocus(elements[++temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollBottom(elements[temp], temp);\n                    }\n                }\n                else {\n                    if (temp > 0) {\n                        this.removeFocus();\n                        this.addListFocus(elements[--temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollTop(elements[temp], temp);\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.updateCheck = function (element) {\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox &&\n            !isNullOrUndefined(this.fields.groupBy)) {\n            var checkElement = element.firstElementChild.lastElementChild;\n            if (checkElement.classList.contains('e-check')) {\n                element.classList.add('e-active');\n            }\n            else {\n                element.classList.remove('e-active');\n            }\n        }\n    };\n    MultiSelect.prototype.moveBy = function (position, e) {\n        var temp;\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        if (selectedElem === null) {\n            if (position < 0) {\n                this.addChipSelection(elements[elements.length - 1], e);\n            }\n        }\n        else {\n            if (position < 0) {\n                temp = selectedElem.previousElementSibling;\n                if (temp !== null) {\n                    this.removeChipSelection();\n                    this.addChipSelection(temp, e);\n                }\n            }\n            else {\n                temp = selectedElem.nextElementSibling;\n                this.removeChipSelection();\n                if (temp !== null) {\n                    this.addChipSelection(temp, e);\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.chipClick = function (e) {\n        if (this.enabled) {\n            var elem = closest(e.target, '.' + CHIP$1);\n            this.removeChipSelection();\n            this.addChipSelection(elem, e);\n        }\n    };\n    MultiSelect.prototype.removeChipSelection = function () {\n        if (this.chipCollectionWrapper) {\n            this.removeChipFocus();\n        }\n    };\n    MultiSelect.prototype.addChipSelection = function (element, e) {\n        addClass([element], CHIP_SELECTED);\n        this.trigger('chipSelection', e);\n    };\n    MultiSelect.prototype.onChipRemove = function (e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.enabled && !this.readonly) {\n            var element = e.target.parentElement;\n            var customVal = element.getAttribute('data-value');\n            var value = this.getFormattedValue(customVal);\n            if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n                (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n                value = customVal;\n            }\n            if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n                this.hidePopup(e);\n            }\n            if (!this.inputFocus) {\n                this.inputElement.focus();\n            }\n            this.removeValue(value, e);\n            if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n                var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                this.onActionComplete(list, this.mainData);\n            }\n            this.updateDelimeter(this.delimiterChar, e);\n            if (this.placeholder && this.floatLabelType === 'Never') {\n                this.makeTextBoxEmpty();\n                this.checkPlaceholderSize();\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.makeTextBoxEmpty = function () {\n        this.inputElement.value = '';\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.refreshPlaceHolder = function () {\n        if (this.placeholder && this.floatLabelType === 'Never') {\n            if ((this.value && this.value.length) || (!isNullOrUndefined(this.text) && this.text !== '')) {\n                this.inputElement.placeholder = '';\n            }\n            else {\n                this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n            }\n        }\n        else {\n            this.setFloatLabelType();\n        }\n        this.expandTextbox();\n    };\n    MultiSelect.prototype.removeAllItems = function (value, eve, isClearAll, element, mainElement) {\n        var index = this.value.indexOf(value);\n        var removeVal = this.value.slice(0);\n        removeVal.splice(index, 1);\n        this.setProperties({ value: [].concat([], removeVal) }, true);\n        element.setAttribute('aria-selected', 'false');\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        removeClass([element], className);\n        this.notify('activeList', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox', li: element,\n            e: this, index: index\n        });\n        this.invokeCheckboxSelection(element, eve, isClearAll);\n        this.updateMainList(true, value, mainElement);\n        this.updateChipStatus();\n    };\n    MultiSelect.prototype.invokeCheckboxSelection = function (element, eve, isClearAll) {\n        this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: eve });\n        this.updateAriaActiveDescendant();\n        if ((this.value && this.value.length !== this.mainData.length)\n            && (this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll))) {\n            this.notify('checkSelectAll', {\n                module: 'CheckBoxSelection',\n                enable: this.mode === 'CheckBox',\n                value: 'uncheck'\n            });\n        }\n    };\n    MultiSelect.prototype.removeValue = function (value, eve, length, isClearAll) {\n        var _this = this;\n        var index = this.value.indexOf(this.getFormattedValue(value));\n        if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n            index = this.value.indexOf(value.toString());\n        }\n        var targetEle = eve && eve.target;\n        isClearAll = (isClearAll || targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (index !== -1) {\n            var element_1 = this.findListElement(this.list, 'li', 'data-value', value);\n            var val_1 = this.getDataByValue(value);\n            var eventArgs = {\n                e: eve,\n                item: element_1,\n                itemData: val_1,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('removing', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    _this.removeIndex++;\n                }\n                else {\n                    var removeVal = _this.value.slice(0);\n                    removeVal.splice(index, 1);\n                    _this.setProperties({ value: [].concat([], removeVal) }, true);\n                    if (element_1 !== null) {\n                        var hideElement = _this.findListElement(_this.mainList, 'li', 'data-value', value);\n                        element_1.setAttribute('aria-selected', 'false');\n                        removeClass([element_1], className);\n                        if (hideElement) {\n                            hideElement.setAttribute('aria-selected', 'false');\n                            removeClass([element_1, hideElement], className);\n                        }\n                        _this.notify('activeList', {\n                            module: 'CheckBoxSelection',\n                            enable: _this.mode === 'CheckBox', li: element_1,\n                            e: _this, index: index\n                        });\n                        _this.invokeCheckboxSelection(element_1, eve, isClearAll);\n                    }\n                    if (_this.hideSelectedItem && _this.fields.groupBy && element_1) {\n                        _this.hideGroupItem(value);\n                    }\n                    if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox' &&\n                        _this.isPopupOpen()) {\n                        _super.prototype.scrollStop.call(_this);\n                    }\n                    _this.updateMainList(true, value);\n                    _this.removeChip(value);\n                    _this.updateChipStatus();\n                    var limit = _this.value && _this.value.length ? _this.value.length : 0;\n                    if (limit < _this.maximumSelectionLength) {\n                        var collection = _this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                    _this.trigger('removed', eventArgs);\n                    var targetEle_1 = eve && eve.currentTarget;\n                    var isSelectAll = (targetEle_1 && targetEle_1.classList.contains('e-selectall-parent')) ? true : null;\n                    if (!_this.changeOnBlur && !isClearAll && (eve && length && !isSelectAll)) {\n                        _this.updateValueState(eve, _this.value, _this.tempValues);\n                    }\n                    if (length) {\n                        _this.selectAllEventData.push(val_1);\n                        _this.selectAllEventEle.push(element_1);\n                    }\n                    if (length === 1) {\n                        if (!_this.changeOnBlur) {\n                            _this.updateValueState(eve, _this.value, _this.tempValues);\n                        }\n                        var args = {\n                            event: eve,\n                            items: _this.selectAllEventEle,\n                            itemData: _this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: false\n                        };\n                        _this.trigger('selectedAll', args);\n                        _this.selectAllEventData = [];\n                        _this.selectAllEventEle = [];\n                    }\n                    if (isClearAll && (length === 1 || length === null)) {\n                        _this.clearAllCallback(eve, isClearAll);\n                    }\n                }\n            });\n        }\n    };\n    MultiSelect.prototype.updateMainList = function (state, value, mainElement) {\n        if (this.allowFiltering || this.mode === 'CheckBox') {\n            var element2 = mainElement ? mainElement :\n                this.findListElement(this.mainList, 'li', 'data-value', value);\n            if (element2) {\n                if (state) {\n                    element2.setAttribute('aria-selected', 'false');\n                    removeClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n                else {\n                    element2.setAttribute('aria-selected', 'true');\n                    addClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        addClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.removeChip = function (value) {\n        if (this.chipCollectionWrapper) {\n            var element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n            if (element) {\n                remove(element);\n            }\n        }\n    };\n    MultiSelect.prototype.setWidth = function (width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.overAllWrapper.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.overAllWrapper.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    };\n    MultiSelect.prototype.updateChipStatus = function () {\n        if (this.value && this.value.length) {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                (this.chipCollectionWrapper.style.display = '');\n            }\n            if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n            this.showOverAllClear();\n        }\n        else {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                this.chipCollectionWrapper.style.display = 'none';\n            }\n            if (!isNullOrUndefined(this.delimiterWrapper)) {\n                (this.delimiterWrapper.style.display = 'none');\n            }\n            this.hideOverAllClear();\n        }\n    };\n    MultiSelect.prototype.addValue = function (value, text, eve) {\n        if (!this.value) {\n            this.value = [];\n        }\n        if (this.value.indexOf(value) < 0) {\n            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n        }\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.removeFocus();\n        if (element) {\n            this.addListFocus(element);\n            this.addListSelection(element);\n        }\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.addChip(text, value, eve);\n        }\n        if (this.hideSelectedItem && this.fields.groupBy) {\n            this.hideGroupItem(value);\n        }\n        this.updateChipStatus();\n        this.checkMaxSelection();\n    };\n    MultiSelect.prototype.checkMaxSelection = function () {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        if (limit === this.maximumSelectionLength) {\n            var collection = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ':not(.e-active)');\n            addClass(collection, 'e-disable');\n        }\n    };\n    MultiSelect.prototype.dispatchSelect = function (value, eve, element, isNotTrigger, length) {\n        var _this = this;\n        var list = this.listData;\n        if (this.initStatus && !isNotTrigger) {\n            var val_2 = this.getDataByValue(value);\n            var eventArgs = {\n                e: eve,\n                item: element,\n                itemData: val_2,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    if (length) {\n                        _this.selectAllEventData.push(val_2);\n                        _this.selectAllEventEle.push(element);\n                    }\n                    if (length === 1) {\n                        var args = {\n                            event: eve,\n                            items: _this.selectAllEventEle,\n                            itemData: _this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: true\n                        };\n                        _this.trigger('selectedAll', args);\n                        _this.selectAllEventData = [];\n                    }\n                    if (_this.allowCustomValue && _this.isServerRendered && _this.listData !== list) {\n                        _this.listData = list;\n                    }\n                    _this.updateListSelectEventCallback(value, element, eve);\n                    if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox') {\n                        _super.prototype.scrollStop.call(_this);\n                    }\n                }\n            });\n        }\n    };\n    MultiSelect.prototype.addChip = function (text, value, e) {\n        if (this.chipCollectionWrapper) {\n            this.getChip(text, value, e);\n        }\n    };\n    MultiSelect.prototype.removeChipFocus = function () {\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1 + '.' + CHIP_SELECTED);\n        removeClass(elements, CHIP_SELECTED);\n        if (Browser.isDevice) {\n            var closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n            for (var index = 0; index < closeElements.length; index++) {\n                closeElements[index].style.display = 'none';\n            }\n        }\n    };\n    MultiSelect.prototype.onMobileChipInteraction = function (e) {\n        var chipElem = closest(e.target, '.' + CHIP$1);\n        var chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n        if (this.enabled && !this.readonly) {\n            if (!chipElem.classList.contains(CHIP_SELECTED)) {\n                this.removeChipFocus();\n                chipClose.style.display = '';\n                chipElem.classList.add(CHIP_SELECTED);\n            }\n            this.refreshPopup();\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.multiCompiler = function (multiselectTemplate) {\n        var checkTemplate = false;\n        if (multiselectTemplate) {\n            try {\n                checkTemplate = (selectAll(multiselectTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    MultiSelect.prototype.getChip = function (data, value, e) {\n        var _this = this;\n        var itemData = { text: value, value: value };\n        var chip = this.createElement('span', {\n            className: CHIP$1,\n            attrs: { 'data-value': value, 'title': data }\n        });\n        var compiledString;\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT$1 });\n        var chipClose = this.createElement('span', { className: CHIP_CLOSE$1 });\n        if (this.mainData) {\n            itemData = this.getDataByValue(value);\n        }\n        if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n            var valuecheck = this.multiCompiler(this.valueTemplate);\n            if (valuecheck) {\n                compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(this.valueTemplate);\n            }\n            // eslint-disable-next-line\n            var valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n            if (valueCompTemp && valueCompTemp.length > 0) {\n                for (var i = 0; i < valueCompTemp.length; i++) {\n                    chipContent.appendChild(valueCompTemp[i]);\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else if (this.enableHtmlSanitizer) {\n            chipContent.innerText = data;\n        }\n        else {\n            chipContent.innerHTML = data;\n        }\n        chip.appendChild(chipContent);\n        var eventArgs = {\n            isInteracted: e ? true : false,\n            itemData: itemData,\n            e: e,\n            setClass: function (classes) {\n                addClass([chip], classes);\n            },\n            cancel: false\n        };\n        this.isPreventChange = this.isAngular && this.preventChange;\n        this.trigger('tagging', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                if (Browser.isDevice) {\n                    chip.classList.add(MOBILE_CHIP);\n                    append([chipClose], chip);\n                    chipClose.style.display = 'none';\n                    EventHandler.add(chip, 'click', _this.onMobileChipInteraction, _this);\n                }\n                else {\n                    EventHandler.add(chip, 'mousedown', _this.chipClick, _this);\n                    if (_this.showClearButton) {\n                        chip.appendChild(chipClose);\n                    }\n                }\n                EventHandler.add(chipClose, 'mousedown', _this.onChipRemove, _this);\n                _this.chipCollectionWrapper.appendChild(chip);\n                if (!_this.changeOnBlur && e) {\n                    _this.updateValueState(e, _this.value, _this.tempValues);\n                }\n            }\n        });\n    };\n    MultiSelect.prototype.calcPopupWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = (this.componentWrapper.offsetWidth) * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    MultiSelect.prototype.mouseIn = function () {\n        if (this.enabled && !this.readonly) {\n            this.showOverAllClear();\n        }\n    };\n    MultiSelect.prototype.mouseOut = function () {\n        if (!this.inputFocus) {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    MultiSelect.prototype.listOption = function (dataSource, fields) {\n        var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        var fieldProperty = isNullOrUndefined(fields.properties) ? fields :\n            fields.properties;\n        this.listCurrentOptions = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldProperty, showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n        if (this.mode === 'CheckBox') {\n            this.notify('listoption', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', dataSource: dataSource, fieldProperty: fieldProperty });\n        }\n        return this.listCurrentOptions;\n    };\n    MultiSelect.prototype.renderPopup = function () {\n        var _this = this;\n        if (!this.list) {\n            _super.prototype.render.call(this);\n        }\n        if (!this.popupObj) {\n            if (!isNullOrUndefined(this.popupWrapper)) {\n                document.body.appendChild(this.popupWrapper);\n                var checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n                if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n                    checkboxFilter.remove();\n                    this.filterParent = null;\n                }\n                var overAllHeight = parseInt(this.popupHeight, 10);\n                this.popupWrapper.style.visibility = 'hidden';\n                if (this.headerTemplate) {\n                    this.setHeaderTemplate();\n                    overAllHeight -= this.header.offsetHeight;\n                }\n                append([this.list], this.popupWrapper);\n                if (this.footerTemplate) {\n                    this.setFooterTemplate();\n                    overAllHeight -= this.footer.offsetHeight;\n                }\n                if (this.mode === 'CheckBox' && this.showSelectAll) {\n                    this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                    overAllHeight -= this.selectAllHeight;\n                }\n                else if (this.mode === 'CheckBox' && !this.showSelectAll && (!this.headerTemplate && !this.footerTemplate)) {\n                    this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                    overAllHeight = parseInt(this.popupHeight, 10);\n                }\n                else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n                    this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                    overAllHeight = parseInt(this.popupHeight, 10);\n                    if (this.headerTemplate && this.header) {\n                        overAllHeight -= this.header.offsetHeight;\n                    }\n                    if (this.footerTemplate && this.footer) {\n                        overAllHeight -= this.footer.offsetHeight;\n                    }\n                }\n                if (this.mode === 'CheckBox') {\n                    var args = {\n                        module: 'CheckBoxSelection',\n                        enable: this.mode === 'CheckBox',\n                        popupElement: this.popupWrapper\n                    };\n                    if (this.allowFiltering) {\n                        this.notify('searchBox', args);\n                        overAllHeight -= this.searchBoxHeight;\n                    }\n                    addClass([this.popupWrapper], 'e-checkbox');\n                }\n                if (this.popupHeight !== 'auto') {\n                    this.list.style.maxHeight = formatUnit(overAllHeight);\n                    this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n                }\n                else {\n                    this.list.style.maxHeight = formatUnit(this.popupHeight);\n                }\n                this.popupObj = new Popup(this.popupWrapper, {\n                    width: this.calcPopupWidth(), targetType: 'relative', position: { X: 'left', Y: 'bottom' },\n                    relateTo: this.overAllWrapper, collision: { X: 'flip', Y: 'flip' }, offsetY: 1,\n                    enableRtl: this.enableRtl, zIndex: this.zIndex,\n                    close: function () {\n                        if (_this.popupObj.element.parentElement) {\n                            _this.popupObj.unwireScrollEvents();\n                            // For restrict the page scrolling in safari browser\n                            var checkboxFilterInput = _this.popupWrapper.querySelector('.' + FILTERINPUT);\n                            if (_this.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n                                checkboxFilterInput.blur();\n                            }\n                            detach(_this.popupObj.element);\n                        }\n                    },\n                    open: function () {\n                        _this.popupObj.resolveCollision();\n                        if (!_this.isFirstClick) {\n                            var ulElement = _this.list.querySelector('ul');\n                            if (ulElement) {\n                                if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) &&\n                                    _this.targetElement().trim() !== '')) {\n                                    _this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                                }\n                            }\n                            _this.isFirstClick = true;\n                        }\n                        _this.popupObj.wireScrollEvents();\n                        if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) &&\n                            _this.targetElement().trim() !== '')) {\n                            _this.loadTemplate();\n                        }\n                        _this.setScrollPosition();\n                        if (_this.allowFiltering) {\n                            _this.notify('inputFocus', {\n                                module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox', value: 'focus'\n                            });\n                        }\n                    }, targetExitViewport: function () {\n                        if (!Browser.isDevice) {\n                            _this.hidePopup();\n                        }\n                    }\n                });\n                if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n                    this.notify('deviceSearchBox', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                }\n                this.popupObj.close();\n                this.popupWrapper.style.visibility = '';\n            }\n        }\n    };\n    MultiSelect.prototype.setHeaderTemplate = function () {\n        var compiledString;\n        if (this.header) {\n            this.header.remove();\n        }\n        this.header = this.createElement('div');\n        addClass([this.header], HEADER$1);\n        var headercheck = this.multiCompiler(this.headerTemplate);\n        if (headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line\n        var elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (elements && elements.length > 0) {\n            append(elements, this.header);\n        }\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            prepend([this.header], this.popupWrapper);\n        }\n        else {\n            append([this.header], this.popupWrapper);\n        }\n        EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n    };\n    MultiSelect.prototype.setFooterTemplate = function () {\n        var compiledString;\n        if (this.footer) {\n            this.footer.remove();\n        }\n        this.footer = this.createElement('div');\n        addClass([this.footer], FOOTER$1);\n        var footercheck = this.multiCompiler(this.footerTemplate);\n        if (footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line\n        var elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (elements && elements.length > 0) {\n            append(elements, this.footer);\n        }\n        append([this.footer], this.popupWrapper);\n        EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n    };\n    MultiSelect.prototype.clearAll = function (e) {\n        if (this.enabled && !this.readonly) {\n            var temp = void 0;\n            if (this.value && this.value.length > 0) {\n                var liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n                if (liElement && liElement.length > 0) {\n                    this.selectAllItems(false, e);\n                }\n                else {\n                    this.removeIndex = 0;\n                    for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n                        this.removeValue(temp, e, null, true);\n                    }\n                }\n                this.selectedElementID = null;\n                this.inputElement.removeAttribute('aria-activedescendant');\n            }\n            else {\n                this.clearAllCallback(e);\n            }\n        }\n    };\n    MultiSelect.prototype.clearAllCallback = function (e, isClearAll) {\n        var tempValues = this.value ? this.value.slice() : [];\n        if (this.mainList && this.listData && ((this.allowFiltering && this.mode !== 'CheckBox') || this.allowCustomValue)) {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n        }\n        this.focusAtFirstListItem();\n        this.updateDelimeter(this.delimiterChar, e);\n        if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n            this.updateDelimView();\n        }\n        if (this.inputElement.value !== '') {\n            this.makeTextBoxEmpty();\n            this.search(null);\n        }\n        this.checkPlaceholderSize();\n        if (this.isPopupOpen()) {\n            this.refreshPopup();\n        }\n        if (!this.inputFocus) {\n            if (this.changeOnBlur) {\n                this.updateValueState(e, this.value, tempValues);\n            }\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n        }\n        if (this.mode === 'CheckBox') {\n            this.refreshPlaceHolder();\n            this.refreshInputHight();\n            if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.updateValueState(e, this.value, this.tempValues);\n            }\n        }\n        if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n        }\n        e.preventDefault();\n    };\n    MultiSelect.prototype.windowResize = function () {\n        this.refreshPopup();\n        if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n            this.updateDelimView();\n        }\n    };\n    MultiSelect.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            var textVal = (this.element.tagName === this.getNgDirective()) ?\n                null : this.element.getAttribute('data-initial-value');\n            this.text = textVal;\n        }\n    };\n    MultiSelect.prototype.wireEvent = function () {\n        EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n        EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        if (this.mode !== 'CheckBox') {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n        }\n        EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n        EventHandler.add(this.componentWrapper, 'mouseover', this.mouseIn, this);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n        EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n        EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n    };\n    MultiSelect.prototype.onInput = function (e) {\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        // For Filtering works in mobile firefox\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.search(e);\n        }\n    };\n    MultiSelect.prototype.pasteHandler = function (event) {\n        var _this = this;\n        setTimeout(function () {\n            _this.expandTextbox();\n            _this.search(event);\n        });\n    };\n    MultiSelect.prototype.search = function (e) {\n        var _this = this;\n        this.resetFilteredData = true;\n        if (!isNullOrUndefined(e)) {\n            this.keyCode = e.keyCode;\n        }\n        if (!this.isPopupOpen() && this.openOnClick) {\n            this.showPopup(e);\n        }\n        this.openClick(e);\n        if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && (e.keyCode !== 8)) {\n            this.focusAtFirstListItem();\n        }\n        else {\n            var text = this.targetElement();\n            if (this.allowFiltering) {\n                var eventArgs_1 = {\n                    preventDefaultAction: false,\n                    text: this.targetElement(),\n                    updateData: function (dataSource, query, fields) {\n                        if (eventArgs_1.cancel) {\n                            return;\n                        }\n                        _this.isFiltered = true;\n                        _this.remoteFilterAction = true;\n                        _this.dataUpdater(dataSource, query, fields);\n                    },\n                    event: e,\n                    cancel: false\n                };\n                this.trigger('filtering', eventArgs_1, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        if (!_this.isFiltered && !eventArgs.preventDefaultAction) {\n                            _this.filterAction = true;\n                            _this.dataUpdater(_this.dataSource, null, _this.fields);\n                        }\n                    }\n                });\n            }\n            else if (this.allowCustomValue) {\n                var query = new Query();\n                query = (text !== '') ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n                this.dataUpdater(this.mainData, query, this.fields);\n            }\n            else {\n                var liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n                var activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n                if (activeElement && activeElement.item !== null) {\n                    this.addListFocus(activeElement.item);\n                    this.list.scrollTop =\n                        activeElement.item.offsetHeight * activeElement.index;\n                }\n                else if (this.targetElement() !== '') {\n                    this.removeFocus();\n                }\n                else {\n                    this.focusAtFirstListItem();\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.preRender = function () {\n        if (this.allowFiltering === null) {\n            this.allowFiltering = (this.mode === 'CheckBox') ? true : false;\n        }\n        this.initializeData();\n        this.updateDataAttribute(this.htmlAttributes);\n        _super.prototype.preRender.call(this);\n    };\n    MultiSelect.prototype.getLocaleName = function () {\n        return 'multi-select';\n    };\n    MultiSelect.prototype.initializeData = function () {\n        this.mainListCollection = [];\n        this.beforePopupOpen = false;\n        this.filterAction = false;\n        this.remoteFilterAction = false;\n        this.isFirstClick = false;\n        this.mobFilter = true;\n        this.isFiltered = false;\n        this.focused = true;\n        this.initial = true;\n        this.backCommand = true;\n    };\n    MultiSelect.prototype.updateData = function (delimiterChar, e) {\n        var data = '';\n        var delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n        var text = [];\n        var temp;\n        var tempData = this.listData;\n        this.listData = this.mainData;\n        if (!isNullOrUndefined(this.hiddenElement)) {\n            this.hiddenElement.innerHTML = '';\n        }\n        if (!isNullOrUndefined(this.value)) {\n            var valueLength = this.value.length;\n            var hiddenElementContent = '';\n            for (var index = 0; index < valueLength; index++) {\n                var valueItem = this.value[index];\n                var listValue = this.findListElement((!isNullOrUndefined(this.mainList) ? this.mainList : this.ulElement), 'li', 'data-value', valueItem);\n                if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n                    this.value.splice(index, 1);\n                    index -= 1;\n                    valueLength -= 1;\n                }\n                else {\n                    if (this.listData) {\n                        temp = this.getTextByValue(valueItem);\n                    }\n                    else {\n                        temp = valueItem;\n                    }\n                    data += temp + delimiterChar + ' ';\n                    text.push(temp);\n                }\n                hiddenElementContent += \"<option selected value=\\\"\" + valueItem + \"\\\">\" + index + \"</option>\";\n            }\n            if (!isNullOrUndefined(this.hiddenElement)) {\n                this.hiddenElement.innerHTML = hiddenElementContent;\n            }\n        }\n        this.setProperties({ text: text.toString() }, true);\n        if (delim) {\n            this.updateWrapperText(this.delimiterWrapper, data);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n        }\n        var targetEle = e && e.target;\n        var isClearAll = (targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        if (!this.changeOnBlur && ((e && !isClearAll)) || this.isSelectAll) {\n            this.isSelectAll = false;\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        this.listData = tempData;\n        this.addValidInputClass();\n    };\n    MultiSelect.prototype.initialTextUpdate = function () {\n        if (!isNullOrUndefined(this.text)) {\n            var textArr = this.text.split(this.delimiterChar);\n            var textVal = [];\n            for (var index = 0; textArr.length > index; index++) {\n                var val = this.getValueByText(textArr[index]);\n                if (!isNullOrUndefined(val)) {\n                    textVal.push(val);\n                }\n                else if (this.allowCustomValue) {\n                    textVal.push(textArr[index]);\n                }\n            }\n            if (textVal && textVal.length) {\n                this.setProperties({ value: textVal }, true);\n            }\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    };\n    MultiSelect.prototype.renderList = function (isEmptyData) {\n        if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate\n            || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n            isEmptyData = true;\n        }\n        _super.prototype.render.call(this, null, isEmptyData);\n        this.unwireListEvents();\n        this.wireListEvents();\n    };\n    MultiSelect.prototype.initialValueUpdate = function () {\n        if (this.list) {\n            var text = void 0;\n            var element = void 0;\n            var value = void 0;\n            if (this.chipCollectionWrapper) {\n                this.chipCollectionWrapper.innerHTML = '';\n            }\n            this.removeListSelection();\n            if (!isNullOrUndefined(this.value)) {\n                for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    value = this.value[index];\n                    element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                    text = this.getTextByValue(value);\n                    if ((element && (element.getAttribute('aria-selected') !== 'true')) ||\n                        (element && (element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem) &&\n                            (this.mode === 'Box' || this.mode === 'Default'))) {\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                    else if (value && this.allowCustomValue) {\n                        var indexItem = this.listData.length;\n                        var newValue = {};\n                        setValue(this.fields.text, value, newValue);\n                        setValue(this.fields.value, value, newValue);\n                        var noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n                        this.addItem(newValue, indexItem);\n                        element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                        if (this.popupWrapper.contains(noDataEle)) {\n                            this.list.setAttribute('style', noDataEle.getAttribute('style'));\n                            this.popupWrapper.replaceChild(this.list, noDataEle);\n                            this.wireListEvents();\n                        }\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                }\n            }\n            if (this.mode === 'CheckBox') {\n                this.updateDelimView();\n                if (this.changeOnBlur) {\n                    this.updateValueState(null, this.value, this.tempValues);\n                }\n                this.updateDelimeter(this.delimiterChar);\n                this.refreshInputHight();\n            }\n            else {\n                this.updateDelimeter(this.delimiterChar);\n            }\n            if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n                this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n            }\n            if (this.mode === 'Box' || (this.mode === 'Default' && this.inputFocus)) {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateActionCompleteData = function (li, item) {\n        if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n            this.mainList = this.ulElement;\n            if (this.hideSelectedItem) {\n                addClass([li], HIDE_LIST);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateAddItemList = function (list, itemCount) {\n        if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n            remove(this.popupWrapper.querySelector('.e-content'));\n            this.popupObj = null;\n            this.renderPopup();\n        }\n        else if (this.allowCustomValue) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n        }\n    };\n    MultiSelect.prototype.updateDataList = function () {\n        if (this.mainList && this.ulElement && !(this.isFiltered || this.filterAction || this.targetElement().trim())) {\n            var isDynamicGroupItemUpdate = this.mainList.childElementCount < this.ulElement.childElementCount;\n            var isReactTemplateUpdate = ((this.ulElement.childElementCount > 0 && this.ulElement.children[0].childElementCount > 0) && (this.mainList.children[0].childElementCount < this.ulElement.children[0].childElementCount));\n            var isAngularTemplateUpdate = this.itemTemplate && this.ulElement.childElementCount > 0 && !(this.ulElement.childElementCount < this.mainList.childElementCount) && (this.ulElement.children[0].childElementCount > 0 || (this.fields.groupBy && this.ulElement.children[1] && this.ulElement.children[1].childElementCount > 0));\n            if (isDynamicGroupItemUpdate || isReactTemplateUpdate || isAngularTemplateUpdate) {\n                //EJ2-57748 - for this task, we prevent the ul element cloning ( this.mainList = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n                this.mainList = this.ulElement;\n            }\n        }\n    };\n    MultiSelect.prototype.isValidLI = function (li) {\n        return (li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) &&\n            li.classList.contains(dropDownBaseClasses.li));\n    };\n    MultiSelect.prototype.updateListSelection = function (li, e, length) {\n        var customVal = li.getAttribute('data-value');\n        var value = this.getFormattedValue(customVal);\n        if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n            (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n            value = customVal;\n        }\n        this.removeHover();\n        if (!this.value || this.value.indexOf(value) === -1) {\n            this.dispatchSelect(value, e, li, (li.getAttribute('aria-selected') === 'true'), length);\n        }\n        else {\n            this.removeValue(value, e, length);\n        }\n    };\n    MultiSelect.prototype.updateListSelectEventCallback = function (value, li, e) {\n        var _this = this;\n        var text = this.getTextByValue(value);\n        if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n            var temp_1 = li.cloneNode(true);\n            var fieldValue = this.fields.value ? this.fields.value : 'value';\n            if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n                value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n            }\n            var data_1 = this.getDataByValue(value);\n            var eventArgs = {\n                newData: data_1,\n                cancel: false\n            };\n            this.trigger('customValueSelection', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    append([temp_1], _this.mainList);\n                    _this.mainData.push(data_1);\n                    _this.remoteCustomValue = false;\n                    _this.addValue(value, text, e);\n                }\n            });\n        }\n        else {\n            this.remoteCustomValue = false;\n            this.addValue(value, text, e);\n        }\n    };\n    MultiSelect.prototype.removeListSelection = function () {\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        var selectedItems = this.list.querySelectorAll('.' + className);\n        var temp = selectedItems.length;\n        if (selectedItems && selectedItems.length) {\n            removeClass(selectedItems, className);\n            while (temp > 0) {\n                selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n                temp--;\n            }\n        }\n        if (!isNullOrUndefined(this.mainList)) {\n            var selectItems = this.mainList.querySelectorAll('.' + className);\n            var temp1 = selectItems.length;\n            if (selectItems && selectItems.length) {\n                removeClass(selectItems, className);\n                while (temp1 > 0) {\n                    selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n                    if (this.mode === 'CheckBox') {\n                        if (selectedItems && (selectedItems.length > (temp1 - 1))) {\n                            removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                        }\n                        removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                    }\n                    temp1--;\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.removeHover = function () {\n        var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n        if (hoveredItem && hoveredItem.length) {\n            removeClass(hoveredItem, dropDownBaseClasses.hover);\n        }\n    };\n    MultiSelect.prototype.removeFocus = function () {\n        if (this.list && this.mainList) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n            var mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.focus);\n                removeClass(mainlist, dropDownBaseClasses.focus);\n            }\n        }\n    };\n    MultiSelect.prototype.addListHover = function (li) {\n        if (this.enabled && this.isValidLI(li)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n        else {\n            if ((li !== null && li.classList.contains('e-list-group-item')) && this.enableGroupCheckBox && this.mode === 'CheckBox'\n                && !isNullOrUndefined(this.fields.groupBy)) {\n                this.removeHover();\n                addClass([li], dropDownBaseClasses.hover);\n            }\n        }\n    };\n    MultiSelect.prototype.addListFocus = function (element) {\n        if (this.enabled && this.isValidLI(element)) {\n            this.removeFocus();\n            addClass([element], dropDownBaseClasses.focus);\n            this.updateAriaActiveDescendant();\n        }\n        else {\n            if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n                addClass([element], dropDownBaseClasses.focus);\n                this.updateAriaActiveDescendant();\n            }\n        }\n    };\n    MultiSelect.prototype.addListSelection = function (element, mainElement) {\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n            addClass([element], className);\n            this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n            element.setAttribute('aria-selected', 'true');\n            if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n                var ariaCheck = element.getElementsByClassName('e-check').length;\n                if (ariaCheck === 0) {\n                    this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n                }\n            }\n            this.notify('activeList', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n            if (this.chipCollectionWrapper) {\n                this.removeChipSelection();\n            }\n            this.selectedElementID = element.id;\n        }\n    };\n    MultiSelect.prototype.updateDelimeter = function (delimChar, e) {\n        this.updateData(delimChar, e);\n    };\n    MultiSelect.prototype.onMouseClick = function (e) {\n        var _this = this;\n        this.keyCode = null;\n        this.scrollFocusStatus = false;\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        var headerLi = closest(target, '.' + dropDownBaseClasses.group);\n        if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n            target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild\n                : e.target;\n            if (target.classList.contains('e-check')) {\n                this.selectAllItem(false, e);\n                target.classList.remove('e-check');\n                target.classList.remove('e-stop');\n                closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n                target.setAttribute('aria-selected', 'false');\n            }\n            else {\n                this.selectAllItem(true, e);\n                target.classList.remove('e-stop');\n                target.classList.add('e-check');\n                closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n                target.setAttribute('aria-selected', 'true');\n            }\n            this.refreshSelection();\n            this.checkSelectAll();\n        }\n        else {\n            if (this.isValidLI(li)) {\n                var limit = this.value && this.value.length ? this.value.length : 0;\n                if (li.classList.contains('e-active')) {\n                    limit = limit - 1;\n                }\n                if (limit < this.maximumSelectionLength) {\n                    this.updateListSelection(li, e);\n                    this.checkPlaceholderSize();\n                    this.addListFocus(li);\n                    if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n                        if (this.mode !== 'CheckBox') {\n                            this.focusAtLastListItem(li.getAttribute('data-value'));\n                            this.refreshSelection();\n                        }\n                    }\n                    else {\n                        this.makeTextBoxEmpty();\n                    }\n                }\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    if (this.value && this.value.length > 50) {\n                        setTimeout(function () {\n                            _this.updateDelimeter(_this.delimiterChar, e);\n                        }, 0);\n                    }\n                    else {\n                        this.updateDelimeter(this.delimiterChar, e);\n                    }\n                    this.refreshInputHight();\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.checkSelectAll();\n                this.refreshPopup();\n                if (this.hideSelectedItem) {\n                    this.focusAtFirstListItem();\n                }\n                if (this.closePopupOnSelect) {\n                    this.hidePopup(e);\n                }\n                else {\n                    e.preventDefault();\n                }\n                this.makeTextBoxEmpty();\n                this.findGroupStart(target);\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n                }\n            }\n            else {\n                e.preventDefault();\n            }\n            this.refreshPlaceHolder();\n            this.deselectHeader();\n        }\n    };\n    MultiSelect.prototype.findGroupStart = function (target) {\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            var count = 0;\n            var liChecked = 0;\n            var liUnchecked = 0;\n            var groupValues = void 0;\n            if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n                while (!target.getElementsByClassName('e-frame').length) {\n                    target = target.parentElement;\n                }\n            }\n            if (target.classList.contains('e-frame')) {\n                target = target.parentElement.parentElement;\n            }\n            groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n            groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n            while (!target.classList.contains('e-list-group-item')) {\n                if (target.classList.contains('e-list-icon')) {\n                    target = target.parentElement;\n                }\n                target = target.previousElementSibling;\n                if (target == null) {\n                    break;\n                }\n            }\n            this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n        }\n    };\n    MultiSelect.prototype.findGroupAttrtibutes = function (listElement, checked, unChecked, count, position) {\n        while (!listElement.classList.contains('e-list-group-item')) {\n            if (listElement.classList.contains('e-list-icon')) {\n                listElement = listElement.parentElement;\n            }\n            if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') &&\n                listElement.classList.contains('e-list-item')) {\n                checked++;\n            }\n            else if (listElement.classList.contains('e-list-item')) {\n                unChecked++;\n            }\n            count++;\n            listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n            if (listElement == null) {\n                break;\n            }\n        }\n        return [checked, unChecked, count];\n    };\n    MultiSelect.prototype.updateCheckBox = function (groupHeader, checked, unChecked, count) {\n        if (groupHeader === null) {\n            return;\n        }\n        var checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n        if (count === checked) {\n            checkBoxElement.classList.remove('e-stop');\n            checkBoxElement.classList.add('e-check');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'true');\n        }\n        else if (count === unChecked) {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.remove('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n        else if (this.maximumSelectionLength === checked - 1) {\n            checkBoxElement.classList.remove('e-stop');\n            groupHeader.setAttribute('aria-selected', 'true');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            checkBoxElement.classList.add('e-check');\n        }\n        else {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.add('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n    };\n    MultiSelect.prototype.deselectHeader = function () {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        var collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n        if (limit < this.maximumSelectionLength) {\n            removeClass(collection, 'e-disable');\n        }\n        if (limit === this.maximumSelectionLength) {\n            addClass(collection, 'e-disable');\n        }\n    };\n    MultiSelect.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)\n            && this.enableGroupCheckBox) {\n            currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n        }\n        this.addListHover(currentLi);\n    };\n    MultiSelect.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    MultiSelect.prototype.onListMouseDown = function (e) {\n        e.preventDefault();\n        this.scrollFocusStatus = true;\n    };\n    MultiSelect.prototype.onDocumentClick = function (e) {\n        if (this.mode !== 'CheckBox') {\n            var target = e.target;\n            if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) &&\n                !this.overAllWrapper.contains(e.target)) {\n                this.scrollFocusStatus = false;\n            }\n            else {\n                this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.inputElement);\n            }\n        }\n    };\n    MultiSelect.prototype.wireListEvents = function () {\n        if (!isNullOrUndefined(this.list)) {\n            EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n            EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n            EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n            EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n            EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n        }\n    };\n    MultiSelect.prototype.unwireListEvents = function () {\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        if (this.list) {\n            EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n            EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n            EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n            EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n        }\n    };\n    MultiSelect.prototype.hideOverAllClear = function () {\n        if (!this.value || !this.value.length || this.inputElement.value === '') {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    MultiSelect.prototype.showOverAllClear = function () {\n        if (((this.value && this.value.length) || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n            this.overAllClear.style.display = '';\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    /**\n     * Sets the focus to widget for interaction.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.focusIn = function () {\n        if (document.activeElement !== this.inputElement && this.enabled) {\n            this.inputElement.focus();\n        }\n    };\n    /**\n     * Remove the focus from widget, if the widget is in focus state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.focusOut = function () {\n        if (document.activeElement === this.inputElement && this.enabled) {\n            this.inputElement.blur();\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            var filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n            if (this.overAllClear.style.display !== 'none' || filterClear) {\n                this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n            }\n            else {\n                this.spinnerElement = this.createElement('span', { className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1 });\n                this.componentWrapper.appendChild(this.spinnerElement);\n            }\n            createSpinner({ target: this.spinnerElement, width: Browser.isDevice ? '16px' : '14px' }, this.createElement);\n            addClass([this.spinnerElement], DISABLE_ICON);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], DISABLE_ICON);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    };\n    MultiSelect.prototype.updateWrapperText = function (wrapperType, wrapperData) {\n        if (this.valueTemplate || !this.enableHtmlSanitizer) {\n            wrapperType.innerHTML = wrapperData;\n        }\n        else {\n            wrapperType.innerText = SanitizeHtmlHelper.sanitize(wrapperData);\n        }\n    };\n    MultiSelect.prototype.updateDelimView = function () {\n        if (this.delimiterWrapper) {\n            this.hideDelimWrapper();\n        }\n        if (this.chipCollectionWrapper) {\n            this.chipCollectionWrapper.style.display = 'none';\n        }\n        if (!isNullOrUndefined(this.viewWrapper)) {\n            this.viewWrapper.style.display = '';\n            this.viewWrapper.style.width = '';\n            this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        }\n        if (this.value && this.value.length) {\n            var data = '';\n            var temp = void 0;\n            var tempData = void 0;\n            var tempIndex = 1;\n            var wrapperleng = void 0;\n            var remaining = void 0;\n            var downIconWidth = 0;\n            var overAllContainer = void 0;\n            this.updateWrapperText(this.viewWrapper, data);\n            var l10nLocale = {\n                noRecordsTemplate: 'No records found',\n                actionFailureTemplate: 'Request failed',\n                overflowCountTemplate: '+${count} more..',\n                totalCountTemplate: '${count} selected'\n            };\n            var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            if (l10n.getConstant('actionFailureTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            if (l10n.getConstant('noRecordsTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            var remainContent = l10n.getConstant('overflowCountTemplate');\n            var totalContent = l10n.getConstant('totalCountTemplate');\n            var raminElement = this.createElement('span', {\n                className: REMAIN_WRAPPER$1\n            });\n            var remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n            raminElement.innerText = remainCompildTemp;\n            this.viewWrapper.appendChild(raminElement);\n            this.renderReactTemplates();\n            var remainSize = raminElement.offsetWidth;\n            remove(raminElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            }\n            this.checkClearIconWidth();\n            if (!isNullOrUndefined(this.value)) {\n                for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    data += (index === 0) ? '' : this.delimiterChar + ' ';\n                    temp = this.getOverflowVal(index);\n                    data += temp;\n                    temp = this.viewWrapper.innerHTML;\n                    this.updateWrapperText(this.viewWrapper, data);\n                    wrapperleng = this.viewWrapper.offsetWidth +\n                        parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                    overAllContainer = this.componentWrapper.offsetWidth -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n                    if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                        if (tempData !== undefined && tempData !== '') {\n                            temp = tempData;\n                            index = tempIndex + 1;\n                        }\n                        this.updateWrapperText(this.viewWrapper, temp);\n                        remaining = this.value.length - index;\n                        wrapperleng = this.viewWrapper.offsetWidth +\n                            parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) > overAllContainer) && wrapperleng !== 0\n                            && this.viewWrapper.innerHTML !== '') {\n                            var textArr = [];\n                            this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n                            remaining = this.value.length;\n                            wrapperleng = this.viewWrapper.offsetWidth +\n                                parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        }\n                        break;\n                    }\n                    else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                        tempData = data;\n                        tempIndex = index;\n                    }\n                    else if (index === 0) {\n                        tempData = '';\n                        tempIndex = -1;\n                    }\n                }\n            }\n            if (remaining > 0) {\n                var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n                this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n                this.updateRemainWidth(this.viewWrapper, totalWidth);\n                this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(this.viewWrapper)) {\n                this.viewWrapper.innerHTML = '';\n                this.viewWrapper.style.display = 'none';\n            }\n        }\n    };\n    MultiSelect.prototype.checkClearIconWidth = function () {\n        if (this.showClearButton) {\n            this.clearIconWidth = this.overAllClear.offsetWidth;\n        }\n    };\n    MultiSelect.prototype.updateRemainWidth = function (viewWrapper, totalWidth) {\n        if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < (viewWrapper.offsetWidth +\n            parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)\n            + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10))) {\n            viewWrapper.style.width = totalWidth + 'px';\n        }\n    };\n    MultiSelect.prototype.updateRemainTemplate = function (raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n            viewWrapper.removeChild(viewWrapper.firstChild);\n        }\n        raminElement.innerHTML = '';\n        var remainTemp = remainContent.replace('${count}', remaining.toString());\n        var totalTemp = totalContent.replace('${count}', remaining.toString());\n        raminElement.innerText = (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) ? remainTemp : totalTemp;\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n            viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        }\n        else {\n            viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n            this.updateRemainWidth(viewWrapper, totalWidth);\n        }\n        return raminElement;\n    };\n    MultiSelect.prototype.updateRemainingText = function (raminElement, downIconWidth, remaining, remainContent, totalContent) {\n        var overAllContainer = this.componentWrapper.offsetWidth -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n        var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n        if (((wrapperleng + downIconWidth) >= overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n            this.viewWrapper.firstChild.nodeType === 3) {\n            while (((wrapperleng + downIconWidth) > overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n                this.viewWrapper.firstChild.nodeType === 3) {\n                var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n                textArr.pop();\n                this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n                if (this.viewWrapper.firstChild.nodeValue === '') {\n                    this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n                }\n                remaining++;\n                wrapperleng = this.viewWrapper.offsetWidth;\n            }\n            var totalWidth = overAllContainer - downIconWidth;\n            this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n        }\n    };\n    MultiSelect.prototype.getOverflowVal = function (index) {\n        var temp;\n        if (this.mainData && this.mainData.length) {\n            if (this.mode === 'CheckBox') {\n                var newTemp = this.listData;\n                this.listData = this.mainData;\n                temp = this.getTextByValue(this.value[index]);\n                this.listData = newTemp;\n            }\n            else {\n                temp = this.getTextByValue(this.value[index]);\n            }\n        }\n        else {\n            temp = this.value[index];\n        }\n        return temp;\n    };\n    MultiSelect.prototype.unWireEvent = function () {\n        if (!isNullOrUndefined(this.componentWrapper)) {\n            EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n        }\n        EventHandler.remove(window, 'resize', this.windowResize);\n        if (!isNullOrUndefined(this.inputElement)) {\n            EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n            EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n            if (this.mode !== 'CheckBox') {\n                EventHandler.remove(this.inputElement, 'input', this.onInput);\n            }\n            EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n            var formElement = closest(this.inputElement, 'form');\n            if (formElement) {\n                EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n            }\n            EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n        }\n        if (!isNullOrUndefined(this.componentWrapper)) {\n            EventHandler.remove(this.componentWrapper, 'mouseover', this.mouseIn);\n            EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n        }\n        if (!isNullOrUndefined(this.overAllClear)) {\n            EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        }\n        if (!isNullOrUndefined(this.inputElement)) {\n            EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n        }\n    };\n    MultiSelect.prototype.selectAllItem = function (state, event, list) {\n        var li;\n        if (!isNullOrUndefined(this.list)) {\n            li = this.list.querySelectorAll(state ?\n                'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        }\n        if (this.value && this.value.length && event && event.target\n            && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n            li = this.mainList.querySelectorAll(state ?\n                'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        }\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            var target = (event ? (this.groupTemplate ? closest(event.target, '.e-list-group-item') : event.target) : null);\n            target = (event && event.keyCode === 32) ? list : target;\n            target = (target && target.classList.contains('e-frame')) ? target.parentElement.parentElement : target;\n            if (target && target.classList.contains('e-list-group-item')) {\n                var listElement = target.nextElementSibling;\n                if (isNullOrUndefined(listElement)) {\n                    return;\n                }\n                while (listElement.classList.contains('e-list-item')) {\n                    if (state) {\n                        if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            var selectionLimit = this.value && this.value.length ? this.value.length : 0;\n                            if (listElement.classList.contains('e-active')) {\n                                selectionLimit -= 1;\n                            }\n                            if (selectionLimit < this.maximumSelectionLength) {\n                                this.updateListSelection(listElement, event);\n                            }\n                        }\n                    }\n                    else {\n                        if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            this.updateListSelection(listElement, event);\n                        }\n                    }\n                    listElement = listElement.nextElementSibling;\n                    if (listElement == null) {\n                        break;\n                    }\n                }\n                if (target.classList.contains('e-list-group-item')) {\n                    var focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n                    if (focusedElement) {\n                        focusedElement.classList.remove('e-item-focus');\n                    }\n                    if (state) {\n                        target.classList.add('e-active');\n                    }\n                    else {\n                        target.classList.remove('e-active');\n                    }\n                    target.classList.add('e-item-focus');\n                    this.updateAriaActiveDescendant();\n                }\n                this.textboxValueUpdate();\n                this.checkPlaceholderSize();\n                if (!this.changeOnBlur && event) {\n                    this.updateValueState(event, this.value, this.tempValues);\n                }\n            }\n            else {\n                this.updateValue(event, li, state);\n            }\n        }\n        else {\n            this.updateValue(event, li, state);\n        }\n        this.addValidInputClass();\n    };\n    MultiSelect.prototype.updateValue = function (event, li, state) {\n        var _this = this;\n        var length = li.length;\n        var beforeSelectArgs = {\n            event: event,\n            items: state ? li : [],\n            itemData: state ? this.listData : [],\n            isInteracted: event ? true : false,\n            isChecked: state,\n            preventSelectEvent: false\n        };\n        this.trigger('beforeSelectAll', beforeSelectArgs);\n        if (li && li.length) {\n            var index_1 = 0;\n            var count_1 = 0;\n            if (this.enableGroupCheckBox) {\n                count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n            }\n            else {\n                count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n            }\n            if (!beforeSelectArgs.preventSelectEvent) {\n                while (index_1 < length && index_1 <= 50 && index_1 < count_1) {\n                    this.updateListSelection(li[index_1], event, length - index_1);\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[index_1]);\n                    }\n                    index_1++;\n                }\n                if (length > 50) {\n                    setTimeout(function () {\n                        while (index_1 < length && index_1 < count_1) {\n                            _this.updateListSelection(li[index_1], event, length - index_1);\n                            if (_this.enableGroupCheckBox) {\n                                _this.findGroupStart(li[index_1]);\n                            }\n                            index_1++;\n                        }\n                        _this.updatedataValueItems(event);\n                        if (!_this.changeOnBlur) {\n                            _this.updateValueState(event, _this.value, _this.tempValues);\n                            _this.isSelectAll = _this.isSelectAll ? !_this.isSelectAll : _this.isSelectAll;\n                        }\n                        _this.updateHiddenElement();\n                    }, 0);\n                }\n            }\n            else {\n                for (var i = 0; i < li.length && i < count_1; i++) {\n                    this.removeHover();\n                    var customVal = li[i].getAttribute('data-value');\n                    var value = this.getFormattedValue(customVal);\n                    var mainElement = this.mainList ? this.mainList.querySelectorAll(state ?\n                        'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                        'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n                    if (state) {\n                        this.value = !this.value ? [] : this.value;\n                        if (this.value.indexOf(value) < 0) {\n                            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n                        }\n                        this.removeFocus();\n                        this.addListSelection(li[i], mainElement);\n                        this.updateChipStatus();\n                        this.checkMaxSelection();\n                    }\n                    else {\n                        this.removeAllItems(value, event, false, li[i], mainElement);\n                    }\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[i]);\n                    }\n                }\n                if (!state) {\n                    var limit = this.value && this.value.length ? this.value.length : 0;\n                    if (limit < this.maximumSelectionLength) {\n                        var collection = this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                }\n                var args = {\n                    event: event,\n                    items: state ? li : [],\n                    itemData: state ? this.listData : [],\n                    isInteracted: event ? true : false,\n                    isChecked: state\n                };\n                this.trigger('selectedAll', args);\n            }\n        }\n        this.updatedataValueItems(event);\n        this.checkPlaceholderSize();\n        if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n            if (!this.changeOnBlur) {\n                this.updateValueState(event, this.value, this.tempValues);\n                this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n            }\n            this.updateHiddenElement();\n        }\n    };\n    MultiSelect.prototype.updateHiddenElement = function () {\n        var _this = this;\n        var hiddenValue = '';\n        var wrapperText = '';\n        var data = '';\n        var text = [];\n        if (this.mode === 'CheckBox') {\n            this.value.map(function (value, index) {\n                hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n                if (_this.listData) {\n                    data = _this.getTextByValue(value);\n                }\n                else {\n                    data = value;\n                }\n                wrapperText += data + _this.delimiterChar + ' ';\n                text.push(data);\n            });\n            this.hiddenElement.innerHTML = hiddenValue;\n            this.updateWrapperText(this.delimiterWrapper, wrapperText);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-describedby', this.delimiterWrapper.id);\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n            this.setProperties({ text: text.toString() }, true);\n            this.refreshInputHight();\n            this.refreshPlaceHolder();\n        }\n    };\n    MultiSelect.prototype.updatedataValueItems = function (event) {\n        this.deselectHeader();\n        this.textboxValueUpdate(event);\n    };\n    MultiSelect.prototype.textboxValueUpdate = function (event) {\n        var isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent')\n            || closest(event.target, '.e-close-hooker'));\n        if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n            this.updateDelimView();\n        }\n        else {\n            this.searchWrapper.classList.remove(ZERO_SIZE);\n        }\n        if (this.mode === 'CheckBox') {\n            this.updateDelimView();\n            if (!(isRemoveAll || this.isSelectAll)) {\n                this.updateDelimeter(this.delimiterChar, event);\n            }\n            this.refreshInputHight();\n        }\n        else {\n            this.updateDelimeter(this.delimiterChar, event);\n        }\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.setZIndex = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateDataSource = function (prop) {\n        if (isNullOrUndefined(this.list)) {\n            this.renderPopup();\n        }\n        else {\n            this.resetList(this.dataSource);\n        }\n        if (this.value && this.value.length) {\n            this.setProperties({ 'value': this.value });\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.onLoadSelect = function () {\n        this.setDynValue = true;\n        this.renderPopup();\n    };\n    MultiSelect.prototype.selectAllItems = function (state, event) {\n        var _this = this;\n        if (isNullOrUndefined(this.list)) {\n            this.selectAllAction = function () {\n                if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n                    var args = {\n                        module: 'CheckBoxSelection',\n                        enable: _this.mode === 'CheckBox',\n                        value: state ? 'check' : 'uncheck'\n                    };\n                    _this.notify('checkSelectAll', args);\n                }\n                _this.selectAllItem(state, event);\n                _this.selectAllAction = null;\n            };\n            _super.prototype.render.call(this);\n        }\n        else {\n            this.selectAllAction = null;\n            if (this.mode === 'CheckBox' && this.showSelectAll) {\n                var args = {\n                    value: state ? 'check' : 'uncheck',\n                    enable: this.mode === 'CheckBox',\n                    module: 'CheckBoxSelection'\n                };\n                this.notify('checkSelectAll', args);\n            }\n            this.selectAllItem(state, event);\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    MultiSelect.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n     * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    MultiSelect.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))\n            || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            if (this.resetFilteredData) {\n                // The filtered data is not being reset in the component after the user focuses out.\n                this.resetMainList = !this.resetMainList ? this.mainList : this.resetMainList;\n                this.resetFilteredData = false;\n            }\n            this.mainList = null;\n            this.mainData = null;\n            this.isFirstClick = false;\n            this.isDynamicDataChange = true;\n        }\n        if (this.getModuleName() === 'multiselect') {\n            this.filterAction = false;\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'query':\n                case 'dataSource':\n                    if (this.mode === 'CheckBox' && this.showSelectAll) {\n                        if (!isNullOrUndefined(this.popupObj)) {\n                            this.popupObj.destroy();\n                            this.popupObj = null;\n                        }\n                        this.renderPopup();\n                    }\n                    break;\n                case 'htmlAttributes':\n                    this.updateHTMLAttribute();\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'text':\n                    this.updateVal(this.value, this.value, 'text');\n                    break;\n                case 'value':\n                    this.updateVal(this.value, oldProp.value, 'value');\n                    this.addValidInputClass();\n                    if (!this.closePopupOnSelect && this.isPopupOpen()) {\n                        this.refreshPopup();\n                    }\n                    this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n                    break;\n                case 'width':\n                    this.setWidth(newProp.width);\n                    this.popupObj.setProperties({ width: this.calcPopupWidth() });\n                    break;\n                case 'placeholder':\n                    this.refreshPlaceHolder();\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        this.notify('filterBarPlaceholder', { filterBarPlaceholder: newProp.filterBarPlaceholder });\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode !== 'Box') {\n                        this.updateDelimView();\n                    }\n                    this.updateData(newProp.delimiterChar);\n                    break;\n                case 'cssClass':\n                    this.updateOldPropCssClass(oldProp.cssClass);\n                    this.updateCssClass();\n                    this.calculateWidth();\n                    break;\n                case 'enableRtl':\n                    this.enableRTL(newProp.enableRtl);\n                    _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n                    break;\n                case 'readonly':\n                    this.updateReadonly(newProp.readonly);\n                    this.hidePopup();\n                    break;\n                case 'enabled':\n                    this.hidePopup();\n                    this.enable(newProp.enabled);\n                    break;\n                case 'showSelectAll':\n                    if (this.popupObj) {\n                        this.popupObj.destroy();\n                        this.popupObj = null;\n                    }\n                    this.renderPopup();\n                    break;\n                case 'showDropDownIcon':\n                    this.dropDownIcon();\n                    break;\n                case 'floatLabelType':\n                    this.setFloatLabelType();\n                    this.addValidInputClass();\n                    Input.createSpanElement(this.overAllWrapper, this.createElement);\n                    this.calculateWidth();\n                    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n                        this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n                    }\n                    break;\n                case 'enableSelectionOrder':\n                    break;\n                case 'selectAllText':\n                    this.notify('selectAllText', false);\n                    break;\n                case 'popupHeight':\n                    if (this.popupObj) {\n                        var overAllHeight = parseInt(this.popupHeight, 10);\n                        if (this.popupHeight !== 'auto') {\n                            this.list.style.maxHeight = formatUnit(overAllHeight);\n                            this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n                        }\n                        else {\n                            this.list.style.maxHeight = formatUnit(this.popupHeight);\n                        }\n                    }\n                    break;\n                case 'headerTemplate':\n                case 'footerTemplate':\n                    this.reInitializePoup();\n                    break;\n                case 'allowFiltering':\n                    if (this.mode === 'CheckBox' && this.popupObj) {\n                        this.reInitializePoup();\n                    }\n                    this.updateSelectElementData(this.allowFiltering);\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        var msProps = this.getPropObject(prop, newProp, oldProp);\n                        _super.prototype.onPropertyChanged.call(this, msProps.newProperty, msProps.oldProperty);\n                    }\n                    break;\n            }\n        }\n    };\n    MultiSelect.prototype.reInitializePoup = function () {\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n        }\n        this.renderPopup();\n    };\n    MultiSelect.prototype.presentItemValue = function (ulElement) {\n        var valuecheck = [];\n        for (var i = 0; i < this.value.length; i++) {\n            var checkEle = this.findListElement(((this.allowFiltering && !isNullOrUndefined(this.mainList)) ? this.mainList : ulElement), 'li', 'data-value', this.value[i]);\n            if (!checkEle) {\n                valuecheck.push(this.value[i]);\n            }\n        }\n        return valuecheck;\n    };\n    \n    MultiSelect.prototype.addNonPresentItems = function (valuecheck, ulElement, list, event) {\n        var _this = this;\n        this.dataSource.executeQuery(this.getForQuery(valuecheck)).then(function (e) {\n            if (e.result.length > 0) {\n                _this.addItem(e.result, list.length);\n            }\n            _this.updateActionList(ulElement, list, event);\n        });\n    };\n    \n    MultiSelect.prototype.updateVal = function (newProp, oldProp, prop) {\n        if (!this.list) {\n            this.onLoadSelect();\n        }\n        else if ((this.dataSource instanceof DataManager) && (!this.listData || !(this.mainList && this.mainData))) {\n            this.onLoadSelect();\n        }\n        else {\n            var valuecheck = [];\n            if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n                valuecheck = this.presentItemValue(this.ulElement);\n            }\n            if (prop == 'value' && valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value)\n                && this.listData != null) {\n                this.mainData = null;\n                this.setDynValue = true;\n                this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n            }\n            else {\n                if (prop === 'text') {\n                    this.initialTextUpdate();\n                    newProp = this.value;\n                }\n                if (isNullOrUndefined(this.value) || this.value.length === 0) {\n                    this.tempValues = oldProp;\n                }\n                // eslint-disable-next-line\n                if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus\n                    && this.isPopupOpen() && this.mainData !== this.listData) {\n                    var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                    this.onActionComplete(list, this.mainData);\n                }\n                this.initialValueUpdate();\n                if (this.mode !== 'Box' && !this.inputFocus) {\n                    this.updateDelimView();\n                }\n                if (!this.inputFocus) {\n                    this.refreshInputHight();\n                }\n                this.refreshPlaceHolder();\n                if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                    this.updateValueState(null, newProp, oldProp);\n                }\n                this.checkPlaceholderSize();\n            }\n        }\n        if (!this.changeOnBlur) {\n            this.updateValueState(null, newProp, oldProp);\n        }\n    };\n    /**\n     * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     */\n    MultiSelect.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Hides the popup, if the popup in a open state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.hidePopup = function (e) {\n        var _this = this;\n        var delay = 100;\n        if (this.isPopupOpen()) {\n            var animModel = {\n                name: 'FadeOut',\n                duration: 100,\n                delay: delay ? delay : 0\n            };\n            var eventArgs = { popup: this.popupObj, cancel: false, animation: animModel, event: e || null };\n            this.trigger('close', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    if (_this.fields.groupBy && _this.mode !== 'CheckBox' && _this.fixedHeaderElement) {\n                        remove(_this.fixedHeaderElement);\n                        _this.fixedHeaderElement = null;\n                    }\n                    _this.beforePopupOpen = false;\n                    _this.overAllWrapper.classList.remove(iconAnimation);\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                    attributes(_this.inputElement, { 'aria-expanded': 'false' });\n                    _this.inputElement.removeAttribute('aria-owns');\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                    if (_this.allowFiltering) {\n                        _this.notify('inputFocus', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox', value: 'clear' });\n                    }\n                    _this.popupObj.hide();\n                    removeClass([document.body, _this.popupObj.element], 'e-popup-full-page');\n                    EventHandler.remove(_this.list, 'keydown', _this.onKeyDown);\n                }\n            });\n        }\n    };\n    /**\n     * Shows the popup, if the popup in a closed state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.showPopup = function (e) {\n        var _this = this;\n        if (!this.enabled) {\n            return;\n        }\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                if (!_this.ulElement) {\n                    _this.beforePopupOpen = true;\n                    _super.prototype.render.call(_this, e);\n                    if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n                        _this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox' });\n                    }\n                    return;\n                }\n                if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n                    _this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox' });\n                }\n                var mainLiLength = _this.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n                var liLength = _this.ulElement.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n                if (mainLiLength > 0 && (mainLiLength === liLength) && (liLength === _this.mainData.length) && !(_this.targetElement() !== '' && _this.allowCustomValue)) {\n                    _this.beforePopupOpen = false;\n                    return;\n                }\n                _this.onPopupShown(e);\n            }\n        });\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     * parameter\n     * `true`   - Selects entire list items.\n     * `false`  - Un Selects entire list items.\n     *\n     * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n     * @returns {void}\n     */\n    MultiSelect.prototype.selectAll = function (state) {\n        this.isSelectAll = true;\n        this.selectAllItems(state);\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    MultiSelect.prototype.getModuleName = function () {\n        return 'multiselect';\n    };\n    /**\n     * Allows you to clear the selected values from the Multiselect component.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.clear = function () {\n        var _this = this;\n        this.selectAll(false);\n        if (this.value && this.value.length) {\n            setTimeout(function () {\n                _this.setProperties({ value: null }, true);\n            }, 0);\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    MultiSelect.prototype.render = function () {\n        this.setDynValue = this.initStatus = false;\n        this.isSelectAll = false;\n        this.selectAllEventEle = [];\n        this.searchWrapper = this.createElement('span', { className: SEARCHBOX_WRAPPER + ' ' + ((this.mode === 'Box') ? BOX_ELEMENT : '') });\n        this.viewWrapper = this.createElement('span', { className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER, styles: 'display:none;' });\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS$1, styles: 'display:none;'\n        });\n        this.componentWrapper = this.createElement('div', { className: ELEMENT_WRAPPER });\n        this.overAllWrapper = this.createElement('div', { className: OVER_ALL_WRAPPER });\n        if (this.mode === 'CheckBox') {\n            addClass([this.overAllWrapper], 'e-checkbox');\n        }\n        if (Browser.isDevice) {\n            this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n        }\n        this.setWidth(this.width);\n        this.overAllWrapper.appendChild(this.componentWrapper);\n        this.popupWrapper = this.createElement('div', { id: this.element.id + '_popup', className: POPUP_WRAPPER });\n        if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n            this.delimiterWrapper = this.createElement('span', { className: DELIMITER_WRAPPER, styles: 'display:none' });\n            this.componentWrapper.appendChild(this.delimiterWrapper);\n        }\n        else {\n            this.chipCollectionWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER$1,\n                styles: 'display:none'\n            });\n            if (this.mode === 'Default') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n            }\n            else if (this.mode === 'Box') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n            }\n            this.componentWrapper.appendChild(this.chipCollectionWrapper);\n        }\n        if (this.mode !== 'Box') {\n            this.componentWrapper.appendChild(this.viewWrapper);\n        }\n        this.componentWrapper.appendChild(this.searchWrapper);\n        if (this.showClearButton && !Browser.isDevice) {\n            this.componentWrapper.appendChild(this.overAllClear);\n        }\n        else {\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n        this.dropDownIcon();\n        this.inputElement = this.createElement('input', {\n            className: INPUT_ELEMENT,\n            attrs: {\n                spellcheck: 'false',\n                type: 'text',\n                autocomplete: 'off',\n                tabindex: '0',\n                role: 'combobox'\n            }\n        });\n        if (this.mode === 'Default' || this.mode === 'Box') {\n            this.inputElement.setAttribute('aria-describedby', this.chipCollectionWrapper.id);\n        }\n        if (this.element.tagName !== this.getNgDirective()) {\n            this.element.style.display = 'none';\n        }\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.overAllWrapper);\n            this.searchWrapper.appendChild(this.inputElement);\n        }\n        else {\n            this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n            this.searchWrapper.appendChild(this.inputElement);\n            this.searchWrapper.appendChild(this.element);\n            this.element.removeAttribute('tabindex');\n        }\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n        else if (this.floatLabelType === 'Never') {\n            this.refreshPlaceHolder();\n        }\n        this.addValidInputClass();\n        this.element.style.opacity = '';\n        var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'class': HIDDEN_ELEMENT, 'tabindex': '-1', 'multiple': '' }\n        });\n        this.componentWrapper.appendChild(this.hiddenElement);\n        this.validationAttribute(this.element, this.hiddenElement);\n        if (this.mode !== 'CheckBox') {\n            this.hideOverAllClear();\n        }\n        if (!isNullOrUndefined(closest(this.element, \"fieldset\")) && closest(this.element, \"fieldset\").disabled) {\n            this.enabled = false;\n        }\n        this.wireEvent();\n        this.enable(this.enabled);\n        this.enableRTL(this.enableRtl);\n        this.checkInitialValue();\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        Input.createSpanElement(this.overAllWrapper, this.createElement);\n        this.calculateWidth();\n        if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n        this.renderComplete();\n    };\n    MultiSelect.prototype.checkInitialValue = function () {\n        var _this = this;\n        var isData = this.dataSource instanceof Array ? (this.dataSource.length > 0)\n            : !isNullOrUndefined(this.dataSource);\n        if (!(this.value && this.value.length) &&\n            isNullOrUndefined(this.text) &&\n            !isData &&\n            this.element.tagName === 'SELECT' &&\n            this.element.options.length > 0) {\n            var optionsElement = this.element.options;\n            var valueCol = [];\n            var textCol = '';\n            for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n                var opt = optionsElement[index];\n                if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n                    if (opt.getAttribute('value')) {\n                        valueCol.push(opt.getAttribute('value'));\n                    }\n                    else {\n                        textCol += (opt.text + this.delimiterChar);\n                    }\n                }\n            }\n            if (valueCol.length > 0) {\n                this.setProperties({ value: valueCol }, true);\n            }\n            else if (textCol !== '') {\n                this.setProperties({ text: textCol }, true);\n            }\n            if (valueCol.length > 0 || textCol !== '') {\n                this.refreshInputHight();\n                this.refreshPlaceHolder();\n            }\n        }\n        if ((this.value && this.value.length) || !isNullOrUndefined(this.text)) {\n            if (!this.list) {\n                _super.prototype.render.call(this);\n            }\n        }\n        if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.initialTextUpdate();\n        }\n        if (this.value && this.value.length) {\n            if (!(this.dataSource instanceof DataManager)) {\n                this.initialValueUpdate();\n                this.initialUpdate();\n            }\n            else {\n                this.setInitialValue = function () {\n                    _this.initStatus = false;\n                    _this.initialValueUpdate();\n                    _this.initialUpdate();\n                    _this.setInitialValue = null;\n                    _this.initStatus = true;\n                };\n            }\n            this.updateTempValue();\n        }\n        else {\n            this.initialUpdate();\n        }\n        this.initStatus = true;\n        this.checkAutoFocus();\n        if (!isNullOrUndefined(this.text)) {\n            this.element.setAttribute('data-initial-value', this.text);\n        }\n    };\n    MultiSelect.prototype.checkAutoFocus = function () {\n        if (this.element.hasAttribute('autofocus')) {\n            this.inputElement.focus();\n        }\n    };\n    MultiSelect.prototype.setFloatLabelType = function () {\n        removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n    };\n    MultiSelect.prototype.addValidInputClass = function () {\n        if (!isNullOrUndefined(this.overAllWrapper)) {\n            if ((!isNullOrUndefined(this.value) && this.value.length) || this.floatLabelType === 'Always') {\n                addClass([this.overAllWrapper], 'e-valid-input');\n            }\n            else {\n                removeClass([this.overAllWrapper], 'e-valid-input');\n            }\n        }\n    };\n    MultiSelect.prototype.dropDownIcon = function () {\n        if (this.showDropDownIcon) {\n            this.dropIcon = this.createElement('span', { className: dropdownIcon });\n            this.componentWrapper.appendChild(this.dropIcon);\n            addClass([this.componentWrapper], ['e-down-icon']);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.dropIcon.parentElement.removeChild(this.dropIcon);\n                removeClass([this.componentWrapper], ['e-down-icon']);\n            }\n        }\n    };\n    MultiSelect.prototype.initialUpdate = function () {\n        if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n            this.updateDelimView();\n        }\n        this.updateCssClass();\n        this.updateHTMLAttribute();\n        this.updateReadonly(this.readonly);\n        this.refreshInputHight();\n        this.checkPlaceholderSize();\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    MultiSelect.prototype.destroy = function () {\n        // eslint-disable-next-line\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n        }\n        this.notify(destroy, {});\n        this.unwireListEvents();\n        this.unWireEvent();\n        this.list = null;\n        this.popupObj = null;\n        this.mainList = null;\n        this.mainData = null;\n        this.filterParent = null;\n        this.ulElement = null;\n        this.mainListCollection = null;\n        _super.prototype.destroy.call(this);\n        var temp = ['readonly', 'aria-disabled', 'placeholder'];\n        var length = temp.length;\n        if (!isNullOrUndefined(this.inputElement)) {\n            while (length > 0) {\n                this.inputElement.removeAttribute(temp[length - 1]);\n                length--;\n            }\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.removeAttribute('data-initial-value');\n            this.element.style.display = 'block';\n        }\n        if (this.overAllWrapper && this.overAllWrapper.parentElement) {\n            if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n                remove(this.overAllWrapper);\n            }\n            else {\n                this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n                remove(this.overAllWrapper);\n            }\n        }\n        this.componentWrapper = null;\n        this.overAllClear = null;\n        this.overAllWrapper = null;\n        this.hiddenElement = null;\n        this.searchWrapper = null;\n        this.viewWrapper = null;\n        this.chipCollectionWrapper = null;\n        this.targetInputElement = null;\n        this.popupWrapper = null;\n        this.inputElement = null;\n        this.delimiterWrapper = null;\n        this.popupObj = null;\n        this.popupWrapper = null;\n        this.liCollections = null;\n        this.header = null;\n        this.mainList = null;\n        this.mainListCollection = null;\n        this.footer = null;\n        this.selectAllEventEle = null;\n    };\n    __decorate$5([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], MultiSelect.prototype, \"fields\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enablePersistence\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"groupTemplate\", void 0);\n    __decorate$5([\n        Property('No records found')\n    ], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$5([\n        Property('Request failed')\n    ], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$5([\n        Property('None')\n    ], MultiSelect.prototype, \"sortOrder\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"enabled\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate$5([\n        Property([])\n    ], MultiSelect.prototype, \"dataSource\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"query\", void 0);\n    __decorate$5([\n        Property('StartsWith')\n    ], MultiSelect.prototype, \"filterType\", void 0);\n    __decorate$5([\n        Property(1000)\n    ], MultiSelect.prototype, \"zIndex\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"ignoreAccent\", void 0);\n    __decorate$5([\n        Property()\n    ], MultiSelect.prototype, \"locale\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"cssClass\", void 0);\n    __decorate$5([\n        Property('100%')\n    ], MultiSelect.prototype, \"width\", void 0);\n    __decorate$5([\n        Property('300px')\n    ], MultiSelect.prototype, \"popupHeight\", void 0);\n    __decorate$5([\n        Property('100%')\n    ], MultiSelect.prototype, \"popupWidth\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"placeholder\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$5([\n        Property({})\n    ], MultiSelect.prototype, \"htmlAttributes\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"valueTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"headerTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"footerTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"itemTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"allowFiltering\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"changeOnBlur\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"allowCustomValue\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"showClearButton\", void 0);\n    __decorate$5([\n        Property(1000)\n    ], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"readonly\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"text\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"value\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n    __decorate$5([\n        Property('Default')\n    ], MultiSelect.prototype, \"mode\", void 0);\n    __decorate$5([\n        Property(',')\n    ], MultiSelect.prototype, \"delimiterChar\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"ignoreCase\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n    __decorate$5([\n        Property('Never')\n    ], MultiSelect.prototype, \"floatLabelType\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"showSelectAll\", void 0);\n    __decorate$5([\n        Property('Select All')\n    ], MultiSelect.prototype, \"selectAllText\", void 0);\n    __decorate$5([\n        Property('Unselect All')\n    ], MultiSelect.prototype, \"unSelectAllText\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"openOnClick\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"change\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"removing\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"removed\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"selectedAll\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"beforeOpen\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"open\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"close\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"blur\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"focus\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"chipSelection\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"filtering\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"tagging\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"customValueSelection\", void 0);\n    MultiSelect = __decorate$5([\n        NotifyPropertyChanges\n    ], MultiSelect);\n    return MultiSelect;\n}(DropDownBase));\n\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME$1 = 'e-frame';\nvar CHECK$1 = 'e-check';\nvar CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\nvar CheckBoxSelection = /** @__PURE__ @class */ (function () {\n    function CheckBoxSelection(parent) {\n        this.activeLi = [];\n        this.activeEle = [];\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    CheckBoxSelection.prototype.getModuleName = function () {\n        return 'CheckBoxSelection';\n    };\n    CheckBoxSelection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('updatelist', this.listSelection, this);\n        this.parent.on('listoption', this.listOption, this);\n        this.parent.on('selectAll', this.setSelectAll, this);\n        this.parent.on('checkSelectAll', this.checkSelectAll, this);\n        this.parent.on('searchBox', this.setSearchBox, this);\n        this.parent.on('blur', this.onBlurHandler, this);\n        this.parent.on('targetElement', this.targetElement, this);\n        this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n        this.parent.on('inputFocus', this.getFocus, this);\n        this.parent.on('reOrder', this.setReorder, this);\n        this.parent.on('activeList', this.getActiveList, this);\n        this.parent.on('selectAllText', this.setLocale, this);\n        this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        this.parent.on('addItem', this.checboxCreate, this);\n        this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n    };\n    CheckBoxSelection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('updatelist', this.listSelection);\n        this.parent.off('listoption', this.listOption);\n        this.parent.off('selectAll', this.setSelectAll);\n        this.parent.off('checkSelectAll', this.checkSelectAll);\n        this.parent.off('searchBox', this.setSearchBox);\n        this.parent.off('blur', this.onBlurHandler);\n        this.parent.off('targetElement', this.targetElement);\n        this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n        this.parent.off('inputFocus', this.getFocus);\n        this.parent.off('reOrder', this.setReorder);\n        this.parent.off('activeList', this.getActiveList);\n        this.parent.off('selectAllText', this.setLocale);\n        this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n        this.parent.off('addItem', this.checboxCreate);\n        this.parent.off('popupFullScreen', this.setPopupFullScreen);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.listOption = function (args) {\n        var _this = this;\n        if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n            };\n        }\n        else {\n            var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n    };\n    CheckBoxSelection.prototype.setPlaceholder = function (props) {\n        Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n    };\n    CheckBoxSelection.prototype.checboxCreate = function (e) {\n        var item;\n        if (!isNullOrUndefined(e.item)) {\n            item = e.item;\n        }\n        else {\n            item = e;\n        }\n        if (this.parent.enableGroupCheckBox || (item.className !== 'e-list-group-item '\n            && item.className !== 'e-list-group-item')) {\n            var checkboxEle = createCheckBox(this.parent.createElement, true);\n            var icon = select('div.' + ICON, item);\n            item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n            select('.' + CHECKBOXFRAME$1, checkboxEle);\n            if (this.parent.enableGroupCheckBox) {\n                this.parent.popupWrapper.classList.add('e-multiselect-group');\n            }\n            return item;\n        }\n        else {\n            return item;\n        }\n    };\n    CheckBoxSelection.prototype.setSelectAll = function () {\n        if (this.parent.showSelectAll) {\n            if (isNullOrUndefined(this.checkAllParent)) {\n                this.checkAllParent = this.parent.createElement('div', {\n                    className: checkAllParent\n                });\n                this.selectAllSpan = this.parent.createElement('span', {\n                    className: 'e-all-text'\n                });\n                this.selectAllSpan.textContent = '';\n                this.checkAllParent.appendChild(this.selectAllSpan);\n                this.setLocale();\n                this.checboxCreate(this.checkAllParent);\n                if (this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        append([this.checkAllParent], this.parent.filterParent);\n                    }\n                    else {\n                        append([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                if (!this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n                    }\n                    else {\n                        prepend([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n            }\n            if (this.parent.list.classList.contains('e-nodata') || (this.parent.listData && this.parent.listData.length <= 1 &&\n                !(this.parent.isDynamicDataChange)) || (this.parent.isDynamicDataChange &&\n                this.parent.listData && this.parent.listData.length <= 1)) {\n                this.checkAllParent.style.display = 'none';\n            }\n            else {\n                this.checkAllParent.style.display = 'block';\n            }\n            this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        else if (!isNullOrUndefined(this.checkAllParent)) {\n            this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    };\n    CheckBoxSelection.prototype.destroy = function () {\n        this.removeEventListener();\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.checkAllParent = null;\n        this.clearIconElement = null;\n        this.filterInput = null;\n        this.filterInputObj = null;\n        this.checkWrapper = null;\n        this.selectAllSpan = null;\n    };\n    CheckBoxSelection.prototype.listSelection = function (args) {\n        var target;\n        if (!isNullOrUndefined(args.e)) {\n            var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n            target = !isNullOrUndefined(args.e.target) ?\n                (args.e.target.classList.contains('e-frame')\n                    && (!this.parent.showSelectAll\n                        || (this.checkAllParent && !this.checkAllParent.contains(args.e.target)))) ?\n                    args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1]\n                : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n        }\n        else {\n            var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n            target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n        }\n        if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n            target = args.li.firstElementChild.childNodes[1];\n        }\n        if (!isNullOrUndefined(target)) {\n            this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        }\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            var selectAll$$1 = false;\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n        }\n    };\n    CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll$$1) {\n        this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n    };\n    CheckBoxSelection.prototype.clickHandler = function (e) {\n        var target;\n        if (e.currentTarget.classList.contains(this.checkAllParent.className)) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.currentTarget;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        var selectAll$$1 = true;\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n        }\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll$$1) {\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n            frameSpan.classList.remove(INDETERMINATE);\n            frameSpan.classList.add(CHECK$1);\n            if (selectAll$$1) {\n                this.parent.selectAllItems(true, e);\n                this.setLocale(true);\n            }\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        else if (state === 'indeterminate' && !(frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1]);\n            frameSpan.classList.add(INDETERMINATE);\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.setSearchBox = function (args) {\n        if (isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent = this.parent.createElement('span', {\n                className: filterParent\n            });\n            this.filterInput = this.parent.createElement('input', {\n                attrs: { type: 'text' },\n                className: filterInput\n            });\n            this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n                this.parent.mobFilter = false;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n                properties: { placeholder: this.parent.filterBarPlaceholder }\n            }, this.parent.createElement);\n            if (!isNullOrUndefined(this.parent.cssClass)) {\n                if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], this.parent.filterParent);\n            prepend([this.parent.filterParent], args.popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'role': 'combobox',\n                'autocomplete': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n            EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n            EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n            this.parent.searchBoxHeight = (this.filterInputObj.container.parentElement).getBoundingClientRect().height;\n            return this.filterInputObj;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n        this.parent.hidePopup();\n        removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.inputElement.focus();\n    };\n    CheckBoxSelection.prototype.clearText = function (e) {\n        this.parent.targetInputElement.value = '';\n        if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n            this.parent.search(null);\n        }\n        this.parent.refreshPopup();\n        this.parent.refreshListItems(null);\n        this.clearIconElement.style.visibility = 'hidden';\n        this.filterInput.focus();\n        this.setReorder(e);\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n        this.parent.popupObj.element.classList.add(device);\n        this.parent.popupObj.element.classList.add(mobileFilter);\n        this.parent.popupObj.position = { X: 0, Y: 0 };\n        this.parent.popupObj.dataBind();\n        this.setSearchBoxPosition();\n        this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n        this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n        this.clearIconElement.style.visibility = 'hidden';\n        EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n    };\n    CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        var selectAllHeight = 0;\n        if (this.checkAllParent) {\n            selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n        this.parent.list.style.maxHeight = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        this.parent.list.style.height = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    CheckBoxSelection.prototype.setPopupFullScreen = function () {\n        attributes(this.parent.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n        addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n    };\n    CheckBoxSelection.prototype.targetElement = function () {\n        if (!isNullOrUndefined(this.clearIconElement)) {\n            this.parent.targetInputElement = this.filterInput;\n            this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n        }\n        return this.parent.targetInputElement.value;\n    };\n    CheckBoxSelection.prototype.onBlurHandler = function (e) {\n        if (!this.parent.element.classList.contains('e-listbox')) {\n            var target = void 0;\n            if (this.parent.keyAction) {\n                return;\n            }\n            if (Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.target;\n            }\n            if (!Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.relatedTarget;\n            }\n            // eslint-disable-next-line max-len\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target)\n                && !Browser.isIE && this.filterInput) {\n                this.filterInput.focus();\n                return;\n            }\n            if (this.parent.scrollFocusStatus && this.filterInput) {\n                e.preventDefault();\n                this.filterInput.focus();\n                this.parent.scrollFocusStatus = false;\n                return;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element)\n                && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n                this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.overAllWrapper.classList.remove(FOCUS$1);\n                this.parent.trigger('blur');\n                this.parent.focused = true;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n                this.parent.hidePopup();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.onDocumentClick = function (e) {\n        if (this.parent.getLocaleName() !== 'listbox') {\n            var target = e.target;\n            if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n                if (!(this.filterInput && this.filterInput.value !== '')) {\n                    e.preventDefault();\n                }\n            }\n            if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]'))\n                && !isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target)) {\n                if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n                    this.parent.inputFocus = false;\n                    this.parent.scrollFocusStatus = false;\n                    this.parent.hidePopup();\n                    this.parent.onBlurHandler(e, true);\n                    this.parent.focused = true;\n                }\n            }\n            else {\n                this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') &&\n                    (document.activeElement === this.filterInput);\n            }\n            if (!isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') &&\n                !this.parent.isPopupOpen()) {\n                if (Browser.isIE) {\n                    this.parent.onBlurHandler();\n                }\n                else {\n                    this.parent.onBlurHandler(e);\n                }\n            }\n            if (this.filterInput === target) {\n                this.filterInput.focus();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.getFocus = function (e) {\n        this.parent.overAllWrapper.classList.remove(FOCUS$1);\n        if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n            this.parent.keyAction = false;\n            return;\n        }\n        if (e.value === 'focus') {\n            this.filterInput.focus();\n            this.parent.removeFocus();\n            EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n        }\n        if (e.value === 'clear') {\n            this.filterInput.value = '';\n            this.clearIconElement.style.visibility = 'hidden';\n        }\n    };\n    CheckBoxSelection.prototype.checkSelectAll = function (e) {\n        if (e.value === 'check') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale(true);\n        }\n        if (e.value === 'uncheck') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n        if (e.value === 'indeterminate') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n    };\n    CheckBoxSelection.prototype.setLocale = function (unSelect) {\n        if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n            var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n            this.selectAllSpan.textContent = '';\n            var compiledString = compile(template);\n            var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            var l10nLocale = { selectAllText: 'Select All', unSelectAllText: 'Unselect All' };\n            var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n            if (l10n.getConstant('selectAllText') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n            }\n            this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n        }\n    };\n    CheckBoxSelection.prototype.getActiveList = function (args) {\n        if (args.li.classList.contains('e-active')) {\n            this.activeLi.push(args.li.cloneNode(true));\n        }\n        else {\n            this.activeLi.splice(args.index, 1);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.setReorder = function (args) {\n        if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n            var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n            var remLi = void 0;\n            var ulEle_1 = this.parent.createElement('ul', {\n                className: 'e-list-parent e-ul e-reorder'\n            });\n            if (activeLiCount > 0) {\n                var activeListItems = this.parent.ulElement.querySelectorAll('li.e-active');\n                activeListItems.forEach(function (item) {\n                    ulEle_1.appendChild(item);\n                });\n                remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n                addClass(remLi, 'e-reorder-hide');\n                prepend([ulEle_1], this.parent.list);\n            }\n            this.parent.focusAtFirstListItem();\n        }\n    };\n    return CheckBoxSelection;\n}());\n\n/**\n * export all modules from current location\n */\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n/**\n * Defines the Selection settings of List Box.\n */\nvar SelectionSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$6([\n        Property('Multiple')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate$6([\n        Property(false)\n    ], SelectionSettings.prototype, \"showCheckbox\", void 0);\n    __decorate$6([\n        Property(false)\n    ], SelectionSettings.prototype, \"showSelectAll\", void 0);\n    __decorate$6([\n        Property('Left')\n    ], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\n/**\n * Defines the toolbar settings of List Box.\n */\nvar ToolbarSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$6([\n        Property([])\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate$6([\n        Property('Right')\n    ], ToolbarSettings.prototype, \"position\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\nvar ListBox = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(ListBox, _super);\n    /**\n     * Constructor for creating the ListBox component.\n     *\n     * @param {ListBoxModel} options - Specifies ListBox model\n     * @param {string | HTMLElement} element - Specifies the element.\n     */\n    function ListBox(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isValidKey = false;\n        _this.isDataSourceUpdate = false;\n        _this.keyDownStatus = false;\n        return _this;\n    }\n    ListBox_1 = ListBox;\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}.\n     * @private\n     */\n    ListBox.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Build and render the component.\n     *\n     * @private\n     * @returns {void}\n     */\n    ListBox.prototype.render = function () {\n        this.inputString = '';\n        this.initLoad = true;\n        this.isCustomFiltering = false;\n        this.initialSelectedOptions = this.value;\n        _super.prototype.render.call(this);\n        this.setEnabled();\n        this.renderComplete();\n    };\n    ListBox.prototype.initWrapper = function () {\n        var hiddenSelect = this.createElement('select', { className: 'e-hidden-select', attrs: { 'multiple': '' } });\n        hiddenSelect.style.visibility = 'hidden';\n        this.list.classList.add('e-listbox-wrapper');\n        if (this.itemTemplate) {\n            this.list.classList.add('e-list-template');\n        }\n        this.list.classList.add('e-wrapper');\n        this.list.classList.add('e-lib');\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.setAttribute('tabindex', '0');\n            if (this.initLoad) {\n                this.element.appendChild(this.list);\n            }\n        }\n        else {\n            if (this.initLoad) {\n                this.element.parentElement.insertBefore(this.list, this.element);\n            }\n            this.list.insertBefore(this.element, this.list.firstChild);\n            this.element.style.display = 'none';\n        }\n        this.list.insertBefore(hiddenSelect, this.list.firstChild);\n        if (this.list.getElementsByClassName('e-list-item')[0]) {\n            this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n        }\n        if (this.itemTemplate) {\n            this.renderReactTemplates();\n        }\n        removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n        this.validationAttribute(this.element, hiddenSelect);\n        this.list.setAttribute('role', 'listbox');\n        attributes(this.list, { 'role': 'listbox', 'aria-label': 'listbox', 'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false' });\n        this.updateSelectionSettings();\n    };\n    ListBox.prototype.updateSelectionSettings = function () {\n        if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n            var l10nSelect = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n            this.showSelectAll = true;\n            this.selectAllText = l10nSelect.getConstant('selectAllText');\n            this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n            this.popupWrapper = this.list;\n            this.checkBoxSelectionModule.checkAllParent = null;\n            this.notify('selectAll', {});\n        }\n    };\n    ListBox.prototype.initDraggable = function () {\n        var _this = this;\n        if (this.ulElement) {\n            this.ulElement.id = this.element.id + '_parent';\n        }\n        if (this.allowDragAndDrop) {\n            new Sortable(this.ulElement, {\n                scope: this.scope,\n                itemClass: 'e-list-item',\n                dragStart: this.triggerDragStart.bind(this),\n                drag: this.triggerDrag.bind(this),\n                beforeDrop: this.beforeDragEnd.bind(this),\n                drop: this.dragEnd.bind(this),\n                placeHolder: function () { return _this.createElement('span', { className: 'e-placeholder' }); },\n                helper: function (e) {\n                    var wrapper = _this.list.cloneNode();\n                    var ele = e.sender.cloneNode(true);\n                    wrapper.appendChild(ele);\n                    var refEle = _this.getItems()[0];\n                    wrapper.style.width = refEle.offsetWidth + 'px';\n                    wrapper.style.height = refEle.offsetHeight + 'px';\n                    if ((_this.value && _this.value.length) > 1 && _this.isSelected(ele)) {\n                        ele.appendChild(_this.createElement('span', {\n                            className: 'e-list-badge', innerHTML: _this.value.length + ''\n                        }));\n                    }\n                    wrapper.style.zIndex = getZindexPartial(_this.element) + '';\n                    return wrapper;\n                }\n            });\n        }\n    };\n    ListBox.prototype.updateActionCompleteData = function (li, item, index) {\n        this.jsonData.splice(index, 0, item);\n    };\n    ListBox.prototype.initToolbar = function () {\n        var pos = this.toolbarSettings.position;\n        var prevScope = this.element.getAttribute('data-value');\n        if (this.toolbarSettings.items.length) {\n            var toolElem = this.createElement('div', { className: 'e-listbox-tool', attrs: { 'role': 'toolbar' } });\n            var wrapper = this.createElement('div', {\n                className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n            });\n            this.list.parentElement.insertBefore(wrapper, this.list);\n            wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n            wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n            this.createButtons(toolElem);\n            if (!this.element.id) {\n                this.element.id = getUniqueID('e-' + this.getModuleName());\n            }\n            if (this.scope) {\n                document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n            }\n            else {\n                this.updateToolBarState();\n            }\n        }\n        var scope = this.element.getAttribute('data-value');\n        if (prevScope && scope && (prevScope !== scope)) {\n            this.tBListBox = getComponent(document.getElementById(prevScope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n        else if (scope) {\n            this.tBListBox = getComponent(document.getElementById(scope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n    };\n    ListBox.prototype.createButtons = function (toolElem) {\n        var _this = this;\n        var btn;\n        var ele;\n        var title;\n        var l10n = new L10n(this.getModuleName(), {\n            moveUp: 'Move Up', moveDown: 'Move Down', moveTo: 'Move To',\n            moveFrom: 'Move From', moveAllTo: 'Move All To', moveAllFrom: 'Move All From'\n        }, this.locale);\n        this.toolbarSettings.items.forEach(function (value) {\n            title = l10n.getConstant(value);\n            ele = _this.createElement('button', {\n                attrs: {\n                    'type': 'button',\n                    'data-value': value,\n                    'title': title,\n                    'aria-label': title\n                }\n            });\n            toolElem.appendChild(ele);\n            btn = new Button({ iconCss: 'e-icons e-' + value.toLowerCase() }, ele);\n            btn.createElement = _this.createElement;\n        });\n    };\n    ListBox.prototype.validationAttribute = function (input, hiddenSelect) {\n        _super.prototype.validationAttribute.call(this, input, hiddenSelect);\n        hiddenSelect.required = input.required;\n        input.required = false;\n    };\n    ListBox.prototype.setHeight = function () {\n        var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        ele.style.height = formatUnit(this.height);\n        if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n            addClass([this.list], 'e-filter-list');\n        }\n        else {\n            removeClass([this.list], 'e-filter-list');\n        }\n    };\n    ListBox.prototype.setCssClass = function () {\n        var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.cssClass) {\n            addClass([wrap], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.enableRtl) {\n            addClass([this.list], 'e-rtl');\n        }\n    };\n    ListBox.prototype.setEnable = function () {\n        var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.enabled) {\n            removeClass([ele], cssClass.disabled);\n        }\n        else {\n            addClass([ele], cssClass.disabled);\n        }\n    };\n    ListBox.prototype.showSpinner = function () {\n        if (!this.spinner) {\n            this.spinner = this.createElement('div', { className: 'e-listbox-wrapper' });\n        }\n        this.spinner.style.height = formatUnit(this.height);\n        this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n        createSpinner({ target: this.spinner }, this.createElement);\n        showSpinner(this.spinner);\n    };\n    ListBox.prototype.hideSpinner = function () {\n        if (this.spinner.querySelector('.e-spinner-pane')) {\n            hideSpinner(this.spinner);\n        }\n        if (this.spinner.parentElement) {\n            detach(this.spinner);\n        }\n    };\n    ListBox.prototype.onInput = function () {\n        this.isDataSourceUpdate = false;\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        this.refreshClearIcon();\n    };\n    ListBox.prototype.clearText = function () {\n        this.filterInput.value = '';\n        this.refreshClearIcon();\n        var event = document.createEvent('KeyboardEvent');\n        this.isValidKey = true;\n        this.KeyUp(event);\n    };\n    ListBox.prototype.refreshClearIcon = function () {\n        if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n            var clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n    };\n    ListBox.prototype.onActionComplete = function (ulElement, list, e) {\n        var searchEle;\n        if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n            searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n        }\n        if (list.length === 0) {\n            var noRecElem = ulElement.childNodes[0];\n            if (noRecElem) {\n                ulElement.removeChild(noRecElem);\n            }\n        }\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n            this.list.insertBefore(searchEle, this.list.firstElementChild);\n            this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n            this.filterWireEvents(searchEle);\n        }\n        this.initWrapper();\n        this.setSelection();\n        this.initDraggable();\n        this.mainList = this.ulElement;\n        if (this.initLoad) {\n            this.jsonData = [];\n            extend(this.jsonData, list, []);\n            this.initToolbarAndStyles();\n            this.wireEvents();\n            if (this.showCheckbox) {\n                this.setCheckboxPosition();\n            }\n            if (this.allowFiltering) {\n                this.setFiltering();\n            }\n        }\n        else {\n            if (this.isDataSourceUpdate) {\n                this.jsonData = [];\n                extend(this.jsonData, list, []);\n                this.isDataSourceUpdate = false;\n            }\n            if (this.allowFiltering) {\n                var filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n                var txtLength = this.filterInput.value.length;\n                filterElem.selectionStart = txtLength;\n                filterElem.selectionEnd = txtLength;\n                filterElem.focus();\n            }\n        }\n        if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n            var scope = this.scope.replace('#', '');\n            var scopedLB = getComponent(document.getElementById(scope), this.getModuleName());\n            scopedLB.initToolbar();\n        }\n        this.initLoad = false;\n    };\n    ListBox.prototype.initToolbarAndStyles = function () {\n        this.initToolbar();\n        this.setCssClass();\n        this.setEnable();\n        this.setHeight();\n    };\n    ListBox.prototype.triggerDragStart = function (args) {\n        var _this = this;\n        var badge;\n        args = extend(this.getDragArgs(args), { dragSelected: true });\n        if (Browser.isIos) {\n            this.list.style.overflow = 'hidden';\n        }\n        this.trigger('dragStart', args, function (dragEventArgs) {\n            _this.allowDragAll = dragEventArgs.dragSelected;\n            if (!_this.allowDragAll) {\n                badge = _this.ulElement.getElementsByClassName('e-list-badge')[0];\n                if (badge) {\n                    detach(badge);\n                }\n            }\n        });\n    };\n    ListBox.prototype.triggerDrag = function (args) {\n        var scrollParent;\n        var boundRect;\n        var scrollMoved = 36;\n        var scrollHeight = 10;\n        if (this.itemTemplate && args.target) {\n            if (args.target && args.target.closest('.e-list-item')) {\n                scrollHeight = args.target.closest('.e-list-item').scrollHeight;\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var listItem = args.element.querySelector('.e-list-item');\n                if (listItem) {\n                    scrollHeight = listItem.scrollHeight;\n                }\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var event = args.event;\n        var wrapper;\n        if (args.target && (args.target.classList.contains('e-listbox-wrapper') || args.target.classList.contains('e-list-item')\n            || args.target.classList.contains('e-filter-parent') || args.target.classList.contains('e-input-group')\n            || args.target.closest('.e-list-item'))) {\n            if (args.target.classList.contains('e-list-item') || args.target.classList.contains('e-filter-parent')\n                || args.target.classList.contains('e-input-group')\n                || args.target.closest('.e-list-item')) {\n                wrapper = args.target.closest('.e-listbox-wrapper');\n            }\n            else {\n                wrapper = args.target;\n            }\n            if (this.allowFiltering) {\n                scrollParent = wrapper.querySelector('.e-list-parent');\n            }\n            else {\n                scrollParent = wrapper;\n            }\n            boundRect = scrollParent.getBoundingClientRect();\n            if ((boundRect.y + scrollParent.offsetHeight) - (event.pageY + scrollMoved) < 1) {\n                scrollParent.scrollTop = scrollParent.scrollTop + scrollHeight;\n            }\n            else if ((event.pageY - scrollMoved) - boundRect.y < 1) {\n                scrollParent.scrollTop = scrollParent.scrollTop - scrollHeight;\n            }\n        }\n        if (args.target === null) {\n            return;\n        }\n        this.trigger('drag', this.getDragArgs(args));\n    };\n    ListBox.prototype.beforeDragEnd = function (args) {\n        this.dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        if (this.value.indexOf(this.dragValue) > -1) {\n            args.items = this.getDataByValues(this.value);\n        }\n        else {\n            args.items = this.getDataByValues([this.dragValue]);\n        }\n        this.trigger('beforeDrop', args);\n    };\n    ListBox.prototype.dragEnd = function (args) {\n        var _this = this;\n        var listData;\n        var liColl;\n        var jsonData;\n        var droppedData;\n        var selectedOptions;\n        var sortedData;\n        var dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        var listObj = this.getComponent(args.droppedElement);\n        var getArgs = this.getDragArgs({ target: args.droppedElement }, true);\n        var sourceArgs = { previousData: this.dataSource };\n        var destArgs = { previousData: listObj.dataSource };\n        var dragArgs = extend({}, getArgs, { target: args.target, source: { previousData: this.dataSource },\n            previousIndex: args.previousIndex, currentIndex: args.currentIndex });\n        if (listObj !== this) {\n            var sourceArgs1 = extend(sourceArgs, { currentData: this.listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1, destination: destArgs });\n        }\n        if (Browser.isIos) {\n            this.list.style.overflow = '';\n        }\n        var targetListObj = this.getComponent(args.target);\n        if (targetListObj && targetListObj.listData.length === 0) {\n            var noRecElem = targetListObj.ulElement.childNodes[0];\n            if (noRecElem) {\n                targetListObj.ulElement.removeChild(noRecElem);\n            }\n        }\n        if (listObj === this) {\n            var ul_1 = this.ulElement;\n            listData = [].slice.call(this.listData);\n            liColl = [].slice.call(this.liCollections);\n            jsonData = [].slice.call(this.jsonData);\n            sortedData = [].slice.call(this.sortedData);\n            var toSortIdx_1 = args.currentIndex;\n            var toIdx_1 = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n            var rIdx = listData.indexOf(this.getDataByValue(dropValue));\n            var jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n            var sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n            listData.splice(toIdx_1, 0, listData.splice(rIdx, 1)[0]);\n            sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx, 1)[0]);\n            jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx, 1)[0]);\n            liColl.splice(toIdx_1, 0, liColl.splice(rIdx, 1)[0]);\n            if (this.allowDragAll) {\n                selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n                selectedOptions.forEach(function (value) {\n                    if (value !== dropValue) {\n                        var idx = listData.indexOf(_this.getDataByValue(value));\n                        var jsonIdx_1 = jsonData.indexOf(_this.getDataByValue(value));\n                        var sIdx_1 = sortedData.indexOf(_this.getDataByValue(value));\n                        if (idx > toIdx_1) {\n                            toIdx_1++;\n                        }\n                        jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx_1, 1)[0]);\n                        listData.splice(toIdx_1, 0, listData.splice(idx, 1)[0]);\n                        sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx_1, 1)[0]);\n                        liColl.splice(toIdx_1, 0, liColl.splice(idx, 1)[0]);\n                        ul_1.insertBefore(_this.getItems()[_this.getIndexByValue(value)], ul_1.getElementsByClassName('e-placeholder')[0]);\n                    }\n                });\n            }\n            this.listData = listData;\n            this.jsonData = jsonData;\n            this.sortedData = sortedData;\n            this.liCollections = liColl;\n        }\n        else {\n            var li_1;\n            var fLiColl_1 = [].slice.call(this.liCollections);\n            var currIdx_1 = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n            var ul_2 = listObj.ulElement;\n            listData = [].slice.call(listObj.listData);\n            liColl = [].slice.call(listObj.liCollections);\n            jsonData = [].slice.call(listObj.jsonData);\n            sortedData = [].slice.call(listObj.sortedData);\n            selectedOptions = (this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll)\n                ? this.value : [dropValue];\n            var fListData_1 = [].slice.call(this.listData);\n            var fSortData_1 = [].slice.call(this.sortedData);\n            selectedOptions.forEach(function (value, index) {\n                droppedData = _this.getDataByValue(value);\n                var srcIdx = _this.listData.indexOf(droppedData);\n                var jsonSrcIdx = _this.jsonData.indexOf(droppedData);\n                var sortIdx = _this.sortedData.indexOf(droppedData);\n                fListData_1.splice(srcIdx, 1);\n                _this.jsonData.splice(jsonSrcIdx, 1);\n                fSortData_1.splice(sortIdx, 1);\n                _this.listData = fListData_1;\n                _this.sortedData = fSortData_1;\n                var destIdx = value === dropValue ? args.currentIndex : currIdx_1;\n                listData.splice(destIdx, 0, droppedData);\n                jsonData.splice(destIdx, 0, droppedData);\n                sortedData.splice(destIdx, 0, droppedData);\n                liColl.splice(destIdx, 0, fLiColl_1.splice(srcIdx, 1)[0]);\n                if (!value) {\n                    var liCollElem_1 = _this.getItems();\n                    for (var i = 0; i < liCollElem_1.length; i++) {\n                        if (liCollElem_1[i].getAttribute('data-value') === null && liCollElem_1[i].classList.contains('e-list-item')) {\n                            li_1 = liCollElem_1[i];\n                            break;\n                        }\n                    }\n                }\n                else {\n                    li_1 = _this.getItems()[_this.getIndexByValue(value)];\n                }\n                if (!li_1) {\n                    li_1 = args.helper;\n                }\n                _this.removeSelected(_this, value === dropValue ? [args.droppedElement] : [li_1]);\n                ul_2.insertBefore(li_1, ul_2.getElementsByClassName('e-placeholder')[0]);\n                currIdx_1++;\n            });\n            if (this.fields.groupBy) {\n                var sourceElem = this.renderItems(this.listData, this.fields);\n                this.updateListItems(sourceElem, this.ulElement);\n                this.setSelection();\n            }\n            if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox\n                !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n                var sortable = getComponent(ul_2, 'sortable');\n                var sourceElem = listObj.renderItems(listData, listObj.fields);\n                listObj.updateListItems(sourceElem, ul_2);\n                this.setSelection();\n                if (sortable.placeHolderElement) {\n                    ul_2.appendChild(sortable.placeHolderElement);\n                }\n                ul_2.appendChild(args.helper);\n                listObj.setSelection();\n            }\n            this.liCollections = fLiColl_1;\n            listObj.liCollections = liColl;\n            listObj.jsonData = extend([], [], jsonData, false);\n            listObj.listData = extend([], [], listData, false);\n            listObj.sortedData = extend([], [], sortedData, false);\n            if (this.listData.length === 0) {\n                this.l10nUpdate();\n            }\n        }\n        if (this === listObj) {\n            var sourceArgs1 = extend(sourceArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1 });\n        }\n        else {\n            var dragArgs1 = extend(destArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { destination: dragArgs1 });\n        }\n        this.trigger('drop', dragArgs);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var liCollElem = dragArgs.elements;\n        if (liCollElem.length) {\n            for (var i = 0; i < liCollElem.length; i++) {\n                liCollElem[i].classList.remove('e-grabbed');\n            }\n        }\n    };\n    ListBox.prototype.updateListItems = function (sourceElem, destElem) {\n        var i = 0;\n        destElem.innerHTML = '';\n        while (i < sourceElem.childNodes.length) {\n            destElem.appendChild(sourceElem.childNodes[i]);\n        }\n    };\n    ListBox.prototype.removeSelected = function (listObj, elems) {\n        if (listObj.selectionSettings.showCheckbox) {\n            elems.forEach(function (ele) { ele.getElementsByClassName('e-frame')[0].classList.remove('e-check'); });\n        }\n        else {\n            removeClass(elems, cssClass.selected);\n        }\n    };\n    ListBox.prototype.getCurIdx = function (listObj, idx) {\n        if (listObj.fields.groupBy) {\n            idx -= [].slice.call(listObj.ulElement.children).slice(0, idx)\n                .filter(function (ele) { return ele.classList.contains(cssClass.group); }).length;\n        }\n        return idx;\n    };\n    ListBox.prototype.getComponent = function (li) {\n        var listObj;\n        var ele = (this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox')\n            : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox'));\n        if (ele) {\n            listObj = getComponent(ele, this.getModuleName());\n        }\n        return listObj;\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n    ListBox.prototype.setEnabled = function () {\n        this.element.setAttribute('aria-disabled', (this.enabled) ? 'false' : 'true');\n    };\n    ListBox.prototype.listOption = function (dataSource, fields) {\n        this.listCurrentOptions = _super.prototype.listOption.call(this, dataSource, fields);\n        this.listCurrentOptions = extend({}, this.listCurrentOptions, { itemCreated: this.triggerBeforeItemRender.bind(this) }, true);\n        this.notify('listoption', { module: 'CheckBoxSelection' });\n        return this.listCurrentOptions;\n    };\n    ListBox.prototype.triggerBeforeItemRender = function (e) {\n        e.item.setAttribute('tabindex', '-1');\n        this.trigger('beforeItemRender', { element: e.item, item: e.curData });\n    };\n    ListBox.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.selectionSettings.showCheckbox) {\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n     *\n     * @param {string[]} items - Text items that needs to be enabled/disabled.\n     * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    ListBox.prototype.enableItems = function (items, enable, isValue) {\n        var _this = this;\n        if (enable === void 0) { enable = true; }\n        var li;\n        items.forEach(function (item) {\n            var text = item;\n            li = _this.findListElement(_this.list, 'li', 'data-value', isValue ? text : _this.getValueByText(text));\n            if (!li) {\n                return;\n            }\n            if (enable) {\n                removeClass([li], cssClass.disabled);\n                li.removeAttribute('aria-disabled');\n            }\n            else {\n                addClass([li], cssClass.disabled);\n                li.setAttribute('aria-disabled', 'true');\n            }\n        });\n    };\n    /**\n     * Based on the state parameter, specified list item will be selected/deselected.\n     *\n     * @param {string[]} items - Array of text value of the item.\n     * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    ListBox.prototype.selectItems = function (items, state, isValue) {\n        if (state === void 0) { state = true; }\n        if (state && !this.selectionSettings.showCheckbox && this.selectionSettings.mode === 'Single') {\n            this.getSelectedItems().forEach(function (li) {\n                li.classList.remove('e-active');\n                li.removeAttribute('aria-selected');\n                removeClass([li], cssClass.selected);\n            });\n        }\n        this.setSelection(items, state, !isValue);\n        this.updateSelectedOptions();\n        var selElems = [];\n        for (var i = 0; i < items.length; i++) {\n            var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n            for (var j = 0; j < liColl.length; j++) {\n                if (items[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n                    selElems.push(liColl[j]);\n                }\n            }\n        }\n        this.triggerChange(selElems, null);\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     *\n     * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n     * @returns {void}\n     */\n    ListBox.prototype.selectAll = function (state) {\n        if (state === void 0) { state = true; }\n        this.selectAllItems(state);\n    };\n    /**\n     * Adds a new item to the list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.addItems = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.removeItems = function (items, itemIndex) {\n        this.removeItem(items, itemIndex);\n    };\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.removeItem = function (items, itemIndex) {\n        var liCollections = [];\n        var liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        if (items) {\n            items = (items instanceof Array ? items : [items]);\n            var fields = this.fields;\n            var dataValue = void 0;\n            var objValue = void 0;\n            var dupData = [];\n            var itemIdx = void 0;\n            extend(dupData, [], this.jsonData);\n            var removeIdxes = [];\n            var removeLiIdxes = [];\n            for (var j = 0; j < items.length; j++) {\n                if (items[j] instanceof Object) {\n                    dataValue = getValue(fields.value, items[j]);\n                }\n                else {\n                    dataValue = items[j].toString();\n                }\n                for (var i = 0, len = dupData.length; i < len; i++) {\n                    if (dupData[i] instanceof Object) {\n                        objValue = getValue(fields.value, dupData[i]);\n                    }\n                    else {\n                        objValue = dupData[i].toString();\n                    }\n                    if (objValue === dataValue) {\n                        itemIdx = this.getIndexByValue(dataValue);\n                        var idx = itemIdx === i ? itemIdx : i;\n                        liCollections.push(liElement[idx]);\n                        removeIdxes.push(idx);\n                        removeLiIdxes.push(idx);\n                    }\n                }\n            }\n            for (var k = removeIdxes.length - 1; k >= 0; k--) {\n                this.listData.splice(removeIdxes[k], 1);\n            }\n            for (var k = removeIdxes.length - 1; k >= 0; k--) {\n                this.jsonData.splice(removeIdxes[k], 1);\n            }\n            for (var k = removeLiIdxes.length - 1; k >= 0; k--) {\n                this.updateLiCollection(removeLiIdxes[k]);\n            }\n        }\n        else {\n            itemIndex = itemIndex ? itemIndex : 0;\n            liCollections.push(liElement[itemIndex]);\n            this.listData.splice(itemIndex, 1);\n            this.jsonData.splice(itemIndex, 1);\n            this.updateLiCollection(itemIndex);\n        }\n        for (var i = 0; i < liCollections.length; i++) {\n            this.ulElement.removeChild(liCollections[i]);\n        }\n        if (this.listData.length === 0) {\n            this.l10nUpdate();\n        }\n        this.value = [];\n        this.updateToolBarState();\n    };\n    /**\n     * Gets the array of data Object that matches the given array of values.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n     * @returns {object[]}.\n     */\n    ListBox.prototype.getDataByValues = function (value) {\n        var data = [];\n        for (var i = 0; i < value.length; i++) {\n            data.push(this.getDataByValue(value[i]));\n        }\n        return data;\n    };\n    /**\n     * Moves the given value(s) / selected value(s) upwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveUp = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(true, false, elem);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) downwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveDown = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(false, false, elem);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n     * @param {number} index - Specifies the index.\n     * @param {string} targetId - Specifies the target id.\n     * @returns {void}\n     */\n    ListBox.prototype.moveTo = function (value, index, targetId) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        var tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n        this.moveData(this, tlistbox, false, elem, index);\n    };\n    /**\n     * Moves all the values from one ListBox to the scoped ListBox.\n     *\n     * @param  { string } targetId - Specifies the scoped ListBox ID.\n     * @param  { string } index - Specifies the index to where the items moved.\n     * @returns {void}\n     */\n    ListBox.prototype.moveAllTo = function (targetId, index) {\n        if (this.listData.length > 0) {\n            var tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n            this.moveAllData(this, tlistbox, false, index);\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Gets the updated dataSource in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n     */\n    /* eslint-enable */\n    ListBox.prototype.getDataList = function () {\n        return this.jsonData;\n    };\n    /* eslint-disable */\n    /**\n     * Returns the sorted Data in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n     */\n    /* eslint-enable */\n    ListBox.prototype.getSortedList = function () {\n        var sortData;\n        var tempData;\n        sortData = tempData = this.sortedData;\n        if (this.fields.groupBy) {\n            sortData = [];\n            for (var i = 0; i < tempData.length; i++) {\n                if (tempData[i].isHeader) {\n                    continue;\n                }\n                sortData.push(tempData[i]);\n            }\n        }\n        return sortData;\n    };\n    ListBox.prototype.getElemByValue = function (value) {\n        var elem = [];\n        for (var i = 0; i < value.length; i++) {\n            elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n        }\n        return elem;\n    };\n    ListBox.prototype.updateLiCollection = function (index) {\n        var tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 1);\n        this.liCollections = tempLi;\n    };\n    ListBox.prototype.selectAllItems = function (state, event) {\n        var _this = this;\n        [].slice.call(this.getItems()).forEach(function (li) {\n            if (!li.classList.contains(cssClass.disabled)) {\n                if (_this.selectionSettings.showCheckbox) {\n                    var ele = li.getElementsByClassName('e-check')[0];\n                    if ((!ele && state) || (ele && !state)) {\n                        _this.notify('updatelist', { li: li, module: 'listbox' });\n                        if (_this.maximumSelectionLength >= _this.list.querySelectorAll('.e-list-item span.e-check').length) {\n                            _this.checkMaxSelection();\n                        }\n                    }\n                }\n                else {\n                    if (state) {\n                        li.classList.add(cssClass.selected);\n                    }\n                    else {\n                        li.classList.remove(cssClass.selected);\n                    }\n                }\n            }\n        });\n        this.updateSelectedOptions();\n        if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n            var liEle = this.list.getElementsByTagName('li');\n            var index = 0;\n            if (state) {\n                var _loop_1 = function () {\n                    var dataValue1 = this_1.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    if (!this_1.value.some(function (e) { return e === dataValue1; })) {\n                        this_1.value.push(this_1.getFormattedValue(liEle[index].getAttribute('data-value')));\n                    }\n                };\n                var this_1 = this;\n                for (index = 0; index < liEle.length; index++) {\n                    _loop_1();\n                }\n            }\n            else {\n                var _loop_2 = function () {\n                    var dataValue2 = this_2.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    this_2.value = this_2.value.filter(function (e) { return e !== dataValue2; });\n                };\n                var this_2 = this;\n                for (index = 0; index < liEle.length; index++) {\n                    _loop_2();\n                }\n            }\n            if (document.querySelectorAll('ul').length < 2) {\n                this.updateMainList();\n            }\n        }\n        this.triggerChange(this.getSelectedItems(), event);\n    };\n    ListBox.prototype.updateMainList = function () {\n        var mainList = this.mainList.querySelectorAll('.e-list-item');\n        var ulList = this.ulElement.querySelectorAll('.e-list-item');\n        var mainCount = mainList.length;\n        var ulEleCount = ulList.length;\n        if (this.selectionSettings.showCheckbox || (document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount)) {\n            var listindex = 0;\n            var valueindex = 0;\n            var count = 0;\n            for (listindex; listindex < mainCount;) {\n                if (this.value) {\n                    for (valueindex; valueindex < this.value.length; valueindex++) {\n                        if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n                            count++;\n                        }\n                    }\n                }\n                if (!count && this.selectionSettings.showCheckbox) {\n                    mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n                }\n                if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n                    this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n                    listindex = 0;\n                }\n                else {\n                    listindex++;\n                }\n                count = 0;\n                valueindex = 0;\n            }\n        }\n    };\n    ListBox.prototype.wireEvents = function () {\n        var form = closest(this.element, 'form');\n        var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.add(this.list, 'click', this.clickHandler, this);\n        EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n        EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n        this.wireToolbarEvent();\n        if (this.selectionSettings.showCheckbox) {\n            EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n        }\n        if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        }\n        if (form) {\n            EventHandler.add(form, 'reset', this.formResetHandler, this);\n        }\n    };\n    ListBox.prototype.wireToolbarEvent = function () {\n        if (this.toolbarSettings.items.length) {\n            EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n        }\n    };\n    ListBox.prototype.unwireEvents = function () {\n        var form = closest(this.element, 'form');\n        var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.remove(this.list, 'click', this.clickHandler);\n        EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n        EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n        if (this.allowFiltering && this.clearFilterIconElem) {\n            EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n        }\n        if (this.toolbarSettings.items.length) {\n            EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n        }\n        if (form) {\n            EventHandler.remove(form, 'reset', this.formResetHandler);\n        }\n    };\n    ListBox.prototype.clickHandler = function (e) {\n        this.selectHandler(e);\n    };\n    ListBox.prototype.checkSelectAll = function () {\n        var searchCount = 0;\n        var liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        for (var i = 0; i < liItems.length; i++) {\n            if (!liItems[i].classList.contains('e-disabled')) {\n                searchCount++;\n            }\n        }\n        var len = this.getSelectedItems().length;\n        if (this.showSelectAll && searchCount) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection',\n                value: (searchCount === len) ? 'check' : (len === 0) ? 'uncheck' : 'indeterminate' });\n        }\n    };\n    ListBox.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.allowFiltering) {\n            var filterType = this.inputString === '' ? 'contains' : this.filterType;\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (dataType === null) {\n                dataType = this.typeOfData(this.jsonData).typeof;\n            }\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query : this.query ? this.query : new Query();\n        }\n        return filterQuery;\n    };\n    ListBox.prototype.setFiltering = function () {\n        var filterInputObj;\n        if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n            this.filterParent = this.createElement('span', {\n                className: listBoxClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: listBoxClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: [listBoxClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            append([filterInputObj.container], this.filterParent);\n            prepend([this.filterParent], this.list);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-label': 'search list item',\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            if (this.height.toString().indexOf('%') < 0) {\n                addClass([this.list], 'e-filter-list');\n            }\n            this.inputString = this.filterInput.value;\n            this.filterWireEvents();\n            return filterInputObj;\n        }\n    };\n    ListBox.prototype.filterWireEvents = function (filterElem) {\n        if (filterElem) {\n            this.filterInput = filterElem.querySelector('.e-input-filter');\n        }\n        this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n        if (this.clearFilterIconElem) {\n            EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n            if (!filterElem) {\n                this.clearFilterIconElem.style.visibility = 'hidden';\n            }\n        }\n        EventHandler.add(this.filterInput, 'input', this.onInput, this);\n        EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n        EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n    };\n    ListBox.prototype.selectHandler = function (e, isKey) {\n        var isSelect = true;\n        var currSelIdx;\n        var li = closest(e.target, '.' + 'e-list-item');\n        var selectedLi = [li];\n        if (li && li.parentElement) {\n            currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            if (!this.selectionSettings.showCheckbox) {\n                if ((e.ctrlKey || e.metaKey || Browser.isDevice) && this.isSelected(li)) {\n                    li.classList.remove(cssClass.selected);\n                    li.removeAttribute('aria-selected');\n                    isSelect = false;\n                }\n                else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || e.metaKey || Browser.isDevice))) {\n                    this.getSelectedItems().forEach(function (ele) {\n                        ele.removeAttribute('aria-selected');\n                    });\n                    removeClass(this.getSelectedItems(), cssClass.selected);\n                }\n            }\n            else {\n                isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n            }\n            if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n                selectedLi = [].slice.call(li.parentElement.children)\n                    .slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1)\n                    .filter(function (ele) { return ele.classList.contains('e-list-item'); });\n            }\n            else {\n                this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            }\n            if (isSelect) {\n                if (!this.selectionSettings.showCheckbox) {\n                    addClass(selectedLi, cssClass.selected);\n                }\n                selectedLi.forEach(function (ele) {\n                    ele.setAttribute('aria-selected', 'true');\n                });\n                this.list.setAttribute('aria-activedescendant', li.id);\n            }\n            else {\n                selectedLi.forEach(function (ele) {\n                    ele.setAttribute('aria-selected', 'false');\n                });\n            }\n            if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) &&\n                (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) &&\n                !(this.maximumSelectionLength < (this.value && this.value.length))) {\n                this.notify('updatelist', { li: li, e: e, module: 'listbox' });\n            }\n            if (this.allowFiltering && !isKey) {\n                var liDataValue_1 = this.getFormattedValue(li.getAttribute('data-value'));\n                if (!isSelect) {\n                    this.value = this.value.filter(function (value1) {\n                        return value1 !== liDataValue_1;\n                    });\n                }\n                else {\n                    var values = [];\n                    extend(values, this.value);\n                    values.push(liDataValue_1);\n                    this.value = values;\n                }\n                if (document.querySelectorAll('ul').length < 2) {\n                    this.updateMainList();\n                }\n            }\n            this.updateSelectedOptions();\n            this.triggerChange(this.getSelectedItems(), e);\n            if (this.list) {\n                this.checkMaxSelection();\n            }\n        }\n    };\n    ListBox.prototype.triggerChange = function (selectedLis, event) {\n        this.trigger('change', { elements: selectedLis, items: this.getDataByElements(selectedLis), value: this.value, event: event });\n    };\n    ListBox.prototype.getDataByElems = function (elems) {\n        var data = [];\n        for (var i = 0, len = elems.length; i < len; i++) {\n            data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n        }\n        return data;\n    };\n    ListBox.prototype.getDataByElements = function (elems) {\n        var data = [];\n        var value;\n        var sIdx = 0;\n        if (!isNullOrUndefined(this.listData)) {\n            var type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    for (var i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && item === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    for (var i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            return data;\n        }\n        return null;\n    };\n    ListBox.prototype.checkMaxSelection = function () {\n        var limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n        if (this.selectionSettings.showCheckbox) {\n            var index = 0;\n            var liCollElem = this.list.getElementsByClassName('e-list-item');\n            for (index; index < liCollElem.length; index++) {\n                if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n                    if (limit === this.maximumSelectionLength) {\n                        liCollElem[index].classList.add('e-disable');\n                    }\n                    else if (liCollElem[index].classList.contains('e-disable')) {\n                        liCollElem[index].classList.remove('e-disable');\n                    }\n                }\n            }\n        }\n    };\n    ListBox.prototype.toolbarClickHandler = function (e) {\n        var btn = closest(e.target, 'button');\n        if (btn) {\n            this.toolbarAction = btn.getAttribute('data-value');\n            if (btn.disabled) {\n                return;\n            }\n            switch (this.toolbarAction) {\n                case 'moveUp':\n                    this.moveUpDown(true);\n                    break;\n                case 'moveDown':\n                    this.moveUpDown();\n                    break;\n                case 'moveTo':\n                    this.moveItemTo();\n                    break;\n                case 'moveFrom':\n                    this.moveItemFrom();\n                    break;\n                case 'moveAllTo':\n                    this.moveAllItemTo();\n                    break;\n                case 'moveAllFrom':\n                    this.moveAllItemFrom();\n                    break;\n                default:\n                    this.trigger('actionBegin', { cancel: false, items: this.getDataByElems(this.getSelectedItems()),\n                        eventName: this.toolbarAction });\n                    break;\n            }\n        }\n    };\n    ListBox.prototype.moveUpDown = function (isUp, isKey, value) {\n        var _this = this;\n        var elems = this.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        if (((isUp && this.isSelected(this.ulElement.firstElementChild))\n            || (!isUp && this.isSelected(this.ulElement.lastElementChild))) && !value) {\n            return;\n        }\n        var tempItems = this.getDataByElems(elems);\n        var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        this.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        (isUp ? elems : elems.reverse()).forEach(function (ele) {\n            var jsonToIdx = Array.prototype.indexOf.call(_this.ulElement.querySelectorAll('.e-list-item'), ele);\n            var idx = Array.prototype.indexOf.call(_this.ulElement.children, ele);\n            moveTo(_this.ulElement, _this.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n            _this.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n        });\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        elems[0].focus();\n        if (!isKey && this.toolbarSettings.items.length) {\n            this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n        }\n        this.updateToolBarState();\n    };\n    ListBox.prototype.moveItemTo = function () {\n        this.moveData(this, this.getScopedListBox());\n    };\n    ListBox.prototype.moveItemFrom = function () {\n        this.moveData(this.getScopedListBox(), this);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBox} fListBox - Specifies the from listbox.\n     * @param {ListBox} tListBox - Specifies the to listbox.\n     * @param {boolean} isKey - Specifies the key.\n     * @param {Element[]} value - Specifies the value.\n     * @param {number} index - Specifies the index.\n     * @returns {void}\n     * @private\n     */\n    ListBox.prototype.moveData = function (fListBox, tListBox, isKey, value, index) {\n        var idx = [];\n        var dataIdx = [];\n        var jsonIdx = [];\n        var sortIdx = [];\n        var listData = [].slice.call(fListBox.listData);\n        var tListData = [].slice.call(tListBox.listData);\n        var sortData = [].slice.call(fListBox.sortedData);\n        var tSortData = [].slice.call(tListBox.sortedData);\n        var fliCollections = [].slice.call(fListBox.liCollections);\n        var dataLiIdx = [];\n        var tliCollections = [].slice.call(tListBox.liCollections);\n        var tempItems = [];\n        var data = [];\n        var elems = fListBox.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        var isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        fListBox.value = [];\n        if (elems.length) {\n            this.removeSelected(fListBox, elems);\n            elems.forEach(function (ele) {\n                idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n                // To update lb view data\n                dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele));\n                // To update lb listdata data\n                dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0]));\n                // To update lb sorted data\n                sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0]));\n                // To update lb original data\n                jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n            });\n            if (this.sortOrder !== 'None') {\n                sortIdx.forEach(function (i) {\n                    tempItems.push(fListBox.sortedData[i]);\n                });\n            }\n            else {\n                jsonIdx.forEach(function (i) {\n                    tempItems.push(fListBox.jsonData[i]);\n                });\n            }\n            var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n            fListBox.trigger('actionBegin', localDataArgs);\n            if (localDataArgs.cancel) {\n                return;\n            }\n            var rLiCollection_1 = [];\n            dataLiIdx.sort(function (n1, n2) { return n1 - n2; }).reverse().forEach(function (i) {\n                rLiCollection_1.push(fliCollections.splice(i, 1)[0]);\n            });\n            fListBox.liCollections = fliCollections;\n            if (index) {\n                var toColl = tliCollections.splice(0, index);\n                tListBox.liCollections = toColl.concat(rLiCollection_1.reverse()).concat(tliCollections);\n            }\n            else {\n                tListBox.liCollections = tliCollections.concat(rLiCollection_1.reverse());\n            }\n            if (tListBox.listData.length === 0) {\n                var noRecElem = tListBox.ulElement.childNodes[0];\n                if (noRecElem) {\n                    tListBox.ulElement.removeChild(noRecElem);\n                }\n            }\n            dataIdx.sort(function (n1, n2) { return n2 - n1; }).forEach(function (i) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                listData.splice(i, 1)[0];\n            });\n            sortIdx.sort(function (n1, n2) { return n2 - n1; }).forEach(function (i) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                sortData.splice(i, 1)[0];\n            });\n            jsonIdx.slice().reverse().forEach(function (i) {\n                data.push(fListBox.jsonData.splice(i, 1)[0]);\n            });\n            if (isRefresh) {\n                if (fListBox.fields.groupBy) {\n                    var sourceElem = fListBox.renderItems(listData, fListBox.fields);\n                    fListBox.updateListItems(sourceElem, fListBox.ulElement);\n                }\n                else {\n                    elems.forEach(function (ele) { detach(ele); });\n                }\n            }\n            else {\n                moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n                tListBox.mainList = tListBox.ulElement;\n            }\n            fListBox.updateMainList();\n            var tJsonData = [].slice.call(tListBox.jsonData);\n            tSortData = [].slice.call(tListBox.sortedData);\n            this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n            if (isKey) {\n                this.list.focus();\n            }\n            fListBox.listData = listData;\n            fListBox.sortedData = sortData;\n            index = (index) ? index : tListData.length;\n            for (var i = tempItems.length - 1; i >= 0; i--) {\n                tListData.splice(index, 0, tempItems[i]);\n                tJsonData.splice(index, 0, tempItems[i]);\n                tSortData.splice(index, 0, tempItems[i]);\n            }\n            tListBox.listData = tListData;\n            tListBox.jsonData = tJsonData;\n            tListBox.sortedData = tSortData;\n            if (isRefresh) {\n                var sourceElem = tListBox.renderItems(tListData, tListBox.fields);\n                tListBox.updateListItems(sourceElem, tListBox.ulElement);\n                tListBox.setSelection();\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            fListBox.updateSelectedOptions();\n            if (fListBox.listData.length === 0) {\n                fListBox.l10nUpdate();\n            }\n        }\n        if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n            fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n        }\n    };\n    ListBox.prototype.selectNextList = function (elems, dataLiIdx, dataIdx, inst) {\n        var childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n        var ele;\n        var liIdx;\n        var validIdx = -1;\n        if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n            liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n            ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n            validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n            if (validIdx > -1) {\n                (inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected));\n            }\n        }\n    };\n    ListBox.prototype.moveAllItemTo = function () {\n        this.moveAllData(this, this.getScopedListBox());\n    };\n    ListBox.prototype.moveAllItemFrom = function () {\n        this.moveAllData(this.getScopedListBox(), this);\n    };\n    ListBox.prototype.moveAllData = function (fListBox, tListBox, isKey, index) {\n        var listData = [].slice.call(tListBox.listData);\n        var jsonData = [].slice.call(tListBox.jsonData);\n        var isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        this.removeSelected(fListBox, fListBox.getSelectedItems());\n        var tempItems = [].slice.call(fListBox.listData);\n        var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        fListBox.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        if (tListBox.listData.length === 0) {\n            var noRecElem = tListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                tListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        if (isRefresh) {\n            var noRecElem = fListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                fListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        moveTo(fListBox.ulElement, tListBox.ulElement, \n        // eslint-disable-next-line prefer-spread\n        Array.apply(null, { length: fListBox.ulElement.childElementCount }).map(Number.call, Number), index);\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        if (isKey) {\n            this.list.focus();\n        }\n        index = (index) ? index : listData.length;\n        for (var i = 0; i < fListBox.listData.length; i++) {\n            listData.splice(index + i, 0, fListBox.listData[i]);\n        }\n        for (var i = 0; i < fListBox.jsonData.length; i++) {\n            jsonData.splice(index + i, 0, fListBox.jsonData[i]);\n        }\n        var fliCollections = [].slice.call(fListBox.liCollections);\n        var tliCollections = [].slice.call(tListBox.liCollections);\n        fListBox.liCollections = [];\n        if (index) {\n            var toColl = tliCollections.splice(0, index);\n            tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n        }\n        else {\n            tListBox.liCollections = tliCollections.concat(fliCollections);\n        }\n        fListBox.value = [];\n        listData = listData\n            .filter(function (data) { return data.isHeader !== true; });\n        var sortedData = listData.filter(function (val) {\n            return tListBox.jsonData.indexOf(val) === -1;\n        });\n        for (var i = 0; i < sortedData.length; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            tListBox.jsonData.splice(index + i, 0, sortedData[i]);\n        }\n        tListBox.listData = listData;\n        if (fListBox.listData.length === fListBox.jsonData.length) {\n            fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n        }\n        else if (fListBox.allowFiltering) {\n            for (var i = 0; i < fListBox.listData.length; i++) {\n                for (var j = 0; j < fListBox.jsonData.length; j++) {\n                    if (fListBox.listData[i] === fListBox.jsonData[j]) {\n                        fListBox.jsonData.splice(j, 1);\n                    }\n                }\n            }\n            fListBox.listData = fListBox.sortedData = [];\n        }\n        if (isRefresh) {\n            var sourceElem = tListBox.renderItems(listData, tListBox.fields);\n            tListBox.updateListItems(sourceElem, tListBox.ulElement);\n            this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        }\n        else {\n            tListBox.sortedData = listData;\n        }\n        fListBox.updateSelectedOptions();\n        if (fListBox.listData.length === 0) {\n            fListBox.l10nUpdate();\n        }\n    };\n    ListBox.prototype.changeData = function (fromIdx, toIdx, jsonToIdx, ele) {\n        var listData = [].slice.call(this.listData);\n        var jsonData = [].slice.call(this.jsonData);\n        var sortData = [].slice.call(this.sortedData);\n        var jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n        var sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n        var liColl = [].slice.call(this.liCollections);\n        listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n        jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n        sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n        liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n        this.listData = listData;\n        this.jsonData = jsonData;\n        this.liCollections = liColl;\n        this.sortedData = sortData;\n    };\n    ListBox.prototype.getSelectedItems = function () {\n        var ele = [];\n        if (this.selectionSettings.showCheckbox) {\n            [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach(function (cbox) {\n                ele.push(closest(cbox, '.' + 'e-list-item'));\n            });\n        }\n        else {\n            ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n        }\n        return ele;\n    };\n    ListBox.prototype.getScopedListBox = function () {\n        var _this = this;\n        var listObj;\n        if (this.scope) {\n            [].slice.call(document.querySelectorAll(this.scope)).forEach(function (ele) {\n                if (getComponent(ele, _this.getModuleName())) {\n                    listObj = getComponent(ele, _this.getModuleName());\n                }\n            });\n        }\n        return listObj;\n    };\n    ListBox.prototype.getGrabbedItems = function (args) {\n        var grabbItems = false;\n        for (var i = 0; i < this.value.length; i++) {\n            if (this.value[i] === this.getFormattedValue(args.target.getAttribute('data-value'))) {\n                grabbItems = true;\n                break;\n            }\n        }\n        if (grabbItems) {\n            for (var i = 0; i < this.value.length; i++) {\n                var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n                for (var j = 0; j < liColl.length; j++) {\n                    if (this.value[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n                        liColl[j].classList.add('e-grabbed');\n                    }\n                }\n            }\n        }\n        var elems;\n        if (this.isAngular) {\n            elems = Array.prototype.slice.call(this.element.getElementsByClassName('e-list-parent')[0].querySelectorAll('.e-grabbed'));\n        }\n        else {\n            elems = Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll('.e-grabbed'));\n        }\n        return elems;\n    };\n    ListBox.prototype.getDragArgs = function (args, isDragEnd) {\n        var elems = this.getGrabbedItems(args);\n        if (elems.length) {\n            if (isDragEnd) {\n                elems.push(args.target);\n            }\n        }\n        else {\n            elems = [args.target];\n        }\n        return { elements: elems, items: this.getDataByElems(elems) };\n    };\n    ListBox.prototype.onKeyDown = function (e) {\n        this.keyDownHandler(e);\n        e.stopPropagation();\n    };\n    ListBox.prototype.keyDownHandler = function (e) {\n        if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && !this.allowFiltering) {\n            if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n                return;\n            }\n            e.preventDefault();\n            if (e.keyCode === 32 && this.ulElement.children.length) {\n                this.selectHandler({\n                    target: this.ulElement.getElementsByClassName('e-focused')[0],\n                    ctrlKey: e.ctrlKey, shiftKey: e.shiftKey\n                });\n            }\n            else if (e.keyCode === 65 && e.ctrlKey) {\n                this.selectAll();\n            }\n            else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n                this.moveUpDown(e.keyCode === 38 ? true : false, true);\n            }\n            else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n                var listObj = this.tBListBox || this.getScopedListBox();\n                if (e.keyCode === 39) {\n                    if (e.shiftKey) {\n                        this.moveAllData(this, listObj, true);\n                    }\n                    else {\n                        this.moveData(this, listObj, true);\n                    }\n                }\n                else {\n                    if (e.shiftKey) {\n                        this.moveAllData(listObj, this, true);\n                    }\n                    else {\n                        this.moveData(listObj, this, true);\n                    }\n                }\n            }\n            else if (e.keyCode !== 37 && e.keyCode !== 39 && e.code !== 'KeyA') {\n                this.upDownKeyHandler(e);\n            }\n        }\n        else if (this.allowFiltering) {\n            if (e.keyCode === 40 || e.keyCode === 38) {\n                this.upDownKeyHandler(e);\n            }\n        }\n    };\n    ListBox.prototype.upDownKeyHandler = function (e) {\n        var ul = this.ulElement;\n        var defaultIdx = (e.keyCode === 40 || e.keyCode === 36) ? 0 : ul.childElementCount - 1;\n        var fliIdx = defaultIdx;\n        var fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n        if (fli) {\n            if (e.keyCode !== 35 && e.keyCode !== 36) {\n                fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n                if (e.keyCode === 40) {\n                    fliIdx++;\n                }\n                else {\n                    fliIdx--;\n                }\n                if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n                    return;\n                }\n            }\n            removeClass([fli], 'e-focused');\n        }\n        var cli = ul.children[fliIdx];\n        if (cli) {\n            fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n            if (fliIdx === -1) {\n                addClass([fli], 'e-focused');\n                return;\n            }\n            ul.children[fliIdx].focus();\n            ul.children[fliIdx].classList.add('e-focused');\n            if (!e.ctrlKey || !this.selectionSettings.showCheckbox && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n                this.selectHandler({ target: ul.children[fliIdx], ctrlKey: e.ctrlKey, shiftKey: e.shiftKey }, true);\n            }\n            if (this.selectionSettings.showCheckbox && e.ctrlKey && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n                var selectedidx = Array.prototype.indexOf.call(ul.children, fli);\n                var sidx = e.code === 'Home' ? 0 : selectedidx;\n                var eidx = e.code === 'Home' ? selectedidx : ul.children.length - 1;\n                for (var i = sidx; i <= eidx; i++) {\n                    var item = ul.children[i];\n                    this.notify('updatelist', { li: item, e: {\n                            target: this.ulElement.getElementsByClassName('e-focused')[0],\n                            ctrlKey: e.ctrlKey, shiftKey: e.shiftKey\n                        }, module: 'listbox' });\n                }\n            }\n        }\n    };\n    ListBox.prototype.KeyUp = function (e) {\n        var _this = this;\n        var char = String.fromCharCode(e.keyCode);\n        var isWordCharacter = char.match(/\\w/);\n        if (!isNullOrUndefined(isWordCharacter)) {\n            this.isValidKey = true;\n        }\n        this.isValidKey = (e.keyCode === 8) || (e.keyCode === 46) || this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                default:\n                    if (this.allowFiltering) {\n                        var eventArgsData_1 = {\n                            preventDefaultAction: false,\n                            text: this.targetElement(),\n                            updateData: function (dataSource, query, fields) {\n                                if (eventArgsData_1.cancel) {\n                                    return;\n                                }\n                                _this.isFiltered = true;\n                                _this.remoteFilterAction = true;\n                                _this.dataUpdater(dataSource, query, fields);\n                            },\n                            event: e,\n                            cancel: false\n                        };\n                        this.trigger('filtering', eventArgsData_1, function (args) {\n                            _this.isDataFetched = false;\n                            if (args.cancel || (_this.filterInput.value !== '' && _this.isFiltered)) {\n                                return;\n                            }\n                            if (!args.cancel && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                                _this.inputString = _this.filterInput.value;\n                                _this.filteringAction(_this.jsonData, new Query(), _this.fields);\n                            }\n                            if (!_this.isFiltered && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                                _this.dataUpdater(_this.jsonData, new Query(), _this.fields);\n                            }\n                        });\n                    }\n            }\n        }\n    };\n    /**\n     * To filter the data from given data source by using query.\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}.\n     */\n    ListBox.prototype.filter = function (dataSource, query, fields) {\n        this.isCustomFiltering = true;\n        this.filteringAction(dataSource, query, fields);\n    };\n    ListBox.prototype.filteringAction = function (dataSource, query, fields) {\n        this.resetList(dataSource, fields, query);\n    };\n    ListBox.prototype.targetElement = function () {\n        this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n        return this.targetInputElement.value;\n    };\n    ListBox.prototype.dataUpdater = function (dataSource, query, fields) {\n        this.isDataFetched = false;\n        var backCommand = true;\n        if (this.targetElement().trim() === '') {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (backCommand) {\n                this.remoteCustomValue = false;\n                this.onActionComplete(list, this.jsonData);\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.selectionSettings.showCheckbox, e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n        }\n    };\n    ListBox.prototype.focusOutHandler = function () {\n        var ele = this.list.getElementsByClassName('e-focused')[0];\n        if (ele) {\n            ele.classList.remove('e-focused');\n        }\n        if (this.allowFiltering) {\n            this.refreshClearIcon();\n        }\n    };\n    ListBox.prototype.getValidIndex = function (cli, index, keyCode) {\n        var cul = this.ulElement;\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            if (keyCode === 40 || keyCode === 36) {\n                index++;\n            }\n            else {\n                index--;\n            }\n        }\n        if (index < 0 || index === cul.childElementCount) {\n            return -1;\n        }\n        cli = cul.childNodes[index];\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            index = this.getValidIndex(cli, index, keyCode);\n        }\n        return index;\n    };\n    ListBox.prototype.updateSelectedOptions = function () {\n        var _this = this;\n        var selectedOptions = [];\n        var values = [];\n        extend(values, this.value);\n        this.getSelectedItems().forEach(function (ele) {\n            if (!ele.classList.contains('e-grabbed')) {\n                selectedOptions.push(_this.getFormattedValue(ele.getAttribute('data-value')));\n            }\n        });\n        if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n            if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n                for (var i = 0; i < selectedOptions.length; i++) {\n                    if (values.indexOf(selectedOptions[i]) > -1) {\n                        continue;\n                    }\n                    else {\n                        values.push(selectedOptions[i]);\n                    }\n                }\n                this.setProperties({ value: values }, true);\n            }\n            else {\n                this.setProperties({ value: selectedOptions }, true);\n            }\n        }\n        this.updateSelectTag();\n        this.updateToolBarState();\n        if (this.tBListBox) {\n            this.tBListBox.updateToolBarState();\n        }\n    };\n    ListBox.prototype.clearSelection = function (values) {\n        var _this = this;\n        if (values === void 0) { values = this.value; }\n        if (this.selectionSettings.showCheckbox) {\n            var dvalue_1;\n            this.getSelectedItems().forEach(function (li) {\n                dvalue_1 = _this.getFormattedValue(li.getAttribute('data-value'));\n                if (values.indexOf(dvalue_1) < 0) {\n                    li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n                    li.removeAttribute('aria-selected');\n                }\n            });\n        }\n    };\n    ListBox.prototype.setSelection = function (values, isSelect, isText) {\n        var _this = this;\n        if (values === void 0) { values = this.value; }\n        if (isSelect === void 0) { isSelect = true; }\n        if (isText === void 0) { isText = false; }\n        var li;\n        var liselect;\n        if (values) {\n            values.forEach(function (value) {\n                var text;\n                if (isText) {\n                    text = _this.getValueByText(value);\n                }\n                else {\n                    text = value;\n                }\n                if (typeof (text) === 'string') {\n                    text = text.split('\\\\').join('\\\\\\\\');\n                    li = _this.list.querySelector('[data-value=\"' + text.replace(/\"/g, '\\\\\"') + '\"]');\n                }\n                else {\n                    li = _this.list.querySelector('[data-value=\"' + text + '\"]');\n                }\n                if (li) {\n                    if (_this.selectionSettings.showCheckbox) {\n                        liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n                    }\n                    else {\n                        liselect = li.classList.contains('e-selected');\n                    }\n                    if (!isSelect && liselect || isSelect && !liselect && li) {\n                        if (_this.selectionSettings.showCheckbox) {\n                            _this.notify('updatelist', { li: li, module: 'listbox' });\n                            li.focus();\n                        }\n                        else {\n                            if (isSelect) {\n                                li.classList.add(cssClass.selected);\n                                li.setAttribute('aria-selected', 'true');\n                                li.focus();\n                            }\n                            else {\n                                li.classList.remove(cssClass.selected);\n                                li.removeAttribute('aria-selected');\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        this.updateSelectTag();\n    };\n    ListBox.prototype.updateSelectTag = function () {\n        var ele = this.getSelectTag();\n        var innerHTML = '';\n        ele.innerHTML = '';\n        if (this.value) {\n            for (var i = 0, len = this.value.length; i < len; i++) {\n                innerHTML += '<option selected>' + this.value[i] + '</option>';\n            }\n            ele.innerHTML += innerHTML;\n            for (var i = 0, len = ele.childNodes.length; i < len; i++) {\n                ele.childNodes[i].setAttribute('value', this.value[i].toString());\n            }\n        }\n        this.checkSelectAll();\n    };\n    ListBox.prototype.checkDisabledState = function (inst) {\n        return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n    };\n    ListBox.prototype.updateToolBarState = function () {\n        var _this = this;\n        if (this.toolbarSettings.items.length) {\n            var listObj_1 = this.getScopedListBox();\n            var wrap_1 = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n            this.toolbarSettings.items.forEach(function (value) {\n                var btn = wrap_1.querySelector('[data-value=\"' + value + '\"]');\n                switch (value) {\n                    case 'moveAllTo':\n                        btn.disabled = _this.checkDisabledState(_this);\n                        break;\n                    case 'moveAllFrom':\n                        btn.disabled = _this.checkDisabledState(listObj_1);\n                        break;\n                    case 'moveFrom':\n                        btn.disabled = listObj_1.value && listObj_1.value.length ? false : true;\n                        break;\n                    case 'moveUp':\n                        btn.disabled = _this.value && _this.value.length\n                            && !_this.isSelected(_this.ulElement.children[0]) ? false : true;\n                        break;\n                    case 'moveDown':\n                        btn.disabled = _this.value && _this.value.length\n                            && !_this.isSelected(_this.ulElement.children[_this.ulElement.childElementCount - 1]) ? false : true;\n                        break;\n                    default:\n                        btn.disabled = _this.value && _this.value.length ? false : true;\n                        break;\n                }\n            });\n        }\n    };\n    ListBox.prototype.setCheckboxPosition = function () {\n        var listWrap = this.list;\n        if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n            listWrap.classList.remove('e-right');\n        }\n        if (this.selectionSettings.checkboxPosition === 'Right') {\n            listWrap.classList.add('e-right');\n        }\n    };\n    ListBox.prototype.showCheckbox = function (showCheckbox) {\n        var index = 0;\n        var liColl = this.list.lastElementChild.querySelectorAll('li');\n        var liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n        if (showCheckbox) {\n            this.ulElement = this.renderItems(this.listData, this.fields);\n            this.mainList = this.ulElement;\n            this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n            this.list.appendChild(this.ulElement);\n            if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                var l10nShow = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                this.showSelectAll = true;\n                this.selectAllText = l10nShow.getConstant('selectAllText');\n                this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n                this.popupWrapper = this.list;\n                this.checkBoxSelectionModule.checkAllParent = null;\n                this.notify('selectAll', {});\n                this.checkSelectAll();\n            }\n        }\n        else {\n            if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n            }\n            for (index; index < liCollLen; index++) {\n                if (liColl[index].classList.contains('e-list-item')) {\n                    liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n                }\n                if (liColl[index].hasAttribute('aria-selected')) {\n                    liColl[index].removeAttribute('aria-selected');\n                }\n            }\n            this.mainList = this.ulElement;\n        }\n        this.value = [];\n    };\n    ListBox.prototype.isSelected = function (ele) {\n        if (!isNullOrUndefined(ele)) {\n            return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n        }\n        else {\n            return false;\n        }\n    };\n    ListBox.prototype.getSelectTag = function () {\n        return this.list.getElementsByClassName('e-hidden-select')[0];\n    };\n    ListBox.prototype.getToolElem = function () {\n        return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n    };\n    ListBox.prototype.formResetHandler = function () {\n        this.value = this.initialSelectedOptions;\n    };\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - Module name\n     */\n    ListBox.prototype.getModuleName = function () {\n        return 'listbox';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    ListBox.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    ListBox.prototype.getLocaleName = function () {\n        return 'listbox';\n    };\n    ListBox.prototype.destroy = function () {\n        this.unwireEvents();\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.innerHTML = '';\n        }\n        else {\n            this.element.style.display = 'inline-block';\n            if (this.toolbarSettings.items.length) {\n                this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n                detach(this.list.nextElementSibling);\n            }\n            this.list.parentElement.insertBefore(this.element, this.list);\n        }\n        _super.prototype.destroy.call(this);\n        this.enableRtlElements = [];\n        this.liCollections = null;\n        this.list = null;\n        this.ulElement = null;\n        this.mainList = null;\n        this.spinner = null;\n        this.rippleFun = null;\n        if (this.itemTemplate) {\n            this.clearTemplate();\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBoxModel} newProp - Specifies the new properties.\n     * @param {ListBoxModel} oldProp - Specifies the old properties.\n     * @returns {void}\n     * @private\n     */\n    ListBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([wrap], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([wrap], newProp.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.list.classList.add('e-rtl');\n                    }\n                    else {\n                        this.list.classList.remove('e-rtl');\n                    }\n                    break;\n                case 'value':\n                    removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n                    this.clearSelection(this.value);\n                    this.setSelection();\n                    break;\n                case 'height':\n                    this.setHeight();\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'allowDragAndDrop':\n                    if (newProp.allowDragAndDrop) {\n                        this.initDraggable();\n                    }\n                    else {\n                        getComponent(this.ulElement, 'sortable').destroy();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this.allowFiltering) {\n                        this.setFiltering();\n                    }\n                    else {\n                        this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n                        this.filterParent = null;\n                        removeClass([this.list], 'e-filter-list');\n                    }\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        if (this.filterInput) {\n                            Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n                        }\n                    }\n                    break;\n                case 'scope':\n                    if (this.allowDragAndDrop) {\n                        getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n                    }\n                    if (this.toolbarSettings.items.length) {\n                        if (oldProp.scope) {\n                            getComponent(document.querySelector(oldProp.scope), this.getModuleName())\n                                .tBListBox = null;\n                        }\n                        if (newProp.scope) {\n                            getComponent(document.querySelector(newProp.scope), this.getModuleName())\n                                .tBListBox = this;\n                        }\n                    }\n                    break;\n                case 'toolbarSettings': {\n                    var ele = void 0;\n                    var pos = newProp.toolbarSettings.position;\n                    var toolElem = this.getToolElem();\n                    if (pos) {\n                        removeClass([wrap], ['e-right', 'e-left']);\n                        wrap.classList.add('e-' + pos.toLowerCase());\n                        if (pos === 'Left') {\n                            wrap.insertBefore(toolElem, this.list);\n                        }\n                        else {\n                            wrap.appendChild(toolElem);\n                        }\n                    }\n                    if (newProp.toolbarSettings.items) {\n                        if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                            ele = this.list.parentElement;\n                            ele.parentElement.insertBefore(this.list, ele);\n                            detach(ele);\n                        }\n                        this.initToolbarAndStyles();\n                        this.wireToolbarEvent();\n                    }\n                    break;\n                }\n                case 'selectionSettings': {\n                    var showSelectAll = newProp.selectionSettings.showSelectAll;\n                    var showCheckbox = newProp.selectionSettings.showCheckbox;\n                    if (!isNullOrUndefined(showSelectAll)) {\n                        this.showSelectAll = showSelectAll;\n                        if (this.showSelectAll) {\n                            var l10nSel = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                            this.checkBoxSelectionModule.checkAllParent = null;\n                            this.showSelectAll = true;\n                            this.selectAllText = l10nSel.getConstant('selectAllText');\n                            this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                            this.popupWrapper = this.list;\n                        }\n                        this.notify('selectAll', {});\n                        this.checkSelectAll();\n                    }\n                    if (!isNullOrUndefined(showCheckbox)) {\n                        this.showCheckbox(showCheckbox);\n                    }\n                    if (this.selectionSettings.showCheckbox) {\n                        this.setCheckboxPosition();\n                    }\n                    break;\n                }\n                case 'dataSource':\n                    this.isDataSourceUpdate = true;\n                    this.jsonData = [].slice.call(this.dataSource);\n                    break;\n            }\n        }\n    };\n    var ListBox_1;\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"cssClass\", void 0);\n    __decorate$6([\n        Property([])\n    ], ListBox.prototype, \"value\", void 0);\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"height\", void 0);\n    __decorate$6([\n        Property(true)\n    ], ListBox.prototype, \"enabled\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"enablePersistence\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"allowDragAndDrop\", void 0);\n    __decorate$6([\n        Property(1000)\n    ], ListBox.prototype, \"maximumSelectionLength\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"allowFiltering\", void 0);\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"scope\", void 0);\n    __decorate$6([\n        Property(true)\n    ], ListBox.prototype, \"ignoreCase\", void 0);\n    __decorate$6([\n        Property(null)\n    ], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"beforeItemRender\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"filtering\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"select\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"change\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"beforeDrop\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"dragStart\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"drag\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"drop\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"dataBound\", void 0);\n    __decorate$6([\n        Property(null)\n    ], ListBox.prototype, \"groupTemplate\", void 0);\n    __decorate$6([\n        Property('Request failed')\n    ], ListBox.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$6([\n        Property(1000)\n    ], ListBox.prototype, \"zIndex\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"ignoreAccent\", void 0);\n    __decorate$6([\n        Complex({}, ToolbarSettings)\n    ], ListBox.prototype, \"toolbarSettings\", void 0);\n    __decorate$6([\n        Complex({}, SelectionSettings)\n    ], ListBox.prototype, \"selectionSettings\", void 0);\n    ListBox = ListBox_1 = __decorate$6([\n        NotifyPropertyChanges\n    ], ListBox);\n    return ListBox;\n}(DropDownBase));\nvar listBoxClasses = {\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    clearIcon: 'e-clear-icon'\n};\n\n/**\n * export all modules from current location\n */\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\nvar Mention = /** @__PURE__ @class */ (function (_super) {\n    __extends$7(Mention, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {MentionModel} options - Specifies the MentionComponent model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function Mention(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n     * @param {MentionModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'minLength':\n                    this.minLength = newProp.minLength;\n                    break;\n                case 'suffixText':\n                    this.suffixText = newProp.suffixText;\n                    break;\n                case 'allowSpaces':\n                    this.allowSpaces = newProp.allowSpaces;\n                    break;\n                case 'mentionChar':\n                    this.mentionChar = newProp.mentionChar;\n                    break;\n                case 'showMentionChar':\n                    this.showMentionChar = newProp.showMentionChar;\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n            }\n        }\n    };\n    Mention.prototype.updateCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.setCssClass(newClass, [this.inputElement], oldClass);\n        if (this.popupObj) {\n            this.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    Mention.prototype.setCssClass = function (cssClass$$1, elements, oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(cssClass$$1) && cssClass$$1 !== '') {\n            addClass(elements, cssClass$$1.split(' '));\n        }\n    };\n    Mention.prototype.initializeData = function () {\n        this.isSelected = false;\n        this.isFiltered = false;\n        this.beforePopupOpen = false;\n        this.initRemoteRender = false;\n        this.isListResetted = false;\n        this.isPopupOpen = false;\n        this.isCollided = false;\n        this.lineBreak = false;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.preRender = function () {\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.render = function () {\n        var isSelector = typeof this.target === 'string';\n        this.inputElement = !isNullOrUndefined(this.target) ?\n            this.checkAndUpdateInternalComponent(isSelector\n                ? document.querySelector(this.target)\n                : this.target) : this.element;\n        if (this.isContentEditable(this.inputElement)) {\n            this.inputElement.setAttribute('contenteditable', 'true');\n            addClass([this.inputElement], ['e-mention']);\n            if (isNullOrUndefined(this.target)) {\n                addClass([this.inputElement], ['e-editable-element']);\n            }\n        }\n        this.inputElement.setAttribute('role', 'textbox');\n        this.queryString = this.elementValue();\n        this.wireEvent();\n    };\n    Mention.prototype.wireEvent = function () {\n        EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n        this.bindCommonEvent();\n    };\n    Mention.prototype.unWireEvent = function () {\n        EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n        this.unBindCommonEvent();\n    };\n    Mention.prototype.bindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.inputElement, {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.hideSpinner = function () {\n        this.hideWaitingSpinner();\n    };\n    Mention.prototype.hideWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n        }\n        if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n            detach(this.spinnerTemplateElement);\n        }\n    };\n    Mention.prototype.checkAndUpdateInternalComponent = function (targetElement) {\n        if (!this.isVue && targetElement.classList.contains('e-richtexteditor')) {\n            return targetElement.querySelector('.e-content');\n        }\n        if (this.isVue && targetElement.nodeName === 'TEXTAREA' && targetElement.classList.contains('e-rte-hidden')) {\n            var parentElement = targetElement.parentElement;\n            if (parentElement && parentElement.classList.contains('e-richtexteditor')) {\n                return parentElement.querySelector('.e-content');\n            }\n        }\n        return targetElement;\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.popupObj)) {\n            if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n                this.spinnerElement = this.popupObj.element;\n                createSpinner({\n                    target: this.spinnerElement,\n                    width: Browser.isDevice ? '16px' : '14px'\n                }, this.createElement);\n                showSpinner(this.spinnerElement);\n            }\n            if (!isNullOrUndefined(this.spinnerTemplate)) {\n                this.setSpinnerTemplate();\n            }\n        }\n    };\n    Mention.prototype.keyActionHandler = function (e) {\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        var isTabAction = e.action === 'tab' || e.action === 'close';\n        if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape' && e.action !== 'space') {\n            this.renderList();\n        }\n        if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n            isNavigation && this.liCollections.length === 0) || this.isRequested) {\n            return;\n        }\n        if (e.action === 'escape') {\n            e.preventDefault();\n        }\n        this.isSelected = e.action === 'escape' ? false : this.isSelected;\n        switch (e.action) {\n            case 'down':\n            case 'up':\n                this.updateUpDownAction(e);\n                break;\n            case 'tab':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n                    if (li) {\n                        this.setSelection(li, e);\n                    }\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n                        this.updateSelectedItem(this.selectedLI, e, false, true);\n                    }\n                }\n                break;\n            case 'escape':\n                if (this.isPopupOpen) {\n                    this.hidePopup(e);\n                }\n                break;\n        }\n    };\n    Mention.prototype.updateUpDownAction = function (e) {\n        var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n            if (!isNullOrUndefined(li)) {\n                var value = this.getFormattedValue(li.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n            }\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n            index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            var nextItem = isNullOrUndefined(this.activeIndex) ?\n                this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        if (this.isPopupOpen) {\n            e.preventDefault();\n        }\n    };\n    Mention.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    Mention.prototype.unBindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n    };\n    Mention.prototype.onKeyUp = function (e) {\n        var rangetextContent;\n        this.isTyped = e.code !== 'Enter' && e.code !== 'Space' && e.code !== 'ArrowDown' && e.code !== 'ArrowUp' ? true : false;\n        if (document.activeElement != this.inputElement) {\n            this.inputElement.focus();\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n            rangetextContent = this.range.startContainer.textContent.split('');\n        }\n        var currentRange = this.getTextRange();\n        var lastWordRange = this.getLastLetter(currentRange);\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        var Regex = new RegExp(this.mentionChar, 'g');\n        var charRegex = new RegExp('[a-zA-Z]', 'g');\n        if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n            return;\n        }\n        if ((!currentRange || !lastWordRange) || e.code === 'Enter' || e.keyCode === 27 ||\n            (lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1) ||\n            (this.isContentEditable(this.inputElement) && this.range.startContainer &&\n                this.range.startContainer.previousElementSibling && this.range.startContainer.textContent.split('').length > 0 &&\n                (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 ||\n                    this.range.startContainer.nodeType === 1))) {\n            if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1\n                && !this.isMatchedText() && (currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ') &&\n                (this.list && this.list.querySelectorAll('ul').length > 0)) {\n                this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n                this.searchLists(e);\n            }\n            else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange) && (e.code !== 'ArrowDown' && e.code !== 'ArrowUp')) {\n                this.hidePopup();\n                this.lineBreak = true;\n            }\n            return;\n        }\n        this.queryString = lastWordRange.replace(this.mentionChar, '');\n        if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) &&\n            this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n            this.searchLists(e);\n            if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n                if (!this.isContentEditable(this.inputElement)) {\n                    this.showPopup();\n                }\n                else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement && e.keyCode !== 9) {\n                    this.showPopup();\n                }\n            }\n        }\n        else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj ||\n            (isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) ||\n                !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element)))) {\n            if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n                this.searchLists(e);\n            }\n            this.resetList(this.dataSource, this.fields);\n            if (isNullOrUndefined(this.list)) {\n                this.initValue();\n            }\n            if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40) {\n                this.didPopupOpenByTypingInitialChar = true;\n                this.showPopup();\n                if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n                    this.showWaitingSpinner();\n                }\n                this.lineBreak = false;\n            }\n        }\n        else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 &&\n            e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n            this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n            this.searchLists(e);\n        }\n        else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n            this.searchLists(e);\n            if (!this.isListResetted) {\n                this.resetList(this.dataSource, this.fields);\n            }\n        }\n        this.isListResetted = false;\n    };\n    Mention.prototype.isMatchedText = function () {\n        var isMatched = false;\n        for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n            if (this.getTextRange() &&\n                this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n                isMatched = true;\n            }\n        }\n        return isMatched;\n    };\n    Mention.prototype.getCurrentRange = function () {\n        this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n        return this.range;\n    };\n    Mention.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isDataFetched = false;\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.render.call(this);\n            this.unWireListEvents();\n            this.wireListEvents();\n        }\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.queryString,\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this.isFiltered = true;\n                _this.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n                _this.filterAction(_this.dataSource, null, _this.fields);\n            }\n        });\n    };\n    Mention.prototype.filterAction = function (dataSource, query, fields) {\n        this.beforePopupOpen = true;\n        if (this.queryString.length >= this.minLength) {\n            this.resetList(dataSource, fields, query);\n            this.isListResetted = true;\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.beforePopupOpen = false;\n        }\n        this.setDataIndex();\n        this.renderReactTemplates();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isActive) {\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.inputElement.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n            }\n            var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n            if (focusItem) {\n                focusItem.classList.add(dropDownBaseClasses.selected);\n                this.selectedLI = focusItem;\n                var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n                this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n            }\n        }\n    };\n    Mention.prototype.setDataIndex = function () {\n        for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n            this.liCollections[i].setAttribute('data-index', i.toString());\n        }\n    };\n    Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                }\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n        return fields;\n    };\n    Mention.prototype.elementValue = function () {\n        if (!this.isContentEditable(this.inputElement)) {\n            return this.inputElement.value.replace(this.mentionChar, '');\n        }\n        else {\n            return this.inputElement.textContent.replace(this.mentionChar, '');\n        }\n    };\n    Mention.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ?\n            this.elementValue() : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 25, checked the condition\n            if (this.suggestionCount !== 25) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    };\n    Mention.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    Mention.prototype.getTextRange = function () {\n        var text;\n        if (!this.isContentEditable(this.inputElement)) {\n            var component = this.inputElement;\n            if (!isNullOrUndefined(component)) {\n                var startPos = component.selectionStart;\n                if (component.value && startPos >= 0) {\n                    text = component.value.substring(0, startPos);\n                }\n            }\n        }\n        else {\n            if (this.range) {\n                var selectedElem = this.range.startContainer;\n                if (!isNullOrUndefined(selectedElem)) {\n                    var workingNodeContent = selectedElem.textContent;\n                    var selectStartOffset = this.range.startOffset;\n                    if (workingNodeContent && selectStartOffset >= 0) {\n                        text = workingNodeContent.substring(0, selectStartOffset);\n                    }\n                }\n            }\n        }\n        return text;\n    };\n    Mention.prototype.getLastLetter = function (text) {\n        if (isNullOrUndefined(text)) {\n            return '';\n        }\n        var textValue = text.replace(/\\u00A0/g, ' ');\n        var words = textValue.split(/\\s+/);\n        var wordCnt = words.length - 1;\n        return words[wordCnt].trim();\n    };\n    Mention.prototype.isContentEditable = function (element) {\n        return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showPopup = function () {\n        this.beforePopupOpen = true;\n        if (document.activeElement != this.inputElement) {\n            this.inputElement.focus();\n        }\n        this.queryString = this.didPopupOpenByTypingInitialChar ? this.queryString : '';\n        this.didPopupOpenByTypingInitialChar = false;\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n        }\n        if (!this.isTyped) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.initValue();\n        }\n        this.renderPopup();\n        attributes(this.inputElement, { 'aria-activedescendant': this.selectedElementID });\n        if (this.selectedElementID == null) {\n            this.inputElement.removeAttribute('aria-activedescendant');\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.hidePopup = function (e) {\n        this.removeSelection();\n        this.closePopup(0, e);\n    };\n    Mention.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.inputElement.removeAttribute('aria-owns');\n        this.inputElement.removeAttribute('aria-activedescendant');\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('closed', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && _this.popupObj) {\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    Mention.prototype.renderPopup = function () {\n        var _this = this;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle_1;\n                if (isNullOrUndefined(_this.target)) {\n                    popupEle_1 = _this.createElement('div', {\n                        id: _this.inputElement.id + '_popup', className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n                    });\n                }\n                else {\n                    popupEle_1 = _this.element;\n                    if (_this.cssClass != null) {\n                        addClass([popupEle_1], _this.cssClass.split(' '));\n                    }\n                }\n                if (!isNullOrUndefined(_this.target)) {\n                    popupEle_1.id = _this.inputElement.id + '_popup';\n                }\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n                    var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n                    if (!isNullOrUndefined(li)) {\n                        _this.selectedLI = li;\n                        var value = _this.getFormattedValue(li.getAttribute('data-value'));\n                        _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n                    }\n                }\n                append([_this.list], popupEle_1);\n                if (_this.inputElement.parentElement && _this.inputElement.parentElement.parentElement &&\n                    _this.inputElement.parentElement.parentElement.classList.contains('e-richtexteditor')) {\n                    if (popupEle_1.firstElementChild && popupEle_1.firstElementChild.childElementCount > 0) {\n                        popupEle_1.firstElementChild.setAttribute('aria-owns', _this.inputElement.parentElement.parentElement.id);\n                    }\n                }\n                if ((!_this.popupObj || !document.body.contains(_this.popupObj.element)) ||\n                    !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n                    document.body.appendChild(popupEle_1);\n                }\n                var coordinates_1;\n                popupEle_1.style.visibility = 'hidden';\n                _this.setHeight(popupEle_1);\n                var offsetValue = 0;\n                var left = 0;\n                _this.initializePopup(popupEle_1, offsetValue, left);\n                _this.checkCollision(popupEle_1);\n                popupEle_1.style.visibility = 'visible';\n                addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n                attributes(_this.inputElement, { 'aria-owns': _this.inputElement.id + '_options', 'aria-activedescendant': _this.selectedElementID });\n                if (_this.selectedElementID == null) {\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                }\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n                _this.trigger('opened', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        _this.renderReactTemplates();\n                        _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.inputElement : null);\n                        if (isNullOrUndefined(_this.getTriggerCharPosition())) {\n                            return;\n                        }\n                        coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n                        if (!_this.isCollided) {\n                            popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n                        }\n                        else {\n                            popupEle_1.style.left = formatUnit(coordinates_1.left);\n                            popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(_this.popupHeight.toString()));\n                            _this.isCollided = false;\n                        }\n                        popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n                        _this.setHeight(popupEle_1);\n                        popupEle_1.style.zIndex = _this.zIndex === 1000 ? getZindexPartial(popupEle_1).toString() : _this.zIndex.toString();\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    Mention.prototype.setHeight = function (popupEle) {\n        if (this.popupHeight !== 'auto' && this.list) {\n            this.list.style.maxHeight = (parseInt(this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n            popupEle.style.maxHeight = formatUnit(this.popupHeight);\n        }\n        else {\n            popupEle.style.height = 'auto';\n        }\n    };\n    Mention.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'mention'))) {\n            var coordinates = this.getCoordinates(this.inputElement, this.getTriggerCharPosition());\n            var collision = isCollide(popupEle, null, coordinates.left, coordinates.top);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n                this.isCollided = true;\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    Mention.prototype.getTriggerCharPosition = function () {\n        var mostRecentTriggerCharPos;\n        var currentRange = this.getTextRange();\n        if (currentRange !== undefined && currentRange !== null) {\n            mostRecentTriggerCharPos = 0;\n            var idx = currentRange.lastIndexOf(this.mentionChar);\n            if (idx >= mostRecentTriggerCharPos) {\n                mostRecentTriggerCharPos = idx;\n            }\n        }\n        return mostRecentTriggerCharPos ? mostRecentTriggerCharPos : 0;\n    };\n    Mention.prototype.initializePopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputElement, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' }, actionOnScroll: 'hide',\n            zIndex: this.zIndex,\n            close: function () {\n                _this.destroyPopup();\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                _this.setDataIndex();\n            }\n        });\n    };\n    Mention.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    Mention.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.popupObj.destroy();\n        if (isNullOrUndefined(this.target)) {\n            detach(this.popupObj.element);\n        }\n        else {\n            this.popupObj.element.innerHTML = '';\n            this.popupObj.element.removeAttribute('style');\n            this.popupObj.element.removeAttribute('aria-disabled');\n        }\n    };\n    Mention.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n            this.hidePopup(e);\n        }\n    };\n    Mention.prototype.getCoordinates = function (element, position) {\n        var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n        var div;\n        var span;\n        var range;\n        var globalRange;\n        var coordinates;\n        var computed;\n        var rect;\n        if (!this.isContentEditable(this.inputElement)) {\n            div = this.createElement('div', { className: 'e-form-mirror-div' });\n            document.body.appendChild(div);\n            computed = getComputedStyle(element);\n            div.style.position = 'absolute';\n            div.style.visibility = 'hidden';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            properties.forEach(function (prop) {\n                // eslint-disable-next-line security/detect-object-injection\n                div.style[prop] = computed[prop];\n            });\n            div.textContent = element.value.substring(0, position);\n            if (this.inputElement.nodeName === 'INPUT') {\n                div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n            }\n            span = this.createElement('span');\n            span.textContent = element.value.substring(position) || '.';\n            div.appendChild(span);\n            rect = element.getBoundingClientRect();\n        }\n        else {\n            var selectedNodePosition = this.getTriggerCharPosition();\n            globalRange = this.range;\n            range = document.createRange();\n            if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n                range.setStart(globalRange.startContainer, selectedNodePosition);\n                range.setEnd(globalRange.startContainer, selectedNodePosition);\n            }\n            else {\n                range.setStart(globalRange.startContainer, globalRange.startOffset);\n                range.setEnd(globalRange.startContainer, globalRange.endOffset);\n            }\n            this.isTyped = false;\n            range.collapse(false);\n            rect = range.getBoundingClientRect().top === 0 ? range.startContainer.getClientRects()[0] : range.getBoundingClientRect();\n        }\n        var doc = document.documentElement;\n        var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n        var width = 0;\n        if (!isNullOrUndefined(range) && range.getBoundingClientRect().top === 0) {\n            for (var i = 0; i < this.range.startContainer.childNodes.length; i++) {\n                if (this.range.startContainer.childNodes[i].nodeType !== Node.TEXT_NODE && this.range.startContainer.childNodes[i].textContent.trim() !== '') {\n                    width += this.range.startContainer.childNodes[i].getClientRects()[0].width;\n                }\n                else if (this.range.startContainer.childNodes[i].textContent !== '') {\n                    var span_1 = document.createElement(\"span\");\n                    span_1.innerHTML = this.range.startContainer.childNodes[i].nodeValue;\n                    document.body.appendChild(span_1);\n                    var textNodeWidth = span_1.offsetWidth;\n                    document.body.removeChild(span_1);\n                    width += textNodeWidth;\n                }\n            }\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            coordinates = {\n                top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) +\n                    parseInt(computed.fontSize, 10) + 3 - element.scrollTop - (this.isCollided ? 10 : 0),\n                left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n            };\n            document.body.removeChild(div);\n        }\n        else {\n            coordinates = {\n                top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10) - (this.isCollided ? 10 : 0),\n                left: rect.left + windowLeft + width\n            };\n        }\n        return coordinates;\n    };\n    Mention.prototype.initValue = function () {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    Mention.prototype.updateValues = function () {\n        var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(li)) {\n            this.setSelection(li, null);\n        }\n    };\n    Mention.prototype.renderList = function () {\n        _super.prototype.render.call(this);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    Mention.prototype.wireListEvents = function () {\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.unWireListEvents = function () {\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    };\n    Mention.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.isSelected = true;\n        this.setSelection(li, e);\n        var delay = 100;\n        this.closePopup(delay, e);\n        this.inputElement.focus();\n    };\n    Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!preventSelect && !isNullOrUndefined(e) && !(e.action === \"down\" || e.action === \"up\")) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                    _this.isSelected = false;\n                    _this.isSelectCancel = true;\n                }\n                else {\n                    _this.selectEventCallback(li, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    Mention.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    Mention.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n            this.setScrollPosition(e);\n        }\n        if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n            return;\n        }\n        if (isNullOrUndefined(e) || this.setValue(e)) {\n            return;\n        }\n    };\n    Mention.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    Mention.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    Mention.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop;\n            }\n        }\n    };\n    Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        if (selectLi) {\n            addClass([li], dropDownBaseClasses.selected);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    Mention.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.setValue = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate();\n            }\n            this.updateMentionValue(e);\n            return true;\n        }\n        else {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate(e);\n            }\n            else {\n                this.updateMentionValue(e);\n            }\n            return true;\n        }\n    };\n    Mention.prototype.updateMentionValue = function (e) {\n        var dataItem = this.getItemData();\n        var textSuffix;\n        var value;\n        var endPos;\n        var range;\n        var globalRange;\n        var selection = this.inputElement.ownerDocument.getSelection();\n        var startPos = this.getTriggerCharPosition();\n        textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n        if (this.isSelectCancel) {\n            this.isSelectCancel = false;\n            return;\n        }\n        if (dataItem.text !== null) {\n            value = this.mentionVal(dataItem.text);\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            var myField = this.inputElement;\n            var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n            value += textSuffix;\n            endPos = startPos + this.mentionChar.length;\n            endPos += currentTriggerSnippet.length;\n            myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n            myField.selectionStart = startPos + value.length;\n            myField.selectionEnd = startPos + value.length;\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n        }\n        else {\n            endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n            if (this.range && (this.range.startContainer.textContent.trim() !== this.mentionChar)) {\n                endPos = this.range.endOffset;\n            }\n            globalRange = this.range;\n            range = document.createRange();\n            if (((this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) || this.getTextRange() && this.getTextRange().trim() === this.mentionChar)) {\n                range.setStart(globalRange.startContainer, startPos);\n                range.setEnd(globalRange.startContainer, endPos);\n            }\n            else {\n                if (globalRange.commonAncestorContainer.textContent.trim() !== '' && !isNullOrUndefined(globalRange.commonAncestorContainer.textContent.trim()) && this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n                    range.setStart(globalRange.startContainer, globalRange.startOffset - 1);\n                    range.setEnd(globalRange.startContainer, globalRange.endOffset - 1);\n                }\n                else {\n                    range.setStart(globalRange.startContainer, globalRange.startOffset);\n                    range.setEnd(globalRange.startContainer, globalRange.endOffset);\n                }\n            }\n            this.isTyped = false;\n            range.deleteContents();\n            var element = this.createElement('div');\n            element.innerHTML = value;\n            var frag = document.createDocumentFragment();\n            var node = void 0;\n            var lastNode = void 0;\n            // eslint-disable-next-line no-cond-assign\n            while (node = element.firstChild) {\n                lastNode = frag.appendChild(node);\n            }\n            range.insertNode(frag);\n            if (lastNode) {\n                range = range.cloneRange();\n                range.setStartAfter(lastNode);\n                range.collapse(true);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n        }\n    };\n    Mention.prototype.mentionVal = function (value) {\n        var showChar = this.showMentionChar ? this.mentionChar : '';\n        if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n            value = this.displayTempElement.innerHTML;\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n        }\n        else {\n            return showChar + value;\n        }\n    };\n    Mention.prototype.setDisplayTemplate = function (e) {\n        var _this = this;\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['displayTemplate']);\n            if (this.displayTempElement) {\n                detach(this.displayTempElement);\n                this.displayTempElement = null;\n            }\n        }\n        if (!this.displayTempElement) {\n            this.displayTempElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.displayTempElement.innerHTML = '';\n        }\n        compiledString = compile(this.displayTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n        if (displayCompTemp && displayCompTemp.length > 0) {\n            append(displayCompTemp, this.displayTempElement);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.renderTemplates();\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.updateMentionValue(e);\n            });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Mention.prototype.renderTemplates = function (callBack) {\n        this.renderReactTemplates(callBack);\n    };\n    Mention.prototype.setSpinnerTemplate = function () {\n        var _this = this;\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['spinnerTemplate']);\n            if (this.spinnerTemplateElement) {\n                detach(this.spinnerTemplateElement);\n                this.spinnerTemplateElement = null;\n            }\n        }\n        if (!this.spinnerTemplateElement) {\n            this.spinnerTemplateElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.spinnerTemplateElement.innerHTML = '';\n        }\n        compiledString = compile(this.spinnerTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n        if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n            for (var i = 0; i < spinnerCompTemp.length; i++) {\n                this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.renderTemplates();\n            this.popupObj.element.appendChild(this.spinnerTemplateElement);\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n            });\n        }\n    };\n    Mention.prototype.onChangeEvent = function (eve) {\n        this.isSelected = false;\n        var items = this.detachMentionChanges(this.itemData);\n        var preItems;\n        if (typeof this.previousItemData === 'string' ||\n            typeof this.previousItemData === 'boolean' ||\n            typeof this.previousItemData === 'number') {\n            preItems = Object.defineProperties({}, {\n                value: {\n                    value: this.previousItemData,\n                    enumerable: true\n                },\n                text: {\n                    value: this.previousItemData,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            preItems = this.previousItemData;\n        }\n        var eventArgs = {\n            e: eve,\n            item: this.item,\n            itemData: items,\n            previousItem: this.previousSelectedLI,\n            previousItemData: preItems,\n            isInteracted: eve ? true : false,\n            value: this.item.innerHTML,\n            element: this.inputElement\n        };\n        this.trigger('change', eventArgs);\n    };\n    Mention.prototype.detachMentionChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    Mention.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    Mention.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    Mention.prototype.setHover = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    Mention.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    Mention.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    Mention.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.search = function (text, positionX, positionY) {\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n        }\n        var currentRange = this.getTextRange();\n        var lastWordRange = this.getLastLetter(currentRange);\n        if ((this.ignoreCase && (text === lastWordRange || text === lastWordRange.toLowerCase()))\n            || !this.ignoreCase && text === lastWordRange) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            return;\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.renderList();\n            this.renderPopup();\n        }\n        else {\n            this.showPopup();\n        }\n        this.popupObj.element.style.left = formatUnit(positionX);\n        this.popupObj.element.style.top = formatUnit(positionY);\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    Mention.prototype.destroy = function () {\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    Mention.prototype.getLocaleName = function () {\n        return 'mention';\n    };\n    Mention.prototype.getNgDirective = function () {\n        return 'EJS-MENTION';\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    Mention.prototype.getModuleName = function () {\n        return 'mention';\n    };\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"cssClass\", void 0);\n    __decorate$7([\n        Property('@')\n    ], Mention.prototype, \"mentionChar\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"showMentionChar\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"allowSpaces\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"suffixText\", void 0);\n    __decorate$7([\n        Property(25)\n    ], Mention.prototype, \"suggestionCount\", void 0);\n    __decorate$7([\n        Property(0)\n    ], Mention.prototype, \"minLength\", void 0);\n    __decorate$7([\n        Property('None')\n    ], Mention.prototype, \"sortOrder\", void 0);\n    __decorate$7([\n        Property(true)\n    ], Mention.prototype, \"ignoreCase\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"highlight\", void 0);\n    __decorate$7([\n        Property()\n    ], Mention.prototype, \"locale\", void 0);\n    __decorate$7([\n        Property('auto')\n    ], Mention.prototype, \"popupWidth\", void 0);\n    __decorate$7([\n        Property('300px')\n    ], Mention.prototype, \"popupHeight\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"displayTemplate\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"itemTemplate\", void 0);\n    __decorate$7([\n        Property('No records found')\n    ], Mention.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"spinnerTemplate\", void 0);\n    __decorate$7([\n        Property()\n    ], Mention.prototype, \"target\", void 0);\n    __decorate$7([\n        Property([])\n    ], Mention.prototype, \"dataSource\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"query\", void 0);\n    __decorate$7([\n        Property('Contains')\n    ], Mention.prototype, \"filterType\", void 0);\n    __decorate$7([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], Mention.prototype, \"fields\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionBegin\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionComplete\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionFailure\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"change\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"beforeOpen\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"opened\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"closed\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"select\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"filtering\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"created\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"destroyed\", void 0);\n    Mention = __decorate$7([\n        NotifyPropertyChanges\n    ], Mention);\n    return Mention;\n}(DropDownBase));\n\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\nexport { incrementalSearch, Search, escapeCharRegExp, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox, Mention };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}