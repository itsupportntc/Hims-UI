{"ast":null,"code":"import { Animation, Browser, ChildProperty, Collection, Complex, Component, Draggable, Event, EventHandler, HijriParser, Internationalization, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, classList, cldrData, closest, compile, createElement, detach, extend, formatUnit, getDefaultDateObject, getElement, getValue, isNullOrUndefined, prepend, print, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, Tooltip, createSpinner, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Toolbar, TreeView } from '@syncfusion/ej2-navigations';\nimport { Calendar, DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { DataManager, Deferred, Predicate, Query } from '@syncfusion/ej2-data';\nimport { Button, CheckBox, RadioButton } from '@syncfusion/ej2-buttons';\nimport { FormValidator, Input, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\n/**\n * Constants\n */\n\n/** @private */\n\nvar cellClick = 'cellClick';\n/** @private */\n\nvar cellDoubleClick = 'cellDoubleClick';\n/** @private */\n\nvar moreEventsClick = 'moreEventsClick';\n/** @private */\n\nvar select = 'select';\n/** @private */\n\nvar hover = 'hover';\n/** @private */\n\nvar actionBegin = 'actionBegin';\n/** @private */\n\nvar actionComplete = 'actionComplete';\n/** @private */\n\nvar actionFailure = 'actionFailure';\n/** @private */\n\nvar navigating = 'navigating';\n/** @private */\n\nvar renderCell = 'renderCell';\n/** @private */\n\nvar eventClick = 'eventClick';\n/** @private */\n\nvar eventRendered = 'eventRendered';\n/** @private */\n\nvar dataBinding = 'dataBinding';\n/** @private */\n\nvar dataBound = 'dataBound';\n/** @private */\n\nvar popupOpen = 'popupOpen';\n/** @private */\n\nvar popupClose = 'popupClose';\n/** @private */\n\nvar dragStart = 'dragStart';\n/** @private */\n\nvar drag = 'drag';\n/** @private */\n\nvar dragStop = 'dragStop';\n/** @private */\n\nvar resizeStart = 'resizeStart';\n/** @private */\n\nvar resizing = 'resizing';\n/** @private */\n\nvar resizeStop = 'resizeStop';\n/** @private */\n\nvar inlineClick = 'inlineClick';\n/** @private */\n\nvar cellSelect = 'cellSelect';\n/**\n * Specifies schedule internal events\n */\n\n/** @private */\n\nvar initialLoad = 'initial-load';\n/** @private */\n\nvar initialEnd = 'initial-end';\n/** @private */\n\nvar print$1 = 'print';\n/** @private */\n\nvar dataReady = 'data-ready';\n/** @private */\n\nvar eventsLoaded = 'events-loaded';\n/** @private */\n\nvar contentReady = 'content-ready';\n/** @private */\n\nvar scroll = 'scroll';\n/** @private */\n\nvar virtualScroll = 'virtual-scroll';\n/** @private */\n\nvar scrollUiUpdate = 'scroll-ui-update';\n/** @private */\n\nvar uiUpdate = 'ui-update';\n/** @private */\n\nvar documentClick = 'document-click';\n/** @private */\n\nvar cellMouseDown = 'cell-mouse-down';\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Schedule common utilities\n */\n\nvar WEEK_LENGTH = 7;\nvar DEFAULT_WEEKS = 6;\nvar MS_PER_DAY = 86400000;\nvar MS_PER_MINUTE = 60000;\n/**\n * Method to get height from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @returns {number} Returns the height of the element\n */\n\nfunction getElementHeightFromClass(container, elementClass) {\n  var height = 0;\n  var el = createElement('div', {\n    className: elementClass\n  }).cloneNode();\n  el.style.visibility = 'hidden';\n  el.style.position = 'absolute';\n  container.appendChild(el);\n  height = el.getBoundingClientRect().height;\n  remove(el);\n  return height;\n}\n/**\n * Method to get width from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @returns {number} Returns the width of the element\n */\n\n\nfunction getElementWidthFromClass(container, elementClass) {\n  var width = 0;\n  var el = createElement('div', {\n    className: elementClass\n  }).cloneNode();\n  el.style.visibility = 'hidden';\n  el.style.position = 'absolute';\n  container.appendChild(el);\n  width = el.getBoundingClientRect().width;\n  remove(el);\n  return width;\n}\n/**\n * Method to get translateY value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateY value of given element\n */\n\n\nfunction getTranslateY(element) {\n  var style = getComputedStyle(element);\n  return window.WebKitCSSMatrix ? new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\n/**\n * Method to get translateX value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateX value of given element\n */\n\n\nfunction getTranslateX(element) {\n  var style = getComputedStyle(element);\n  return window.WebKitCSSMatrix ? new WebKitCSSMatrix(style.webkitTransform).m41 : 0;\n}\n/**\n * Method to get week first date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\n\n\nfunction getWeekFirstDate(date, firstDayOfWeek) {\n  var date1 = new Date(date.getTime());\n  firstDayOfWeek = (firstDayOfWeek - date1.getDay() + 7 * -1) % 7;\n  return new Date(date1.setDate(date1.getDate() + firstDayOfWeek));\n}\n/**\n * Method to get week last date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\n\n\nfunction getWeekLastDate(date, firstDayOfWeek) {\n  var weekFirst = getWeekFirstDate(date, firstDayOfWeek);\n  var weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);\n  return new Date(weekLast.getTime());\n}\n/**\n * Method to get first date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction firstDateOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n/**\n * Method to get last date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction lastDateOfMonth(date) {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\n/**\n * Method to get week number\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the week number\n */\n\n\nfunction getWeekNumber(date) {\n  var date1 = new Date(date.getFullYear(), 0, 1).valueOf();\n  var currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate()).valueOf();\n  var dayOfYear = (currentDate - date1 + MS_PER_DAY) / MS_PER_DAY;\n  return Math.ceil(dayOfYear / 7);\n}\n/**\n * Method to get week middle date\n *\n * @param {Date} weekFirst Accepts the week first date object\n * @param {Date} weekLast Accepts the week last date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction getWeekMiddleDate(weekFirst, weekLast) {\n  return new Date(weekLast.valueOf() - (weekLast.valueOf() - weekFirst.valueOf()) / 2);\n}\n/**\n * Method to set time to date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} time Accepts the milliseconds\n * @returns {Date} Returns the date object\n */\n\n\nfunction setTime(date, time) {\n  var tzOffsetBefore = date.getTimezoneOffset();\n  var d = new Date(date.getTime() + time);\n  var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n  date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n  return date;\n}\n/**\n * Method the reset hours in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\n\n\nfunction resetTime(date) {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n/**\n * Method to get milliseconds from date object\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the milliseconds from date object\n */\n\n\nfunction getDateInMs(date) {\n  var localOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();\n  var dateOffset = date.getTimezoneOffset();\n  var timezoneOffset = dateOffset - localOffset;\n  return date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime() - timezoneOffset * 60 * 1000;\n}\n/**\n * Method to get date count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the date count\n */\n\n\nfunction getDateCount(startDate, endDate) {\n  return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to add no of days in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfDays Accepts the number of days count\n * @returns {Date} Returns the date object\n */\n\n\nfunction addDays(date, noOfDays) {\n  date = new Date('' + date);\n  return new Date(date.setDate(date.getDate() + noOfDays));\n}\n/**\n * Method to add no of months in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfMonths Accepts the number of month count\n * @returns {Date} Returns the date object\n */\n\n\nfunction addMonths(date, noOfMonths) {\n  date = new Date('' + date);\n  var day = date.getDate();\n  date.setDate(1);\n  date.setMonth(date.getMonth() + noOfMonths);\n  date.setDate(Math.min(day, getMaxDays(date)));\n  return date;\n}\n/**\n * Method to add no of years in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfYears Accepts the number of month count\n * @returns {Date} Returns the date object\n */\n\n\nfunction addYears(date, noOfYears) {\n  date = new Date('' + date);\n  var day = date.getDate();\n  date.setDate(1);\n  date.setFullYear(date.getFullYear() + noOfYears);\n  date.setDate(Math.min(day, getMaxDays(date)));\n  return date;\n}\n/**\n * Method to get start and end hours\n *\n * @param {Date} date Accepts the date object\n * @param {Date} startHour Accepts the start hour date object\n * @param {Date} endHour Accepts the end hour date object\n * @returns {Object} Returns the start and end hour date objects\n */\n\n\nfunction getStartEndHours(date, startHour, endHour) {\n  var date1 = new Date(date.getTime());\n  date1.setHours(startHour.getHours());\n  date1.setMinutes(startHour.getMinutes());\n  date1.setSeconds(startHour.getSeconds());\n  var date2 = new Date(date.getTime());\n\n  if (endHour.getHours() === 0) {\n    date2 = addDays(date2, 1);\n  } else {\n    date2.setHours(endHour.getHours());\n    date2.setMinutes(endHour.getMinutes());\n    date2.setSeconds(endHour.getSeconds());\n  }\n\n  return {\n    startHour: date1,\n    endHour: date2\n  };\n}\n/**\n * Method to get month last date\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the month last date\n */\n\n\nfunction getMaxDays(date) {\n  return lastDateOfMonth(date).getDate();\n}\n/**\n * Method to get days count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the days count\n */\n\n\nfunction getDaysCount(startDate, endDate) {\n  var strTime = resetTime(new Date(startDate));\n  var endTime = resetTime(new Date(endDate));\n  return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to get date object from date string\n *\n * @param {string} date Accepts the date string\n * @returns {Date} Returns the date object\n */\n\n\nfunction getDateFromString(date) {\n  return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) : date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/**\n * Method to get scrollbar width\n *\n * @returns {number} Returns the scrollbar width\n * @private\n */\n\n\nfunction getScrollBarWidth() {\n  var divNode = createElement('div');\n  var value = 0;\n  divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n  document.body.appendChild(divNode);\n  var ratio = devicePixelRatio ? devicePixelRatio.toFixed(2) === '1.10' || devicePixelRatio <= 1 ? Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;\n  value = divNode.offsetWidth - divNode.clientWidth - ratio | 0;\n  document.body.removeChild(divNode);\n  return value;\n}\n/**\n * Method to find the index from data collection\n *\n * @param {Object} data Accepts the data as object\n * @param {string} field Accepts the field name\n * @param {string} value Accepts the value name\n * @param {Object} event Accepts the data as object\n * @param {Object[]} resourceCollection Accepts the data collections\n * @returns {number} Returns the index number\n */\n// eslint-disable-next-line max-len\n\n\nfunction findIndexInData(data, field, value, event, resourceCollection) {\n  for (var i = 0, length_1 = data.length; i < length_1; i++) {\n    if (data[parseInt(i.toString(), 10)][\"\" + field] === value) {\n      if (event) {\n        var field_1 = resourceCollection.slice(-2)[0].field;\n        var res = event[\"\" + field_1] instanceof Array ? event[\"\" + field_1] : [event[\"\" + field_1]];\n        var resData = res.join(',');\n\n        if (resData.includes(data[parseInt(i.toString(), 10)][resourceCollection.slice(-1)[0].groupIDField])) {\n          return i;\n        }\n      } else {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n}\n/**\n * Method to get element outer height\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @returns {number} Returns the outer height of the given element\n */\n\n\nfunction getOuterHeight(element) {\n  var style = getComputedStyle(element);\n  return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\n/**\n * Method to remove child elements\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {void}\n */\n\n\nfunction removeChildren(element) {\n  var elementChildren = [].slice.call(element.children);\n\n  for (var _i = 0, elementChildren_1 = elementChildren; _i < elementChildren_1.length; _i++) {\n    var elementChild = elementChildren_1[_i];\n    element.removeChild(elementChild);\n  }\n}\n/**\n * Method to check DST is present or not in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {boolean} Returns the boolean value for either DST is present or not\n */\n\n\nfunction isDaylightSavingTime(date) {\n  var jan = new Date(date.getFullYear(), 0, 1);\n  var jul = new Date(date.getFullYear(), 6, 1);\n  return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n}\n/**\n * Method to get UTC time value from date\n *\n * @param {Date} date Accepts the date\n * @returns {number} Returns the UTC time value\n */\n\n\nfunction getUniversalTime(date) {\n  var year = date.getFullYear();\n  var month = date.getMonth();\n  var day = date.getDate();\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var seconds = date.getSeconds();\n  var milliseconds = date.getMilliseconds();\n  return Date.UTC(year, month, day, hours, minutes, seconds, milliseconds);\n}\n/**\n * Method to check the device\n *\n * @returns {boolean} Returns the boolean value for either device is present or not.\n */\n\n\nfunction isMobile() {\n  return window.navigator.userAgent.toLowerCase().indexOf('mobi') > -1;\n}\n/**\n * Method to check the IPad device\n *\n * @returns {boolean} Returns the boolean value for either IPad device is present or not.\n */\n\n\nfunction isIPadDevice() {\n  return window.navigator.userAgent.toLowerCase().indexOf('ipad') > -1;\n}\n/**\n * Method to capitalize the first word in string\n *\n * @param {string} inputString Accepts the string value\n * @param {string} type Accepts the string type\n * @returns {string} Returns the output string\n */\n\n\nfunction capitalizeFirstWord(inputString, type) {\n  if (type === 'multiple') {\n    inputString = inputString.split(' ').map(function (e) {\n      return e.charAt(0).toLocaleUpperCase() + e.substring(1);\n    }).join(' ');\n  } else if (type === 'single') {\n    if (inputString[0] >= '0' && inputString[0] <= '9') {\n      var array = inputString.match(/[a-zA-Z]/);\n      inputString = isNullOrUndefined(array) ? inputString : inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);\n    }\n\n    inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);\n  }\n\n  return inputString;\n}\n/**\n * CSS Constants\n */\n\n/** @private */\n\n\nvar ROOT = 'e-schedule';\n/** @private */\n\nvar RTL = 'e-rtl';\n/** @private */\n\nvar DEVICE_CLASS = 'e-device';\n/** @private */\n\nvar MULTI_DRAG = 'e-multi-drag';\n/** @private */\n\nvar ICON = 'e-icons';\n/** @private */\n\nvar ENABLE_CLASS = 'e-enable';\n/** @private */\n\nvar DISABLE_CLASS = 'e-disable';\n/** @private */\n\nvar TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @private */\n\nvar SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @private */\n\nvar ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @private */\n\nvar HEADER_POPUP_CLASS = 'e-header-popup';\n/** @private */\n\nvar HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @private */\n\nvar ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @private */\n\nvar CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\n\nvar WORK_CELLS_CLASS = 'e-work-cells';\n/** @private */\n\nvar WORK_HOURS_CLASS = 'e-work-hours';\n/** @private */\n\nvar POPUP_OPEN = 'e-popup-open';\n/** @private */\n\n/** @private */\n\nvar DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @private */\n\nvar DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @private */\n\nvar HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\n\nvar HEADER_WEEK_CELLS_CLASS = 'e-header-week-cell';\n/** @private */\n\nvar HEADER_MONTH_CELLS_CLASS = 'e-header-month-cell';\n/** @private */\n\nvar HEADER_YEAR_CELLS_CLASS = 'e-header-year-cell';\n/** @private */\n\nvar WORKDAY_CLASS = 'e-work-days';\n/** @private */\n\nvar OTHERMONTH_CLASS = 'e-other-month';\n/** @private */\n\nvar CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\n\nvar CURRENTDATE_CLASS = 'e-current-date';\n/** @private */\n\nvar CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @private */\n\nvar PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @private */\n\nvar NEXT_PANEL_CLASS = 'e-next-panel';\n/** @private */\n\nvar PREVIOUS_DATE_CLASS = 'e-prev';\n/** @private */\n\nvar NEXT_DATE_CLASS = 'e-next';\n/** @private */\n\nvar TRANSLATE_CLASS = 'e-translate';\n/** @private */\n\nvar LEFT_INDENT_CLASS = 'e-left-indent';\n/** @private */\n\nvar LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @private */\n\nvar EVENT_TABLE_CLASS = 'e-event-table';\n/** @private */\n\nvar RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @private */\n\nvar RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @private */\n\nvar RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @private */\n\nvar RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @private */\n\nvar RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @private */\n\nvar RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @private */\n\nvar RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @private */\n\nvar RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @private */\n\nvar RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @private */\n\nvar RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @private */\n\nvar RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @private */\n\nvar TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @private */\n\nvar TIME_CELLS_CLASS = 'e-time-cells';\n/** @private */\n\nvar TIME_SLOT_CLASS = 'e-time-slots';\n/** @private */\n\nvar ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @private */\n\nvar CURRENT_TIME_CLASS = 'e-current-time';\n/** @private */\n\nvar CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @private */\n\nvar PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @private */\n\nvar HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @private */\n\nvar SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @private */\n\n/** @private */\n\nvar TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @private */\n\nvar APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @private */\n\nvar DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @private */\n\nvar TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @private */\n\nvar RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @private */\n\nvar HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @private */\n\nvar RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @private */\n\nvar SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @private */\n\nvar WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @private */\n\nvar WEEK_NUMBER_CLASS = 'e-week-number';\n/** @private */\n\nvar APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @private */\n\nvar WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @private */\n\nvar APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @private */\n\nvar APPOINTMENT_CLASS = 'e-appointment';\n/** @private */\n\nvar BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @private */\n\nvar BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @private */\n\nvar APPOINTMENT_BORDER = 'e-appointment-border';\n/** @private */\n\nvar APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @private */\n\nvar SUBJECT_WRAP = 'e-subject-wrap';\n/** @private */\n\nvar RESOURCE_NAME = 'e-resource-name';\n/** @private */\n\nvar APPOINTMENT_TIME = 'e-time';\n/** @private */\n\nvar TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @private */\n\nvar OUTER_TABLE_CLASS = 'e-outer-table';\n/** @private */\n\nvar CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @private */\n\nvar VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @private */\n\nvar AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @private */\n\nvar AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\n\nvar AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @private */\n\nvar MONTH_HEADER_CLASS = 'e-month-header';\n/** @private */\n\nvar AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @private */\n\nvar AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @private */\n\nvar AGENDA_DATE_CLASS = 'e-date-column';\n/** @private */\n\nvar NAVIGATE_CLASS = 'e-navigate';\n/** @private */\n\nvar DATE_HEADER_CLASS = 'e-date-header';\n/** @private */\n\nvar AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @private */\n\nvar DATE_BORDER_CLASS = 'e-date-border';\n/** @private */\n\nvar AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @private */\n\nvar DATE_TIME_CLASS = 'e-date-time';\n/** @private */\n\nvar DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @private */\n\nvar AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @private */\n\nvar AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @private */\n\nvar APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @private */\n\nvar EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @private */\n\nvar EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @private */\n\nvar EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @private */\n\nvar EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @private */\n\nvar EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @private */\n\nvar EVENT_ACTION_CLASS = 'e-event-action';\n/** @private */\n\nvar NEW_EVENT_CLASS = 'e-new-event';\n/** @private */\n\nvar CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @private */\n\nvar MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @private */\n\nvar CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @private */\n\nvar DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @private */\n\nvar EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @private */\n\nvar RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @private */\n\nvar LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @private */\n\nvar RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @private */\n\nvar TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @private */\n\nvar BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @private */\n\nvar EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @private */\n\nvar EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @private */\n\nvar HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @private */\n\nvar EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @private */\n\nvar ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @private */\n\nvar APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @private */\n\nvar APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @private */\n\nvar MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @private */\n\nvar CELL_POPUP_CLASS = 'e-cell-popup';\n/** @private */\n\nvar EVENT_POPUP_CLASS = 'e-event-popup';\n/** @private */\n\nvar MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @private */\n\nvar POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\n\nvar POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @private */\n\nvar POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\n\nvar POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @private */\n\nvar DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @private */\n\nvar RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @private */\n\nvar QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @private */\n\nvar EVENT_CREATE_CLASS = 'e-event-create';\n/** @private */\n\nvar EDIT_EVENT_CLASS = 'e-event-edit';\n/** @private */\n\nvar DELETE_EVENT_CLASS = 'e-event-delete';\n/** @private */\n\nvar TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @private */\n\nvar MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @private */\n\nvar MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @private */\n\nvar MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @private */\n\nvar MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @private */\n\nvar MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @private */\n\nvar MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @private */\n\nvar MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @private */\n\nvar MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @private */\n\nvar MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @private */\n\nvar QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @private */\n\nvar QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @private */\n\nvar QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @private */\n\nvar QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = 'e-quick-dialog-following-events';\n/** @private */\n\nvar FOLLOWING_EVENTS_DIALOG = 'e-following-events-dialog';\n/** @private */\n\nvar QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @private */\n\nvar QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_FOLLOWING = 'e-quick-alertfollowing';\n/** @private */\n\nvar QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @private */\n\nvar EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @private */\n\nvar FORM_CONTAINER_CLASS = 'e-form-container';\n/** @private */\n\nvar FORM_CLASS = 'e-schedule-form';\n/** @private */\n\nvar EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @private */\n\nvar EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @private */\n\nvar TIME_ZONE_CLASS = 'e-time-zone';\n/** @private */\n\nvar TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @private */\n\nvar TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @private */\n\nvar EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @private */\n\nvar EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @private */\n\nvar EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @private */\n\nvar SUBJECT_CLASS = 'e-subject';\n/** @private */\n\nvar LOCATION_CLASS = 'e-location';\n/** @private */\n\nvar LOCATION_ICON_CLASS = 'e-location-icon';\n/** @private */\n\nvar LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @private */\n\nvar EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @private */\n\nvar EVENT_WINDOW_START_CLASS = 'e-start';\n/** @private */\n\nvar EVENT_WINDOW_END_CLASS = 'e-end';\n/** @private */\n\nvar EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @private */\n\nvar DESCRIPTION_CLASS = 'e-description';\n/** @private */\n\nvar DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @private */\n\nvar DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @private */\n\nvar EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @private */\n\nvar EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @private */\n\nvar EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @private */\n\nvar EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @private */\n\nvar EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @private */\n\nvar EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @private */\n\nvar EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @private */\n\nvar EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @private */\n\nvar EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @private */\n\nvar EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\n\nvar EDIT_CLASS = 'e-edit';\n/** @private */\n\nvar EDIT_ICON_CLASS = 'e-edit-icon';\n/** @private */\n\nvar DELETE_CLASS = 'e-delete';\n/** @private */\n\nvar DELETE_ICON_CLASS = 'e-delete-icon';\n/** @private */\n\nvar CLOSE_CLASS = 'e-close';\n/** @private */\n\nvar CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\n\nvar ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @private */\n\nvar EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @private */\n\nvar ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @private */\n\nvar TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @private */\n\nvar DISABLE_DATE = 'e-disable-date';\n/** @private */\n\nvar HIDDEN_CLASS = 'e-hidden';\n/** @private */\n\nvar DISABLE_DATES = 'e-disable-dates';\n/** @private */\n\nvar POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @private */\n\nvar POPUP_TABLE_CLASS = 'e-popup-table';\n/** @private */\n\nvar RESOURCE_MENU = 'e-resource-menu';\n/** @private */\n\nvar RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @private */\n\nvar RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @private */\n\nvar RESOURCE_TREE = 'e-resource-tree';\n/** @private */\n\nvar RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @private */\n\nvar RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @private */\n\nvar RESOURCE_CLASS = 'e-resource';\n/** @private */\n\nvar RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @private */\n\nvar RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @private */\n\nvar DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @private */\n\nvar VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @private */\n\nvar ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\n\nvar AUTO_HEIGHT = 'e-auto-height';\n/** @private */\n\nvar IGNORE_WHITESPACE = 'e-ignore-whitespace';\n/** @private */\n\nvar EVENT_TEMPLATE = 'e-template';\n/** @private */\n\nvar READ_ONLY = 'e-read-only';\n/** @private */\n\nvar MONTH_HEADER_WRAPPER = 'e-month-header-wrapper';\n/** @private */\n\nvar INLINE_SUBJECT_CLASS = 'e-inline-subject';\n/** @private */\n\nvar INLINE_APPOINTMENT_CLASS = 'e-inline-appointment';\n/** @hidden */\n\nvar SCROLL_HIDDEN = 'e-scroll-hidden';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_SCROLL = 'e-all-day-scroll';\n/** @private */\n\nvar ALLDAY_APPOINTMENT_AUTO = 'e-all-day-auto';\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Header module\n */\n\nvar HeaderRenderer =\n/** @__PURE__ @class */\nfunction () {\n  function HeaderRenderer(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.renderHeader();\n    this.addEventListener();\n  }\n\n  HeaderRenderer.prototype.addEventListener = function () {\n    this.parent.on(documentClick, this.closeHeaderPopup, this);\n  };\n\n  HeaderRenderer.prototype.removeEventListener = function () {\n    this.parent.off(documentClick, this.closeHeaderPopup);\n  };\n\n  HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n    var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n    var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n    var contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n    if (this.parent.isAdaptive) {\n      if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') || closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') && this.element.querySelector('.e-toolbar-pop').classList.contains(POPUP_OPEN))) {\n        addClass([contentWrap], SCROLL_HIDDEN);\n      } else {\n        removeClass([contentWrap], SCROLL_HIDDEN);\n        var popupEle = this.element.querySelector('.e-toolbar-pop');\n\n        if (!isNullOrUndefined(popupEle)) {\n          var popupObj = popupEle.ej2_instances[0];\n\n          if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') && popupEle.classList.contains(POPUP_OPEN))) {\n            popupObj.hide();\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(closestEle)) {\n      return;\n    }\n\n    this.hideHeaderPopup();\n  };\n\n  HeaderRenderer.prototype.hideHeaderPopup = function () {\n    if (this.headerPopup) {\n      this.headerPopup.hide();\n    }\n  };\n\n  HeaderRenderer.prototype.renderHeader = function () {\n    this.element = createElement('div', {\n      className: TOOLBAR_CONTAINER\n    });\n    var toolbarEle = createElement('div', {\n      className: HEADER_TOOLBAR\n    });\n    this.element.appendChild(toolbarEle);\n    this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n    this.renderToolbar();\n  };\n\n  HeaderRenderer.prototype.renderToolbar = function () {\n    var _this = this;\n\n    var items = this.getItems();\n    this.parent.trigger(actionBegin, {\n      requestType: 'toolbarItemRendering',\n      items: items\n    }, function (args) {\n      _this.toolbarObj = new Toolbar({\n        items: args.items,\n        overflowMode: 'Popup',\n        clicked: _this.toolbarClickHandler.bind(_this),\n        enableRtl: _this.parent.enableRtl,\n        enableHtmlSanitizer: _this.parent.enableHtmlSanitizer,\n        locale: _this.parent.locale\n      });\n\n      _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + HEADER_TOOLBAR));\n\n      var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n\n      if (prevNavEle) {\n        prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n      }\n\n      var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n\n      if (nextNavEle) {\n        nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n      }\n\n      _this.updateAddIcon();\n\n      _this.updateActiveView();\n\n      _this.parent.trigger(actionComplete, {\n        requestType: 'toolBarItemRendered',\n        items: _this.toolbarObj.items\n      });\n    });\n  };\n\n  HeaderRenderer.prototype.updateItems = function () {\n    var _this = this;\n\n    if (this.toolbarObj) {\n      var items = this.getItems();\n      this.parent.trigger(actionBegin, {\n        requestType: 'toolbarItemRendering',\n        items: items\n      }, function (args) {\n        _this.toolbarObj.items = args.items;\n\n        _this.toolbarObj.dataBind();\n\n        _this.parent.trigger(actionComplete, {\n          requestType: 'toolBarItemRendered',\n          items: _this.toolbarObj.items\n        });\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n    if (this.parent.isAdaptive) {\n      return this.toolbarObj.element;\n    }\n\n    return this.element.querySelector('.e-date-range');\n  };\n\n  HeaderRenderer.prototype.setDayOfWeek = function (index) {\n    if (this.headerCalendar) {\n      this.headerCalendar.firstDayOfWeek = index;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarDate = function (date) {\n    if (this.headerCalendar) {\n      this.headerCalendar.value = date;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n    if (this.headerCalendar) {\n      this.headerCalendar.min = this.parent.minDate;\n      this.headerCalendar.max = this.parent.maxDate;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.getCalendarView = function () {\n    if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n      return 'Year';\n    } else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n      return 'Decade';\n    } else {\n      return 'Month';\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarView = function () {\n    if (this.headerCalendar) {\n      var calendarView = this.getCalendarView();\n      this.headerCalendar.depth = calendarView;\n      this.headerCalendar.start = calendarView;\n      this.headerCalendar.refresh();\n    }\n  };\n\n  HeaderRenderer.prototype.updateActiveView = function () {\n    var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n    removeClass(selEle, ['e-active-view']);\n\n    if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n      addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n    }\n  };\n\n  HeaderRenderer.prototype.updateDateRange = function (date) {\n    var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (!selEle) {\n      return;\n    }\n\n    var textEle = selEle.querySelector('.e-tbar-btn-text');\n\n    if (this.parent.activeViewOptions.dateRangeTemplate) {\n      textEle.textContent = '';\n      var args = {\n        startDate: this.parent.activeView.getStartDate(),\n        endDate: this.parent.activeView.getEndDate(),\n        currentView: this.parent.currentView\n      };\n      var viewName = this.parent.activeViewOptions.dateRangeTemplateName;\n      var templateId = this.parent.element.id + '_' + viewName + 'dateRangeTemplate';\n      var dateTemplate = [].slice.call(this.parent.getDateRangeTemplate()(args, this.parent, 'dateRangeTemplate', templateId, false));\n      append(dateTemplate, textEle);\n    } else {\n      var text = this.parent.activeView.getDateRangeText(date);\n      selEle.firstElementChild.setAttribute('aria-label', text);\n      textEle.textContent = text;\n    }\n\n    this.refresh();\n  };\n\n  HeaderRenderer.prototype.refresh = function () {\n    if (this.toolbarObj) {\n      this.toolbarObj.refreshOverflow();\n    }\n  };\n\n  HeaderRenderer.prototype.updateAddIcon = function () {\n    var addEle = this.toolbarObj.element.querySelector('.e-add');\n\n    if (addEle) {\n      if (!this.parent.eventSettings.allowAdding) {\n        addClass([addEle], HIDDEN_CLASS);\n      } else {\n        removeClass([addEle], HIDDEN_CLASS);\n      }\n    }\n  };\n\n  HeaderRenderer.prototype.getDateRangeText = function () {\n    var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n      format: 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    });\n    return capitalizeFirstWord(dateString, 'single');\n  };\n\n  HeaderRenderer.prototype.getItems = function () {\n    var items = [];\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-prev',\n      tooltipText: 'Previous',\n      overflow: 'Show',\n      cssClass: 'e-prev',\n      htmlAttributes: {\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-next',\n      tooltipText: 'Next',\n      overflow: 'Show',\n      cssClass: 'e-next',\n      htmlAttributes: {\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      text: this.getDateRangeText(),\n      suffixIcon: 'e-icon-down-arrow',\n      cssClass: 'e-date-range',\n      overflow: 'Show',\n      htmlAttributes: {\n        'aria-atomic': 'true',\n        'aria-live': 'assertive',\n        'role': 'navigation'\n      }\n    });\n\n    if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-add',\n        text: this.l10n.getConstant('newEvent'),\n        cssClass: 'e-add',\n        overflow: 'Show'\n      });\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-today',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n    } else {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-day',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n\n      if (this.parent.views.length > 1) {\n        items.push({\n          align: 'Right',\n          type: 'Separator',\n          cssClass: 'e-schedule-seperator'\n        });\n      }\n    }\n\n    if (this.parent.views.length > 1) {\n      for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n        var item = _a[_i];\n        items.push(this.getItemObject(item));\n      }\n    }\n\n    return items;\n  };\n\n  HeaderRenderer.prototype.getItemObject = function (item) {\n    var viewName;\n    var displayName;\n\n    if (typeof item === 'string') {\n      viewName = item.toLowerCase();\n      displayName = null;\n    } else {\n      viewName = item.option.toLowerCase();\n      displayName = item.displayName;\n    }\n\n    var view;\n    var orientationClass;\n    var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n\n    switch (viewName) {\n      case 'day':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-day',\n          text: displayName || this.l10n.getConstant('day'),\n          cssClass: 'e-views e-day'\n        };\n        break;\n\n      case 'week':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-week',\n          text: displayName || this.l10n.getConstant('week'),\n          cssClass: 'e-views e-week'\n        };\n        break;\n\n      case 'workweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-workweek',\n          text: displayName || this.l10n.getConstant('workWeek'),\n          cssClass: 'e-views e-work-week'\n        };\n        break;\n\n      case 'month':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-month',\n          text: displayName || this.l10n.getConstant('month'),\n          cssClass: 'e-views e-month'\n        };\n        break;\n\n      case 'year':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-year',\n          text: displayName || this.l10n.getConstant('year'),\n          cssClass: 'e-views e-year'\n        };\n        break;\n\n      case 'agenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-agenda',\n          text: displayName || this.l10n.getConstant('agenda'),\n          cssClass: 'e-views e-agenda'\n        };\n        break;\n\n      case 'monthagenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-month-agenda',\n          text: displayName || this.l10n.getConstant('monthAgenda'),\n          cssClass: 'e-views e-month-agenda'\n        };\n        break;\n\n      case 'timelineday':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-day',\n          text: displayName || this.l10n.getConstant('timelineDay'),\n          cssClass: 'e-views e-timeline-day'\n        };\n        break;\n\n      case 'timelineweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-week',\n          text: displayName || this.l10n.getConstant('timelineWeek'),\n          cssClass: 'e-views e-timeline-week'\n        };\n        break;\n\n      case 'timelineworkweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-workweek',\n          text: displayName || this.l10n.getConstant('timelineWorkWeek'),\n          cssClass: 'e-views e-timeline-work-week'\n        };\n        break;\n\n      case 'timelinemonth':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-month',\n          text: displayName || this.l10n.getConstant('timelineMonth'),\n          cssClass: 'e-views e-timeline-month'\n        };\n        break;\n\n      case 'timelineyear':\n        orientationClass = item.orientation === 'Vertical' ? 'vertical' : 'horizontal';\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n          text: displayName || this.l10n.getConstant('timelineYear'),\n          cssClass: 'e-views e-timeline-year'\n        };\n        break;\n    }\n\n    return view;\n  };\n\n  HeaderRenderer.prototype.renderHeaderPopup = function () {\n    var headerPopupEle = createElement('div', {\n      className: HEADER_POPUP_CLASS\n    });\n    var headerCalendarEle = createElement('div', {\n      className: HEADER_CALENDAR_CLASS\n    });\n    headerPopupEle.appendChild(headerCalendarEle);\n    this.element.appendChild(headerPopupEle);\n    this.headerPopup = new Popup(headerPopupEle, {\n      actionOnScroll: 'hide',\n      targetType: 'relative',\n      relateTo: this.getPopUpRelativeElement(),\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl\n    });\n    var calendarView = this.getCalendarView();\n    var isDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();\n    this.headerCalendar = new Calendar({\n      value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,\n      min: this.parent.minDate,\n      max: this.parent.maxDate,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      depth: calendarView,\n      start: calendarView,\n      calendarMode: this.parent.calendarMode,\n      change: this.calendarChange.bind(this)\n    });\n    this.setCalendarTimezone();\n    this.headerCalendar.appendTo(headerCalendarEle);\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.calendarChange = function (args) {\n    if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n      var calendarDate = resetTime(new Date(args.value));\n      this.parent.changeDate(calendarDate);\n    }\n\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.setCalendarTimezone = function () {\n    if (this.headerCalendar) {\n      this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n    }\n  };\n\n  HeaderRenderer.prototype.calculateViewIndex = function (args) {\n    var target = closest(args.originalEvent.target, '.e-views');\n    var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n    return views.indexOf(target);\n  };\n\n  HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n    if (!args.item) {\n      return;\n    }\n\n    var strClass = args.item.cssClass.replace('e-views ', '');\n    var data;\n    var isSameTime;\n    var currentTime;\n\n    switch (strClass) {\n      case 'e-date-range':\n        if (!this.headerPopup) {\n          this.renderHeaderPopup();\n        }\n\n        if (this.headerPopup.element.classList.contains(POPUP_OPEN)) {\n          this.headerPopup.hide();\n        } else {\n          this.headerPopup.show();\n        }\n\n        break;\n\n      case 'e-day':\n        this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-week':\n        this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-work-week':\n        this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month':\n        this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-year':\n        this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-agenda':\n        this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month-agenda':\n        this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-day':\n        this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-week':\n        this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-work-week':\n        this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-month':\n        this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-year':\n        this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-today':\n        currentTime = resetTime(this.parent.getCurrentTime());\n\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda' || !this.parent.isSelectedDate(currentTime) || this.parent.currentView === 'Month' && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() && resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === 'Month' && this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate() && resetTime(firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {\n          this.parent.changeDate(currentTime, args.originalEvent);\n        }\n\n        break;\n\n      case 'e-prev':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n        break;\n\n      case 'e-next':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n        break;\n\n      case 'e-add':\n        isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n\n        if (this.parent.activeCellsData && !isSameTime) {\n          data = this.parent.activeCellsData;\n        } else {\n          var interval = this.parent.activeViewOptions.timeScale.interval;\n          var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n          var msInterval = interval * MS_PER_MINUTE / slotCount;\n          var startTime = new Date(this.parent.selectedDate.getTime());\n          var currentTime_1 = this.parent.getCurrentTime();\n          startTime.setHours(currentTime_1.getHours(), Math.round(startTime.getMinutes() / msInterval) * msInterval, 0);\n          var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n          data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: false\n          };\n        }\n\n        this.parent.eventWindow.openEditor(extend(data, {\n          cancel: false,\n          event: args.originalEvent\n        }), 'Add');\n        break;\n    }\n\n    if (isNullOrUndefined(this.toolbarObj)) {\n      return;\n    }\n\n    var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n\n    if (toolbarPopUp && args.item.type !== 'Input') {\n      toolbarPopUp.ej2_instances[0].hide({\n        name: 'SlideUp',\n        duration: 100\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.hasSelectedDate = function () {\n    var selectedTime = resetTime(this.parent.selectedDate).getTime();\n    return selectedTime >= this.parent.activeView.getStartDate().getTime() && selectedTime <= this.parent.activeView.getEndDate().getTime();\n  };\n\n  HeaderRenderer.prototype.getHeaderElement = function () {\n    return this.toolbarObj.element;\n  };\n\n  HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n    var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n    var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n    var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (prevNavEle) {\n      if (classType === 'add') {\n        addClass([prevNavEle], HIDDEN_CLASS);\n      } else {\n        removeClass([prevNavEle], HIDDEN_CLASS);\n      }\n    }\n\n    if (nextNavEle) {\n      if (classType === 'add') {\n        addClass([nextNavEle], HIDDEN_CLASS);\n      } else {\n        removeClass([nextNavEle], HIDDEN_CLASS);\n      }\n    }\n\n    if (dateRangeEle) {\n      if (classType === 'add') {\n        addClass([dateRangeEle], TEXT_ELLIPSIS);\n      } else {\n        removeClass([dateRangeEle], TEXT_ELLIPSIS);\n      }\n    }\n  };\n\n  HeaderRenderer.prototype.previousNextIconHandler = function () {\n    var dates = this.parent.currentView === 'Agenda' ? [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates();\n    var prevNavEle = this.toolbarObj.element.querySelector('.' + PREVIOUS_DATE_CLASS);\n    var nextNavEle = this.toolbarObj.element.querySelector('.' + NEXT_DATE_CLASS);\n    var firstDate = new Date(dates[0].getTime());\n    var lastDate = new Date(dates[dates.length - 1].getTime());\n\n    if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n      firstDate = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n      lastDate = addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n    } else if (this.parent.currentView === 'Month') {\n      var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0;\n      firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : firstDateOfMonth(this.parent.selectedDate);\n      lastDate = isCustomMonth ? this.parent.activeView.getEndDate() : lastDateOfMonth(addMonths(firstDate, this.parent.activeViewOptions.interval - 1));\n    }\n\n    if (!isNullOrUndefined(prevNavEle)) {\n      this.toolbarObj.enableItems(prevNavEle, firstDate > resetTime(this.parent.minDate));\n    }\n\n    if (!isNullOrUndefined(nextNavEle)) {\n      this.toolbarObj.enableItems(nextNavEle, lastDate < resetTime(this.parent.maxDate));\n    }\n\n    this.setCalendarMinMaxDate();\n  };\n\n  HeaderRenderer.prototype.getModuleName = function () {\n    return 'headerbar';\n  };\n\n  HeaderRenderer.prototype.destroy = function () {\n    if (this.headerPopup && !this.headerPopup.isDestroyed) {\n      this.headerPopup.destroy();\n      this.headerPopup = null;\n    }\n\n    if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n      this.headerCalendar.destroy();\n      this.headerCalendar = null;\n    }\n\n    if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n      this.toolbarObj.destroy();\n      this.removeEventListener();\n      remove(this.element);\n      this.toolbarObj = null;\n    }\n\n    this.element = null;\n    this.parent = null;\n    this.l10n = null;\n  };\n\n  return HeaderRenderer;\n}();\n/**\n * `Scroll` module\n */\n\n\nvar Scroll =\n/** @__PURE__ @class */\nfunction () {\n  /**\n   * Constructor for the scrolling.\n   *\n   * @param {Schedule} parent Accepts the Schedule instance\n   */\n  function Scroll(parent) {\n    this.parent = parent;\n    this.addEventListener();\n  }\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} Returns the module name.\n   * @private\n   */\n\n\n  Scroll.prototype.getModuleName = function () {\n    return 'scroll';\n  };\n  /**\n   * Internal method to set the element width\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Scroll.prototype.setWidth = function () {\n    this.parent.element.style.width = formatUnit(this.parent.width);\n  };\n  /**\n   * Internal method to set the element height\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Scroll.prototype.setHeight = function () {\n    this.parent.element.style.height = formatUnit(this.parent.height);\n  };\n  /**\n   * Internal method to bind events\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Scroll.prototype.addEventListener = function () {\n    this.parent.on(contentReady, this.setDimensions, this);\n    this.parent.on(uiUpdate, this.onPropertyChanged, this);\n  };\n  /**\n   * Internal method to unbind events\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Scroll.prototype.removeEventListener = function () {\n    this.parent.off(contentReady, this.setDimensions);\n    this.parent.off(uiUpdate, this.onPropertyChanged);\n  };\n  /**\n   * Internal method to set the dimensions\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Scroll.prototype.setDimensions = function () {\n    this.setWidth();\n    this.setHeight();\n    var data = {\n      cssProperties: this.parent.getCssProperties(),\n      module: this.getModuleName()\n    };\n    this.parent.notify(scrollUiUpdate, data);\n  };\n  /**\n   * Internal method to set the dimensions dynamically\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Scroll.prototype.onPropertyChanged = function () {\n    this.setDimensions();\n  };\n  /**\n   * Destroy the scroll module\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Scroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return Scroll;\n}();\n/**\n * `touch` module is used to handle touch interactions.\n */\n\n\nvar ScheduleTouch =\n/** @__PURE__ @class */\nfunction () {\n  function ScheduleTouch(parent) {\n    this.parent = parent;\n    this.element = this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS);\n    this.touchObj = new Touch(this.element, {\n      scroll: this.scrollHandler.bind(this),\n      swipe: this.swipeHandler.bind(this),\n      tapHold: this.tapHoldHandler.bind(this),\n      swipeSettings: {\n        swipeThresholdDistance: 1\n      }\n    });\n    EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n    this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n    this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n  }\n\n  ScheduleTouch.prototype.scrollHandler = function (e) {\n    if (this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action || !this.parent.allowSwiping || e.originalEvent && e.originalEvent.target && (e.originalEvent.target.classList.contains(APPOINTMENT_CLASS) || closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS)) && !this.parent.isAdaptive) {\n      return;\n    }\n\n    if (!this.timeStampStart) {\n      this.timeStampStart = Date.now();\n    }\n\n    if (this.element.classList.contains(TRANSLATE_CLASS)) {\n      this.onTransitionEnd();\n    }\n\n    if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n      var args = {\n        requestType: 'dateNavigate',\n        cancel: false,\n        event: e.originalEvent\n      };\n      this.parent.trigger(actionBegin, args);\n\n      if (args.cancel) {\n        return;\n      }\n\n      var scrollDiv = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n        return;\n      } else {\n        this.isScrollTriggered = true;\n        e.originalEvent.preventDefault();\n        e.originalEvent.stopPropagation();\n      }\n    }\n\n    if (e.scrollDirection === this.touchLeftDirection) {\n      if (!this.nextPanel) {\n        this.renderPanel(NEXT_PANEL_CLASS, 'next');\n        this.nextPanel = {\n          element: this.parent.activeView.getPanel(),\n          selectedDate: new Date(this.parent.selectedDate.getTime()),\n          renderDates: this.parent.activeView.renderDates,\n          colLevels: this.parent.activeView.colLevels\n        };\n        this.setDimensions(this.nextPanel.element);\n      }\n\n      var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n      this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n    } else if (e.scrollDirection === this.touchRightDirection) {\n      var prevWidth = 0;\n\n      if (!this.previousPanel) {\n        this.renderPanel(PREVIOUS_PANEL_CLASS, 'previous');\n        this.previousPanel = {\n          element: this.parent.activeView.getPanel(),\n          selectedDate: new Date(this.parent.selectedDate.getTime()),\n          renderDates: this.parent.activeView.renderDates,\n          colLevels: this.parent.activeView.colLevels\n        };\n        this.setDimensions(this.previousPanel.element);\n        prevWidth = this.previousPanel.element.offsetWidth;\n      }\n\n      var x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n      this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n    }\n  };\n\n  ScheduleTouch.prototype.swipeHandler = function (e) {\n    if (!this.isScrollTriggered || this.parent.uiStateValues.action || !this.parent.allowSwiping) {\n      return;\n    }\n\n    this.isScrollTriggered = false;\n    var swipeDate = e.swipeDirection === 'Left' ? this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];\n\n    if (e.swipeDirection === 'Left' && swipeDate < this.parent.maxDate || e.swipeDirection === 'Right' && swipeDate >= this.parent.minDate) {\n      var time = Date.now() - this.timeStampStart;\n      var offsetDist = e.distanceX * (Browser.isDevice ? 6 : 1.66);\n\n      if (offsetDist > time || e.distanceX > this.parent.element.offsetWidth / 2) {\n        this.swapPanels(e.swipeDirection);\n\n        if (offsetDist > time && e.distanceX > this.parent.element.offsetWidth / 2) {\n          this.element.style.transitionDuration = (Browser.isDevice ? e.distanceX : offsetDist) / time / 10 + 's';\n        }\n\n        this.confirmSwipe(e.swipeDirection);\n      } else {\n        this.cancelSwipe();\n      }\n\n      var args = {\n        requestType: 'dateNavigate',\n        cancel: false,\n        event: e.originalEvent\n      };\n      this.parent.trigger(actionComplete, args);\n    } else {\n      this.cancelSwipe();\n    }\n\n    this.timeStampStart = null;\n  };\n\n  ScheduleTouch.prototype.tapHoldHandler = function (e) {\n    var target = closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS);\n\n    if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n      this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n      return;\n    }\n  };\n\n  ScheduleTouch.prototype.renderPanel = function (clsName, nextPrevType) {\n    if (!this.currentPanel) {\n      this.currentPanel = {\n        element: this.parent.activeView.getPanel(),\n        selectedDate: new Date(this.parent.selectedDate.getTime()),\n        renderDates: this.parent.activeView.renderDates,\n        colLevels: this.parent.activeView.colLevels\n      };\n      this.setDimensions(this.currentPanel.element);\n    } else {\n      this.parent.setProperties({\n        selectedDate: this.currentPanel.selectedDate\n      }, true);\n    }\n\n    this.parent.setProperties({\n      selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType)\n    }, true);\n\n    if (this.parent.headerModule) {\n      this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n    }\n\n    this.parent.activeView.getRenderDates();\n    this.parent.activeView.renderLayout(clsName);\n  };\n\n  ScheduleTouch.prototype.swapPanels = function (direction) {\n    if (direction === this.touchLeftDirection) {\n      var temp = this.nextPanel;\n      this.nextPanel = this.currentPanel;\n      this.currentPanel = temp;\n    } else {\n      var temp = this.previousPanel;\n      this.previousPanel = this.currentPanel;\n      this.currentPanel = temp;\n    }\n  };\n\n  ScheduleTouch.prototype.confirmSwipe = function (swipeDirection) {\n    var _this = this;\n\n    var previousDate = swipeDirection === this.touchLeftDirection ? this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n    var args = {\n      action: 'date',\n      cancel: false,\n      previousDate: previousDate,\n      currentDate: this.currentPanel.selectedDate\n    };\n    this.parent.trigger(navigating, args, function (navArgs) {\n      if (navArgs.cancel) {\n        _this.swapPanels(swipeDirection);\n\n        _this.cancelSwipe();\n      } else {\n        _this.parent.activeView.setPanel(_this.currentPanel.element);\n\n        _this.parent.setProperties({\n          selectedDate: _this.currentPanel.selectedDate\n        }, true);\n\n        var translateX = void 0;\n\n        if (_this.parent.enableRtl) {\n          translateX = swipeDirection === _this.touchLeftDirection ? _this.previousPanel ? _this.previousPanel.element.offsetLeft : _this.currentPanel.element.offsetWidth : 0;\n        } else {\n          translateX = swipeDirection === _this.touchLeftDirection ? -_this.currentPanel.element.offsetLeft : 0;\n        }\n\n        _this.parent.activeView.renderDates = _this.currentPanel.renderDates;\n        _this.parent.activeView.colLevels = _this.currentPanel.colLevels;\n        addClass([_this.element], TRANSLATE_CLASS);\n        _this.element.style.transform = 'translatex(' + translateX + 'px)';\n\n        if (_this.parent.headerModule) {\n          _this.parent.headerModule.updateDateRange();\n        }\n\n        _this.parent.renderTemplates();\n\n        _this.parent.crudModule.refreshDataManager();\n      }\n    });\n  };\n\n  ScheduleTouch.prototype.cancelSwipe = function () {\n    this.parent.activeView.setPanel(this.currentPanel.element);\n    this.parent.setProperties({\n      selectedDate: this.currentPanel.selectedDate\n    }, true);\n    this.parent.activeView.renderDates = this.currentPanel.renderDates;\n    this.parent.activeView.colLevels = this.currentPanel.colLevels;\n    addClass([this.element], TRANSLATE_CLASS);\n    var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n    this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n  };\n\n  ScheduleTouch.prototype.onTransitionEnd = function () {\n    removeClass([this.element], TRANSLATE_CLASS);\n    this.element.style.transitionDuration = '';\n    this.element.style.transform = '';\n\n    if (this.previousPanel) {\n      remove(this.previousPanel.element);\n      this.previousPanel = null;\n      removeClass([this.currentPanel.element], PREVIOUS_PANEL_CLASS);\n      addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n    }\n\n    if (this.nextPanel) {\n      remove(this.nextPanel.element);\n      this.nextPanel = null;\n      removeClass([this.currentPanel.element], NEXT_PANEL_CLASS);\n      addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n    }\n\n    this.currentPanel = null;\n    this.parent.activeView.getPanel().style.width = '';\n  };\n\n  ScheduleTouch.prototype.getTranslateX = function (element) {\n    var style = window.getComputedStyle(element);\n    return new WebKitCSSMatrix(style.webkitTransform).m41;\n  };\n\n  ScheduleTouch.prototype.setDimensions = function (element) {\n    element.style.width = this.parent.element.clientWidth + 'px';\n  };\n\n  ScheduleTouch.prototype.resetValues = function () {\n    this.currentPanel = null;\n    this.previousPanel = null;\n    this.nextPanel = null;\n    this.timeStampStart = null;\n    this.element.style.transform = '';\n    this.element.style.transitionDuration = '';\n    removeChildren(this.element);\n    removeClass([this.element], TRANSLATE_CLASS);\n  };\n\n  ScheduleTouch.prototype.destroy = function () {\n    if (this.touchObj) {\n      this.touchObj.destroy();\n      this.touchObj = null;\n    }\n\n    EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n    this.resetValues();\n  };\n\n  return ScheduleTouch;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Keyboard interaction\n */\n\n\nvar KeyboardInteraction =\n/** @__PURE__ @class */\nfunction () {\n  function KeyboardInteraction(parent) {\n    this.selectedCells = [];\n    this.keyConfigs = {\n      downArrow: 'downarrow',\n      upArrow: 'uparrow',\n      rightArrow: 'rightarrow',\n      leftArrow: 'leftarrow',\n      shiftDownArrow: 'shift+downarrow',\n      shiftUpArrow: 'shift+uparrow',\n      shiftRightArrow: 'shift+rightarrow',\n      shiftLeftArrow: 'shift+leftarrow',\n      ctrlLeftArrow: 'ctrl+leftarrow',\n      ctrlRightArrow: 'ctrl+rightarrow',\n      altOne: 'alt+1',\n      altTwo: 'alt+2',\n      altThree: 'alt+3',\n      altFour: 'alt+4',\n      altFive: 'alt+5',\n      altSix: 'alt+6',\n      altSeven: 'alt+7',\n      altEight: 'alt+8',\n      altNine: 'alt+9',\n      enter: 'enter',\n      escape: 'escape',\n      delete: 'delete',\n      backspace: 'backspace',\n      home: 'home',\n      pageUp: 'pageup',\n      pageDown: 'pagedown',\n      tab: 'tab',\n      shiftTab: 'shift+tab',\n      ctrlShiftUpArrow: 'ctrl+shift+uparrow',\n      ctrlShiftDownArrow: 'ctrl+shift+downarrow',\n      ctrlShiftLeftArrow: 'ctrl+shift+leftarrow',\n      ctrlShiftRightArrow: 'ctrl+shift+rightarrow'\n    };\n    this.parent = parent;\n    this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n    this.keyboardModule = new KeyboardEvents(this.parent.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n    this.addEventListener();\n  }\n\n  KeyboardInteraction.prototype.keyActionHandler = function (e) {\n    switch (e.action) {\n      case 'downArrow':\n      case 'shiftDownArrow':\n        this.processDown(e, e.shiftKey);\n        break;\n\n      case 'upArrow':\n      case 'shiftUpArrow':\n        this.processUp(e, e.shiftKey);\n        break;\n\n      case 'leftArrow':\n      case 'shiftLeftArrow':\n        this.processLeft(e, e.shiftKey);\n        break;\n\n      case 'rightArrow':\n      case 'shiftRightArrow':\n        this.processRight(e, e.shiftKey);\n        break;\n\n      case 'ctrlLeftArrow':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n\n        if (this.parent.headerModule) {\n          this.parent.headerModule.element.querySelector('.e-prev button').focus();\n        }\n\n        break;\n\n      case 'ctrlRightArrow':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n\n        if (this.parent.headerModule) {\n          this.parent.headerModule.element.querySelector('.e-next button').focus();\n        }\n\n        break;\n\n      case 'altOne':\n      case 'altTwo':\n      case 'altThree':\n      case 'altFour':\n      case 'altFive':\n      case 'altSix':\n      case 'altSeven':\n      case 'altEight':\n      case 'altNine':\n        this.processViewNavigation(e);\n        break;\n\n      case 'enter':\n        this.processEnter(e);\n        break;\n\n      case 'home':\n        this.focusFirstCell();\n        break;\n\n      case 'tab':\n      case 'shiftTab':\n        this.processTab(e, e.shiftKey);\n        break;\n\n      case 'delete':\n      case 'backspace':\n        this.processDelete(e);\n        break;\n\n      case 'ctrlShiftUpArrow':\n      case 'ctrlShiftDownArrow':\n      case 'ctrlShiftLeftArrow':\n      case 'ctrlShiftRightArrow':\n        this.processCtrlShiftNavigationArrows(e);\n        break;\n\n      case 'escape':\n        this.processEscape(e);\n        break;\n\n      case 'fTwelve':\n        if (this.parent.allowInline && this.parent.inlineModule) {\n          e.preventDefault();\n          this.processFTwelve(e);\n        }\n\n        break;\n    }\n  };\n\n  KeyboardInteraction.prototype.processFTwelve = function (e) {\n    var target = e.target;\n\n    if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      this.parent.activeCellsData = this.getSelectedElements(target);\n      var args = extend(this.parent.activeCellsData, {\n        cancel: false,\n        event: e\n      });\n      var inlineArgs = {\n        element: args.element,\n        groupIndex: args.groupIndex,\n        type: 'Cell'\n      };\n      this.parent.notify(inlineClick, inlineArgs);\n    }\n\n    if (target.classList.contains(APPOINTMENT_CLASS)) {\n      target.click();\n      return;\n    }\n  };\n\n  KeyboardInteraction.prototype.addEventListener = function () {\n    this.parent.on(cellMouseDown, this.onCellMouseDown, this);\n  };\n\n  KeyboardInteraction.prototype.removeEventListener = function () {\n    this.parent.off(cellMouseDown, this.onCellMouseDown);\n  };\n\n  KeyboardInteraction.prototype.onCellMouseDown = function (e) {\n    if (e.event.shiftKey) {\n      return;\n    }\n\n    this.initialTarget = this.getClosestCell(e.event);\n\n    if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n      return;\n    }\n\n    if (e.event.target.classList.contains(WORK_CELLS_CLASS) && e.event.which !== 3) {\n      this.parent.removeSelectedClass();\n      EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n      EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveUp, this);\n    }\n\n    if (e.event.target.classList.contains(ALLDAY_CELLS_CLASS) && e.event.which !== 3) {\n      this.parent.removeSelectedClass();\n      var allDayRow = this.parent.getAllDayRow();\n      EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n      EventHandler.add(allDayRow, 'mouseup', this.onMoveUp, this);\n    }\n  };\n\n  KeyboardInteraction.prototype.onMouseSelection = function (e) {\n    var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n    addClass(appointments, 'e-allow-select');\n    var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n\n    if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n      var parent_1 = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var yInBounds = parent_1.offsetHeight <= parent_1.scrollHeight && parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n      var xInBounds = parent_1.offsetWidth <= parent_1.scrollWidth && parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n\n      if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n        parent_1.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;\n      }\n\n      if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n        parent_1.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;\n      }\n    }\n\n    var target = this.getClosestCell(e);\n\n    if (target) {\n      this.selectCells(true, target);\n    }\n  };\n\n  KeyboardInteraction.prototype.getClosestCell = function (e) {\n    return closest(e.target, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n  };\n\n  KeyboardInteraction.prototype.onMoveUp = function (e) {\n    var _this = this;\n\n    var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n    removeClass(appointments, 'e-allow-select');\n\n    if (e.target.classList.contains(WORK_CELLS_CLASS)) {\n      EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n      EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveUp);\n    }\n\n    if (e.target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      var allDayRow = this.parent.getAllDayRow();\n      EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n      EventHandler.remove(allDayRow, 'mouseup', this.onMoveUp);\n    }\n\n    if (this.isPreventAction(e)) {\n      return;\n    }\n\n    var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n    var target = closest(e.target, queryStr);\n\n    if (this.parent.currentView === 'TimelineYear' && target.classList.contains(OTHERMONTH_CLASS)) {\n      return;\n    }\n\n    this.parent.activeCellsData = this.getSelectedElements(target);\n    var cellData = {};\n\n    if (this.parent.eventWindow) {\n      this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);\n    }\n\n    var selectedCells = this.parent.getSelectedCells();\n    var args = {\n      data: cellData,\n      element: this.parent.activeCellsData.element,\n      event: e,\n      requestType: cellSelect,\n      showQuickPopup: false\n    };\n    this.parent.trigger(select, args, function (selectArgs) {\n      var isPopupShow = selectArgs.showQuickPopup || _this.parent.quickInfoOnSelectionEnd;\n\n      if (isPopupShow && selectedCells.length > 1) {\n        var cellArgs = extend(_this.parent.activeCellsData, {\n          cancel: false,\n          event: e,\n          name: 'cellClick'\n        });\n\n        _this.parent.notify(cellClick, cellArgs);\n      }\n    });\n  };\n\n  KeyboardInteraction.prototype.processEnter = function (e) {\n    if (this.parent.activeViewOptions.readonly && !e.target.classList.contains(APPOINTMENT_CLASS) || this.isPreventAction(e)) {\n      return;\n    }\n\n    if (this.parent.currentView === 'TimelineYear' && e.target.classList.contains(OTHERMONTH_CLASS)) {\n      return;\n    }\n\n    var target = e.target;\n\n    if (closest(target, '.' + POPUP_WRAPPER_CLASS)) {\n      if (target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(EVENT_CREATE_CLASS) || target.classList.contains(EDIT_EVENT_CLASS) || target.classList.contains(DELETE_EVENT_CLASS) || target.classList.contains(CLOSE_CLASS)) {\n        target.click();\n        e.preventDefault();\n      } else if (target.classList.contains(SUBJECT_CLASS)) {\n        this.parent.element.querySelector('.' + EVENT_CREATE_CLASS).click();\n        e.preventDefault();\n      }\n\n      return;\n    }\n\n    if (target.classList.contains(RESOURCE_CELLS_CLASS) && target.classList.contains(RESOURCE_PARENT_CLASS)) {\n      var resourceIcon = target.querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n\n      if (resourceIcon) {\n        resourceIcon.click();\n      }\n\n      return;\n    }\n\n    if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      this.parent.activeCellsData = this.getSelectedElements(target);\n      var args = extend(this.parent.activeCellsData, {\n        cancel: false,\n        event: e\n      });\n\n      if (this.parent.allowInline) {\n        var inlineArgs = {\n          element: args.element,\n          groupIndex: args.groupIndex,\n          type: 'Cell'\n        };\n        this.parent.notify(inlineClick, inlineArgs);\n      } else {\n        if (this.parent.currentView === 'Year') {\n          target.click();\n        } else {\n          this.parent.notify(cellClick, args);\n        }\n      }\n\n      return;\n    }\n\n    if (target.classList.contains(INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {\n      this.parent.inlineModule.inlineCrudActions(target);\n      return;\n    }\n\n    if (target.classList.contains(APPOINTMENT_CLASS) || target.classList.contains(MORE_EVENT_CLOSE_CLASS) || target.classList.contains(ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(MORE_INDICATOR_CLASS)) {\n      target.click();\n      return;\n    }\n\n    if (target.classList.contains(MORE_EVENT_HEADER_DATE_CLASS)) {\n      this.parent.setProperties({\n        selectedDate: this.parent.getDateFromElement(target)\n      }, true);\n      this.parent.changeView(this.parent.getNavigateView(), e);\n      this.processEscape(e);\n      return;\n    }\n  };\n\n  KeyboardInteraction.prototype.getSelectedElements = function (target) {\n    var cellDetails;\n\n    if (this.selectedCells.length > 1 && target.classList.contains(SELECTED_CELL_CLASS)) {\n      var start = this.parent.getCellDetails(this.selectedCells[0]);\n      var end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);\n      start.endTime = end.endTime;\n      start.element = target;\n      cellDetails = start;\n    } else {\n      cellDetails = this.parent.getCellDetails(target);\n    }\n\n    return cellDetails;\n  };\n\n  KeyboardInteraction.prototype.getCells = function (isInverseTable, start, end) {\n    var tableEle = this.parent.getContentTable();\n    var isTimelineYear = this.parent.currentView === 'TimelineYear';\n    var query = isTimelineYear && !isInverseTable ? '.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')' : 'td';\n    var cells = [].slice.call(tableEle.querySelectorAll(query));\n    var maxRow = tableEle.rows.length;\n    var maxColumn = tableEle.rows[0].cells.length;\n\n    if (start && start.classList.contains(ALLDAY_CELLS_CLASS)) {\n      var allDayRow = this.parent.getAllDayRow();\n      cells = [].slice.call(allDayRow.cells);\n      maxRow = 1;\n      maxColumn = allDayRow.cells.length;\n    }\n\n    var startIndex = cells.indexOf(start);\n    var endIndex = cells.indexOf(end);\n    var inverseCells = [];\n\n    if (isInverseTable) {\n      for (var i = 0; i < maxColumn; i++) {\n        for (var j = 0; j < maxRow; j++) {\n          var cell = cells[maxColumn * j + i];\n\n          if (isTimelineYear && cell.classList.contains(OTHERMONTH_CLASS)) {\n            continue;\n          }\n\n          inverseCells.push(cell);\n        }\n      }\n\n      startIndex = inverseCells.indexOf(start);\n      endIndex = inverseCells.indexOf(end);\n    }\n\n    if (startIndex > endIndex) {\n      var temp = startIndex;\n      startIndex = endIndex;\n      endIndex = temp;\n    }\n\n    var sCells = isInverseTable ? inverseCells : cells;\n    return sCells.slice(startIndex, endIndex + 1);\n  };\n\n  KeyboardInteraction.prototype.focusFirstCell = function () {\n    if (this.parent.currentView === 'Agenda') {\n      var focusCell = this.parent.getContentTable().querySelector('.' + AGENDA_CELLS_CLASS);\n      focusCell.setAttribute('tabindex', '0');\n      focusCell.focus();\n      return;\n    }\n\n    this.parent.eventBase.removeSelectedAppointmentClass();\n\n    if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n      var cell = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tr:not(.' + HIDDEN_CLASS + ') .' + WORK_CELLS_CLASS + ':not(.' + RESOURCE_GROUP_CELLS_CLASS + ')');\n      this.selectCells(false, cell);\n    } else if (this.parent.currentView.indexOf('Year') > -1) {\n      var query = '.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')' + ':not(.' + RESOURCE_GROUP_CELLS_CLASS + ')';\n      var isVerticalYear = this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.orientation === 'Vertical';\n      query += isVerticalYear ? '[data-date=\"' + this.parent.activeView.startDate().getTime() + '\"]' : '';\n      this.selectCells(false, this.parent.element.querySelector(query));\n    } else {\n      this.selectCells(false, this.parent.getWorkCellElements()[0]);\n    }\n  };\n\n  KeyboardInteraction.prototype.isInverseTableSelect = function () {\n    return this.parent.activeView.isInverseTableSelect;\n  };\n  /**\n   * Internal method to select cells\n   *\n   * @param {boolean} isMultiple Accepts to select multiple cells or not\n   * @param {HTMLTableCellElement} targetCell Accepts the target cells\n   * @returns {void}\n   * @private\n   */\n\n\n  KeyboardInteraction.prototype.selectCells = function (isMultiple, targetCell) {\n    var _this = this;\n\n    this.parent.removeSelectedClass();\n    var target = targetCell instanceof Array ? targetCell.slice(-1)[0] : targetCell;\n\n    if (isMultiple) {\n      var initialId_1;\n      var views_1 = ['Day', 'Week', 'WorkWeek', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth', 'TimelineYear'];\n      var args = {\n        element: targetCell,\n        requestType: 'mousemove',\n        allowMultipleRow: true\n      };\n      this.parent.inlineModule.removeInlineAppointmentElement();\n      this.parent.trigger(select, args, function (selectArgs) {\n        var allowMultipleRow = !selectArgs.allowMultipleRow || !_this.parent.allowMultiRowSelection;\n\n        if (allowMultipleRow) {\n          var isTimelineYear = _this.parent.currentView === 'TimelineYear';\n\n          if (isTimelineYear && _this.parent.activeViewOptions.orientation === 'Horizontal' || _this.parent.currentView === 'Month') {\n            var isGroupYear = isTimelineYear && _this.parent.activeViewOptions.group.resources.length > 0;\n            target = isGroupYear ? _this.initialTarget : _this.initialTarget.parentElement.children[target.cellIndex];\n          } else if (views_1.indexOf(_this.parent.currentView) > -1) {\n            target = target.parentElement.children[_this.initialTarget.cellIndex];\n          }\n        }\n\n        var selectedCells = _this.getCells(_this.isInverseTableSelect(), _this.initialTarget, target);\n\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          initialId_1 = _this.initialTarget.getAttribute('data-group-index');\n          var resourceSelectedCells = [];\n\n          for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n            var cell = selectedCells_1[_i];\n\n            if (cell.getAttribute('data-group-index') === initialId_1) {\n              resourceSelectedCells.push(cell);\n            }\n          }\n\n          selectedCells = resourceSelectedCells;\n        }\n\n        if (!_this.parent.allowMultiCellSelection) {\n          selectedCells = [_this.initialTarget];\n        }\n\n        _this.selectedCells = selectedCells;\n\n        if (selectedCells.length > 2 && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n          var allDayCells = _this.getAllDayCells(selectedCells);\n\n          if (_this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceAllDayCells = [];\n\n            for (var _a = 0, allDayCells_1 = allDayCells; _a < allDayCells_1.length; _a++) {\n              var cell = allDayCells_1[_a];\n\n              if (cell.getAttribute('data-group-index') === initialId_1) {\n                resourceAllDayCells.push(cell);\n              }\n            }\n\n            allDayCells = resourceAllDayCells;\n          }\n\n          selectedCells = selectedCells.concat(allDayCells);\n        }\n\n        if (target.getAttribute('data-group-index') !== initialId_1 && _this.parent.activeViewOptions.group.resources.length > 0) {\n          target = _this.selectedCells[_this.selectedCells.length - 1];\n        }\n\n        _this.parent.addSelectedClass(selectedCells, target);\n      });\n    } else {\n      var args = {\n        element: target,\n        requestType: cellSelect\n      }; // activeCellsData is not reset on schedule property changed(group properties)\n      // const cellData: Record<string, any> = {};\n      // const cellDetails: CellClickEventArgs = this.parent.getCellDetails(target);\n      // if (this.parent.eventWindow && cellDetails) {\n      //     if (this.parent.activeCellsData.element !== cellDetails.element) {\n      //         this.parent.activeCellsData = cellDetails;\n      //     }\n      //     this.parent.eventWindow.convertToEventData(this.parent.activeCellsData as unknown as Record<string, any>, cellData);\n      //     args.data = cellData;\n      // }\n\n      this.parent.trigger(select, args, function () {\n        _this.initialTarget = target;\n        _this.selectedCells = [target];\n\n        _this.parent.addSelectedClass([target], target);\n      });\n    }\n  };\n\n  KeyboardInteraction.prototype.selectAppointment = function (isReverse, target) {\n    var appointments = this.getAppointmentElements();\n\n    if (appointments.length < 0) {\n      return;\n    }\n\n    this.parent.eventBase.removeSelectedAppointmentClass();\n    var nextAppEle;\n\n    if (target.classList.contains(APPOINTMENT_CLASS)) {\n      var targetIndex = appointments.indexOf(target);\n      nextAppEle = appointments[isReverse ? targetIndex - 1 : targetIndex + 1];\n    } else {\n      nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n    }\n\n    if (nextAppEle) {\n      this.parent.eventBase.addSelectedAppointments([nextAppEle], true);\n      nextAppEle.focus();\n      addClass([nextAppEle], AGENDA_SELECTED_CELL);\n    }\n  };\n\n  KeyboardInteraction.prototype.selectAppointmentElementFromWorkCell = function (isReverse, target) {\n    var _this = this;\n\n    this.parent.eventBase.removeSelectedAppointmentClass();\n    this.parent.removeSelectedClass();\n\n    if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      var appointmentElements_1 = this.getUniqueAppointmentElements();\n      var filteredElements_1 = [];\n      var selectedDate_1 = this.parent.getDateFromElement(target).getTime();\n      var selectedSeriesEvents = this.parent.eventsProcessed.filter(function (eventObject) {\n        return !isReverse ? eventObject[_this.parent.eventFields.startTime].getTime() >= selectedDate_1 : eventObject[_this.parent.eventFields.startTime].getTime() <= selectedDate_1;\n      });\n      selectedSeriesEvents.filter(function (event) {\n        appointmentElements_1.filter(function (element) {\n          if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n            filteredElements_1.push(element);\n          }\n        });\n      });\n\n      if (filteredElements_1.length > 0) {\n        var selectedElement = isReverse ? filteredElements_1[filteredElements_1.length - 1] : filteredElements_1[0];\n        var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n        this.parent.eventBase.addSelectedAppointments(focusElements, true);\n        focusElements[focusElements.length - 1].focus();\n      }\n    }\n  };\n\n  KeyboardInteraction.prototype.getAllDayCells = function (cells) {\n    var allDayRow = this.parent.getAllDayRow();\n\n    if (!allDayRow) {\n      return [];\n    }\n\n    var startCell = cells[0];\n    var endCell = cells[cells.length - 1];\n    var start = this.parent.getCellDetails(startCell);\n    var end = this.parent.getCellDetails(endCell);\n\n    if (end.endTime.getTime() - start.startTime.getTime() >= MS_PER_DAY) {\n      var allDayCells = [].slice.call(allDayRow.cells);\n      return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n    }\n\n    return [];\n  };\n\n  KeyboardInteraction.prototype.getAppointmentElements = function () {\n    return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n  };\n\n  KeyboardInteraction.prototype.getAppointmentElementsByGuid = function (guid) {\n    return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n  };\n\n  KeyboardInteraction.prototype.getUniqueAppointmentElements = function () {\n    var appointments = this.getAppointmentElements();\n    var appointmentElements = [];\n    appointments.map(function (value) {\n      return value.getAttribute('data-guid');\n    }).filter(function (value, index, self) {\n      if (self.indexOf(value) === index) {\n        appointmentElements.push(appointments[parseInt(index.toString(), 10)]);\n      }\n    });\n    return appointmentElements;\n  };\n\n  KeyboardInteraction.prototype.getWorkCellFromAppointmentElement = function (target) {\n    var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n    return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n  };\n\n  KeyboardInteraction.prototype.processViewNavigation = function (e) {\n    var index = parseInt(e.key, 10) - 1;\n\n    if (index < this.parent.views.length) {\n      var view = this.parent.viewCollections[parseInt(index.toString(), 10)].option;\n      this.parent.changeView(view, e, undefined, index);\n\n      if (this.parent.headerModule) {\n        this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n      }\n    }\n  };\n\n  KeyboardInteraction.prototype.cancelUpDownAction = function (isTimelineYear) {\n    var isVerticalYear = isTimelineYear && this.parent.activeViewOptions.orientation === 'Vertical';\n    var isGroup = this.parent.activeViewOptions.group.resources.length > 0;\n\n    if (isVerticalYear && isGroup || isTimelineYear && this.initialTarget.classList.contains(OTHERMONTH_CLASS)) {\n      return true;\n    }\n\n    if (this.parent.activeView.isTimelineView() && !isTimelineYear || this.parent.currentView === 'MonthAgenda') {\n      return true;\n    }\n\n    return false;\n  };\n\n  KeyboardInteraction.prototype.processUp = function (e, isMultiple) {\n    var isTimelineYear = this.parent.currentView === 'TimelineYear';\n\n    if (isMultiple && this.cancelUpDownAction(isTimelineYear)) {\n      return;\n    }\n\n    var target = e.target;\n    var selectedElements = this.parent.getSelectedCells();\n    var selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n    var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n    var quickPopupWrapper = this.getQuickPopupElement();\n\n    if (selectedElements.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n      target = selectedElements[selectedElements.length - 1];\n    }\n\n    if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) && !quickPopupWrapper.classList.contains(POPUP_OPEN) && ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n      target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n      this.parent.eventBase.removeSelectedAppointmentClass();\n    }\n\n    if (!target) {\n      return;\n    }\n\n    if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n      var tableRows = this.parent.getTableRows();\n      var curRowIndex = tableRows.indexOf(target.parentElement);\n      var targetCell = void 0;\n\n      if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {\n        targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, true) : this.getHorizontalUpDownCell(tableRows, target, curRowIndex, true);\n      }\n\n      if ((curRowIndex > 0 || targetCell) && curRowIndex < tableRows.length) {\n        targetCell = targetCell ? targetCell : tableRows[curRowIndex - 1].cells[target.cellIndex];\n\n        if (this.parent.currentView === 'Year' && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n          if (this.parent.activeView.getStartDate().getTime() < +targetCell.getAttribute('data-date')) {\n            targetCell = this.getYearUpDownCell(tableRows, curRowIndex - 1, target.cellIndex, true);\n          } else {\n            return;\n          }\n        }\n\n        this.selectCells(isMultiple, targetCell);\n      }\n    } else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n      this.selectAppointment(true, target);\n    }\n  };\n\n  KeyboardInteraction.prototype.processDown = function (e, isMultiple) {\n    var isTimelineYear = this.parent.currentView === 'TimelineYear';\n\n    if (isMultiple && this.cancelUpDownAction(isTimelineYear)) {\n      return;\n    }\n\n    var target = e.target;\n    var selectedCells = this.parent.getSelectedCells();\n    var selectedElements = this.parent.eventBase.getSelectedAppointments();\n    var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n    var quickPopupWrapper = this.getQuickPopupElement();\n\n    if (selectedCells.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n      target = selectedCells[selectedCells.length - 1];\n    }\n\n    if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) && !quickPopupWrapper.classList.contains(POPUP_OPEN) && ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n      target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n      this.parent.eventBase.removeSelectedAppointmentClass();\n    }\n\n    var tableRows = this.parent.getTableRows();\n\n    if (!target) {\n      return;\n    }\n\n    if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n      var curRowIndex = tableRows.indexOf(target.parentElement);\n      var targetCell = void 0;\n\n      if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {\n        targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, false) : this.getHorizontalUpDownCell(tableRows, target, curRowIndex, false);\n      }\n\n      if (curRowIndex >= 0 && (curRowIndex < tableRows.length - 1 || targetCell)) {\n        targetCell = targetCell ? targetCell : tableRows[curRowIndex + 1].cells[target.cellIndex];\n\n        if (this.parent.currentView === 'Year' && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n          if (this.parent.activeView.getEndDate().getTime() > +targetCell.getAttribute('data-date')) {\n            targetCell = this.getYearUpDownCell(tableRows, curRowIndex + 1, target.cellIndex, false);\n          } else {\n            return;\n          }\n        }\n\n        this.selectCells(isMultiple, targetCell);\n      }\n    } else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n      this.selectAppointment(false, target);\n    }\n  };\n\n  KeyboardInteraction.prototype.getYearUpDownCell = function (tableRows, rowIndex, cellIndex, isUp) {\n    while (tableRows[parseInt(rowIndex.toString(), 10)] && tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)].classList.contains(OTHERMONTH_CLASS)) {\n      rowIndex = rowIndex + (isUp ? -1 : 1);\n    }\n\n    return tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)];\n  }; // eslint-disable-next-line max-len\n\n\n  KeyboardInteraction.prototype.getHorizontalUpDownCell = function (tableRows, target, curRowIndex, isUp) {\n    var row = tableRows[curRowIndex + (isUp ? -1 : 1)];\n    var cell = row ? row.cells[target.cellIndex] : target;\n\n    if (cell.classList.contains(OTHERMONTH_CLASS)) {\n      var workCell = row.querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')');\n      var date = new Date(+workCell.getAttribute('data-date'));\n      var query = '[data-date=\"' + new Date(date.getFullYear(), date.getMonth() + 1, 0).getTime() + '\"]';\n      cell = cell.cellIndex < workCell.cellIndex ? workCell : row.querySelector(query);\n    }\n\n    return cell;\n  }; // eslint-disable-next-line max-len\n\n\n  KeyboardInteraction.prototype.getVerticalUpDownCell = function (tableRows, target, curRowIndex, isUp) {\n    var hasRow = isUp && curRowIndex > 0 || !isUp && curRowIndex < tableRows.length - 1;\n    var targetCell = hasRow ? tableRows[curRowIndex + (isUp ? -1 : 1)].cells[target.cellIndex] : undefined;\n\n    if (!targetCell || targetCell.classList.contains(OTHERMONTH_CLASS)) {\n      var column = tableRows[parseInt(curRowIndex.toString(), 10)].cells[target.cellIndex - (isUp ? 1 : -1)];\n\n      if (column) {\n        var dateAttr = +target.getAttribute('data-date') - (isUp ? MS_PER_DAY : -MS_PER_DAY);\n        return this.parent.getContentTable().querySelector('.' + WORK_CELLS_CLASS + '[data-date=\"' + dateAttr + '\"]');\n      }\n\n      targetCell = target;\n    }\n\n    return targetCell;\n  };\n\n  KeyboardInteraction.prototype.processLeftRight = function (target) {\n    var tableEle = this.parent.currentView === 'Year' ? target.closest('tbody') : this.parent.getContentTable();\n    var curRowIndex = target.parentNode.sectionRowIndex;\n    var key = {\n      element: tableEle,\n      rowIndex: curRowIndex,\n      columnIndex: target.cellIndex,\n      maxIndex: tableEle.rows[parseInt(curRowIndex.toString(), 10)].cells.length\n    };\n    return key;\n  };\n\n  KeyboardInteraction.prototype.getQuickPopupElement = function () {\n    return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + POPUP_WRAPPER_CLASS);\n  };\n\n  KeyboardInteraction.prototype.isCancelLeftRightAction = function (e, isMultiple, isTimelineYear) {\n    var prevent = this.parent.currentView === 'MonthAgenda' || isTimelineYear && this.initialTarget.classList.contains(OTHERMONTH_CLASS);\n\n    if (this.parent.currentView === 'Agenda' || isMultiple && prevent) {\n      return true;\n    }\n\n    if (this.isPreventAction(e) && isMultiple) {\n      return true;\n    }\n\n    var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n    var quickPopupWrapper = this.getQuickPopupElement();\n\n    if (moreEventWrapper.classList.contains(POPUP_OPEN) || quickPopupWrapper.classList.contains(POPUP_OPEN)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  KeyboardInteraction.prototype.processRight = function (e, isMultiple) {\n    var isTimelineYear = this.parent.currentView === 'TimelineYear';\n\n    if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear)) {\n      return;\n    }\n\n    var selectedCells = this.parent.getSelectedCells();\n    var targetCell;\n    var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n    var target = e.target;\n\n    if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      target = selectedCells[selectedCells.length - 1];\n    }\n\n    if (selectedAppointments.length > 0) {\n      target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n      this.parent.eventBase.removeSelectedAppointmentClass();\n\n      if (!target) {\n        return;\n      }\n    }\n\n    if (target.classList.contains(WORK_CELLS_CLASS) && e.target.classList.contains(WORK_CELLS_CLASS)) {\n      var key = this.processLeftRight(target);\n      var targetDate = new Date(+target.getAttribute('data-date'));\n      var isMonthEnd = this.parent.currentView === 'Year' && targetDate.getTime() === lastDateOfMonth(targetDate).getTime();\n\n      if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1 && !isMonthEnd) {\n        targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n\n        if (isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n          targetCell = this.getTimelineYearTargetCell(key, target, true);\n        }\n\n        if (!isNullOrUndefined(targetCell)) {\n          this.selectCells(isMultiple, targetCell);\n        }\n      } else if (key.columnIndex === key.maxIndex - 1 || isMonthEnd) {\n        if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1 && !isMonthEnd) {\n          targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n          var changeTargetCell = isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS);\n          targetCell = changeTargetCell ? this.getHorizontalLeftRightCell(key, target, true) : targetCell;\n\n          if (!isNullOrUndefined(targetCell)) {\n            this.selectCells(isMultiple, targetCell);\n          }\n        } else if (!isMultiple) {\n          if (isMonthEnd && targetDate.getTime() !== this.parent.activeView.getEndDate().getTime()) {\n            this.selectCells(isMultiple, this.parent.element.querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + (targetDate.getTime() + MS_PER_DAY) + '\"]'));\n            return;\n          }\n\n          var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n          var tableEle = this.parent.getContentTable();\n          var cell = isMonthEnd ? tableEle.rows[parseInt(rowIndex.toString(), 10)].querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')') : tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[0];\n          this.selectCells(false, cell);\n        }\n      }\n    } else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      var curColIndex = target.cellIndex;\n      var allDayRow = this.parent.getAllDayRow();\n      var maxColIndex = allDayRow.cells.length;\n\n      if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n        this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n      } else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n        var allDayRow_1 = this.parent.getAllDayRow();\n        this.selectCells(false, allDayRow_1.cells[0]);\n      }\n    }\n  };\n\n  KeyboardInteraction.prototype.processLeft = function (e, isMultiple) {\n    var isTimelineYear = this.parent.currentView === 'TimelineYear';\n\n    if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear)) {\n      return;\n    }\n\n    var target = e.target;\n    var selectedCells = this.parent.getSelectedCells();\n    var targetCell;\n\n    if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      target = selectedCells[selectedCells.length - 1];\n    }\n\n    var selectedElements = this.parent.eventBase.getSelectedAppointments();\n\n    if (selectedElements.length > 0) {\n      target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n      this.parent.eventBase.removeSelectedAppointmentClass();\n\n      if (!target) {\n        return;\n      }\n    }\n\n    if (e.target.classList.contains(WORK_CELLS_CLASS) && target.classList.contains(WORK_CELLS_CLASS)) {\n      var key = this.processLeftRight(target);\n      var targetDate = new Date(+target.getAttribute('data-date'));\n      var isMonthStart = this.parent.currentView === 'Year' && targetDate.getTime() === firstDateOfMonth(targetDate).getTime();\n\n      if (key.columnIndex > 0 && key.columnIndex < key.maxIndex && !isMonthStart) {\n        targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n\n        if (isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n          targetCell = this.getTimelineYearTargetCell(key, target, false);\n        }\n\n        if (!isNullOrUndefined(targetCell)) {\n          this.selectCells(isMultiple, targetCell);\n        }\n      } else if (key.columnIndex === 0 || isMonthStart) {\n        if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n          targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n          var otherMonthCell = isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS);\n          targetCell = otherMonthCell ? this.getHorizontalLeftRightCell(key, target, false) : targetCell;\n\n          if (!isNullOrUndefined(targetCell)) {\n            this.selectCells(isMultiple, targetCell);\n          }\n        } else if (!isMultiple) {\n          if (isMonthStart && targetDate.getTime() !== this.parent.activeView.getStartDate().getTime()) {\n            this.selectCells(isMultiple, this.parent.element.querySelector('[data-date=\"' + (targetDate.getTime() - MS_PER_DAY) + '\"]'));\n            return;\n          }\n\n          this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n          var tableEle = this.parent.getContentTable();\n          var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n          var cell = tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[key.maxIndex - 1];\n\n          if (isMonthStart) {\n            var tbody = this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody');\n            cell = tbody.item(tbody.length - 1).querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + this.parent.activeView.getEndDate().getTime() + '\"]');\n          }\n\n          this.selectCells(false, cell);\n        }\n      }\n    } else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n      var curColIndex = target.cellIndex;\n      var allDayRow = this.parent.getAllDayRow();\n      var maxColIndex = allDayRow.cells.length;\n\n      if (curColIndex > 0 && curColIndex < maxColIndex) {\n        this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n      } else if (curColIndex === 0 && !isMultiple) {\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n        var allDayRow_2 = this.parent.getAllDayRow();\n        this.selectCells(false, allDayRow_2.cells[maxColIndex - 1]);\n      }\n    }\n  };\n\n  KeyboardInteraction.prototype.getTimelineYearTargetCell = function (key, target, isRight) {\n    return this.isInverseTableSelect() ? this.getVerticalLeftRightCell(target, isRight) : this.getHorizontalLeftRightCell(key, target, isRight);\n  };\n\n  KeyboardInteraction.prototype.getHorizontalLeftRightCell = function (key, target, isRight) {\n    var row = key.element.rows[target.parentNode.sectionRowIndex + (isRight ? 1 : -1)];\n\n    if (row) {\n      var query = isRight ? '.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')' : '[data-date=\"' + (+target.getAttribute('data-date') - MS_PER_DAY) + '\"]';\n      return row.querySelector(query);\n    }\n\n    return target;\n  };\n\n  KeyboardInteraction.prototype.getVerticalLeftRightCell = function (target, isRight) {\n    var date = new Date(+target.getAttribute('data-date'));\n    var start = new Date(date.getFullYear(), date.getMonth() + (isRight ? 1 : -1), 1);\n    var tableEle = this.parent.getContentTable();\n    var targetCell = tableEle.querySelector('[data-date=\"' + start.getTime() + '\"]');\n\n    if (targetCell.parentNode.sectionRowIndex > target.parentNode.sectionRowIndex) {\n      return targetCell;\n    }\n\n    return tableEle.querySelector('[data-date=\"' + new Date(start.getFullYear(), start.getMonth() + 1, 0).getTime() + '\"]');\n  };\n\n  KeyboardInteraction.prototype.calculateNextPrevDate = function (currentCell, target, type) {\n    var initialId = this.initialTarget.getAttribute('data-group-index');\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n      if (currentCell && target && target.getAttribute('data-group-index') !== initialId) {\n        var currentDate = this.parent.getDateFromElement(currentCell);\n        var nextPrevDate = type === 'right' ? new Date(currentDate.setDate(currentDate.getDate() + 1)) : new Date(currentDate.setDate(currentDate.getDate() - 1));\n        target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"' + nextPrevDate.getTime().toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n      }\n    }\n\n    return target;\n  };\n\n  KeyboardInteraction.prototype.getFocusableElements = function (container) {\n    var queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' + 'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' + 'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n    return [].slice.call(container.querySelectorAll(queryString));\n  };\n\n  KeyboardInteraction.prototype.processTabOnPopup = function (e, popupElement) {\n    var _this = this;\n\n    var focusableElements = this.getFocusableElements(popupElement);\n    focusableElements = focusableElements.filter(function (element) {\n      var footerEle = _this.parent.element.querySelector('.' + POPUP_FOOTER_CLASS);\n\n      if (footerEle && footerEle.offsetParent) {\n        return !(element.classList.contains(EDIT_CLASS) || element.classList.contains(DELETE_CLASS));\n      } else {\n        return !(element.classList.contains(EDIT_EVENT_CLASS) || element.classList.contains(DELETE_EVENT_CLASS));\n      }\n    });\n    var firstEle = focusableElements[0];\n    var lastEle = focusableElements[focusableElements.length - 1];\n\n    if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n      e.preventDefault();\n      firstEle.focus();\n    }\n\n    if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n      e.preventDefault();\n      lastEle.focus();\n    }\n  };\n\n  KeyboardInteraction.prototype.processTab = function (e, isReverse) {\n    var target = e.target;\n\n    if (target.classList.contains(INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {\n      target = target.closest('.e-appointment');\n      this.parent.inlineModule.inlineCrudActions(e.target);\n    }\n\n    if (this.parent.currentView === 'TimelineYear' && target.classList.contains(OTHERMONTH_CLASS)) {\n      if (target.classList.contains(SELECTED_CELL_CLASS)) {\n        this.parent.removeSelectedClass();\n      }\n\n      return;\n    }\n\n    var popupWrapper = closest(target, '.' + POPUP_WRAPPER_CLASS + ',.' + MORE_POPUP_WRAPPER_CLASS);\n\n    if (popupWrapper && popupWrapper.classList.contains(POPUP_OPEN)) {\n      if (popupWrapper.classList.contains(MORE_POPUP_WRAPPER_CLASS)) {\n        this.parent.eventBase.removeSelectedAppointmentClass();\n      }\n\n      this.processTabOnPopup(e, popupWrapper);\n      return;\n    }\n\n    if (target.classList.contains(ROOT)) {\n      this.parent.eventBase.removeSelectedAppointmentClass();\n      return;\n    }\n\n    if (target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n      var index = parseInt(target.getAttribute('data-group-index'), 10);\n      var appSelector = \".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index - 1 : index) + \"\\\"]\";\n      var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n\n      if (appElements.length > 0) {\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        var focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];\n        this.parent.eventBase.addSelectedAppointments([focusAppointment], true);\n        focusAppointment.focus();\n        e.preventDefault();\n      } else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {\n        this.parent.element.focus();\n        e.preventDefault();\n      } else if (this.parent.virtualScrollModule) {\n        var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n        var averageRowHeight = Math.round(virtual.offsetHeight / this.parent.resourceBase.expandedResources.length);\n        this.parent.element.querySelector('.e-content-wrap').scrollTop = (isReverse ? index - 1 : index + 1) * averageRowHeight;\n        this.parent.virtualScrollModule.virtualScrolling();\n      } else {\n        this.setScrollPosition(index);\n      }\n\n      return;\n    }\n\n    if (target.classList.contains(APPOINTMENT_CLASS)) {\n      var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n      var isTimelineYear = this.parent.currentView === 'TimelineYear';\n      var isTimeline = this.parent.activeView.isTimelineView() && !isTimelineYear;\n\n      if ((isTimeline || isTimelineYear && this.parent.activeViewOptions.orientation === 'Vertical') && this.parent.activeViewOptions.group.resources.length > 0) {\n        var index = parseInt(target.getAttribute('data-group-index'), 10);\n        appElements = [].slice.call(this.parent.element.querySelectorAll(\".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n        var resCellSelector = \".\" + RESOURCE_CELLS_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index : index + 1) + \"\\\"]\";\n        var resourceCell = this.parent.element.querySelector(resCellSelector);\n\n        if (resourceCell && (isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid') || !isReverse && target.getAttribute('data-guid') === appElements.slice(-1)[0].getAttribute('data-guid'))) {\n          this.parent.eventBase.removeSelectedAppointmentClass();\n\n          if (this.parent.virtualScrollModule) {\n            resourceCell.focus({\n              preventScroll: true\n            });\n          } else {\n            resourceCell.focus();\n          }\n\n          if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && isNullOrUndefined(this.parent.virtualScrollModule)) {\n            this.setScrollPosition(index);\n          }\n\n          e.preventDefault();\n          return;\n        }\n      }\n\n      var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n\n      if (selectedAppointments.length > 0) {\n        target = selectedAppointments[selectedAppointments.length - 1];\n      }\n\n      this.parent.eventBase.removeSelectedAppointmentClass();\n\n      if (!isReverse && target.getAttribute('data-guid') === appElements[appElements.length - 1].getAttribute('data-guid') || isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid')) {\n        return;\n      }\n\n      if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n        this.selectAppointment(isReverse, target);\n        e.preventDefault();\n      }\n\n      return;\n    }\n\n    var selectedCells = this.parent.getSelectedCells();\n\n    if (selectedCells.length > 0 && !target.classList.contains(APPOINTMENT_CLASS)) {\n      target = selectedCells[selectedCells.length - 1];\n      this.selectAppointmentElementFromWorkCell(isReverse, target);\n      e.preventDefault();\n      return;\n    }\n\n    if (target && !target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n      this.processTabOnResourceCells(target, isReverse);\n    }\n  };\n\n  KeyboardInteraction.prototype.processDelete = function (e) {\n    var activeEle = document.activeElement;\n\n    if (this.parent.currentView === 'MonthAgenda') {\n      var selectedEle = this.parent.eventBase.getSelectedEvents().element;\n      activeEle = selectedEle && isNullOrUndefined(selectedEle.length) ? selectedEle : selectedEle[0];\n    }\n\n    if (activeEle && activeEle.classList.contains(APPOINTMENT_CLASS)) {\n      addClass([activeEle], APPOINTMENT_BORDER);\n      this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n\n      if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(READ_ONLY) || !this.parent.eventSettings.allowDeleting) {\n        return;\n      }\n\n      this.parent.quickPopup.deleteClick(e);\n    }\n  };\n\n  KeyboardInteraction.prototype.processCtrlShiftNavigationArrows = function (e) {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n      var groupIndex = parseInt(document.activeElement.getAttribute('data-group-index'), 10);\n      var index = e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow' ? groupIndex - 1 : groupIndex + 1;\n      index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ? this.parent.resourceBase.lastResourceLevel.length : index;\n      var eventEle = [];\n\n      while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {\n        eventEle = [].slice.call(this.parent.element.querySelectorAll(\".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n        index = e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow' ? index - 1 : index + 1;\n      }\n\n      var nextAppEle = eventEle[0];\n\n      if (nextAppEle) {\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        this.parent.eventBase.addSelectedAppointments([nextAppEle], true);\n        nextAppEle.focus();\n      }\n    } else if (this.parent.activeViewOptions.group.resources.length > 0 && !document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n      var index = this.parent.resourceBase.renderedResources[0].groupIndex;\n      var appSelector = \".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\";\n      var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n\n      if (appElements.length > 0) {\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        var focusAppointment = appElements[0];\n        this.parent.eventBase.addSelectedAppointments([focusAppointment], true);\n        focusAppointment.focus();\n        e.preventDefault();\n      }\n    }\n  };\n\n  KeyboardInteraction.prototype.processEscape = function (event) {\n    this.parent.quickPopup.onClosePopup(event);\n    this.parent.quickPopup.morePopup.hide();\n\n    if (this.parent.headerModule) {\n      this.parent.headerModule.hideHeaderPopup();\n    }\n\n    if (this.parent.inlineModule) {\n      this.parent.inlineModule.removeInlineAppointmentElement();\n    }\n  };\n\n  KeyboardInteraction.prototype.isPreventAction = function (e) {\n    var target = closest(e.target, '.' + RESOURCE_GROUP_CELLS_CLASS);\n\n    if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  KeyboardInteraction.prototype.processTabOnResourceCells = function (target, isReverse) {\n    var tabElements = [].slice.call(this.parent.element.querySelectorAll('[tabIndex=\"0\"]'));\n    var currentTabIndex = tabElements.indexOf(target);\n    var nextTabElement = !isReverse ? tabElements[currentTabIndex + 1] : tabElements[currentTabIndex - 1];\n\n    if (nextTabElement && nextTabElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n      var groupIndex = parseInt(nextTabElement.getAttribute('data-group-index'), 10);\n\n      if (this.parent.virtualScrollModule) {\n        var resColWrap_1 = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n        resCells.forEach(function (element) {\n          if (element.getBoundingClientRect().top < resColWrap_1.getBoundingClientRect().top) {\n            element.setAttribute('tabindex', '-1');\n          }\n        });\n      } else {\n        this.setScrollPosition(groupIndex);\n      }\n    }\n  };\n\n  KeyboardInteraction.prototype.setScrollPosition = function (index) {\n    var workCell = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n\n    if (workCell) {\n      this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop = workCell.offsetTop;\n    }\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} Returns the module name.\n   */\n\n\n  KeyboardInteraction.prototype.getModuleName = function () {\n    return 'keyboard';\n  };\n  /**\n   * To destroy the keyboard module.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  KeyboardInteraction.prototype.destroy = function () {\n    this.removeEventListener();\n    this.selectedCells = [];\n    this.keyboardModule.destroy();\n  };\n\n  return KeyboardInteraction;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * data module is used to generate query and data source.\n *\n * @private\n */\n\n\nvar Data =\n/** @__PURE__ @class */\nfunction () {\n  /**\n   * Constructor for data module\n   *\n   * @param {Schedule} parent Accepts the schedule element instance\n   * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n   * @param {Query} query Accepts the query to process the data\n   * @private\n   */\n  function Data(parent, dataSource, query) {\n    this.parent = parent;\n    this.initDataManager(dataSource, query);\n  }\n  /**\n   * The function used to initialize dataManager and query\n   *\n   * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n   * @param {Query} query Accepts the query to process the data\n   * @returns {void}\n   * @private\n   */\n\n\n  Data.prototype.initDataManager = function (dataSource, query) {\n    this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n    this.query = query instanceof Query ? query : new Query();\n  };\n  /**\n   * The function used to generate updated Query from schedule model\n   *\n   * @param {Date} startDate Accepts the start date\n   * @param {Date} endDate Accepts the end date\n   * @returns {void}\n   * @private\n   */\n\n\n  Data.prototype.generateQuery = function (startDate, endDate) {\n    var query = this.query.clone();\n\n    if (this.parent && this.parent.eventSettings.includeFiltersInQuery && startDate && endDate) {\n      var dateQuery = this.getStartEndQuery(startDate, endDate);\n      var recurrenceQuery = new Predicate(this.parent.eventFields.recurrenceRule, 'notequal', null).and(new Predicate(this.parent.eventFields.recurrenceRule, 'notequal', ''));\n      return query.where(dateQuery.or(recurrenceQuery));\n    }\n\n    if (startDate) {\n      query.addParams('StartDate', startDate.toISOString());\n    }\n\n    if (endDate) {\n      query.addParams('EndDate', endDate.toISOString());\n    }\n\n    return query;\n  };\n  /**\n   * The function used to generate updated Query from schedule model\n   *\n   * @param {Date} startDate Accepts the start date\n   * @param {Date} endDate Accepts the end date\n   * @returns {void}\n   * @private\n   */\n\n\n  Data.prototype.getStartEndQuery = function (startDate, endDate) {\n    var fieldMapping = this.parent.eventFields;\n    var dateQuery = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate).and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate)).and(new Predicate(fieldMapping.startTime, 'lessthan', endDate)).or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate).and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n    return dateQuery;\n  };\n  /**\n   * The function used to get dataSource by executing given Query\n   *\n   * @param  {Query} query - A Query that specifies to generate dataSource\n   * @returns {void}\n   * @private\n   */\n\n\n  Data.prototype.getData = function (query) {\n    return this.dataManager.executeQuery(query);\n  };\n  /**\n   * To destroy the crud module.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Data.prototype.destroy = function () {\n    this.dataManager = null;\n    this.query = null;\n  };\n\n  return Data;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/** @private */\n\n\nvar Gregorian =\n/** @__PURE__ @class */\nfunction () {\n  function Gregorian() {}\n\n  Gregorian.prototype.firstDateOfMonth = function (date) {\n    return new Date(date.getFullYear(), date.getMonth());\n  };\n\n  Gregorian.prototype.lastDateOfMonth = function (dt) {\n    return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n  };\n\n  Gregorian.prototype.isMonthStart = function (date) {\n    return date.getDate() === 1;\n  };\n\n  Gregorian.prototype.getLeapYearDaysCount = function () {\n    return 366;\n  };\n\n  Gregorian.prototype.getYearDaysCount = function (date, interval) {\n    return (date.getFullYear() + interval) % 4 === 0 ? 366 : 365;\n  };\n\n  Gregorian.prototype.getDate = function (date) {\n    return date.getDate();\n  };\n\n  Gregorian.prototype.getMonth = function (date) {\n    return date.getMonth() + 1;\n  };\n\n  Gregorian.prototype.getFullYear = function (date) {\n    return date.getFullYear();\n  };\n\n  Gregorian.prototype.getYearLastDate = function (date, interval) {\n    return new Date(date.getFullYear() + interval, 0, 0);\n  };\n\n  Gregorian.prototype.getMonthDaysCount = function (date) {\n    return this.lastDateOfMonth(date).getDate();\n  };\n\n  Gregorian.prototype.getMonthStartDate = function (date) {\n    return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n  };\n\n  Gregorian.prototype.getMonthEndDate = function (date) {\n    date.setDate(1);\n    return new Date(date.setMonth(date.getMonth() + 1));\n  };\n\n  Gregorian.prototype.getExpectedDays = function (date, days) {\n    return days;\n  };\n\n  Gregorian.prototype.setDate = function (dateObj, date) {\n    dateObj.setDate(date);\n  };\n\n  Gregorian.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n    if (!isNullOrUndefined(beginDate)) {\n      date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n    } else {\n      date.setMonth(date.getMonth() + interval, startDate);\n    }\n  };\n\n  Gregorian.prototype.setMonth = function (date, interval, startDate) {\n    date.setDate(1);\n    date.setFullYear(date.getFullYear());\n    date.setMonth(interval - 1);\n    var maxDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n    date.setDate(Math.min(startDate, maxDay));\n  };\n\n  Gregorian.prototype.addYears = function (date, interval) {\n    date.setFullYear(date.getFullYear() + interval);\n  };\n\n  Gregorian.prototype.isSameMonth = function (date1, date2) {\n    return date1.getMonth() === date2.getMonth();\n  };\n\n  Gregorian.prototype.checkMonth = function (date, months) {\n    return months.indexOf(date.getMonth() + 1) === -1;\n  };\n\n  Gregorian.prototype.compareMonth = function (date1, date2) {\n    return date1.getMonth() > date2.getMonth();\n  };\n\n  Gregorian.prototype.isSameYear = function (date1, date2) {\n    return date1.getFullYear() === date2.getFullYear();\n  };\n\n  Gregorian.prototype.isLastMonth = function (date) {\n    return date.getMonth() === 11;\n  };\n\n  Gregorian.prototype.isLeapYear = function (year, interval) {\n    return (year + interval) % 4 === 0;\n  };\n\n  return Gregorian;\n}();\n/** @private */\n\n\nvar Islamic =\n/** @__PURE__ @class */\nfunction () {\n  function Islamic() {}\n\n  Islamic.prototype.firstDateOfMonth = function (date) {\n    var hDate = this.getHijriDate(date);\n    var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n    return gDate;\n  };\n\n  Islamic.prototype.lastDateOfMonth = function (date) {\n    var hDate = this.getHijriDate(date);\n    var daysInMonth = this.getDaysInMonth(hDate.month, hDate.year);\n    var gDate = HijriParser.toGregorian(hDate.year, hDate.month, daysInMonth);\n    var finalGDate = new Date(gDate.getTime());\n    finalGDate = new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n    var finalHDate = this.getHijriDate(finalGDate);\n\n    if (hDate.month === finalHDate.month) {\n      return finalGDate;\n    }\n\n    finalHDate = this.getHijriDate(gDate);\n\n    if (hDate.month === finalHDate.month) {\n      return gDate;\n    }\n\n    return new Date(gDate.setDate(gDate.getDate() - 1));\n  };\n\n  Islamic.prototype.isMonthStart = function (date) {\n    var hijriDate = this.getHijriDate(date);\n    return hijriDate.date === 1;\n  };\n\n  Islamic.prototype.getLeapYearDaysCount = function () {\n    return 355;\n  };\n\n  Islamic.prototype.getYearDaysCount = function (date, interval) {\n    var hDate = this.getHijriDate(date);\n    return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n  };\n\n  Islamic.prototype.getDate = function (date) {\n    var hijriDate = this.getHijriDate(date);\n    return hijriDate.date;\n  };\n\n  Islamic.prototype.getMonth = function (date) {\n    var hDate = this.getHijriDate(date);\n    return hDate.month;\n  };\n\n  Islamic.prototype.getFullYear = function (date) {\n    var hDate = this.getHijriDate(date);\n    return hDate.year;\n  };\n\n  Islamic.prototype.getYearLastDate = function (date, interval) {\n    var hDate = this.getHijriDate(date);\n    var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n    return gDate;\n  };\n\n  Islamic.prototype.getMonthDaysCount = function (date) {\n    var maxDate = this.lastDateOfMonth(date);\n    var hijriDate = this.getHijriDate(maxDate);\n    return hijriDate.date;\n  };\n\n  Islamic.prototype.getMonthStartDate = function (date) {\n    var firstDate = this.firstDateOfMonth(date);\n    return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n  };\n\n  Islamic.prototype.getMonthEndDate = function (date) {\n    var lastDate = this.lastDateOfMonth(date);\n    lastDate.setDate(lastDate.getDate() + 1);\n    return new Date(lastDate.setMonth(lastDate.getMonth()));\n  };\n\n  Islamic.prototype.getExpectedDays = function (date, days) {\n    var hDate = this.getHijriDate(date);\n    var day = [];\n\n    for (var i = 0; i < days.length; i++) {\n      var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[parseInt(i.toString(), 10)]);\n      day.push(gDate.getDate());\n    }\n\n    return day;\n  };\n\n  Islamic.prototype.setDate = function (dateObj, date) {\n    var hDate = this.getHijriDate(dateObj);\n    var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n    this.updateDateObj(dateObj, gDate);\n  };\n\n  Islamic.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n    var firstDate = !isNullOrUndefined(beginDate) ? this.firstDateOfMonth(beginDate) : date;\n    var hDate = this.getHijriDate(firstDate);\n    var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n    this.updateDateObj(date, gDate);\n  };\n\n  Islamic.prototype.setMonth = function (date, interval, startDate) {\n    var hDate = this.getHijriDate(date);\n    var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n    this.updateDateObj(date, gDate);\n  };\n\n  Islamic.prototype.addYears = function (date, interval, monthValue) {\n    var hDate = this.getHijriDate(date);\n    var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n    this.updateDateObj(date, gDate);\n  };\n\n  Islamic.prototype.isSameMonth = function (date1, date2) {\n    var currentHijri = this.getHijriDate(date1);\n    var tempHijri = this.getHijriDate(date2);\n    return currentHijri.month === tempHijri.month;\n  };\n\n  Islamic.prototype.checkMonth = function (date, months) {\n    var hDate = this.getHijriDate(date);\n    return months.indexOf(hDate.month) === -1;\n  };\n\n  Islamic.prototype.compareMonth = function (date1, date2) {\n    var hDate = this.getHijriDate(date1);\n    var hDate1 = this.getHijriDate(date2);\n    return hDate.month > hDate1.month;\n  };\n\n  Islamic.prototype.isSameYear = function (date1, date2) {\n    var hDate = this.getHijriDate(date1);\n    var hDate1 = this.getHijriDate(date2);\n    return hDate.year === hDate1.year;\n  };\n\n  Islamic.prototype.isLastMonth = function (date) {\n    var hDate = this.getHijriDate(date);\n    return hDate.month === 12;\n  };\n\n  Islamic.prototype.updateDateObj = function (date, gDate) {\n    date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n  };\n\n  Islamic.prototype.isLeapYear = function (year, interval) {\n    return (14 + 11 * (year + interval)) % 30 < 11;\n  };\n\n  Islamic.prototype.getDaysInMonth = function (month, year) {\n    var length = 0;\n    length = 29 + (month + 1) % 2;\n\n    if (month === 11 && this.isLeapYear(year, 0)) {\n      length++;\n    }\n\n    return length;\n  };\n\n  Islamic.prototype.getHijriDate = function (date) {\n    return HijriParser.getHijriDate(date);\n  };\n\n  return Islamic;\n}();\n/**\n * Time zone\n */\n\n\nvar Timezone =\n/** @__PURE__ @class */\nfunction () {\n  function Timezone() {\n    this.timezoneData = [];\n    this.timezoneData = this.getTimezoneData();\n  }\n\n  Timezone.prototype.offset = function (date, timezone) {\n    var localOffset = date.getTimezoneOffset();\n\n    try {\n      var convertedDate = new Date(date.toLocaleString('en-US', {\n        timeZone: timezone\n      }));\n\n      if (!isNaN(convertedDate.getTime())) {\n        return (date.getTime() - convertedDate.getTime()) / 60000 + localOffset;\n      }\n\n      return 0;\n    } catch (error) {\n      return 0;\n    }\n  };\n\n  Timezone.prototype.convert = function (date, fromOffset, toOffset) {\n    if (typeof fromOffset === 'string') {\n      fromOffset = this.offset(date, fromOffset);\n    }\n\n    if (typeof toOffset === 'string') {\n      toOffset = this.offset(date, toOffset);\n    }\n\n    var fromLocalOffset = date.getTimezoneOffset();\n    date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n    var toLocalOffset = date.getTimezoneOffset();\n    return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n  };\n\n  Timezone.prototype.add = function (date, timezone) {\n    return this.convert(date, date.getTimezoneOffset(), timezone);\n  };\n\n  Timezone.prototype.remove = function (date, timezone) {\n    return this.convert(date, timezone, date.getTimezoneOffset());\n  };\n\n  Timezone.prototype.removeLocalOffset = function (date) {\n    return new Date(date.getTime() - date.getTimezoneOffset() * 60000);\n  };\n\n  Timezone.prototype.getLocalTimezoneName = function () {\n    return window.Intl ? Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n  };\n\n  Timezone.prototype.getTimezoneData = function () {\n    return timezoneData;\n  };\n\n  return Timezone;\n}();\n\nvar timezoneData = [{\n  Value: 'Pacific/Niue',\n  Text: '(UTC-11:00) Niue'\n}, {\n  Value: 'Pacific/Pago_Pago',\n  Text: '(UTC-11:00) Pago Pago'\n}, {\n  Value: 'Pacific/Honolulu',\n  Text: '(UTC-10:00) Hawaii Time'\n}, {\n  Value: 'Pacific/Rarotonga',\n  Text: '(UTC-10:00) Rarotonga'\n}, {\n  Value: 'Pacific/Tahiti',\n  Text: '(UTC-10:00) Tahiti'\n}, {\n  Value: 'Pacific/Marquesas',\n  Text: '(UTC-09:30) Marquesas'\n}, {\n  Value: 'America/Anchorage',\n  Text: '(UTC-09:00) Alaska Time'\n}, {\n  Value: 'Pacific/Gambier',\n  Text: '(UTC-09:00) Gambier'\n}, {\n  Value: 'America/Los_Angeles',\n  Text: '(UTC-08:00) Pacific Time'\n}, {\n  Value: 'America/Tijuana',\n  Text: '(UTC-08:00) Pacific Time - Tijuana'\n}, {\n  Value: 'America/Vancouver',\n  Text: '(UTC-08:00) Pacific Time - Vancouver'\n}, {\n  Value: 'America/Whitehorse',\n  Text: '(UTC-08:00) Pacific Time - Whitehorse'\n}, {\n  Value: 'Pacific/Pitcairn',\n  Text: '(UTC-08:00) Pitcairn'\n}, {\n  Value: 'America/Denver',\n  Text: '(UTC-07:00) Mountain Time'\n}, {\n  Value: 'America/Phoenix',\n  Text: '(UTC-07:00) Mountain Time - Arizona'\n}, {\n  Value: 'America/Mazatlan',\n  Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan'\n}, {\n  Value: 'America/Dawson_Creek',\n  Text: '(UTC-07:00) Mountain Time - Dawson Creek'\n}, {\n  Value: 'America/Edmonton',\n  Text: '(UTC-07:00) Mountain Time - Edmonton'\n}, {\n  Value: 'America/Hermosillo',\n  Text: '(UTC-07:00) Mountain Time - Hermosillo'\n}, {\n  Value: 'America/Yellowknife',\n  Text: '(UTC-07:00) Mountain Time - Yellowknife'\n}, {\n  Value: 'America/Belize',\n  Text: '(UTC-06:00) Belize'\n}, {\n  Value: 'America/Chicago',\n  Text: '(UTC-06:00) Central Time'\n}, {\n  Value: 'America/Mexico_City',\n  Text: '(UTC-06:00) Central Time - Mexico City'\n}, {\n  Value: 'America/Regina',\n  Text: '(UTC-06:00) Central Time - Regina'\n}, {\n  Value: 'America/Tegucigalpa',\n  Text: '(UTC-06:00) Central Time - Tegucigalpa'\n}, {\n  Value: 'America/Winnipeg',\n  Text: '(UTC-06:00) Central Time - Winnipeg'\n}, {\n  Value: 'America/Costa_Rica',\n  Text: '(UTC-06:00) Costa Rica'\n}, {\n  Value: 'America/El_Salvador',\n  Text: '(UTC-06:00) El Salvador'\n}, {\n  Value: 'Pacific/Galapagos',\n  Text: '(UTC-06:00) Galapagos'\n}, {\n  Value: 'America/Guatemala',\n  Text: '(UTC-06:00) Guatemala'\n}, {\n  Value: 'America/Managua',\n  Text: '(UTC-06:00) Managua'\n}, {\n  Value: 'America/Cancun',\n  Text: '(UTC-05:00) America Cancun'\n}, {\n  Value: 'America/Bogota',\n  Text: '(UTC-05:00) Bogota'\n}, {\n  Value: 'Pacific/Easter',\n  Text: '(UTC-05:00) Easter Island'\n}, {\n  Value: 'America/New_York',\n  Text: '(UTC-05:00) Eastern Time'\n}, {\n  Value: 'America/Iqaluit',\n  Text: '(UTC-05:00) Eastern Time - Iqaluit'\n}, {\n  Value: 'America/Toronto',\n  Text: '(UTC-05:00) Eastern Time - Toronto'\n}, {\n  Value: 'America/Guayaquil',\n  Text: '(UTC-05:00) Guayaquil'\n}, {\n  Value: 'America/Havana',\n  Text: '(UTC-05:00) Havana'\n}, {\n  Value: 'America/Jamaica',\n  Text: '(UTC-05:00) Jamaica'\n}, {\n  Value: 'America/Lima',\n  Text: '(UTC-05:00) Lima'\n}, {\n  Value: 'America/Nassau',\n  Text: '(UTC-05:00) Nassau'\n}, {\n  Value: 'America/Panama',\n  Text: '(UTC-05:00) Panama'\n}, {\n  Value: 'America/Port-au-Prince',\n  Text: '(UTC-05:00) Port-au-Prince'\n}, {\n  Value: 'America/Rio_Branco',\n  Text: '(UTC-05:00) Rio Branco'\n}, {\n  Value: 'America/Halifax',\n  Text: '(UTC-04:00) Atlantic Time - Halifax'\n}, {\n  Value: 'America/Barbados',\n  Text: '(UTC-04:00) Barbados'\n}, {\n  Value: 'Atlantic/Bermuda',\n  Text: '(UTC-04:00) Bermuda'\n}, {\n  Value: 'America/Boa_Vista',\n  Text: '(UTC-04:00) Boa Vista'\n}, {\n  Value: 'America/Caracas',\n  Text: '(UTC-04:00) Caracas'\n}, {\n  Value: 'America/Curacao',\n  Text: '(UTC-04:00) Curacao'\n}, {\n  Value: 'America/Grand_Turk',\n  Text: '(UTC-04:00) Grand Turk'\n}, {\n  Value: 'America/Guyana',\n  Text: '(UTC-04:00) Guyana'\n}, {\n  Value: 'America/La_Paz',\n  Text: '(UTC-04:00) La Paz'\n}, {\n  Value: 'America/Manaus',\n  Text: '(UTC-04:00) Manaus'\n}, {\n  Value: 'America/Martinique',\n  Text: '(UTC-04:00) Martinique'\n}, {\n  Value: 'America/Port_of_Spain',\n  Text: '(UTC-04:00) Port of Spain'\n}, {\n  Value: 'America/Porto_Velho',\n  Text: '(UTC-04:00) Porto Velho'\n}, {\n  Value: 'America/Puerto_Rico',\n  Text: '(UTC-04:00) Puerto Rico'\n}, {\n  Value: 'America/Santo_Domingo',\n  Text: '(UTC-04:00) Santo Domingo'\n}, {\n  Value: 'America/Thule',\n  Text: '(UTC-04:00) Thule'\n}, {\n  Value: 'America/St_Johns',\n  Text: '(UTC-03:30) Newfoundland Time - St. Johns'\n}, {\n  Value: 'America/Araguaina',\n  Text: '(UTC-03:00) Araguaina'\n}, {\n  Value: 'America/Asuncion',\n  Text: '(UTC-03:00) Asuncion'\n}, {\n  Value: 'America/Belem',\n  Text: '(UTC-03:00) Belem'\n}, {\n  Value: 'America/Argentina/Buenos_Aires',\n  Text: '(UTC-03:00) Buenos Aires'\n}, {\n  Value: 'America/Campo_Grande',\n  Text: '(UTC-03:00) Campo Grande'\n}, {\n  Value: 'America/Cayenne',\n  Text: '(UTC-03:00) Cayenne'\n}, {\n  Value: 'America/Cuiaba',\n  Text: '(UTC-03:00) Cuiaba'\n}, {\n  Value: 'America/Fortaleza',\n  Text: '(UTC-03:00) Fortaleza'\n}, {\n  Value: 'America/Godthab',\n  Text: '(UTC-03:00) Godthab'\n}, {\n  Value: 'America/Maceio',\n  Text: '(UTC-03:00) Maceio'\n}, {\n  Value: 'America/Miquelon',\n  Text: '(UTC-03:00) Miquelon'\n}, {\n  Value: 'America/Montevideo',\n  Text: '(UTC-03:00) Montevideo'\n}, {\n  Value: 'Antarctica/Palmer',\n  Text: '(UTC-03:00) Palmer'\n}, {\n  Value: 'America/Paramaribo',\n  Text: '(UTC-03:00) Paramaribo'\n}, {\n  Value: 'America/Punta_Arenas',\n  Text: '(UTC-03:00) Punta Arenas'\n}, {\n  Value: 'America/Recife',\n  Text: '(UTC-03:00) Recife'\n}, {\n  Value: 'Antarctica/Rothera',\n  Text: '(UTC-03:00) Rothera'\n}, {\n  Value: 'America/Bahia',\n  Text: '(UTC-03:00) Salvador'\n}, {\n  Value: 'America/Santiago',\n  Text: '(UTC-03:00) Santiago'\n}, {\n  Value: 'Atlantic/Stanley',\n  Text: '(UTC-03:00) Stanley'\n}, {\n  Value: 'America/Noronha',\n  Text: '(UTC-02:00) Noronha'\n}, {\n  Value: 'America/Sao_Paulo',\n  Text: '(UTC-02:00) Sao Paulo'\n}, {\n  Value: 'Atlantic/South_Georgia',\n  Text: '(UTC-02:00) South Georgia'\n}, {\n  Value: 'Atlantic/Azores',\n  Text: '(UTC-01:00) Azores'\n}, {\n  Value: 'Atlantic/Cape_Verde',\n  Text: '(UTC-01:00) Cape Verde'\n}, {\n  Value: 'America/Scoresbysund',\n  Text: '(UTC-01:00) Scoresbysund'\n}, {\n  Value: 'Africa/Abidjan',\n  Text: '(UTC+00:00) Abidjan'\n}, {\n  Value: 'Africa/Accra',\n  Text: '(UTC+00:00) Accra'\n}, {\n  Value: 'Africa/Bissau',\n  Text: '(UTC+00:00) Bissau'\n}, {\n  Value: 'Atlantic/Canary',\n  Text: '(UTC+00:00) Canary Islands'\n}, {\n  Value: 'Africa/Casablanca',\n  Text: '(UTC+00:00) Casablanca'\n}, {\n  Value: 'America/Danmarkshavn',\n  Text: '(UTC+00:00) Danmarkshavn'\n}, {\n  Value: 'Europe/Dublin',\n  Text: '(UTC+00:00) Dublin'\n}, {\n  Value: 'Africa/El_Aaiun',\n  Text: '(UTC+00:00) El Aaiun'\n}, {\n  Value: 'Atlantic/Faroe',\n  Text: '(UTC+00:00) Faeroe'\n}, {\n  Value: 'Etc/UTC',\n  Text: '(UTC+00:00) UTC (no daylight saving)'\n}, {\n  Value: 'Europe/Lisbon',\n  Text: '(UTC+00:00) Lisbon'\n}, {\n  Value: 'Europe/London',\n  Text: '(UTC+00:00) London'\n}, {\n  Value: 'Africa/Monrovia',\n  Text: '(UTC+00:00) Monrovia'\n}, {\n  Value: 'Atlantic/Reykjavik',\n  Text: '(UTC+00:00) Reykjavik'\n}, {\n  Value: 'UTC',\n  Text: 'UTC'\n}, {\n  Value: 'Africa/Algiers',\n  Text: '(UTC+01:00) Algiers'\n}, {\n  Value: 'Europe/Amsterdam',\n  Text: '(UTC+01:00) Amsterdam'\n}, {\n  Value: 'Europe/Andorra',\n  Text: '(UTC+01:00) Andorra'\n}, {\n  Value: 'Europe/Berlin',\n  Text: '(UTC+01:00) Berlin'\n}, {\n  Value: 'Europe/Brussels',\n  Text: '(UTC+01:00) Brussels'\n}, {\n  Value: 'Europe/Budapest',\n  Text: '(UTC+01:00) Budapest'\n}, {\n  Value: 'Europe/Belgrade',\n  Text: '(UTC+01:00) Central European Time - Belgrade'\n}, {\n  Value: 'Europe/Prague',\n  Text: '(UTC+01:00) Central European Time - Prague'\n}, {\n  Value: 'Africa/Ceuta',\n  Text: '(UTC+01:00) Ceuta'\n}, {\n  Value: 'Europe/Copenhagen',\n  Text: '(UTC+01:00) Copenhagen'\n}, {\n  Value: 'Europe/Gibraltar',\n  Text: '(UTC+01:00) Gibraltar'\n}, {\n  Value: 'Africa/Lagos',\n  Text: '(UTC+01:00) Lagos'\n}, {\n  Value: 'Europe/Luxembourg',\n  Text: '(UTC+01:00) Luxembourg'\n}, {\n  Value: 'Europe/Madrid',\n  Text: '(UTC+01:00) Madrid'\n}, {\n  Value: 'Europe/Malta',\n  Text: '(UTC+01:00) Malta'\n}, {\n  Value: 'Europe/Monaco',\n  Text: '(UTC+01:00) Monaco'\n}, {\n  Value: 'Africa/Ndjamena',\n  Text: '(UTC+01:00) Ndjamena'\n}, {\n  Value: 'Europe/Oslo',\n  Text: '(UTC+01:00) Oslo'\n}, {\n  Value: 'Europe/Paris',\n  Text: '(UTC+01:00) Paris'\n}, {\n  Value: 'Europe/Rome',\n  Text: '(UTC+01:00) Rome'\n}, {\n  Value: 'Europe/Stockholm',\n  Text: '(UTC+01:00) Stockholm'\n}, {\n  Value: 'Europe/Tirane',\n  Text: '(UTC+01:00) Tirane'\n}, {\n  Value: 'Africa/Tunis',\n  Text: '(UTC+01:00) Tunis'\n}, {\n  Value: 'Europe/Vienna',\n  Text: '(UTC+01:00) Vienna'\n}, {\n  Value: 'Europe/Warsaw',\n  Text: '(UTC+01:00) Warsaw'\n}, {\n  Value: 'Europe/Zurich',\n  Text: '(UTC+01:00) Zurich'\n}, {\n  Value: 'Asia/Amman',\n  Text: '(UTC+02:00) Amman'\n}, {\n  Value: 'Europe/Athens',\n  Text: '(UTC+02:00) Athens'\n}, {\n  Value: 'Asia/Beirut',\n  Text: '(UTC+02:00) Beirut'\n}, {\n  Value: 'Europe/Bucharest',\n  Text: '(UTC+02:00) Bucharest'\n}, {\n  Value: 'Africa/Cairo',\n  Text: '(UTC+02:00) Cairo'\n}, {\n  Value: 'Europe/Chisinau',\n  Text: '(UTC+02:00) Chisinau'\n}, {\n  Value: 'Asia/Damascus',\n  Text: '(UTC+02:00) Damascus'\n}, {\n  Value: 'Asia/Gaza',\n  Text: '(UTC+02:00) Gaza'\n}, {\n  Value: 'Europe/Helsinki',\n  Text: '(UTC+02:00) Helsinki'\n}, {\n  Value: 'Asia/Jerusalem',\n  Text: '(UTC+02:00) Jerusalem'\n}, {\n  Value: 'Africa/Johannesburg',\n  Text: '(UTC+02:00) Johannesburg'\n}, {\n  Value: 'Africa/Khartoum',\n  Text: '(UTC+02:00) Khartoum'\n}, {\n  Value: 'Europe/Kiev',\n  Text: '(UTC+02:00) Kiev'\n}, {\n  Value: 'Africa/Maputo',\n  Text: '(UTC+02:00) Maputo'\n}, {\n  Value: 'Europe/Kaliningrad',\n  Text: '(UTC+02:00) Moscow-01 - Kaliningrad'\n}, {\n  Value: 'Asia/Nicosia',\n  Text: '(UTC+02:00) Nicosia'\n}, {\n  Value: 'Europe/Riga',\n  Text: '(UTC+02:00) Riga'\n}, {\n  Value: 'Europe/Sofia',\n  Text: '(UTC+02:00) Sofia'\n}, {\n  Value: 'Europe/Tallinn',\n  Text: '(UTC+02:00) Tallinn'\n}, {\n  Value: 'Africa/Tripoli',\n  Text: '(UTC+02:00) Tripoli'\n}, {\n  Value: 'Europe/Vilnius',\n  Text: '(UTC+02:00) Vilnius'\n}, {\n  Value: 'Africa/Windhoek',\n  Text: '(UTC+02:00) Windhoek'\n}, {\n  Value: 'Asia/Baghdad',\n  Text: '(UTC+03:00) Baghdad'\n}, {\n  Value: 'Europe/Istanbul',\n  Text: '(UTC+03:00) Istanbul'\n}, {\n  Value: 'Europe/Minsk',\n  Text: '(UTC+03:00) Minsk'\n}, {\n  Value: 'Europe/Moscow',\n  Text: '(UTC+03:00) Moscow+00 - Moscow'\n}, {\n  Value: 'Africa/Nairobi',\n  Text: '(UTC+03:00) Nairobi'\n}, {\n  Value: 'Asia/Qatar',\n  Text: '(UTC+03:00) Qatar'\n}, {\n  Value: 'Asia/Riyadh',\n  Text: '(UTC+03:00) Riyadh'\n}, {\n  Value: 'Antarctica/Syowa',\n  Text: '(UTC+03:00) Syowa'\n}, {\n  Value: 'Asia/Tehran',\n  Text: '(UTC+03:30) Tehran'\n}, {\n  Value: 'Asia/Baku',\n  Text: '(UTC+04:00) Baku'\n}, {\n  Value: 'Asia/Dubai',\n  Text: '(UTC+04:00) Dubai'\n}, {\n  Value: 'Indian/Mahe',\n  Text: '(UTC+04:00) Mahe'\n}, {\n  Value: 'Indian/Mauritius',\n  Text: '(UTC+04:00) Mauritius'\n}, {\n  Value: 'Europe/Samara',\n  Text: '(UTC+04:00) Moscow+01 - Samara'\n}, {\n  Value: 'Indian/Reunion',\n  Text: '(UTC+04:00) Reunion'\n}, {\n  Value: 'Asia/Tbilisi',\n  Text: '(UTC+04:00) Tbilisi'\n}, {\n  Value: 'Asia/Yerevan',\n  Text: '(UTC+04:00) Yerevan'\n}, {\n  Value: 'Asia/Kabul',\n  Text: '(UTC+04:30) Kabul'\n}, {\n  Value: 'Asia/Aqtau',\n  Text: '(UTC+05:00) Aqtau'\n}, {\n  Value: 'Asia/Aqtobe',\n  Text: '(UTC+05:00) Aqtobe'\n}, {\n  Value: 'Asia/Ashgabat',\n  Text: '(UTC+05:00) Ashgabat'\n}, {\n  Value: 'Asia/Dushanbe',\n  Text: '(UTC+05:00) Dushanbe'\n}, {\n  Value: 'Asia/Karachi',\n  Text: '(UTC+05:00) Karachi'\n}, {\n  Value: 'Indian/Kerguelen',\n  Text: '(UTC+05:00) Kerguelen'\n}, {\n  Value: 'Indian/Maldives',\n  Text: '(UTC+05:00) Maldives'\n}, {\n  Value: 'Antarctica/Mawson',\n  Text: '(UTC+05:00) Mawson'\n}, {\n  Value: 'Asia/Yekaterinburg',\n  Text: '(UTC+05:00) Moscow+02 - Yekaterinburg'\n}, {\n  Value: 'Asia/Tashkent',\n  Text: '(UTC+05:00) Tashkent'\n}, {\n  Value: 'Asia/Colombo',\n  Text: '(UTC+05:30) Colombo'\n}, {\n  Value: 'Asia/Kolkata',\n  Text: '(UTC+05:30) India Standard Time'\n}, {\n  Value: 'Asia/Katmandu',\n  Text: '(UTC+05:45) Katmandu'\n}, {\n  Value: 'Asia/Almaty',\n  Text: '(UTC+06:00) Almaty'\n}, {\n  Value: 'Asia/Bishkek',\n  Text: '(UTC+06:00) Bishkek'\n}, {\n  Value: 'Indian/Chagos',\n  Text: '(UTC+06:00) Chagos'\n}, {\n  Value: 'Asia/Dhaka',\n  Text: '(UTC+06:00) Dhaka'\n}, {\n  Value: 'Asia/Omsk',\n  Text: '(UTC+06:00) Moscow+03 - Omsk'\n}, {\n  Value: 'Asia/Thimphu',\n  Text: '(UTC+06:00) Thimphu'\n}, {\n  Value: 'Antarctica/Vostok',\n  Text: '(UTC+06:00) Vostok'\n}, {\n  Value: 'Indian/Cocos',\n  Text: '(UTC+06:30) Cocos'\n}, {\n  Value: 'Asia/Yangon',\n  Text: '(UTC+06:30) Rangoon'\n}, {\n  Value: 'Asia/Bangkok',\n  Text: '(UTC+07:00) Bangkok'\n}, {\n  Value: 'Indian/Christmas',\n  Text: '(UTC+07:00) Christmas'\n}, {\n  Value: 'Antarctica/Davis',\n  Text: '(UTC+07:00) Davis'\n}, {\n  Value: 'Asia/Saigon',\n  Text: '(UTC+07:00) Hanoi'\n}, {\n  Value: 'Asia/Hovd',\n  Text: '(UTC+07:00) Hovd'\n}, {\n  Value: 'Asia/Jakarta',\n  Text: '(UTC+07:00) Jakarta'\n}, {\n  Value: 'Asia/Krasnoyarsk',\n  Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk'\n}, {\n  Value: 'Asia/Brunei',\n  Text: '(UTC+08:00) Brunei'\n}, {\n  Value: 'Asia/Shanghai',\n  Text: '(UTC+08:00) China Time - Beijing'\n}, {\n  Value: 'Asia/Choibalsan',\n  Text: '(UTC+08:00) Choibalsan'\n}, {\n  Value: 'Asia/Hong_Kong',\n  Text: '(UTC+08:00) Hong Kong'\n}, {\n  Value: 'Asia/Kuala_Lumpur',\n  Text: '(UTC+08:00) Kuala Lumpur'\n}, {\n  Value: 'Asia/Macau',\n  Text: '(UTC+08:00) Macau'\n}, {\n  Value: 'Asia/Makassar',\n  Text: '(UTC+08:00) Makassar'\n}, {\n  Value: 'Asia/Manila',\n  Text: '(UTC+08:00) Manila'\n}, {\n  Value: 'Asia/Irkutsk',\n  Text: '(UTC+08:00) Moscow+05 - Irkutsk'\n}, {\n  Value: 'Asia/Singapore',\n  Text: '(UTC+08:00) Singapore'\n}, {\n  Value: 'Asia/Taipei',\n  Text: '(UTC+08:00) Taipei'\n}, {\n  Value: 'Asia/Ulaanbaatar',\n  Text: '(UTC+08:00) Ulaanbaatar'\n}, {\n  Value: 'Australia/Perth',\n  Text: '(UTC+08:00) Western Time - Perth'\n}, {\n  Value: 'Asia/Pyongyang',\n  Text: '(UTC+08:30) Pyongyang'\n}, {\n  Value: 'Asia/Dili',\n  Text: '(UTC+09:00) Dili'\n}, {\n  Value: 'Asia/Jayapura',\n  Text: '(UTC+09:00) Jayapura'\n}, {\n  Value: 'Asia/Yakutsk',\n  Text: '(UTC+09:00) Moscow+06 - Yakutsk'\n}, {\n  Value: 'Pacific/Palau',\n  Text: '(UTC+09:00) Palau'\n}, {\n  Value: 'Asia/Seoul',\n  Text: '(UTC+09:00) Seoul'\n}, {\n  Value: 'Asia/Tokyo',\n  Text: '(UTC+09:00) Tokyo'\n}, {\n  Value: 'Australia/Darwin',\n  Text: '(UTC+09:30) Central Time - Darwin'\n}, {\n  Value: 'Antarctica/DumontDUrville',\n  Text: '(UTC+10:00) Dumont D\"Urville'\n}, {\n  Value: 'Australia/Brisbane',\n  Text: '(UTC+10:00) Eastern Time - Brisbane'\n}, {\n  Value: 'Pacific/Guam',\n  Text: '(UTC+10:00) Guam'\n}, {\n  Value: 'Asia/Vladivostok',\n  Text: '(UTC+10:00) Moscow+07 - Vladivostok'\n}, {\n  Value: 'Pacific/Port_Moresby',\n  Text: '(UTC+10:00) Port Moresby'\n}, {\n  Value: 'Pacific / Chuuk',\n  Text: '(UTC+10:00) Truk'\n}, {\n  Value: 'Australia/Adelaide',\n  Text: '(UTC+10:30) Central Time - Adelaide'\n}, {\n  Value: 'Antarctica/Casey',\n  Text: '(UTC+11:00) Casey'\n}, {\n  Value: 'Australia/Hobart',\n  Text: '(UTC+11:00) Eastern Time - Hobart'\n}, {\n  Value: 'Australia/Sydney',\n  Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney'\n}, {\n  Value: 'Pacific/Efate',\n  Text: '(UTC+11:00) Efate'\n}, {\n  Value: 'Pacific/Guadalcanal',\n  Text: '(UTC+11:00) Guadalcanal'\n}, {\n  Value: 'Pacific/Kosrae',\n  Text: '(UTC+11:00) Kosrae'\n}, {\n  Value: 'Asia/Magadan',\n  Text: '(UTC+11:00) Moscow+08 - Magadan'\n}, {\n  Value: 'Pacific / Norfolk',\n  Text: '(UTC+11:00) Norfolk'\n}, {\n  Value: 'Pacific/Noumea',\n  Text: '(UTC+11:00) Noumea'\n}, {\n  Value: 'Pacific/Pohnpei',\n  Text: '(UTC+11:00) Ponape'\n}, {\n  Value: 'Pacific/Funafuti',\n  Text: '(UTC+12:00) Funafuti'\n}, {\n  Value: 'Pacific/Kwajalein',\n  Text: '(UTC+12:00) Kwajalein'\n}, {\n  Value: 'Pacific/Majuro',\n  Text: '(UTC+12:00) Majuro'\n}, {\n  Value: 'Asia/Kamchatka',\n  Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy'\n}, {\n  Value: 'Pacific / Nauru',\n  Text: '(UTC+12:00) Nauru'\n}, {\n  Value: 'Pacific/Tarawa',\n  Text: '(UTC+12:00) Tarawa'\n}, {\n  Value: 'Pacific/Wake',\n  Text: '(UTC+12:00) Wake'\n}, {\n  Value: 'Pacific/Wallis',\n  Text: '(UTC+12:00) Wallis'\n}, {\n  Value: 'Pacific/Auckland',\n  Text: '(UTC+13:00) Auckland'\n}, {\n  Value: 'Pacific/Enderbury',\n  Text: '(UTC+13:00) Enderbury'\n}, {\n  Value: 'Pacific/Fakaofo',\n  Text: '(UTC+13:00) Fakaofo'\n}, {\n  Value: 'Pacific/Fiji',\n  Text: '(UTC+13:00) Fiji'\n}, {\n  Value: 'Pacific/Tongatapu',\n  Text: '(UTC+13:00) Tongatapu'\n}, {\n  Value: 'Pacific/Apia',\n  Text: '(UTC+14:00) Apia'\n}, {\n  Value: 'Pacific/Kiritimati',\n  Text: '(UTC+14:00) Kiritimati'\n}];\n/* eslint-disable max-len */\n\n/**\n * Date Generator from Recurrence Rule\n */\n\n/**\n * Generate Summary from Recurrence Rule\n *\n * @param {string} rule Accepts the Recurrence rule\n * @param {L10n} localeObject Accepts the locale object\n * @param {string} locale Accepts the locale name\n * @param {CalendarType} calendarType Accepts the calendar type\n * @returns {string} Returns the summary string from given recurrence rule\n */\n\nfunction generateSummary(rule, localeObject, locale, calendarType) {\n  if (calendarType === void 0) {\n    calendarType = 'Gregorian';\n  }\n\n  var ruleObject = extractObjectFromRule(rule);\n  var summary = localeObject.getConstant(EVERY) + ' ';\n  var cldrObj;\n  var cldrObj1;\n  var calendarMode = calendarType.toLowerCase();\n\n  if (locale === 'en' || locale === 'en-US') {\n    var nameSpace1 = 'months.stand-alone.abbreviated';\n    var nameSpace = 'days.stand-alone.abbreviated';\n    cldrObj1 = getValue(nameSpace1, getDefaultDateObject(calendarMode));\n    cldrObj = getValue(nameSpace, getDefaultDateObject(calendarMode));\n  } else {\n    var nameSpace1 = 'main.' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated';\n    var nameSpace = 'main.' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated';\n    cldrObj1 = getValue(nameSpace1, cldrData);\n    cldrObj = getValue(nameSpace, cldrData);\n  }\n\n  if (ruleObject.interval > 1) {\n    summary += ruleObject.interval + ' ';\n  }\n\n  switch (ruleObject.freq) {\n    case 'DAILY':\n      summary += localeObject.getConstant(DAYS);\n      break;\n\n    case 'WEEKLY':\n      summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n      ruleObject.day.forEach(function (day, index) {\n        summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT[\"\" + day], cldrObj), 'single');\n        summary += ruleObject.day.length - 1 === index ? '' : ', ';\n      });\n      break;\n\n    case 'MONTHLY':\n      summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n      summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n      break;\n\n    case 'YEARLY':\n      summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n      summary += capitalizeFirstWord(getValue(ruleObject.month[0].toString(), cldrObj1), 'single') + ' ';\n      summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n      break;\n  }\n\n  if (ruleObject.count) {\n    summary += ', ' + ruleObject.count + ' ' + localeObject.getConstant(TIMES);\n  } else if (ruleObject.until) {\n    var tempDate = ruleObject.until;\n    summary += ', ' + localeObject.getConstant(UNTIL) + ' ' + tempDate.getDate() + ' ' + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), 'single') + ' ' + tempDate.getFullYear();\n  }\n\n  return summary;\n}\n/**\n * Generates Month summary\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {string[]} cldrObj Accepts the collections of month name from calendar\n * @param {L10n} localeObj Accepts the locale object\n * @returns {string} Returns the month summary string from given recurrence rule object\n * @private\n */\n\n\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n  var summary = '';\n\n  if (ruleObject.monthDay.length) {\n    summary += ruleObject.monthDay[0];\n  } else if (ruleObject.day) {\n    var pos = ruleObject.setPosition - 1;\n    summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : WEEKPOS.length - 1]) + ' ' + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), 'single');\n  }\n\n  return summary;\n}\n/**\n * Generates the date collections from the given recurrence rule\n *\n * @param {Date} startDate Accepts the rule start date\n * @param {string} rule Accepts the recurrence rule\n * @param {string} excludeDate Accepts the exception dates in string format\n * @param {number} startDayOfWeek Accepts the start day index of week\n * @param {number} maximumCount Accepts the maximum number count to generate date collections\n * @param {Date} viewDate Accepts the current date instead of start date\n * @param {CalendarType} calendarMode Accepts the calendar type\n * @param {string} oldTimezone Accepts the timezone name\n * @param {string} newTimezone Accepts the timezone name\n * @returns {number[]} Returns the collection of dates\n */\n\n\nfunction generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount, viewDate, calendarMode, oldTimezone, newTimezone) {\n  if (maximumCount === void 0) {\n    maximumCount = MAXOCCURRENCE;\n  }\n\n  if (viewDate === void 0) {\n    viewDate = null;\n  }\n\n  if (calendarMode === void 0) {\n    calendarMode = 'Gregorian';\n  }\n\n  if (oldTimezone === void 0) {\n    oldTimezone = null;\n  }\n\n  if (newTimezone === void 0) {\n    newTimezone = null;\n  }\n\n  var ruleObject = extractObjectFromRule(rule);\n  var cacheDate;\n  calendarUtil = getCalendarUtil(calendarMode);\n  var data = [];\n  var modifiedDate = new Date(startDate.getTime());\n  tempExcludeDate = [];\n  var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n  var tz = new Timezone();\n  tempDate.forEach(function (content) {\n    var parsedDate = getDateFromRecurrenceDateString(content);\n\n    if (oldTimezone && newTimezone) {\n      parsedDate = tz.convert(new Date(parsedDate.getTime()), oldTimezone, newTimezone);\n    }\n\n    tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n  });\n  ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;\n\n  if (viewDate && viewDate > startDate && !ruleObject.count) {\n    tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n  } else {\n    tempViewDate = null;\n  }\n\n  if (!ruleObject.until && tempViewDate) {\n    cacheDate = new Date(tempViewDate.getTime());\n    cacheDate.setDate(tempViewDate.getDate() + maximumCount * ruleObject.interval);\n    ruleObject.until = cacheDate;\n  }\n\n  if (ruleObject.until && startDate > ruleObject.until) {\n    return data;\n  }\n\n  maxOccurrence = maximumCount;\n  setFirstDayOfWeek(DAYINDEX[parseInt(startDayOfWeek.toString(), 10)]);\n\n  if (ruleObject.until) {\n    var end = resetTime(ruleObject.until);\n    ruleObject.until = new Date(end.getFullYear(), end.getMonth(), end.getDate(), 23, 59, 59);\n  }\n\n  switch (ruleObject.freq) {\n    case 'DAILY':\n      dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n      break;\n\n    case 'WEEKLY':\n      weeklyType(modifiedDate, ruleObject.until, data, ruleObject);\n      break;\n\n    case 'MONTHLY':\n      monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n      break;\n\n    case 'YEARLY':\n      yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n  }\n\n  return data;\n}\n/**\n * Generate date object from given date string\n *\n * @param {string} recDateString Accepts the exception date as string\n * @returns {Date} Returns the date from exception date string\n */\n\n\nfunction getDateFromRecurrenceDateString(recDateString) {\n  return new Date(recDateString.substr(0, 4) + '-' + recDateString.substr(4, 2) + '-' + recDateString.substr(6, 5) + ':' + recDateString.substr(11, 2) + ':' + recDateString.substr(13));\n}\n/**\n * Internal method to handle exclude date\n *\n * @param {number[]} data Accepts the exception date collections\n * @param {number} date Accepts the new exclude date\n * @returns {void}\n * @private\n */\n\n\nfunction excludeDateHandler(data, date) {\n  var zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n\n  if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n    data.push(date);\n  }\n}\n/**\n * Internal method for get date count\n *\n * @param {Date} startDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} Returns the number of date count\n * @private\n */\n\n\nfunction getDateCount$1(startDate, ruleObject) {\n  var count = maxOccurrence;\n\n  if (ruleObject.count) {\n    count = ruleObject.count;\n  } else if (ruleObject.until) {\n    if (ruleObject.freq === 'DAILY' || ruleObject.freq === 'WEEKLY') {\n      count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;\n    } else if (ruleObject.freq === 'MONTHLY' || ruleObject.freq === 'YEARLY') {\n      count = Math.floor((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear() - (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) + (ruleObject.day.length > 1 ? Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1 : 1);\n\n      if (ruleObject.freq === 'YEARLY') {\n        count = ruleObject.month.length > 1 ? count * ruleObject.month.length : count;\n      }\n    }\n  }\n\n  return count;\n}\n/**\n *  Internal method for daily type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction dailyType(startDate, endDate, data, ruleObject) {\n  var tempDate = new Date(startDate.getTime());\n  var interval = ruleObject.interval;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var state;\n  var expectedDays = ruleObject.day;\n\n  while (compareDates(tempDate, endDate)) {\n    state = true;\n    state = validateRules(tempDate, ruleObject);\n\n    if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n      excludeDateHandler(data, tempDate.getTime());\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        break;\n      }\n    }\n\n    tempDate.setDate(tempDate.getDate() + interval);\n\n    if (tempDate.getHours() !== startDate.getHours()) {\n      tempDate.setHours(startDate.getHours());\n    }\n  }\n}\n/**\n * Internal method for weekly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction weeklyType(startDate, endDate, data, ruleObject) {\n  var tempDate = new Date(startDate.getTime());\n\n  if (!ruleObject.day.length) {\n    ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n  }\n\n  var interval = ruleObject.interval;\n  var expectedDays = ruleObject.day;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var weekState = true;\n  var wkstIndex;\n  var weekCollection = [];\n\n  if (expectedDays.length > 1) {\n    if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n      ruleObject.wkst = dayIndex[0];\n    }\n\n    wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n\n    while (compareDates(tempDate, endDate)) {\n      var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n      startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n      var weekstartDate = addDays(tempDate, -startDateDiff);\n      var weekendDate = addDays(weekstartDate, 6);\n      var compareTempDate = new Date(tempDate.getTime());\n      weekendDate = resetTime(weekendDate);\n      compareTempDate = resetTime(compareTempDate);\n\n      while (weekendDate >= compareTempDate) {\n        if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n          weekCollection.push([tempDate.getTime()]);\n        }\n\n        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n          break;\n        }\n\n        tempDate.setDate(tempDate.getDate() + 1);\n\n        if (tempDate.getHours() !== startDate.getHours()) {\n          tempDate.setHours(startDate.getHours());\n        }\n\n        compareTempDate = new Date(tempDate.getTime());\n        compareTempDate = resetTime(compareTempDate);\n      }\n\n      tempDate.setDate(tempDate.getDate() - 1);\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        break;\n      }\n\n      tempDate.setDate(tempDate.getDate() + 1 + (interval - 1) * 7);\n      insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n      weekCollection = [];\n    }\n  } else {\n    tempDate = getStartDateForWeek(startDate, ruleObject.day);\n\n    while (compareDates(tempDate, endDate)) {\n      weekState = validateRules(tempDate, ruleObject);\n\n      if (weekState && expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n        excludeDateHandler(data, tempDate.getTime());\n      }\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        break;\n      }\n\n      tempDate.setDate(tempDate.getDate() + interval * 7);\n    }\n\n    insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n    weekCollection = [];\n  }\n}\n/**\n *  Internal method for monthly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n  // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n  if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n    ruleObject.monthDay.push(startDate.getDate());\n\n    if (ruleObject.freq === 'YEARLY') {\n      ruleObject.month.push(startDate.getMonth() + 1);\n    }\n  } else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n    ruleObject.monthDay.push(startDate.getDate());\n  }\n\n  var ruleType = validateMonthlyRuleType(ruleObject);\n\n  switch (ruleType) {\n    case 'day':\n      switch (ruleObject.freq) {\n        case 'MONTHLY':\n          monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n          break;\n\n        case 'YEARLY':\n          monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n          break;\n      }\n\n      break;\n\n    case 'both':\n    case 'date':\n      switch (ruleObject.freq) {\n        case 'MONTHLY':\n          monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n          break;\n\n        case 'YEARLY':\n          monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n          break;\n      }\n\n      break;\n  }\n}\n/**\n * Internal method for yearly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n  var typeValue = checkYearlyType(ruleObject);\n\n  switch (typeValue) {\n    case 'MONTH':\n      monthlyType(startDate, endDate, data, ruleObject);\n      break;\n\n    case 'WEEKNO':\n      processWeekNo(startDate, endDate, data, ruleObject);\n      break;\n\n    case 'YEARDAY':\n      processYearDay(startDate, endDate, data, ruleObject);\n      break;\n  }\n}\n/**\n * Internal method for process week no\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n  var stDate = calendarUtil.getYearLastDate(startDate, 0);\n  var tempDate;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var state;\n  var startDay;\n  var firstWeekSpan;\n  var weekNos = ruleObject.weekNo;\n  var weekNo;\n  var maxDate;\n  var minDate;\n  var weekCollection = [];\n  var expectedDays = ruleObject.day;\n\n  while (compareDates(stDate, endDate)) {\n    startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n    firstWeekSpan = 6 - startDay + 1;\n\n    for (var index = 0; index < weekNos.length; index++) {\n      weekNo = weekNos[parseInt(index.toString(), 10)];\n      weekNo = weekNo > 0 ? weekNo : 53 + weekNo + 1;\n      maxDate = weekNo === 1 ? firstWeekSpan : firstWeekSpan + (weekNo - 1) * 7;\n      minDate = weekNo === 1 ? firstWeekSpan - 7 : firstWeekSpan + (weekNo - 2) * 7;\n\n      while (minDate < maxDate) {\n        tempDate = new Date(stDate.getTime() + MS_PER_DAY * minDate);\n\n        if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n          if (isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n          } else {\n            weekCollection.push([tempDate.getTime()]);\n          }\n        }\n\n        minDate++;\n      }\n    }\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n    }\n\n    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n      return;\n    }\n\n    stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n    weekCollection = [];\n  }\n}\n/**\n * Internal method for process year day\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n  var stDate = calendarUtil.getYearLastDate(startDate, 0);\n  var tempDate;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var state;\n  var dateCollection = [];\n  var date;\n  var expectedDays = ruleObject.day;\n\n  while (compareDates(stDate, endDate)) {\n    for (var index = 0; index < ruleObject.yearDay.length; index++) {\n      date = ruleObject.yearDay[parseInt(index.toString(), 10)];\n      tempDate = new Date(stDate.getTime());\n\n      if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) && !calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1)) {\n        tempDate.setDate(tempDate.getDate() + 1);\n        continue;\n      }\n\n      tempDate.setDate(tempDate.getDate() + (date < 0 ? calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n\n      if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n        if (ruleObject.setPosition == null) {\n          insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n        } else {\n          dateCollection.push([tempDate.getTime()]);\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n\n    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n      return;\n    }\n\n    stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n    dateCollection = [];\n  }\n}\n/**\n * Internal method to check yearly type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {YearRuleType} Returns the Yearly rule type object\n * @private\n */\n\n\nfunction checkYearlyType(ruleObject) {\n  if (ruleObject.yearDay.length) {\n    return 'YEARDAY';\n  } else if (ruleObject.weekNo.length) {\n    return 'WEEKNO';\n  }\n\n  return 'MONTH';\n}\n/**\n * Internal method to initialize recurrence rule variables\n *\n * @param {Date} startDate Accepts the start date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {RuleData} Return the rule data object\n * @private\n */\n\n\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n  var ruleData = {\n    monthCollection: [],\n    index: 0,\n    tempDate: new Date(startDate.getTime()),\n    mainDate: new Date(startDate.getTime()),\n    expectedCount: getDateCount$1(startDate, ruleObject),\n    monthInit: 0,\n    dateCollection: []\n  };\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n  }\n\n  return ruleData;\n}\n/**\n * Internal method for process monthly date type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n  if (ruleObject.month.length) {\n    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n    return;\n  }\n\n  var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n  var currentMonthDate;\n  ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n\n  while (compareDates(ruleData.tempDate, endDate)) {\n    currentMonthDate = new Date(ruleData.tempDate.getTime());\n\n    while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) && ruleData.expectedCount && data.length + ruleObject.recExceptionCount <= ruleData.expectedCount) {\n      if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month)) {\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n      } else {\n        calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        break;\n      }\n    }\n\n    ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n    insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n\n    if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n      calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n      ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n    }\n\n    if (ruleData.expectedCount && data.length + ruleObject.recExceptionCount >= ruleData.expectedCount) {\n      return;\n    }\n\n    ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n    ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n    ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n    ruleData.dateCollection = [];\n  }\n}\n/**\n * Internal method for process monthly date type with month frequency from recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n  var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n  ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n\n  if ((ruleObject.freq === 'MONTHLY' && ruleObject.interval === 12 || ruleObject.freq === 'YEARLY') && calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {\n    return;\n  }\n\n  while (compareDates(ruleData.tempDate, endDate)) {\n    ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n    processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n    }\n\n    if (ruleData.expectedCount && data.length + ruleObject.recExceptionCount >= ruleData.expectedCount) {\n      return;\n    }\n\n    ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n    ruleData.dateCollection = [];\n  }\n}\n/**\n * To process date collection for Monthly & Yearly based on BYMONTH Day property\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {RuleData} recRuleVariables Accepts the rule data\n * @param {Date} endDate Accepts the end date\n * @param {boolean} isByMonth Accepts the boolean to validate either month or not\n * @param {Date} startDate Accepts the start date\n * @param {number[]} data Accepts the collection of dates\n * @returns {void}\n * @private\n */\n\n\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n  for (var index = 0; index < ruleObject.monthDay.length; index++) {\n    recRuleVariables.date = ruleObject.monthDay[parseInt(index.toString(), 10)];\n    recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n    var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n    recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : maxDate + recRuleVariables.date + 1;\n\n    if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate) && recRuleVariables.date > 0) {\n      calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n\n      if (endDate && recRuleVariables.tempDate > endDate) {\n        return;\n      }\n\n      if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n        if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && recRuleVariables.expectedCount && data.length + ruleObject.recExceptionCount < recRuleVariables.expectedCount) {\n          insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n        } else {\n          recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n        }\n      }\n    }\n  }\n}\n/**\n * Internal method to set next valid date\n *\n * @param {Date} tempDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} monthInit Accepts the initial month\n * @param {Date} beginDate Accepts the initial date\n * @param {number} interval Accepts the interval duration\n * @returns {number} Returnx the next valid date\n * @private\n */\n\n\nfunction setNextValidDate(tempDate, ruleObject, monthInit, beginDate, interval) {\n  if (beginDate === void 0) {\n    beginDate = null;\n  }\n\n  var monthData = beginDate ? beginDate.getMonth() : 0;\n  var startDate = calendarUtil.getMonthStartDate(tempDate);\n  interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n  tempDate.setFullYear(startDate.getFullYear());\n  tempDate.setMonth(startDate.getMonth());\n  tempDate.setDate(startDate.getDate());\n\n  if (ruleObject.month.length) {\n    monthInit++;\n    monthInit = monthInit % ruleObject.month.length;\n    calendarUtil.setMonth(tempDate, ruleObject.month[parseInt(monthInit.toString(), 10)], 1);\n\n    if (monthInit === 0) {\n      calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n    }\n  } else {\n    if (beginDate && beginDate.getFullYear() < tempDate.getFullYear()) {\n      monthData = tempDate.getMonth() - 1;\n    }\n\n    calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n  }\n\n  return monthInit;\n}\n/**\n * To get month collection when BYDAY property having more than one value in list.\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var tempDate = new Date(startDate.getTime());\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n  var monthCollection = [];\n  var dateCollection = [];\n  var dates = [];\n  var index;\n  var state;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var monthInit = 0;\n  var beginDate;\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n  }\n\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate) && expectedCount && data.length + ruleObject.recExceptionCount < expectedCount) {\n    var currentMonthDate = new Date(tempDate.getTime());\n    var isHavingNumber = expectedDays.map(function (item) {\n      return HASNUMBER.test(item);\n    });\n\n    if (isHavingNumber.indexOf(true) > -1) {\n      for (var j = 0; j <= expectedDays.length - 1; j++) {\n        var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);\n        var position = parseInt(expectedDaysArray[0], 10);\n        tempDate = new Date(tempDate.getTime());\n        tempDate = calendarUtil.getMonthStartDate(tempDate);\n        tempDate = getStartDateForWeek(tempDate, expectedDays);\n        currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n          if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n            monthCollection.push([currentMonthDate.getTime()]);\n          }\n\n          currentMonthDate.setDate(currentMonthDate.getDate() + 1);\n        }\n\n        currentMonthDate.setDate(currentMonthDate.getDate() - 1);\n\n        if (expectedDaysArray[0].indexOf('-') > -1) {\n          index = monthCollection.length - -1 * position;\n        } else {\n          index = position - 1;\n        }\n\n        index = isNaN(index) ? 0 : index;\n\n        if (monthCollection.length > 0) {\n          if (isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n          } else {\n            dateCollection = [filterDateCollectionByIndex(monthCollection, index, dates)];\n          }\n        }\n\n        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n          return;\n        }\n\n        monthCollection = [];\n      }\n\n      if (!isNullOrUndefined(ruleObject.setPosition)) {\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n        dates = [];\n      }\n\n      monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n      tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n      monthCollection = [];\n    } else {\n      var weekCollection = [];\n      var dayCycleData = processWeekDays(expectedDays);\n      currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n      var initialDate = new Date(tempDate.getTime());\n      beginDate = new Date(tempDate.getTime());\n\n      while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n        weekCollection.push(tempDate.getTime());\n\n        if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n          monthCollection.push(weekCollection);\n          weekCollection = [];\n        }\n\n        tempDate.setDate(tempDate.getDate() + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n      }\n\n      index = ruleObject.setPosition < 1 ? monthCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;\n\n      if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        var datas = [];\n\n        for (var week = 0; week < monthCollection.length; week++) {\n          for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {\n            datas.push(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]);\n          }\n        }\n\n        monthCollection = [datas];\n      }\n\n      if (monthCollection.length > 0) {\n        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n      }\n\n      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n        return;\n      }\n\n      monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n      tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n      monthCollection = [];\n    }\n  }\n}\n/**\n * To process monday day type for FREQ=MONTHLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day; // When BYDAY property having more than 1 value.\n\n  if (expectedDays.length > 1) {\n    getMonthCollection(startDate, endDate, data, ruleObject);\n    return;\n  }\n\n  var tempDate = new Date(startDate.getTime());\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var monthCollection = [];\n  var beginDate;\n  var monthInit = 0;\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n  }\n\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate) && expectedCount && data.length + ruleObject.recExceptionCount < expectedCount) {\n    beginDate = new Date(tempDate.getTime());\n    var currentMonthDate = new Date(tempDate.getTime());\n\n    while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n      monthCollection.push([currentMonthDate.getTime()]);\n      currentMonthDate.setDate(currentMonthDate.getDate() + 7);\n    } // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n\n\n    insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n    monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    monthCollection = [];\n  }\n}\n/**\n * To process monday day type for FREQ=YEARLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var isHavingNumber = expectedDays.map(function (item) {\n    return HASNUMBER.test(item);\n  }); // If BYDAY property having more than 1 value in list\n\n  if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n    processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n    return;\n  } else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n    return;\n  }\n\n  var tempDate = new Date(startDate.getTime());\n  var currentMonthDate;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var interval = ruleObject.interval;\n  var monthCollection = [];\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n  } // Set the date as start date of the yeear if yearly freq having ByDay property alone\n\n\n  if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n    tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n  }\n\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate)) {\n    currentMonthDate = new Date(tempDate.getTime());\n\n    while (calendarUtil.isSameYear(currentMonthDate, tempDate) && expectedCount && data.length + ruleObject.recExceptionCount <= expectedCount) {\n      currentMonthDate = new Date(tempDate.getTime());\n\n      while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n        if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && !calendarUtil.checkMonth(tempDate, ruleObject.month)) {\n          if (expectedDays.length > 1) {\n            if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n              calendarUtil.setValidDate(tempDate, 1, 1);\n              tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n              break;\n            }\n\n            if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n              monthCollection.push([currentMonthDate.getTime()]);\n            }\n\n            currentMonthDate.setDate(currentMonthDate.getDate() + 1);\n          } else {\n            // If BYDAY property having 1 value in list\n            if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n              calendarUtil.setValidDate(tempDate, 1, 1);\n              tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n              break;\n            }\n\n            var newstr = getDayString(expectedDays[0]);\n\n            if (DAYINDEX[currentMonthDate.getDay()] === newstr && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0) > new Date(startDate.getFullYear())) {\n              monthCollection.push([currentMonthDate.getTime()]);\n            }\n\n            currentMonthDate.setDate(currentMonthDate.getDate() + 7);\n          }\n        } else {\n          calendarUtil.setValidDate(tempDate, 1, 1);\n          tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n          break;\n        }\n      }\n    }\n\n    tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate()); // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n\n    insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n\n    if (calendarUtil.isLastMonth(tempDate)) {\n      calendarUtil.setValidDate(tempDate, 1, 1);\n      tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    }\n\n    tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n\n    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n      return;\n    }\n\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    monthCollection = [];\n  }\n}\n/**\n * To process the recurrence rule when BYDAY property having values with integer\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var tempDate = new Date(startDate.getTime());\n  var interval = ruleObject.interval;\n  var monthCollection = [];\n  var dateCollection = [];\n  var index;\n  var state;\n  var monthInit = 0;\n  var currentMonthDate;\n  var currentDate;\n  var beginDate;\n  tempDate = calendarUtil.getMonthStartDate(tempDate);\n  var datas = [];\n\n  if (ruleObject.month.length) {\n    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n  }\n\n  tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n  while (compareDates(tempDate, endDate)) {\n    currentMonthDate = new Date(tempDate.getTime());\n\n    for (var i = 0; i <= ruleObject.month.length; i++) {\n      for (var j = 0; j <= expectedDays.length - 1; j++) {\n        tempDate = calendarUtil.getMonthStartDate(tempDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) && expectedCount && data.length + ruleObject.recExceptionCount <= expectedCount) {\n          while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n            currentMonthDate = new Date(tempDate.getTime());\n\n            if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && ruleObject.month[parseInt(i.toString(), 10)] === calendarUtil.getMonth(currentMonthDate)) {\n              var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);\n              var position = parseInt(expectedDaysArray[0], 10);\n              currentDate = new Date(tempDate.getTime());\n\n              while (calendarUtil.isSameYear(currentDate, tempDate) && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                  monthCollection.push([currentDate.getTime()]);\n                }\n\n                currentDate.setDate(currentDate.getDate() + 1);\n              }\n\n              currentDate.setDate(currentDate.getDate() - 1);\n\n              if (expectedDaysArray[0].indexOf('-') > -1) {\n                index = monthCollection.length - -1 * position;\n              } else {\n                index = position - 1;\n              }\n\n              index = isNaN(index) ? 0 : index;\n            }\n\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n          }\n        }\n\n        tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n\n        if (monthCollection.length > 0) {\n          if (isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n          } else {\n            dateCollection = [filterDateCollectionByIndex(monthCollection, index, datas)];\n          }\n        }\n\n        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {\n          return;\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(ruleObject.setPosition)) {\n      insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n      datas = [];\n    }\n\n    if (calendarUtil.isLastMonth(tempDate)) {\n      calendarUtil.setValidDate(tempDate, 1, 1);\n      tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n    } else {\n      tempDate.setFullYear(tempDate.getFullYear() + interval);\n    }\n\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n\n    if (ruleObject.month.length) {\n      calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n  }\n}\n/**\n * To get recurrence collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month collection dates\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {RuleData} Returns the rule data object\n * @private\n */\n\n\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n  var index;\n  var recurrenceCollectionObject = {\n    monthCollection: [],\n    index: 0\n  };\n\n  if (expectedDays.length === 1) {\n    // To split numeric value from BYDAY property value\n    var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n    var arrPosition = void 0;\n\n    if (expectedDaysArrays.length > 1) {\n      arrPosition = parseInt(expectedDaysArrays[0], 10);\n      index = arrPosition < 1 ? monthCollection.length + arrPosition : arrPosition - 1;\n    } else {\n      index = 0;\n      monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n  } else {\n    index = 0;\n    monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n  }\n\n  recurrenceCollectionObject.monthCollection = monthCollection;\n  recurrenceCollectionObject.index = index;\n  return recurrenceCollectionObject;\n}\n/**\n * Internal method to process the data collections\n *\n * @param {number[]} dateCollection Accepts the date collections\n * @param {boolean} state Accepts the state\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of numbers\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n  var index = ruleObject.setPosition < 1 ? dateCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;\n\n  if (isNullOrUndefined(ruleObject.setPosition)) {\n    index = 0;\n    dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n  }\n\n  if (dateCollection.length > 0) {\n    insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n  }\n}\n/**\n * To process month collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @returns {number[]} Returns the month date collections\n * @private\n */\n\n\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n  var datas = [];\n\n  for (var week = 0; week < monthCollection.length; week++) {\n    for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {\n      datas.push(new Date(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]).getTime());\n    }\n  }\n\n  monthCollection = datas.length > 0 ? [datas] : [];\n  return monthCollection;\n}\n/**\n * To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the date collections\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n  var expectedDays = ruleObject.day;\n  var state;\n  var datas = [];\n  var dateCollection = [];\n  var recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n  monthCollection = recurrenceCollections.monthCollection;\n  var index = recurrenceCollections.index;\n\n  if (ruleObject.setPosition != null) {\n    dateCollection = [filterDateCollectionByIndex(monthCollection, index, datas)];\n    insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n  } else {\n    if (monthCollection.length > 0) {\n      insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n  }\n\n  datas = [];\n}\n/**\n * To filter date collection when BYDAY property having values with number\n *\n * @param {number[]} monthCollection Accepts the date collections\n * @param {number} index Accepts the index of date collections\n * @param {number[]} datas Accepts the collection of dates\n * @returns {number[]} Returns the collection of dates\n * @private\n */\n\n\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n  for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {\n    datas.push(monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)]);\n  }\n\n  return datas;\n}\n/**\n * To insert processed date collection in final array element\n *\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} dayData Accepts the date index\n * @returns {void}\n * @private\n */\n\n\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n  var expectedCount = getDateCount$1(startDate, ruleObject);\n  var chDate = new Date(dayData);\n  state = validateRules(chDate, ruleObject);\n\n  if (chDate >= startDate && compareDates(chDate, endDate) && state && expectedCount && data.length + ruleObject.recExceptionCount < expectedCount) {\n    excludeDateHandler(data, dayData);\n  }\n}\n/**\n * Return the last week number of given month and year.\n *\n * @param {number} year Accepts the Year in number format\n * @param {number} startDayOfWeek Accepts the start date\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {number} week Accepts the week in number format\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} returns week number\n * @private\n */\n\n\nfunction weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {\n  var firstDayOfWeek = startDayOfWeek || 0;\n  var firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);\n  var lastOfMonth = new Date(year, ruleObject.month[0], 0);\n  var numberOfDaysInMonth = lastOfMonth.getDate();\n  var firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;\n  var used = firstWeekDay + numberOfDaysInMonth;\n  var count = Math.ceil(used / 7) - 1;\n  var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(count.toString(), 10)];\n  var chDate = new Date(dayData);\n  var state = validateRules(chDate, ruleObject);\n  return state ? count : count - 1;\n}\n/**\n * To process date collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\n\n\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n  if (monthCollection.length > 0) {\n    for (var week = 0; week < monthCollection.length; week++) {\n      monthCollection[parseInt(week.toString(), 10)].sort();\n      var expectedDays = ruleObject.day;\n      var isHavingNumber = expectedDays.map(function (item) {\n        return HASNUMBER.test(item);\n      });\n      var weekIndex = ruleObject.freq === 'YEARLY' && ruleObject.validRules.indexOf('BYMONTH') > -1 && !(isHavingNumber.indexOf(true) > -1) ? weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject) : monthCollection[parseInt(week.toString(), 10)].length + ruleObject.setPosition;\n      var index = ruleObject.setPosition < 1 ? weekIndex : ruleObject.setPosition - 1;\n      var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(index.toString(), 10)];\n      insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n    }\n  }\n}\n/**\n * To insert datas into existing collection which is processed from previous loop.\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} index Accepts the index value\n * @returns {void}\n * @private\n */\n\n\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n  if (monthCollection.length > 0) {\n    index = !isNullOrUndefined(index) ? index : ruleObject.setPosition < 1 ? monthCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;\n    monthCollection[parseInt(index.toString(), 10)].sort();\n\n    for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {\n      var dayData = monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)];\n      insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n    }\n  }\n}\n/**\n * Internal method to compare dates\n *\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @returns {boolean} Returns the result of checking start and end dates\n * @private\n */\n\n\nfunction compareDates(startDate, endDate) {\n  return endDate ? startDate <= endDate : true;\n}\n/**\n * Internal method to get day string\n *\n * @param {string} expectedDays Accepts the exception date string\n * @returns {string} Returns the valid string\n * @private\n */\n\n\nfunction getDayString(expectedDays) {\n  // To get BYDAY value without numeric value\n  var newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n  return newstr;\n}\n/**\n * Internal method to check day index\n *\n * @param {number} day Accepts the day index\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {boolean} Returns the index date\n * @private\n */\n\n\nfunction checkDayIndex(day, expectedDays) {\n  var sortedExpectedDays = [];\n  expectedDays.forEach(function (element) {\n    var expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n\n    if (expectedDaysNumberSplit.length === 2) {\n      sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n    } else {\n      sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n    }\n  });\n  return sortedExpectedDays.indexOf(DAYINDEX[parseInt(day.toString(), 10)]) === -1;\n}\n/**\n * Internal method to get start date of week\n *\n * @param {Date} startDate Accepts the start date\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {Date} Return the week start date\n * @private\n */\n\n\nfunction getStartDateForWeek(startDate, expectedDays) {\n  var tempDate = new Date(startDate.getTime());\n  var newstr;\n\n  if (expectedDays.length > 0) {\n    var expectedDaysArr = [];\n\n    for (var i = 0; i <= expectedDays.length - 1; i++) {\n      newstr = getDayString(expectedDays[parseInt(i.toString(), 10)]);\n      expectedDaysArr.push(newstr);\n    }\n\n    if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n      do {\n        tempDate.setDate(tempDate.getDate() + 1);\n      } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n    }\n  }\n\n  return tempDate;\n}\n/**\n * Method to generate recurrence rule object from given rule\n *\n * @param {string} rules Accepts the recurrence rule\n * @returns {RecRule} Returns the recurrence rule object\n */\n\n\nfunction extractObjectFromRule(rules) {\n  var ruleObject = {\n    freq: null,\n    interval: 1,\n    count: null,\n    until: null,\n    day: [],\n    wkst: null,\n    month: [],\n    weekNo: [],\n    monthDay: [],\n    yearDay: [],\n    setPosition: null,\n    validRules: []\n  };\n  var rulesList = rules.split(';');\n  var splitData = [];\n  var temp;\n  rulesList.forEach(function (data) {\n    splitData = data.split('=');\n\n    switch (splitData[0]) {\n      case 'UNTIL':\n        temp = splitData[1];\n        ruleObject.until = getDateFromRecurrenceDateString(temp);\n        break;\n\n      case 'BYDAY':\n        ruleObject.day = splitData[1].split(',');\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYMONTHDAY':\n        ruleObject.monthDay = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYMONTH':\n        ruleObject.month = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYYEARDAY':\n        ruleObject.yearDay = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'BYWEEKNO':\n        ruleObject.weekNo = splitData[1].split(',').map(Number);\n        ruleObject.validRules.push(splitData[0]);\n        break;\n\n      case 'INTERVAL':\n        ruleObject.interval = parseInt(splitData[1], 10);\n        break;\n\n      case 'COUNT':\n        ruleObject.count = parseInt(splitData[1], 10);\n        break;\n\n      case 'BYSETPOS':\n        ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);\n        break;\n\n      case 'FREQ':\n        ruleObject.freq = splitData[1];\n        break;\n\n      case 'WKST':\n        ruleObject.wkst = splitData[1];\n        break;\n    }\n  });\n\n  if (ruleObject.freq === 'MONTHLY' && ruleObject.monthDay.length === 0) {\n    var index = ruleObject.validRules.indexOf('BYDAY');\n    ruleObject.validRules.splice(index, 1);\n  }\n\n  return ruleObject;\n}\n/**\n * Internal method to validate proper date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number} data Accepts the data value\n * @param {Date} startDate Accepts the start date\n * @returns {boolean} Returns the result of date validate\n * @private\n */\n\n\nfunction validateProperDate(tempDate, data, startDate) {\n  var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n  return data <= maxDate && tempDate >= startDate;\n}\n/**\n * Internal method to process week days\n *\n * @param {string[]} expectedDays Accepts the expection dates\n * @returns {Object} Returns the weekdays object\n * @private\n */\n\n\nfunction processWeekDays(expectedDays) {\n  var dayCycle = {};\n  expectedDays.forEach(function (element, index) {\n    if (index === expectedDays.length - 1) {\n      var startIndex = dayIndex.indexOf(element);\n      var temp = startIndex;\n\n      while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n        temp++;\n      }\n\n      dayCycle[\"\" + element] = temp - startIndex;\n    } else {\n      dayCycle[\"\" + element] = dayIndex.indexOf(expectedDays[index + 1]) - dayIndex.indexOf(element);\n    }\n  });\n  return dayCycle;\n}\n/**\n * Internal method to check date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedDate Accepts the exception dates\n * @returns {boolean} Returns the boolean value\n * @private\n */\n\n\nfunction checkDate(tempDate, expectedDate) {\n  var temp = expectedDate.slice(0);\n  var data;\n  var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n  data = temp.shift();\n\n  while (data) {\n    if (data < 0) {\n      data = data + maxDate + 1;\n    }\n\n    if (data === tempDate.getDate()) {\n      return false;\n    }\n\n    data = temp.shift();\n  }\n\n  return true;\n}\n/**\n * Internal method to check the year value\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedyearDay Accepts the exception dates in year\n * @returns {boolean} Returns the boolean value\n * @private\n */\n\n\nfunction checkYear(tempDate, expectedyearDay) {\n  var temp = expectedyearDay.slice(0);\n  var data;\n  var yearDay = getYearDay(tempDate);\n  data = temp.shift();\n\n  while (data) {\n    if (data < 0) {\n      data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n    }\n\n    if (data === yearDay) {\n      return false;\n    }\n\n    data = temp.shift();\n  }\n\n  return true;\n}\n/**\n * Internal method to get the year day\n *\n * @param {Date} currentDate Accepts the date value\n * @returns {number} Returns the boolean value\n * @private\n */\n\n\nfunction getYearDay(currentDate) {\n  if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n    startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n  }\n\n  var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n  var diff = currentDate.getTime() - tempDate.getTime();\n  return Math.ceil(diff / MS_PER_DAY);\n}\n/**\n * Internal method to validate monthly rule type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {MonthlyType} Returns the monthly type object\n * @private\n */\n\n\nfunction validateMonthlyRuleType(ruleObject) {\n  if (ruleObject.monthDay.length && !ruleObject.day.length) {\n    return 'date';\n  } else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n    return 'day';\n  }\n\n  return 'both';\n}\n/**\n * Internal method to re-order the week days based on first day of week\n *\n * @param {string[]} days Accepts the week days value\n * @returns {void}\n * @private\n */\n\n\nfunction rotate(days) {\n  var data = days.shift();\n  days.push(data);\n}\n/**\n * Internal method to set first day of week\n *\n * @param {string} day Accepts the first day string\n * @returns {void}\n * @private\n */\n\n\nfunction setFirstDayOfWeek(day) {\n  while (dayIndex[0] !== day) {\n    rotate(dayIndex);\n  }\n}\n/**\n * Internal method to validate recurrence rule\n *\n * @param {Date} tempDate Accepts the date value\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {boolean} Returns the boolean value\n * @private\n */\n\n\nfunction validateRules(tempDate, ruleObject) {\n  var state = true;\n  var expectedDays = ruleObject.day;\n  var expectedMonth = ruleObject.month;\n  var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n  var expectedyearDay = ruleObject.yearDay;\n  ruleObject.validRules.forEach(function (rule) {\n    switch (rule) {\n      case 'BYDAY':\n        if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n          state = false;\n        }\n\n        break;\n\n      case 'BYMONTH':\n        if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n          state = false;\n        }\n\n        break;\n\n      case 'BYMONTHDAY':\n        if (checkDate(tempDate, expectedDate)) {\n          state = false;\n        }\n\n        break;\n\n      case 'BYYEARDAY':\n        if (checkYear(tempDate, expectedyearDay)) {\n          state = false;\n        }\n\n        break;\n    }\n  });\n  return state;\n}\n/**\n * Internal method to get calendar util\n *\n * @param {CalendarType} calendarMode Accepts the calendar type object\n * @returns {CalendarUtil} Returns the calendar util object\n * @private\n */\n\n\nfunction getCalendarUtil(calendarMode) {\n  if (calendarMode === 'Islamic') {\n    return new Islamic();\n  }\n\n  return new Gregorian();\n}\n\nvar startDateCollection = {};\nvar tempExcludeDate;\nvar dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar maxOccurrence;\nvar tempViewDate;\nvar calendarUtil;\nvar DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar MAXOCCURRENCE = 43;\nvar WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nvar TIMES = 'summaryTimes';\nvar ON = 'summaryOn';\nvar EVERY = 'every';\nvar UNTIL = 'summaryUntil';\nvar DAYS = 'summaryDay';\nvar WEEKS = 'summaryWeek';\nvar MONTHS = 'summaryMonth';\nvar YEARS = 'summaryYear';\nvar DAYINDEXOBJECT = {\n  SU: 'sun',\n  MO: 'mon',\n  TU: 'tue',\n  WE: 'wed',\n  TH: 'thu',\n  FR: 'fri',\n  SA: 'sat'\n}; // To check string has number\n\nvar HASNUMBER = /\\d/; // To find the numbers in string\n\nvar REMOVENUMBERINSTRING = /[^A-Z]+/; // To split number and string\n\nvar SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\n/**\n * Method to generate string from date\n *\n * @param {Date} date Accepts the date value\n * @returns {string} Returns the string value\n */\n\nfunction getRecurrenceStringFromDate(date) {\n  return [date.getUTCFullYear(), roundDateValues(date.getUTCMonth() + 1), roundDateValues(date.getUTCDate()), 'T', roundDateValues(date.getUTCHours()), roundDateValues(date.getUTCMinutes()), roundDateValues(date.getUTCSeconds()), 'Z'].join('');\n}\n/**\n * Internal method to round the date values\n *\n * @param {string | number} date Accepts the date value in either string or number format\n * @returns {string} Returns the date value in string format\n * @private\n */\n\n\nfunction roundDateValues(date) {\n  return ('0' + date).slice(-2);\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable max-len */\n\n/**\n * EventBase for appointment rendering\n */\n\n\nvar EventBase =\n/** @__PURE__ @class */\nfunction () {\n  /**\n   * Constructor for EventBase\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n  function EventBase(parent) {\n    this.slots = [];\n    this.isDoubleTapped = false;\n    this.parent = parent;\n  }\n\n  EventBase.prototype.processData = function (events, timeZonePropChanged, oldTimezone) {\n    var _this = this;\n\n    var start = this.parent.activeView.startDate();\n    var end = this.parent.activeView.endDate();\n    var fields = this.parent.eventFields;\n    var processed = [];\n    var temp = 1;\n    var generateID = false;\n    var resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];\n\n    if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n      generateID = true;\n    }\n\n    var _loop_1 = function (event_1) {\n      if (generateID) {\n        event_1[fields.id] = temp++;\n      }\n\n      event_1 = this_1.updateEventDateTime(event_1);\n\n      if (timeZonePropChanged) {\n        this_1.processTimezoneChange(event_1, oldTimezone);\n      } else if (!this_1.parent.isPrinting && !this_1.parent.uiStateValues.isPreventTimezone) {\n        event_1 = this_1.processTimezone(event_1);\n      }\n\n      for (var level = 0; level < resourceCollection.length; level++) {\n        if (event_1[resourceCollection[parseInt(level.toString(), 10)].field] === null || event_1[resourceCollection[parseInt(level.toString(), 10)].field] === 0) {\n          event_1[resourceCollection[parseInt(level.toString(), 10)].field] = undefined;\n        }\n      }\n\n      if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && event_1[fields.recurrenceRule] === '') {\n        event_1[fields.recurrenceRule] = null;\n      }\n\n      if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID]) && !(this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction)) {\n        processed = processed.concat(this_1.generateOccurrence(event_1, null, oldTimezone, true));\n      } else {\n        if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction) {\n          if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID])) {\n            var recurrenceEvent = this_1.generateOccurrence(event_1, null, oldTimezone, true);\n\n            var _loop_2 = function (occurrence) {\n              var app = this_1.parent.eventsProcessed.filter(function (data) {\n                return data[fields.startTime].getTime() - occurrence[fields.startTime].getTime() === 0 && data[fields.id] === occurrence[fields.id];\n              });\n              occurrence.Guid = app.length > 0 ? app[0].Guid : this_1.generateGuid();\n              processed.push(occurrence);\n            };\n\n            for (var _i = 0, recurrenceEvent_1 = recurrenceEvent; _i < recurrenceEvent_1.length; _i++) {\n              var occurrence = recurrenceEvent_1[_i];\n\n              _loop_2(occurrence);\n            }\n          } else {\n            var app = this_1.parent.eventsProcessed.filter(function (data) {\n              return data[_this.parent.eventFields.id] === event_1[_this.parent.eventFields.id];\n            });\n            event_1.Guid = app.length > 0 ? app[0].Guid : this_1.generateGuid();\n            processed.push(event_1);\n          }\n        } else {\n          event_1.Guid = this_1.generateGuid();\n          processed.push(event_1);\n        }\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n      var event_1 = events_1[_i];\n\n      _loop_1(event_1);\n    }\n\n    this.parent.eventsProcessed = [];\n    var eventData = processed.filter(function (data) {\n      return !data[_this.parent.eventFields.isBlock];\n    });\n    this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n    var blockData = processed.filter(function (data) {\n      return data[_this.parent.eventFields.isBlock];\n    });\n\n    for (var _a = 0, blockData_1 = blockData; _a < blockData_1.length; _a++) {\n      var eventObj = blockData_1[_a];\n\n      if (eventObj[fields.isAllDay]) {\n        var isDifferentDate = resetTime(new Date(eventObj[fields.startTime].getTime())) < resetTime(new Date(eventObj[fields.endTime].getTime()));\n\n        if (!isDifferentDate) {\n          eventObj[fields.startTime] = resetTime(eventObj[fields.startTime]);\n          eventObj[fields.endTime] = addDays(resetTime(eventObj[fields.endTime]), 1);\n        }\n      }\n    }\n\n    this.parent.blockProcessed = blockData;\n    return eventData;\n  };\n\n  EventBase.prototype.updateEventDateTime = function (eventData) {\n    if (typeof eventData[this.parent.eventFields.startTime] === 'string') {\n      eventData[this.parent.eventFields.startTime] = getDateFromString(eventData[this.parent.eventFields.startTime]);\n    }\n\n    if (typeof eventData[this.parent.eventFields.endTime] === 'string') {\n      eventData[this.parent.eventFields.endTime] = getDateFromString(eventData[this.parent.eventFields.endTime]);\n    }\n\n    return eventData;\n  };\n\n  EventBase.prototype.getProcessedEvents = function (eventCollection) {\n    if (eventCollection === void 0) {\n      eventCollection = this.parent.eventsData;\n    }\n\n    var processed = [];\n\n    for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n      var event_2 = eventCollection_1[_i];\n\n      if (!isNullOrUndefined(event_2[this.parent.eventFields.recurrenceRule]) && isNullOrUndefined(event_2[this.parent.eventFields.recurrenceID])) {\n        processed = processed.concat(this.generateOccurrence(event_2));\n      } else {\n        processed.push(event_2);\n      }\n    }\n\n    return processed;\n  };\n\n  EventBase.prototype.timezonePropertyChange = function (oldTimezone) {\n    var data = this.parent.eventsData.concat(this.parent.blockData);\n    var processed = this.processData(data, true, oldTimezone);\n    this.parent.notify(dataReady, {\n      processedData: processed\n    });\n  };\n\n  EventBase.prototype.timezoneConvert = function (eventData) {\n    var fields = this.parent.eventFields;\n    eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n    eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n\n    if (this.parent.timezone) {\n      var startTz = eventData[fields.startTimezone];\n      var endTz = eventData[fields.endTimezone];\n      eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n      eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n    }\n  };\n\n  EventBase.prototype.processTimezoneChange = function (event, oldTimezone) {\n    var fields = this.parent.eventFields;\n\n    if (event[fields.isAllDay]) {\n      return;\n    }\n\n    if (oldTimezone && this.parent.timezone) {\n      event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n      event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n    } else if (!oldTimezone && this.parent.timezone) {\n      event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n      event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n    } else if (oldTimezone && !this.parent.timezone) {\n      event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);\n      event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);\n    }\n  };\n\n  EventBase.prototype.processTimezone = function (event, isReverse) {\n    if (isReverse === void 0) {\n      isReverse = false;\n    }\n\n    var fields = this.parent.eventFields;\n\n    if (event[fields.startTimezone] || event[fields.endTimezone]) {\n      var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n      var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n\n      if (isReverse) {\n        if (this.parent.timezone) {\n          event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n          event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n          event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n          event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n        } else {\n          event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);\n          event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);\n        }\n      } else {\n        event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);\n        event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);\n\n        if (this.parent.timezone) {\n          event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n          event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n        }\n      }\n    } else if (this.parent.timezone) {\n      if (isReverse) {\n        event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n        event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n      } else {\n        event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n        event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n      }\n    }\n\n    return event;\n  };\n\n  EventBase.prototype.filterBlockEvents = function (eventObj) {\n    var fields = this.parent.eventFields;\n    var eStart = eventObj[fields.startTime];\n    var eEnd = eventObj[fields.endTime];\n    var resourceData;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var data = this.getGroupIndexFromEvent(eventObj);\n      resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(data.toString(), 10)];\n    }\n\n    var blockEvents = extend([], this.parent.blockProcessed, null, true);\n\n    for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n      var eventObj_1 = blockEvents_1[_i];\n\n      if (eventObj_1[fields.isAllDay]) {\n        var isDifferentTime = eventObj_1[fields.endTime].getTime() > resetTime(new Date(eventObj_1[fields.endTime].getTime())).getTime();\n\n        if (isDifferentTime) {\n          eventObj_1[fields.startTime] = resetTime(eventObj_1[fields.startTime]);\n          eventObj_1[fields.endTime] = addDays(resetTime(eventObj_1[fields.endTime]), 1);\n        }\n      }\n    }\n\n    return this.filterEvents(eStart, eEnd, blockEvents, resourceData);\n  };\n\n  EventBase.prototype.filterEvents = function (startDate, endDate, appointments, resourceTdData) {\n    if (appointments === void 0) {\n      appointments = this.parent.eventsProcessed;\n    }\n\n    var predicate = this.parent.dataModule.getStartEndQuery(startDate, endDate);\n    var filter = new DataManager({\n      json: appointments\n    }).executeLocal(new Query().where(predicate));\n\n    if (resourceTdData) {\n      filter = this.filterEventsByResource(resourceTdData, filter);\n    }\n\n    return this.sortByTime(filter);\n  };\n\n  EventBase.prototype.filterEventsByRange = function (eventCollection, startDate, endDate) {\n    var _this = this;\n\n    var filteredEvents = [];\n\n    if (startDate && endDate) {\n      filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n    } else if (startDate && !endDate) {\n      filteredEvents = eventCollection.filter(function (e) {\n        return e[_this.parent.eventFields.startTime] >= startDate;\n      });\n    } else if (!startDate && endDate) {\n      filteredEvents = eventCollection.filter(function (e) {\n        return e[_this.parent.eventFields.endTime] <= endDate;\n      });\n    } else {\n      filteredEvents = eventCollection;\n    }\n\n    return this.sortByTime(filteredEvents);\n  };\n\n  EventBase.prototype.filterEventsByResource = function (resourceTdData, appointments) {\n    if (appointments === void 0) {\n      appointments = this.parent.eventsProcessed;\n    }\n\n    var predicate = {};\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n\n    for (var level = 0; level < resourceCollection.length; level++) {\n      predicate[resourceCollection[parseInt(level.toString(), 10)].field] = resourceTdData.groupOrder[parseInt(level.toString(), 10)];\n    }\n\n    var keys = Object.keys(predicate);\n    var filteredCollection = appointments.filter(function (eventObj) {\n      return keys.every(function (key) {\n        if (eventObj[\"\" + key] instanceof Array) {\n          return eventObj[\"\" + key].indexOf(predicate[\"\" + key]) > -1;\n        } else {\n          return eventObj[\"\" + key] === predicate[\"\" + key];\n        }\n      });\n    });\n    return filteredCollection;\n  };\n\n  EventBase.prototype.sortByTime = function (appointmentsCollection) {\n    if (this.parent.eventSettings.sortComparer && (typeof this.parent.eventSettings.sortComparer === 'function' || typeof this.parent.eventSettings.sortComparer === 'string')) {\n      appointmentsCollection = this.customSorting(appointmentsCollection);\n    } else {\n      var fieldMappings_1 = this.parent.eventFields;\n      appointmentsCollection.sort(function (a, b) {\n        var d1 = a[fieldMappings_1.startTime];\n        var d2 = b[fieldMappings_1.startTime];\n        return d1.getTime() - d2.getTime();\n      });\n    }\n\n    return appointmentsCollection;\n  };\n\n  EventBase.prototype.sortByDateTime = function (appointments) {\n    if (this.parent.eventSettings.sortComparer && (typeof this.parent.eventSettings.sortComparer === 'function' || typeof this.parent.eventSettings.sortComparer === 'string')) {\n      appointments = this.customSorting(appointments);\n    } else {\n      var fieldMapping_1 = this.parent.eventFields;\n      appointments.sort(function (object1, object2) {\n        var d3 = object1[fieldMapping_1.startTime];\n        var d4 = object2[fieldMapping_1.startTime];\n        var d5 = object1[fieldMapping_1.endTime];\n        var d6 = object2[fieldMapping_1.endTime];\n        var d1 = d5.getTime() - d3.getTime();\n        var d2 = d6.getTime() - d4.getTime();\n        return d3.getTime() - d4.getTime() || d2 - d1;\n      });\n    }\n\n    return appointments;\n  };\n\n  EventBase.prototype.customSorting = function (appointments) {\n    if (typeof this.parent.eventSettings.sortComparer === 'function') {\n      return this.parent.eventSettings.sortComparer.call(this.parent, appointments);\n    } else if (typeof this.parent.eventSettings.sortComparer === 'string') {\n      var splits = this.parent.eventSettings.sortComparer.split('.');\n      var sortFn = void 0;\n\n      if (!isNullOrUndefined(window)) {\n        sortFn = window[splits[splits.length - 1]];\n      }\n\n      if (sortFn) {\n        return sortFn(appointments);\n      }\n    }\n\n    return appointments;\n  };\n\n  EventBase.prototype.getSmallestMissingNumber = function (array) {\n    var large = Math.max.apply(Math, array);\n\n    for (var i = 0; i < large; i++) {\n      if (array.indexOf(i) === -1) {\n        return i;\n      }\n    }\n\n    return large + 1;\n  };\n\n  EventBase.prototype.splitEventByDay = function (event) {\n    var eventFields = this.parent.eventFields;\n    var data = [];\n    var eventStartTime = event[eventFields.startTime];\n    var eventEndTime = event[eventFields.endTime];\n    var isDifferentDate = resetTime(new Date(eventStartTime.getTime())) < resetTime(new Date(eventEndTime.getTime()));\n\n    if (isDifferentDate) {\n      var start = new Date(eventStartTime.getTime());\n      var end = addDays(resetTime(new Date(eventStartTime.getTime())), 1);\n      var endDate = eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0 ? eventEndTime : addDays(eventEndTime, 1);\n      var index = 1;\n      var eventLength = getDaysCount(eventStartTime.getTime(), endDate.getTime());\n\n      while (end <= eventEndTime && start.getTime() !== end.getTime()) {\n        var app = extend({}, event);\n        app[eventFields.startTime] = start;\n        app[eventFields.endTime] = end;\n        app.data = {\n          index: index,\n          count: eventLength\n        };\n        app.Guid = this.generateGuid();\n        app.isSpanned = true;\n        data.push(app);\n        start = end;\n\n        if (resetTime(new Date(start.getTime())).getTime() === resetTime(new Date(eventEndTime.getTime())).getTime() && !(end.getTime() === eventEndTime.getTime())) {\n          end = new Date(start.getTime());\n          end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));\n        } else {\n          end = addDays(resetTime(new Date(start.getTime())), 1);\n        }\n\n        index++;\n      }\n    } else {\n      data.push(event);\n    }\n\n    return data;\n  };\n\n  EventBase.prototype.splitEvent = function (event, dateRender) {\n    var fields = this.parent.eventFields;\n    var start = resetTime(event[fields.startTime]).getTime();\n    var end = resetTime(event[fields.endTime]).getTime();\n\n    if (getDateInMs(event[fields.endTime]) <= 0) {\n      var temp = addDays(resetTime(event[fields.endTime]), -1).getTime();\n      end = start > temp ? start : temp;\n    }\n\n    var orgStart = start;\n    var orgEnd = end;\n    var ranges = [];\n\n    if (start !== end) {\n      if (start < dateRender[0].getTime()) {\n        start = dateRender[0].getTime();\n      }\n\n      if (end > dateRender[dateRender.length - 1].getTime()) {\n        end = dateRender[dateRender.length - 1].getTime();\n      }\n\n      var cStart = start;\n\n      for (var level = 0; level < this.slots.length; level++) {\n        var slot = this.slots[parseInt(level.toString(), 10)];\n\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek' || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {\n          var slotDates = [];\n\n          for (var _i = 0, slot_1 = slot; _i < slot_1.length; _i++) {\n            var s = slot_1[_i];\n            slotDates.push(new Date(s));\n          }\n\n          var renderedDates = this.getRenderedDates(slotDates);\n\n          if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {\n            slot = [];\n\n            for (var _a = 0, renderedDates_1 = renderedDates; _a < renderedDates_1.length; _a++) {\n              var date = renderedDates_1[_a];\n              slot.push(date.getTime());\n            }\n          }\n        }\n\n        if (typeof slot === 'number') {\n          var temp = slot;\n          slot = [];\n          slot.push(temp);\n        }\n\n        var firstSlot = slot[0];\n        cStart = cStart <= firstSlot && end >= firstSlot ? firstSlot : cStart;\n\n        if (cStart > end || firstSlot > end) {\n          break;\n        }\n\n        if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend && this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n          var startIndex = slot.indexOf(cStart);\n\n          if (startIndex !== -1) {\n            var endIndex = slot.indexOf(end);\n            var hasBreak = endIndex !== -1;\n            endIndex = hasBreak ? endIndex : slot.length - 1;\n            var count = endIndex - startIndex + 1;\n            var isLeft = slot[parseInt(startIndex.toString(), 10)] !== orgStart;\n            var isRight = slot[parseInt(endIndex.toString(), 10)] !== orgEnd;\n            ranges.push(this.cloneEventObject(event, slot[parseInt(startIndex.toString(), 10)], slot[parseInt(endIndex.toString(), 10)], count, isLeft, isRight));\n\n            if (hasBreak) {\n              break;\n            }\n          }\n        } else {\n          if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n            var availSlot = [];\n\n            for (var i = 0; i < slot.length; i++) {\n              if (this.dateInRange(slot[parseInt(i.toString(), 10)], orgStart, orgEnd)) {\n                availSlot.push(slot[parseInt(i.toString(), 10)]);\n              }\n            }\n\n            if (availSlot.length > 0) {\n              if (!this.parent.activeViewOptions.group.byDate) {\n                var isLeft = availSlot[0] !== orgStart;\n                var isRight = availSlot[availSlot.length - 1] !== orgEnd;\n                ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));\n              } else {\n                for (var _b = 0, availSlot_1 = availSlot; _b < availSlot_1.length; _b++) {\n                  var slot_2 = availSlot_1[_b];\n                  ranges.push(this.cloneEventObject(event, slot_2, slot_2, 1, slot_2 !== orgStart, slot_2 !== orgEnd));\n                }\n              }\n            }\n          }\n        }\n      }\n    } else {\n      ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n    }\n\n    return ranges;\n  };\n\n  EventBase.prototype.cloneEventObject = function (event, start, end, count, isLeft, isRight) {\n    var fields = this.parent.eventFields;\n    var e = extend({}, event, null, true);\n    var data = {\n      count: count,\n      isLeft: isLeft,\n      isRight: isRight\n    };\n    data[fields.startTime] = event[fields.startTime];\n    data[fields.endTime] = event[fields.endTime];\n    e.data = data;\n    e[fields.startTime] = new Date(start);\n    e[fields.endTime] = new Date(end);\n    return e;\n  };\n\n  EventBase.prototype.dateInRange = function (date, start, end) {\n    return start <= date && date <= end;\n  };\n\n  EventBase.prototype.getSelectedEventElements = function (target) {\n    this.removeSelectedAppointmentClass();\n\n    if (this.parent.selectedElements.length <= 0) {\n      this.parent.selectedElements.push(target);\n    } else {\n      var isAlreadySelected = this.parent.selectedElements.filter(function (element) {\n        return element.getAttribute('data-guid') === target.getAttribute('data-guid');\n      });\n\n      if (isAlreadySelected.length <= 0) {\n        var elementSelector = 'div[data-guid=\"' + target.getAttribute('data-guid') + '\"]';\n        var focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n\n        for (var _i = 0, focusElements_1 = focusElements; _i < focusElements_1.length; _i++) {\n          var element = focusElements_1[_i];\n          this.parent.selectedElements.push(element);\n        }\n      } else {\n        var selectedElements = this.parent.selectedElements.filter(function (element) {\n          return element.getAttribute('data-guid') !== target.getAttribute('data-guid');\n        });\n        this.parent.selectedElements = selectedElements;\n      }\n    }\n\n    if (target && this.parent.selectedElements.length > 0) {\n      this.addSelectedAppointments(this.parent.selectedElements, false);\n    }\n\n    return this.parent.selectedElements;\n  };\n\n  EventBase.prototype.getSelectedEvents = function () {\n    var _this = this;\n\n    var eventSelect = [];\n    var elementSelect = [];\n    var selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n    selectAppointments.filter(function (element) {\n      var isAlreadyAdded = eventSelect.filter(function (event) {\n        return event.Guid === element.getAttribute('data-guid');\n      });\n\n      if (isAlreadyAdded.length === 0) {\n        eventSelect.push(_this.getEventByGuid(element.getAttribute('data-guid')));\n      }\n\n      elementSelect.push(element);\n    });\n    return {\n      event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n      element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n    };\n  };\n\n  EventBase.prototype.removeSelectedAppointmentClass = function () {\n    var selectedAppointments = this.getSelectedAppointments();\n    removeClass(selectedAppointments, APPOINTMENT_BORDER);\n\n    if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n      removeClass(selectedAppointments, AGENDA_SELECTED_CELL);\n    }\n  };\n\n  EventBase.prototype.addSelectedAppointments = function (cells, preventFocus) {\n    if (this.parent.currentView !== 'MonthAgenda') {\n      this.parent.removeSelectedClass();\n    }\n\n    addClass(cells, APPOINTMENT_BORDER);\n\n    if (cells.length > 0 && !preventFocus) {\n      cells[cells.length - 1].focus();\n    }\n  };\n\n  EventBase.prototype.getSelectedAppointments = function () {\n    return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER + ',.' + APPOINTMENT_CLASS + ':focus'));\n  };\n\n  EventBase.prototype.focusElement = function (isFocused) {\n    if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {\n      return;\n    }\n\n    var activeEle = document.activeElement;\n    var selectedCell = this.parent.getSelectedCells();\n\n    if (selectedCell.length > 0 && (activeEle && (this.parent.element.contains(activeEle) || selectedCell.indexOf(activeEle) !== -1) || isFocused)) {\n      if (this.parent.keyboardInteractionModule) {\n        var target = !isNullOrUndefined(this.parent.activeCellsData) && this.parent.activeCellsData.element || selectedCell[selectedCell.length - 1];\n        this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n      }\n\n      return;\n    }\n\n    var selectedAppointments = this.getSelectedAppointments();\n\n    if (selectedAppointments.length > 0) {\n      if (this.parent.activeEventData && this.parent.activeEventData.element && selectedAppointments.indexOf(this.parent.activeEventData.element) > -1) {\n        this.parent.activeEventData.element.focus();\n        return;\n      }\n\n      selectedAppointments[selectedAppointments.length - 1].focus();\n      return;\n    }\n  };\n\n  EventBase.prototype.selectWorkCellByTime = function (eventsData) {\n    var target;\n\n    if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n      return target;\n    }\n\n    if (eventsData.length > 0) {\n      var selectedObject = eventsData[eventsData.length - 1];\n      var eventStartTime = selectedObject[this.parent.eventFields.startTime];\n      var nearestTime = new Date(+eventStartTime).setMinutes(0, 0, 0);\n      var isAllDay = this.isAllDayAppointment(selectedObject);\n\n      if (this.parent.currentView === 'Month' || isAllDay) {\n        nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n      }\n\n      var targetArea = void 0;\n\n      if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n        targetArea = this.parent.getAllDayRow();\n      } else {\n        targetArea = this.parent.getContentTable();\n      }\n\n      var queryString = '[data-date=\"' + new Date(nearestTime).getTime() + '\"]';\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n      }\n\n      target = targetArea.querySelector(queryString);\n\n      if (target) {\n        this.parent.activeCellsData = this.parent.getCellDetails(target);\n\n        if (this.parent.keyboardInteractionModule) {\n          this.parent.keyboardInteractionModule.selectCells(false, target);\n        }\n\n        return target;\n      }\n    }\n\n    return target;\n  };\n\n  EventBase.prototype.getGroupIndexFromEvent = function (eventData) {\n    var levelIndex;\n    var resource;\n    var levelName;\n    var idField;\n\n    for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n      var resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n\n      if (!isNullOrUndefined(resourceData)) {\n        resource = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n        levelIndex = i;\n        levelName = resource.name;\n        idField = resource.field;\n        break;\n      }\n    }\n\n    if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {\n      levelName = this.parent.resourceCollection.slice(-1)[0].name;\n      levelIndex = this.parent.resourceCollection.length - 1;\n      idField = this.parent.resourceCollection.slice(-1)[0].field;\n      resource = this.parent.resourceCollection.filter(function (e, index) {\n        if (e.name === levelName) {\n          levelIndex = index;\n          return e;\n        }\n\n        return null;\n      })[0];\n    }\n\n    var id = eventData[\"\" + idField] instanceof Array ? eventData[\"\" + idField][0] : eventData[\"\" + idField];\n\n    if (levelIndex > 0) {\n      var parentField = this.parent.resourceCollection[levelIndex - 1].field;\n      return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);\n    } else {\n      return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);\n    }\n  };\n\n  EventBase.prototype.isAllDayAppointment = function (event) {\n    var fieldMapping = this.parent.eventFields;\n    var isAllDay = event[fieldMapping.isAllDay];\n    var isFullDay = (getUniversalTime(event[fieldMapping.endTime]) - getUniversalTime(event[fieldMapping.startTime])) / MS_PER_DAY >= 1;\n    return isAllDay || this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' && isFullDay ? true : false;\n  };\n\n  EventBase.prototype.addEventListener = function () {\n    this.parent.on(documentClick, this.appointmentBorderRemove, this);\n  };\n\n  EventBase.prototype.removeEventListener = function () {\n    this.parent.off(documentClick, this.appointmentBorderRemove);\n  };\n\n  EventBase.prototype.appointmentBorderRemove = function (event) {\n    var element = event.event.target;\n\n    if (closest(element, '.' + APPOINTMENT_CLASS)) {\n      if (this.parent.currentView !== 'MonthAgenda') {\n        this.parent.removeSelectedClass();\n      }\n    } else if (!closest(element, '.' + POPUP_OPEN)) {\n      this.removeSelectedAppointmentClass();\n      this.parent.selectedElements = [];\n    }\n  };\n\n  EventBase.prototype.wireAppointmentEvents = function (element, event, isPreventCrud) {\n    if (isPreventCrud === void 0) {\n      isPreventCrud = false;\n    }\n\n    var isReadOnly = !isNullOrUndefined(event) ? event[this.parent.eventFields.isReadonly] : false;\n    EventHandler.add(element, 'click', this.eventClick, this);\n\n    if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n      EventHandler.add(element, 'touchstart', this.eventTouchClick, this);\n      EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n    }\n\n    if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {\n      if (this.parent.resizeModule) {\n        this.parent.resizeModule.wireResizeEvent(element);\n      }\n\n      if (this.parent.dragAndDropModule) {\n        this.parent.dragAndDropModule.wireDragEvent(element);\n      }\n    }\n  };\n\n  EventBase.prototype.eventTouchClick = function (e) {\n    var _this = this;\n\n    setTimeout(function () {\n      return _this.isDoubleTapped = false;\n    }, 250);\n    e.preventDefault();\n\n    if (this.isDoubleTapped) {\n      this.eventDoubleClick(e);\n    } else if (!this.isDoubleTapped) {\n      this.isDoubleTapped = true;\n      this.eventClick(e);\n    }\n  };\n\n  EventBase.prototype.renderResizeHandler = function (element, spanEvent, isReadOnly) {\n    if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n      return;\n    }\n\n    for (var _i = 0, _a = Object.keys(spanEvent); _i < _a.length; _i++) {\n      var resizeEdge = _a[_i];\n      var resizeHandler = createElement('div', {\n        className: EVENT_RESIZE_CLASS\n      });\n\n      switch (resizeEdge) {\n        case 'isLeft':\n          if (!spanEvent.isLeft) {\n            resizeHandler.appendChild(createElement('div', {\n              className: 'e-left-right-resize'\n            }));\n            addClass([resizeHandler], this.parent.enableRtl ? RIGHT_RESIZE_HANDLER : LEFT_RESIZE_HANDLER);\n            prepend([resizeHandler], element);\n          }\n\n          break;\n\n        case 'isRight':\n          if (!spanEvent.isRight) {\n            resizeHandler.appendChild(createElement('div', {\n              className: 'e-left-right-resize'\n            }));\n            addClass([resizeHandler], this.parent.enableRtl ? LEFT_RESIZE_HANDLER : RIGHT_RESIZE_HANDLER);\n            append([resizeHandler], element);\n          }\n\n          break;\n\n        case 'isTop':\n          if (!spanEvent.isTop) {\n            resizeHandler.appendChild(createElement('div', {\n              className: 'e-top-bottom-resize'\n            }));\n            addClass([resizeHandler], TOP_RESIZE_HANDLER);\n            prepend([resizeHandler], element);\n          }\n\n          break;\n\n        case 'isBottom':\n          if (!spanEvent.isBottom) {\n            resizeHandler.appendChild(createElement('div', {\n              className: 'e-top-bottom-resize'\n            }));\n            addClass([resizeHandler], BOTTOM_RESIZE_HANDLER);\n            append([resizeHandler], element);\n          }\n\n          break;\n      }\n    }\n  };\n\n  EventBase.prototype.eventClick = function (eventData) {\n    var _this = this;\n\n    var target = eventData.target;\n\n    if (target.classList.contains(DRAG_CLONE_CLASS) || target.classList.contains(RESIZE_CLONE_CLASS) || target.classList.contains(INLINE_SUBJECT_CLASS)) {\n      return;\n    }\n\n    if ((eventData.ctrlKey || eventData.metaKey) && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n      this.parent.quickPopup.quickPopup.hide();\n      this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n      var target_1 = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n      this.getSelectedEventElements(target_1);\n      this.activeEventData(eventData, false);\n      var selectArgs = {\n        data: this.parent.activeEventData.event,\n        element: this.parent.activeEventData.element,\n        event: eventData,\n        requestType: 'eventSelect'\n      };\n      this.parent.trigger(select, selectArgs);\n      var args = extend(this.parent.activeEventData, {\n        cancel: false,\n        originalEvent: eventData\n      });\n      this.parent.trigger(eventClick, args);\n    } else {\n      this.removeSelectedAppointmentClass();\n      this.activeEventData(eventData, true);\n      var selectEventArgs = {\n        data: this.parent.activeEventData.event,\n        element: this.parent.activeEventData.element,\n        event: eventData,\n        requestType: 'eventSelect'\n      };\n      this.parent.trigger(select, selectEventArgs);\n      var args = extend(this.parent.activeEventData, {\n        cancel: false,\n        originalEvent: eventData\n      });\n      this.parent.trigger(eventClick, args, function (eventClickArgs) {\n        if (eventClickArgs.cancel) {\n          _this.removeSelectedAppointmentClass();\n\n          _this.parent.selectedElements = [];\n\n          if (_this.parent.quickPopup) {\n            _this.parent.quickPopup.quickPopupHide();\n          }\n        } else {\n          if (_this.parent.currentView === 'Agenda' || _this.parent.currentView === 'MonthAgenda') {\n            addClass([_this.parent.activeEventData.element], AGENDA_SELECTED_CELL);\n          }\n\n          if (_this.parent.allowInline) {\n            var inlineArgs = {\n              data: eventClickArgs.event,\n              element: eventClickArgs.element,\n              type: 'Event'\n            };\n\n            _this.parent.notify(inlineClick, inlineArgs);\n          } else {\n            _this.parent.notify(eventClick, eventClickArgs);\n          }\n        }\n      });\n    }\n  };\n\n  EventBase.prototype.eventDoubleClick = function (e) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide(true);\n    }\n\n    if (e.type === 'touchstart') {\n      this.activeEventData(e, true);\n    }\n\n    this.removeSelectedAppointmentClass();\n    this.parent.selectedElements = [];\n\n    if (this.parent.activeEventData.element.classList.contains(INLINE_APPOINTMENT_CLASS) || this.parent.activeEventData.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n      return;\n    }\n\n    if (!isNullOrUndefined(this.parent.activeEventData.event) && isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {\n      this.parent.eventWindow.openEditor(this.parent.activeEventData.event, 'Save');\n    } else {\n      this.parent.currentAction = 'EditOccurrence';\n      this.parent.quickPopup.openRecurrenceAlert();\n    }\n  };\n\n  EventBase.prototype.getEventByGuid = function (guid) {\n    return this.parent.eventsProcessed.filter(function (data) {\n      return data.Guid === guid;\n    })[0];\n  };\n\n  EventBase.prototype.getEventById = function (id) {\n    var _this = this;\n\n    return this.parent.eventsData.filter(function (data) {\n      return data[_this.parent.eventFields.id] === id;\n    })[0];\n  };\n\n  EventBase.prototype.generateGuid = function () {\n    return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0;\n      var v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  };\n\n  EventBase.prototype.getEventIDType = function () {\n    if (this.parent.eventsData.length !== 0) {\n      return typeof this.parent.eventsData[0][this.parent.eventFields.id];\n    }\n\n    if (this.parent.blockData.length !== 0) {\n      return typeof this.parent.blockData[0][this.parent.eventFields.id];\n    }\n\n    return 'string';\n  };\n\n  EventBase.prototype.getEventMaxID = function (resourceId) {\n    var _this = this;\n\n    if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n      return 1;\n    }\n\n    var eventId;\n    var idType = this.getEventIDType();\n\n    if (idType === 'string') {\n      eventId = this.generateGuid();\n    }\n\n    if (idType === 'number') {\n      var datas = this.parent.eventsData.concat(this.parent.blockData);\n      var appIds = datas.map(function (event) {\n        return event[_this.parent.eventFields.id];\n      });\n      var maxId = appIds.reduce(function (a, b) {\n        return Math.max(a, b);\n      });\n      maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n      eventId = maxId + 1;\n    }\n\n    return eventId;\n  };\n\n  EventBase.prototype.activeEventData = function (eventData, isMultiple) {\n    var _this = this;\n\n    var target = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n    var guid = target.getAttribute('data-guid');\n\n    if (isMultiple) {\n      this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')), true);\n      target.focus();\n    }\n\n    var eventObject = this.getEventByGuid(guid);\n\n    if (eventObject && eventObject.isSpanned) {\n      eventObject = this.parent.eventsData.filter(function (obj) {\n        return obj[_this.parent.eventFields.id] === eventObject[_this.parent.eventFields.id];\n      })[0];\n    }\n\n    this.parent.activeEventData = {\n      event: eventObject,\n      element: target\n    };\n  };\n\n  EventBase.prototype.generateOccurrence = function (event, viewDate, oldTimezone, isMaxCount) {\n    var startDate = event[this.parent.eventFields.startTime];\n    var endDate = event[this.parent.eventFields.endTime];\n    var eventRule = event[this.parent.eventFields.recurrenceRule];\n    var timeZoneDiff = endDate.getTimezoneOffset() - startDate.getTimezoneOffset();\n    var duration = endDate.getTime() - startDate.getTime() - timeZoneDiff * 60000;\n    viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);\n    var exception = event[this.parent.eventFields.recurrenceException];\n    var maxCount;\n\n    if (this.parent.currentView !== 'Agenda' && isMaxCount) {\n      maxCount = getDateCount(viewDate, this.parent.activeView.endDate()) + 1;\n    }\n\n    var newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n    var firstDay = this.parent.activeViewOptions.firstDayOfWeek;\n    var calendarMode = this.parent.calendarMode;\n    var dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, oldTimezone, newTimezone);\n\n    if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n      if (isNullOrUndefined(event.generatedDates)) {\n        event.generatedDates = {\n          start: new Date(dates[0]),\n          end: new Date(dates[dates.length - 1])\n        };\n      } else {\n        if (dates[0] < event.generatedDates.start.getTime()) {\n          event.generatedDates.start = new Date(dates[0]);\n        }\n\n        if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n          event.generatedDates.end = new Date(dates[dates.length - 1]);\n        }\n      }\n    }\n\n    var occurrenceCollection = [];\n\n    for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n      var date = dates_1[_i];\n      var clonedObject = extend({}, event, null, true);\n      date = this.getDSTAdjustedTime(date, clonedObject);\n      clonedObject[this.parent.eventFields.startTime] = new Date(date);\n      clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n      clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];\n      delete clonedObject[this.parent.eventFields.recurrenceException];\n      delete clonedObject[this.parent.eventFields.followingID];\n      clonedObject.Guid = this.generateGuid();\n      occurrenceCollection.push(clonedObject);\n    }\n\n    return occurrenceCollection;\n  };\n\n  EventBase.prototype.getDSTAdjustedTime = function (date, event) {\n    var occurDate = date;\n\n    if (this.parent.timezone && (event[this.parent.eventFields.startTimezone] || event[this.parent.eventFields.endTimezone])) {\n      var eventOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), event[this.parent.eventFields.startTimezone]);\n      var schOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), this.parent.timezone);\n      occurDate = new Date(date).getTime() - (eventOffset - schOffset) * 60000;\n    }\n\n    return occurDate;\n  };\n\n  EventBase.prototype.getDSTDiff = function (startDate, occurDate, timezone) {\n    var startOffset = this.parent.tzModule.offset(new Date(startDate), timezone);\n    var occurOffset = this.parent.tzModule.offset(new Date(occurDate), timezone);\n    return startOffset - occurOffset;\n  };\n\n  EventBase.prototype.getParentEvent = function (eventObj, isParent) {\n    if (isParent === void 0) {\n      isParent = false;\n    }\n\n    var parentEvent;\n\n    do {\n      eventObj = this.getFollowingEvent(eventObj);\n\n      if (eventObj) {\n        parentEvent = extend({}, eventObj, null, true);\n      }\n    } while (eventObj && isParent);\n\n    if (isParent && parentEvent) {\n      var collection = this.getEventCollections(parentEvent);\n      var followObj = collection.follow.slice(-1)[0];\n\n      if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {\n        followObj = collection.occurrence.slice(-1)[0];\n      }\n\n      if (followObj) {\n        parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];\n      }\n    }\n\n    return parentEvent;\n  };\n\n  EventBase.prototype.getEventCollections = function (parentObj, childObj) {\n    var followingCollection = [];\n    var occurrenceCollection = [];\n    var followingEvent = parentObj;\n\n    do {\n      followingEvent = this.getFollowingEvent(followingEvent, true);\n\n      if (followingEvent) {\n        followingCollection.push(followingEvent);\n      }\n\n      occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));\n    } while (followingEvent);\n\n    var collections = {};\n\n    if (childObj) {\n      var fields_1 = this.parent.eventFields;\n      collections = {\n        follow: followingCollection.filter(function (eventData) {\n          return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n        }),\n        occurrence: occurrenceCollection.filter(function (eventData) {\n          return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n        })\n      };\n    } else {\n      collections = {\n        follow: followingCollection,\n        occurrence: occurrenceCollection\n      };\n    }\n\n    return collections;\n  };\n\n  EventBase.prototype.getFollowingEvent = function (parentObj, isReverse) {\n    var fields = this.parent.eventFields;\n    var fieldValue;\n\n    if (isReverse) {\n      fieldValue = parentObj[fields.id];\n    } else {\n      fieldValue = parentObj[fields.recurrenceID] || parentObj[fields.followingID];\n    }\n\n    var parentApp = this.parent.eventsData.filter(function (data) {\n      return data[isReverse ? fields.followingID : fields.id] === fieldValue;\n    });\n    return parentApp.shift();\n  };\n\n  EventBase.prototype.isFollowingEvent = function (parentObj, childObj) {\n    var parentStart = parentObj[this.parent.eventFields.startTime];\n    var childStart = childObj[this.parent.eventFields.startTime];\n    return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() && parentStart.getSeconds() === childStart.getSeconds();\n  };\n\n  EventBase.prototype.getOccurrenceEvent = function (eventObj, isGuid, isFollowing) {\n    if (isGuid === void 0) {\n      isGuid = false;\n    }\n\n    if (isFollowing === void 0) {\n      isFollowing = false;\n    }\n\n    var idField = isGuid ? 'Guid' : isFollowing ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;\n    var fieldKey = isGuid ? 'Guid' : this.parent.eventFields.id;\n    var dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;\n    return dataSource.filter(function (data) {\n      return data[\"\" + idField] === eventObj[\"\" + fieldKey];\n    });\n  };\n\n  EventBase.prototype.getOccurrencesByID = function (id) {\n    var fields = this.parent.eventFields;\n    var occurrenceCollection = [];\n    var parentObject = this.parent.eventsData.filter(function (obj) {\n      return obj[fields.id] === id;\n    });\n\n    for (var _i = 0, parentObject_1 = parentObject; _i < parentObject_1.length; _i++) {\n      var event_3 = parentObject_1[_i];\n\n      if (!isNullOrUndefined(event_3[fields.recurrenceRule])) {\n        occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_3));\n      }\n    }\n\n    return occurrenceCollection;\n  };\n\n  EventBase.prototype.getOccurrencesByRange = function (startTime, endTime) {\n    var fields = this.parent.eventFields;\n    var occurrenceCollection = [];\n\n    for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n      var event_4 = _a[_i];\n\n      if (!isNullOrUndefined(event_4[fields.recurrenceRule])) {\n        occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_4));\n      }\n    }\n\n    var filter = occurrenceCollection.filter(function (obj) {\n      return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);\n    });\n    return filter;\n  };\n\n  EventBase.prototype.getDeletedOccurrences = function (recurrenceData) {\n    var fields = this.parent.eventFields;\n    var parentObject;\n    var deletedOccurrences = [];\n\n    if (typeof recurrenceData === 'string' || typeof recurrenceData === 'number') {\n      parentObject = this.parent.eventsData.filter(function (obj) {\n        return obj[fields.id] === recurrenceData;\n      })[0];\n    } else {\n      parentObject = extend({}, recurrenceData, null, true);\n    }\n\n    if (parentObject[fields.recurrenceException]) {\n      var exDateString_1 = parentObject[fields.recurrenceException].split(',');\n\n      var _loop_3 = function (i, len) {\n        var edited = this_2.parent.eventsData.filter(function (eventObj) {\n          return eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString_1[parseInt(i.toString(), 10)];\n        });\n\n        if (edited.length === 0) {\n          var exDate = getDateFromRecurrenceDateString(exDateString_1[parseInt(i.toString(), 10)]);\n          var childObject = extend({}, recurrenceData, null, true);\n          childObject[fields.recurrenceID] = parentObject[fields.id];\n          delete childObject[fields.followingID];\n          childObject[fields.recurrenceException] = exDateString_1[parseInt(i.toString(), 10)];\n          var startDate = new Date(exDate.getTime());\n          var time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();\n          var endDate = new Date(startDate.getTime());\n          endDate.setMilliseconds(time);\n          childObject[fields.startTime] = new Date(startDate.getTime());\n          childObject[fields.endTime] = new Date(endDate.getTime());\n          deletedOccurrences.push(childObject);\n        }\n      };\n\n      var this_2 = this;\n\n      for (var i = 0, len = exDateString_1.length; i < len; i++) {\n        _loop_3(i, len);\n      }\n    }\n\n    return deletedOccurrences;\n  };\n\n  EventBase.prototype.applyResourceColor = function (element, data, type, index, alpha) {\n    if (!this.parent.resourceBase) {\n      return;\n    }\n\n    var alphaColor = function (color, alpha) {\n      color = color.replace('#', '');\n      var r = parseInt(color.substring(0, color.length / 3), 16);\n      var g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n      var b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n      return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n    }; // index refers groupOrder\n\n\n    var color = this.parent.resourceBase.getResourceColor(data, index);\n\n    if (color) {\n      element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n    }\n  };\n\n  EventBase.prototype.createBlockAppointmentElement = function (record, resIndex, isResourceEventTemplate) {\n    var eventSubject = record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default;\n    var appointmentWrapper = createElement('div', {\n      className: BLOCK_APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n        'aria-disabled': 'true'\n      }\n    });\n    var templateElement;\n\n    if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.eventTemplateName;\n      var templateId = scheduleId + viewName + 'eventTemplate';\n      var templateName = 'eventTemplate' + (isResourceEventTemplate && this.parent.currentView.indexOf('Year') === -1 ? '_' + resIndex : '');\n      templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false);\n    } else {\n      var appointmentSubject = createElement('div', {\n        className: SUBJECT_CLASS\n      });\n      this.parent.sanitize(eventSubject, appointmentSubject);\n      templateElement = [appointmentSubject];\n    }\n\n    append(templateElement, appointmentWrapper);\n    this.setWrapperAttributes(appointmentWrapper, resIndex);\n    return appointmentWrapper;\n  };\n\n  EventBase.prototype.setWrapperAttributes = function (appointmentWrapper, resIndex) {\n    if (!isNullOrUndefined(this.cssClass)) {\n      addClass([appointmentWrapper], this.cssClass);\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n  };\n\n  EventBase.prototype.getReadonlyAttribute = function (event) {\n    return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();\n  };\n\n  EventBase.prototype.isBlockRange = function (eventData) {\n    var eventCollection = eventData instanceof Array ? eventData : [eventData];\n    var isBlockAlert = false;\n    var fields = this.parent.eventFields;\n\n    for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {\n      var event_5 = _a[_i];\n      var dataCol = [];\n\n      if (!isNullOrUndefined(event_5[fields.recurrenceRule]) && (isNullOrUndefined(event_5[fields.recurrenceID]) || event_5[fields.id] === event_5[fields.recurrenceID])) {\n        dataCol = this.generateOccurrence(event_5);\n      } else {\n        dataCol.push(event_5);\n      }\n\n      for (var _b = 0, dataCol_1 = dataCol; _b < dataCol_1.length; _b++) {\n        var data = dataCol_1[_b];\n        var filterBlockEvents = this.filterBlockEvents(data);\n\n        if (filterBlockEvents.length > 0) {\n          isBlockAlert = true;\n          break;\n        }\n      }\n    }\n\n    this.parent.uiStateValues.isBlock = isBlockAlert;\n    return isBlockAlert;\n  };\n\n  EventBase.prototype.getFilterEventsList = function (dataSource, query) {\n    return new DataManager(dataSource).executeLocal(new Query().where(query));\n  };\n\n  EventBase.prototype.getSeriesEvents = function (parentEvent, startTime) {\n    var fields = this.parent.eventFields;\n    startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;\n    var deleteFutureEditEvents;\n    var futureEvents;\n    var deleteFutureEditEventList = [];\n    var delId = parentEvent[fields.id];\n    var followingId = parentEvent[fields.followingID];\n    var deleteFutureEvent;\n    var startTimeQuery = this.parent.currentAction === 'EditSeries' ? 'greaterthan' : 'greaterthanorequal';\n\n    do {\n      deleteFutureEvent = new Predicate(fields.followingID, 'equal', delId).and(new Predicate(fields.startTime, startTimeQuery, startTime));\n      futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);\n      deleteFutureEditEvents = futureEvents.slice(-1)[0];\n\n      if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {\n        deleteFutureEditEventList.push(deleteFutureEditEvents);\n        delId = deleteFutureEditEvents[fields.id];\n        followingId = deleteFutureEditEvents[fields.followingID];\n      } else {\n        followingId = null;\n      }\n    } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));\n\n    return deleteFutureEditEventList;\n  };\n\n  EventBase.prototype.getEditedOccurrences = function (deleteFutureEditEventList, startTime) {\n    var fields = this.parent.eventFields;\n    var deleteRecurrenceEventList = [];\n    var delEditedEvents;\n\n    for (var _i = 0, deleteFutureEditEventList_1 = deleteFutureEditEventList; _i < deleteFutureEditEventList_1.length; _i++) {\n      var event_6 = deleteFutureEditEventList_1[_i];\n      var delEventQuery = new Predicate(fields.recurrenceID, 'equal', event_6[fields.id]).or(new Predicate(fields.recurrenceID, 'equal', event_6[fields.followingID]).and(new Predicate(fields.recurrenceID, 'notequal', undefined)).and(new Predicate(fields.recurrenceID, 'notequal', null)));\n\n      if (this.parent.currentAction === 'EditFollowingEvents' || this.parent.currentAction === 'DeleteFollowingEvents') {\n        delEventQuery = delEventQuery.and(new Predicate(fields.startTime, 'greaterthanorequal', startTime));\n      }\n\n      delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);\n      deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);\n    }\n\n    return deleteRecurrenceEventList;\n  };\n\n  EventBase.prototype.getRenderedDates = function (dateRender) {\n    var firstDate = 0;\n    var lastDate = dateRender.length;\n    var filteredDates;\n\n    if (dateRender[0] < this.parent.minDate && dateRender[dateRender.length - 1] > this.parent.maxDate) {\n      for (var i = 0; i < dateRender.length; i++) {\n        if (resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === resetTime(new Date(this.parent.minDate)).getTime()) {\n          firstDate = i;\n        }\n\n        if (resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === resetTime(new Date(this.parent.maxDate)).getTime()) {\n          lastDate = i;\n        }\n      }\n\n      filteredDates = dateRender.filter(function (date) {\n        return date >= dateRender[parseInt(firstDate.toString(), 10)] && date <= dateRender[parseInt(lastDate.toString(), 10)];\n      });\n    }\n\n    return filteredDates;\n  };\n\n  EventBase.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n    var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n    var isSameRange = schedule.startHour.getTime() <= start.getTime() && eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() && eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n    return isHourRange || isSameRange;\n  };\n\n  EventBase.prototype.allDayExpandScroll = function (dateHeader) {\n    var indentHeight = 0;\n    var headerRows = [].slice.call(this.parent.element.querySelectorAll('.' + HEADER_ROW_CLASS));\n    headerRows.forEach(function (element) {\n      var tdEle = [].slice.call(element.children);\n      tdEle.forEach(function (ele) {\n        ele.style.top = indentHeight + 'px';\n      });\n      indentHeight += element.offsetHeight;\n    });\n    indentHeight = dateHeader.offsetHeight - indentHeight;\n    this.parent.element.querySelector('.' + ALLDAY_CELLS_CLASS).style.height = indentHeight / 12 + 'em';\n\n    if (this.parent.uiStateValues.expand) {\n      addClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n    } else {\n      removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n    }\n  };\n\n  EventBase.prototype.updateEventMinimumDuration = function (startEndHours, startTime, endTime) {\n    if (startTime.getTime() < endTime.getTime()) {\n      var eventDuration = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE;\n\n      if (eventDuration < this.parent.eventSettings.minimumEventDuration) {\n        var tempEnd = new Date(startTime);\n        tempEnd.setMinutes(tempEnd.getMinutes() + this.parent.eventSettings.minimumEventDuration);\n        endTime = tempEnd;\n\n        if (endTime.getTime() > startEndHours.endHour.getTime()) {\n          var tempStart = new Date(startEndHours.endHour.getTime());\n          tempStart.setMinutes(tempStart.getMinutes() - this.parent.eventSettings.minimumEventDuration);\n          startTime = tempStart;\n          endTime = startEndHours.endHour;\n        }\n      }\n    }\n\n    return {\n      startDate: startTime,\n      endDate: endTime\n    };\n  };\n\n  EventBase.prototype.createEventWrapper = function (type, index) {\n    if (type === void 0) {\n      type = '';\n    }\n\n    if (index === void 0) {\n      index = 0;\n    }\n\n    var tr = createElement('tr');\n    var levels = this.parent.activeView.colLevels.slice(-1)[0];\n\n    for (var i = 0, len = levels.length; i < len; i++) {\n      var col = levels[parseInt(i.toString(), 10)];\n      var appointmentWrap = createElement('td', {\n        className: type === 'allDay' ? ALLDAY_APPOINTMENT_WRAPPER_CLASS : type === 'timeIndicator' ? TIMELINE_WRAPPER_CLASS : DAY_WRAPPER_CLASS,\n        attrs: {\n          'data-date': col.date.getTime().toString()\n        }\n      });\n\n      if (!isNullOrUndefined(col.groupIndex)) {\n        appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n      }\n\n      if (type === '') {\n        var innerWrapper = createElement('div', {\n          id: APPOINTMENT_WRAPPER_CLASS + '-' + index.toString(),\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        appointmentWrap.appendChild(innerWrapper);\n      }\n\n      tr.appendChild(appointmentWrap);\n      index = index + 1;\n    }\n\n    return tr;\n  };\n\n  EventBase.prototype.getPageCoordinates = function (e) {\n    if (isNullOrUndefined(e)) {\n      return e;\n    }\n\n    var eventArgs = e.event;\n    return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;\n  };\n\n  EventBase.prototype.renderSpannedIcon = function (element, spanEvent) {\n    var iconElement = createElement('div', {\n      className: EVENT_INDICATOR_CLASS + ' ' + ICON\n    });\n\n    if (spanEvent.isLeft) {\n      var iconLeft = iconElement.cloneNode();\n      addClass([iconLeft], EVENT_ICON_LEFT_CLASS);\n      prepend([iconLeft], element);\n    }\n\n    if (spanEvent.isRight) {\n      var iconRight = iconElement.cloneNode();\n      addClass([iconRight], EVENT_ICON_RIGHT_CLASS);\n      append([iconRight], element);\n    }\n\n    if (spanEvent.isTop) {\n      var iconTop = iconElement.cloneNode();\n      addClass([iconTop], EVENT_ICON_UP_CLASS);\n      prepend([iconTop], element);\n    }\n\n    if (spanEvent.isBottom) {\n      var iconBottom = iconElement.cloneNode();\n      addClass([iconBottom], EVENT_ICON_DOWN_CLASS);\n      append([iconBottom], element);\n    }\n  };\n\n  EventBase.prototype.unWireEvents = function () {\n    var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n\n    for (var _i = 0, appElements_1 = appElements; _i < appElements_1.length; _i++) {\n      var element = appElements_1[_i];\n      EventHandler.clearEvents(element);\n    }\n  };\n\n  EventBase.prototype.destroy = function () {\n    this.unWireEvents();\n    this.parent = null;\n  };\n\n  return EventBase;\n}();\n\nvar __extends$1 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Vertical view appointment rendering\n */\n\n\nvar VerticalEvent =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$1(VerticalEvent, _super);\n\n  function VerticalEvent(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.dateRender = [];\n    _this.renderedEvents = [];\n    _this.renderedAllDayEvents = [];\n    _this.overlapEvents = [];\n    _this.moreEvents = [];\n    _this.overlapList = [];\n    _this.allDayEvents = [];\n    _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n    _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n    _this.allDayLevel = 0;\n    _this.startHour = _this.parent.activeView.getStartHour();\n    _this.endHour = _this.parent.activeView.getEndHour();\n    _this.element = _this.parent.activeView.getPanel();\n    _this.fields = _this.parent.eventFields;\n    _this.animation = new Animation({\n      progress: _this.animationUiUpdate.bind(_this)\n    });\n\n    _this.addEventListener();\n\n    return _this;\n  }\n\n  VerticalEvent.prototype.renderAppointments = function () {\n    if (isNullOrUndefined(this.parent)) {\n      return;\n    }\n\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n\n    this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n    var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS + ',.' + APPOINTMENT_CLASS + ',.' + ROW_COUNT_WRAPPER_CLASS));\n    var isDragging = this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction ? true : false;\n\n    for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {\n      var wrapper = wrapperElements_1[_i];\n\n      if (isDragging && !(wrapper.classList.contains(ALLDAY_APPOINTMENT_CLASS) || wrapper.classList.contains(ROW_COUNT_WRAPPER_CLASS))) {\n        var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n\n        for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n          if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[parseInt(j.toString(), 10)].groupIndex || groupIndex === this.parent.crudModule.crudObj.targetEvent[parseInt(j.toString(), 10)].groupIndex) {\n            remove(wrapper);\n          }\n        }\n      } else {\n        remove(wrapper);\n      }\n    }\n\n    if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n      return;\n    }\n\n    if (this.parent.virtualScrollModule) {\n      this.parent.virtualScrollModule.updateFocusedWorkCell();\n    }\n\n    this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n    this.setAllDayRowHeight(0);\n\n    if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n      return;\n    }\n\n    var expandCollapse = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n    EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n    EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n    this.renderedEvents = [];\n    this.renderedAllDayEvents = [];\n    this.initializeValues();\n    this.processBlockEvents();\n    this.renderEvents('normalEvents');\n\n    if (this.allDayEvents.length > 0) {\n      this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n        return index === arr.map(function (item) {\n          return item.Guid;\n        }).indexOf(item.Guid);\n      });\n      removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n      this.slots.push(this.parent.activeView.renderDates.map(function (date) {\n        return +date;\n      }));\n      this.renderEvents('allDayEvents');\n      this.animation.animate(this.allDayElement[0]);\n    }\n\n    this.parent.notify(contentReady, {});\n    addClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n\n    if (isDragging) {\n      this.parent.crudModule.crudObj.isCrudAction = false;\n    }\n\n    this.parent.renderTemplates();\n  };\n\n  VerticalEvent.prototype.initializeValues = function () {\n    this.resources = this.parent.activeViewOptions.group.resources.length > 0 ? this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel : [];\n\n    if (this.resources.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.virtualScrollModule) {\n      this.resources = this.parent.resourceBase.renderedResources;\n    }\n\n    this.cellHeight = parseFloat(this.parent.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n    this.dateRender[0] = this.parent.activeView.renderDates;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      for (var i = 0, len = this.resources.length; i < len; i++) {\n        this.dateRender[parseInt(i.toString(), 10)] = this.resources[parseInt(i.toString(), 10)].renderDates;\n      }\n    }\n  };\n\n  VerticalEvent.prototype.getHeight = function (start, end) {\n    var appHeight = (getUniversalTime(end) - getUniversalTime(start)) / MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;\n    appHeight = appHeight <= 0 ? this.cellHeight : appHeight;\n    return appHeight;\n  };\n\n  VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n    var appointmentWrap = this.element.querySelector('.' + APPOINTMENT_WRAPPER_CLASS + '[id=\"' + APPOINTMENT_WRAPPER_CLASS + '-' + index + '\"]');\n\n    if (this.parent.enableRtl) {\n      setStyleAttribute(appointmentElement, {\n        'right': appLeft\n      });\n    } else {\n      setStyleAttribute(appointmentElement, {\n        'left': appLeft\n      });\n    }\n\n    var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n    var args = {\n      data: extend({}, eventObj, null, true),\n      element: appointmentElement,\n      cancel: false,\n      type: eventType\n    };\n    this.parent.trigger(eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        appointmentWrap.appendChild(appointmentElement);\n      }\n    });\n  };\n\n  VerticalEvent.prototype.processBlockEvents = function () {\n    var resources = this.getResourceList();\n    var dateCount = this.getStartCount();\n\n    for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n      var resource = resources_1[_i];\n      var renderDates = this.dateRender[parseInt(resource.toString(), 10)];\n\n      for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n        var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n        var endDate = addDays(renderDates[parseInt(day.toString(), 10)], 1);\n        var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[parseInt(resource.toString(), 10)]);\n\n        for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n          var event_1 = filterEvents_1[_a];\n\n          if (this.parent.resourceBase) {\n            this.setValues(event_1, resource);\n          }\n\n          this.renderBlockEvents(event_1, day, resource, dateCount);\n          this.cssClass = null;\n          this.groupOrder = null;\n        }\n\n        dateCount += 1;\n      }\n    }\n  };\n\n  VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n    var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n    var eStart = spannedData[this.fields.startTime];\n    var eEnd = spannedData[this.fields.endTime];\n    var currentDate = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n    var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n\n    if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule) && this.isWorkDayAvailable(resource, eStart)) {\n      var blockTop = void 0;\n      var blockHeight = void 0;\n\n      if (spannedData[this.fields.isAllDay]) {\n        var contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n        blockHeight = formatUnit(contentWrap.offsetHeight);\n        blockTop = formatUnit(0);\n      } else {\n        blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n        blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n      }\n\n      var appointmentElement = this.createBlockAppointmentElement(eventObj, resource, this.isResourceEventTemplate);\n      setStyleAttribute(appointmentElement, {\n        'width': '100%',\n        'height': blockHeight,\n        'top': blockTop\n      });\n      var index = this.getDayIndex(dayIndex, resource, dayCount);\n      this.appendEvent(eventObj, appointmentElement, index, '0px');\n    }\n  };\n\n  VerticalEvent.prototype.renderEvents = function (eventType) {\n    removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n    var eventCollection = eventType === 'allDayEvents' ? this.sortByDateTime(this.allDayEvents) : undefined;\n    var resources = this.getResourceList();\n    var dateCount = this.getStartCount();\n    var isRender;\n    var appHeight = eventType === 'allDayEvents' ? getElementHeightFromClass(this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS), APPOINTMENT_CLASS) : 0;\n    var allDayRowTop = eventType === 'allDayEvents' && this.allDayElement.length > 0 ? this.allDayElement[0].offsetTop : 0;\n\n    var _loop_1 = function (resource) {\n      isRender = true;\n\n      if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents' && !this_1.parent.uiStateValues.isGroupAdaptive) {\n        if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (data) {\n          return data.groupIndex === resource;\n        }).length === 0 && this_1.parent.crudModule.crudObj.targetEvent.filter(function (data) {\n          return data.groupIndex === resource;\n        }).length === 0) {\n          isRender = false;\n        }\n      }\n\n      this_1.slots = [];\n      var renderDates = this_1.dateRender[parseInt(resource.toString(), 10)];\n      var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;\n      this_1.slots.push(renderDates.map(function (date) {\n        return +date;\n      }));\n\n      for (var day = 0, length_2 = renderDates.length; day < length_2 && renderDates[parseInt(day.toString(), 10)] <= renderedDate[renderedDate.length - 1]; day++) {\n        this_1.renderedEvents = [];\n        var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n        var endDate = addDays(renderDates[parseInt(day.toString(), 10)], 1);\n        var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[parseInt(resource.toString(), 10)]);\n\n        if (isRender) {\n          for (var _i = 0, filterEvents_2 = filterEvents; _i < filterEvents_2.length; _i++) {\n            var event_2 = filterEvents_2[_i];\n\n            if (this_1.parent.resourceBase) {\n              this_1.setValues(event_2, resource);\n            }\n\n            if (eventType === 'allDayEvents') {\n              this_1.renderAllDayEvents(event_2, day, resource, dateCount, false, allDayRowTop, appHeight);\n            } else {\n              if (this_1.isAllDayAppointment(event_2)) {\n                this_1.allDayEvents.push(extend({}, event_2, null, true));\n              } else {\n                if (this_1.parent.eventSettings.enableMaxHeight) {\n                  if (this_1.getOverlapIndex(event_2, day, false, resource) > 0) {\n                    continue;\n                  }\n                }\n\n                this_1.renderNormalEvents(event_2, day, resource, dateCount);\n              }\n            }\n\n            this_1.cssClass = null;\n            this_1.groupOrder = null;\n          }\n        } else {\n          for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {\n            var event_3 = filterEvents_3[_a];\n\n            if (this_1.isAllDayAppointment(event_3)) {\n              this_1.allDayEvents.push(extend({}, event_3, null, true));\n            }\n          }\n        }\n\n        dateCount += 1;\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n      var resource = resources_2[_i];\n\n      _loop_1(resource);\n    }\n  };\n\n  VerticalEvent.prototype.getStartCount = function () {\n    return this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.timeScale.enable ? parseInt(this.element.querySelector('.' + APPOINTMENT_WRAPPER_CLASS).getAttribute('id').split('-').slice(-1)[0], 10) : 0;\n  };\n\n  VerticalEvent.prototype.getDayIndex = function (dayIndex, resource, dayCount) {\n    var _this = this;\n\n    if (!this.parent.activeViewOptions.group.byDate) {\n      return dayCount;\n    }\n\n    if (this.parent.activeViewOptions.group.byDate && !this.parent.activeViewOptions.group.hideNonWorkingDays) {\n      var renderedIndex = this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]);\n      return this.resources.length * renderedIndex + resource;\n    }\n\n    var dateIndex = 0;\n    var firstColumn = this.parent.activeView.colLevels[0];\n    var currentDate = this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime();\n    var currentResources = [];\n\n    for (var i = 0; i < firstColumn.length; i++) {\n      currentResources = this.parent.resourceBase.resourceDateTree[parseInt(i.toString(), 10)];\n\n      if (currentDate === firstColumn[parseInt(i.toString(), 10)].date.getTime()) {\n        break;\n      }\n\n      dateIndex = dateIndex + firstColumn[parseInt(i.toString(), 10)].colSpan;\n    }\n\n    var resIndex = currentResources.findIndex(function (x) {\n      return x.groupOrder.toString() === _this.resources[parseInt(resource.toString(), 10)].groupOrder.toString();\n    });\n\n    if (resIndex < 0) {\n      return dateIndex;\n    }\n\n    return dateIndex + resIndex;\n  };\n\n  VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.cssClass = this.resources[parseInt(resourceIndex.toString(), 10)].cssClass;\n      this.groupOrder = this.resources[parseInt(resourceIndex.toString(), 10)].groupOrder;\n    } else {\n      this.cssClass = this.parent.resourceBase.getCssClass(event);\n    }\n  };\n\n  VerticalEvent.prototype.getResourceList = function () {\n    // eslint-disable-next-line prefer-spread\n    var resources = Array.apply(null, {\n      length: this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive ? this.resources.length : 1\n    }).map(function (value, index) {\n      return index;\n    });\n    return resources;\n  }; // eslint-disable-next-line max-len\n\n\n  VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n    var fieldMapping = this.parent.eventFields;\n    var recordSubject = record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var appointmentWrapper = createElement('div', {\n      className: APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[fieldMapping.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n\n    if (record[this.fields.isReadonly]) {\n      addClass([appointmentWrapper], 'e-read-only');\n    }\n\n    var appointmentDetails = createElement('div', {\n      className: APPOINTMENT_DETAILS\n    });\n    appointmentWrapper.appendChild(appointmentDetails);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n      appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n    }\n\n    var templateElement;\n    var eventData = data;\n\n    if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n      var elementId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.eventTemplateName;\n      var templateId = elementId + viewName + 'eventTemplate';\n      var resIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n      var templateName = 'eventTemplate' + (this.isResourceEventTemplate ? '_' + resIndex : '');\n      templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false);\n    } else {\n      var appointmentSubject = createElement('div', {\n        className: SUBJECT_CLASS\n      });\n      this.parent.sanitize(recordSubject, appointmentSubject);\n\n      if (isAllDay) {\n        if (record[fieldMapping.isAllDay]) {\n          templateElement = [appointmentSubject];\n        } else {\n          templateElement = [];\n          var appointmentStartTime = createElement('div', {\n            className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n            innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n          });\n          var appointmentEndTime = createElement('div', {\n            className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n            innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n          });\n          addClass([appointmentSubject], 'e-text-center');\n\n          if (!eventData.isLeft) {\n            templateElement.push(appointmentStartTime);\n          }\n\n          templateElement.push(appointmentSubject);\n\n          if (!eventData.isRight) {\n            templateElement.push(appointmentEndTime);\n          }\n        }\n      } else {\n        var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' + this.parent.getTimeString(record[fieldMapping.endTime]);\n        var appointmentTime = createElement('div', {\n          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n          innerHTML: timeStr\n        });\n        var appointmentLocation = createElement('div', {\n          className: LOCATION_CLASS\n        });\n        this.parent.sanitize(record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || '', appointmentLocation);\n        templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n      }\n    }\n\n    append(templateElement, appointmentDetails);\n\n    if (!this.parent.isAdaptive && (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n      var iconClass = record[fieldMapping.id] === record[fieldMapping.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n      var recurrenceIcon = createElement('div', {\n        className: ICON + ' ' + iconClass\n      });\n\n      if (isAllDay) {\n        appointmentDetails.appendChild(recurrenceIcon);\n      } else {\n        appointmentWrapper.appendChild(recurrenceIcon);\n      }\n    }\n\n    this.parent.eventBase.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n\n    if (!isNullOrUndefined(this.cssClass)) {\n      addClass([appointmentWrapper], this.cssClass);\n    }\n\n    this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n    this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n    return appointmentWrapper;\n  };\n\n  VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n    var index = currentDay + count;\n    var countWrapper = allDayRow[parseInt(index.toString(), 10)];\n\n    if (countWrapper.childElementCount <= 0) {\n      var innerCountWrap = createElement('div', {\n        className: ROW_COUNT_WRAPPER_CLASS,\n        id: ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n      });\n      var moreIndicatorElement = createElement('div', {\n        className: MORE_INDICATOR_CLASS,\n        attrs: {\n          'tabindex': '0',\n          'data-index': index.toString(),\n          'data-count': '1'\n        },\n        innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n      });\n      innerCountWrap.appendChild(moreIndicatorElement);\n      countWrapper.appendChild(innerCountWrap);\n      EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n    } else {\n      var countCell = countWrapper.querySelector('.' + MORE_INDICATOR_CLASS);\n      var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n      countCell.setAttribute('data-count', moreCount.toString());\n      countCell.innerHTML = '+' + this.parent.globalize.formatNumber(moreCount) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n    }\n  };\n\n  VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n    var currentDate = resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]);\n    var renderedDate = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || [currentDate];\n    var currentDay = renderedDate.filter(function (date) {\n      return date.getDay() === day;\n    });\n\n    if (currentDay.length === 0) {\n      currentDate = resetTime(renderedDate[0]);\n    }\n\n    var field = this.parent.eventFields;\n    var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n    var event = extend({}, record, null, true);\n    event.isSpanned = {\n      isBottom: false,\n      isTop: false\n    };\n\n    if (record[field.startTime].getTime() < schedule.startHour.getTime()) {\n      event[field.startTime] = schedule.startHour;\n      event.isSpanned.isTop = true;\n    }\n\n    if (record[field.endTime].getTime() > schedule.endHour.getTime()) {\n      event[field.endTime] = schedule.endHour;\n      event.isSpanned.isBottom = true;\n    }\n\n    var eventDates = this.updateEventMinimumDuration(schedule, event[field.startTime], event[field.endTime]);\n    event[field.startTime] = eventDates.startDate;\n    event[field.endTime] = eventDates.endDate;\n    return event;\n  };\n\n  VerticalEvent.prototype.isWorkDayAvailable = function (resource, start) {\n    if (this.parent.activeViewOptions.group.hideNonWorkingDays && this.resources.length > 0) {\n      var workDays = this.resources[parseInt(resource.toString(), 10)].resourceData[this.resources[parseInt(resource.toString(), 10)].resource.workDaysField] || this.parent.activeViewOptions.workDays;\n      return workDays && workDays.indexOf(start.getDay()) >= 0;\n    }\n\n    return true;\n  }; // eslint-disable-next-line max-len\n\n\n  VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount, inline, cellTop, eventHeight) {\n    var _this = this;\n\n    var currentDates = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || this.dateRender[parseInt(resource.toString(), 10)];\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      this.slots[0] = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()];\n      currentDates = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]];\n    }\n\n    var record = this.splitEvent(eventObj, currentDates)[0];\n    var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n    var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n    var appWidth = 0;\n    var topValue = 1;\n    var isDateRange = currentDates[0].getTime() <= eStart.getTime() && addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n\n    if (eStart <= eEnd && isDateRange && this.isWorkDayAvailable(resource, eStart)) {\n      var isAlreadyRendered = [];\n\n      if (this.renderedAllDayEvents[parseInt(resource.toString(), 10)]) {\n        isAlreadyRendered = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (event) {\n          return event.Guid === eventObj.Guid;\n        });\n\n        if (this.parent.activeViewOptions.group.byDate) {\n          isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n            return event[_this.parent.eventFields.startTime] >= currentDates[parseInt(dayIndex.toString(), 10)] && event[_this.parent.eventFields.endTime] <= addDays(new Date(+currentDates[parseInt(dayIndex.toString(), 10)]), 1);\n          });\n        }\n      }\n\n      if (isAlreadyRendered.length === 0) {\n        var allDayDifference_1 = record.data.count;\n        var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n        record.Index = allDayIndex_1;\n        this.allDayLevel = this.allDayLevel < allDayIndex_1 ? allDayIndex_1 : this.allDayLevel;\n        var widthAdjustment = record.data.isRight ? 0 : this.parent.currentView === 'Day' ? 4 : 7;\n\n        if (allDayDifference_1 >= 0) {\n          appWidth = allDayDifference_1 * 100 - widthAdjustment;\n        }\n\n        if (isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n          this.renderedAllDayEvents[parseInt(resource.toString(), 10)] = [];\n        }\n\n        this.renderedAllDayEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n        var allDayRow_1 = [].slice.call(this.element.querySelector('.' + ALLDAY_ROW_CLASS).children);\n        var wIndex_1 = this.getDayIndex(dayIndex, resource, dayCount);\n        var eventWrapper_1 = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':nth-child(' + (wIndex_1 + 1) + ')');\n        var appointmentElement_1;\n\n        if (inline) {\n          appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n        } else {\n          appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n        }\n\n        addClass([appointmentElement_1], ALLDAY_APPOINTMENT_CLASS);\n        var eventData = extend({}, record.data, null, true);\n        eventObj.data = eventData;\n        var args = {\n          data: eventObj,\n          element: appointmentElement_1,\n          cancel: false\n        };\n        this.parent.trigger(eventRendered, args, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            eventWrapper_1.appendChild(appointmentElement_1);\n            topValue += (allDayIndex_1 === 0 ? cellTop : cellTop + allDayIndex_1 * eventHeight) + 1;\n            setStyleAttribute(appointmentElement_1, {\n              'width': appWidth + '%',\n              'top': formatUnit(topValue)\n            });\n\n            if (allDayIndex_1 > 1) {\n              _this.moreEvents.push(appointmentElement_1);\n\n              for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n              }\n            }\n\n            _this.allDayElement[0].setAttribute('data-count', _this.allDayLevel.toString());\n\n            var allDayRowHeight = (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2 ? 3 * eventHeight : (_this.allDayLevel + 1) * eventHeight) + 4;\n\n            _this.setAllDayRowHeight(allDayRowHeight);\n\n            _this.addOrRemoveClass();\n\n            _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n          }\n        });\n      }\n    }\n  };\n\n  VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n    var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n    var eStart = record[this.fields.startTime];\n    var eEnd = record[this.fields.endTime];\n    var appWidth = '0%';\n    var appLeft = '0%';\n    var topValue = 0;\n    var currentDate = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n    var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n    var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n\n    if (eStart.getTime() < this.parent.minDate.getTime() || eEnd.getTime() > this.parent.maxDate.getTime()) {\n      return;\n    }\n\n    if (eStart <= eEnd && isValidEvent && this.isWorkDayAvailable(resource, eStart)) {\n      var appHeight = this.getHeight(eStart, eEnd);\n\n      if (eStart.getTime() > schedule.startHour.getTime()) {\n        topValue = this.getTopValue(eStart, dayIndex, resource);\n      }\n\n      var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n      record.Index = appIndex;\n      this.overlapList.push(record);\n\n      if (this.overlapList.length > 1) {\n        if (isNullOrUndefined(this.overlapEvents[parseInt(appIndex.toString(), 10)])) {\n          this.overlapEvents[parseInt(appIndex.toString(), 10)] = [];\n        }\n\n        this.overlapEvents[parseInt(appIndex.toString(), 10)].push(record);\n      } else {\n        this.overlapEvents = [];\n        this.overlapEvents.push([record]);\n      }\n\n      appWidth = this.getEventWidth();\n      var argsData = {\n        index: appIndex,\n        left: appLeft,\n        width: appWidth,\n        day: dayCount,\n        dayIndex: dayIndex,\n        record: record,\n        resource: resource\n      };\n      var tempData = this.adjustOverlapElements(argsData);\n      appWidth = tempData.appWidth;\n\n      if (isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)])) {\n        this.renderedEvents[parseInt(resource.toString(), 10)] = [];\n      }\n\n      this.renderedEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n      var appointmentElement = void 0;\n\n      if (inline) {\n        appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n      } else {\n        appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n      }\n\n      setStyleAttribute(appointmentElement, {\n        'width': this.parent.eventSettings.enableMaxHeight ? '100%' : tempData.appWidth,\n        'height': appHeight + 'px',\n        'top': topValue + 'px'\n      });\n      var iconHeight = appointmentElement.querySelectorAll('.' + EVENT_INDICATOR_CLASS).length * 15;\n      var maxHeight = appHeight - 40 - iconHeight;\n      var subjectElement = appointmentElement.querySelector('.' + SUBJECT_CLASS);\n\n      if (!this.parent.isAdaptive && subjectElement) {\n        subjectElement.style.maxHeight = formatUnit(maxHeight);\n      }\n\n      var index = this.getDayIndex(dayIndex, resource, dayCount);\n      var eventData = {};\n      eventData[this.fields.startTime] = eventObj[this.fields.startTime];\n      eventData[this.fields.endTime] = eventObj[this.fields.endTime];\n      record.data = eventData;\n      this.appendEvent(record, appointmentElement, index, tempData.appLeft);\n      this.wireAppointmentEvents(appointmentElement, eventObj);\n    }\n  };\n\n  VerticalEvent.prototype.getEventWidth = function () {\n    var width = this.parent.currentView === 'Day' ? 97 : 94;\n    var tempWidth = (width - this.overlapEvents.length) / this.overlapEvents.length;\n    return (tempWidth < 0 ? 0 : tempWidth) + '%';\n  };\n\n  VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n    var tempLeft = (parseFloat(appWidth) + 1) * index;\n    return (tempLeft > 99 ? 99 : tempLeft) + '%';\n  };\n\n  VerticalEvent.prototype.getTopValue = function (date, day, resource) {\n    var startEndHours = getStartEndHours(resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]), this.startHour, this.endHour);\n    var startHour = startEndHours.startHour;\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return this.parent.activeViewOptions.timeScale.enable ? diffInMinutes * this.cellHeight * this.slotCount / this.interval : 0;\n  };\n\n  VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n    var _this = this;\n\n    var fieldMapping = this.parent.eventFields;\n    var eventsList = [];\n    var appIndex = -1;\n    this.overlapEvents = [];\n\n    if (isAllDay) {\n      if (!isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n        var date_1 = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)].getTime()));\n        eventsList = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (app) {\n          return resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() && resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n        });\n\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          eventsList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], eventsList);\n        }\n      }\n    } else {\n      var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)]) ? this.renderedEvents[parseInt(resource.toString(), 10)] : [];\n      var appointment_1 = [];\n      var recordStart_1 = record[fieldMapping.startTime];\n      var recordEnd_1 = record[fieldMapping.endTime];\n      this.overlapList = appointmentList_1.filter(function (data) {\n        return data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1 || data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1 || data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() && data[fieldMapping.startTime].getTime() === recordStart_1.getTime() && data[fieldMapping.endTime] < recordEnd_1;\n      });\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.overlapList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], this.overlapList);\n      }\n\n      this.overlapList.forEach(function (obj) {\n        var filterList = appointmentList_1.filter(function (data) {\n          return data[fieldMapping.endTime] > obj[fieldMapping.startTime] && data[fieldMapping.startTime] <= obj[fieldMapping.endTime];\n        });\n\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          filterList = _this.filterEventsByResource(_this.resources[parseInt(resource.toString(), 10)], filterList);\n        }\n\n        var collection = filterList.filter(function (val) {\n          return _this.overlapList.indexOf(val) === -1;\n        });\n\n        if (collection.length > 0) {\n          appointment_1 = appointment_1.concat(collection);\n        }\n      });\n\n      for (var i = 0; i < appointment_1.length - 1; i++) {\n        for (var j = i + 1; j < appointment_1.length; j++) {\n          if (appointment_1[parseInt(i.toString(), 10)][fieldMapping.id] === appointment_1[parseInt(j.toString(), 10)][fieldMapping.id]) {\n            appointment_1.splice(j, 1);\n            j--;\n          }\n        }\n      }\n\n      this.overlapList = this.overlapList.concat(appointment_1);\n      eventsList = this.overlapList;\n\n      for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n        var event_4 = eventsList_1[_i];\n        var record_1 = event_4;\n        var index = record_1.Index;\n\n        if (isNullOrUndefined(this.overlapEvents[parseInt(index.toString(), 10)])) {\n          this.overlapEvents[parseInt(index.toString(), 10)] = [event_4];\n        } else {\n          this.overlapEvents[parseInt(index.toString(), 10)].push(event_4);\n        }\n      }\n    }\n\n    if (!isAllDay) {\n      eventsList = eventsList.filter(function (obj) {\n        return obj[fieldMapping.startTime] === record[fieldMapping.startTime] && obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] && obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime] && obj[fieldMapping.startTime] === record[fieldMapping.endTime] || obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime() || obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() || obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime();\n      });\n    }\n\n    if (eventsList.length > 0) {\n      var appLevel = eventsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n\n    return appIndex === -1 ? 0 : appIndex;\n  };\n\n  VerticalEvent.prototype.adjustOverlapElements = function (args) {\n    var data = {\n      appWidth: args.width,\n      appLeft: args.left\n    };\n\n    for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n      if (!isNullOrUndefined(this.overlapEvents[parseInt(i.toString(), 10)])) {\n        for (var j = 0, length2 = this.overlapEvents[parseInt(i.toString(), 10)].length; j < length2; j++) {\n          var dayCount = this.getDayIndex(args.dayIndex, args.resource, args.day);\n          var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n\n          if (element && element.childElementCount > 0) {\n            var eleGuid = this.overlapEvents[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)].Guid;\n\n            if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n              var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n\n              if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                if (this.parent.enableRtl) {\n                  apps.style.right = this.getEventLeft(args.width, i);\n                } else {\n                  apps.style.left = this.getEventLeft(args.width, i);\n                }\n\n                apps.style.width = parseFloat(args.width) + '%';\n                data.appWidth = apps.style.width;\n              } else {\n                data.appWidth = apps.style.width;\n              }\n            } else {\n              var appWidth = args.width;\n\n              if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                appWidth = this.getEventWidth();\n              }\n\n              data.appWidth = appWidth;\n              data.appLeft = this.getEventLeft(appWidth, args.index);\n            }\n          }\n        }\n      }\n    }\n\n    return data;\n  };\n\n  VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n    var dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n\n    if (this.parent.height === 'auto' || !this.parent.enableAllDayScroll) {\n      addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n    }\n\n    var allDayRow = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n    allDayRow.style.height = '';\n\n    if (this.parent.uiStateValues.expand && this.parent.height !== 'auto' && this.parent.enableAllDayScroll) {\n      allDayRow.style.height = height / 12 + 'em';\n      this.parent.eventBase.allDayExpandScroll(dateHeader);\n    } else {\n      for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n        var element = _a[_i];\n        element.style.height = height / 12 + 'em';\n      }\n\n      removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n    }\n  };\n\n  VerticalEvent.prototype.addOrRemoveClass = function () {\n    var _this = this;\n\n    this.moreEvents.filter(function (element) {\n      if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n        addClass([element], EVENT_COUNT_CLASS);\n        element.setAttribute('tabindex', '-1');\n      } else {\n        removeClass([element], EVENT_COUNT_CLASS);\n        element.setAttribute('tabindex', '0');\n      }\n    });\n    var moreEventCount = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n\n    if (this.parent.uiStateValues.expand) {\n      removeClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n      addClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n    } else {\n      removeClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n      addClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n    }\n\n    if (this.allDayLevel > 2) {\n      removeClass([moreEventCount], DISABLE_CLASS);\n    } else {\n      addClass([moreEventCount], DISABLE_CLASS);\n    }\n\n    var countCell = [].slice.call(this.element.querySelectorAll('.' + ROW_COUNT_WRAPPER_CLASS));\n    countCell.forEach(function (element) {\n      if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n        removeClass([element], DISABLE_CLASS);\n      } else {\n        addClass([element], DISABLE_CLASS);\n      }\n    });\n  };\n\n  VerticalEvent.prototype.getEventHeight = function () {\n    var eventElement = createElement('div', {\n      className: APPOINTMENT_CLASS,\n      styles: 'visibility:hidden'\n    });\n    var eventWrapper = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n    eventWrapper.appendChild(eventElement);\n    var height = eventElement.offsetHeight;\n    remove(eventElement);\n    return height;\n  };\n\n  VerticalEvent.prototype.rowExpandCollapse = function () {\n    var target = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n    this.parent.uiStateValues.expand = target.classList.contains(APPOINTMENT_ROW_EXPAND_CLASS);\n    var rowHeight;\n\n    if (this.parent.uiStateValues.expand) {\n      target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n      target.setAttribute('aria-label', 'Collapse section');\n      rowHeight = (this.allDayLevel + 1) * this.getEventHeight() + 4;\n    } else {\n      target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n      target.setAttribute('aria-label', 'Expand section');\n      rowHeight = 3 * this.getEventHeight() + 4;\n      this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS).scrollTop = 0;\n    }\n\n    this.setAllDayRowHeight(rowHeight);\n    this.animation.animate(this.allDayElement[0]);\n    this.addOrRemoveClass();\n    this.animation.animate(target);\n  };\n\n  VerticalEvent.prototype.animationUiUpdate = function () {\n    this.parent.notify(contentReady, {});\n  };\n\n  VerticalEvent.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeEventListener();\n    this.allDayElement = null;\n    this.renderedAllDayEvents = null;\n    this.renderedEvents = null;\n    this.slotCount = null;\n    this.interval = null;\n    this.startHour = null;\n    this.endHour = null;\n    this.element = null;\n    this.fields = null;\n    this.animation = null;\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return VerticalEvent;\n}(EventBase);\n\nvar __extends$2 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\n\nvar MonthEvent =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$2(MonthEvent, _super);\n\n  function MonthEvent(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.renderedEvents = [];\n    _this.monthHeaderHeight = 0;\n    _this.moreIndicatorHeight = 19;\n    _this.renderType = 'day';\n    _this.element = _this.parent.activeView.getPanel();\n    _this.fields = _this.parent.eventFields;\n    _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;\n    _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;\n    _this.maxOrIndicator = _this.maxHeight || _this.withIndicator;\n    _this.moreIndicatorHeight = _this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace ? 0 : _this.moreIndicatorHeight;\n\n    _this.addEventListener();\n\n    return _this;\n  }\n\n  MonthEvent.prototype.removeEventWrapper = function (appElement) {\n    if (appElement.length > 0) {\n      appElement = this.parent.currentView === 'Month' || !this.parent.activeView.isTimelineView() && !this.parent.activeViewOptions.timeScale.enable ? appElement : [appElement[0]];\n\n      for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n        var wrap = appElement_1[_i];\n\n        if (wrap.parentElement && wrap.parentElement.parentNode) {\n          remove(wrap.parentElement);\n        }\n      }\n    }\n  };\n\n  MonthEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n\n    this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n    var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n    if (this.parent.rowAutoHeight) {\n      this.parent.uiStateValues.top = conWrap.scrollTop;\n      this.parent.uiStateValues.left = conWrap.scrollLeft;\n    }\n\n    var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n        this.removeEventWrapper(appElement);\n\n        if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n          var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n          this.removeEventWrapper(ele);\n        }\n      }\n    } else {\n      for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n        var wrap = appointmentWrapper_1[_i];\n        remove(wrap);\n      }\n    }\n\n    this.removeHeightProperty(CONTENT_TABLE_CLASS);\n\n    if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n      return;\n    }\n\n    if (this.parent.currentView === 'Month') {\n      var wrapper = createElement('div', {\n        className: APPOINTMENT_WRAPPER_CLASS\n      });\n      var cellTd = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n      cellTd.appendChild(wrapper);\n      this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n      cellTd.removeChild(wrapper);\n    }\n\n    this.eventHeight = getElementHeightFromClass(this.element, APPOINTMENT_CLASS);\n    var scrollTop = conWrap.scrollTop;\n\n    if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll && !isNullOrUndefined(this.parent.currentAction)) {\n      conWrap.scrollTop = conWrap.scrollTop - 1;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.renderResourceEvents();\n\n      if (this.parent.virtualScrollModule) {\n        this.parent.virtualScrollModule.updateFocusedWorkCell();\n      }\n    } else {\n      this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n    }\n\n    if (this.parent.rowAutoHeight) {\n      this.updateBlockElements();\n      var data = {\n        cssProperties: this.parent.getCssProperties(),\n        module: this.parent.getModuleName(),\n        isPreventScrollUpdate: true,\n        scrollPosition: {\n          left: this.parent.uiStateValues.left,\n          top: this.parent.uiStateValues.top\n        }\n      };\n\n      if (this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll) {\n        if (this.parent.currentAction) {\n          conWrap.scrollTop = scrollTop;\n          this.parent.currentAction = null;\n        } else {\n          this.parent.virtualScrollModule.updateVirtualScrollHeight();\n        }\n      }\n\n      if (!this.parent.enablePersistence) {\n        this.parent.notify(contentReady, {});\n      }\n\n      this.parent.notify(scrollUiUpdate, data);\n\n      if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n        var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n        var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + WEEK_NUMBER_CLASS));\n        weekNumberCells.forEach(function (cell, i) {\n          var height = totalCells_1[parseInt(i.toString(), 10)].offsetHeight;\n          setStyleAttribute(cell, {\n            'height': height + 'px'\n          });\n        });\n        this.parent.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS).scrollTop = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop;\n      }\n    }\n\n    this.parent.renderTemplates();\n  };\n\n  MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n    this.renderedEvents = [];\n    var eventsList;\n    var blockList;\n    var resIndex = 0;\n\n    if (resData) {\n      resIndex = resData.groupIndex;\n      this.cssClass = resData.cssClass;\n      this.groupOrder = resData.groupOrder;\n      eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n      blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n      this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n    } else {\n      eventsList = this.parent.eventsProcessed;\n      blockList = this.parent.blockProcessed;\n      this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n    }\n\n    this.sortByDateTime(eventsList);\n    this.sortByDateTime(blockList);\n\n    if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n      var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n      var height_1 = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS).clientHeight / totalCells.length;\n      totalCells.forEach(function (cell) {\n        setStyleAttribute(cell, {\n          'height': height_1 + 'px'\n        });\n      });\n    }\n\n    var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ? 0 : this.workCells.length - 1].getBoundingClientRect();\n    this.cellWidth = cellDetail.width;\n    this.cellHeight = cellDetail.height;\n    this.dateRender = dateRender;\n    var filteredDates = this.getRenderedDates(dateRender);\n    this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);\n    this.processBlockEvents(blockList, resIndex, resData);\n    var events = [];\n\n    for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n      var event_1 = eventsList_1[_i];\n\n      if (this.parent.resourceBase && !resData) {\n        this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n      }\n\n      events = events.concat(this.splitEvent(event_1, filteredDates || this.dateRender));\n    }\n\n    for (var level = 0; level < this.slots.length; level++) {\n      this.renderedEvents = [];\n      var slot = this.slots[parseInt(level.toString(), 10)];\n      var endDate = addDays(new Date(slot[slot.length - 1]), 1);\n      var spannedEvents = this.filterEvents(new Date(slot[0]), endDate, events);\n\n      for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n        var event_2 = spannedEvents_1[_a];\n\n        if (this.maxHeight) {\n          var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] : this.getStartTime(event_2, event_2.data);\n\n          if (this.getIndex(sDate) > 0) {\n            continue;\n          }\n        }\n\n        this.updateIndicatorIcon(event_2);\n        this.renderEvents(event_2, resIndex, eventsList);\n      }\n    }\n\n    this.cssClass = null;\n    this.groupOrder = null;\n  };\n\n  MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n    for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n      var event_3 = blockEvents_1[_i];\n\n      if (this.parent.resourceBase && !resData) {\n        this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n      }\n\n      var blockSpannedList = [];\n\n      if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n        var temp = extend({}, event_3, null, true);\n        var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n        temp.isBlockIcon = isSameDate;\n\n        if (!isSameDate && getDateInMs(temp[this.fields.startTime]) > 0) {\n          var e = extend({}, event_3, null, true);\n          e[this.fields.endTime] = addDays(resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n          e.isBlockIcon = true;\n          temp[this.fields.startTime] = e[this.fields.endTime];\n          blockSpannedList.push(e);\n        }\n\n        isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n\n        if (!isSameDate && getDateInMs(temp[this.fields.endTime]) > 0) {\n          var e = extend({}, event_3, null, true);\n          e[this.fields.startTime] = resetTime(new Date(event_3[this.fields.endTime] + ''));\n          e.isBlockIcon = true;\n          blockSpannedList.push(e);\n          temp[this.fields.endTime] = e[this.fields.startTime];\n        }\n\n        blockSpannedList.push(temp);\n      } else {\n        blockSpannedList.push(event_3);\n      }\n\n      for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n        var blockEvent = blockSpannedList_1[_a];\n        var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n\n        for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {\n          var event_4 = spannedEvents_2[_b];\n          this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n        }\n      }\n    }\n  };\n\n  MonthEvent.prototype.isSameDate = function (start, end) {\n    return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n  };\n\n  MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n    var eventData = event.data;\n    var startTime = this.getStartTime(event, eventData);\n    var endTime = this.getEndTime(event, eventData);\n    var day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n\n    if (day < 0 || startTime > endTime) {\n      return;\n    }\n\n    var cellTd = this.getCellTd(day);\n    var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n\n    if (!isIcon) {\n      var diffInDays = eventData.count;\n      var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n      appWidth = appWidth <= 0 ? this.cellWidth : appWidth;\n      var appLeft = this.parent.enableRtl ? 0 : position;\n      var appRight = this.parent.enableRtl ? position : 0;\n      var appHeight = this.cellHeight - this.monthHeaderHeight;\n      var appTop = this.getRowTop(resIndex);\n      var blockElement = this.createBlockAppointmentElement(event, resIndex, this.isResourceEventTemplate);\n      setStyleAttribute(blockElement, {\n        'width': appWidth + 'px',\n        'height': appHeight + 'px',\n        'left': appLeft + 'px',\n        'right': appRight + 'px',\n        'top': appTop + 'px'\n      });\n      this.renderEventElement(event, blockElement, cellTd);\n    } else {\n      this.renderBlockIndicator(cellTd, position, resIndex);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n    var blockIndicator = createElement('div', {\n      className: 'e-icons ' + BLOCK_INDICATOR_CLASS\n    });\n\n    if (isNullOrUndefined(cellTd.querySelector('.' + BLOCK_INDICATOR_CLASS))) {\n      cellTd.appendChild(blockIndicator);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MonthEvent.prototype.getStartTime = function (event, eventData) {\n    return event[this.fields.startTime];\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MonthEvent.prototype.getEndTime = function (event, eventData) {\n    return event[this.fields.endTime];\n  };\n\n  MonthEvent.prototype.getCellTd = function (day) {\n    return this.workCells[parseInt(day.toString(), 10)];\n  };\n\n  MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n    return count * this.cellWidth - 1;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n    return 0;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MonthEvent.prototype.getRowTop = function (resIndex) {\n    return 0;\n  };\n\n  MonthEvent.prototype.updateIndicatorIcon = function (event) {\n    if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth' || event[this.fields.isAllDay]) {\n      return;\n    }\n\n    var cloneData = event.data;\n    var start = this.parent.activeView.getStartHour();\n    var end = this.parent.activeView.getEndHour();\n    var startHour = getStartEndHours(event[this.fields.startTime], start, end);\n    var endHour = getStartEndHours(event[this.fields.endTime], start, end);\n    var actualStartTime = cloneData[this.fields.startTime];\n    var actualEndTime = cloneData[this.fields.endTime];\n    cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n    cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n\n    if (resetTime(actualStartTime).getTime() !== resetTime(actualEndTime).getTime()) {\n      var actualStartHour = startHour.startHour;\n      var actualEndHour = endHour.endHour;\n      var startTime = new Date(resetTime(actualStartTime));\n      startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n      cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ? startTime.getTime() : addDays(startTime, 1).getTime());\n\n      if (actualEndTime.getTime() !== resetTime(actualEndTime).getTime()) {\n        var endTime = new Date(resetTime(actualEndTime));\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <= endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n      }\n    }\n  };\n\n  MonthEvent.prototype.renderResourceEvents = function () {\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.renderedResources;\n\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var sourceRes = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n        this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n\n        if (this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n          var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n          this.renderEventsHandler(target.renderDates, target.workDays, target);\n        }\n      }\n\n      this.parent.crudModule.crudObj.isCrudAction = false;\n    } else {\n      for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n        var slotData = resources_1[_i];\n        this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n      }\n    }\n  };\n\n  MonthEvent.prototype.getSlotDates = function (workDays) {\n    this.slots = [];\n    var dates = this.dateRender.map(function (date) {\n      return +date;\n    });\n    var noOfDays = !this.parent.activeViewOptions.showWeekend || this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays ? workDays.length : WEEK_LENGTH;\n\n    while (dates.length > 0) {\n      this.slots.push(dates.splice(0, noOfDays));\n    }\n  };\n\n  MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n    if (isCloneElement === void 0) {\n      isCloneElement = false;\n    }\n\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var newRecord = extend({}, record, record.data, true);\n    var attrs = {\n      'data-id': 'Appointment_' + record[this.fields.id],\n      'role': 'button',\n      'tabindex': '0',\n      'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n      'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n    };\n\n    if (!isCloneElement) {\n      attrs['data-guid'] = record.Guid;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      attrs['data-group-index'] = resIndex.toString();\n    }\n\n    var appointmentWrapper = createElement('div', {\n      className: APPOINTMENT_CLASS,\n      attrs: attrs\n    });\n\n    if (!isNullOrUndefined(this.cssClass)) {\n      addClass([appointmentWrapper], this.cssClass);\n    }\n\n    if (record[this.fields.isReadonly]) {\n      addClass([appointmentWrapper], 'e-read-only');\n    }\n\n    var appointmentDetails = createElement('div', {\n      className: APPOINTMENT_DETAILS\n    });\n    appointmentWrapper.appendChild(appointmentDetails);\n    var templateElement;\n    var eventData = record.data;\n    var eventObj = this.getEventData(record);\n\n    if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.eventTemplateName;\n      var templateId = scheduleId + viewName + 'eventTemplate';\n      var eventTemplate = 'eventTemplate' + (this.isResourceEventTemplate ? '_' + resIndex : '');\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false);\n    } else {\n      var eventLocation = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var appointmentSubject = createElement('div', {\n        className: SUBJECT_CLASS\n      });\n      this.parent.sanitize(eventSubject + (eventLocation ? '; ' + eventLocation : ''), appointmentSubject);\n      var appointmentStartTime = createElement('div', {\n        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n      });\n      var appointmentEndTime = createElement('div', {\n        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n      });\n\n      if (this.parent.currentView === 'Month') {\n        if (record[this.fields.isAllDay]) {\n          templateElement = [appointmentSubject];\n          addClass([appointmentSubject], 'e-text-center');\n        } else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n          templateElement = [appointmentStartTime, appointmentSubject];\n        } else {\n          templateElement = [];\n          addClass([appointmentSubject], 'e-text-center');\n\n          if (!eventData.isLeft) {\n            templateElement.push(appointmentStartTime);\n          }\n\n          templateElement.push(appointmentSubject);\n\n          if (!eventData.isRight) {\n            templateElement.push(appointmentEndTime);\n          }\n        }\n      } else {\n        var innerElement = void 0;\n\n        if (record[this.fields.isAllDay]) {\n          var allDayString = createElement('div', {\n            className: APPOINTMENT_TIME,\n            innerHTML: this.parent.localeObj.getConstant('allDay')\n          });\n          innerElement = [appointmentSubject, allDayString];\n        } else {\n          var timeString = this.parent.getTimeString(eventData[this.fields.startTime]) + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n          var appTime = createElement('div', {\n            className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n            innerHTML: timeString\n          });\n          var appLocation = createElement('div', {\n            className: LOCATION_CLASS\n          });\n          this.parent.sanitize(eventLocation, appLocation);\n          innerElement = [appointmentSubject, appTime, appLocation];\n        }\n\n        var wrap = createElement('div', {\n          className: 'e-inner-wrap'\n        });\n        append(innerElement, wrap);\n        templateElement = [wrap];\n      }\n    }\n\n    append(templateElement, appointmentDetails);\n    this.appendEventIcons(record, appointmentDetails);\n    this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n    return appointmentWrapper;\n  };\n\n  MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n    var eventData = record.data;\n\n    if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n      var iconClass = record[this.fields.id] === record[this.fields.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n      appointmentDetails.appendChild(createElement('div', {\n        className: ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : '')\n      }));\n    }\n\n    if (eventData.isLeft) {\n      var iconLeft = createElement('div', {\n        className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_LEFT_CLASS\n      });\n      prepend([iconLeft], appointmentDetails);\n    }\n\n    if (eventData.isRight) {\n      var iconRight = createElement('div', {\n        className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_RIGHT_CLASS\n      });\n      append([iconRight], appointmentDetails);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n    var startTime = event[this.fields.startTime];\n    var endTime = event[this.fields.endTime];\n    var day = this.parent.getIndexOfDate(this.dateRender, resetTime(startTime));\n\n    if (day < 0 || startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {\n      return;\n    }\n\n    var overlapCount = this.getIndex(startTime);\n    event.Index = overlapCount;\n    var diffInDays = event.data.count;\n\n    if (startTime.getTime() <= endTime.getTime()) {\n      var appWidth = diffInDays * this.cellWidth - 5;\n      var cellTd = this.workCells[parseInt(day.toString(), 10)];\n      var appTop = overlapCount * (this.eventHeight + EVENT_GAP);\n      var height = this.monthHeaderHeight + (overlapCount + 1) * (this.eventHeight + EVENT_GAP) + this.moreIndicatorHeight;\n      var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n\n      if (this.parent.rowAutoHeight || enableAppRender) {\n        this.renderedEvents.push(extend({}, event, null, true));\n        var appointmentElement = void 0;\n\n        if (this.inlineValue) {\n          appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n        } else {\n          appointmentElement = this.createAppointmentElement(event, resIndex);\n        }\n\n        this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n        this.wireAppointmentEvents(appointmentElement, event);\n        setStyleAttribute(appointmentElement, {\n          'width': appWidth + 'px',\n          'top': appTop + 'px'\n        });\n        this.renderEventElement(event, appointmentElement, cellTd);\n\n        if (this.parent.rowAutoHeight) {\n          var firstChild = cellTd.parentElement.firstElementChild;\n          this.updateCellHeight(firstChild, height);\n        }\n      } else {\n        for (var i = 0; i < diffInDays; i++) {\n          if (this.workCells[day + i]) {\n            var indicator = this.workCells[day + i].querySelector('.' + MORE_INDICATOR_CLASS);\n\n            if (indicator) {\n              var count = parseInt(indicator.getAttribute('data-count'), 10) + 1;\n              indicator.setAttribute('data-count', count.toString());\n              indicator.innerHTML = this.getMoreIndicatorText(count);\n            } else {\n              var startDate = new Date(this.dateRender[day + i].getTime());\n              var endDate = addDays(this.dateRender[day + i], 1);\n              var groupIndex = this.workCells[day + i].getAttribute('data-group-index');\n              var moreIndicatorElement = this.getMoreIndicatorElement(1, startDate, endDate);\n\n              if (!isNullOrUndefined(groupIndex)) {\n                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n              }\n\n              moreIndicatorElement.style.top = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight + 'px';\n              moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n              this.renderElement(this.workCells[day + i], moreIndicatorElement);\n              EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  MonthEvent.prototype.updateCellHeight = function (cell, height) {\n    if (height > cell.offsetHeight) {\n      setStyleAttribute(cell, {\n        'height': height + 'px'\n      });\n    }\n  };\n\n  MonthEvent.prototype.updateBlockElements = function () {\n    var blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n\n    for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n      var element = blockElement_1[_i];\n      var target = closest(element, 'tr');\n      this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n      element.style.height = target.offsetHeight - 1 - this.monthHeaderHeight + 'px';\n      var firstChild = target.firstElementChild;\n      var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n      element.style.width = firstChild.offsetWidth * width + 'px';\n    }\n  }; // eslint-disable-next-line max-len\n\n\n  MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n    var filteredEvents;\n\n    if (isNullOrUndefined(groupIndex)) {\n      filteredEvents = this.filterEvents(startDate, endDate);\n    } else {\n      var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n      filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n    }\n\n    return filteredEvents;\n  };\n\n  MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateTime = resetTime(date).getTime();\n\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n\n      if (resetTime(app[this.fields.startTime]).getTime() <= dateTime && resetTime(app[this.fields.endTime]).getTime() >= dateTime) {\n        appointmentsList.push(app);\n      }\n    }\n\n    return appointmentsList;\n  };\n\n  MonthEvent.prototype.getIndex = function (date) {\n    var appIndex = -1;\n    var appointments = this.renderedEvents;\n\n    if (appointments.length > 0) {\n      var appointmentsList = this.getOverlapEvents(date, appointments);\n      var appLevel = appointmentsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n\n    return appIndex === -1 ? 0 : appIndex;\n  };\n\n  MonthEvent.prototype.moreIndicatorClick = function (event) {\n    var _this = this;\n\n    var target = closest(event.target, '.' + MORE_INDICATOR_CLASS);\n    var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n    var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n    var groupIndex = target.getAttribute('data-group-index');\n    var moreArgs = {\n      cancel: false,\n      event: event,\n      element: target,\n      isPopupOpen: true,\n      startTime: startDate,\n      endTime: endDate,\n      viewName: this.parent.getNavigateView()\n    };\n\n    if (groupIndex) {\n      moreArgs.groupIndex = parseInt(groupIndex, 10);\n    }\n\n    this.parent.trigger(moreEventsClick, moreArgs, function (clickArgs) {\n      if (!clickArgs.cancel) {\n        if (clickArgs.isPopupOpen) {\n          var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n\n          var moreArgs_1 = {\n            date: startDate,\n            event: filteredEvents,\n            element: event.target\n          };\n\n          _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n        } else {\n          _this.parent.setProperties({\n            selectedDate: startDate\n          }, true);\n\n          _this.parent.changeView(clickArgs.viewName, event);\n        }\n      }\n    });\n  };\n\n  MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n    var _this = this;\n\n    var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n    var isAppointment = appointmentElement.classList.contains(APPOINTMENT_CLASS);\n    var eventObj = this.getEventData(event);\n    var args = {\n      data: eventObj,\n      element: appointmentElement,\n      cancel: false,\n      type: eventType\n    };\n    this.parent.trigger(eventRendered, args, function (eventArgs) {\n      if (eventArgs.cancel) {\n        _this.renderedEvents.pop();\n      } else {\n        _this.renderElement(cellTd, appointmentElement, isAppointment);\n      }\n    });\n  };\n\n  MonthEvent.prototype.getEventData = function (event) {\n    var eventObj = extend({}, event, null, true);\n    eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n    eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n    return eventObj;\n  };\n\n  MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n    if (isAppointment === void 0) {\n      isAppointment = false;\n    }\n\n    if (this.maxOrIndicator && isAppointment) {\n      this.setMaxEventHeight(element, cellTd);\n    }\n\n    var wrapperEle = cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n    if (wrapperEle) {\n      wrapperEle.appendChild(element);\n    } else {\n      var wrapper = createElement('div', {\n        className: APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(element);\n      cellTd.appendChild(wrapper);\n    }\n  };\n\n  MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n    var moreIndicatorElement = createElement('div', {\n      className: MORE_INDICATOR_CLASS,\n      innerHTML: this.getMoreIndicatorText(count),\n      attrs: {\n        'tabindex': '0',\n        'data-count': count.toString(),\n        'data-start-date': startDate.getTime().toString(),\n        'data-end-date': endDate.getTime().toString()\n      }\n    });\n    return moreIndicatorElement;\n  };\n\n  MonthEvent.prototype.getMoreIndicatorText = function (count) {\n    return '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n  };\n\n  MonthEvent.prototype.removeHeightProperty = function (selector) {\n    var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n\n  MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n    var headerHeight = getOuterHeight(cell.querySelector('.' + DATE_HEADER_CLASS));\n    var height = cell.offsetHeight - headerHeight - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n    setStyleAttribute(event, {\n      'height': height + 'px',\n      'align-items': 'center'\n    });\n  };\n\n  MonthEvent.prototype.destroy = function () {\n    this.element = null;\n    this.fields = null;\n    this.maxHeight = null;\n    this.withIndicator = null;\n    this.maxOrIndicator = null;\n    this.moreIndicatorHeight = null;\n    this.removeEventListener();\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return MonthEvent;\n}(EventBase);\n\nvar __extends$3 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable max-len */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_GAP$1 = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\n\nvar TimelineEvent =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$3(TimelineEvent, _super);\n\n  function TimelineEvent(parent, type) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.startHour = _this.parent.activeView.getStartHour();\n    _this.endHour = _this.parent.activeView.getEndHour();\n    _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n    _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n    _this.day = 0;\n    _this.rowIndex = 0;\n    _this.cellTops = [];\n    _this.renderType = type;\n    _this.eventContainers = [].slice.call(_this.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n    var tr = [].slice.call(_this.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr'));\n    _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n    _this.content = _this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n    return _this;\n  }\n\n  TimelineEvent.prototype.getSlotDates = function () {\n    this.slots = [];\n    this.slots.push(this.parent.activeView.renderDates.map(function (date) {\n      return +date;\n    }));\n\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      this.renderType = 'day';\n      var workCell = this.content.querySelector('.' + WORK_CELLS_CLASS);\n      this.cellWidth = workCell.getBoundingClientRect().width / +(workCell.getAttribute('colspan') || 1);\n      this.slotsPerDay = 1;\n    } else {\n      this.slotsPerDay = this.dayLength / this.dateRender.length;\n    }\n  };\n\n  TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n\n    if (this.renderType === 'day') {\n      for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n        var app = appointments_1[_i];\n\n        if (resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(date.getTime())).getTime() && resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(date.getTime())).getTime()) {\n          appointmentsList.push(app);\n        }\n      }\n    } else {\n      for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n        var app = appointments_2[_a];\n        var eventData = app.data;\n\n        if (eventData.trimStartTime.getTime() <= date.getTime() && eventData.trimEndTime.getTime() > date.getTime()) {\n          appointmentsList.push(app);\n        }\n      }\n    }\n\n    return appointmentsList;\n  };\n\n  TimelineEvent.prototype.getSortComparerIndex = function (startDate, endDate) {\n    var appIndex = -1;\n    var appointments = this.renderedEvents;\n\n    if (appointments.length > 0) {\n      var appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);\n      var appLevel = appointmentsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n\n    return appIndex === -1 ? 0 : appIndex;\n  };\n\n  TimelineEvent.prototype.getOverlapSortComparerEvents = function (startDate, endDate, appointmentsCollection) {\n    var appointments = [];\n\n    for (var _i = 0, appointmentsCollection_1 = appointmentsCollection; _i < appointmentsCollection_1.length; _i++) {\n      var app = appointmentsCollection_1[_i];\n\n      if (this.renderType === 'day') {\n        if (resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(startDate.getTime())).getTime() && resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(startDate.getTime())).getTime()) {\n          appointments.push(app);\n        }\n      } else {\n        var eventData = app.data;\n\n        if (eventData.trimStartTime.getTime() <= startDate.getTime() && startDate.getTime() < eventData.trimEndTime.getTime() || startDate.getTime() <= eventData.trimStartTime.getTime() && eventData.trimStartTime.getTime() < endDate.getTime()) {\n          appointments.push(app);\n        }\n      }\n    }\n\n    return appointments;\n  };\n\n  TimelineEvent.prototype.renderResourceEvents = function () {\n    this.removeHeightProperty(RESOURCE_COLUMN_TABLE_CLASS);\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.renderedResources;\n\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var source = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n        this.rowIndex = source.groupIndex;\n        this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n\n        if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n          var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n          this.rowIndex = target.groupIndex;\n          this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n        }\n      }\n\n      this.parent.crudModule.crudObj.isCrudAction = false;\n    } else {\n      for (var i = 0; i < resources.length; i++) {\n        this.rowIndex = i;\n        this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[parseInt(i.toString(), 10)]);\n      }\n    }\n  };\n\n  TimelineEvent.prototype.renderEvents = function (event, resIndex, appointmentsList) {\n    var startTime = event[this.fields.startTime];\n    var endTime = event[this.fields.endTime];\n\n    if (startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {\n      return;\n    }\n\n    var eventData = event.data;\n    startTime = this.getStartTime(event, eventData);\n    endTime = this.getEndTime(event, eventData);\n    var startEndHours = getStartEndHours(event[this.fields.startTime], this.startHour, this.endHour);\n    var eventDates = this.updateEventMinimumDuration(startEndHours, startTime, endTime);\n    startTime = eventDates.startDate;\n    endTime = eventDates.endDate;\n    this.day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n\n    if (this.day < 0) {\n      return;\n    }\n\n    var cellTd = this.getCellTd();\n    var overlapCount = isNullOrUndefined(this.parent.eventSettings.sortComparer) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);\n    event.Index = overlapCount;\n    var appHeight = this.eventHeight;\n    var diffInDays = eventData.count;\n    var eventObj = extend({}, event, null, true);\n    eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n    eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n    var currentDate = resetTime(new Date(this.dateRender[this.day].getTime()));\n    var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n    var isValidEvent = true;\n\n    if (this.isDayProcess() || eventObj[this.fields.isAllDay]) {\n      isValidEvent = true;\n    } else {\n      isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n    }\n\n    if (startTime <= endTime && isValidEvent) {\n      var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n      appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n      var appLeft = 0;\n      var appRight = 0;\n      var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n      appWidth = appWidth <= 0 ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n\n      this.renderedEvents.push(extend({}, event, null, true));\n\n      if (isNullOrUndefined(this.cellTops[parseInt(resIndex.toString(), 10)])) {\n        this.cellTops[parseInt(resIndex.toString(), 10)] = this.getRowTop(resIndex);\n      }\n\n      var top_1 = this.cellTops[parseInt(resIndex.toString(), 10)];\n      var appTop = top_1 + (this.maxHeight ? 0 : EVENT_GAP$1) + overlapCount * (appHeight + EVENT_GAP$1);\n      appLeft = this.parent.enableRtl ? 0 : position;\n      appRight = this.parent.enableRtl ? position : 0;\n      var height = (overlapCount + 1) * (appHeight + EVENT_GAP$1) + this.moreIndicatorHeight;\n      var renderApp = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n\n      if (this.parent.rowAutoHeight || renderApp) {\n        var appointmentElement = void 0;\n\n        if (isNullOrUndefined(this.inlineValue)) {\n          appointmentElement = this.createAppointmentElement(event, resIndex);\n        } else {\n          appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n        }\n\n        this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n        setStyleAttribute(appointmentElement, {\n          'width': appWidth + 'px',\n          'left': appLeft + 'px',\n          'right': appRight + 'px',\n          'top': appTop + 'px'\n        });\n        this.wireAppointmentEvents(appointmentElement, event);\n\n        if (this.parent.rowAutoHeight) {\n          var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n          var conWidth = conWrap.getBoundingClientRect().width;\n          var isWithoutScroll = conWrap.offsetHeight === conWrap.clientHeight && conWrap.offsetWidth === conWrap.clientWidth;\n          this.renderEventElement(event, appointmentElement, cellTd);\n          var firstChild = this.getFirstChild(resIndex);\n          this.updateCellHeight(firstChild, height);\n\n          if (isWithoutScroll && (conWrap.offsetWidth > conWrap.clientWidth || conWidth !== conWrap.getBoundingClientRect().width)) {\n            this.adjustAppointments(conWidth);\n          }\n        } else {\n          this.renderEventElement(event, appointmentElement, cellTd);\n        }\n      } else {\n        for (var i = 0; i < diffInDays; i++) {\n          var moreIndicator = cellTd.querySelector('.' + MORE_INDICATOR_CLASS);\n          var appPos = this.parent.enableRtl ? appRight : appLeft;\n          appPos = Math.floor(appPos / this.cellWidth) * this.cellWidth;\n          var interval = this.interval / this.slotCount;\n          var startDate = this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' || i !== 0 ? new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);\n          var endDate = addDays(this.dateRender[this.day + i], 1);\n\n          if (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') {\n            var position_1 = this.getPosition(startDate, endDate, event[this.fields.isAllDay], this.day + i);\n            this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_1);\n          } else {\n            var slotCount = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE * this.slotCount / this.interval;\n\n            for (var k = 0; k < slotCount; k++) {\n              startDate = k === 0 ? new Date(startDate.getTime()) : new Date(startDate.getTime() + 60000 * interval);\n              endDate = new Date(startDate.getTime() + 60000 * interval);\n\n              if (endDate.getTime() > endTime.getTime()) {\n                break;\n              }\n\n              var position_2 = this.getPosition(startDate, endDate, false, this.day + i);\n\n              if (appPos > position_2) {\n                break;\n              }\n\n              appPos = position_2;\n              this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_2);\n            }\n          }\n        }\n      }\n    }\n\n    this.parent.renderTemplates();\n  };\n\n  TimelineEvent.prototype.renderTimelineMoreIndicator = function (startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {\n    appLeft = this.parent.enableRtl ? appRight = position : position;\n    appPos = this.parent.enableRtl ? appRight : appLeft;\n    appPos = Math.floor(appPos / this.cellWidth) * this.cellWidth;\n\n    if (cellTd && isNullOrUndefined(moreIndicator) || !this.isAlreadyAvail(appPos, cellTd)) {\n      var startDateTime = this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' ? new Date(+startTime) : startDate;\n      var slotStartTime = new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval));\n      var slotEndTime = new Date(slotStartTime.getTime() + 60000 * interval);\n      var groupIndex = void 0;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n        groupIndex = resIndex.toString();\n      }\n\n      var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n      var appArea = this.cellHeight - this.moreIndicatorHeight;\n      appHeight = this.withIndicator ? appArea - EVENT_GAP$1 : appHeight;\n      var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP$1));\n      var count = filterEvents.length - renderedAppCount <= 0 ? 1 : filterEvents.length - renderedAppCount;\n      var moreIndicatorElement = void 0;\n\n      if (this.renderType === 'day') {\n        moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n      } else {\n        moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n      }\n\n      if (!isNullOrUndefined(groupIndex)) {\n        moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n      }\n\n      moreIndicatorElement.style.top = top + appArea + 'px';\n      moreIndicatorElement.style.width = this.cellWidth + 'px';\n      moreIndicatorElement.style.left = Math.floor(appLeft / this.cellWidth) * this.cellWidth + 'px';\n      moreIndicatorElement.style.right = Math.floor(appRight / this.cellWidth) * this.cellWidth + 'px';\n      this.renderElement(cellTd, moreIndicatorElement);\n      EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n    }\n  };\n\n  TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n    var cellHeight = cell.style.height === '' ? this.cellHeight : parseInt(cell.style.height, 10);\n\n    if (height > cellHeight) {\n      setStyleAttribute(cell, {\n        'height': height + 'px'\n      });\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var resourceCell = this.parent.element.querySelector('.' + RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' + cell.getAttribute('data-group-index') + '\"]');\n\n        if (resourceCell) {\n          setStyleAttribute(resourceCell, {\n            'height': height + 'px'\n          });\n        }\n      }\n\n      var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' + (cell.parentElement.rowIndex + 1) + ') td');\n\n      if (monthHeader) {\n        setStyleAttribute(monthHeader, {\n          'height': height + 'px'\n        });\n      }\n    }\n  };\n\n  TimelineEvent.prototype.adjustAppointments = function (conWidth) {\n    var _this = this;\n\n    var tr = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody tr');\n    this.cellWidth = this.workCells[0].getBoundingClientRect().width;\n    var currentPercentage = this.cellWidth * tr.children.length / (conWidth / 100);\n    var apps = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n    apps.forEach(function (app) {\n      if (_this.parent.enableRtl && app.style.right !== '0px') {\n        app.style.right = parseFloat(app.style.right) / 100 * currentPercentage + 'px';\n      } else if (app.style.left !== '0px') {\n        app.style.left = parseFloat(app.style.left) / 100 * currentPercentage + 'px';\n      }\n\n      app.style.width = parseFloat(app.style.width) / 100 * currentPercentage + 'px';\n    });\n  };\n\n  TimelineEvent.prototype.getFirstChild = function (index) {\n    var query = '.' + CONTENT_TABLE_CLASS + ' tbody td';\n    var groupIndex = '';\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n    }\n\n    var td = this.parent.element.querySelector(query + groupIndex);\n    return td;\n  };\n\n  TimelineEvent.prototype.updateBlockElements = function () {\n    var blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n\n    for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n      var element = blockElement_1[_i];\n      var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n      var firstChild = this.getFirstChild(resIndex);\n      element.style.height = firstChild.offsetHeight + 'px';\n      var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n      element.style.width = firstChild.offsetWidth * width + 'px';\n    }\n\n    var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + BLOCK_INDICATOR_CLASS));\n\n    for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n      var element = blockIndicator_1[_a];\n      var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n      element.style.top = this.getRowTop(resIndex) + this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n    }\n  };\n\n  TimelineEvent.prototype.getStartTime = function (event, eventData) {\n    var startTime = event[this.fields.startTime];\n    var schedule = getStartEndHours(startTime, this.startHour, this.endHour);\n\n    if (this.isDayProcess()) {\n      startTime = event[this.fields.startTime];\n    } else {\n      if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n        startTime = schedule.startHour;\n      } else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n        startTime = this.getNextDay(schedule.startHour, eventData);\n      } else {\n        startTime = eventData[this.fields.startTime];\n      }\n    } // To overcome the overflow\n\n\n    eventData.trimStartTime = event[this.fields.isAllDay] ? schedule.startHour : eventData[this.fields.startTime];\n    return startTime;\n  };\n\n  TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n    var startDate;\n\n    for (var i = 1; i <= this.dateRender.length; i++) {\n      startDate = addDays(startTime, i);\n\n      if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n        eventData.count = eventData.count - 1;\n        return startDate;\n      }\n    }\n\n    return startDate;\n  };\n\n  TimelineEvent.prototype.getEndTime = function (event, eventData) {\n    var endTime = event[this.fields.endTime];\n    var schedule = getStartEndHours(endTime, this.startHour, this.endHour);\n\n    if (this.isDayProcess()) {\n      endTime = eventData[this.fields.endTime];\n    } else {\n      endTime = eventData[this.fields.endTime];\n\n      if (schedule.endHour.getTime() <= eventData[this.fields.endTime] || event[this.fields.isAllDay]) {\n        endTime = schedule.endHour;\n      }\n\n      if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event[this.fields.isAllDay]) {\n        endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);\n      }\n    } // To overcome the overflow\n\n\n    eventData.trimEndTime = event[this.fields.isAllDay] ? schedule.endHour : eventData[this.fields.endTime];\n    return endTime;\n  };\n\n  TimelineEvent.prototype.getPreviousDay = function (startTime, endTime, eventData) {\n    for (var i = 1; i <= this.dateRender.length; i++) {\n      var endDate = addDays(endTime, -i);\n\n      if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n        endDate = resetTime(new Date(endDate.getTime()));\n        endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());\n        var count = eventData.count;\n        var actualEndTime = eventData[this.fields.endTime];\n        eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;\n        return endDate;\n      }\n    }\n\n    return eventData[this.fields.endTime];\n  };\n\n  TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n    if (this.renderType === 'day' || isAllDay) {\n      return count * this.slotsPerDay * this.cellWidth;\n    }\n\n    if (this.isSameDay(startDate, endDate)) {\n      return this.getSameDayEventsWidth(startDate, endDate);\n    } else {\n      return this.getSpannedEventsWidth(startDate, endDate, count);\n    }\n  };\n\n  TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n    return (getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_MINUTE * (this.cellWidth * this.slotCount) / this.interval;\n  };\n\n  TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n    var width = diffInDays * this.slotsPerDay * this.cellWidth;\n    var endWidth;\n    var start = getStartEndHours(resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n    var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n\n    if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endDate.getTime()))) === -1) {\n      endWidth = 0;\n    } else {\n      var end = getStartEndHours(resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n      endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n      endWidth = this.slotsPerDay * this.cellWidth === endWidth ? 0 : endWidth;\n    }\n\n    var spannedWidth = startWidth + endWidth;\n    return width > spannedWidth ? width - spannedWidth : width - startWidth;\n  };\n\n  TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n    var startDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n    var endDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endTime.getTime())));\n    return startDay === endDay;\n  };\n\n  TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n    var slotTd = this.isSameDay(startTime, schedule.startHour) ? (getUniversalTime(startTime) - getUniversalTime(schedule.startHour)) / (MS_PER_MINUTE * this.interval) * this.slotCount : 0;\n\n    if (day === 0) {\n      return slotTd;\n    } else {\n      var daySlot = Math.round((getUniversalTime(schedule.endHour) - getUniversalTime(schedule.startHour)) / MS_PER_MINUTE / this.interval * this.slotCount);\n      return daySlot * day + slotTd;\n    }\n  };\n\n  TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n    if (this.renderType === 'day' || isAllDay) {\n      return day * this.slotsPerDay * this.cellWidth;\n    }\n\n    var currentDate = resetTime(new Date(this.dateRender[parseInt(day.toString(), 10)].getTime()));\n    var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n    var cellIndex;\n\n    if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n      cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n    } else if (schedule.endHour.getTime() <= endTime.getTime()) {\n      cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n    } else if (schedule.startHour.getTime() >= startTime.getTime()) {\n      cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n    } else {\n      cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n    }\n\n    return cellIndex * this.cellWidth;\n  };\n\n  TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex, eventsList) {\n    if (this.renderType === 'day') {\n      return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n    } else {\n      return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n    }\n  };\n\n  TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n    var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + MORE_INDICATOR_CLASS));\n\n    for (var i = 0; i < moreIndicator.length; i++) {\n      var indicatorPos = void 0;\n\n      if (moreIndicator) {\n        indicatorPos = this.parent.enableRtl ? moreIndicator[parseInt(i.toString(), 10)].style.right : moreIndicator[parseInt(i.toString(), 10)].style.left;\n      }\n\n      if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  TimelineEvent.prototype.getRowTop = function (resIndex) {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      return this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop;\n    }\n\n    return 0;\n  };\n\n  TimelineEvent.prototype.getCellTd = function () {\n    var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n    return this.eventContainers[parseInt(wrapIndex.toString(), 10)];\n  };\n\n  TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n    // No need to render block icon for Year, Month and Week header rows\n    if (this.parent.headerRows.length > 0 && (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' || this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n      return;\n    }\n\n    position = Math.floor(position / this.cellWidth) * this.cellWidth + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n\n    if (!this.isAlreadyAvail(position, cellTd)) {\n      var blockIndicator = createElement('div', {\n        className: 'e-icons ' + BLOCK_INDICATOR_CLASS\n      });\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        blockIndicator.setAttribute('data-group-index', resIndex.toString());\n      }\n\n      if (this.parent.enableRtl) {\n        blockIndicator.style.right = position + 'px';\n      } else {\n        blockIndicator.style.left = position + 'px';\n      }\n\n      blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n      this.renderElement(cellTd, blockIndicator);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  TimelineEvent.prototype.setMaxEventHeight = function (event, cell) {\n    setStyleAttribute(event, {\n      'height': this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP$1) - (this.maxHeight ? 0 : this.moreIndicatorHeight) + 'px'\n    });\n  };\n\n  TimelineEvent.prototype.isDayProcess = function () {\n    if (this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable || this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return true;\n    }\n\n    return false;\n  };\n\n  TimelineEvent.prototype.destroy = function () {\n    this.renderType = null;\n    this.eventContainers = null;\n    this.dayLength = null;\n    this.content = null;\n\n    _super.prototype.destroy.call(this);\n\n    this.parent = null;\n  };\n\n  return TimelineEvent;\n}(MonthEvent);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Inline Edit interactions\n */\n\n\nvar InlineEdit =\n/** @__PURE__ @class */\nfunction () {\n  function InlineEdit(parent) {\n    this.parent = parent;\n    this.parent.on(inlineClick, this.inlineEdit, this);\n  }\n\n  InlineEdit.prototype.inlineEdit = function (args) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    if (args.type === 'Cell') {\n      var moreWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n\n      if (moreWrapper && moreWrapper.classList.contains(POPUP_OPEN)) {\n        this.parent.quickPopup.morePopup.hide();\n      }\n\n      this.removeInlineAppointmentElement();\n      this.cellEdit(args);\n    } else {\n      if (this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS) !== args.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n        this.removeInlineAppointmentElement();\n      }\n\n      this.eventEdit(args);\n    }\n  };\n\n  InlineEdit.prototype.cellEdit = function (args) {\n    var saveObj = this.generateEventData();\n    var cellIndex = args.element.cellIndex;\n    var count = this.getEventDaysCount(saveObj);\n\n    if (count > 1) {\n      count = Math.round(count);\n      count--;\n      cellIndex = cellIndex - count;\n    }\n\n    var start = resetTime(new Date('' + saveObj[this.parent.eventFields.startTime])).getTime();\n    var end = resetTime(new Date('' + saveObj[this.parent.eventFields.endTime])).getTime();\n    var resIndex = args.groupIndex || 0;\n    var isVertical = this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek';\n\n    if (this.parent.activeViewOptions.timeScale.enable && isVertical) {\n      var dayIndex = saveObj[this.parent.eventFields.startTime].getDay();\n      this.createVerticalViewInline(saveObj, dayIndex, resIndex, cellIndex);\n    } else if (this.parent.currentView === 'Month' || !this.parent.activeViewOptions.timeScale.enable && isVertical) {\n      this.createMonthViewInline(saveObj, resIndex, start, end);\n    } else {\n      this.createTimelineViewInline(saveObj, start, end, resIndex);\n    }\n\n    var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n    if (inlineSubject) {\n      inlineSubject.focus();\n    }\n  };\n\n  InlineEdit.prototype.eventEdit = function (args) {\n    var inlineSubject = args.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n    var subject;\n\n    if (inlineSubject) {\n      subject = inlineSubject.value;\n    } else {\n      var subEle = args.element.querySelector('.' + SUBJECT_CLASS);\n\n      if (!isNullOrUndefined(subEle)) {\n        addClass([subEle], DISABLE_CLASS);\n        subject = subEle.innerText;\n      } else {\n        subject = args.data[this.parent.eventFields.subject];\n      }\n\n      inlineSubject = createElement('input', {\n        className: INLINE_SUBJECT_CLASS,\n        attrs: {\n          value: subject\n        }\n      });\n\n      if (closest(args.element, '.' + MORE_POPUP_WRAPPER_CLASS)) {\n        args.element.insertBefore(inlineSubject, subEle);\n      } else if (['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n        var subjectWrap = args.element.querySelector('.' + SUBJECT_WRAP);\n\n        if (isNullOrUndefined(subjectWrap)) {\n          subjectWrap = createElement('div', {\n            className: SUBJECT_WRAP\n          });\n          args.element.prepend(subjectWrap);\n        }\n\n        subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);\n      } else {\n        args.element.querySelector('.e-appointment-details').prepend(inlineSubject);\n      }\n\n      inlineSubject.focus();\n    }\n\n    inlineSubject.setSelectionRange(subject.length, subject.length);\n  };\n\n  InlineEdit.prototype.createVerticalViewInline = function (saveObj, dayIndex, resIndex, daysCount) {\n    var _a;\n\n    var count = this.getEventDaysCount(saveObj);\n    var verticalEvent = new VerticalEvent(this.parent);\n    verticalEvent.initializeValues();\n    var index = verticalEvent.dateRender[parseInt(resIndex.toString(), 10)].map(function (date) {\n      return date.getDay();\n    }).indexOf(dayIndex);\n\n    if (count >= 1) {\n      verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n\n      (_a = verticalEvent.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) {\n        return +date;\n      }));\n\n      var allDayElements = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_APPOINTMENT_CLASS));\n      var allDayLevel = 0;\n\n      if (allDayElements.length > 0) {\n        allDayLevel = Math.floor(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).getBoundingClientRect().height / allDayElements[0].offsetHeight) - 1;\n      }\n\n      verticalEvent.allDayLevel = allDayLevel;\n      var appHeight = getElementHeightFromClass(this.parent.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS), APPOINTMENT_CLASS);\n      var cellTop = verticalEvent.allDayElement.length > 0 ? verticalEvent.allDayElement[0].offsetTop : 0;\n      verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline, cellTop, appHeight);\n    } else {\n      verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n    }\n  };\n\n  InlineEdit.prototype.createMonthViewInline = function (saveObj, index, start, end) {\n    var count = this.getEventDaysCount(saveObj);\n    var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n    var monthEvent = new MonthEvent(this.parent);\n    monthEvent.dateRender = this.parent.activeView.renderDates;\n    monthEvent.inlineValue = this.parent.allowInline;\n    var renderDates = this.parent.activeView.renderDates;\n    var workDays = this.parent.activeViewOptions.workDays;\n    var monthCellSelector = '.' + WORK_CELLS_CLASS;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      monthCellSelector += '[data-group-index=\"' + index + '\"]';\n      var resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n      renderDates = resourceData.renderDates;\n      workDays = resourceData.workDays;\n    }\n\n    monthEvent.dateRender = renderDates;\n    monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));\n    monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;\n    monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;\n    monthEvent.eventHeight = getElementHeightFromClass(this.parent.monthModule.element || monthEvent.element, APPOINTMENT_CLASS);\n    monthEvent.getSlotDates(workDays);\n    var filteredDates = monthEvent.getRenderedDates(renderDates);\n    var spannedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);\n\n    for (var _i = 0, spannedEvents_1 = spannedEvents; _i < spannedEvents_1.length; _i++) {\n      var eventData = spannedEvents_1[_i];\n      monthEvent.renderEvents(eventData, index);\n    }\n\n    var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n    inlineSubject.focus();\n  };\n\n  InlineEdit.prototype.createTimelineViewInline = function (saveObj, start, end, resIndex) {\n    var count = this.getEventDaysCount(saveObj);\n    var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n    var timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n    timelineView.dateRender = this.parent.activeView.renderDates;\n    timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n    var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n    timelineView.inlineValue = this.parent.allowInline;\n    timelineView.cellWidth = workCell.offsetWidth;\n    timelineView.cellHeight = workCell.offsetHeight;\n    var dayLength = this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr').length === 0 ? 0 : this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n    timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;\n    timelineView.eventHeight = getElementHeightFromClass(timelineView.element, APPOINTMENT_CLASS);\n    timelineView.renderEvents(saveObject, resIndex);\n  };\n\n  InlineEdit.prototype.getEventDaysCount = function (saveObj) {\n    var startDate = saveObj[this.parent.eventFields.startTime];\n    var endDate = saveObj[this.parent.eventFields.endTime];\n    var daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n    return daysCount;\n  };\n\n  InlineEdit.prototype.generateEventData = function (target) {\n    var inlineElement = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n    var subject = inlineElement ? inlineElement.value : target ? target.innerHTML : '';\n    var saveObj = {};\n    saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n    saveObj[this.parent.eventFields.subject] = subject;\n    saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n    saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n    saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n    this.parent.eventWindow.setDefaultValueToObject(saveObj);\n\n    if (this.parent.resourceBase) {\n      this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);\n    }\n\n    return saveObj;\n  };\n\n  InlineEdit.prototype.documentClick = function () {\n    var target = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n    if (target && target.value !== '') {\n      this.inlineCrudActions(target);\n    } else {\n      this.removeInlineAppointmentElement();\n    }\n  };\n\n  InlineEdit.prototype.inlineCrudActions = function (target) {\n    if (closest(target, '.' + INLINE_APPOINTMENT_CLASS)) {\n      var saveObj = this.generateEventData(target);\n      this.parent.addEvent(saveObj);\n    } else {\n      var eventTarget = closest(target, '.' + APPOINTMENT_CLASS);\n      var eventDetails = this.parent.getEventDetails(eventTarget);\n      eventDetails[this.parent.eventFields.subject] = target.value;\n      var currentAction = void 0;\n\n      if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {\n        currentAction = 'EditOccurrence';\n        eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n      }\n\n      this.parent.saveEvent(eventDetails, currentAction);\n    }\n\n    this.removeInlineAppointmentElement();\n  };\n\n  InlineEdit.prototype.createInlineAppointmentElement = function (inlineData) {\n    var inlineAppointmentElement = createElement('div', {\n      className: APPOINTMENT_CLASS + ' ' + INLINE_APPOINTMENT_CLASS\n    });\n    var inlineDetails = createElement('div', {\n      className: APPOINTMENT_DETAILS\n    });\n    inlineAppointmentElement.appendChild(inlineDetails);\n    var inline = createElement('input', {\n      className: INLINE_SUBJECT_CLASS\n    });\n    inlineDetails.appendChild(inline);\n\n    if (inlineData) {\n      this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, 'backgroundColor');\n    }\n\n    return inlineAppointmentElement;\n  };\n\n  InlineEdit.prototype.removeInlineAppointmentElement = function () {\n    var inlineAppointment = [].slice.call(this.parent.element.querySelectorAll('.' + INLINE_APPOINTMENT_CLASS));\n\n    if (inlineAppointment.length > 0) {\n      inlineAppointment.forEach(function (node) {\n        return remove(node);\n      });\n    }\n\n    var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n    if (inlineSubject) {\n      var appointmentSubject = closest(inlineSubject, '.' + APPOINTMENT_CLASS);\n      var subject = appointmentSubject.querySelector('.' + SUBJECT_CLASS);\n\n      if (!isNullOrUndefined(subject)) {\n        removeClass([subject], DISABLE_CLASS);\n      }\n\n      remove(inlineSubject);\n    }\n  };\n\n  InlineEdit.prototype.destroy = function () {\n    this.parent.off(inlineClick, this.inlineEdit);\n  };\n\n  return InlineEdit;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Appointment window field validation\n */\n\n\nvar FieldValidator =\n/** @__PURE__ @class */\nfunction () {\n  function FieldValidator() {}\n\n  FieldValidator.prototype.renderFormValidator = function (form, rules, element, locale) {\n    var _this = this;\n\n    this.element = element;\n    this.formObj = new FormValidator(form, {\n      locale: locale,\n      customPlacement: function (inputElement, error) {\n        _this.errorPlacement(inputElement, error);\n      },\n      rules: rules,\n      validationComplete: function (args) {\n        _this.validationComplete(args);\n      },\n      focusout: function (args) {\n        _this.focusOut(args);\n      }\n    });\n  };\n\n  FieldValidator.prototype.focusOut = function (args) {\n    var target = args.relatedTarget;\n\n    if (target && (target.classList.contains('e-dlg-closeicon-btn') || target.classList.contains('e-close') || target.classList.contains(ALLDAY_CELLS_CLASS) || target.classList.contains(HEADER_CELLS_CLASS) || target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {\n      this.ignoreError = true;\n    } else {\n      this.ignoreError = false;\n    }\n  };\n\n  FieldValidator.prototype.validationComplete = function (args) {\n    var elem = this.element.querySelector('#' + args.inputName + '_Error');\n\n    if (elem) {\n      elem.style.display = args.status === 'failure' ? '' : 'none';\n    }\n  };\n\n  FieldValidator.prototype.errorPlacement = function (inputElement, error) {\n    var id = error.getAttribute('for');\n    var elem = this.element.querySelector('#' + id + '_Error');\n\n    if (!elem && !this.ignoreError) {\n      this.createTooltip(inputElement, error, id, '');\n    }\n\n    if (!isNullOrUndefined(elem)) {\n      elem.querySelector('.e-error').innerHTML = error.innerHTML;\n    }\n  };\n\n  FieldValidator.prototype.createTooltip = function (element, error, name, display) {\n    var dlgContent;\n    var client;\n    var inputClient = element.getBoundingClientRect();\n\n    if (this.element.classList.contains(POPUP_WRAPPER_CLASS)) {\n      dlgContent = this.element;\n      client = this.element.getBoundingClientRect();\n    } else {\n      dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n      client = dlgContent.getBoundingClientRect();\n    }\n\n    var div = createElement('div', {\n      className: 'e-tooltip-wrap e-popup ' + ERROR_VALIDATION_CLASS,\n      id: name + '_Error',\n      styles: 'display:' + display + ';top:' + (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' + (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n    });\n    var content = createElement('div', {\n      className: 'e-tip-content'\n    });\n    content.appendChild(error);\n    var arrow = createElement('div', {\n      className: 'e-arrow-tip e-tip-top'\n    });\n    arrow.appendChild(createElement('div', {\n      className: 'e-arrow-tip-outer e-tip-top'\n    }));\n    arrow.appendChild(createElement('div', {\n      className: 'e-arrow-tip-inner e-tip-top'\n    }));\n    div.appendChild(content);\n    div.appendChild(arrow);\n    dlgContent.appendChild(div);\n    div.style.left = parseInt(div.style.left, 10) - div.offsetWidth / 2 + 'px';\n  };\n\n  FieldValidator.prototype.destroyToolTip = function () {\n    if (this.element) {\n      var elements = [].slice.call(this.element.querySelectorAll('.' + ERROR_VALIDATION_CLASS));\n\n      for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var elem = elements_1[_i];\n        remove(elem);\n      }\n    }\n\n    if (this.formObj && this.formObj.element) {\n      this.formObj.reset();\n    }\n  };\n\n  FieldValidator.prototype.destroy = function () {\n    if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {\n      this.formObj.destroy();\n    }\n\n    this.formObj = null;\n    this.element = null;\n  };\n\n  return FieldValidator;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\n\nvar QuickPopups =\n/** @__PURE__ @class */\nfunction () {\n  function QuickPopups(parent) {\n    this.isMultipleEventSelect = false;\n    this.isCrudAction = false;\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fieldValidator = new FieldValidator();\n    this.render();\n    this.addEventListener();\n  }\n\n  QuickPopups.prototype.render = function () {\n    this.renderQuickPopup();\n    this.renderMorePopup();\n    this.renderQuickDialog();\n  };\n\n  QuickPopups.prototype.renderQuickPopup = function () {\n    var quickPopupWrapper = createElement('div', {\n      className: POPUP_WRAPPER_CLASS + ' e-popup-close'\n    });\n\n    if (this.parent.isAdaptive) {\n      document.body.appendChild(quickPopupWrapper);\n      addClass([quickPopupWrapper], DEVICE_CLASS);\n    } else {\n      this.parent.element.appendChild(quickPopupWrapper);\n    }\n\n    this.quickPopup = new Popup(quickPopupWrapper, {\n      targetType: this.parent.isAdaptive ? 'container' : 'relative',\n      enableRtl: this.parent.enableRtl,\n      open: this.quickPopupOpen.bind(this),\n      close: this.quickPopupClose.bind(this),\n      hideAnimation: this.parent.isAdaptive ? {\n        name: 'ZoomOut'\n      } : {\n        name: 'FadeOut',\n        duration: 150\n      },\n      showAnimation: this.parent.isAdaptive ? {\n        name: 'ZoomIn'\n      } : {\n        name: 'FadeIn',\n        duration: 150\n      },\n      collision: this.parent.isAdaptive ? {\n        X: 'fit',\n        Y: 'fit'\n      } : this.parent.enableRtl ? {\n        X: 'flip',\n        Y: 'fit'\n      } : {\n        X: 'none',\n        Y: 'fit'\n      },\n      position: this.parent.isAdaptive || this.parent.enableRtl ? {\n        X: 'left',\n        Y: 'top'\n      } : {\n        X: 'right',\n        Y: 'top'\n      },\n      viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n      zIndex: this.parent.isAdaptive ? 1004 : 3\n    });\n  };\n\n  QuickPopups.prototype.renderMorePopup = function () {\n    var moreEventPopup = \"<div class=\\\"\" + MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + MORE_EVENT_HEADER_CLASS + \"\\\">\" + (\"<div class=\\\"\" + MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\"></div>\") + (\"<div class=\\\"\" + MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + MORE_EVENT_HEADER_DAY_CLASS + \"\\\"></div>\") + (\"<div class=\\\"\" + MORE_EVENT_HEADER_DATE_CLASS + \" \" + NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n    var moreEventWrapper = createElement('div', {\n      className: MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n      innerHTML: moreEventPopup\n    });\n\n    if (this.parent.isAdaptive) {\n      document.body.appendChild(moreEventWrapper);\n      addClass([moreEventWrapper], DEVICE_CLASS);\n    } else {\n      this.parent.element.appendChild(moreEventWrapper);\n    }\n\n    this.morePopup = new Popup(moreEventWrapper, {\n      targetType: this.parent.isAdaptive ? 'container' : 'relative',\n      enableRtl: this.parent.enableRtl,\n      hideAnimation: {\n        name: 'ZoomOut',\n        duration: 300\n      },\n      showAnimation: {\n        name: 'ZoomIn',\n        duration: 300\n      },\n      open: this.morePopupOpen.bind(this),\n      close: this.morePopupClose.bind(this),\n      collision: this.parent.isAdaptive ? {\n        X: 'fit',\n        Y: 'fit'\n      } : this.parent.enableRtl ? {\n        X: 'flip',\n        Y: 'fit'\n      } : {\n        X: 'flip',\n        Y: 'flip'\n      },\n      viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n      zIndex: this.parent.isAdaptive ? 1002 : 2\n    });\n    var closeButton = this.morePopup.element.querySelector('.' + MORE_EVENT_CLOSE_CLASS);\n    this.renderButton('e-round', ICON + ' ' + CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n    EventHandler.add(this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n  };\n\n  QuickPopups.prototype.renderQuickDialog = function () {\n    var buttonModel = [{\n      buttonModel: {\n        cssClass: 'e-quick-alertok e-flat',\n        isPrimary: true\n      },\n      click: this.dialogButtonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-quick-alertcancel e-flat',\n        isPrimary: false\n      },\n      click: this.dialogButtonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-quick-dialog-cancel e-disable e-flat',\n        isPrimary: false\n      },\n      click: this.dialogButtonClick.bind(this)\n    }];\n\n    if (this.parent.eventSettings.editFollowingEvents) {\n      var followingSeriesButton = {\n        buttonModel: {\n          cssClass: 'e-quick-alertfollowing e-flat',\n          isPrimary: false\n        },\n        click: this.dialogButtonClick.bind(this)\n      };\n      buttonModel.splice(1, 0, followingSeriesButton);\n    }\n\n    this.quickDialog = new Dialog({\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      buttons: buttonModel,\n      cssClass: QUICK_DIALOG_CLASS,\n      closeOnEscape: true,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      beforeClose: this.beforeQuickDialogClose.bind(this),\n      isModal: true,\n      position: {\n        X: 'center',\n        Y: 'center'\n      },\n      showCloseIcon: true,\n      target: document.body,\n      visible: false,\n      width: 'auto'\n    });\n    var dialogElement = createElement('div', {\n      id: this.parent.element.id + 'QuickDialog'\n    });\n    this.parent.element.appendChild(dialogElement);\n    this.quickDialog.appendTo(dialogElement);\n    var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n    if (okButton) {\n      okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n\n    var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n    if (cancelButton) {\n      cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n      cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n\n    if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n      this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n    }\n  }; // eslint-disable-next-line max-len\n\n\n  QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n    var buttonObj = new Button({\n      cssClass: className,\n      disabled: isDisabled,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      iconCss: iconName\n    });\n    buttonObj.appendTo(element);\n    EventHandler.add(element, 'click', clickEvent, this);\n    removeClass([element], ICON);\n  };\n\n  QuickPopups.prototype.quickDialogClass = function (action) {\n    var classList$$1 = [QUICK_DIALOG_OCCURRENCE_CLASS, QUICK_DIALOG_SERIES_CLASS, QUICK_DIALOG_DELETE_CLASS, QUICK_DIALOG_CANCEL_CLASS, QUICK_DIALOG_ALERT_BTN_CLASS, DISABLE_CLASS];\n    var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n    var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n    var followingEventButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n    removeClass([okButton, cancelButton], classList$$1);\n    addClass([this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS)], DISABLE_CLASS);\n\n    if (this.parent.eventSettings.editFollowingEvents) {\n      addClass([followingEventButton], DISABLE_CLASS);\n      removeClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n    }\n\n    switch (action) {\n      case 'Recurrence':\n        addClass([okButton], QUICK_DIALOG_OCCURRENCE_CLASS);\n        addClass([cancelButton], QUICK_DIALOG_SERIES_CLASS);\n\n        if (this.parent.eventSettings.editFollowingEvents) {\n          removeClass([followingEventButton], DISABLE_CLASS);\n          addClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n          addClass([followingEventButton], QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n        }\n\n        break;\n\n      case 'Delete':\n        addClass([okButton], QUICK_DIALOG_DELETE_CLASS);\n        addClass([cancelButton], QUICK_DIALOG_CANCEL_CLASS);\n        break;\n\n      case 'Alert':\n        addClass([okButton], [QUICK_DIALOG_ALERT_OK, QUICK_DIALOG_ALERT_BTN_CLASS]);\n        addClass([cancelButton], [QUICK_DIALOG_ALERT_CANCEL, DISABLE_CLASS]);\n        break;\n    }\n  };\n\n  QuickPopups.prototype.applyFormValidation = function () {\n    var form = this.quickPopup.element.querySelector('.' + FORM_CLASS);\n    var rules = {};\n    rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n    this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n  };\n\n  QuickPopups.prototype.openRecurrenceAlert = function () {\n    var editDeleteOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n    if (editDeleteOnly) {\n      editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n      editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n    }\n\n    var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n\n    if (editFollowingEventsOnly) {\n      editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n      editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n    }\n\n    var editDeleteSeries = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n    if (editDeleteSeries) {\n      editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n      editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n    }\n\n    this.quickDialog.content = this.l10n.getConstant('editContent');\n    this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n    this.quickDialogClass('Recurrence');\n    this.showQuickDialog('RecurrenceAlert');\n  };\n\n  QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n    this.quickDialogClass('Alert');\n    var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n    okButton.innerHTML = this.l10n.getConstant('ok');\n    okButton.setAttribute('aria-label', okButton.innerHTML);\n    var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n    cancelButton.innerHTML = this.l10n.getConstant('cancel');\n    cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    this.quickDialog.header = this.l10n.getConstant('alert');\n    var dialogCancel;\n\n    switch (type) {\n      case 'wrongPattern':\n        addClass([cancelButton], DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n        break;\n\n      case 'createError':\n        addClass([cancelButton], DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('createError');\n        break;\n\n      case 'sameDayAlert':\n        addClass([cancelButton], DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n        break;\n\n      case 'seriesChangeAlert':\n        dialogCancel = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS);\n        removeClass([cancelButton, dialogCancel], DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n        okButton.innerHTML = this.l10n.getConstant('yes');\n        cancelButton.innerHTML = this.l10n.getConstant('no');\n        dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n        break;\n\n      case 'occurrenceAlert':\n        addClass([cancelButton], DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n        break;\n    }\n\n    if (!this.parent.enableRecurrenceValidation && type === 'wrongPattern' || this.parent.enableRecurrenceValidation) {\n      this.showQuickDialog('RecurrenceValidationAlert');\n    }\n  };\n\n  QuickPopups.prototype.openDeleteAlert = function () {\n    if (this.parent.activeViewOptions.readonly) {\n      return;\n    }\n\n    var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n    if (okButton) {\n      okButton.innerHTML = this.l10n.getConstant('delete');\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n\n    var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n    if (cancelButton) {\n      cancelButton.innerHTML = this.l10n.getConstant('cancel');\n      cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n\n    this.quickDialog.content = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n    this.quickDialog.header = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n    this.quickDialogClass('Delete');\n    this.showQuickDialog('DeleteAlert');\n  };\n\n  QuickPopups.prototype.openValidationError = function (type, eventData) {\n    this.quickDialog.header = this.l10n.getConstant('alert');\n    this.quickDialog.content = this.l10n.getConstant(type);\n    var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n\n    if (okButton) {\n      okButton.innerHTML = this.l10n.getConstant('ok');\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n\n    var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n\n    if (cancelButton) {\n      cancelButton.innerHTML = this.l10n.getConstant('cancel');\n      okButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n\n    this.quickDialogClass('Alert');\n    this.showQuickDialog('ValidationAlert', eventData);\n  };\n\n  QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n    var _this = this;\n\n    this.quickDialog.dataBind();\n    var eventProp = {\n      type: popupType,\n      cancel: false,\n      element: this.quickDialog.element,\n      data: extend({}, eventData || this.parent.activeEventData.event, null, true)\n    };\n    this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n      if (!popupArgs.cancel) {\n        _this.quickDialog.show();\n      }\n    });\n  };\n\n  QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n    var _this = this;\n\n    var fields = this.parent.eventFields;\n    var moreEventContentEle = createElement('div', {\n      className: MORE_EVENT_CONTENT_CLASS\n    });\n    var moreEventWrapperEle = createElement('div', {\n      className: MORE_EVENT_WRAPPER_CLASS\n    });\n\n    if (eventCollection.length === 0) {\n      moreEventWrapperEle = createElement('div', {\n        className: MORE_EVENT_CONTENT_CLASS,\n        innerHTML: this.l10n.getConstant('emptyContainer')\n      });\n    } else {\n      var _loop_1 = function (eventData) {\n        var eventText = eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default || this_1.parent.localeObj.getConstant('addTitle');\n        var appointmentElement = createElement('div', {\n          className: APPOINTMENT_CLASS,\n          attrs: {\n            'data-id': '' + eventData[fields.id],\n            'data-guid': eventData.Guid,\n            'role': 'button',\n            'tabindex': '0',\n            'aria-disabled': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n            'aria-label': this_1.parent.getAnnouncementString(eventData)\n          }\n        });\n        var templateElement = void 0;\n\n        if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n          var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n          templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false);\n          append(templateElement, appointmentElement);\n        } else {\n          appointmentElement.appendChild(createElement('div', {\n            className: SUBJECT_CLASS\n          }));\n          this_1.parent.sanitize(eventText, appointmentElement.firstElementChild);\n        }\n\n        if (!isNullOrUndefined(groupIndex)) {\n          appointmentElement.setAttribute('data-group-index', groupIndex);\n        }\n\n        if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n          var iconClass = eventData[fields.id] === eventData[fields.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n          appointmentElement.appendChild(createElement('div', {\n            className: ICON + ' ' + iconClass\n          }));\n        }\n\n        var args = {\n          data: extend({}, eventData, null, true),\n          element: appointmentElement,\n          cancel: false\n        };\n        this_1.parent.trigger(eventRendered, args, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            moreEventWrapperEle.appendChild(appointmentElement);\n            var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n\n            _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n\n            _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n          }\n        });\n      };\n\n      var this_1 = this;\n\n      for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n        var eventData = eventCollection_1[_i];\n\n        _loop_1(eventData);\n      }\n    }\n\n    moreEventContentEle.appendChild(moreEventWrapperEle);\n    return moreEventContentEle;\n  };\n\n  QuickPopups.prototype.tapHoldEventPopup = function (e) {\n    var target = closest(e.target, '.' + APPOINTMENT_CLASS);\n    this.isMultipleEventSelect = false;\n    this.parent.selectedElements = [];\n    this.isMultipleEventSelect = true;\n    this.parent.eventBase.getSelectedEventElements(target);\n    this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n    var guid = target.getAttribute('data-guid');\n    var eventObj = this.parent.eventBase.getEventByGuid(guid);\n\n    if (isNullOrUndefined(eventObj)) {\n      return;\n    }\n\n    var eventTitle = eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle');\n    var eventTemplate = \"<div class=\\\"\" + MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + POPUP_HEADER_CLASS + \"\\\">\" + (\"<button class=\\\"\" + CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") + (\"<div class=\\\"\" + SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") + (\"<button class=\\\"\" + EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") + (\"<button class=\\\"\" + DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n    this.quickPopup.element.innerHTML = eventTemplate;\n    var closeIcon = this.quickPopup.element.querySelector('.' + CLOSE_CLASS);\n    this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n    var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n    var editAction = !this.parent.eventSettings.allowEditing || readonly;\n    var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n    var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n\n    if (editIcon) {\n      this.renderButton('e-flat e-round e-small', ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n    }\n\n    var deleteIcon = this.quickPopup.element.querySelector('.' + DELETE_CLASS);\n\n    if (deleteIcon) {\n      this.renderButton('e-flat e-round e-small', ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n    }\n\n    this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(e));\n  };\n\n  QuickPopups.prototype.isCellBlocked = function (args) {\n    var tempObj = {};\n    tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n    tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n    tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n      var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n      this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n    }\n\n    return this.parent.eventBase.isBlockRange(tempObj);\n  };\n\n  QuickPopups.prototype.cellClick = function (args) {\n    var date = new Date(args.startTime.getTime());\n\n    if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding || this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) || !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n      this.quickPopupHide();\n      return;\n    }\n\n    var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;\n\n    if (this.parent.isAdaptive) {\n      this.quickPopupHide();\n      var newEventClone = this.parent.element.querySelector('.' + NEW_EVENT_CLASS);\n\n      if (isNullOrUndefined(newEventClone)) {\n        newEventClone = createElement('div', {\n          className: NEW_EVENT_CLASS,\n          innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n        });\n      }\n\n      var targetCell = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n\n      if (targetCell) {\n        targetCell.appendChild(newEventClone);\n      }\n\n      return;\n    }\n\n    var target = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS);\n\n    if (isNullOrUndefined(target) || targetEle.classList.contains(MORE_INDICATOR_CLASS)) {\n      return;\n    }\n\n    var isSameTarget = this.quickPopup.relateTo === target;\n\n    if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n      var subjectElement_1 = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n      if (subjectElement_1) {\n        subjectElement_1.focus();\n      }\n\n      return;\n    } else if (this.quickPopup.element) {\n      this.destroyPopupButtons('quickPopup');\n    }\n\n    var temp = {};\n    temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n    temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n    temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n    var quickCellPopup = createElement('div', {\n      className: CELL_POPUP_CLASS\n    });\n    quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n    quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n    quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n    var subjectElement = quickCellPopup.querySelector('.' + SUBJECT_CLASS);\n\n    if (subjectElement) {\n      Input.createInput({\n        element: subjectElement,\n        properties: {\n          placeholder: this.l10n.getConstant('addTitle')\n        }\n      });\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n      subjectElement.value = this.parent.eventSettings.fields.subject.default;\n    }\n\n    var closeIcon = quickCellPopup.querySelector('.' + CLOSE_CLASS);\n\n    if (closeIcon) {\n      this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n    }\n\n    var moreButton = quickCellPopup.querySelector('.' + QUICK_POPUP_EVENT_DETAILS_CLASS);\n\n    if (moreButton) {\n      this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n    }\n\n    var saveButton = quickCellPopup.querySelector('.' + EVENT_CREATE_CLASS);\n\n    if (saveButton) {\n      this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n    }\n\n    if (this.morePopup) {\n      this.morePopup.hide();\n    }\n\n    this.quickPopup.content = quickCellPopup;\n    this.quickPopup.relateTo = target;\n    this.quickPopup.dataBind();\n    this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(args.event));\n  };\n\n  QuickPopups.prototype.isSameEventClick = function (events) {\n    var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + APPOINTMENT_CLASS);\n\n    if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n      var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n\n      if (editIcon) {\n        editIcon.focus();\n      }\n\n      if (!this.parent.isAdaptive) {\n        var editButton = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n\n        if (editButton) {\n          editButton.focus();\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  QuickPopups.prototype.isQuickTemplate = function (type) {\n    return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n  };\n\n  QuickPopups.prototype.eventClick = function (events) {\n    if (this.parent.eventTooltip) {\n      this.parent.eventTooltip.close();\n    }\n\n    if (!this.parent.showQuickInfo) {\n      return;\n    }\n\n    if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n      this.updateTapHoldEventPopup(closest(events.element, '.' + APPOINTMENT_CLASS));\n    } else {\n      var isSameTarget = this.isSameEventClick(events);\n      this.parent.selectedElements = [];\n\n      if (isSameTarget) {\n        return;\n      } else if (this.quickPopup.element) {\n        this.destroyPopupButtons('quickPopup');\n      }\n\n      var eventData = events.event;\n      var quickEventPopup = createElement('div', {\n        className: EVENT_POPUP_CLASS\n      });\n      quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n      quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n      quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n      var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n      var editAction = !this.parent.eventSettings.allowEditing || readonly;\n      var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n      var editIcon = quickEventPopup.querySelector('.' + EDIT_CLASS);\n      var buttonClass = 'e-flat e-round e-small';\n\n      if (editIcon) {\n        this.renderButton(buttonClass, ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n      }\n\n      var deleteIcon = quickEventPopup.querySelector('.' + DELETE_CLASS);\n\n      if (deleteIcon) {\n        this.renderButton(buttonClass, ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n      }\n\n      var closeIcon = quickEventPopup.querySelector('.' + CLOSE_CLASS);\n\n      if (closeIcon) {\n        this.renderButton(buttonClass, ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n      }\n\n      var editButton = quickEventPopup.querySelector('.' + EDIT_EVENT_CLASS);\n\n      if (editButton) {\n        this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n      }\n\n      var deleteButton = quickEventPopup.querySelector('.' + DELETE_EVENT_CLASS);\n\n      if (deleteButton) {\n        this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n      }\n\n      if (this.morePopup && !closest(events.element, '.' + MORE_EVENT_WRAPPER_CLASS)) {\n        this.morePopup.hide();\n      }\n\n      this.quickPopup.content = quickEventPopup;\n      this.quickPopup.relateTo = this.parent.isAdaptive ? document.body : closest(events.element, '.' + APPOINTMENT_CLASS);\n      this.quickPopup.dataBind();\n      this.beforeQuickPopupOpen(events.element, this.parent.eventBase.getPageCoordinates(events.originalEvent));\n    }\n  };\n\n  QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n    var headerTemplate = createElement('div', {\n      className: POPUP_HEADER_CLASS\n    });\n\n    if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n      var headerArgs = extend({}, headerData, {\n        elementType: headerType.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n      append([].slice.call(headerTemp), headerTemplate);\n    } else {\n      var header = void 0;\n      var args = void 0;\n\n      switch (headerType) {\n        case 'Cell':\n          header = \"<div class=\\\"\" + POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + CLOSE_CLASS + \"\\\" title=\" + (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n          break;\n\n        case 'Event':\n          args = this.getFormattedString(headerData);\n          header = \"<div class=\\\"\" + POPUP_HEADER_ICON_WRAPPER + \"\\\">\" + (\"<button class=\\\"\" + (EDIT_CLASS + ' ' + ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") + (\"<button class=\\\"\" + (DELETE_CLASS + ' ' + ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") + (\"<button class=\\\"\" + CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") + (\"<div class=\\\"\" + SUBJECT_WRAP + \"\\\"><div class=\\\"\" + SUBJECT_CLASS + \" \" + TEXT_ELLIPSIS + \"\\\" \") + (\"title=\\\"\" + (args.eventSubject ? args.eventSubject.replaceAll('\"', '\\'') : args.eventSubject) + \"\\\"></div></div >\");\n          break;\n      }\n\n      var templateWrapper = createElement('div', {\n        innerHTML: header\n      });\n\n      if (headerType === 'Event') {\n        var subjectText = templateWrapper.querySelector('.' + SUBJECT_CLASS);\n        this.parent.sanitize(args.eventSubject, subjectText);\n      }\n\n      append([].slice.call(templateWrapper.childNodes), headerTemplate);\n    }\n\n    return headerTemplate;\n  };\n\n  QuickPopups.prototype.getPopupContent = function (type, args, data) {\n    var contentTemplate = createElement('div', {\n      className: POPUP_CONTENT_CLASS\n    });\n\n    if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n      var contentArgs = extend({}, data, {\n        elementType: type.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n      append([].slice.call(contentTemp), contentTemplate);\n    } else {\n      var content = void 0;\n      var cellDetails = void 0;\n      var argsData = void 0;\n      var resourceText = this.getResourceText(args, type.toLowerCase());\n\n      switch (type) {\n        case 'Cell':\n          cellDetails = this.getFormattedString(data);\n          content = \"<table class=\\\"\" + POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + FORM_CLASS + \"\\\" onsubmit=\" + (\"\\\"return false;\\\"><input class=\\\"\" + SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") + (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + DATE_TIME_CLASS + \"\\\">\") + (\"<div class=\\\"\" + DATE_TIME_ICON_CLASS + \" \" + ICON + \"\\\"></div><div class=\\\"\" + DATE_TIME_DETAILS_CLASS + \" \") + (TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") + ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + RESOURCE_CLASS + \"\\\">\" + (\"<div class=\\\"\" + RESOURCE_ICON_CLASS + \" \" + ICON + \" \\\"></div><div class=\\\"\" + RESOURCE_DETAILS_CLASS + \" \") + (TEXT_ELLIPSIS + \"\\\"></div></div>\") : '') + \"</td></tr></tbody></table>\");\n          break;\n\n        case 'Event':\n          argsData = this.getFormattedString(data);\n          content = '<div class=\"' + DATE_TIME_CLASS + '\"><div class=\"' + DATE_TIME_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + DATE_TIME_WRAPPER_CLASS + ' ' + TEXT_ELLIPSIS + '\"><div class=\"' + DATE_TIME_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n\n          if (data[this.parent.eventFields.recurrenceRule]) {\n            content += '<div class=\"' + RECURRENCE_SUMMARY_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + this.getRecurrenceSummary(data) + '</div>';\n          }\n\n          content += '</div></div>';\n\n          if (data[this.parent.eventFields.location]) {\n            content += '<div class=\"' + LOCATION_CLASS + '\"><div class=\"' + LOCATION_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + LOCATION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\"></div></div>';\n          }\n\n          if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n            content += '<div class=\"' + TIME_ZONE_CLASS + '\"><div class=\"' + TIME_ZONE_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + TIME_ZONE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + this.getTimezone(data) + '</div></div>';\n          }\n\n          if (data[this.parent.eventFields.description]) {\n            content += '<div class=\"' + DESCRIPTION_CLASS + '\"><div class=\"' + DESCRIPTION_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + DESCRIPTION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\"></div></div>';\n          }\n\n          if (this.parent.resourceCollection.length > 0) {\n            content += '<div class=\"' + RESOURCE_CLASS + '\"><div class=\"' + RESOURCE_ICON_CLASS + ' ' + ICON + '\"></div><div class=\"' + RESOURCE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\"></div></div>';\n          }\n\n          break;\n      }\n\n      var templateWrapper = createElement('div', {\n        innerHTML: content\n      });\n\n      if (data[this.parent.eventFields.location]) {\n        var locationDetails = templateWrapper.querySelector('.' + LOCATION_DETAILS_CLASS);\n\n        if (!isNullOrUndefined(locationDetails)) {\n          this.parent.sanitize(data[this.parent.eventFields.location], locationDetails);\n        }\n      }\n\n      if (data[this.parent.eventFields.description]) {\n        var descriptionDetails = templateWrapper.querySelector('.' + DESCRIPTION_DETAILS_CLASS);\n\n        if (!isNullOrUndefined(descriptionDetails)) {\n          this.parent.sanitize(data[this.parent.eventFields.description], descriptionDetails);\n        }\n      }\n\n      if (resourceText) {\n        var resourceDetails = templateWrapper.querySelector('.' + RESOURCE_DETAILS_CLASS);\n\n        if (!isNullOrUndefined(resourceDetails)) {\n          this.parent.sanitize(resourceText, resourceDetails);\n        }\n      }\n\n      append([].slice.call(templateWrapper.childNodes), contentTemplate);\n    }\n\n    return contentTemplate;\n  };\n\n  QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n    var footerTemplate = createElement('div', {\n      className: POPUP_FOOTER_CLASS\n    });\n\n    if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n      var footerArgs = extend({}, footerData, {\n        elementType: footerType.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n      append([].slice.call(footerTemp), footerTemplate);\n    } else {\n      var footer = void 0;\n\n      switch (footerType) {\n        case 'Cell':\n          footer = \"<button class=\\\"\" + (QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS) + \"\\\" title=\" + (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") + (\"<button class=\\\"\" + EVENT_CREATE_CLASS + \" \" + TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") + (this.l10n.getConstant('save') + \"</button>\");\n          break;\n\n        case 'Event':\n          footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + EDIT_EVENT_CLASS + \" \" + (TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") + (\"<button class=\\\"\" + DELETE_EVENT_CLASS + \" \" + TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") + (this.l10n.getConstant('delete') + \"</button>\"));\n          break;\n      }\n\n      var templateWrapper = createElement('div', {\n        innerHTML: footer\n      });\n      append([].slice.call(templateWrapper.childNodes), footerTemplate);\n    }\n\n    return footerTemplate;\n  };\n\n  QuickPopups.prototype.getResourceText = function (args, type) {\n    if (this.parent.resourceCollection.length === 0) {\n      return null;\n    }\n\n    var resourceValue = '';\n\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      var resourceData = resourceCollection_1.dataSource;\n\n      if (type === 'event') {\n        var eventData = args.event;\n\n        var _loop_2 = function (data) {\n          var resourceId = eventData[resourceCollection_1.field];\n\n          if (resourceId instanceof Array) {\n            if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n              var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n              var resource = resourceData.filter(function (e) {\n                return e[resourceCollection_1.idField] === id_1;\n              })[0];\n              resourceValue += resourceValue === '' ? resource[resourceCollection_1.textField] : ', ' + resource[resourceCollection_1.textField];\n            }\n          } else if (data[resourceCollection_1.idField] === resourceId) {\n            resourceValue = data[resourceCollection_1.textField].toString();\n          }\n        };\n\n        for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n          var data = resourceData_1[_i];\n\n          _loop_2(data);\n        }\n      } else {\n        resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n      }\n    } else {\n      if (type === 'event') {\n        var eventData = args.event;\n        var resourceData = void 0;\n        var lastResource_1;\n\n        for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n          resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n\n          if (!isNullOrUndefined(resourceData)) {\n            lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n            break;\n          }\n        }\n\n        if (!Array.isArray(resourceData)) {\n          resourceData = [resourceData];\n        }\n\n        var resNames_1 = [];\n        var lastResourceData_1 = lastResource_1.dataSource;\n        resourceData.forEach(function (value) {\n          var text;\n          var i = findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n\n          if (i > -1) {\n            text = lastResourceData_1[parseInt(i.toString(), 10)][lastResource_1.textField];\n          }\n\n          if (text) {\n            resNames_1.push(text);\n          }\n        });\n        resourceValue = resNames_1.join(', ');\n      } else {\n        var argsData = args;\n        var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n        var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];\n        resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n      }\n    }\n\n    return resourceValue;\n  };\n\n  QuickPopups.prototype.getFormattedString = function (eventData) {\n    var fields = this.parent.eventFields;\n    var eventSubject = eventData[fields.subject] || this.l10n.getConstant('noTitle');\n    var startDate = eventData[fields.startTime];\n    var endDate = eventData[fields.endTime];\n    var startDateDetails = this.getDateFormat(startDate, 'long');\n    var endDateDetails = eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0 ? this.getDateFormat(addDays(new Date(endDate.getTime()), -1), 'long') : this.getDateFormat(endDate, 'long');\n    var startTimeDetail = this.parent.getTimeString(startDate);\n    var endTimeDetail = this.parent.getTimeString(endDate);\n    var details = '';\n    var spanLength = endDate.getDate() !== startDate.getDate() && (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n\n    if (eventData[fields.isAllDay]) {\n      details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n\n      if ((getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_DAY > 1) {\n        details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n      }\n    } else if ((getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_DAY >= 1 || spanLength > 0) {\n      details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n    } else {\n      details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n    }\n\n    return {\n      eventSubject: eventSubject,\n      details: details\n    };\n  };\n\n  QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n    var _this = this;\n\n    this.quickPopupHide(true);\n    var moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n\n    if (moreEventContentEle) {\n      remove(moreEventContentEle);\n    }\n\n    var selectedDate = data.date.getTime().toString();\n    var target = closest(data.element, '.' + MORE_INDICATOR_CLASS + ',.' + WORK_CELLS_CLASS);\n    var day = this.parent.globalize.formatDate(data.date, {\n      format: 'E',\n      calendar: this.parent.getCalendarMode()\n    });\n    this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DAY_CLASS).innerHTML = capitalizeFirstWord(day, 'single');\n    var dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n    dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n    dateElement.setAttribute('data-date', selectedDate);\n    dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n    var groupOrder;\n\n    if (!isNullOrUndefined(groupIndex)) {\n      dateElement.setAttribute('data-group-index', groupIndex);\n      groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n    }\n\n    var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n    this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n    removeClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n\n    if (resetTime(data.date).getTime() === resetTime(this.parent.getCurrentTime()).getTime()) {\n      addClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n    }\n\n    if (!this.parent.isAdaptive) {\n      if (this.parent.currentView.indexOf('Timeline') !== -1) {\n        var gIndex = target.getAttribute('data-group-index');\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n        var tdDate = startDate.getTime().toString();\n\n        if (isNullOrUndefined(gIndex)) {\n          this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' tbody tr td[data-date=\"' + tdDate + '\"]');\n        } else {\n          this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n\n          if (isNullOrUndefined(this.morePopup.relateTo)) {\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n\n            for (var i = 0; i < workCells.length; i++) {\n              var date = workCells[parseInt(i.toString(), 10)].getAttribute('data-date');\n\n              if (date < tdDate) {\n                this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];\n              }\n            }\n          }\n        }\n      } else {\n        this.morePopup.relateTo = closest(target, '.' + WORK_CELLS_CLASS);\n      }\n    }\n\n    this.parent.renderTemplates(function () {\n      var eventProp = {\n        type: 'EventContainer',\n        cancel: false,\n        element: _this.morePopup.element,\n        data: data\n      };\n\n      _this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n        if (!popupArgs.cancel) {\n          _this.morePopup.show();\n        }\n      });\n    });\n  };\n\n  QuickPopups.prototype.saveClick = function (event) {\n    this.applyFormValidation();\n    this.dialogEvent = event;\n    this.isCrudAction = true;\n    this.quickPopupHide();\n  };\n\n  QuickPopups.prototype.detailsClick = function (event) {\n    var subjectEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n    if (subjectEle && subjectEle.value !== '') {\n      extend(this.parent.activeCellsData, {\n        subject: subjectEle.value\n      });\n    }\n\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.fieldValidator.destroyToolTip();\n    this.quickPopupHide();\n    this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n  };\n\n  QuickPopups.prototype.editClick = function (event) {\n    this.dialogEvent = event;\n    this.quickPopupHide(true);\n    var data = this.parent.activeEventData.event;\n    this.parent.currentAction = 'EditSeries';\n\n    if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n      this.parent.currentAction = 'EditOccurrence';\n      this.openRecurrenceAlert();\n    } else {\n      this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n    }\n  };\n\n  QuickPopups.prototype.deleteClick = function (event) {\n    this.dialogEvent = event;\n    this.quickPopupHide(true);\n    this.parent.currentAction = 'Delete';\n\n    if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n      this.openRecurrenceAlert();\n    } else {\n      this.openDeleteAlert();\n    }\n  };\n\n  QuickPopups.prototype.updateMoreEventContent = function () {\n    if (this.morePopup.element.classList.contains('e-popup-close')) {\n      return;\n    }\n\n    var moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n\n    if (moreEventContentEle) {\n      remove(moreEventContentEle);\n    }\n\n    var dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n    var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n    var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n    var groupIndex = dateElement.getAttribute('data-group-index');\n    var data;\n    var groupOrder;\n\n    if (!isNullOrUndefined(groupIndex)) {\n      data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n      groupOrder = data.groupOrder;\n    }\n\n    var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n    var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n    this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n  };\n\n  QuickPopups.prototype.closeClick = function (event) {\n    this.dialogEvent = event;\n\n    if (this.parent.currentView === 'Year' && this.parent.activeCellsData && this.parent.activeCellsData.element) {\n      this.parent.selectCell(this.parent.activeCellsData.element);\n    }\n\n    this.quickPopupHide();\n    this.morePopup.hide();\n  };\n\n  QuickPopups.prototype.dialogButtonClick = function (event) {\n    this.dialogEvent = event;\n    this.quickDialog.hide();\n    var target = event.target;\n    var cancelBtn = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n    var eventData = this.parent.activeEventData.event;\n\n    if (target.classList.contains(QUICK_DIALOG_OCCURRENCE_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteOccurrence' : 'EditOccurrence';\n\n      switch (this.parent.currentAction) {\n        case 'EditOccurrence':\n          this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n          break;\n\n        case 'DeleteOccurrence':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n\n      switch (this.parent.currentAction) {\n        case 'EditFollowingEvents':\n          this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n          break;\n\n        case 'DeleteFollowingEvents':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(QUICK_DIALOG_SERIES_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteSeries' : 'EditSeries';\n\n      switch (this.parent.currentAction) {\n        case 'EditSeries':\n          this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n          break;\n\n        case 'DeleteSeries':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(QUICK_DIALOG_DELETE_CLASS)) {\n      this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n    } else if (!cancelBtn.classList.contains(DISABLE_CLASS) && (target.classList.contains(QUICK_DIALOG_ALERT_OK) || target.classList.contains(QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(QUICK_DIALOG_CANCEL_CLASS))) {\n      this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(QUICK_DIALOG_ALERT_CANCEL);\n      this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n    }\n  };\n\n  QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n    var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n    this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n\n    if (selectedElements.length > 0) {\n      var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n      var titleContent = selectedElements.length === 1 ? eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle') : '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n      this.quickPopup.element.querySelector('.' + SUBJECT_CLASS).innerHTML = titleContent;\n\n      if (selectedElements.length > 1) {\n        addClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n      } else {\n        removeClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n      }\n    } else {\n      this.parent.selectedElements = [];\n      this.quickPopupHide();\n    }\n  };\n\n  QuickPopups.prototype.getTimezone = function (event) {\n    var zoneDetails = '';\n    zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n    zoneDetails += zoneDetails === '' ? '' : ' - ';\n    zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n    return zoneDetails;\n  };\n\n  QuickPopups.prototype.getRecurrenceSummary = function (event) {\n    var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n\n    if (recurrenceEditor) {\n      var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n      return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n    }\n\n    return '';\n  };\n\n  QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n    return capitalizeFirstWord(this.parent.globalize.formatDate(date, {\n      skeleton: skeletonString,\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n\n  QuickPopups.prototype.getDataFromTarget = function (target) {\n    if (target.classList.contains(APPOINTMENT_CLASS)) {\n      return this.parent.activeEventData.event;\n    } // Deprecated cells data in quick popups\n\n\n    var eventObj = {\n      startTime: this.parent.activeCellsData.startTime,\n      endTime: this.parent.activeCellsData.endTime,\n      isAllDay: this.parent.activeCellsData.isAllDay,\n      groupIndex: this.parent.activeCellsData.groupIndex\n    };\n    var cellsData = this.parent.activeCellsData;\n    this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n    return eventObj;\n  };\n\n  QuickPopups.prototype.beforeQuickDialogClose = function (e) {\n    var _this = this;\n\n    var args = {\n      event: e.event || this.dialogEvent,\n      type: isNullOrUndefined(this.parent.activeEventData.event) ? 'ValidationAlert' : !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) ? 'RecurrenceAlert' : 'DeleteAlert',\n      cancel: false,\n      data: this.parent.activeEventData.event,\n      element: this.quickDialog.element\n    };\n    this.parent.trigger(popupClose, args, function (popupCloseArgs) {\n      if (!popupCloseArgs.cancel) {\n        _this.parent.eventBase.focusElement(true);\n      }\n    });\n  };\n\n  QuickPopups.prototype.beforeQuickPopupOpen = function (target, originalEvent) {\n    var _this = this;\n\n    this.parent.renderTemplates(function () {\n      var isEventPopup = _this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n\n      var popupType = _this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n      var eventProp = {\n        type: popupType,\n        cancel: false,\n        data: extend({}, _this.getDataFromTarget(target), null, true),\n        target: target,\n        element: _this.quickPopup.element\n      };\n\n      _this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n        if (popupArgs.cancel) {\n          _this.quickPopupHide();\n\n          _this.destroyPopupButtons('quickPopup');\n\n          if (popupArgs.element.classList.contains(POPUP_OPEN)) {\n            _this.quickPopupClose();\n          }\n\n          removeChildren(_this.quickPopup.element);\n          _this.isMultipleEventSelect = false;\n        } else {\n          var display = _this.quickPopup.element.style.display;\n          _this.quickPopup.element.style.display = 'block';\n\n          if (_this.parent.isAdaptive) {\n            _this.quickPopup.element.removeAttribute('style');\n\n            _this.quickPopup.element.style.display = 'block';\n            _this.quickPopup.element.style.height = formatUnit(popupType === 'EditEventInfo' ? 65 : window.innerHeight);\n          } else {\n            var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll && !isNullOrUndefined(closest(target, '.' + CONTENT_TABLE_CLASS));\n\n            var conTable = _this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n\n            _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? getTranslateX(conTable) + 10 : 10;\n            _this.quickPopup.offsetY = _this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll ? _this.quickPopup.offsetY : 0;\n            _this.quickPopup.collision = {\n              X: _this.parent.enableRtl ? 'flip' : 'none',\n              Y: 'fit'\n            };\n            _this.quickPopup.position = {\n              X: _this.parent.enableRtl ? 'left' : 'right',\n              Y: _this.parent.enableRtl ? 'bottom' : 'top'\n            };\n\n            _this.quickPopup.dataBind();\n\n            _this.quickPopup.refreshPosition(null, true);\n\n            var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n\n            if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n              _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n\n              if (isVirtualScroll && !_this.parent.enableRtl) {\n                _this.quickPopup.offsetX = getTranslateX(conTable) + _this.quickPopup.offsetX;\n              }\n\n              _this.quickPopup.dataBind();\n\n              _this.quickPopup.refreshPosition(null, true);\n\n              var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n\n              if (leftCollide.indexOf('left') > -1) {\n                _this.quickPopup.position = {\n                  X: 'center',\n                  Y: 'center'\n                };\n                _this.quickPopup.collision = {\n                  X: 'fit',\n                  Y: 'fit'\n                };\n                _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n\n                _this.quickPopup.dataBind();\n              }\n            }\n\n            if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n              var translateY = getTranslateY(conTable);\n              _this.quickPopup.offsetY = translateY;\n\n              _this.quickPopup.dataBind();\n\n              _this.quickPopup.refreshPosition(null, true);\n            }\n\n            if (_this.quickPopup.position.X === 'center' && _this.quickPopup.position.Y === 'center' && !isNullOrUndefined(originalEvent) && originalEvent.clientX && originalEvent.clientY) {\n              var clientX = originalEvent.clientX;\n              var clientY = originalEvent.clientY;\n              var targetRect = target.getBoundingClientRect();\n              var offsetY = originalEvent.offsetY || Math.ceil(clientY - targetRect.y);\n              var previousOffset = _this.quickPopup.offsetY;\n              var collision = isCollide(_this.quickPopup.element, target);\n\n              var popupRect = _this.quickPopup.element.getBoundingClientRect();\n\n              var targetEle = document.elementFromPoint(clientX, clientY);\n\n              if (collision.indexOf('top') > -1 || collision.indexOf('bottom') > -1 || closest(targetEle, '.' + POPUP_WRAPPER_CLASS)) {\n                if (popupRect.top <= clientY && clientY <= popupRect.top + popupRect.height) {\n                  _this.quickPopup.offsetY = previousOffset - popupRect.height - 10;\n\n                  _this.quickPopup.dataBind();\n\n                  collision = isCollide(_this.quickPopup.element, _this.parent.element);\n\n                  if (collision.indexOf('top') > -1) {\n                    _this.quickPopup.offsetY = previousOffset + offsetY + 10;\n\n                    _this.quickPopup.dataBind();\n                  }\n                } else if (isCollide(_this.quickPopup.element, _this.parent.element).indexOf('bottom') > -1) {\n                  _this.quickPopup.offsetY = previousOffset - offsetY - Math.ceil(popupRect.height) - 10;\n\n                  _this.quickPopup.dataBind();\n                }\n              }\n            }\n          }\n\n          if (isEventPopup) {\n            _this.applyEventColor();\n          }\n\n          _this.quickPopup.element.style.display = display;\n\n          _this.quickPopup.dataBind();\n\n          _this.quickPopup.show();\n        }\n      });\n    });\n  };\n\n  QuickPopups.prototype.applyEventColor = function () {\n    var colorField = '';\n\n    if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n      colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n    } else {\n      colorField = 'background-color';\n    }\n\n    var color = this.parent.activeEventData.element.style[colorField];\n\n    if (color === '') {\n      return;\n    }\n\n    var colorEle = this.quickPopup.element.querySelector('.' + POPUP_HEADER_CLASS);\n    var footerEle = this.quickPopup.element.querySelector('.' + POPUP_FOOTER_CLASS);\n\n    if (footerEle && footerEle.offsetParent) {\n      colorEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n      if (colorEle) {\n        colorEle.style.borderLeftColor = color;\n        color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n      }\n    }\n\n    if (colorEle) {\n      colorEle.style.backgroundColor = color;\n    }\n  };\n\n  QuickPopups.prototype.quickPopupOpen = function () {\n    if (this.parent.isAdaptive) {\n      this.quickPopup.element.style.top = '0px';\n      return;\n    }\n\n    if (this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS)) {\n      var subjectElement = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n\n      if (subjectElement) {\n        subjectElement.focus();\n      }\n    } else {\n      var editElement = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n\n      if (editElement) {\n        editElement.focus();\n      }\n\n      var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n\n      if (editIcon) {\n        editIcon.focus();\n      }\n    }\n  };\n\n  QuickPopups.prototype.quickPopupClose = function () {\n    this.parent.eventBase.focusElement();\n    this.quickPopup.relateTo = '.' + WORK_CELLS_CLASS;\n    this.fieldValidator.destroyToolTip();\n\n    if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n      this.fieldValidator.destroy();\n    }\n\n    this.destroyPopupButtons('quickPopup');\n    removeChildren(this.quickPopup.element);\n  };\n\n  QuickPopups.prototype.morePopupOpen = function () {\n    if (this.parent.isAdaptive) {\n      this.morePopup.element.style.top = '0px';\n      this.morePopup.element.style.left = '0px';\n      this.morePopup.element.style.height = formatUnit(window.innerHeight);\n      return;\n    }\n\n    this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS).focus();\n    this.morePopup.refreshPosition();\n  };\n\n  QuickPopups.prototype.morePopupClose = function () {\n    var moreWrapper = this.parent.element.querySelector('.' + MORE_EVENT_WRAPPER_CLASS);\n\n    if (moreWrapper) {\n      remove(moreWrapper);\n    }\n  };\n\n  QuickPopups.prototype.popupClose = function (event) {\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.quickPopupHide(true);\n  };\n\n  QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n    var _this = this;\n\n    if (!this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n      return;\n    }\n\n    var isCellPopup = this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS);\n    var popupData;\n\n    if (isCellPopup) {\n      var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n\n      if (this.isCrudAction && formvalidator && !formvalidator.ej2_instances[0].validate()) {\n        return;\n      }\n\n      var fields = this.parent.eventFields;\n      var saveObj = this.parent.eventWindow.getObjectFromFormData(POPUP_WRAPPER_CLASS);\n      this.parent.eventWindow.setDefaultValueToObject(saveObj);\n      saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n      saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n      saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n      saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.setResourceValues(saveObj);\n      }\n\n      popupData = saveObj;\n    } else {\n      popupData = this.parent.activeEventData.event;\n    }\n\n    var isEventPopup = this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n    var args = {\n      event: this.dialogEvent,\n      type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n      cancel: false,\n      data: popupData,\n      element: this.quickPopup.element,\n      target: isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    this.parent.trigger(popupClose, args, function (popupCloseArgs) {\n      if (!popupCloseArgs.cancel) {\n        if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n          if (isCellPopup && _this.isCrudAction) {\n            _this.parent.currentAction = 'Add';\n\n            _this.parent.crudModule.addEvent(popupCloseArgs.data);\n          }\n\n          if (hideAnimation) {\n            var animation = _this.quickPopup.hideAnimation;\n            _this.quickPopup.hideAnimation = null;\n\n            _this.quickPopup.hide();\n\n            _this.quickPopup.hideAnimation = animation;\n          } else {\n            _this.quickPopup.hide();\n          }\n\n          _this.isMultipleEventSelect = false;\n          _this.isCrudAction = false;\n        }\n      }\n    });\n  };\n\n  QuickPopups.prototype.navigationClick = function (e) {\n    var navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n\n    if (!isNullOrUndefined(navigateEle)) {\n      var date = this.parent.getDateFromElement(e.currentTarget);\n\n      if (!isNullOrUndefined(date)) {\n        this.closeClick(e);\n        this.parent.setProperties({\n          selectedDate: date\n        }, true);\n        this.parent.changeView(this.parent.getNavigateView(), e);\n      }\n    }\n  };\n\n  QuickPopups.prototype.documentClick = function (e) {\n    var target = e.event.target;\n    var classNames = '.' + POPUP_WRAPPER_CLASS + ',.' + HEADER_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + WORK_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.e-popup';\n    var popupWrap = this.parent.element.querySelector('.' + POPUP_WRAPPER_CLASS);\n\n    if (popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames) || !closest(target, classNames)) {\n      this.quickPopupHide();\n      this.parent.removeNewEventElement();\n    }\n\n    var tar = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n\n    if (tar && tar !== target && this.parent.allowInline) {\n      this.parent.inlineModule.documentClick();\n    }\n\n    if (closest(target, '.' + APPOINTMENT_CLASS + ',.' + HEADER_CELLS_CLASS)) {\n      this.parent.removeNewEventElement();\n    }\n\n    if (!closest(target, '.' + MORE_POPUP_WRAPPER_CLASS) && target.classList && !target.classList.contains(MORE_INDICATOR_CLASS) && !closest(target, '.' + POPUP_OPEN) && !closest(target, '.' + WORK_CELLS_CLASS)) {\n      this.morePopup.hide();\n    }\n  };\n\n  QuickPopups.prototype.onClosePopup = function (event) {\n    if (!isNullOrUndefined(event)) {\n      this.dialogEvent = event;\n    }\n\n    this.quickPopupHide();\n    this.parent.eventBase.focusElement();\n  };\n\n  QuickPopups.prototype.addEventListener = function () {\n    this.parent.on(cellClick, this.cellClick, this);\n    this.parent.on(eventClick, this.eventClick, this);\n    this.parent.on(documentClick, this.documentClick, this);\n    this.parent.on(dataReady, this.updateMoreEventContent, this);\n  };\n\n  QuickPopups.prototype.removeEventListener = function () {\n    this.parent.off(cellClick, this.cellClick);\n    this.parent.off(eventClick, this.eventClick);\n    this.parent.off(documentClick, this.documentClick);\n    this.parent.off(dataReady, this.updateMoreEventContent);\n  };\n\n  QuickPopups.prototype.destroyPopupButtons = function (popupName) {\n    var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n    var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n\n    for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n      var button = buttonCollections_1[_i];\n      var instance = button.ej2_instances[0];\n\n      if (instance) {\n        instance.destroy();\n      }\n    }\n  };\n\n  QuickPopups.prototype.refreshQuickDialog = function () {\n    this.destroyQuickDialog();\n    this.renderQuickDialog();\n  };\n\n  QuickPopups.prototype.refreshQuickPopup = function () {\n    this.destroyQuickPopup();\n    this.renderQuickPopup();\n  };\n\n  QuickPopups.prototype.refreshMorePopup = function () {\n    this.destroyMorePopup();\n    this.renderMorePopup();\n  };\n\n  QuickPopups.prototype.destroyQuickDialog = function () {\n    if (this.quickDialog.element) {\n      this.quickDialog.destroy();\n      remove(this.quickDialog.element);\n      this.quickDialog = null;\n    }\n  };\n\n  QuickPopups.prototype.destroyQuickPopup = function () {\n    if (this.quickPopup.element) {\n      this.destroyPopupButtons('quickPopup');\n      this.quickPopup.destroy();\n      remove(this.quickPopup.element);\n      this.quickPopup = null;\n    }\n  };\n\n  QuickPopups.prototype.destroyMorePopup = function () {\n    if (this.morePopup.element) {\n      this.destroyPopupButtons('morePopup');\n      this.morePopup.destroy();\n      remove(this.morePopup.element);\n      this.morePopup = null;\n    }\n  };\n\n  QuickPopups.prototype.destroy = function () {\n    if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n      this.fieldValidator.destroy();\n    }\n\n    this.removeEventListener();\n    this.destroyQuickPopup();\n    this.destroyMorePopup();\n    this.destroyQuickDialog();\n    this.dialogEvent = null;\n    this.parent = null;\n    this.l10n = null;\n    this.isCrudAction = null;\n    this.fieldValidator = null;\n    this.isMultipleEventSelect = null;\n  };\n\n  return QuickPopups;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Tooltip for Schedule\n */\n\n\nvar EventTooltip =\n/** @__PURE__ @class */\nfunction () {\n  function EventTooltip(parent) {\n    this.parent = parent;\n    this.tooltipObj = new Tooltip({\n      animation: {\n        close: {\n          effect: 'FadeOut'\n        }\n      },\n      content: 'No title',\n      position: 'BottomRight',\n      offsetY: 10,\n      mouseTrail: this.parent.isAdaptive ? false : true,\n      showTipPointer: false,\n      cssClass: this.parent.cssClass + ' ' + EVENT_TOOLTIP_ROOT_CLASS,\n      target: this.getTargets(),\n      beforeRender: this.onBeforeRender.bind(this),\n      beforeClose: this.onBeforeClose.bind(this),\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n    });\n    this.tooltipObj.appendTo(this.parent.element);\n  }\n\n  EventTooltip.prototype.getTargets = function () {\n    var targets = [];\n\n    if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n      targets.push('.' + RESOURCE_CELLS_CLASS);\n    }\n\n    if (this.parent.eventSettings.enableTooltip) {\n      targets.push('.' + APPOINTMENT_CLASS);\n    }\n\n    return targets.join(',');\n  };\n\n  EventTooltip.prototype.onBeforeRender = function (args) {\n    if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n      return;\n    }\n\n    if (args.target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n      var resCollection = void 0;\n\n      if (this.parent.activeView.isTimelineView()) {\n        var index = parseInt(args.target.getAttribute('data-group-index'), 10);\n        resCollection = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n      } else {\n        var rowIndex = args.target.parentNode.sectionRowIndex;\n        var cellIndex = args.target.cellIndex;\n        resCollection = this.parent.activeView.getColumnLevels()[parseInt(rowIndex.toString(), 10)][parseInt(cellIndex.toString(), 10)];\n      }\n\n      var data = {\n        resource: resCollection.resource,\n        resourceData: resCollection.resourceData\n      };\n      var contentContainer = createElement('div');\n      var templateId = this.parent.element.id + '_headerTooltipTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n      append(tooltipTemplate, contentContainer);\n      this.setContent(contentContainer);\n      this.parent.renderTemplates();\n      return;\n    }\n\n    var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n\n    if (isNullOrUndefined(record)) {\n      return;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n      var contentContainer = createElement('div');\n      var templateId = this.parent.element.id + '_tooltipTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(record, this.parent, 'tooltipTemplate', templateId, false));\n      append(tooltipTemplate, contentContainer);\n      this.setContent(contentContainer);\n    } else {\n      var globalize = this.parent.globalize;\n      var fields = this.parent.eventFields;\n      var eventStart = new Date('' + record[fields.startTime]);\n      var eventEnd = new Date('' + record[fields.endTime]);\n      eventEnd = eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0 ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n      var startDate = resetTime(new Date('' + eventStart));\n      var endDate = resetTime(new Date('' + eventEnd));\n      var tooltipSubject = record[fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n      var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n      var startMonthDate = '';\n      var startMonthYearDate = '';\n      var endMonthYearDate = '';\n      startMonthDate = globalize.formatDate(eventStart, {\n        type: 'date',\n        skeleton: 'MMMd',\n        calendar: this.parent.getCalendarMode()\n      });\n      startMonthYearDate = globalize.formatDate(eventStart, {\n        type: 'date',\n        skeleton: 'medium',\n        calendar: this.parent.getCalendarMode()\n      });\n      endMonthYearDate = globalize.formatDate(eventEnd, {\n        type: 'date',\n        skeleton: 'medium',\n        calendar: this.parent.getCalendarMode()\n      });\n      startMonthDate = capitalizeFirstWord(startMonthDate, 'single');\n      startMonthYearDate = capitalizeFirstWord(startMonthYearDate, 'single');\n      endMonthYearDate = capitalizeFirstWord(endMonthYearDate, 'single');\n      var startTime = this.parent.getTimeString(eventStart);\n      var endTime = this.parent.getTimeString(eventEnd);\n      var tooltipDetails = void 0;\n\n      if (startDate.getTime() === endDate.getTime()) {\n        tooltipDetails = globalize.formatDate(eventStart, {\n          type: 'date',\n          skeleton: 'long',\n          calendar: this.parent.getCalendarMode()\n        });\n        tooltipDetails = capitalizeFirstWord(tooltipDetails, 'single');\n      } else {\n        tooltipDetails = startDate.getFullYear() === endDate.getFullYear() ? startMonthDate + ' - ' + endMonthYearDate : startMonthYearDate + ' - ' + endMonthYearDate;\n      }\n\n      var tooltipTime = record[fields.isAllDay] ? this.parent.localeObj.getConstant('allDay') : startTime + ' - ' + endTime;\n      var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' + '<div class=\"e-location\">' + tooltipLocation + '</div>' + '<div class=\"e-details\">' + tooltipDetails + '</div>' + '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n      this.setContent(content);\n    }\n\n    this.parent.renderTemplates();\n  };\n\n  EventTooltip.prototype.onBeforeClose = function () {\n    this.parent.resetTemplates(['tooltipTemplate', 'headerTooltipTemplate']);\n  };\n\n  EventTooltip.prototype.setContent = function (content) {\n    this.tooltipObj.setProperties({\n      content: content\n    }, true);\n  };\n\n  EventTooltip.prototype.close = function () {\n    this.tooltipObj.close();\n  };\n\n  EventTooltip.prototype.destroy = function () {\n    this.tooltipObj.destroy();\n    addClass([this.parent.element], 'e-control');\n    this.tooltipObj = null;\n    this.parent = null;\n  };\n\n  return EventTooltip;\n}();\n\nvar __extends$4 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar DAYPOSITION = 'e-day-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLABEL = 'e-end-on-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL$1 = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON$1 = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n  none: '',\n  daily: 'days',\n  weekly: 'weeks',\n  monthly: 'months',\n  yearly: 'years'\n};\nvar valueData = {\n  'sun': RULESUNDAY,\n  'mon': RULEMONDAY,\n  'tue': RULETUESDAY,\n  'wed': RULEWEDNESDAY,\n  'thu': RULETHURSDAY,\n  'fri': RULEFRIDAY,\n  'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\n\nvar RecurrenceEditor =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$4(RecurrenceEditor, _super);\n  /**\n   * Constructor for creating the widget\n   *\n   * @param {RecurrenceEditorModel} options Accepts the recurrence editor model properties to initiate the rendering\n   * @param {string | HTMLElement} element Accepts the DOM element reference\n   */\n\n\n  function RecurrenceEditor(options, element) {\n    var _this = _super.call(this, options, element) || this; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    _this.defaultLocale = {\n      none: 'None',\n      daily: 'Daily',\n      weekly: 'Weekly',\n      monthly: 'Monthly',\n      month: 'Month',\n      yearly: 'Yearly',\n      never: 'Never',\n      until: 'Until',\n      count: 'Count',\n      first: 'First',\n      second: 'Second',\n      third: 'Third',\n      fourth: 'Fourth',\n      last: 'Last',\n      repeat: 'Repeat',\n      repeatEvery: 'Repeat every',\n      on: 'Repeat On',\n      end: 'End',\n      onDay: 'Day',\n      days: 'Day(s)',\n      weeks: 'Week(s)',\n      months: 'Month(s)',\n      years: 'Year(s)',\n      every: 'every',\n      summaryTimes: 'time(s)',\n      summaryOn: 'on',\n      summaryUntil: 'until',\n      summaryRepeat: 'Repeats',\n      summaryDay: 'day(s)',\n      summaryWeek: 'week(s)',\n      summaryMonth: 'month(s)',\n      summaryYear: 'year(s)',\n      monthWeek: 'Month Week',\n      monthPosition: 'Month Position',\n      monthExpander: 'Month Expander',\n      yearExpander: 'Year Expander',\n      repeatInterval: 'Repeat Interval'\n    };\n    _this.renderStatus = false;\n    _this.dayButtons = [];\n    _this.monthButtons = [];\n    return _this;\n  }\n\n  RecurrenceEditor.prototype.startState = function (freq, endOn, startDate) {\n    this.showFormElement();\n    this.updateForm(freq);\n    this.freshOnEndForm();\n    this.updateEndOnForm(endOn);\n    this.selectMonthDay(startDate);\n    this.updateUntilDate(startDate);\n    this.onMonthDay.setProperties({\n      checked: true\n    });\n  };\n\n  RecurrenceEditor.prototype.preRender = function () {\n    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    this.calendarUtil = getCalendarUtil(this.calendarMode);\n  };\n\n  RecurrenceEditor.prototype.applyCustomClass = function (cssClass) {\n    if (cssClass) {\n      addClass([this.element], cssClass.split(' '));\n    }\n  };\n\n  RecurrenceEditor.prototype.initialize = function () {\n    addClass([this.element], 'e-' + this.getModuleName());\n    this.renderComponent();\n\n    if (!isNullOrUndefined(this.value) && this.value !== '') {\n      this.setRecurrenceRule(this.value);\n    } else {\n      if (!isNullOrUndefined(this.repeatType.value)) {\n        this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n        this.updateForm(this.repeatType.value.toString());\n      }\n\n      if (this.selectedType > 0) {\n        this.setProperties({\n          value: this.getRecurrenceRule()\n        }, false);\n      }\n    }\n\n    this.applyCustomClass(this.cssClass);\n  };\n\n  RecurrenceEditor.prototype.triggerChangeEvent = function () {\n    var _this = this;\n\n    if (this.renderStatus) {\n      var value = this.getRecurrenceRule();\n      this.trigger('change', {\n        value: value\n      }, function (args) {\n        return _this.setProperties({\n          value: args.value\n        }, false);\n      });\n    }\n  };\n\n  RecurrenceEditor.prototype.resetDayButton = function () {\n    var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n    elements.forEach(function (element) {\n      return removeClass([element], [ACTIVE, PRIMARY]);\n    });\n  };\n\n  RecurrenceEditor.prototype.daySelection = function (dayIndex) {\n    this.resetDayButton();\n    var days = [0, 1, 2, 3, 4, 5, 6];\n    this.rotateArray(days, this.firstDayOfWeek);\n    var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n\n    if (element) {\n      addClass([element], [ACTIVE, PRIMARY]);\n    }\n  };\n\n  RecurrenceEditor.prototype.rtlClass = function (status) {\n    if (status) {\n      addClass([this.element], RTLCLASS);\n    } else {\n      removeClass([this.element], RTLCLASS);\n    }\n  };\n\n  RecurrenceEditor.prototype.updateUntilDate = function (date) {\n    var tempDate = new Date(date.getTime());\n    tempDate.setDate(tempDate.getDate() + 60);\n    this.untilDateObj.setProperties({\n      value: tempDate\n    });\n  };\n\n  RecurrenceEditor.prototype.selectMonthDay = function (date) {\n    var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n    this.monthDate.setProperties({\n      value: this.calendarUtil.getDate(date)\n    });\n    this.monthWeekDays.setProperties({\n      value: valueData[weekday[date.getDay()]]\n    });\n    this.monthValue.setProperties({\n      value: '' + this.calendarUtil.getMonth(date)\n    });\n    this.monthWeekPos.setProperties({\n      value: this.getDayPosition(date)\n    });\n    this.daySelection(date.getDay());\n  };\n\n  RecurrenceEditor.prototype.updateForm = function (state) {\n    var _this = this;\n\n    this.repeatType.setProperties({\n      value: state\n    });\n    var end = this.element.querySelector('.' + ENDON);\n\n    if (state === DAILY) {\n      classList(end, [FORMLEFT], [FORMRIGHT]);\n    } else {\n      classList(end, [FORMRIGHT], [FORMLEFT]);\n    }\n\n    switch (state) {\n      case NONE:\n        neverClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case WEEKLY:\n        weekClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case MONTHLY:\n        monthClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case YEARLY:\n        yearClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case DAILY:\n        dailyClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n    }\n  };\n\n  RecurrenceEditor.prototype.updateEndOnForm = function (state) {\n    var _this = this;\n\n    this.endType.setProperties({\n      value: state\n    });\n\n    switch (state) {\n      case NEVER:\n        noEndClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case UNTIL$1:\n        endOnDateClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n\n      case COUNT:\n        endOnCountClassList.forEach(function (className) {\n          return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER);\n        });\n        break;\n    }\n  };\n\n  RecurrenceEditor.prototype.freshOnEndForm = function () {\n    var _this = this;\n\n    noEndClassList.forEach(function (className) {\n      var element = _this.element.querySelector('.' + className);\n\n      if (element) {\n        removeClass([element], HIDEWRAPPER);\n      }\n    });\n  };\n\n  RecurrenceEditor.prototype.showFormElement = function () {\n    var _this = this;\n\n    neverClassList.forEach(function (className) {\n      var hideElement = _this.element.querySelector('.' + className);\n\n      if (hideElement) {\n        removeClass([hideElement], HIDEWRAPPER);\n      }\n    });\n  };\n\n  RecurrenceEditor.prototype.renderDropdowns = function () {\n    var _this = this; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n    var self = this;\n    this.repeatType = new DropDownList({\n      //set the data to dataSource property\n      dataSource: this.getRepeatData(),\n      floatLabelType: 'Always',\n      enableRtl: this.enableRtl,\n      index: this.selectedType,\n      fields: {\n        text: TEXTFIELD,\n        value: VALUEFIELD\n      },\n      placeholder: this.localeObj.getConstant(REPEAT),\n      htmlAttributes: {\n        'title': this.localeObj.getConstant(REPEAT),\n        role: 'option'\n      },\n      change: function (args) {\n        self.setProperties({\n          selectedType: _this.frequencies.indexOf(args.value)\n        }, false);\n        self.element.querySelector('.' + REPEATCONTENT).innerHTML = self.localeObj.getConstant(contentType[args.value]);\n        self.showFormElement();\n        self.updateForm(args.value);\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    }); // set placeholder to DropDownList input element\n\n    this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n    this.endType = new DropDownList({\n      dataSource: this.getEndData(),\n      popupWidth: this.getPopupWidth(),\n      enableRtl: this.enableRtl,\n      index: 1,\n      fields: {\n        text: TEXTFIELD,\n        value: VALUEFIELD\n      },\n      htmlAttributes: {\n        role: 'option'\n      },\n      change: function (args) {\n        self.freshOnEndForm();\n        self.updateEndOnForm(args.value);\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n\n    var renderDropDownList = function (dropDownData) {\n      return new DropDownList({\n        dataSource: dropDownData,\n        popupWidth: _this.getPopupWidth(),\n        enableRtl: _this.enableRtl,\n        fields: {\n          text: TEXTFIELD,\n          value: VALUEFIELD\n        },\n        htmlAttributes: {\n          role: 'option'\n        },\n        index: 1,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        change: function (args) {\n          self.onWeekDay.setProperties({\n            checked: true\n          });\n          self.resetFormValues();\n          self.triggerChangeEvent();\n        }\n      });\n    };\n\n    this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n    this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n    this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n    this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n    this.monthValue = new DropDownList({\n      dataSource: this.getMonthData(),\n      fields: {\n        text: TEXTFIELD,\n        value: VALUEFIELD\n      },\n      htmlAttributes: {\n        role: 'option'\n      },\n      enableRtl: this.enableRtl,\n      index: 7,\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      change: function (args) {\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n  };\n\n  RecurrenceEditor.prototype.setDefaultValue = function () {\n    var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n\n    for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n      var element = formelement_1[_i];\n      var instance = element.ej2_instances[0];\n\n      if (instance.element.classList.contains(REPEATINTERVAL)) {\n        instance.value = 1;\n        instance.dataBind();\n      } else if (instance.element.classList.contains(ENDONCOUNT)) {\n        instance.value = 10;\n        instance.dataBind();\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.resetFormValues = function () {\n    var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n\n    for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {\n      var element = recurreneElement_1[_i];\n      var instance = void 0;\n\n      if (element.classList.contains('e-datepicker')) {\n        instance = element.ej2_instances[0];\n\n        if (instance.value) {\n          // eslint-disable-next-line no-self-assign\n          instance.value = instance.value;\n          instance.dataBind();\n        } else {\n          this.updateUntilDate(this.startDate);\n        }\n      } else if (element.classList.contains('e-dropdownlist')) {\n        instance = element.ej2_instances[0];\n        instance.index = instance.index || 0;\n        instance.dataBind();\n      } else if (element.classList.contains('e-numerictextbox')) {\n        instance = element.ej2_instances[0];\n        var value = void 0;\n\n        if (instance.element.classList.contains(REPEATINTERVAL)) {\n          value = 1;\n        } else if (instance.element.classList.contains(ENDONCOUNT)) {\n          value = 10;\n        } else {\n          value = this.startDate.getDate();\n        }\n\n        instance.value = instance.value || value;\n        instance.dataBind();\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.getPopupWidth = function () {\n    return Browser.isDevice ? '100%' : 'auto';\n  };\n\n  RecurrenceEditor.prototype.renderDatePickers = function () {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var self = this;\n    this.untilDateObj = new DatePicker({\n      firstDayOfWeek: this.firstDayOfWeek,\n      enableRtl: this.enableRtl,\n      locale: this.locale,\n      min: this.minDate,\n      max: this.maxDate,\n      format: isNullOrUndefined(this.dateFormat) ? this.getFormat('dateFormats') : this.dateFormat,\n      change: function (args) {\n        if (args.value) {\n          self.triggerChangeEvent();\n        }\n      }\n    });\n    this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n  };\n\n  RecurrenceEditor.prototype.getFormat = function (formatType) {\n    var format;\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      format = getValue(formatType + '.short', getDefaultDateObject(this.getCalendarMode()));\n    } else {\n      format = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.' + formatType + '.short', cldrData);\n    }\n\n    return format;\n  };\n\n  RecurrenceEditor.prototype.dayButtonRender = function () {\n    var _this = this;\n\n    var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button')); // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    var self = this;\n\n    for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {\n      var btn = btns_1[_i];\n      var button = new Button({\n        isToggle: true,\n        enableRtl: this.enableRtl\n      }, btn);\n      this.dayButtons.push(button);\n      EventHandler.add(btn, 'click', function (args) {\n        var btns = [].slice.call(_this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n        var element = args.target;\n\n        if (!element.classList.contains(PRIMARY)) {\n          addClass([element], PRIMARY);\n          self.triggerChangeEvent();\n        } else if (btns.length > 1) {\n          removeClass([element], PRIMARY);\n          self.triggerChangeEvent();\n        }\n      });\n    }\n  };\n\n  RecurrenceEditor.prototype.radioButtonRender = function () {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var self = this;\n    this.onMonthDay = new RadioButton({\n      label: this.localeObj.getConstant(RADIOLABEL),\n      enableRtl: this.enableRtl,\n      name: 'monthType',\n      value: 'day',\n      change: function () {\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n    this.monthButtons.push(this.onMonthDay);\n    this.onWeekDay = new RadioButton({\n      label: this.localeObj.getConstant('monthExpander'),\n      cssClass: 'e-month-type',\n      name: 'monthType',\n      enableRtl: this.enableRtl,\n      value: 'daypos',\n      change: function () {\n        self.resetFormValues();\n        self.triggerChangeEvent();\n      }\n    });\n    this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n    this.monthButtons.push(this.onWeekDay);\n  };\n\n  RecurrenceEditor.prototype.numericTextboxRender = function () {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var self = this;\n    this.recurrenceCount = new NumericTextBox({\n      value: 10,\n      format: '#',\n      enableRtl: this.enableRtl,\n      min: 1,\n      max: 999,\n      change: function () {\n        self.triggerChangeEvent();\n      }\n    });\n    this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n    this.monthDate = new NumericTextBox({\n      value: 1,\n      format: '#',\n      enableRtl: this.enableRtl,\n      min: 1,\n      max: 31,\n      change: function () {\n        self.onMonthDay.setProperties({\n          checked: true\n        });\n        self.triggerChangeEvent();\n      }\n    });\n    this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n    this.repeatInterval = new NumericTextBox({\n      value: 1,\n      format: '#',\n      min: 1,\n      max: 999,\n      enableRtl: this.enableRtl,\n      floatLabelType: 'Always',\n      placeholder: this.localeObj.getConstant(REPEATEVERY),\n      change: function () {\n        self.triggerChangeEvent();\n      }\n    });\n    this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n  };\n\n  RecurrenceEditor.prototype.renderComponent = function () {\n    this.setTemplate();\n    this.renderDropdowns();\n    this.renderDatePickers();\n    this.dayButtonRender();\n    this.radioButtonRender();\n    this.numericTextboxRender();\n  };\n\n  RecurrenceEditor.prototype.rotateArray = function (data, count) {\n    var temp;\n\n    for (var index = 0; index < count; index++) {\n      temp = data.shift();\n      data.push(temp);\n    }\n  };\n\n  RecurrenceEditor.prototype.getEndData = function () {\n    var endData = [NEVER, UNTIL$1, COUNT]; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    var self = this;\n    var dataSource = [];\n    endData.forEach(function (data) {\n      dataSource.push({\n        text: self.localeObj.getConstant(data),\n        value: data\n      });\n    });\n    return dataSource;\n  };\n\n  RecurrenceEditor.prototype.getDayPosition = function (date) {\n    var temp = new Date(date.getTime());\n    var endDate = new Date(date.getTime());\n    var day = date.getDay();\n    var positionCollection = [];\n    temp = this.calendarUtil.getMonthStartDate(temp);\n    endDate = this.calendarUtil.getMonthEndDate(endDate);\n\n    while (temp < endDate) {\n      if (temp.getDay() === day) {\n        positionCollection.push(temp.getTime());\n      }\n\n      temp.setDate(temp.getDate() + 1);\n    }\n\n    if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n      return -1;\n    }\n\n    return positionCollection.indexOf(date.getTime()) + 1;\n  };\n\n  RecurrenceEditor.prototype.getRepeatData = function () {\n    var data = []; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    var self = this;\n    this.frequencies.forEach(function (element) {\n      var textValue = element === NONE ? NEVER : element;\n      data.push({\n        text: self.localeObj.getConstant(textValue),\n        value: element\n      });\n    });\n    return data;\n  };\n\n  RecurrenceEditor.prototype.getMonthPosData = function () {\n    var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n    var monthposValue = {\n      first: 1,\n      second: 2,\n      third: 3,\n      fourth: 4,\n      last: -1\n    }; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n    var self = this;\n    var dataSource = [];\n    monthpos.forEach(function (data) {\n      dataSource.push({\n        text: self.localeObj.getConstant(data),\n        value: monthposValue[\"\" + data]\n      });\n    });\n    return dataSource;\n  };\n\n  RecurrenceEditor.prototype.getDayData = function (format) {\n    var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n    var dayData = [];\n    var cldrObj;\n    this.rotateArray(weekday, this.firstDayOfWeek);\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      var nameSpaceString = 'days.stand-alone.';\n      cldrObj = getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode()));\n    } else {\n      var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format;\n      cldrObj = getValue(nameSpaceString, cldrData);\n    }\n\n    for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {\n      var obj = weekday_1[_i];\n      var day = getValue(obj, cldrObj);\n      dayData.push({\n        text: format === 'narrow' ? day : capitalizeFirstWord(day, 'single'),\n        value: valueData[\"\" + obj]\n      });\n    }\n\n    return dayData;\n  };\n\n  RecurrenceEditor.prototype.getMonthData = function () {\n    var monthData = [];\n    var cldrObj;\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      var nameSpaceString = 'months.stand-alone.wide';\n      cldrObj = getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode()));\n    } else {\n      var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide';\n      cldrObj = getValue(nameSpaceString, cldrData);\n    }\n\n    for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n      var obj = _a[_i];\n      monthData.push({\n        text: capitalizeFirstWord(getValue(obj, cldrObj), 'single'),\n        value: obj\n      });\n    }\n\n    return monthData;\n  };\n\n  RecurrenceEditor.prototype.setTemplate = function () {\n    var dayData = this.getDayData('narrow');\n    var fullDay = this.getDayData('wide');\n    this.element.innerHTML = '<div class=\"' + HEADER + '\">' + '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT + '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' + '</div><div class=\"' + INPUTWARAPPER + ' ' + INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' + '<td><input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + REPEATINTERVAL + '\" class=\"' + REPEATINTERVAL + '\"title=\"' + this.localeObj.getConstant('repeatEvery') + '\" /></td>' + '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' + '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' + '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' + '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' + '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' + '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' + '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' + '<div class=\"' + YEAREXPANDERWRAPPER + '\">' + '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' + this.localeObj.getConstant('yearExpander') + '\"/>' + '</div>' + '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' + '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' + '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' + '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' + '</div></td>' + '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' + '<input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + MONTHDAYWRAPPER + '\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' + this.localeObj.getConstant('on') + '\" />' + '</div></td></tr>' + '<tr><td>' + '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' + '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' + '</div></td>' + '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' + '</div></td>' + '<td><div class=\"' + INPUTWARAPPER + ' ' + DAYPOSITION + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' + '</div></td></tr></table>' + '</div></div>' + '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' + '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' + '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' + '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL$1) + '\" />' + '</div>' + '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' + '<input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + ENDONCOUNT + '\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' + '</div></div>' + '</div></div>';\n  };\n\n  RecurrenceEditor.prototype.getSelectedDaysData = function () {\n    var ruleData = RULEBYDAY + EQUAL;\n    var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n    var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n    this.rotateArray(weekday, this.firstDayOfWeek);\n\n    for (var index = 0; index < elements.length; index++) {\n      ruleData += weekday[parseInt(elements[parseInt(index.toString(), 10)].getAttribute('data-index'), 10)] + (index === elements.length - 1 ? '' : COMMA);\n    }\n\n    return ruleData + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.getSelectedMonthData = function () {\n    var ruleData;\n\n    if (this.onWeekDay.checked) {\n      ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n    } else {\n      ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n    }\n\n    return ruleData;\n  };\n\n  RecurrenceEditor.prototype.getIntervalData = function () {\n    return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.getEndOnCount = function () {\n    return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.getYearMonthRuleData = function () {\n    return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.updateWeekButton = function (keys) {\n    var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n    this.rotateArray(weekday, this.firstDayOfWeek);\n\n    for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {\n      var obj = _a[_i];\n      var index = parseInt(obj.element.getAttribute('data-index'), 10);\n\n      if (keys.indexOf(weekday[parseInt(index.toString(), 10)]) !== -1) {\n        obj.setProperties({\n          isPrimary: true\n        });\n      } else {\n        obj.setProperties({\n          isPrimary: false\n        });\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.updateMonthUI = function () {\n    if (this.ruleObject.monthDay.length) {\n      this.monthDate.setProperties({\n        value: this.ruleObject.monthDay[0]\n      });\n      this.onMonthDay.setProperties({\n        checked: true\n      });\n    } else {\n      this.onWeekDay.setProperties({\n        checked: true\n      });\n      this.monthWeekPos.setProperties({\n        value: this.ruleObject.setPosition\n      });\n\n      for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {\n        var key = _a[_i];\n\n        if (valueData[\"\" + key] === this.ruleObject.day[0]) {\n          this.monthWeekDays.setProperties({\n            value: this.ruleObject.day[0]\n          });\n          break;\n        }\n      }\n    }\n  };\n\n  RecurrenceEditor.prototype.updateUI = function (repeat, state) {\n    this.repeatInterval.setProperties({\n      value: this.ruleObject.interval\n    });\n\n    switch (state) {\n      case UNTIL$1:\n        this.untilDateObj.setProperties({\n          value: this.ruleObject.until\n        });\n        break;\n\n      case COUNT:\n        this.recurrenceCount.setProperties({\n          value: this.ruleObject.count\n        });\n        break;\n    }\n\n    switch (repeat) {\n      case WEEKLY:\n        this.updateWeekButton(this.ruleObject.day);\n        break;\n\n      case YEARLY:\n        this.monthValue.setProperties({\n          index: this.ruleObject.month[0] - 1\n        });\n        this.updateMonthUI();\n        break;\n\n      case MONTHLY:\n        this.updateMonthUI();\n        break;\n    }\n  };\n\n  RecurrenceEditor.prototype.getUntilData = function () {\n    if (!this.untilDateObj.value) {\n      return '';\n    }\n\n    var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n    return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n  };\n\n  RecurrenceEditor.prototype.destroyComponents = function () {\n    if (!this.recurrenceCount.isDestroyed) {\n      this.recurrenceCount.destroy();\n      this.recurrenceCount = null;\n    }\n\n    if (!this.monthDate.isDestroyed) {\n      this.monthDate.destroy();\n      this.monthDate = null;\n    }\n\n    if (!this.repeatInterval.isDestroyed) {\n      this.repeatInterval.destroy();\n      this.repeatInterval = null;\n    }\n\n    if (!this.untilDateObj.isDestroyed) {\n      this.untilDateObj.destroy();\n      this.untilDateObj = null;\n    }\n\n    if (!this.repeatType.isDestroyed) {\n      this.repeatType.destroy();\n      this.repeatType = null;\n    }\n\n    if (!this.endType.isDestroyed) {\n      this.endType.destroy();\n      this.endType = null;\n    }\n\n    if (!this.monthWeekPos.isDestroyed) {\n      this.monthWeekPos.destroy();\n      this.monthWeekPos = null;\n    }\n\n    if (!this.monthWeekDays.isDestroyed) {\n      this.monthWeekDays.destroy();\n      this.monthWeekDays = null;\n    }\n\n    if (!this.monthValue.isDestroyed) {\n      this.monthValue.destroy();\n      this.monthValue = null;\n    }\n\n    if (!this.onMonthDay.isDestroyed) {\n      this.onMonthDay.destroy();\n      this.onMonthDay = null;\n    }\n\n    if (!this.onWeekDay.isDestroyed) {\n      this.onWeekDay.destroy();\n      this.onWeekDay = null;\n    }\n\n    this.dayButtons.forEach(function (element) {\n      if (!element.isDestroyed) {\n        element.destroy();\n      }\n    });\n    this.dayButtons = [];\n    this.monthButtons.forEach(function (element) {\n      if (!element.isDestroyed) {\n        element.destroy();\n      }\n    });\n    this.monthButtons = [];\n  };\n\n  RecurrenceEditor.prototype.resetFields = function () {\n    this.startState(NONE, NEVER, this.startDate);\n    this.setDefaultValue();\n  };\n\n  RecurrenceEditor.prototype.updateRuleUntilDate = function (startDate) {\n    if (this.untilDateObj.value && startDate) {\n      var untilDate = this.untilDateObj.value;\n      var newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());\n      this.untilDateObj.setProperties({\n        value: newUntilDate\n      });\n    }\n  };\n\n  RecurrenceEditor.prototype.getCalendarMode = function () {\n    return this.calendarMode.toLowerCase();\n  };\n\n  RecurrenceEditor.prototype.getRuleSummary = function (rule) {\n    if (rule === void 0) {\n      rule = this.getRecurrenceRule();\n    }\n\n    return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n  };\n\n  RecurrenceEditor.prototype.getRecurrenceDates = function (startDate, rule, excludeDate, maximumCount, viewDate) {\n    viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n    return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n  };\n\n  RecurrenceEditor.prototype.getRecurrenceRule = function () {\n    var ruleData = RULEFREQ + EQUAL;\n\n    switch (this.repeatType.value) {\n      case DAILY:\n        ruleData += RULEDAILY + SEMICOLON;\n        break;\n\n      case WEEKLY:\n        ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n        break;\n\n      case MONTHLY:\n        ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n        break;\n\n      case YEARLY:\n        ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n        break;\n\n      case NONE:\n        return '';\n    }\n\n    ruleData += this.getIntervalData();\n\n    switch (this.endType.value) {\n      case UNTIL$1:\n        ruleData += this.getUntilData();\n        break;\n\n      case COUNT:\n        ruleData += this.getEndOnCount();\n        break;\n    }\n\n    return ruleData;\n  };\n\n  RecurrenceEditor.prototype.setRecurrenceRule = function (rule, startDate) {\n    if (startDate === void 0) {\n      startDate = this.startDate;\n    }\n\n    if (!rule) {\n      this.repeatType.setProperties({\n        value: NONE\n      });\n      return;\n    }\n\n    this.renderStatus = false;\n    this.ruleObject = extractObjectFromRule(rule);\n    var endon = this.ruleObject.count ? COUNT : this.ruleObject.until ? UNTIL$1 : NEVER;\n\n    switch (this.ruleObject.freq) {\n      case RULEDAILY:\n        this.startState(DAILY, endon, startDate);\n        this.updateUI(DAILY, endon);\n        break;\n\n      case RULEWEEKLY:\n        this.startState(WEEKLY, endon, startDate);\n        this.updateUI(WEEKLY, endon);\n        break;\n\n      case RULEMONTHLY:\n        this.startState(MONTHLY, endon, startDate);\n        this.updateUI(MONTHLY, endon);\n        break;\n\n      case RULEYEARLY:\n        this.startState(YEARLY, endon, startDate);\n        this.updateUI(YEARLY, endon);\n        break;\n    }\n\n    this.renderStatus = true;\n    this.triggerChangeEvent();\n  };\n\n  RecurrenceEditor.prototype.detachInputs = function () {\n    var inputElements = [].slice.call(this.element.querySelectorAll('input'));\n\n    for (var _i = 0, inputElements_1 = inputElements; _i < inputElements_1.length; _i++) {\n      var element = inputElements_1[_i];\n      detach(element);\n    }\n  };\n  /**\n   * Destroys the widget.\n   *\n   * @returns {void}\n   */\n\n\n  RecurrenceEditor.prototype.destroy = function () {\n    if (!this.isDestroyed) {\n      this.destroyComponents();\n\n      _super.prototype.destroy.call(this);\n\n      var removeClasses = ['e-' + this.getModuleName()];\n\n      if (this.cssClass) {\n        removeClasses = removeClasses.concat(this.cssClass.split(' '));\n      }\n\n      removeClass([this.element], removeClasses);\n      this.detachInputs();\n\n      while (this.element.firstElementChild) {\n        this.element.removeChild(this.element.firstElementChild);\n      }\n    }\n  };\n  /**\n   * Get component name.\n   *\n   * @returns {string} Returns the module name\n   * @private\n   */\n\n\n  RecurrenceEditor.prototype.getModuleName = function () {\n    return 'recurrenceeditor';\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted state\n   */\n\n\n  RecurrenceEditor.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Initialize the control rendering\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  RecurrenceEditor.prototype.render = function () {\n    this.initialize();\n    this.rtlClass(this.enableRtl);\n    this.renderStatus = true;\n    this.renderComplete();\n  };\n  /**\n   * Called internally, if any of the property value changed.\n   *\n   * @param {RecurrenceEditorModel} newProp Accepts the changed properties new values\n   * @param {RecurrenceEditorModel} oldProp Accepts the changed properties old values\n   * @returns {void}\n   * @private\n   */\n\n\n  RecurrenceEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'startDate':\n          this.selectMonthDay(newProp.startDate);\n          this.updateUntilDate(newProp.startDate);\n          this.endType.setProperties({\n            index: 0\n          });\n          break;\n\n        case 'enableRtl':\n          this.rtlClass(newProp.enableRtl);\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.element], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([this.element], newProp.cssClass.split(' '));\n          }\n\n          break;\n\n        case 'selectedType':\n          this.repeatType.setProperties({\n            index: this.selectedType\n          });\n          break;\n\n        case 'minDate':\n          this.untilDateObj.setProperties({\n            minDate: this.minDate\n          });\n          break;\n\n        case 'maxDate':\n          this.untilDateObj.setProperties({\n            maxDate: this.maxDate\n          });\n          break;\n\n        case 'value':\n          if (this.getRecurrenceRule() !== this.value) {\n            this.setRecurrenceRule(this.value);\n          }\n\n          break;\n\n        case 'calendarMode':\n          this.calendarMode = newProp.calendarMode;\n          this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n          break;\n\n        case 'locale':\n        case 'frequencies':\n        case 'firstDayOfWeek':\n          this.refresh();\n          break;\n\n        case 'dateFormat':\n          this.untilDateObj.setProperties({\n            format: newProp.dateFormat\n          });\n          break;\n      }\n    }\n  };\n\n  __decorate$1([Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])], RecurrenceEditor.prototype, \"frequencies\", void 0);\n\n  __decorate$1([Property(0)], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n\n  __decorate$1([Property(new Date())], RecurrenceEditor.prototype, \"startDate\", void 0);\n\n  __decorate$1([Property()], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n\n  __decorate$1([Property('Gregorian')], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n\n  __decorate$1([Property()], RecurrenceEditor.prototype, \"cssClass\", void 0);\n\n  __decorate$1([Property()], RecurrenceEditor.prototype, \"value\", void 0);\n\n  __decorate$1([Property(new Date(1900, 0, 1))], RecurrenceEditor.prototype, \"minDate\", void 0);\n\n  __decorate$1([Property(new Date(2099, 11, 31))], RecurrenceEditor.prototype, \"maxDate\", void 0);\n\n  __decorate$1([Property(0)], RecurrenceEditor.prototype, \"selectedType\", void 0);\n\n  __decorate$1([Event()], RecurrenceEditor.prototype, \"change\", void 0);\n\n  RecurrenceEditor = __decorate$1([NotifyPropertyChanges], RecurrenceEditor);\n  return RecurrenceEditor;\n}(Component);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_FIELD$1 = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\n\nvar EventWindow =\n/** @__PURE__ @class */\nfunction () {\n  function EventWindow(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fields = this.parent.eventFields;\n    this.eventWindowTime = {\n      startTime: new Date(),\n      endTime: new Date()\n    };\n    this.renderEventWindow();\n  }\n\n  EventWindow.prototype.renderEventWindow = function () {\n    this.element = createElement('div', {\n      id: this.parent.element.id + '_dialog_wrapper'\n    });\n    this.parent.element.appendChild(this.element);\n    var dialogModel = {\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      content: this.getEventWindowContent(),\n      cssClass: EVENT_WINDOW_DIALOG_CLASS,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      height: this.parent.isAdaptive ? '100%' : 'auto',\n      minHeight: '300px',\n      isModal: true,\n      showCloseIcon: this.parent.isAdaptive ? false : true,\n      target: document.body,\n      visible: false,\n      width: '500px',\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this)\n    };\n\n    if (this.parent.isAdaptive) {\n      dialogModel.cssClass = EVENT_WINDOW_DIALOG_CLASS + ' ' + DEVICE_CLASS;\n      dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n    } else {\n      dialogModel.buttons = [{\n        buttonModel: {\n          content: this.l10n.getConstant('deleteButton'),\n          cssClass: DELETE_EVENT_CLASS,\n          disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n        },\n        click: this.eventDelete.bind(this)\n      }, {\n        buttonModel: {\n          content: this.l10n.getConstant('saveButton'),\n          cssClass: 'e-primary ' + EVENT_WINDOW_SAVE_BUTTON_CLASS,\n          isPrimary: true,\n          disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n        },\n        click: this.eventSave.bind(this)\n      }, {\n        buttonModel: {\n          cssClass: EVENT_WINDOW_CANCEL_BUTTON_CLASS,\n          content: this.l10n.getConstant('cancelButton')\n        },\n        click: this.dialogClose.bind(this)\n      }];\n      dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n    }\n\n    this.dialogObject = new Dialog(dialogModel, this.element);\n\n    if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n      this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n    }\n\n    addClass([this.element.parentElement], EVENT_WINDOW_DIALOG_CLASS + '-container');\n\n    if (this.parent.isAdaptive) {\n      EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n      EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n    }\n\n    EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n    this.applyFormValidation();\n  };\n\n  EventWindow.prototype.refresh = function () {\n    this.destroy(true);\n    this.renderEventWindow();\n  };\n\n  EventWindow.prototype.refreshRecurrenceEditor = function () {\n    if (this.recurrenceEditor) {\n      var recurrenceEditor = this.recurrenceEditor.element;\n      this.recurrenceEditor.destroy();\n      this.createRecurrenceEditor(recurrenceEditor);\n    }\n  };\n\n  EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n    if (this.parent.editorTemplate) {\n      this.recurrenceEditor = recurrenceEditor;\n    }\n  };\n\n  EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n    this.parent.currentAction = type;\n    this.parent.removeNewEventElement();\n\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide(true);\n    }\n\n    this.parent.inlineModule.removeInlineAppointmentElement();\n\n    if (type === 'Add') {\n      var eventObj = {};\n      this.cellClickAction = !isEventData;\n      this.parent.activeCellsData = data;\n      var event_1 = data;\n\n      if (this.cellClickAction) {\n        this.convertToEventData(event_1, eventObj);\n      } else {\n        this.parent.activeCellsData = {\n          startTime: event_1.startTime || event_1[this.fields.startTime],\n          endTime: event_1.endTime || event_1[this.fields.endTime],\n          isAllDay: event_1.isAllDay || event_1[this.fields.isAllDay],\n          element: event_1.element,\n          groupIndex: event_1.groupIndex\n        };\n        eventObj = event_1;\n      }\n\n      data = eventObj;\n    }\n\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n    }\n\n    if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n    }\n\n    switch (type) {\n      case 'Add':\n        this.onCellDetailsUpdate(data, repeatType);\n        break;\n\n      case 'Save':\n      case 'EditOccurrence':\n      case 'EditSeries':\n      case 'EditFollowingEvents':\n        if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n          addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n        }\n\n        this.cellClickAction = false;\n        this.onEventDetailsUpdate(data);\n        break;\n    }\n  };\n\n  EventWindow.prototype.setDialogContent = function () {\n    this.dialogObject.content = this.getEventWindowContent();\n    this.dialogObject.dataBind();\n    this.applyFormValidation();\n  };\n\n  EventWindow.prototype.preventEventSave = function (e) {\n    if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n      this.isEnterKey = true;\n    }\n  };\n\n  EventWindow.prototype.onBeforeOpen = function (args) {\n    var _this = this;\n\n    var endTime = this.eventData[this.fields.endTime].getTime();\n    var eventProp = {\n      type: 'Editor',\n      data: this.eventData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n\n    if (this.cellClickAction) {\n      eventProp.duration = this.getSlotDuration();\n    }\n\n    var saveObj = this.getInstance(EVENT_WINDOW_SAVE_BUTTON_CLASS);\n\n    if (saveObj) {\n      saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n      saveObj.dataBind();\n    }\n\n    var deleteObj = this.getInstance(DELETE_EVENT_CLASS);\n\n    if (deleteObj) {\n      deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n      deleteObj.dataBind();\n    }\n\n    var callBackPromise = new Deferred();\n    this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n      args.cancel = popupArgs.cancel;\n      _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n\n      if (_this.eventData[_this.fields.endTime].getTime() === endTime && !_this.cellClickAction && _this.eventData[_this.fields.endTime].getHours() === 0 && _this.eventData[_this.fields.endTime].getMinutes() === 0) {\n        _this.eventData = extend({}, _this.eventData, null, true);\n\n        _this.trimAllDay(_this.eventData);\n      }\n\n      _this.refreshDateTimePicker(_this.duration);\n\n      if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n        var startObj = _this.getInstance(EVENT_WINDOW_START_CLASS);\n\n        var endObj = _this.getInstance(EVENT_WINDOW_END_CLASS);\n\n        endObj.value = new Date(startObj.value.getTime() + MS_PER_MINUTE * popupArgs.duration);\n        endObj.dataBind();\n      }\n\n      if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n        _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n      }\n\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n\n  EventWindow.prototype.onBeforeClose = function (args) {\n    var _this = this;\n\n    if (args.isInteracted) {\n      this.isCrudAction = false;\n    }\n\n    var eventProp = {\n      type: 'Editor',\n      event: args.event || this.dialogEvent,\n      data: this.eventCrudData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    var callBackPromise = new Deferred();\n    this.parent.trigger(popupClose, eventProp, function (popupArgs) {\n      args.cancel = popupArgs.cancel;\n\n      if (!popupArgs.cancel) {\n        if (_this.isCrudAction) {\n          args.cancel = _this.processCrudActions(popupArgs.data);\n          _this.isCrudAction = args.cancel;\n        }\n\n        if (!_this.isCrudAction) {\n          _this.resetForm();\n\n          _this.parent.eventBase.focusElement(true);\n\n          _this.eventCrudData = null;\n        }\n      }\n\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n\n  EventWindow.prototype.getEventWindowContent = function () {\n    var container = createElement('div', {\n      className: FORM_CONTAINER_CLASS\n    });\n    var form = createElement('form', {\n      id: this.parent.element.id + 'EditForm',\n      className: FORM_CLASS,\n      attrs: {\n        onsubmit: 'return false;'\n      }\n    });\n    this.renderFormElements(form);\n    container.appendChild(form);\n    return container;\n  };\n\n  EventWindow.prototype.renderFormElements = function (form, args) {\n    var _this = this;\n\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      if (args) {\n        if (this.fieldValidator) {\n          this.fieldValidator.destroy();\n          this.fieldValidator = null;\n        }\n\n        if (this.recurrenceEditor) {\n          this.recurrenceEditor.destroy();\n          this.recurrenceEditor = null;\n        }\n\n        this.destroyComponents();\n        var formElements = [].slice.call(form.children);\n\n        for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n          var element = formElements_1[_i];\n          remove(element);\n        }\n\n        this.parent.resetTemplates(['editorTemplate']);\n      }\n\n      var templateId = this.parent.element.id + '_editorTemplate';\n      var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n      append(tempEle, form);\n      this.parent.renderTemplates(function () {\n        if (_this.element) {\n          _this.applyFormValidation();\n        }\n      });\n    } else {\n      form.appendChild(this.getDefaultEventWindowContent());\n    }\n  };\n\n  EventWindow.prototype.getDefaultEventWindowContent = function () {\n    var parentDiv = this.createDivElement(EVENT_WINDOW_DIALOG_PARENT_CLASS);\n    var titleLocationDiv = this.createDivElement(EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n    parentDiv.appendChild(titleLocationDiv);\n    titleLocationDiv.appendChild(this.renderTextBox(SUBJECT_CLASS));\n    titleLocationDiv.querySelector('.' + SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n    titleLocationDiv.appendChild(this.renderTextBox(LOCATION_CLASS));\n    titleLocationDiv.querySelector('.' + LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n    var startEndDateTimeDiv = this.createDivElement(EVENT_WINDOW_START_END_DIV_CLASS);\n    parentDiv.appendChild(startEndDateTimeDiv);\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n    startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_END_CLASS));\n    startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n    var allDayTimezoneDiv = this.createDivElement(EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n    parentDiv.appendChild(allDayTimezoneDiv);\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(EVENT_WINDOW_ALL_DAY_CLASS));\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(TIME_ZONE_CLASS));\n    var timezoneParentDiv = this.createDivElement(EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    parentDiv.appendChild(timezoneParentDiv);\n    timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_START_TZ_CLASS));\n    timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_END_TZ_CLASS));\n    var repeatParentDiv = this.createDivElement(EVENT_WINDOW_REPEAT_DIV_CLASS);\n    parentDiv.appendChild(repeatParentDiv);\n    var repeatDiv = this.renderCheckBox(EVENT_WINDOW_REPEAT_CLASS);\n    var repeatEditContainer = createElement('span', {\n      className: REPEAT_CONTAINER_CLASS\n    });\n    var button = createElement('button', {\n      className: REPEAT_BUTTON_CLASS,\n      attrs: {\n        type: 'button',\n        'title': this.l10n.getConstant('editRecurrence')\n      }\n    });\n    this.buttonObj = new Button({\n      iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons',\n      cssClass: 'e-medium ' + this.parent.cssClass\n    });\n    repeatEditContainer.appendChild(button);\n    this.buttonObj.appendTo(button);\n    repeatDiv.appendChild(repeatEditContainer);\n    repeatParentDiv.appendChild(repeatDiv);\n\n    if (this.parent.isAdaptive) {\n      EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n    } else {\n      this.createRecurrenceEditor(parentDiv);\n    }\n\n    if (this.parent.resourceCollection.length > 0) {\n      var resourceParentDiv = this.createDivElement(EVENT_WINDOW_RESOURCES_DIV_CLASS);\n\n      for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n      }\n\n      parentDiv.appendChild(resourceParentDiv);\n    }\n\n    var description = this.createDivElement(DESCRIPTION_CLASS + '-row');\n    description.appendChild(this.renderTextBox(DESCRIPTION_CLASS));\n    description.querySelector('.' + DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n    parentDiv.appendChild(description);\n    var submit = createElement('button', {\n      attrs: {\n        type: 'hidden',\n        title: 'submit',\n        style: 'display:none'\n      }\n    });\n    parentDiv.appendChild(submit);\n    return parentDiv;\n  };\n\n  EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n    var recurrenceEditor = createElement('div', {\n      id: this.parent.element.id + '_recurrence_editor'\n    });\n    parentDiv.appendChild(recurrenceEditor);\n    this.recurrenceEditor = this.renderRecurrenceEditor();\n    this.recurrenceEditor.appendTo(recurrenceEditor);\n    this.updateMinMaxDateToEditor();\n  };\n\n  EventWindow.prototype.createDivElement = function (className) {\n    return createElement('div', {\n      className: className\n    });\n  };\n\n  EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n    return createElement(type || 'input', {\n      className: className,\n      attrs: {\n        type: 'text',\n        name: fieldName,\n        value: '',\n        id: fieldName,\n        title: this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1)) === '' ? fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n      }\n    });\n  };\n\n  EventWindow.prototype.getSlotDuration = function () {\n    return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n  };\n\n  EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n    var dateTimeDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n    dateTimeDiv.appendChild(dateTimeInput);\n    var dateTimePicker = new DateTimePicker({\n      change: changeEvent,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      calendarMode: this.parent.calendarMode,\n      min: this.parent.minDate,\n      max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n      cssClass: this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      floatLabelType: 'Always',\n      timeFormat: this.parent.activeViewOptions.timeFormat,\n      format: (isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n      placeholder: this.getFieldLabel(value),\n      step: this.getSlotDuration(),\n      width: '100%'\n    });\n    dateTimePicker.appendTo(dateTimeInput);\n    return dateTimeDiv;\n  };\n\n  EventWindow.prototype.refreshDateTimePicker = function (duration) {\n    var elementSelector = '.' + EVENT_WINDOW_START_CLASS + ',.' + EVENT_WINDOW_END_CLASS;\n    var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n      var element = startEndElement_1[_i];\n      var instance = element.ej2_instances[0];\n      instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n      instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n      instance.step = duration || this.getSlotDuration();\n      instance.dataBind();\n    }\n  };\n\n  EventWindow.prototype.onTimeChange = function () {\n    var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n\n    if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n      var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n      var duration = 0;\n\n      if (this.cellClickAction) {\n        duration = MS_PER_MINUTE * this.duration;\n        this.eventWindowTime.startTime = startObj.value;\n      } else {\n        duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n      }\n\n      var endDate = isNullOrUndefined(startObj.value) ? null : new Date(startObj.value.getTime() + duration);\n\n      if (this.cellClickAction) {\n        this.eventWindowTime.endTime = endDate;\n      }\n\n      endObj.value = endDate;\n      endObj.dataBind();\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n    }\n  };\n\n  EventWindow.prototype.renderResourceDetails = function (resourceData) {\n    var fieldName = resourceData.field;\n    var value = 'e-' + fieldName;\n    var labelValue = resourceData.title;\n    var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n    var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n    resourceDiv.appendChild(resourceInput);\n    var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' + resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n\n    if (resourceData.allowMultiple) {\n      var listObj = new MultiSelect({\n        enableRtl: this.parent.enableRtl,\n        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n        cssClass: this.parent.cssClass || '',\n        dataSource: resourceData.dataSource,\n        change: this.onMultiselectResourceChange.bind(this),\n        itemTemplate: resourceTemplate,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'title': labelValue,\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        mode: 'Box'\n      });\n      listObj.appendTo(resourceInput);\n    } else {\n      var dropDownList = new DropDownList({\n        cssClass: this.parent.cssClass || '',\n        change: this.onDropdownResourceChange.bind(this),\n        dataSource: resourceData.dataSource,\n        enableRtl: this.parent.enableRtl,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'title': labelValue,\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        itemTemplate: resourceTemplate\n      });\n      dropDownList.appendTo(resourceInput);\n    }\n\n    return resourceDiv;\n  };\n\n  EventWindow.prototype.renderDropDown = function (value) {\n    var _this = this;\n\n    var fieldName = this.getFieldName(value);\n    var timezoneDiv = this.createDivElement(value + '-container');\n    var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n    timezoneDiv.appendChild(timezoneInput);\n    var dropDownList = new DropDownList({\n      allowFiltering: true,\n      change: this.onTimezoneChange.bind(this),\n      cssClass: this.parent.cssClass || '',\n      dataSource: this.parent.timezoneDataSource,\n      enableRtl: this.parent.enableRtl,\n      fields: {\n        text: 'Text',\n        value: 'Value'\n      },\n      filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n      noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n      filtering: function (e) {\n        var query = new Query();\n        query = e.text !== '' ? query.where('Text', 'contains', e.text, true) : query;\n        e.updateData(_this.parent.timezoneDataSource, query);\n      },\n      htmlAttributes: {\n        'title': this.getFieldLabel(value),\n        'name': fieldName,\n        role: 'option'\n      },\n      floatLabelType: 'Always',\n      placeholder: this.getFieldLabel(value),\n      popupHeight: '230px'\n    });\n    dropDownList.appendTo(timezoneInput);\n    return timezoneDiv;\n  };\n\n  EventWindow.prototype.onMultiselectResourceChange = function (args) {\n    if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n      return;\n    }\n\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (resourceCollection[parseInt(i.toString(), 10)].field === fieldName && i < resourceCollection.length - 1) {\n        var resObject = this.createInstance(i);\n        var datasource = [];\n\n        var _loop_1 = function (j) {\n          var resourceModel = resourceCollection[i + 1]; // eslint-disable-next-line max-len\n\n          var filter = resourceModel.dataSource.filter(function (data) {\n            return data[resourceModel.groupIDField] === args.value[parseInt(j.toString(), 10)];\n          })[0];\n          var groupId = !isNullOrUndefined(filter) ? filter[resourceCollection[i + 1].groupIDField] : null;\n          var filterRes = this_1.filterDatasource(i, groupId);\n          datasource = datasource.concat(filterRes);\n        };\n\n        var this_1 = this;\n\n        for (var j = 0; j < args.value.length; j++) {\n          _loop_1(j);\n        }\n\n        resObject.dataSource = datasource;\n        resObject.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.createInstance = function (index) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    var resObject = this.element.querySelector('.e-' + resourceData.field).ej2_instances[0];\n    resObject.clear();\n    return resObject;\n  };\n\n  EventWindow.prototype.onDropdownResourceChange = function (args) {\n    if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n      return;\n    }\n\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (i < resourceCollection.length - 1 && resourceCollection[parseInt(i.toString(), 10)].field === fieldName) {\n        var resObj = this.createInstance(i);\n        var groupId = args.itemData[resourceCollection[parseInt(i.toString(), 10)].idField];\n        resObj.dataSource = this.filterDatasource(i, groupId);\n        resObj.dataBind();\n        var resValue = resObj.dataSource.length > 0 ? resObj.dataSource[0][resourceCollection[i + 1].idField] : null;\n        resObj.value = resourceCollection[i + 1].allowMultiple ? [resValue] : resValue;\n        resObj.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.filterDatasource = function (index, groupId) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    return resourceData.dataSource.filter(function (data) {\n      return data[resourceData.groupIDField] === groupId;\n    });\n  };\n\n  EventWindow.prototype.onTimezoneChange = function (args) {\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n    if (fieldName === this.parent.eventFields.startTimezone) {\n      var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n      endTimezoneObj.value = startTimezoneObj.value;\n      endTimezoneObj.dataBind();\n    }\n  };\n\n  EventWindow.prototype.renderCheckBox = function (value) {\n    var checkBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n    checkBoxDiv.appendChild(checkBoxInput);\n    var checkBox = new CheckBox({\n      change: this.onChange.bind(this),\n      cssClass: value + ' ' + this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      label: this.getFieldLabel(value)\n    });\n    checkBox.appendTo(checkBoxInput);\n    checkBoxInput.setAttribute('name', fieldName);\n\n    if (fieldName === 'Repeat') {\n      this.repeatStatus = checkBox;\n    }\n\n    return checkBoxDiv;\n  };\n\n  EventWindow.prototype.renderTextBox = function (value) {\n    var textBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var elementType = value === DESCRIPTION_CLASS ? 'textarea' : 'input';\n    var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName, elementType);\n    textBoxDiv.appendChild(textBoxInput);\n    Input.createInput({\n      element: textBoxInput,\n      floatLabelType: 'Always',\n      properties: {\n        enableRtl: this.parent.enableRtl,\n        placeholder: this.getFieldLabel(value)\n      }\n    });\n    return textBoxDiv;\n  };\n\n  EventWindow.prototype.getFieldName = function (name) {\n    var fieldName = '';\n\n    switch (name) {\n      case SUBJECT_CLASS:\n        fieldName = this.fields.subject;\n        break;\n\n      case LOCATION_CLASS:\n        fieldName = this.fields.location;\n        break;\n\n      case EVENT_WINDOW_START_CLASS:\n        fieldName = this.fields.startTime;\n        break;\n\n      case EVENT_WINDOW_END_CLASS:\n        fieldName = this.fields.endTime;\n        break;\n\n      case DESCRIPTION_CLASS:\n        fieldName = this.fields.description;\n        break;\n\n      case EVENT_WINDOW_ALL_DAY_CLASS:\n        fieldName = this.fields.isAllDay;\n        break;\n\n      case EVENT_WINDOW_START_TZ_CLASS:\n        fieldName = this.fields.startTimezone;\n        break;\n\n      case EVENT_WINDOW_END_TZ_CLASS:\n        fieldName = this.fields.endTimezone;\n        break;\n\n      case TIME_ZONE_CLASS:\n        fieldName = 'Timezone';\n        break;\n\n      case EVENT_WINDOW_REPEAT_CLASS:\n        fieldName = 'Repeat';\n        break;\n    }\n\n    return fieldName;\n  };\n\n  EventWindow.prototype.getFieldLabel = function (fieldName) {\n    var labelText = '';\n\n    switch (fieldName) {\n      case SUBJECT_CLASS:\n        labelText = this.parent.editorTitles.subject;\n        break;\n\n      case LOCATION_CLASS:\n        labelText = this.parent.editorTitles.location;\n        break;\n\n      case DESCRIPTION_CLASS:\n        labelText = this.parent.editorTitles.description;\n        break;\n\n      case EVENT_WINDOW_START_CLASS:\n        labelText = this.parent.editorTitles.startTime;\n        break;\n\n      case EVENT_WINDOW_END_CLASS:\n        labelText = this.parent.editorTitles.endTime;\n        break;\n\n      case EVENT_WINDOW_START_TZ_CLASS:\n        labelText = this.parent.editorTitles.startTimezone;\n        break;\n\n      case EVENT_WINDOW_END_TZ_CLASS:\n        labelText = this.parent.editorTitles.endTimezone;\n        break;\n\n      case EVENT_WINDOW_REPEAT_CLASS:\n        labelText = this.parent.editorTitles.recurrenceRule;\n        break;\n\n      case EVENT_WINDOW_ALL_DAY_CLASS:\n        labelText = this.parent.editorTitles.isAllDay;\n        break;\n\n      case TIME_ZONE_CLASS:\n        labelText = this.l10n.getConstant('timezone');\n        break;\n    }\n\n    return labelText;\n  };\n\n  EventWindow.prototype.onChange = function (args) {\n    var targetSelector = \".\" + EVENT_WINDOW_ALL_DAY_CLASS + \",.\" + TIME_ZONE_CLASS + \",.\" + EVENT_WINDOW_REPEAT_CLASS;\n    var target = closest(args.event.target, targetSelector);\n\n    if (target.classList.contains(EVENT_WINDOW_ALL_DAY_CLASS)) {\n      this.onAllDayChange(args.checked);\n    } else if (target.classList.contains(TIME_ZONE_CLASS)) {\n      this.timezoneChangeStyle(args.checked);\n    } else if (target.classList.contains(EVENT_WINDOW_REPEAT_CLASS)) {\n      this.onRepeatChange(args.checked);\n    }\n  };\n\n  EventWindow.prototype.renderRepeatDialog = function () {\n    var element = createElement('div');\n    this.repeatDialogObject = new Dialog({\n      header: this.l10n.getConstant('recurrence'),\n      visible: false,\n      content: '<div class=\"e-rec-editor\"></div>',\n      closeOnEscape: true,\n      width: '90%',\n      buttons: [{\n        click: this.repeatSaveDialog.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('save'),\n          cssClass: 'e-save',\n          isPrimary: true\n        }\n      }, {\n        click: this.repeatCancelDialog.bind(this),\n        buttonModel: {\n          cssClass: 'e-cancel',\n          content: this.l10n.getConstant('cancel')\n        }\n      }],\n      target: this.element,\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      isModal: true,\n      cssClass: REPEAT_DIALOG_CLASS,\n      open: this.repeatOpenDialog.bind(this)\n    });\n    this.element.appendChild(element);\n    this.repeatDialogObject.appendTo(element);\n    this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n  };\n\n  EventWindow.prototype.loadRecurrenceEditor = function () {\n    this.repeatDialogObject.show();\n\n    if (this.recurrenceEditor && this.repeatRule) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n    }\n  };\n\n  EventWindow.prototype.onRepeatChange = function (state) {\n    if (state) {\n      if (!this.repeatDialogObject) {\n        this.renderRepeatDialog();\n      }\n\n      this.recurrenceEditor.setProperties({\n        startDate: this.repeatStartDate,\n        selectedType: 0\n      });\n      this.loadRecurrenceEditor();\n    } else {\n      if (this.repeatDialogObject) {\n        this.repeatDialogObject.hide();\n      }\n\n      this.repeatRule = '';\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        this.updateRepeatLabel(this.repeatRule);\n      }\n\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      addClass([element], HIDE_STYLE_CLASS);\n    }\n  };\n\n  EventWindow.prototype.repeatSaveDialog = function () {\n    this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n    var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n    if (this.recurrenceEditor.getRecurrenceRule()) {\n      removeClass([element], HIDE_STYLE_CLASS);\n    } else {\n      addClass([element], HIDE_STYLE_CLASS);\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n\n    this.updateRepeatLabel(this.repeatRule);\n    this.closeRepeatDialog();\n  };\n\n  EventWindow.prototype.closeRepeatDialog = function () {\n    this.repeatDialogObject.hide();\n  };\n\n  EventWindow.prototype.repeatCancelDialog = function () {\n    this.closeRepeatDialog();\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n    }\n\n    if (!this.repeatTempRule) {\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n  };\n\n  EventWindow.prototype.repeatOpenDialog = function () {\n    this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n  };\n\n  EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n    if (!this.parent.eventSettings.allowAdding) {\n      return;\n    }\n\n    if (this.parent.isAdaptive && repeatType && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n\n    this.element.querySelector('.' + FORM_CLASS).removeAttribute('data-id');\n    this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n    eventObj.Timezone = false;\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n      eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n      eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n      eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n    }\n\n    this.showDetails(eventObj);\n\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n\n    var deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n\n    if (deleteButton) {\n      addClass([deleteButton], DISABLE_CLASS);\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime],\n        selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ? this.recurrenceEditor.selectedType : 0\n      });\n      this.repeatRule = this.recurrenceEditor.value;\n    }\n\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n      if (eventObj[this.fields.recurrenceRule] || repeatType) {\n        removeClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: true\n        });\n      } else {\n        addClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n\n      this.updateRepeatLabel(this.repeatRule);\n    } else {\n      var saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      this.disableButton(saveButton, false);\n    }\n\n    this.dialogObject.show();\n  };\n\n  EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n    if (cellsData.subject) {\n      eventObj[this.fields.subject] = cellsData.subject;\n    }\n\n    eventObj[this.fields.startTime] = cellsData.startTime;\n    eventObj[this.fields.endTime] = cellsData.endTime;\n    eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n\n    if (cellsData.RecurrenceRule) {\n      eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n    }\n\n    if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.setResourceValues(eventObj);\n    }\n  };\n\n  EventWindow.prototype.applyFormValidation = function () {\n    var form = this.element.querySelector('.' + FORM_CLASS);\n\n    if (!form) {\n      return;\n    }\n\n    var getValidationRule = function (rules) {\n      return rules && Object.keys(rules).length > 0 ? rules : undefined;\n    };\n\n    var rules = {};\n    var subjectRule = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n\n    if (!isNullOrUndefined(subjectRule)) {\n      rules[this.parent.eventSettings.fields.subject.name] = subjectRule;\n    }\n\n    var locationRule = getValidationRule(this.parent.eventSettings.fields.location.validation);\n\n    if (!isNullOrUndefined(locationRule)) {\n      rules[this.parent.eventSettings.fields.location.name] = locationRule;\n    }\n\n    var startTimeRule = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n\n    if (!isNullOrUndefined(startTimeRule)) {\n      rules[this.parent.eventSettings.fields.startTime.name] = startTimeRule;\n    }\n\n    var endTimeRule = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n\n    if (!isNullOrUndefined(endTimeRule)) {\n      rules[this.parent.eventSettings.fields.endTime.name] = endTimeRule;\n    }\n\n    var descriptionRule = getValidationRule(this.parent.eventSettings.fields.description.validation);\n\n    if (!isNullOrUndefined(descriptionRule)) {\n      rules[this.parent.eventSettings.fields.description.name] = descriptionRule;\n    }\n\n    this.fieldValidator = new FieldValidator();\n    this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n  };\n\n  EventWindow.prototype.showDetails = function (eventData) {\n    this.eventData = eventData;\n    var eventObj = extend({}, eventData, null, true);\n\n    if ((!this.cellClickAction || this.cellClickAction && !isNullOrUndefined(this.parent.editorTemplate)) && eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n      this.trimAllDay(eventObj);\n    }\n\n    var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n    var keyNames = Object.keys(eventObj);\n\n    for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {\n      var curElement = formElements_2[_i];\n      var columnName = curElement.name || this.getColumnName(curElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        if (keyNames.indexOf(columnName) !== -1) {\n          this.setValueToElement(curElement, eventObj[\"\" + columnName]);\n        } else {\n          this.setDefaultValueToElement(curElement);\n        }\n      }\n    }\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      this.onAllDayChange(eventObj[this.fields.isAllDay]);\n      var timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n\n      if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n        timezoneObj.checked = true;\n        timezoneObj.dataBind();\n      }\n\n      this.timezoneChangeStyle(timezoneObj.checked);\n      delete eventObj.Timezone;\n    }\n  };\n\n  EventWindow.prototype.getColumnName = function (element) {\n    var attrName = element.getAttribute('data-name') || '';\n\n    if (attrName === '') {\n      var isDropDowns = false;\n      var fieldSelector = '';\n\n      if (element.classList.contains('e-dropdownlist')) {\n        fieldSelector = 'e-ddl';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-multiselect')) {\n        fieldSelector = 'e-multiselect';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-datetimepicker')) {\n        fieldSelector = 'e-datetimepicker';\n      } else if (element.classList.contains('e-datepicker')) {\n        fieldSelector = 'e-datepicker';\n      } else if (element.classList.contains('e-checkbox')) {\n        fieldSelector = 'e-checkbox';\n      }\n\n      var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n      var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n\n      if (control) {\n        var attrEle = control.querySelector('[name]');\n\n        if (attrEle) {\n          attrName = attrEle.name;\n        }\n      }\n    }\n\n    return attrName;\n  };\n\n  EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n    var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n    var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n    var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n    var format;\n\n    if (allDayStatus) {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n      addClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n      addClass([timezoneDiv], DISABLE_CLASS);\n\n      if (this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n        removeClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n      }\n\n      startObj.format = endObj.format = format;\n    } else {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') + ' ' + this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n      removeClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n      removeClass([timezoneDiv], DISABLE_CLASS);\n\n      if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n        addClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n      }\n\n      startObj.format = endObj.format = format;\n    }\n\n    if (this.cellClickAction) {\n      this.updateDateTime(allDayStatus, startObj, endObj);\n    }\n\n    startObj.dataBind();\n    endObj.dataBind();\n\n    if (!isNullOrUndefined(this.recurrenceEditor)) {\n      this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n    }\n  };\n\n  EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n    var startDate;\n    var endDate;\n\n    if (allDayStatus) {\n      startDate = resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n\n      if (this.parent.activeCellsData.isAllDay) {\n        var temp = addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n        endDate = +this.eventWindowTime.startTime > temp ? this.eventWindowTime.endTime : new Date(temp);\n      } else {\n        endDate = resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n      }\n    } else {\n      var start = this.parent.activeCellsData.startTime;\n      startDate = new Date(this.eventWindowTime.startTime.getTime());\n      startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n\n      if (this.parent.activeCellsData.isAllDay) {\n        var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n        startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(MS_PER_MINUTE * this.getSlotDuration());\n      } else {\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n      }\n    }\n\n    this.eventWindowTime = {\n      startTime: new Date(startDate.getTime()),\n      endTime: new Date(endDate.getTime())\n    };\n    startObj.value = startDate;\n    endObj.value = endDate;\n    startObj.dataBind();\n    endObj.dataBind();\n  };\n\n  EventWindow.prototype.getFormat = function (formatType) {\n    var format;\n\n    if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n      format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n    } else {\n      format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n    }\n\n    return format;\n  };\n\n  EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n    if (!this.parent.eventSettings.allowEditing) {\n      return;\n    }\n\n    if (!this.parent.isAdaptive) {\n      removeClass([this.element.querySelector('.' + DELETE_EVENT_CLASS)], DISABLE_CLASS);\n    }\n\n    this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n    this.element.querySelector('.' + FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      eventObj = extend({}, eventObj, null, true);\n      var timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n      var timezoneValue = void 0;\n\n      if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n        timezoneValue = true;\n        this.parent.eventBase.timezoneConvert(eventObj);\n      } else {\n        timezoneValue = false;\n      }\n\n      eventObj.Timezone = timezoneValue;\n      timezoneObj.checked = timezoneValue;\n      timezoneObj.dataBind();\n    }\n\n    this.showDetails(eventObj);\n\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n    } else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime]\n      });\n      this.recurrenceEditor.setRecurrenceRule('');\n    }\n\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n\n    if (eventObj[this.fields.recurrenceRule]) {\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      }\n\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n      if (eventObj[this.fields.recurrenceRule]) {\n        removeClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: true\n        });\n      } else {\n        addClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n\n      this.updateRepeatLabel(this.repeatRule);\n    }\n\n    var isDisable = this.parent.readonly || eventObj[this.fields.isReadonly];\n\n    if (!this.parent.isAdaptive) {\n      var saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      var deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n      this.disableButton(saveButton, isDisable);\n      this.disableButton(deleteButton, isDisable);\n    } else {\n      var saveIcon = this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS);\n\n      if (saveIcon) {\n        if (isDisable) {\n          addClass([saveIcon], ICON_DISABLE_CLASS);\n        } else {\n          removeClass([saveIcon], ICON_DISABLE_CLASS);\n        }\n      }\n    }\n\n    this.dialogObject.show();\n  };\n\n  EventWindow.prototype.disableButton = function (element, value) {\n    if (element) {\n      element.ej2_instances[0].disabled = value;\n    }\n  };\n\n  EventWindow.prototype.renderRecurrenceEditor = function () {\n    return new RecurrenceEditor({\n      calendarMode: this.parent.calendarMode,\n      cssClass: this.parent.cssClass,\n      dateFormat: this.parent.dateFormat,\n      enableRtl: this.parent.enableRtl,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      locale: this.parent.locale\n    });\n  };\n\n  EventWindow.prototype.updateMinMaxDateToEditor = function () {\n    var startDate = this.element.querySelector('.e-start');\n    var endDate = this.element.querySelector('.e-end');\n\n    if (startDate && endDate) {\n      var startObj = startDate.ej2_instances[0];\n      var endObj = endDate.ej2_instances[0];\n      startObj.min = this.parent.minDate;\n      startObj.max = this.parent.maxDate;\n      endObj.min = this.parent.minDate;\n      endObj.max = this.parent.maxDate;\n      startObj.dataBind();\n      endObj.dataBind();\n    }\n\n    if (this.recurrenceEditor) {\n      var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n\n      if (untilDate) {\n        var untilObj = untilDate.ej2_instances[0];\n        untilObj.min = this.parent.minDate;\n        untilObj.max = this.parent.maxDate;\n        untilObj.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n\n    var data = repeatRule ? this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule) : this.l10n.getConstant('repeat');\n    this.repeatStatus.setProperties({\n      label: data\n    });\n  };\n\n  EventWindow.prototype.dialogClose = function (event) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.parent.activeEventData = {\n      event: undefined,\n      element: undefined\n    };\n    this.parent.currentAction = null;\n    this.dialogObject.hide();\n  };\n\n  EventWindow.prototype.resetForm = function () {\n    this.fieldValidator.destroyToolTip();\n    this.resetFormFields();\n\n    if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n      this.recurrenceEditor.resetFields();\n    }\n  };\n\n  EventWindow.prototype.timezoneChangeStyle = function (value) {\n    var timezoneDiv = this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n\n    if (value) {\n      addClass([timezoneDiv], ENABLE_CLASS);\n      var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n      var timezone = startTimezoneObj.dataSource;\n\n      if (!startTimezoneObj.value || !this.parent.timezone) {\n        var found = timezone.some(function (tz) {\n          return tz.Value === localTimezoneName;\n        });\n\n        if (!found) {\n          timezone.push({\n            Value: localTimezoneName,\n            Text: localTimezoneName\n          });\n          startTimezoneObj.dataSource = timezone;\n          endTimezoneObj.dataSource = timezone;\n          startTimezoneObj.dataBind();\n          endTimezoneObj.dataBind();\n        }\n      }\n\n      startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      startTimezoneObj.dataBind();\n      endTimezoneObj.dataBind();\n    } else {\n      removeClass([timezoneDiv], ENABLE_CLASS);\n    }\n  };\n\n  EventWindow.prototype.resetFormFields = function () {\n    var formElement = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n\n    for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n      var currentElement = formElement_1[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        this.setDefaultValueToElement(currentElement);\n      }\n    }\n  };\n\n  EventWindow.prototype.eventSave = function (event, alert) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n\n    var formElement = this.element.querySelector('.' + FORM_CLASS);\n\n    if (formElement && formElement.classList.contains('e-formvalidator') && !formElement.ej2_instances[0].validate()) {\n      return;\n    }\n\n    var dataCollection = this.getEventDataFromEditor();\n\n    if (this.processEventValidation(dataCollection.tempData, alert)) {\n      return;\n    }\n\n    this.eventCrudData = dataCollection.eventData;\n    this.dialogEvent = event;\n    this.isCrudAction = true;\n    this.dialogObject.hide();\n  };\n\n  EventWindow.prototype.getEventDataFromEditor = function () {\n    var eventObj = extend({}, this.getObjectFromFormData(EVENT_WINDOW_DIALOG_CLASS));\n\n    if (!eventObj.Timezone) {\n      eventObj[this.fields.startTimezone] = null;\n      eventObj[this.fields.endTimezone] = null;\n    }\n\n    delete eventObj.Timezone;\n    delete eventObj.Repeat;\n    this.setDefaultValueToObject(eventObj);\n    eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n    var tempObj = extend({}, eventObj, null, true);\n\n    if (eventObj[this.fields.isAllDay]) {\n      eventObj[this.fields.startTime] = isNullOrUndefined(eventObj[this.fields.startTime]) ? null : resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n      eventObj[this.fields.endTime] = isNullOrUndefined(eventObj[this.fields.endTime]) ? null : addDays(resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n    }\n\n    return {\n      eventData: eventObj,\n      tempData: tempObj\n    };\n  };\n\n  EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n    var alertType;\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('invalidDateError');\n        return true;\n      }\n\n      if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('startEndError');\n        return true;\n      }\n    }\n\n    if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n      if (this.parent.currentAction !== 'EditOccurrence') {\n        alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n      }\n\n      var isShowAlert = true;\n\n      if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n        isShowAlert = false;\n      }\n\n      if (!isNullOrUndefined(alertType) && isShowAlert && (!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern' || this.parent.enableRecurrenceValidation)) {\n        this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  EventWindow.prototype.processCrudActions = function (eventObj) {\n    var _this = this;\n\n    this.parent.uiStateValues.isBlock = false;\n    var resourceData = this.getResourceData(eventObj);\n    var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 || this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit && !isNullOrUndefined(resourceData);\n    var eventId = this.getEventIdFromForm();\n\n    if (!isNullOrUndefined(eventId)) {\n      var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n      var editedData = this.parent.eventsData.filter(function (data) {\n        return data[_this.fields.id] === eveId_1;\n      })[0];\n\n      if (isNullOrUndefined(editedData)) {\n        editedData = this.parent.blockData.filter(function (data) {\n          return data[_this.fields.id] === eveId_1;\n        })[0];\n      }\n\n      eventObj = extend({}, editedData, eventObj);\n\n      if (eventObj[this.fields.isReadonly]) {\n        return false;\n      }\n\n      var currentAction = void 0;\n\n      if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n        currentAction = this.parent.currentAction;\n        eventObj.Guid = this.parent.activeEventData.event.Guid;\n\n        if (this.parent.currentAction === 'EditOccurrence') {\n          if (!eventObj[this.fields.recurrenceID]) {\n            eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n            eventObj.Guid = this.parent.activeEventData.event.Guid;\n          } else {\n            eveId_1 = eventObj[this.fields.recurrenceID];\n            currentAction = null;\n          }\n\n          if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n            return true;\n          }\n        }\n\n        if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n          eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n        } else if (this.parent.currentAction === 'EditFollowingEvents') {\n          eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n          eventObj[this.fields.followingID] = editedData[this.fields.id];\n        }\n      }\n\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, 'Save', currentAction);\n      } else {\n        this.parent.saveEvent(eventObj, currentAction);\n      }\n    } else {\n      this.parent.currentAction = 'Add';\n\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, this.parent.currentAction);\n      } else {\n        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n        this.parent.addEvent(eventObj);\n      }\n    }\n\n    return this.parent.uiStateValues.isBlock;\n  };\n\n  EventWindow.prototype.getResourceData = function (eventObj) {\n    var resourceData = null;\n\n    if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection) && this.parent.resourceBase.resourceCollection.length > 0) {\n      var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      resourceData = eventObj[lastResourceData.field];\n    }\n\n    return resourceData;\n  };\n\n  EventWindow.prototype.getObjectFromFormData = function (className) {\n    var formElement = this.getFormElements(className);\n    var eventObj = {};\n\n    for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n      var currentElement = formElement_2[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        eventObj[\"\" + columnName] = this.getValueFromElement(currentElement);\n      }\n    }\n\n    return eventObj;\n  };\n\n  EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n    if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n      eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.l10n.getConstant('addTitle');\n    }\n\n    if (!isNullOrUndefined(eventObj[this.fields.location])) {\n      eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n    }\n\n    if (!isNullOrUndefined(eventObj[this.fields.description])) {\n      eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n    }\n  };\n\n  EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n    var alertMessage;\n    var recEditor = this.recurrenceEditor;\n    var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n\n    if (alert !== this.l10n.getConstant('ok')) {\n      var activeEvent = this.parent.activeEventData.event;\n      var excludedEvents = [];\n\n      if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents') && !isNullOrUndefined(activeEvent)) {\n        var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n        var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n\n        if (seriesEvents.length > 0) {\n          excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n        } else {\n          var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n          excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n        }\n\n        if (this.parent.currentAction === 'EditSeries' && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n          excludedEvents.push(this.eventData);\n        }\n      }\n\n      if (excludedEvents.length > 0) {\n        alertMessage = 'seriesChangeAlert';\n      }\n\n      if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' && this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n        alertMessage = 'wrongPattern';\n      }\n\n      if (isNullOrUndefined(alertMessage)) {\n        var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n        var obj = {\n          'SU': 0,\n          'MO': 1,\n          'TU': 2,\n          'WE': 3,\n          'TH': 4,\n          'FR': 5,\n          'SA': 6\n        };\n        var temp = [];\n        var tempDiff = [];\n        var tempValue = void 0;\n\n        switch (recEditor.value.split(';')[0].split('=')[1]) {\n          case 'DAILY':\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) > interval * 24) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'WEEKLY':\n            types = recEditor.value.split(';')[1].split('=')[1].split(',');\n\n            for (var index = 0; index < types.length * (interval + 1); index++) {\n              temp[parseInt(index.toString(), 10)] = types.length > index ? obj[types[parseInt(index.toString(), 10)]] : temp[index - types.length] + 7 * interval;\n            }\n\n            tempValue = temp.sort(function (a, b) {\n              return a - b;\n            });\n\n            for (var index = 1; index < tempValue.length; index++) {\n              tempDiff.push(tempValue[parseInt(index.toString(), 10)] - tempValue[index - 1]);\n            }\n\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) >= Math.min.apply(Math, tempDiff) * 24 || isNullOrUndefined(interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'MONTHLY':\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'YEARLY':\n            if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n        }\n      }\n    } else {\n      if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n        alertMessage = 'createError';\n      }\n\n      if (isNullOrUndefined(alertMessage)) {\n        this.parent.quickPopup.quickDialog.hide();\n      }\n    }\n\n    if (isNullOrUndefined(interval)) {\n      alertMessage = 'createError';\n    }\n\n    return alertMessage;\n  };\n\n  EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n    var recIndex;\n\n    for (var index = 0; index < recColl.length; index++) {\n      if (event[this.fields.startTime].valueOf() === recColl[parseInt(index.toString(), 10)][this.fields.startTime].valueOf()) {\n        recIndex = index;\n        break;\n      }\n    }\n\n    return recIndex;\n  };\n\n  EventWindow.prototype.trimAllDay = function (data) {\n    if (data[this.fields.isAllDay]) {\n      var temp = addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n      data[this.fields.endTime] = +data[this.fields.startTime] > temp ? data[this.fields.endTime] : new Date(temp);\n    }\n  };\n\n  EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n    var _this = this;\n\n    if (editData === void 0) {\n      editData = this.eventData;\n    }\n\n    var recurColl = this.parent.getOccurrencesByID(eventId);\n    var excludedDatas = this.parent.eventsData.filter(function (data) {\n      return data[_this.fields.recurrenceID] === eventId;\n    });\n    excludedDatas.map(function (data) {\n      return recurColl.push(extend({}, data));\n    });\n    currentData = extend({}, currentData);\n    this.trimAllDay(currentData);\n\n    for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n      var data = recurColl_1[_i];\n      this.trimAllDay(data);\n    }\n\n    this.parent.eventBase.sortByTime(recurColl);\n    var index = this.getRecurrenceIndex(recurColl, editData);\n\n    if (isNullOrUndefined(index)) {\n      return false;\n    }\n\n    var currentStartTime = new Date(+currentData[this.fields.startTime]);\n    var currentEndTime = new Date(+currentData[this.fields.endTime]);\n    var nextStartTime;\n    var nextEndTime;\n\n    if (index !== recurColl.length - 1) {\n      nextStartTime = new Date(+recurColl[index + 1][this.fields.startTime]);\n      nextEndTime = new Date(+recurColl[index + 1][this.fields.endTime]);\n    }\n\n    var lastEndTime = new Date(+recurColl[recurColl.length - 1][this.fields.endTime]);\n\n    if (index === 0) {\n      if (!isNullOrUndefined(recurColl[index + 1])) {\n        if (!(nextStartTime.getTime() >= currentEndTime.getTime()) && resetTime(lastEndTime).getTime() >= resetTime(currentStartTime).getTime() || resetTime(lastEndTime).getTime() < resetTime(currentStartTime).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n          return true;\n        } else if (!(resetTime(currentStartTime).getTime() < resetTime(nextStartTime).getTime())) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n          return true;\n        }\n      }\n\n      return false;\n    } else {\n      var previousStartTime = new Date(+recurColl[index - 1][this.fields.startTime]);\n      var previousEndTime = new Date(+recurColl[index - 1][this.fields.endTime]);\n\n      if (index === recurColl.length - 1) {\n        if (resetTime(new Date(+recurColl[recurColl.length - 1 - index][this.fields.startTime])).getTime() > resetTime(currentStartTime).getTime()) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n          return true;\n        } else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && resetTime(currentStartTime).getTime() > resetTime(previousStartTime).getTime())) {\n          this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n          return true;\n        }\n      } else if (!((resetTime(previousStartTime).getTime() < resetTime(currentStartTime).getTime() || resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() > resetTime(currentStartTime).getTime()) && (resetTime(nextStartTime).getTime() > resetTime(currentStartTime).getTime() || lastEndTime.getTime() < currentStartTime.getTime()))) {\n        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n        return true;\n      } else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && nextStartTime.getTime() > currentEndTime.getTime()) || resetTime(nextEndTime).getTime() < resetTime(currentStartTime).getTime() || resetTime(previousStartTime).getTime() > resetTime(currentEndTime).getTime() || !(resetTime(currentStartTime).getTime() < resetTime(nextStartTime).getTime())) {\n        this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n    var _this = this;\n\n    var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n    var resourceData = eventObj[lastResourceData.field];\n    resourceData = resourceData instanceof Array ? resourceData.reverse() : [resourceData].reverse();\n    var lastLevel = this.parent.resourceBase.lastResourceLevel;\n    var eventList = [];\n\n    var _loop_2 = function (i) {\n      var events = extend({}, eventObj, null, true);\n      events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n      var temp = [];\n\n      var addValues = function () {\n        if (action === 'Save' && i === resourceData.length - 1) {\n          if (temp.length > 0) {\n            temp[0][_this.fields.id] = eventObj[_this.fields.id];\n\n            for (var k = 1; k < temp.length; k++) {\n              temp[parseInt(k.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n              eventList.push(temp[parseInt(k.toString(), 10)]);\n\n              _this.parent.saveEvent(temp[0], currentAction);\n            }\n          } else {\n            events[_this.fields.id] = eventObj[_this.fields.id];\n\n            _this.parent.saveEvent(events, currentAction);\n          }\n        } else {\n          if (temp.length > 0) {\n            for (var j = 0; j < temp.length; j++) {\n              temp[parseInt(j.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n              eventList.push(temp[parseInt(j.toString(), 10)]);\n            }\n          } else {\n            events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n            eventList.push(events);\n          }\n        }\n      };\n\n      if (this_2.parent.activeViewOptions.group.byGroupID && !isNullOrUndefined(lastLevel)) {\n        var lastResource = lastResourceData.dataSource;\n        var resCol = this_2.parent.resourceCollection;\n        var index = void 0;\n\n        if (resCol.length > 1) {\n          index = findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)], events, resCol);\n        } else {\n          index = findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)]);\n        }\n\n        if (index < 0) {\n          return {\n            value: void 0\n          };\n        }\n\n        var groupId_1 = lastResource[parseInt(index.toString(), 10)][lastResourceData.groupIDField];\n        var filter = lastLevel.filter(function (obj) {\n          return obj.resourceData[lastResourceData.idField] === resourceData[parseInt(i.toString(), 10)];\n        }).filter(function (obj) {\n          return obj.resourceData[lastResourceData.groupIDField] === groupId_1;\n        })[0];\n        var groupOrder = filter.groupOrder;\n\n        for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n          var field = this_2.parent.resourceBase.resourceCollection[parseInt(index_1.toString(), 10)].field;\n          events[\"\" + field] = groupOrder[parseInt(index_1.toString(), 10)] instanceof Array ? groupOrder[parseInt(index_1.toString(), 10)][0] : groupOrder[parseInt(index_1.toString(), 10)];\n        }\n\n        addValues();\n      } else {\n        for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n          var field = this_2.parent.resourceBase.resourceCollection[parseInt(index.toString(), 10)].field;\n\n          if (events[\"\" + field] instanceof Array && events[\"\" + field].length > 1) {\n            for (var k = 0; k < events[\"\" + field].length; k++) {\n              var event_3 = extend({}, events, null, true);\n              event_3[\"\" + field] = eventObj[\"\" + field][parseInt(k.toString(), 10)];\n              event_3[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n              temp.push(event_3);\n            }\n          } else {\n            if (temp.length === 0) {\n              events[\"\" + field] = eventObj[\"\" + field] instanceof Array ? eventObj[\"\" + field][0] : eventObj[\"\" + field];\n              events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n            } else {\n              for (var l = 0; l < temp.length; l++) {\n                temp[parseInt(l.toString(), 10)][\"\" + field] = eventObj[\"\" + field] instanceof Array ? eventObj[\"\" + field][0] : eventObj[\"\" + field];\n              }\n            }\n          }\n        }\n\n        events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n        addValues();\n      }\n    };\n\n    var this_2 = this;\n\n    for (var i = 0; i < resourceData.length; i++) {\n      var state_1 = _loop_2(i);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n\n    if (eventList.length > 0) {\n      for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n        var event_4 = eventList_1[_i];\n        event_4[this.fields.recurrenceException] = null;\n        event_4[this.fields.recurrenceID] = null;\n      }\n\n      this.parent.addEvent(eventList);\n    }\n  };\n\n  EventWindow.prototype.getEventIdFromForm = function () {\n    return this.element.querySelector('.' + FORM_CLASS).getAttribute('data-id');\n  };\n\n  EventWindow.prototype.getFormElements = function (className) {\n    var elements = [];\n\n    if (className === EVENT_WINDOW_DIALOG_CLASS) {\n      elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD$1));\n    } else {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD$1));\n    }\n\n    return elements;\n  };\n\n  EventWindow.prototype.getValueFromElement = function (element) {\n    var value;\n\n    if (element.classList.contains('e-datepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-datetimepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-dropdownlist')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-multiselect')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-checkbox')) {\n      value = element.ej2_instances[0].checked;\n    } else {\n      if (element.type === 'checkbox') {\n        value = element.checked;\n      } else {\n        value = this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(element.value) : element.value;\n      }\n    }\n\n    return value;\n  };\n\n  EventWindow.prototype.setValueToElement = function (element, value) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n\n      if (instance.element.classList.contains(EVENT_WINDOW_START_CLASS)) {\n        this.eventWindowTime.startTime = new Date('' + value);\n      } else {\n        this.eventWindowTime.endTime = new Date('' + value);\n      }\n\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.value = value instanceof Array ? value : [value];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = value;\n      instance.dataBind();\n    } else {\n      if (element.type !== 'checkbox') {\n        element.value = value || '';\n      } else {\n        element.checked = value;\n      }\n    }\n  };\n\n  EventWindow.prototype.setDefaultValueToElement = function (element) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = this.parent.getCurrentTime();\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n      var dateValue = this.parent.getCurrentTime();\n      this.eventWindowTime = {\n        startTime: dateValue,\n        endTime: dateValue\n      };\n      instance.value = dateValue;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = null;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = false;\n      instance.dataBind();\n    } else {\n      if (element.type === 'checkbox') {\n        element.checked = false;\n      } else {\n        element.value = '';\n      }\n    }\n  };\n\n  EventWindow.prototype.getInstance = function (className) {\n    var element = this.element.querySelector('.' + className);\n    return element ? element.ej2_instances[0] : null;\n  };\n\n  EventWindow.prototype.eventDelete = function (event) {\n    if (this.isEnterKey) {\n      this.isEnterKey = false;\n      return;\n    }\n\n    switch (this.parent.currentAction) {\n      case 'EditOccurrence':\n        if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n          this.parent.currentAction = 'DeleteOccurrence';\n        } else {\n          this.parent.currentAction = 'Delete';\n        }\n\n        break;\n\n      case 'EditSeries':\n        this.parent.currentAction = 'DeleteSeries';\n        break;\n\n      case 'Save':\n        this.parent.currentAction = 'Delete';\n        break;\n\n      case 'EditFollowingEvents':\n        if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n          this.parent.currentAction = 'DeleteFollowingEvents';\n        }\n\n        break;\n    }\n\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.dialogObject.hide();\n    this.parent.quickPopup.openDeleteAlert();\n  };\n\n  EventWindow.prototype.getRecurrenceEditorInstance = function () {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n\n    return this.recurrenceEditor;\n  };\n\n  EventWindow.prototype.destroyComponents = function () {\n    var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n\n    for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {\n      var element = formElements_3[_i];\n      var instance = void 0;\n\n      if (element.classList.contains('e-datetimepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-datepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-checkbox')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-dropdownlist')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-multiselect')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-numerictextbox')) {\n        instance = element.ej2_instances;\n      }\n\n      if (instance && instance[0]) {\n        instance[0].destroy();\n      }\n    }\n\n    if (this.buttonObj) {\n      this.buttonObj.destroy();\n    }\n  };\n\n  EventWindow.prototype.detachComponents = function () {\n    var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n\n    for (var _i = 0, formElements_4 = formElements; _i < formElements_4.length; _i++) {\n      var element = formElements_4[_i];\n      detach(element);\n    }\n  };\n\n  EventWindow.prototype.destroy = function (isIgnore) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.resetTemplates(['editorTemplate']);\n    }\n\n    this.destroyComponents();\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.destroy();\n      detach(this.recurrenceEditor.element);\n      this.recurrenceEditor = null;\n    }\n\n    if (this.fieldValidator) {\n      this.fieldValidator.destroy();\n      this.fieldValidator = null;\n    }\n\n    if (this.repeatDialogObject) {\n      this.repeatDialogObject.destroy();\n      this.repeatDialogObject = null;\n    }\n\n    this.detachComponents();\n\n    if (this.dialogObject) {\n      if (this.dialogObject.element) {\n        var form = this.dialogObject.element.querySelector('form');\n        removeChildren(form);\n        detach(form);\n        EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n      }\n\n      this.dialogObject.destroy();\n      this.dialogObject = null;\n    }\n\n    if (this.element) {\n      remove(this.element);\n      this.element = null;\n    }\n\n    if (!isIgnore) {\n      this.l10n = null;\n      this.parent = null;\n      this.fields = null;\n      this.buttonObj = null;\n      this.repeatStatus = null;\n      this.eventWindowTime = null;\n      this.dialogEvent = null;\n    }\n  };\n\n  return EventWindow;\n}();\n/**\n * Virtual Scroll\n */\n\n\nvar VirtualScroll =\n/** @__PURE__ @class */\nfunction () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.startIndex = 0;\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  VirtualScroll.prototype.addEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(virtualScroll, this.virtualScrolling, this);\n  };\n\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(virtualScroll, this.virtualScrolling);\n  };\n\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n    this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n    return this.renderedLength;\n  };\n\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: VIRTUAL_TRACK_CLASS\n    });\n\n    if (this.isHorizontalScroll) {\n      var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n      wrap.style.width = colCount * this.itemSize + 'px';\n    } else {\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    }\n\n    contentWrap.appendChild(wrap);\n  };\n\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n    } else {\n      virtual.style.height = '';\n    }\n\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;\n      wrap.style.height = renderedResCount * this.itemSize + 'px';\n    }\n  };\n\n  VirtualScroll.prototype.setItemSize = function () {\n    if (this.isHorizontalScroll) {\n      this.itemSize = getElementWidthFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;\n    } else {\n      this.itemSize = getElementHeightFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;\n    }\n  };\n\n  VirtualScroll.prototype.renderEvents = function () {\n    this.setTabIndex();\n\n    if (this.parent.crudModule) {\n      this.parent.crudModule.refreshProcessedData(true);\n    }\n\n    if (this.parent.currentView !== 'Month') {\n      this.parent.notify(contentReady, {});\n    }\n\n    this.parent.hideSpinner();\n  };\n\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n      this.parent.quickPopup.morePopup.hide();\n    }\n\n    var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n    if (this.isHorizontalScroll) {\n      this.horizontalScrolling(conWrap);\n    } else {\n      var resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n      var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n      var conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n      addClass([conWrap], 'e-transition');\n      this.renderedLength = resWrap.querySelector('tbody').children.length;\n      var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n      var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n      var resCollection = [];\n\n      if (conWrap.scrollTop - this.translateY < 0) {\n        resCollection = this.upScroll(conWrap, firstTDIndex);\n      } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n        resCollection = this.downScroll(conWrap, firstTDIndex);\n      }\n\n      if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n        this.parent.showSpinner();\n        var selectedEle = this.parent.getSelectedCells();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n\n        window.clearTimeout(this.timeValue);\n        this.timeValue = window.setTimeout(function () {\n          _this.renderEvents();\n        }, 250);\n      }\n    }\n  };\n\n  VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n    var _this = this;\n\n    var resCollection = [];\n    var scrollWidth = this.bufferCount * this.itemSize;\n\n    if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n      resCollection = this.leftScroll(conWrap);\n    } else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n      resCollection = this.rightScroll(conWrap);\n    }\n\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      if (this.parent.resourceBase.expandedResources.length !== resCollection.length || this.parent.resourceBase.expandedResources[0] !== resCollection[0] || this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !== resCollection[resCollection.length - 1]) {\n        this.parent.showSpinner();\n        var colLevels = this.parent.activeView.colLevels.slice(0);\n        this.updateHorizontalContent(conWrap, resCollection);\n        setStyleAttribute(conWrap.querySelector('table'), {\n          transform: \"translateX(\" + this.translateY + \"px)\"\n        });\n        this.parent.activeView.colLevels = colLevels;\n\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n      }\n\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.renderEvents();\n      }, 250);\n    }\n  };\n\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      height = height > 0 ? height : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n\n    return prevSetCollection;\n  };\n\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n\n    var nextSetResIndex = 0;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n\n  VirtualScroll.prototype.leftScroll = function (conWrap) {\n    var index = 0;\n    index = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize) - this.renderedLength;\n    index = index > 0 ? index : 0;\n    return this.getCollection(index, index + this.renderedLength);\n  };\n\n  VirtualScroll.prototype.rightScroll = function (conWrap) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var nextSetIndex = 0;\n    nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n    var lastIndex = nextSetIndex + this.renderedLength;\n    lastIndex = lastIndex > lastLevel.length - 1 ? lastLevel.length - 1 : lastIndex;\n    return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n  };\n\n  VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n    this.translateY = startIndex * this.itemSize;\n    var lastLevel = this.getResCollection(startIndex, endIndex);\n\n    if (this.parent.enableRtl) {\n      this.translateY = -this.translateY;\n    }\n\n    return lastLevel;\n  };\n\n  VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var resCollection = [];\n    var index = {\n      startIndex: 0,\n      endIndex: 0\n    };\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[0].date.getTime() && lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n        return this.parent.resourceBase.expandedResources;\n      }\n\n      resCollection = this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n      this.setRenderedDates(resCollection);\n    } else {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex && lastLevel[parseInt(endIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n        return this.parent.resourceBase.expandedResources;\n      }\n\n      resCollection = this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n    }\n\n    if (this.parent.currentView !== 'Month') {\n      this.startIndex = index.startIndex;\n      resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n    }\n\n    this.translateY = index.startIndex * this.itemSize;\n    return resCollection;\n  };\n\n  VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n      return firstItem.date.getTime() <= data.date.getTime() && data.date.getTime() <= lastItem.date.getTime();\n    });\n    this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n\n  VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n      return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n    });\n    this.parent.resourceBase.renderedResources = resCollection;\n    this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n\n  VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n    var index = 0;\n    data.filter(function (data) {\n      if (firstItem === data) {\n        colIndex.startIndex = index;\n      } else if (lastItem === data) {\n        colIndex.endIndex = index + data.colSpan;\n      }\n\n      index += data.colSpan;\n    });\n\n    if (firstItem === lastItem) {\n      colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n    }\n  };\n\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLength = resWrap.querySelector('tbody').children.length;\n\n    if (document.activeElement && document.activeElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n      this.isResourceCell = true;\n      this.parent.element.focus();\n    }\n\n    for (var i = 0; i < renderedLength; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n\n  VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n    this.parent.resourceBase.expandedResources = resCollection;\n    var selectedEle = this.parent.getSelectedCells();\n    this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n    var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n\n    for (var i = 0; i < renderedLength; i++) {\n      remove(conWrap.querySelector('tbody tr'));\n    }\n\n    if (this.parent.currentView === 'Month') {\n      if (this.parent.activeViewOptions.group.byDate) {\n        this.parent.activeView.colLevels[0] = resCollection;\n      } else {\n        this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n      }\n\n      var contentRows = this.parent.activeView.getContentRows();\n      append(contentRows, conWrap.querySelector('tbody'));\n    } else {\n      var col = [].slice.call(conWrap.querySelector('colgroup').children);\n\n      for (var i = 0; i < col.length; i++) {\n        remove(col[parseInt(i.toString(), 10)]);\n      }\n\n      this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n      var contentRows = this.parent.activeView.getContentRows();\n      var table = conWrap.querySelector('table');\n      var thead = conWrap.querySelector('thead');\n      var colGroupEle_1 = conWrap.querySelector('colgroup');\n      resCollection.forEach(function () {\n        colGroupEle_1.appendChild(createElement('col'));\n      });\n      thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n      }\n\n      prepend([thead], table);\n      append(contentRows, conWrap.querySelector('tbody'));\n    }\n  };\n\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n\n  VirtualScroll.prototype.updateFocusedWorkCell = function () {\n    if (this.focusedEle) {\n      var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n      var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n      var ele = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n\n      if (ele) {\n        this.parent.addSelectedClass([ele], ele, true);\n      }\n\n      this.focusedEle = null;\n    }\n  };\n\n  VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n    if (this.parent.currentView !== 'Month') {\n      var dateCol_1 = resCollection.map(function (x) {\n        return x.date;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = dateCol_1;\n      });\n    } else {\n      var dateCol_2 = resCollection.map(function (x) {\n        return x.date.getDay();\n      });\n      var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) {\n        return dateCol_2.indexOf(x.getDay()) >= 0;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = renderDates_1;\n      });\n    }\n  };\n\n  VirtualScroll.prototype.setTabIndex = function () {\n    var resColWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n    var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n\n    if (resCells && resColWrap) {\n      resCells.forEach(function (element) {\n        if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n          element.setAttribute('tabindex', '0');\n        }\n      });\n    }\n\n    var focusResCell = this.parent.element.querySelector(\".\" + RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n\n    if (this.isResourceCell && focusResCell) {\n      focusResCell.focus();\n      this.isResourceCell = false;\n    }\n  };\n\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n    this.focusedEle = null;\n  };\n\n  return VirtualScroll;\n}();\n/**\n * Schedule DOM rendering\n */\n\n\nvar Render =\n/** @__PURE__ @class */\nfunction () {\n  function Render(parent) {\n    this.parent = parent;\n  }\n\n  Render.prototype.render = function (viewName, isDataRefresh) {\n    if (isDataRefresh === void 0) {\n      isDataRefresh = true;\n    }\n\n    this.initializeLayout(viewName);\n\n    if (this.parent.activeView && isDataRefresh) {\n      this.parent.crudModule.refreshDataManager();\n    }\n  };\n\n  Render.prototype.initializeLayout = function (viewName) {\n    if (this.parent.activeView) {\n      var templates = ['cellTemplate', 'eventTemplate', 'tooltipTemplate', 'majorSlotTemplate', 'minorSlotTemplate', 'headerTooltipTemplate', 'dateHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate', 'headerIndentTemplate', 'resourceHeaderTemplate', 'cellHeaderTemplate', 'dateRangeTemplate'];\n      this.parent.resetTemplates(templates);\n      this.parent.activeView.removeEventListener();\n      this.parent.activeView.destroy();\n    }\n\n    switch (viewName) {\n      case 'Day':\n        this.parent.activeView = this.parent.dayModule;\n        break;\n\n      case 'Week':\n        this.parent.activeView = this.parent.weekModule;\n        break;\n\n      case 'WorkWeek':\n        this.parent.activeView = this.parent.workWeekModule;\n        break;\n\n      case 'Month':\n        this.parent.activeView = this.parent.monthModule;\n        break;\n\n      case 'Year':\n        this.parent.activeView = this.parent.yearModule;\n        break;\n\n      case 'Agenda':\n        this.parent.activeView = this.parent.agendaModule;\n        break;\n\n      case 'MonthAgenda':\n        this.parent.activeView = this.parent.monthAgendaModule;\n        break;\n\n      case 'TimelineDay':\n        this.parent.activeView = this.parent.timelineViewsModule;\n        this.parent.activeView.viewClass = 'e-timeline-day-view';\n        break;\n\n      case 'TimelineWorkWeek':\n        this.parent.activeView = this.parent.timelineViewsModule;\n        this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n        break;\n\n      case 'TimelineWeek':\n        this.parent.activeView = this.parent.timelineViewsModule;\n        this.parent.activeView.viewClass = 'e-timeline-week-view';\n        break;\n\n      case 'TimelineMonth':\n        this.parent.activeView = this.parent.timelineMonthModule;\n        break;\n\n      case 'TimelineYear':\n        this.parent.activeView = this.parent.timelineYearModule;\n        break;\n    }\n\n    if (isNullOrUndefined(this.parent.activeView)) {\n      var firstView = this.parent.viewCollections[0].option;\n\n      if (firstView) {\n        this.parent.setProperties({\n          currentView: firstView\n        }, true);\n\n        if (this.parent.headerModule) {\n          this.parent.headerModule.updateActiveView();\n          this.parent.headerModule.setCalendarView();\n        }\n\n        return this.initializeLayout(firstView);\n      }\n\n      throw Error('Inject required modules');\n    }\n\n    this.parent.activeView.viewIndex = this.parent.viewIndex;\n    this.updateLabelText(viewName);\n    this.parent.activeView.addEventListener();\n    this.parent.activeView.getRenderDates();\n    this.parent.uiStateValues.isGroupAdaptive = this.parent.activeViewOptions.group.resources.length > 0 && (this.parent.enableAdaptiveUI && !this.parent.isAdaptive || this.parent.isAdaptive && this.parent.activeViewOptions.group.enableCompactView);\n\n    if (this.parent.virtualScrollModule) {\n      this.parent.virtualScrollModule.destroy();\n      this.parent.virtualScrollModule = null;\n    }\n\n    if ((['Agenda', 'MonthAgenda', 'Year', 'TimelineYear'].indexOf(this.parent.currentView) === -1 || this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.orientation === 'Vertical') && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n\n      if (this.parent.activeView.isTimelineView()) {\n        this.parent.uiStateValues.top = 0;\n      } else {\n        this.parent.virtualScrollModule.isHorizontalScroll = true;\n        this.parent.uiStateValues.left = 0;\n      }\n    }\n\n    this.updateHeader();\n    this.parent.currentTimezoneDate = this.parent.getCurrentTime();\n    this.parent.activeView.renderLayout(CURRENT_PANEL_CLASS);\n    this.parent.renderTemplates();\n\n    if (this.parent.eventTooltip) {\n      this.parent.eventTooltip.destroy();\n      this.parent.eventTooltip = null;\n    }\n\n    if (this.parent.eventSettings.enableTooltip || this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.headerTooltipTemplate) {\n      this.parent.eventTooltip = new EventTooltip(this.parent);\n    }\n  };\n\n  Render.prototype.updateHeader = function () {\n    if (this.parent.headerModule) {\n      this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);\n\n      if (this.parent.activeViewOptions.readonly) {\n        addClass([this.parent.element], READ_ONLY);\n      } else if (this.parent.element.classList.contains(READ_ONLY)) {\n        removeClass([this.parent.element], READ_ONLY);\n      }\n\n      this.parent.headerModule.updateDateRange();\n      this.parent.headerModule.updateHeaderItems('remove');\n    }\n  };\n\n  Render.prototype.updateLabelText = function (view) {\n    var content = this.parent.activeView.getLabelText(view);\n    this.parent.element.setAttribute('role', 'main');\n    this.parent.element.setAttribute('aria-label', content);\n  };\n\n  return Render;\n}();\n\nvar __extends$5 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\n\n\nvar WorkHours =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$5(WorkHours, _super);\n\n  function WorkHours() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$2([Property(true)], WorkHours.prototype, \"highlight\", void 0);\n\n  __decorate$2([Property('09:00')], WorkHours.prototype, \"start\", void 0);\n\n  __decorate$2([Property('18:00')], WorkHours.prototype, \"end\", void 0);\n\n  return WorkHours;\n}(ChildProperty);\n\nvar __extends$6 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\n\n\nvar TimeScale =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$6(TimeScale, _super);\n\n  function TimeScale() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$3([Property(true)], TimeScale.prototype, \"enable\", void 0);\n\n  __decorate$3([Property(60)], TimeScale.prototype, \"interval\", void 0);\n\n  __decorate$3([Property(2)], TimeScale.prototype, \"slotCount\", void 0);\n\n  __decorate$3([Property()], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n\n  __decorate$3([Property()], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n\n  return TimeScale;\n}(ChildProperty);\n\nvar __extends$7 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\n\n\nvar QuickInfoTemplates =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$7(QuickInfoTemplates, _super);\n\n  function QuickInfoTemplates() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$4([Property('Both')], QuickInfoTemplates.prototype, \"templateType\", void 0);\n\n  __decorate$4([Property()], QuickInfoTemplates.prototype, \"header\", void 0);\n\n  __decorate$4([Property()], QuickInfoTemplates.prototype, \"content\", void 0);\n\n  __decorate$4([Property()], QuickInfoTemplates.prototype, \"footer\", void 0);\n\n  return QuickInfoTemplates;\n}(ChildProperty);\n\nvar __extends$8 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\n\n\nvar HeaderRows =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$8(HeaderRows, _super);\n\n  function HeaderRows() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$5([Property()], HeaderRows.prototype, \"option\", void 0);\n\n  __decorate$5([Property()], HeaderRows.prototype, \"template\", void 0);\n\n  return HeaderRows;\n}(ChildProperty);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable max-len */\n\n/**\n * Schedule CRUD operations\n */\n\n\nvar Crud =\n/** @__PURE__ @class */\nfunction () {\n  function Crud(parent) {\n    this.parent = parent;\n    this.crudObj = {\n      sourceEvent: null,\n      targetEvent: null,\n      isCrudAction: false\n    };\n  }\n\n  Crud.prototype.getQuery = function () {\n    var start = this.parent.activeView.startDate();\n    var end = this.parent.activeView.endDate();\n    return this.parent.dataModule.generateQuery(start, end);\n  };\n\n  Crud.prototype.getTable = function () {\n    if (this.parent.eventSettings.query) {\n      var query = this.parent.eventSettings.query.clone();\n      return query.fromTable;\n    }\n\n    return null;\n  };\n\n  Crud.prototype.refreshDataManager = function () {\n    var _this = this;\n\n    if (!this.parent.activeView) {\n      return;\n    }\n\n    var start = this.parent.activeView.startDate();\n    var end = this.parent.activeView.endDate();\n    var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n    dataManager.then(function (e) {\n      return _this.dataManagerSuccess(e);\n    }).catch(function (e) {\n      return _this.dataManagerFailure(e);\n    });\n  };\n\n  Crud.prototype.dataManagerSuccess = function (e) {\n    var _this = this;\n\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.trigger(dataBinding, e, function (args) {\n      var resultData = extend([], args.result, null, true);\n      _this.parent.eventsData = resultData.filter(function (data) {\n        return !data[_this.parent.eventFields.isBlock];\n      });\n      _this.parent.blockData = resultData.filter(function (data) {\n        return data[_this.parent.eventFields.isBlock];\n      });\n\n      _this.refreshProcessedData();\n\n      if (_this.parent.dragAndDropModule && _this.parent.dragAndDropModule.actionObj.action === 'drag') {\n        _this.parent.dragAndDropModule.navigationWrapper();\n      }\n\n      _this.parent.trigger(dataBound, null, function () {\n        _this.parent.hideSpinner();\n\n        if (_this.parent.isPrinting) {\n          _this.parent.notify(print$1, {});\n        }\n      });\n    });\n  };\n\n  Crud.prototype.dataManagerFailure = function (e) {\n    var _this = this;\n\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.trigger(actionFailure, {\n      error: e\n    }, function () {\n      return _this.parent.hideSpinner();\n    });\n  };\n\n  Crud.prototype.refreshProcessedData = function (isVirtualScrollAction) {\n    if (isVirtualScrollAction === void 0) {\n      isVirtualScrollAction = false;\n    }\n\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.actionObj.action = '';\n      removeClass([this.parent.element], 'e-event-action');\n    }\n\n    if (this.parent.activeViewOptions && this.parent.activeViewOptions.eventTemplate) {\n      var templateNames = ['eventTemplate'];\n\n      if (this.crudObj.isCrudAction && ['Agenda', 'MonthAgenda', 'Year', 'TimelineYear'].indexOf(this.parent.currentView) === -1) {\n        templateNames = [];\n\n        for (var i = 0, len = this.crudObj.sourceEvent.length; i < len; i++) {\n          templateNames.push('eventTemplate_' + this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex);\n\n          if (this.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n            templateNames.push('eventTemplate_' + this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex);\n          }\n        }\n      }\n\n      if (templateNames.length > 0) {\n        this.parent.resetTemplates(templateNames);\n      }\n    }\n\n    if (isVirtualScrollAction) {\n      this.parent.notify(dataReady, {\n        processedData: this.parent.eventsProcessed\n      });\n      return;\n    }\n\n    var eventsData = this.parent.eventsData || [];\n    var blockData = this.parent.blockData || [];\n    var data = eventsData.concat(blockData);\n    this.parent.notify(dataReady, {\n      processedData: this.parent.eventBase ? this.parent.eventBase.processData(data) : []\n    });\n  };\n\n  Crud.prototype.refreshData = function (args) {\n    var _this = this;\n\n    var actionArgs = {\n      requestType: args.requestType,\n      cancel: false,\n      data: args.data,\n      addedRecords: args.editParams.addedRecords,\n      changedRecords: args.editParams.changedRecords,\n      deletedRecords: args.editParams.deletedRecords\n    };\n\n    if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element) {\n      this.parent.dragAndDropModule.actionObj.element.style.display = 'none';\n    }\n\n    if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element) {\n      this.parent.resizeModule.actionObj.element.style.display = 'none';\n    }\n\n    if (this.parent.isSpecificResourceEvents()) {\n      if (args.requestType === 'eventCreated' || args.requestType === 'eventRemoved') {\n        this.crudObj.isCrudAction = true;\n        this.crudObj.sourceEvent = [];\n        var crudData = args.data instanceof Array ? args.data.length === 0 && args.requestType === 'eventRemoved' ? args.editParams.deletedRecords : args.data : (typeof args.data === 'string' || typeof args.data === 'number') && args.requestType === 'eventRemoved' ? args.editParams.deletedRecords : [args.data];\n\n        var _loop_1 = function (data) {\n          this_1.crudObj.isCrudAction = !(args.requestType === 'eventRemoved' && !isNullOrUndefined(data.parent));\n          var groupIndex = this_1.parent.eventBase.getGroupIndexFromEvent(data);\n\n          if (groupIndex > -1 && this_1.parent.crudModule.crudObj.sourceEvent.filter(function (tdData) {\n            return tdData.groupIndex === groupIndex;\n          }).length === 0 && this_1.crudObj.isCrudAction) {\n            this_1.crudObj.sourceEvent.push(this_1.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)]);\n          }\n        };\n\n        var this_1 = this;\n\n        for (var _i = 0, crudData_1 = crudData; _i < crudData_1.length; _i++) {\n          var data = crudData_1[_i];\n\n          _loop_1(data);\n        }\n\n        this.crudObj.targetEvent = this.crudObj.sourceEvent;\n      }\n    }\n\n    if (this.parent.dataModule.dataManager.dataSource.offline) {\n      this.parent.trigger(actionComplete, actionArgs, function (offlineArgs) {\n        if (!offlineArgs.cancel) {\n          _this.refreshDataManager();\n        }\n      });\n    } else {\n      args.promise.then(function () {\n        if (!_this.parent || _this.parent && _this.parent.isDestroyed) {\n          return;\n        }\n\n        _this.parent.trigger(actionComplete, actionArgs, function (onlineArgs) {\n          if (!onlineArgs.cancel) {\n            _this.refreshDataManager();\n          }\n        });\n      }).catch(function (e) {\n        if (!_this.parent || _this.parent && _this.parent.isDestroyed) {\n          return;\n        }\n\n        _this.parent.trigger(actionFailure, {\n          error: e\n        });\n      });\n    }\n  };\n\n  Crud.prototype.addEvent = function (eventData) {\n    var _this = this;\n\n    if (this.parent.eventSettings.allowAdding && !this.parent.activeViewOptions.readonly) {\n      if (!this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n        this.parent.quickPopup.openValidationError('blockAlert', eventData);\n        return;\n      }\n\n      var addEvents = eventData instanceof Array ? eventData : [eventData];\n\n      if (addEvents.length === 0) {\n        return;\n      }\n\n      var args = {\n        requestType: 'eventCreate',\n        cancel: false,\n        data: addEvents,\n        addedRecords: addEvents,\n        changedRecords: [],\n        deletedRecords: []\n      };\n      this.parent.trigger(actionBegin, args, function (addArgs) {\n        if (!addArgs.cancel) {\n          var fields = _this.parent.eventFields;\n          var editParams = {\n            addedRecords: [],\n            changedRecords: [],\n            deletedRecords: []\n          };\n          var promise = void 0;\n\n          if (addArgs.addedRecords instanceof Array) {\n            for (var _i = 0, _a = addArgs.addedRecords; _i < _a.length; _i++) {\n              var event_1 = _a[_i];\n              event_1 = _this.parent.eventBase.updateEventDateTime(event_1);\n              var eventData_1 = extend({}, _this.parent.eventBase.processTimezone(event_1, true), null, true);\n              editParams.addedRecords.push(eventData_1);\n            }\n\n            promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n          } else {\n            var event_2 = _this.parent.eventBase.processTimezone(addArgs.addedRecords, true);\n\n            editParams.addedRecords.push(event_2);\n            promise = _this.parent.dataModule.dataManager.insert(event_2, _this.getTable(), _this.getQuery());\n          }\n\n          var crudArgs = {\n            requestType: 'eventCreated',\n            cancel: false,\n            data: addArgs.addedRecords,\n            promise: promise,\n            editParams: editParams\n          };\n\n          _this.refreshData(crudArgs);\n        }\n      });\n    }\n  };\n\n  Crud.prototype.saveEvent = function (eventData, action) {\n    var _this = this;\n\n    if (this.parent.eventSettings.allowEditing && !this.parent.activeViewOptions.readonly) {\n      if (this.parent.currentAction !== 'EditFollowingEvents' && !this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n        this.parent.quickPopup.openValidationError('blockAlert', eventData);\n        this.parent.crudModule.crudObj.isCrudAction = false;\n        return;\n      }\n\n      var updateEvents = eventData instanceof Array ? eventData : [eventData];\n\n      if (updateEvents.length === 0) {\n        return;\n      }\n\n      this.parent.currentAction = action;\n\n      if (action) {\n        switch (action) {\n          case 'Save':\n            this.processSave(eventData);\n            break;\n\n          case 'EditOccurrence':\n            this.processOccurrences(eventData, action);\n            break;\n\n          case 'EditFollowingEvents':\n            this.processFollowSeries(eventData, action);\n            break;\n\n          case 'EditSeries':\n            this.processEntireSeries(eventData, action);\n            break;\n        }\n      } else {\n        var args = {\n          requestType: 'eventChange',\n          cancel: false,\n          data: eventData,\n          addedRecords: [],\n          changedRecords: updateEvents,\n          deletedRecords: []\n        };\n        this.parent.trigger(actionBegin, args, function (saveArgs) {\n          if (!saveArgs.cancel) {\n            var promise = void 0;\n            var fields = _this.parent.eventFields;\n            var editParams = {\n              addedRecords: [],\n              changedRecords: [],\n              deletedRecords: []\n            };\n\n            if (saveArgs.changedRecords instanceof Array) {\n              for (var _i = 0, _a = saveArgs.changedRecords; _i < _a.length; _i++) {\n                var event_3 = _a[_i];\n                event_3 = _this.parent.eventBase.updateEventDateTime(event_3);\n                var eventData_2 = extend({}, _this.parent.eventBase.processTimezone(event_3, true), null, true);\n                editParams.changedRecords.push(eventData_2);\n              }\n\n              promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n            } else {\n              var event_4 = _this.parent.eventBase.processTimezone(saveArgs.changedRecords, true);\n\n              editParams.changedRecords.push(event_4);\n              promise = _this.parent.dataModule.dataManager.update(fields.id, event_4, _this.getTable(), _this.getQuery());\n            }\n\n            var crudArgs = {\n              requestType: 'eventChanged',\n              cancel: false,\n              data: saveArgs.changedRecords,\n              promise: promise,\n              editParams: editParams\n            };\n\n            _this.refreshData(crudArgs);\n          }\n        });\n      }\n    }\n  };\n\n  Crud.prototype.deleteEvent = function (eventData, action) {\n    var _this = this;\n\n    if (this.parent.eventSettings.allowDeleting && !this.parent.activeViewOptions.readonly) {\n      this.parent.currentAction = action;\n      var deleteEvents = [];\n\n      if (typeof eventData === 'string' || typeof eventData === 'number') {\n        deleteEvents = this.parent.eventsData.filter(function (eventObj) {\n          return eventObj[_this.parent.eventFields.id] === eventData;\n        });\n      } else {\n        deleteEvents = eventData instanceof Array ? eventData : [eventData];\n      }\n\n      if (deleteEvents.length === 0) {\n        return;\n      }\n\n      if (action) {\n        switch (action) {\n          case 'Delete':\n            this.processDelete(deleteEvents);\n            break;\n\n          case 'DeleteOccurrence':\n            this.processOccurrences(deleteEvents, action);\n            break;\n\n          case 'DeleteFollowingEvents':\n            this.processFollowSeries(deleteEvents, action);\n            break;\n\n          case 'DeleteSeries':\n            this.processEntireSeries(deleteEvents, action);\n            break;\n        }\n      } else {\n        var args = {\n          requestType: 'eventRemove',\n          cancel: false,\n          data: eventData,\n          addedRecords: [],\n          changedRecords: [],\n          deletedRecords: deleteEvents\n        };\n        this.parent.trigger(actionBegin, args, function (deleteArgs) {\n          if (!deleteArgs.cancel) {\n            var promise = void 0;\n            var fields = _this.parent.eventFields;\n            var editParams = {\n              addedRecords: [],\n              changedRecords: [],\n              deletedRecords: []\n            };\n\n            if (deleteArgs.deletedRecords.length > 1) {\n              editParams.deletedRecords = editParams.deletedRecords.concat(deleteArgs.deletedRecords);\n              promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n            } else {\n              editParams.deletedRecords.push(deleteArgs.deletedRecords[0]);\n              promise = _this.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], _this.getTable(), _this.getQuery());\n            }\n\n            _this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n\n            var crudArgs = {\n              requestType: 'eventRemoved',\n              cancel: false,\n              data: deleteArgs.deletedRecords,\n              promise: promise,\n              editParams: editParams\n            };\n\n            _this.refreshData(crudArgs);\n          }\n        });\n      }\n    }\n  };\n\n  Crud.prototype.processOccurrences = function (eventData, action) {\n    var _this = this;\n\n    var occurrenceData = [];\n    var isDeletedRecords = false;\n\n    if (eventData instanceof Array) {\n      for (var _i = 0, eventData_3 = eventData; _i < eventData_3.length; _i++) {\n        var event_5 = eventData_3[_i];\n        occurrenceData.push({\n          occurrence: event_5,\n          parent: this.getParentEvent(event_5)\n        });\n      }\n    } else {\n      occurrenceData = {\n        occurrence: eventData,\n        parent: this.getParentEvent(eventData)\n      };\n    }\n\n    var updateEvents = eventData instanceof Array ? eventData : [eventData];\n    var args = {\n      requestType: action === 'EditOccurrence' ? 'eventChange' : 'eventRemove',\n      cancel: false,\n      addedRecords: [],\n      changedRecords: updateEvents,\n      deletedRecords: []\n    };\n    args.data = occurrenceData;\n    this.parent.trigger(actionBegin, args, function (occurrenceArgs) {\n      if (!occurrenceArgs.cancel) {\n        var fields = _this.parent.eventFields;\n        var editParams = {\n          addedRecords: [],\n          changedRecords: [],\n          deletedRecords: []\n        };\n        var occurrenceEvents = occurrenceData instanceof Array ? occurrenceData : [occurrenceData];\n\n        var _loop_2 = function (a, count) {\n          var childEvent = occurrenceArgs.changedRecords[parseInt(a.toString(), 10)];\n          var parentEvent = occurrenceEvents[parseInt(a.toString(), 10)].parent;\n          var parentException = parentEvent[fields.recurrenceException];\n          var editedData = void 0;\n          var exceptionDate = void 0;\n\n          switch (action) {\n            case 'EditOccurrence':\n              editedData = _this.parent.eventsProcessed.filter(function (event) {\n                return event.Guid === childEvent.Guid;\n              })[0];\n              exceptionDate = _this.excludeDateCheck(editedData[fields.startTime], parentException);\n\n              if (exceptionDate !== parentEvent[fields.recurrenceException]) {\n                parentEvent[fields.recurrenceException] = exceptionDate;\n                childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);\n                childEvent[fields.recurrenceID] = parentEvent[fields.id];\n                childEvent[fields.followingID] = null;\n                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n              } else {\n                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n              }\n\n              break;\n\n            case 'DeleteOccurrence':\n              if (!childEvent[fields.recurrenceException]) {\n                parentEvent[fields.recurrenceException] = _this.excludeDateCheck(childEvent[fields.startTime], parentException);\n                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n              }\n\n              if (childEvent[fields.id] !== parentEvent[fields.id]) {\n                editParams.deletedRecords.push(childEvent);\n                isDeletedRecords = true;\n              }\n\n              break;\n          }\n        };\n\n        for (var a = 0, count = occurrenceArgs.changedRecords.length; a < count; a++) {\n          _loop_2(a, count);\n        }\n\n        var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n\n        _this.parent.eventBase.selectWorkCellByTime(occurrenceArgs.changedRecords);\n\n        var crudArgs = {\n          requestType: action === 'EditOccurrence' ? 'eventChanged' : 'eventRemoved',\n          cancel: false,\n          data: isDeletedRecords ? occurrenceArgs.deletedRecords : occurrenceArgs.changedRecords,\n          promise: promise,\n          editParams: editParams\n        };\n\n        _this.refreshData(crudArgs);\n      }\n    });\n  };\n\n  Crud.prototype.processFollowSeries = function (eventData, action) {\n    var _this = this;\n\n    var followData = [];\n\n    if (eventData instanceof Array) {\n      for (var _i = 0, eventData_4 = eventData; _i < eventData_4.length; _i++) {\n        var event_6 = eventData_4[_i];\n        followData.push({\n          occurrence: event_6,\n          parent: this.getParentEvent(event_6)\n        });\n      }\n    } else {\n      followData = {\n        occurrence: eventData,\n        parent: this.getParentEvent(eventData)\n      };\n    }\n\n    var updateFollowEvents = eventData instanceof Array ? eventData : [eventData];\n    var args = {\n      requestType: action === 'EditFollowingEvents' ? 'eventChange' : 'eventRemove',\n      cancel: false,\n      addedRecords: [],\n      changedRecords: updateFollowEvents,\n      deletedRecords: []\n    };\n    args.data = followData;\n    this.parent.trigger(actionBegin, args, function (followArgs) {\n      if (!followArgs.cancel) {\n        var fields_1 = _this.parent.eventFields;\n        var editParams = {\n          addedRecords: [],\n          changedRecords: [],\n          deletedRecords: []\n        };\n        var followEvents = followData instanceof Array ? followData : [followData];\n\n        var _loop_3 = function (a, count) {\n          var childEvent = followArgs.changedRecords[parseInt(a.toString(), 10)];\n          var parentEvent = followEvents[parseInt(a.toString(), 10)].parent;\n\n          var followData_1 = _this.parent.eventBase.getEventCollections(parentEvent, childEvent);\n\n          var isSpanned = void 0;\n\n          switch (action) {\n            case 'EditFollowingEvents':\n              _this.processRecurrenceRule(parentEvent, childEvent);\n\n              isSpanned = !_this.parent.eventBase.isFollowingEvent(parentEvent, childEvent);\n              childEvent[fields_1.followingID] = isSpanned ? null : parentEvent[fields_1.id];\n              childEvent[fields_1.recurrenceID] = null;\n              editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n              editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n\n              if (!_this.parent.uiStateValues.isIgnoreOccurrence) {\n                childEvent[fields_1.recurrenceException] = null;\n\n                if (followData_1.occurrence.length > 0) {\n                  var rule = followData_1.occurrence.slice(-1)[0][fields_1.recurrenceRule];\n\n                  if (rule.indexOf('COUNT') === -1) {\n                    childEvent[fields_1.recurrenceRule] = rule;\n                  }\n                }\n\n                if (followData_1.follow.length > 0) {\n                  childEvent[fields_1.recurrenceRule] = followData_1.follow.slice(-1)[0][fields_1.recurrenceRule];\n                  editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.follow);\n                }\n\n                if (isSpanned) {\n                  followData_1.occurrence = followData_1.occurrence.filter(function (eventObj) {\n                    return eventObj[fields_1.recurrenceID] === childEvent[fields_1.id];\n                  });\n                }\n\n                editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence);\n              }\n\n              break;\n\n            case 'DeleteFollowingEvents':\n              _this.processRecurrenceRule(parentEvent, childEvent[fields_1.startTime]);\n\n              editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n              editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence).concat(followData_1.follow);\n              break;\n          }\n        };\n\n        for (var a = 0, count = followArgs.changedRecords.length; a < count; a++) {\n          _loop_3(a, count);\n        }\n\n        var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_1.id, _this.getTable(), _this.getQuery());\n\n        _this.parent.eventBase.selectWorkCellByTime(followArgs.changedRecords);\n\n        var crudArgs = {\n          requestType: action === 'EditFollowingEvents' ? 'eventChanged' : 'eventRemoved',\n          cancel: false,\n          data: followArgs.changedRecords,\n          promise: promise,\n          editParams: editParams\n        };\n\n        _this.refreshData(crudArgs);\n      }\n    });\n  };\n\n  Crud.prototype.processEntireSeries = function (eventData, action) {\n    var _this = this;\n\n    var seriesData = [];\n    var isDeletedRecords = false;\n\n    if (eventData instanceof Array) {\n      for (var _i = 0, eventData_5 = eventData; _i < eventData_5.length; _i++) {\n        var event_7 = eventData_5[_i];\n        seriesData.push(this.getParentEvent(event_7, true));\n      }\n    } else {\n      seriesData = this.getParentEvent(eventData, true);\n    }\n\n    var updateSeriesEvents = eventData instanceof Array ? eventData : [eventData];\n    var args = {\n      requestType: action === 'EditSeries' ? 'eventChange' : 'eventRemove',\n      cancel: false,\n      addedRecords: [],\n      changedRecords: updateSeriesEvents,\n      deletedRecords: []\n    };\n    args.data = seriesData;\n    this.parent.trigger(actionBegin, args, function (seriesArgs) {\n      if (!seriesArgs.cancel) {\n        var fields_2 = _this.parent.eventFields;\n        var editParams = {\n          addedRecords: [],\n          changedRecords: [],\n          deletedRecords: []\n        };\n        var seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];\n\n        var _loop_4 = function (a, count) {\n          var childEvent = seriesArgs.changedRecords[parseInt(a.toString(), 10)];\n          var parentEvent = seriesEvents[parseInt(a.toString(), 10)];\n\n          var eventCollections = _this.parent.eventBase.getEventCollections(parentEvent);\n\n          var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n\n          switch (action) {\n            case 'EditSeries':\n              childEvent[fields_2.id] = parentEvent[fields_2.id];\n              childEvent[fields_2.recurrenceID] = null;\n              childEvent[fields_2.followingID] = null;\n\n              if (_this.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields_2.recurrenceException]) {\n                var originalParent = _this.parent.eventsData.filter(function (eventObj) {\n                  return eventObj[fields_2.id] === childEvent[fields_2.id];\n                });\n\n                if (originalParent.length > 0) {\n                  childEvent[fields_2.recurrenceRule] = originalParent[0][fields_2.recurrenceRule];\n                }\n              } else {\n                childEvent[fields_2.recurrenceException] = null;\n                editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents);\n              }\n\n              editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n              _this.parent.uiStateValues.isIgnoreOccurrence = false;\n              break;\n\n            case 'DeleteSeries':\n              editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents.concat(parentEvent));\n              isDeletedRecords = true;\n              break;\n          }\n        };\n\n        for (var a = 0, count = seriesArgs.changedRecords.length; a < count; a++) {\n          _loop_4(a, count);\n        }\n\n        var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_2.id, _this.getTable(), _this.getQuery());\n\n        _this.parent.eventBase.selectWorkCellByTime(seriesArgs.changedRecords);\n\n        var crudArgs = {\n          requestType: action === 'EditSeries' ? 'eventChanged' : 'eventRemoved',\n          cancel: false,\n          data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,\n          promise: promise,\n          editParams: editParams\n        };\n\n        _this.refreshData(crudArgs);\n      }\n    });\n  };\n\n  Crud.prototype.processDelete = function (eventData) {\n    var _this = this;\n\n    var deleteData = [];\n\n    for (var _i = 0, eventData_6 = eventData; _i < eventData_6.length; _i++) {\n      var eventObj = eventData_6[_i];\n\n      if (eventObj[this.parent.eventFields.recurrenceRule]) {\n        deleteData.push({\n          occurrence: eventObj,\n          parent: this.getParentEvent(eventObj)\n        });\n      } else {\n        deleteData.push(eventObj);\n      }\n    }\n\n    var args = {\n      requestType: 'eventRemove',\n      cancel: false,\n      addedRecords: [],\n      changedRecords: [],\n      deletedRecords: eventData\n    };\n    args.data = deleteData;\n    this.parent.trigger(actionBegin, args, function (deleteArgs) {\n      if (!deleteArgs.cancel) {\n        var fields_3 = _this.parent.eventFields;\n        var editParams = {\n          addedRecords: [],\n          changedRecords: [],\n          deletedRecords: []\n        };\n\n        var _loop_5 = function (a, count) {\n          var isDelete = isNullOrUndefined(deleteArgs.deletedRecords[parseInt(a.toString(), 10)][_this.parent.eventFields.recurrenceRule]);\n\n          if (!isDelete) {\n            var parentEvent_1 = deleteData[parseInt(a.toString(), 10)].parent;\n            var isEdited = editParams.changedRecords.filter(function (obj) {\n              return obj[fields_3.id] === parentEvent_1[fields_3.id];\n            });\n            var editedDate = deleteArgs.deletedRecords[parseInt(a.toString(), 10)][fields_3.startTime];\n\n            if (isEdited.length > 0) {\n              var editedData = isEdited[0];\n              editedData[fields_3.recurrenceException] = _this.excludeDateCheck(editedDate, editedData[fields_3.recurrenceException]);\n            } else {\n              parentEvent_1[fields_3.recurrenceException] = _this.excludeDateCheck(editedDate, parentEvent_1[fields_3.recurrenceException]);\n            }\n\n            if (isEdited.length === 0) {\n              editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent_1, true));\n            }\n\n            isDelete = deleteArgs.deletedRecords[parseInt(a.toString(), 10)][fields_3.id] !== parentEvent_1[fields_3.id];\n          }\n\n          if (isDelete) {\n            editParams.deletedRecords.push(deleteArgs.deletedRecords[parseInt(a.toString(), 10)]);\n          }\n        };\n\n        for (var a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {\n          _loop_5(a, count);\n        }\n\n        var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_3.id, _this.getTable(), _this.getQuery());\n\n        var crudArgs = {\n          requestType: 'eventRemoved',\n          cancel: false,\n          data: deleteArgs.deletedRecords,\n          promise: promise,\n          editParams: editParams\n        };\n\n        _this.refreshData(crudArgs);\n      }\n    });\n  };\n\n  Crud.prototype.processSave = function (data) {\n    var _this = this;\n\n    var eventData = data instanceof Array ? data : [data];\n    var editData = [];\n\n    for (var _i = 0, eventData_7 = eventData; _i < eventData_7.length; _i++) {\n      var eventObj = eventData_7[_i];\n\n      if (eventObj[this.parent.eventFields.recurrenceRule]) {\n        editData.push({\n          occurrence: eventObj,\n          parent: this.getParentEvent(eventObj)\n        });\n      } else {\n        editData.push(eventObj);\n      }\n    }\n\n    var args = {\n      requestType: 'eventChange',\n      cancel: false,\n      addedRecords: [],\n      changedRecords: eventData,\n      deletedRecords: []\n    };\n    args.data = editData;\n    this.parent.trigger(actionBegin, args, function (editArgs) {\n      if (!editArgs.cancel) {\n        var fields = _this.parent.eventFields;\n        var editParams = {\n          addedRecords: [],\n          changedRecords: [],\n          deletedRecords: []\n        };\n\n        for (var _i = 0, _a = editArgs.changedRecords; _i < _a.length; _i++) {\n          var record = _a[_i];\n\n          if (!isNullOrUndefined(record[fields.recurrenceRule]) && isNullOrUndefined(record[fields.recurrenceException])) {\n            var exceptionString = getRecurrenceStringFromDate(record[fields.startTime]);\n\n            var parentEle = _this.getParentEvent(record);\n\n            parentEle[fields.recurrenceException] = isNullOrUndefined(parentEle[fields.recurrenceException]) ? exceptionString : parentEle[fields.recurrenceException].concat(',' + exceptionString);\n            record[fields.id] = _this.parent.getEventMaxID();\n            record[fields.recurrenceException] = exceptionString;\n            editParams.addedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEle, true));\n          } else {\n            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n          }\n        }\n\n        var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n\n        var crudArgs = {\n          requestType: 'eventChanged',\n          cancel: false,\n          data: editArgs.changedRecords,\n          promise: promise,\n          editParams: editParams\n        };\n\n        _this.refreshData(crudArgs);\n      }\n    });\n  };\n\n  Crud.prototype.getParentEvent = function (event, isParent) {\n    if (isParent === void 0) {\n      isParent = false;\n    }\n\n    var parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;\n\n    if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {\n      this.parent.eventBase.timezoneConvert(parentEvent);\n    }\n\n    return parentEvent;\n  };\n\n  Crud.prototype.excludeDateCheck = function (eventStartTime, exceptionDateList) {\n    var exDate = getRecurrenceStringFromDate(eventStartTime);\n\n    if (!isNullOrUndefined(exceptionDateList)) {\n      if (exceptionDateList.indexOf(exDate) === -1) {\n        exceptionDateList = !isNullOrUndefined(exceptionDateList) ? exceptionDateList + ',' + exDate : exDate;\n      }\n    } else {\n      exceptionDateList = exDate;\n    }\n\n    return exceptionDateList;\n  };\n\n  Crud.prototype.processRecurrenceRule = function (parentEvent, followEvent) {\n    var fields = this.parent.eventFields;\n    var recurrenceRule = parentEvent[fields.recurrenceRule];\n    var endDate;\n\n    if (followEvent instanceof Date) {\n      endDate = new Date(+followEvent);\n    } else {\n      endDate = new Date(+followEvent[fields.startTime]);\n      var newRecurrenceRule = followEvent[fields.recurrenceRule];\n\n      if (newRecurrenceRule) {\n        var startDate = parentEvent[fields.startTime];\n        var ruleException = this.parent.currentAction === 'DeleteFollowingEvents' ? followEvent[fields.recurrenceException] : null;\n        var dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);\n        var untilDate = new Date(dateCollection.slice(-1)[0]);\n        untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());\n        endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());\n        followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, new Date(+untilDate), false);\n      }\n    }\n\n    parentEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(recurrenceRule, addDays(new Date(endDate.getTime()), -1), true);\n  };\n\n  Crud.prototype.getUpdatedRecurrenceRule = function (recurrenceRule, untilDate, isParent) {\n    var splitRule = recurrenceRule.split(';');\n    var updatedRule = '';\n\n    for (var _i = 0, splitRule_1 = splitRule; _i < splitRule_1.length; _i++) {\n      var rule = splitRule_1[_i];\n\n      if (rule !== '') {\n        var ruleKey = rule.split('=')[0];\n        var ruleValue = rule.split('=')[1];\n\n        if (ruleKey === 'COUNT' || ruleKey === 'UNTIL') {\n          ruleValue = getRecurrenceStringFromDate(untilDate);\n          rule = rule.replace(rule, 'UNTIL=' + ruleValue);\n        }\n\n        updatedRule += rule + ';';\n      }\n    }\n\n    if (isParent && updatedRule.indexOf('UNTIL') === -1) {\n      updatedRule += 'UNTIL=' + getRecurrenceStringFromDate(untilDate);\n    }\n\n    return updatedRule;\n  };\n\n  Crud.prototype.isBlockEvent = function (eventData) {\n    var eventCollection = eventData instanceof Array ? eventData : [eventData];\n    var value = false;\n\n    for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n      var event_8 = eventCollection_1[_i];\n      value = event_8[this.parent.eventFields.isBlock] || false;\n    }\n\n    return value;\n  };\n  /**\n   * To destroy the crud module.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Crud.prototype.destroy = function () {\n    this.crudObj = null;\n    this.parent = null;\n  };\n\n  return Crud;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Work cell interactions\n */\n\n\nvar WorkCellInteraction =\n/** @__PURE__ @class */\nfunction () {\n  function WorkCellInteraction(parent) {\n    this.parent = parent;\n    EventHandler.add(this.parent.element, 'mouseover', this.onHover, this);\n  }\n\n  WorkCellInteraction.prototype.cellMouseDown = function (e) {\n    if (this.isPreventAction(e)) {\n      return;\n    }\n\n    this.parent.notify(cellMouseDown, {\n      event: e\n    });\n  };\n\n  WorkCellInteraction.prototype.cellClick = function (e) {\n    var _this = this;\n\n    if (this.isPreventAction(e)) {\n      return;\n    }\n\n    var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n    var target = closest(e.target, queryStr);\n\n    if (isNullOrUndefined(target)) {\n      return;\n    }\n\n    if (!isNullOrUndefined(closest(e.target, '.' + NEW_EVENT_CLASS))) {\n      this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n      return;\n    }\n\n    var navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n    var navigateView = this.parent.getNavigateView();\n    var sameView = this.parent.currentView === navigateView;\n\n    if (isNullOrUndefined(navigateEle) || sameView || isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n      if (this.parent.activeViewOptions.readonly && this.parent.currentView !== 'MonthAgenda') {\n        if (this.parent.quickPopup) {\n          this.parent.quickPopup.quickPopupHide();\n        }\n\n        return;\n      }\n\n      if (this.parent.isAdaptive && (e.target.classList.contains(MORE_INDICATOR_CLASS) || closest(e.target, '.' + MORE_INDICATOR_CLASS))) {\n        return;\n      }\n\n      var isWorkCell_1 = target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS);\n\n      if (isWorkCell_1 && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n        this.parent.keyboardInteractionModule.onMouseSelection(e);\n        return;\n      }\n\n      this.parent.activeCellsData = this.parent.getCellDetails(target);\n      var args = extend(this.parent.activeCellsData, {\n        cancel: false,\n        event: e,\n        name: 'cellClick'\n      });\n      this.parent.trigger(cellClick, args, function (clickArgs) {\n        if (!clickArgs.cancel) {\n          if (isWorkCell_1) {\n            _this.parent.selectCell(target);\n          }\n\n          if (_this.parent.allowInline) {\n            var inlineArgs = {\n              element: clickArgs.element,\n              groupIndex: clickArgs.groupIndex,\n              type: 'Cell'\n            };\n\n            _this.parent.notify(inlineClick, inlineArgs);\n          } else {\n            _this.parent.notify(cellClick, clickArgs);\n          }\n        } else {\n          if (_this.parent.quickPopup) {\n            _this.parent.quickPopup.quickPopupHide();\n          }\n        }\n      });\n    } else {\n      var date = this.parent.getDateFromElement(target);\n\n      if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n        this.parent.setProperties({\n          selectedDate: date\n        }, true);\n        this.parent.changeView(this.parent.getNavigateView(), e);\n      }\n    }\n  };\n\n  WorkCellInteraction.prototype.cellDblClick = function (e) {\n    var _this = this;\n\n    var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n    var target = closest(e.target, queryStr);\n\n    if (this.parent.activeViewOptions.readonly || this.isPreventAction(e) || isNullOrUndefined(target)) {\n      return;\n    }\n\n    var args = extend(this.parent.activeCellsData, {\n      cancel: false,\n      event: e,\n      name: 'cellDoubleClick'\n    });\n    this.parent.trigger(cellDoubleClick, args, function (clickArgs) {\n      var date = new Date(clickArgs.startTime.getTime());\n\n      if (!_this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n        return;\n      }\n\n      if (!clickArgs.cancel) {\n        _this.parent.eventWindow.openEditor(_this.parent.activeCellsData, 'Add');\n      }\n    });\n  };\n\n  WorkCellInteraction.prototype.onHover = function (e) {\n    var targetSelector = '.' + WORK_CELLS_CLASS + ',.' + TIME_SLOT_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS + ',.' + RESOURCE_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.' + WEEK_NUMBER_CLASS + ',.' + MONTH_HEADER_CLASS;\n    var hoverTarget = closest(e.target, targetSelector);\n\n    if (hoverTarget) {\n      var hoverArgs = {\n        element: hoverTarget,\n        event: e\n      };\n      this.parent.trigger(hover, hoverArgs);\n    }\n  };\n\n  WorkCellInteraction.prototype.isPreventAction = function (e) {\n    if (closest(e.target, '.' + NAVIGATE_CLASS)) {\n      return false;\n    }\n\n    if (closest(e.target, '.' + APPOINTMENT_WRAPPER_CLASS) && !closest(e.target, '.' + MORE_INDICATOR_CLASS)) {\n      return true;\n    }\n\n    var target = closest(e.target, '.' + APPOINTMENT_CLASS + ',.' + RESOURCE_GROUP_CELLS_CLASS);\n\n    if (!isNullOrUndefined(target)) {\n      return true;\n    }\n\n    target = closest(e.target, '.' + HEADER_CELLS_CLASS);\n\n    if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  WorkCellInteraction.prototype.destroy = function () {\n    EventHandler.remove(this.parent.element, 'mouseover', this.onHover);\n  };\n\n  return WorkCellInteraction;\n}();\n\nvar __extends$11 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$8 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\n\n\nvar FieldOptions =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$11(FieldOptions, _super);\n\n  function FieldOptions() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$8([Property()], FieldOptions.prototype, \"name\", void 0);\n\n  __decorate$8([Property()], FieldOptions.prototype, \"default\", void 0);\n\n  __decorate$8([Property()], FieldOptions.prototype, \"title\", void 0);\n\n  __decorate$8([Property({})], FieldOptions.prototype, \"validation\", void 0);\n\n  return FieldOptions;\n}(ChildProperty);\n\nvar __extends$10 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\n\n\nvar Field =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$10(Field, _super);\n\n  function Field() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$7([Property('Id')], Field.prototype, \"id\", void 0);\n\n  __decorate$7([Property('IsBlock')], Field.prototype, \"isBlock\", void 0);\n\n  __decorate$7([Complex({\n    name: 'Subject'\n  }, FieldOptions)], Field.prototype, \"subject\", void 0);\n\n  __decorate$7([Complex({\n    name: 'StartTime'\n  }, FieldOptions)], Field.prototype, \"startTime\", void 0);\n\n  __decorate$7([Complex({\n    name: 'EndTime'\n  }, FieldOptions)], Field.prototype, \"endTime\", void 0);\n\n  __decorate$7([Complex({\n    name: 'StartTimezone'\n  }, FieldOptions)], Field.prototype, \"startTimezone\", void 0);\n\n  __decorate$7([Complex({\n    name: 'EndTimezone'\n  }, FieldOptions)], Field.prototype, \"endTimezone\", void 0);\n\n  __decorate$7([Complex({\n    name: 'Location'\n  }, FieldOptions)], Field.prototype, \"location\", void 0);\n\n  __decorate$7([Complex({\n    name: 'Description'\n  }, FieldOptions)], Field.prototype, \"description\", void 0);\n\n  __decorate$7([Complex({\n    name: 'IsAllDay'\n  }, FieldOptions)], Field.prototype, \"isAllDay\", void 0);\n\n  __decorate$7([Complex({\n    name: 'RecurrenceID'\n  }, FieldOptions)], Field.prototype, \"recurrenceID\", void 0);\n\n  __decorate$7([Complex({\n    name: 'RecurrenceRule'\n  }, FieldOptions)], Field.prototype, \"recurrenceRule\", void 0);\n\n  __decorate$7([Complex({\n    name: 'RecurrenceException'\n  }, FieldOptions)], Field.prototype, \"recurrenceException\", void 0);\n\n  __decorate$7([Property('IsReadonly')], Field.prototype, \"isReadonly\", void 0);\n\n  __decorate$7([Property('FollowingID')], Field.prototype, \"followingID\", void 0);\n\n  return Field;\n}(ChildProperty);\n\nvar __extends$9 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\n\n\nvar EventSettings =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$9(EventSettings, _super);\n\n  function EventSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$6([Property()], EventSettings.prototype, \"template\", void 0);\n\n  __decorate$6([Property([])], EventSettings.prototype, \"dataSource\", void 0);\n\n  __decorate$6([Property()], EventSettings.prototype, \"query\", void 0);\n\n  __decorate$6([Complex({}, Field)], EventSettings.prototype, \"fields\", void 0);\n\n  __decorate$6([Property(false)], EventSettings.prototype, \"enableTooltip\", void 0);\n\n  __decorate$6([Property('AllDayRow')], EventSettings.prototype, \"spannedEventPlacement\", void 0);\n\n  __decorate$6([Property(1)], EventSettings.prototype, \"minimumEventDuration\", void 0);\n\n  __decorate$6([Property()], EventSettings.prototype, \"tooltipTemplate\", void 0);\n\n  __decorate$6([Property()], EventSettings.prototype, \"resourceColorField\", void 0);\n\n  __decorate$6([Property(false)], EventSettings.prototype, \"editFollowingEvents\", void 0);\n\n  __decorate$6([Property(true)], EventSettings.prototype, \"allowAdding\", void 0);\n\n  __decorate$6([Property(true)], EventSettings.prototype, \"allowEditing\", void 0);\n\n  __decorate$6([Property(true)], EventSettings.prototype, \"allowDeleting\", void 0);\n\n  __decorate$6([Property(false)], EventSettings.prototype, \"enableMaxHeight\", void 0);\n\n  __decorate$6([Property(false)], EventSettings.prototype, \"enableIndicator\", void 0);\n\n  __decorate$6([Property(false)], EventSettings.prototype, \"ignoreWhitespace\", void 0);\n\n  __decorate$6([Property()], EventSettings.prototype, \"sortComparer\", void 0);\n\n  __decorate$6([Property()], EventSettings.prototype, \"includeFiltersInQuery\", void 0);\n\n  return EventSettings;\n}(ChildProperty);\n\nvar __extends$12 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$9 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\n\n\nvar Group =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$12(Group, _super);\n\n  function Group() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$9([Property(false)], Group.prototype, \"byDate\", void 0);\n\n  __decorate$9([Property(true)], Group.prototype, \"byGroupID\", void 0);\n\n  __decorate$9([Property(false)], Group.prototype, \"allowGroupEdit\", void 0);\n\n  __decorate$9([Property([])], Group.prototype, \"resources\", void 0);\n\n  __decorate$9([Property(true)], Group.prototype, \"enableCompactView\", void 0);\n\n  __decorate$9([Property()], Group.prototype, \"headerTooltipTemplate\", void 0);\n\n  __decorate$9([Property(false)], Group.prototype, \"hideNonWorkingDays\", void 0);\n\n  return Group;\n}(ChildProperty);\n\nvar __extends$13 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate$10 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\n\n\nvar Resources =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$13(Resources, _super);\n\n  function Resources() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate$10([Property()], Resources.prototype, \"field\", void 0);\n\n  __decorate$10([Property()], Resources.prototype, \"title\", void 0);\n\n  __decorate$10([Property()], Resources.prototype, \"name\", void 0);\n\n  __decorate$10([Property(false)], Resources.prototype, \"allowMultiple\", void 0);\n\n  __decorate$10([Property([])], Resources.prototype, \"dataSource\", void 0);\n\n  __decorate$10([Property()], Resources.prototype, \"query\", void 0);\n\n  __decorate$10([Property('Id')], Resources.prototype, \"idField\", void 0);\n\n  __decorate$10([Property('Text')], Resources.prototype, \"textField\", void 0);\n\n  __decorate$10([Property('Expanded')], Resources.prototype, \"expandedField\", void 0);\n\n  __decorate$10([Property('GroupID')], Resources.prototype, \"groupIDField\", void 0);\n\n  __decorate$10([Property('Color')], Resources.prototype, \"colorField\", void 0);\n\n  __decorate$10([Property('StartHour')], Resources.prototype, \"startHourField\", void 0);\n\n  __decorate$10([Property('EndHour')], Resources.prototype, \"endHourField\", void 0);\n\n  __decorate$10([Property('WorkDays')], Resources.prototype, \"workDaysField\", void 0);\n\n  __decorate$10([Property('CssClass')], Resources.prototype, \"cssClassField\", void 0);\n\n  return Resources;\n}(ChildProperty);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable max-len */\n\n\nvar ResourceBase =\n/** @__PURE__ @class */\nfunction () {\n  function ResourceBase(parent) {\n    this.resourceCollection = [];\n    this.leftPixel = 25;\n    this.resourceDateTree = [];\n    this.parent = parent;\n  }\n\n  ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n    var resColTd = createElement('td', {\n      className: RESOURCE_LEFT_TD_CLASS\n    });\n    var resColDiv = createElement('div', {\n      className: RESOURCE_TEXT_CLASS\n    });\n\n    if (this.parent.activeViewOptions.headerIndentTemplate) {\n      var data = {\n        className: [resColTd.className],\n        type: 'emptyCells'\n      };\n      this.parent.renderHeaderIndentTemplate(data, resColTd);\n    } else {\n      resColTd.appendChild(resColDiv);\n    }\n\n    var args = {\n      elementType: 'emptyCells',\n      element: resColTd\n    };\n    this.parent.trigger(renderCell, args);\n    tr.appendChild(resColTd);\n  };\n\n  ResourceBase.prototype.hideResourceRows = function (tBody) {\n    if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n      return;\n    }\n\n    var trCount = this.lastResourceLevel.length;\n\n    for (var i = 0; i < trCount; i++) {\n      var resData = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n      var res = this.lastResourceLevel[parseInt(i.toString(), 10)].resource;\n\n      if (resData.ClassName === RESOURCE_PARENT_CLASS && !resData[res.expandedField] && !isNullOrUndefined(resData[res.expandedField])) {\n        var trCollection = [].slice.call(tBody.children);\n        var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n        addClass(slicedCollection, HIDDEN_CLASS);\n      }\n    }\n  };\n\n  ResourceBase.prototype.createResourceColumn = function () {\n    var resColl = this.resourceCollection;\n    var resDiv = createElement('div', {\n      className: RESOURCE_COLUMN_WRAP_CLASS\n    });\n    var tbl = this.parent.activeView.createTableLayout(RESOURCE_COLUMN_TABLE_CLASS);\n\n    if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n      addClass([tbl], AUTO_HEIGHT);\n    }\n\n    var tBody = tbl.querySelector('tbody');\n    var resData = this.generateTreeData(true);\n    this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n    this.renderedResources = this.lastResourceLevel;\n\n    if (this.parent.virtualScrollModule) {\n      var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n      this.setExpandedResources();\n      resData = this.expandedResources.slice(0, resourceCount);\n      this.renderedResources = resData;\n    }\n\n    append(this.getContentRows(resData), tBody);\n    this.hideResourceRows(tBody);\n    tbl.appendChild(tBody);\n    resDiv.appendChild(tbl);\n    return resDiv;\n  };\n\n  ResourceBase.prototype.setRenderedResources = function () {\n    var resColl = this.resourceCollection; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    var temp = this.generateTreeData(true);\n    this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n    this.renderedResources = this.lastResourceLevel;\n  };\n\n  ResourceBase.prototype.setExpandedResources = function () {\n    var resources = [];\n\n    for (var i = 0; i < this.lastResourceLevel.length; i++) {\n      var resource = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n      var count = resource.Count;\n      resources.push(this.lastResourceLevel[parseInt(i.toString(), 10)]);\n      var isExpanded = resource[this.lastResourceLevel[parseInt(i.toString(), 10)].resource.expandedField];\n\n      if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n        i = i + count;\n      }\n    }\n\n    this.expandedResources = resources;\n  };\n\n  ResourceBase.prototype.getContentRows = function (resData, isVirtualScroll) {\n    var resRows = [];\n    var left;\n    var rIndex;\n    var resColl = this.resourceCollection;\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        tabindex: isVirtualScroll ? '-1' : '0'\n      }\n    });\n\n    for (var i = 0; i < resData.length; i++) {\n      var ntd = td.cloneNode();\n      rIndex = findIndexInData(resColl, 'name', resData[parseInt(i.toString(), 10)].resource.name);\n\n      if (rIndex === resColl.length - 1) {\n        extend(resData[parseInt(i.toString(), 10)].resourceData, {\n          ClassName: RESOURCE_CHILD_CLASS\n        });\n        this.renderedResources[parseInt(i.toString(), 10)].className = [RESOURCE_CHILD_CLASS];\n      } else {\n        extend(resData[parseInt(i.toString(), 10)].resourceData, {\n          ClassName: RESOURCE_PARENT_CLASS\n        });\n        this.renderedResources[parseInt(i.toString(), 10)].className = [RESOURCE_PARENT_CLASS];\n      }\n\n      left = rIndex * this.leftPixel + 'px';\n\n      if (resData[parseInt(i.toString(), 10)].resourceData.ClassName === RESOURCE_PARENT_CLASS && !isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData.Count) && resData[parseInt(i.toString(), 10)].resourceData.Count > 0) {\n        var iconClass = void 0;\n\n        if (resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField] || isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField])) {\n          iconClass = RESOURCE_COLLAPSE_CLASS;\n        } else {\n          iconClass = RESOURCE_EXPAND_CLASS;\n        }\n\n        var iconDiv = createElement('div');\n        addClass([iconDiv], [RESOURCE_TREE_ICON_CLASS, iconClass]);\n        this.setMargin(iconDiv, left);\n        ntd.appendChild(iconDiv);\n\n        if (this.resourceCollection.length > 1) {\n          EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n        }\n      }\n\n      this.parent.activeView.setResourceHeaderContent(ntd, resData[parseInt(i.toString(), 10)], RESOURCE_TEXT_CLASS);\n      ntd.setAttribute('data-group-index', resData[parseInt(i.toString(), 10)].groupIndex.toString());\n      ntd.setAttribute('aria-label', resData[parseInt(i.toString(), 10)].resourceData[resData[parseInt(i.toString(), 10)].resource.textField] + ' resource');\n\n      if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n        this.setMargin(ntd.querySelector('.' + RESOURCE_TEXT_CLASS), left);\n      }\n\n      var classCollection = [RESOURCE_CELLS_CLASS, resData[parseInt(i.toString(), 10)].resourceData.ClassName];\n      addClass([ntd], classCollection);\n      var args = {\n        elementType: 'resourceHeader',\n        element: ntd,\n        groupIndex: resData[parseInt(i.toString(), 10)].groupIndex\n      };\n      this.parent.trigger(renderCell, args);\n      var ntr = tr.cloneNode();\n      ntr.appendChild(ntd);\n      resRows.push(ntr);\n    }\n\n    return resRows;\n  };\n\n  ResourceBase.prototype.setMargin = function (element, value) {\n    if (!this.parent.enableRtl) {\n      element.style.marginLeft = value;\n    } else {\n      element.style.marginRight = value;\n    }\n  };\n\n  ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n    var collection;\n\n    for (var y = 0; y < parentCollection.length; y++) {\n      var data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n\n      for (var x = 0; x < data.length; x++) {\n        var totalCount = 0;\n\n        if (this.parent.activeViewOptions.group.byGroupID) {\n          var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[parseInt(x.toString(), 10)][parentCollection[parentCollection.length - (y + 1)].idField]);\n          collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n        } else {\n          collection = wholeCollection[wholeCollection.length - 1].dataSource;\n        }\n\n        for (var z = 0; z < collection.length; z++) {\n          totalCount = totalCount + parseInt(collection[parseInt(z.toString(), 10)].Count, 10);\n        }\n\n        totalCount = totalCount + parseInt(data[parseInt(x.toString(), 10)].Count, 10);\n        extend(data[parseInt(x.toString(), 10)], {\n          Count: totalCount\n        });\n      }\n\n      wholeCollection = wholeCollection.slice(0, -1);\n    }\n  };\n\n  ResourceBase.prototype.onTreeIconClick = function (e) {\n    var _this = this;\n\n    if (this.parent.eventTooltip) {\n      this.parent.eventTooltip.close();\n    }\n\n    var target = e.target;\n    var hide;\n    var trElement = closest(target, '.' + RESOURCE_PARENT_CLASS).parentElement;\n    var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n    var args = {\n      cancel: false,\n      event: e,\n      groupIndex: index,\n      requestType: !target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n    };\n    this.parent.trigger(actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        if (target.classList.contains(RESOURCE_COLLAPSE_CLASS)) {\n          classList(target, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n          hide = true;\n        } else {\n          classList(target, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n          hide = false;\n        }\n\n        var eventElements = [].slice.call(_this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS + ',.' + MORE_INDICATOR_CLASS));\n\n        for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {\n          var element = eventElements_1[_i];\n          remove(element);\n        }\n\n        if (_this.parent.virtualScrollModule) {\n          _this.updateVirtualContent(index, hide, e, target);\n        } else {\n          _this.updateContent(index, hide);\n        }\n\n        var data = {\n          cssProperties: _this.parent.getCssProperties(),\n          module: 'scroll'\n        };\n\n        _this.parent.notify(scrollUiUpdate, data);\n\n        args = {\n          cancel: false,\n          event: e,\n          groupIndex: index,\n          requestType: target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n        };\n\n        _this.parent.refreshEvents(false);\n\n        _this.parent.trigger(actionComplete, args);\n      }\n    });\n  };\n\n  ResourceBase.prototype.updateContent = function (index, hide) {\n    var rowCollection = [];\n    var workCellCollection = [];\n    var headerRowCollection = [];\n    var pNode;\n    var clickedRes = this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData;\n    var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n    var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n    var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' .' + APPOINTMENT_CONTAINER_CLASS));\n\n    for (var j = 0; j < clickedRes.Count; j++) {\n      rowCollection.push(resRows[index + j + 1]);\n      workCellCollection.push(contentRows[index + j + 1]);\n      headerRowCollection.push(eventRows[index + j + 1]);\n    }\n\n    var clonedCollection = this.lastResourceLevel;\n\n    for (var i = 0; i < rowCollection.length; i++) {\n      var expanded = true;\n      pNode = rowCollection[parseInt(i.toString(), 10)].children[0].classList.contains(RESOURCE_PARENT_CLASS);\n      clonedCollection[parseInt(index.toString(), 10)].resourceData[clonedCollection[parseInt(index.toString(), 10)].resource.expandedField] = !hide;\n\n      if (hide) {\n        if (pNode) {\n          var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n\n          if (trElem) {\n            classList(trElem, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n          }\n        }\n\n        if (!rowCollection[parseInt(i.toString(), 10)].classList.contains(HIDDEN_CLASS)) {\n          addClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], HIDDEN_CLASS);\n        }\n      } else {\n        if (pNode) {\n          var rowIndex = rowCollection[parseInt(i.toString(), 10)].rowIndex;\n\n          if (!clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField] && !isNullOrUndefined(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField])) {\n            rowCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));\n            workCellCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));\n            headerRowCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));\n            expanded = false;\n          }\n\n          if (expanded) {\n            var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n\n            if (trElem) {\n              classList(trElem, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n            }\n          }\n        }\n\n        if (rowCollection[parseInt(i.toString(), 10)].classList.contains(HIDDEN_CLASS)) {\n          removeClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], HIDDEN_CLASS);\n        }\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ResourceBase.prototype.updateVirtualContent = function (index, expand, e, target) {\n    this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData[this.lastResourceLevel[parseInt(index.toString(), 10)].resource.expandedField] = !expand;\n    this.setExpandedResources();\n    var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n    var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n    this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n\n    if (this.renderedResources.length < resourceCount) {\n      var sIndex = this.expandedResources.length - resourceCount;\n      sIndex = sIndex > 0 ? sIndex : 0;\n      this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n    }\n\n    var virtualTrack = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n    this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n    var resTable = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n    var contentTable = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' ' + 'table');\n    var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n    this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n    var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n\n    if (!isNullOrUndefined(timeIndicator)) {\n      timeIndicator.style.height = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight + 'px';\n    }\n  };\n\n  ResourceBase.prototype.renderResourceHeader = function () {\n    var resourceWrapper = createElement('div', {\n      className: RESOURCE_TOOLBAR_CONTAINER\n    });\n    resourceWrapper.innerHTML = '<div class=\"' + RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + RESOURCE_MENU + '\">' + '<div class=\"e-icons ' + RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + RESOURCE_LEVEL_TITLE + '\"></div></div>';\n\n    if (this.parent.currentView === 'MonthAgenda') {\n      var target = this.parent.activeView.getPanel().querySelector('.' + CONTENT_WRAP_CLASS);\n      target.insertBefore(resourceWrapper, target.querySelector('.' + WRAPPER_CONTAINER_CLASS));\n    } else {\n      this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n    }\n\n    this.renderResourceHeaderText();\n    EventHandler.add(resourceWrapper.querySelector('.' + RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n  };\n\n  ResourceBase.prototype.renderResourceTree = function () {\n    this.popupOverlay = createElement('div', {\n      className: RESOURCE_TREE_POPUP_OVERLAY\n    });\n    var treeWrapper = createElement('div', {\n      className: RESOURCE_TREE_POPUP + ' e-popup-close'\n    });\n\n    if (this.parent.currentView === 'MonthAgenda') {\n      var target = this.parent.activeView.getPanel().querySelector('.' + WRAPPER_CONTAINER_CLASS);\n      target.insertBefore(treeWrapper, target.children[0]);\n      target.appendChild(this.popupOverlay);\n    } else {\n      this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n      this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n    }\n\n    var resourceTree = createElement('div', {\n      className: RESOURCE_TREE\n    });\n    treeWrapper.appendChild(resourceTree);\n    this.treeViewObj = new TreeView({\n      cssClass: this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n      fields: {\n        dataSource: [].slice.call(this.generateTreeData()),\n        id: 'resourceId',\n        text: 'resourceName',\n        child: 'resourceChild'\n      },\n      nodeTemplate: this.parent.resourceHeaderTemplate,\n      nodeClicked: this.resourceClick.bind(this),\n      created: this.resourceTreeCreated.bind(this)\n    });\n    this.treeViewObj.appendTo(resourceTree);\n    this.treeViewObj.expandAll();\n    this.treePopup = new Popup(treeWrapper, {\n      targetType: 'relative',\n      actionOnScroll: 'none',\n      content: this.treeViewObj.element,\n      relateTo: this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS),\n      enableRtl: this.parent.enableRtl,\n      hideAnimation: {\n        name: 'SlideLeftOut',\n        duration: 500\n      },\n      showAnimation: {\n        name: 'SlideLeftIn',\n        duration: 500\n      },\n      viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ? WRAPPER_CONTAINER_CLASS : TABLE_CONTAINER_CLASS))\n    });\n    this.parent.on(documentClick, this.documentClick, this);\n  };\n\n  ResourceBase.prototype.resourceTreeCreated = function () {\n    if (this.parent.activeViewOptions.resourceHeaderTemplate && this.parent.portals && this.treeViewObj.portals) {\n      this.parent.portals = this.parent.portals.concat(this.treeViewObj.portals);\n      this.parent.renderTemplates();\n    }\n  };\n\n  ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n    var _this = this;\n\n    var treeCollection = [];\n    var resTreeColl = [];\n    var groupIndex = 0;\n\n    var _loop_1 = function (i, len) {\n      var treeHandler = function (treeLevel, index, levelId) {\n        var resource = _this.resourceCollection[parseInt(index.toString(), 10)];\n\n        var treeArgs;\n        var resObj;\n\n        if (!isTimeLine) {\n          treeArgs = {\n            resourceId: levelId,\n            resourceName: treeLevel.resourceData[resource.textField],\n            resource: treeLevel.resource,\n            resourceData: treeLevel.resourceData\n          };\n        } else {\n          resObj = {\n            type: 'resourceHeader',\n            resource: treeLevel.resource,\n            resourceData: treeLevel.resourceData,\n            groupIndex: groupIndex,\n            groupOrder: treeLevel.groupOrder\n          };\n          resTreeColl.push(resObj);\n          groupIndex++;\n        }\n\n        if (treeLevel.child.length > 0 && !isTimeLine) {\n          treeArgs.resourceChild = [];\n        }\n\n        var count = 1;\n\n        for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n          var tree = _a[_i];\n\n          if (!isTimeLine) {\n            treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n          } else {\n            treeHandler(tree, index + 1, levelId + '-' + count);\n          }\n\n          count += 1;\n        }\n\n        if (isTimeLine) {\n          extend(resObj.resourceData, {\n            Count: count - 1\n          });\n        }\n\n        return treeArgs;\n      };\n\n      if (!isTimeLine) {\n        treeCollection.push(treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString()));\n      } else {\n        treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString());\n      }\n    };\n\n    var this_1 = this;\n\n    for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n      _loop_1(i, len);\n    }\n\n    if (isTimeLine) {\n      this.lastResourceLevel = resTreeColl;\n      return resTreeColl;\n    } else {\n      return treeCollection;\n    }\n  };\n\n  ResourceBase.prototype.renderResourceHeaderText = function () {\n    var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n    var headerCollection = [];\n\n    var _loop_2 = function (i, len) {\n      var resourceLevel = this_2.resourceCollection[parseInt(i.toString(), 10)];\n      var resourceText = resourceLevel.dataSource.filter(function (resData) {\n        return resData[resourceLevel.idField] === resource.groupOrder[parseInt(i.toString(), 10)];\n      });\n      var resourceName = createElement('div', {\n        className: RESOURCE_NAME\n      });\n      this_2.parent.sanitize(resourceText[0][resourceLevel.textField], resourceName);\n      headerCollection.push(resourceName);\n      var levelIcon = createElement('div', {\n        className: 'e-icons e-icon-next'\n      });\n      headerCollection.push(levelIcon);\n    };\n\n    var this_2 = this;\n\n    for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n      _loop_2(i, len);\n    }\n\n    headerCollection.pop();\n    var target = this.parent.currentView === 'MonthAgenda' ? this.parent.activeView.getPanel() : this.parent.element;\n    var headerWrapper = target.querySelector('.' + RESOURCE_LEVEL_TITLE);\n    removeChildren(headerWrapper);\n\n    for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {\n      var header = headerCollection_1[_i];\n      headerWrapper.appendChild(header);\n    }\n\n    if (this.lastResourceLevel.length === 1) {\n      addClass([this.parent.element.querySelector('.' + RESOURCE_MENU)], DISABLE_CLASS);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ResourceBase.prototype.menuClick = function (event) {\n    if (this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP).classList.contains(POPUP_OPEN)) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], ENABLE_CLASS);\n    } else {\n      var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n      removeClass(treeNodes, 'e-active');\n      addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n      this.treePopup.show();\n      addClass([this.popupOverlay], ENABLE_CLASS);\n    }\n  };\n\n  ResourceBase.prototype.selectResourceByIndex = function (groupIndex) {\n    if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {\n      this.triggerEvents(groupIndex);\n    }\n  };\n\n  ResourceBase.prototype.resourceClick = function (event) {\n    if (!event.node.classList.contains('e-has-child')) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], ENABLE_CLASS);\n      var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n      var groupIndex = treeNodes.indexOf(event.node);\n      this.triggerEvents(groupIndex, event);\n      event.event.preventDefault();\n    }\n  };\n\n  ResourceBase.prototype.triggerEvents = function (groupIndex, event) {\n    var _this = this;\n\n    var args = {\n      cancel: false,\n      event: event ? event.event : null,\n      groupIndex: groupIndex,\n      requestType: 'resourceChange'\n    };\n    this.parent.trigger(actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        _this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n\n        _this.parent.renderModule.render(_this.parent.currentView);\n\n        args = {\n          cancel: false,\n          event: event ? event.event : null,\n          groupIndex: _this.parent.uiStateValues.groupIndex,\n          requestType: 'resourceChanged'\n        };\n\n        _this.parent.trigger(actionComplete, args);\n      }\n    });\n  };\n\n  ResourceBase.prototype.documentClick = function (args) {\n    if (closest(args.event.target, '.' + RESOURCE_TREE_POPUP)) {\n      return;\n    }\n\n    var treeWrapper = this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP);\n\n    if (treeWrapper && treeWrapper.classList.contains(POPUP_OPEN)) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], ENABLE_CLASS);\n    }\n  };\n\n  ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n    var _this = this;\n\n    this.parent.showSpinner();\n    var promises = [];\n\n    for (var _i = 0, _a = this.parent.resources; _i < _a.length; _i++) {\n      var resource = _a[_i];\n      var dataModule = new Data(this.parent, resource.dataSource, resource.query);\n      promises.push(dataModule.getData(dataModule.generateQuery()));\n    }\n\n    Promise.all(promises).then(function (e) {\n      return _this.dataManagerSuccess(e, isSetModel);\n    }).catch(function (e) {\n      return _this.parent.crudModule.dataManagerFailure(e);\n    });\n  };\n\n  ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.resourceCollection = [];\n\n    for (var i = 0, length_1 = e.length; i < length_1; i++) {\n      var resource = this.parent.resources[parseInt(i.toString(), 10)];\n      var resourceObj = this.getResourceModel(resource, e[parseInt(i.toString(), 10)].result);\n      this.parent.resourceCollection.push(resourceObj);\n    }\n\n    this.refreshLayout(isSetModel);\n  };\n\n  ResourceBase.prototype.getResourceModel = function (resource, resourceData) {\n    var resourceObj = {\n      field: resource.field,\n      title: resource.title,\n      name: resource.name,\n      allowMultiple: resource.allowMultiple,\n      dataSource: resourceData || resource.dataSource,\n      idField: resource.idField,\n      textField: resource.textField,\n      groupIDField: resource.groupIDField,\n      colorField: resource.colorField,\n      startHourField: resource.startHourField,\n      endHourField: resource.endHourField,\n      workDaysField: resource.workDaysField,\n      expandedField: resource.expandedField,\n      cssClassField: resource.cssClassField\n    };\n    return resourceObj;\n  };\n\n  ResourceBase.prototype.refreshLayout = function (isSetModel) {\n    if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !this.parent.enablePersistence) {\n      this.parent.uiStateValues.groupIndex = 0;\n    }\n\n    this.parent.renderElements(isSetModel);\n  };\n\n  ResourceBase.prototype.setResourceCollection = function () {\n    var requiredResources = [];\n    this.resourceCollection = [];\n    this.colorIndex = null;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        var index_1 = findIndexInData(this.parent.resourceCollection, 'name', resource);\n\n        if (index_1 >= 0) {\n          requiredResources.push(this.parent.resourceCollection[parseInt(index_1.toString(), 10)]);\n        }\n      }\n    } else if (this.parent.resourceCollection.length > 0) {\n      requiredResources = this.parent.resourceCollection;\n    }\n\n    var index = 0;\n\n    for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n      var resource = requiredResources_1[_b];\n      var resources = this.getResourceModel(resource);\n\n      if (resource.name === this.parent.eventSettings.resourceColorField) {\n        this.colorIndex = index;\n      }\n\n      index++;\n      this.resourceCollection.push(resources);\n    }\n\n    if (isNullOrUndefined(this.colorIndex)) {\n      this.colorIndex = this.resourceCollection.length - 1;\n    }\n  };\n\n  ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n    var _this = this;\n\n    var resources = this.resourceCollection;\n    var resTreeGroup = [];\n    var lastColumnDates = [];\n\n    var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n      var resTree = [];\n      var resource = resources[0];\n\n      if (resource) {\n        var data = void 0;\n\n        if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n          var id_1 = prevResourceData[prevResource.idField];\n          data = resource.dataSource.filter(function (e) {\n            return e[resource.groupIDField] === id_1;\n          });\n        } else {\n          data = resource.dataSource;\n        }\n\n        for (var i = 0; i < data.length; i++) {\n          var groupOrder = [];\n\n          if (prevOrder && prevOrder.length > 0) {\n            groupOrder = groupOrder.concat(prevOrder);\n          }\n\n          groupOrder.push(data[parseInt(i.toString(), 10)][resource.idField]);\n          var items = group(resources.slice(1), index + 1, resource, data[parseInt(i.toString(), 10)], groupOrder); // Here validate child item empty top level resource only\n\n          if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n            continue;\n          }\n\n          var dateCol = [];\n          var renderDates = _this.parent.activeView.renderDates;\n          var resWorkDays = void 0;\n\n          if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n            var workDays = data[parseInt(i.toString(), 10)][resource.workDaysField];\n            var resStartHour = data[parseInt(i.toString(), 10)][resource.startHourField];\n            var resEndHour = data[parseInt(i.toString(), 10)][resource.endHourField];\n\n            if (workDays && workDays.length > 0) {\n              renderDates = _this.parent.activeView.getRenderDates(workDays);\n              resWorkDays = workDays;\n              dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n            } else {\n              resWorkDays = _this.parent.activeViewOptions.workDays;\n              dateCol = innerDates;\n            }\n\n            var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n\n            lastColumnDates = lastColumnDates.concat(dateSlots);\n          }\n\n          var resCssClass = data[parseInt(i.toString(), 10)][resource.cssClassField];\n          var slotData = {\n            type: 'resourceHeader',\n            className: ['e-resource-cells'],\n            resourceLevelIndex: index,\n            groupOrder: groupOrder,\n            resource: resource,\n            resourceData: data[parseInt(i.toString(), 10)],\n            colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n            renderDates: renderDates,\n            workDays: resWorkDays,\n            cssClass: resCssClass,\n            child: items\n          };\n          resTree.push(slotData);\n        }\n\n        if (!resTreeGroup[parseInt(index.toString(), 10)]) {\n          resTreeGroup[parseInt(index.toString(), 10)] = [];\n        }\n\n        if (resTree.length > 0) {\n          resTreeGroup[parseInt(index.toString(), 10)].push(resTree);\n        }\n\n        return resTree;\n      }\n\n      return [];\n    };\n\n    this.resourceTreeLevel = group(resources, 0);\n    return isTimeLine ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n  };\n\n  ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n    var dateSlots = extend([], renderDates, null, true);\n\n    for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n      var dateSlot = dateSlots_1[_i];\n\n      if (startHour) {\n        dateSlot.startHour = this.parent.getStartEndTime(startHour);\n      }\n\n      if (endHour) {\n        dateSlot.endHour = this.parent.getStartEndTime(endHour);\n      }\n\n      if (groupOrder) {\n        dateSlot.groupOrder = groupOrder;\n      }\n    }\n\n    return dateSlots;\n  };\n\n  ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n    var headerLevels = [];\n\n    for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n      var temp = 0;\n\n      for (var _i = 0, _a = resTreeGroup[parseInt(i.toString(), 10)]; _i < _a.length; _i++) {\n        var currentLevelChilds = _a[_i];\n\n        for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n          var currentLevelChild = currentLevelChilds_1[_b];\n\n          if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {\n            var nextLevelChilds = resTreeGroup[parseInt((i + 1).toString(), 10)][parseInt(temp.toString(), 10)];\n\n            if (!nextLevelChilds) {\n              continue;\n            }\n\n            var colSpan = 0;\n\n            for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n              var nextLevelChild = nextLevelChilds_1[_c];\n\n              if (!this.parent.activeViewOptions.group.byGroupID || this.parent.activeViewOptions.group.byGroupID && nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] === currentLevelChild.resourceData[currentLevelChild.resource.idField]) {\n                colSpan += nextLevelChild.colSpan;\n              }\n            }\n\n            currentLevelChild.colSpan = colSpan;\n          }\n\n          currentLevelChild.groupIndex = temp;\n          temp++;\n          headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n          headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n        }\n      }\n    }\n\n    this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n\n    if (!this.parent.activeViewOptions.group.byDate) {\n      var index = 0;\n\n      for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n        var lastLevelResource = _e[_d];\n\n        for (var i = 0; i < lastLevelResource.colSpan; i++) {\n          lastColumnDates[parseInt(index.toString(), 10)].groupIndex = lastLevelResource.groupIndex;\n          index++;\n        }\n      }\n\n      headerLevels.push(lastColumnDates);\n      return headerLevels;\n    }\n\n    var dateHeaderLevels = [];\n    var levels = extend([], headerLevels, null, true);\n    var datesColumn = [];\n\n    if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n      var renderDates_1 = [];\n      var dateIndex = 0;\n\n      var _loop_3 = function (headerDate) {\n        this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)] = [];\n        var currentDateLevels = [];\n\n        var _loop_4 = function (j) {\n          var workDays = this_3.lastResourceLevel[parseInt(j.toString(), 10)].resourceData[this_3.lastResourceLevel[parseInt(j.toString(), 10)].resource.workDaysField];\n\n          if (!workDays) {\n            workDays = this_3.parent.activeViewOptions.workDays;\n          }\n\n          if (workDays.indexOf(headerDate.date.getDay()) !== -1) {\n            var resTd_1 = extend({}, this_3.lastResourceLevel[parseInt(j.toString(), 10)], null, true);\n            resTd_1.date = headerDate.date;\n            this_3.lastResourceLevel[parseInt(j.toString(), 10)].workDays = workDays;\n            resTd_1.startHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.startHourField]) || headerDate.startHour;\n            resTd_1.endHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.endHourField]) || headerDate.endHour;\n            this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)].push(resTd_1);\n\n            var _loop_5 = function (k) {\n              if (!currentDateLevels[parseInt(k.toString(), 10)]) {\n                currentDateLevels[parseInt(k.toString(), 10)] = [];\n              }\n\n              if (k === resTd_1.groupOrder.length - 1) {\n                if (!renderDates_1[parseInt(j.toString(), 10)]) {\n                  renderDates_1[parseInt(j.toString(), 10)] = [];\n                }\n\n                var filterDates = resTd_1.renderDates.filter(function (x) {\n                  return x.getDay() === headerDate.date.getDay();\n                });\n                renderDates_1[parseInt(j.toString(), 10)] = renderDates_1[parseInt(j.toString(), 10)].concat(filterDates);\n                currentDateLevels[parseInt(k.toString(), 10)].push(resTd_1);\n                return \"continue\";\n              }\n\n              var currentLevel = levels[parseInt(k.toString(), 10)];\n              var filteredResource = currentLevel.filter(function (data) {\n                return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n              });\n\n              if (filteredResource && filteredResource.length > 0) {\n                var existedResource = currentDateLevels[parseInt(k.toString(), 10)].filter(function (data) {\n                  return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                });\n\n                if (existedResource && existedResource.length > 0) {\n                  existedResource[0].colSpan += 1;\n                } else {\n                  var filteredTd = extend({}, filteredResource[0], null, true);\n                  filteredTd.colSpan = 1;\n                  currentDateLevels[parseInt(k.toString(), 10)].push(filteredTd);\n                }\n              }\n            };\n\n            for (var k = 0; k < resTd_1.groupOrder.length; k++) {\n              _loop_5(k);\n            }\n          }\n        };\n\n        for (var j = 0; j < this_3.lastResourceLevel.length; j++) {\n          _loop_4(j);\n        }\n\n        if (currentDateLevels.length > 0) {\n          for (var l = 0; l < levels.length; l++) {\n            if (!dateHeaderLevels[parseInt(l.toString(), 10)]) {\n              dateHeaderLevels[parseInt(l.toString(), 10)] = [];\n            }\n\n            dateHeaderLevels[parseInt(l.toString(), 10)] = dateHeaderLevels[parseInt(l.toString(), 10)].concat(currentDateLevels[parseInt(l.toString(), 10)]);\n          }\n\n          headerDate.colSpan = currentDateLevels[currentDateLevels.length - 1].length;\n          datesColumn.push(headerDate);\n        }\n\n        dateIndex++;\n      };\n\n      var this_3 = this;\n\n      for (var _f = 0, headerDates_1 = headerDates; _f < headerDates_1.length; _f++) {\n        var headerDate = headerDates_1[_f];\n\n        _loop_3(headerDate);\n      }\n\n      this.resourceDateTree = this.resourceDateTree.filter(function (data) {\n        return data.length > 0;\n      });\n      this.lastResourceLevel.forEach(function (x, index) {\n        if (renderDates_1[parseInt(index.toString(), 10)]) {\n          x.renderDates = renderDates_1[parseInt(index.toString(), 10)].sort(function (a, b) {\n            return a.getTime() - b.getTime();\n          });\n        }\n      });\n      dateHeaderLevels.unshift(datesColumn);\n      return dateHeaderLevels;\n    }\n\n    var dateColSpan = 0;\n\n    for (var _g = 0, _h = levels[0]; _g < _h.length; _g++) {\n      var firstRowTd = _h[_g];\n      dateColSpan += firstRowTd.colSpan;\n    }\n\n    for (var _j = 0, headerDates_2 = headerDates; _j < headerDates_2.length; _j++) {\n      var headerDate = headerDates_2[_j];\n      headerDate.colSpan = dateColSpan;\n      datesColumn.push(headerDate);\n      var resGroup = extend([], levels, null, true);\n\n      for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n        if (k === resGroup.length - 1) {\n          for (var _k = 0, _l = resGroup[parseInt(k.toString(), 10)]; _k < _l.length; _k++) {\n            var resTd = _l[_k];\n            resTd.date = headerDate.date;\n            resTd.workDays = headerDate.workDays;\n            resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) || headerDate.startHour;\n            resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) || headerDate.endHour;\n          }\n        }\n\n        if (!dateHeaderLevels[parseInt(k.toString(), 10)]) {\n          dateHeaderLevels[parseInt(k.toString(), 10)] = [];\n        }\n\n        dateHeaderLevels[parseInt(k.toString(), 10)] = dateHeaderLevels[parseInt(k.toString(), 10)].concat(resGroup[parseInt(k.toString(), 10)]);\n      }\n    }\n\n    dateHeaderLevels.unshift(datesColumn);\n    return dateHeaderLevels;\n  };\n\n  ResourceBase.prototype.setResourceValues = function (eventObj, groupIndex) {\n    var _this = this;\n\n    var setValues = function (index, field, value) {\n      if (_this.resourceCollection[parseInt(index.toString(), 10)].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {\n        eventObj[\"\" + field] = [value];\n      } else {\n        eventObj[\"\" + field] = value;\n      }\n    };\n\n    if (groupIndex === void 0) {\n      groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : this.parent.activeCellsData.groupIndex;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n      var groupOrder = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n\n      for (var index = 0; index < this.resourceCollection.length; index++) {\n        setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, groupOrder[parseInt(index.toString(), 10)]);\n      }\n    } else if (this.parent.resourceCollection.length > 0) {\n      for (var index = 0; index < this.resourceCollection.length; index++) {\n        var data = this.resourceCollection[parseInt(index.toString(), 10)].dataSource[0];\n\n        if (data) {\n          setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, data[this.resourceCollection[parseInt(index.toString(), 10)].idField]);\n        }\n      }\n    }\n  };\n\n  ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n    var colorFieldIndex = !isNullOrUndefined(groupOrder) && this.colorIndex > groupOrder.length - 1 ? groupOrder.length - 1 : this.colorIndex;\n    var resource = this.resourceCollection[parseInt(colorFieldIndex.toString(), 10)];\n\n    if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n      return undefined;\n    }\n\n    var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[parseInt(colorFieldIndex.toString(), 10)];\n    var data = this.filterData(resource.dataSource, resource.idField, id);\n\n    if (data.length > 0) {\n      return data[0][resource.colorField];\n    }\n\n    return undefined;\n  };\n\n  ResourceBase.prototype.getCssClass = function (eventObj) {\n    var resource = this.resourceCollection.slice(-1)[0];\n\n    if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n      return undefined;\n    }\n\n    var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n\n    if (data.length > 0) {\n      return data[0][resource.cssClassField];\n    }\n\n    return undefined;\n  };\n\n  ResourceBase.prototype.getResourceRenderDates = function () {\n    // eslint-disable-next-line prefer-spread\n    var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function (e) {\n      return e.renderDates;\n    }));\n\n    var removeDuplicateDates = function (dateColl) {\n      return dateColl.filter(function (date, index, dates) {\n        return dates.map(function (dateObj) {\n          return dateObj.getTime();\n        }).indexOf(date.getTime()) === index;\n      });\n    };\n\n    var renderDates = removeDuplicateDates(resourceDates);\n    renderDates.sort(function (a, b) {\n      return a.getTime() - b.getTime();\n    });\n    return renderDates;\n  };\n\n  ResourceBase.prototype.filterData = function (dataSource, field, value) {\n    return dataSource.filter(function (data) {\n      return data[\"\" + field] === value;\n    });\n  };\n\n  ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n    if (this.parent.activeViewOptions.group.allowGroupEdit) {\n      var resourceObj = {};\n\n      for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n        var groupIndex = groupEditIndex_1[_i];\n        var resourceLevel = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n\n        for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n          var fieldName = this.resourceCollection[parseInt(level.toString(), 10)].field;\n\n          if (isNullOrUndefined(resourceObj[\"\" + fieldName])) {\n            resourceObj[\"\" + fieldName] = [];\n          }\n\n          resourceObj[\"\" + fieldName].push(resourceLevel[parseInt(level.toString(), 10)]);\n        }\n      }\n\n      eventObj = extend(eventObj, resourceObj);\n    } else {\n      for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n        if (this.lastResourceLevel[parseInt(index.toString(), 10)]) {\n          eventObj[this.resourceCollection[parseInt(level.toString(), 10)].field] = this.lastResourceLevel[parseInt(index.toString(), 10)].groupOrder[parseInt(level.toString(), 10)];\n        }\n      }\n    }\n  };\n\n  ResourceBase.prototype.addResource = function (resources, name, index) {\n    var resourceCollection = resources instanceof Array ? resources : [resources];\n\n    var _loop_6 = function (resource) {\n      if (resource.name === name) {\n        resourceCollection.forEach(function (addObj, i) {\n          return new DataManager({\n            json: resource.dataSource\n          }).insert(addObj, null, null, index + i);\n        });\n        return \"break\";\n      }\n    };\n\n    for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n      var resource = _a[_i];\n\n      var state_1 = _loop_6(resource);\n\n      if (state_1 === \"break\") break;\n    }\n\n    this.refreshLayout(true);\n  };\n\n  ResourceBase.prototype.removeResource = function (resourceId, name) {\n    var resourceCollection = resourceId instanceof Array ? resourceId : [resourceId];\n\n    var _loop_7 = function (resource) {\n      if (resource.name === name) {\n        resourceCollection.forEach(function (removeObj) {\n          return new DataManager({\n            json: resource.dataSource\n          }).remove(resource.idField, removeObj);\n        });\n        return \"break\";\n      }\n    };\n\n    for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n      var resource = _a[_i];\n\n      var state_2 = _loop_7(resource);\n\n      if (state_2 === \"break\") break;\n    }\n\n    this.refreshLayout(true);\n  };\n\n  ResourceBase.prototype.getIndexFromResourceId = function (id, name, resourceData, event, parentField) {\n    name = name || this.parent.resourceCollection.slice(-1)[0].name;\n\n    if (isNullOrUndefined(resourceData)) {\n      resourceData = this.resourceCollection.filter(function (e) {\n        return e.name === name;\n      })[0];\n\n      if (isNullOrUndefined(resourceData)) {\n        return null;\n      }\n    }\n\n    var resource = resourceData.dataSource.filter(function (e) {\n      if (event && e[resourceData.idField] === id) {\n        if (e[resourceData.groupIDField] === event[\"\" + parentField]) {\n          return e[resourceData.idField] === id;\n        }\n\n        return null;\n      } else {\n        return e[resourceData.idField] === id;\n      }\n    })[0];\n    return this.lastResourceLevel.map(function (e) {\n      return e.resourceData;\n    }).indexOf(resource);\n  };\n\n  ResourceBase.prototype.resourceExpand = function (id, name, hide) {\n    var resource = this.parent.resourceCollection.filter(function (e) {\n      if (e.name === name) {\n        return e;\n      }\n\n      return null;\n    })[0];\n    var index = 0;\n    var resourceData = resource.dataSource.filter(function (e) {\n      return e[resource.idField] === id;\n    })[0];\n\n    if (!this.parent.activeViewOptions.group.byGroupID) {\n      index = this.getIndexFromResourceId(id, name, resource);\n    } else {\n      index = this.lastResourceLevel.map(function (e) {\n        return e.resourceData;\n      }).indexOf(resourceData);\n    }\n\n    var target = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + (\"[data-group-index=\\\"\" + index + \"\\\"]\") + ' ' + '.' + RESOURCE_TREE_ICON_CLASS);\n\n    if (target) {\n      if (target.classList.contains(RESOURCE_EXPAND_CLASS) && !hide) {\n        target.click();\n      } else if (target.classList.contains(RESOURCE_COLLAPSE_CLASS) && hide) {\n        target.click();\n      }\n    }\n  };\n\n  ResourceBase.prototype.resourceScroll = function (id, name) {\n    if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n      return;\n    }\n\n    var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n    var levelIndex = this.parent.resourceCollection.length - 1;\n    var resource = this.parent.resourceCollection.filter(function (e, index) {\n      if (e.name === levelName) {\n        levelIndex = index;\n        return e;\n      }\n\n      return null;\n    })[0];\n    var scrollElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var index = 0;\n\n    if (this.parent.activeView.isTimelineView()) {\n      if (!this.parent.activeViewOptions.group.byGroupID) {\n        index = this.getIndexFromResourceId(id, levelName, resource);\n      } else {\n        var resourceData = resource.dataSource.filter(function (e) {\n          return e[resource.idField] === id;\n        })[0];\n        index = this.lastResourceLevel.map(function (e) {\n          return e.resourceData;\n        }).indexOf(resourceData);\n      }\n\n      if (this.parent.virtualScrollModule) {\n        var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n        var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n\n        if (this.parent.rowAutoHeight) {\n          scrollElement.scrollTop = 0;\n          this.parent.virtualScrollModule.virtualScrolling();\n        }\n\n        scrollElement.scrollTop = index * averageRowHeight - (this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight;\n        this.parent.virtualScrollModule.virtualScrolling();\n\n        if (this.parent.rowAutoHeight) {\n          var td = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n\n          if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {\n            scrollElement.scrollTop = scrollElement.scrollTop < td.offsetTop ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n          }\n        } else {\n          scrollElement.scrollTop = index * averageRowHeight;\n        }\n      } else {\n        var td = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n\n        if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {\n          scrollElement.scrollTop = td.offsetTop;\n        }\n      }\n    } else {\n      if (!this.parent.activeViewOptions.group.byGroupID) {\n        index = this.getIndexFromResourceId(id, levelName, resource);\n      } else {\n        if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n          index = this.lastResourceLevel.map(function (e) {\n            return e.resourceData[resource.idField];\n          }).indexOf(id);\n        } else {\n          index = resource.dataSource.map(function (e) {\n            return e[resource.idField];\n          }).indexOf(id);\n        }\n      }\n\n      var offsetTarget = this.parent.element.querySelector(\".\" + HEADER_ROW_CLASS + \":nth-child(\" + (levelIndex + 1) + \")\");\n      var offset = [].slice.call(offsetTarget.children).map(function (node) {\n        return node.offsetLeft;\n      });\n      scrollElement.scrollLeft = offset[parseInt(index.toString(), 10)];\n    }\n  };\n\n  ResourceBase.prototype.destroy = function () {\n    this.parent.off(documentClick, this.documentClick);\n\n    if (this.treeViewObj) {\n      if (this.treeViewObj.portals && this.treeViewObj.portals.length > 0) {\n        var treeViewTemplates = this.treeViewObj.portals.map(function (x) {\n          return x.propName;\n        });\n\n        if (treeViewTemplates.length > 0) {\n          this.parent.resetTemplates(treeViewTemplates);\n        }\n      }\n\n      this.treeViewObj.destroy();\n      this.treeViewObj = null;\n    }\n\n    if (this.treePopup) {\n      this.treePopup.destroy();\n      this.treePopup = null;\n      remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP));\n      remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP_OVERLAY));\n    }\n\n    var resToolBarEle = this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER);\n\n    if (resToolBarEle) {\n      remove(resToolBarEle);\n    }\n  };\n\n  return ResourceBase;\n}();\n\nvar __extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\n\n\nvar Schedule =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends(Schedule, _super);\n  /**\n   * Constructor for creating the Schedule widget\n   *\n   * @param {ScheduleModel} options Accepts the schedule model properties to initiate the rendering\n   * @param {string | HTMLElement} element Accepts the DOM element reference\n   */\n\n\n  function Schedule(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * Core method that initializes the control rendering.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.render = function () {\n    var addClasses = [];\n    var removeClasses = [];\n    addClasses.push(ROOT);\n\n    if (this.enableRtl) {\n      addClasses.push(RTL);\n    } else {\n      removeClasses.push(RTL);\n    }\n\n    if (this.isAdaptive) {\n      addClasses.push(DEVICE_CLASS);\n    } else {\n      removeClasses.push(DEVICE_CLASS);\n    }\n\n    if (this.allowMultiDrag) {\n      addClasses.push(MULTI_DRAG);\n    } else {\n      removeClasses.push(MULTI_DRAG);\n    }\n\n    if (this.cssClass) {\n      var cssClass = this.cssClass.split(' ');\n\n      for (var _i = 0, cssClass_1 = cssClass; _i < cssClass_1.length; _i++) {\n        var cls_1 = cssClass_1[_i];\n        addClasses.push(cls_1);\n      }\n    }\n\n    classList(this.element, addClasses, removeClasses);\n    this.validateDate();\n    createSpinner({\n      target: this.element\n    });\n    this.scrollModule = new Scroll(this);\n    this.scrollModule.setWidth();\n    this.scrollModule.setHeight();\n    this.renderModule = new Render(this);\n    this.eventBase = new EventBase(this);\n    this.workCellAction = new WorkCellInteraction(this);\n\n    if (this.allowKeyboardInteraction) {\n      this.keyboardInteractionModule = new KeyboardInteraction(this);\n    }\n\n    this.inlineModule = new InlineEdit(this);\n    this.initializeDataModule();\n    this.renderTableContainer();\n    this.activeViewOptions = this.getActiveViewOptions();\n    this.initializeResources();\n    this.wireEvents();\n  };\n\n  Schedule.prototype.renderTableContainer = function () {\n    if (!this.element.querySelector('.' + TABLE_CONTAINER_CLASS)) {\n      this.element.appendChild(this.createElement('div', {\n        className: TABLE_CONTAINER_CLASS\n      }));\n    }\n  };\n  /**\n   * Method to render react templates\n   *\n   * @param {Function} callback - Specifies the callBack method\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.renderTemplates = function (callback) {\n    if (this.isReact) {\n      this.renderReactTemplates(callback);\n    } else if (callback) {\n      callback();\n    }\n  };\n  /**\n   * Method to reset react templates\n   *\n   * @param {string[]} templates Accepts the template ID\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.resetTemplates = function (templates) {\n    if (this.isAngular || this.isReact) {\n      this.clearTemplate(templates);\n    }\n  };\n  /**\n   * This method renders untrusted strings and scripts securely by sanitizing them first.\n   *\n   * @param {string} value - A string value representing the HTML string value to be sanitized.\n   * @param {HTMLElement} element - An HTML element to which the sanitized or unsanitized HTML string will be assigned.\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.sanitize = function (value, element) {\n    if (this.enableHtmlSanitizer) {\n      element.innerText = SanitizeHtmlHelper.sanitize(value);\n    } else {\n      element.innerHTML = value;\n    }\n  };\n\n  Schedule.prototype.initializeResources = function (isSetModel) {\n    if (isSetModel === void 0) {\n      isSetModel = false;\n    }\n\n    if (this.resources.length > 0) {\n      this.resourceBase = new ResourceBase(this);\n      this.resourceBase.bindResourcesData(isSetModel);\n    } else {\n      this.resourceBase = null;\n      this.resourceCollection = [];\n      this.renderElements(isSetModel);\n    }\n  };\n  /**\n   * Method to render the layout elements\n   *\n   * @param {boolean} isLayoutOnly Accepts the boolean value to render layout or not\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.renderElements = function (isLayoutOnly) {\n    if (isLayoutOnly) {\n      this.initializeView(this.currentView);\n      this.eventWindow.refresh();\n      return;\n    }\n\n    this.destroyHeaderModule();\n\n    if (this.showHeaderBar) {\n      this.headerModule = new HeaderRenderer(this);\n    }\n\n    this.renderTableContainer();\n\n    if (Browser.isDevice || Browser.isTouch) {\n      this.scheduleTouchModule = new ScheduleTouch(this);\n    }\n\n    this.initializeView(this.currentView);\n    this.destroyPopups();\n\n    if (!this.isPrinting) {\n      this.initializePopups();\n    }\n  };\n\n  Schedule.prototype.validateDate = function (selectedDate) {\n    if (selectedDate === void 0) {\n      selectedDate = this.selectedDate;\n    } // persist the selected date value\n\n\n    var date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);\n    var minDate = this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);\n    var maxDate = this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);\n\n    if (minDate <= maxDate) {\n      if (date < minDate) {\n        date = minDate;\n      }\n\n      if (date > maxDate) {\n        date = maxDate;\n      }\n\n      this.setProperties({\n        selectedDate: new Date('' + date),\n        minDate: new Date('' + minDate),\n        maxDate: new Date('' + maxDate)\n      }, true);\n\n      if (this.eventWindow) {\n        this.eventWindow.updateMinMaxDateToEditor();\n      }\n    } else {\n      throw Error('minDate should be equal or less than maxDate');\n    }\n  };\n\n  Schedule.prototype.getViewIndex = function (viewName) {\n    for (var item = 0; item < this.viewCollections.length; item++) {\n      var checkIndex = this.viewCollections[parseInt(item.toString(), 10)].option;\n\n      if (checkIndex === viewName) {\n        return item;\n      }\n    }\n\n    return -1;\n  };\n\n  Schedule.prototype.setViewOptions = function (isModuleLoad) {\n    if (isModuleLoad === void 0) {\n      isModuleLoad = false;\n    }\n\n    this.viewOptions = {};\n    this.viewCollections = [];\n    var viewName;\n    var selectedView;\n    var prevIndex = this.viewIndex;\n    var count = 0;\n    this.viewIndex = -1;\n\n    for (var _i = 0, _a = this.views; _i < _a.length; _i++) {\n      var view = _a[_i];\n      var isOptions = typeof view === 'string' ? false : true;\n\n      if (typeof view === 'string') {\n        viewName = view;\n\n        if (this.currentView === viewName) {\n          selectedView = viewName;\n          this.viewIndex = count;\n        }\n      } else {\n        viewName = view.option;\n\n        if (view.isSelected) {\n          selectedView = viewName;\n          this.viewIndex = count;\n        }\n      }\n\n      var obj = extend({\n        option: viewName\n      }, isOptions ? view : {});\n      var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n      obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : '';\n      obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : '';\n      obj.dateRangeTemplateName = obj.dateRangeTemplate ? obj.option : '';\n      obj.cellTemplateName = obj.cellTemplate ? obj.option : '';\n      obj.dayHeaderTemplateName = obj.dayHeaderTemplate ? obj.option : '';\n      obj.monthHeaderTemplateName = obj.monthHeaderTemplate ? obj.option : '';\n      obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : '';\n      obj.headerIndentTemplateName = obj.headerIndentTemplate ? obj.option : '';\n      obj.eventTemplateName = obj.eventTemplate ? obj.option : '';\n\n      if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {\n        delete obj.firstDayOfWeek;\n      }\n\n      if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {\n        delete obj.interval;\n      }\n\n      this.viewCollections.push(obj);\n\n      if (isNullOrUndefined(this.viewOptions[\"\" + fieldViewName])) {\n        this.viewOptions[\"\" + fieldViewName] = [obj];\n      } else {\n        this.viewOptions[\"\" + fieldViewName].push(obj);\n      }\n\n      count++;\n    }\n\n    if (!isModuleLoad && selectedView) {\n      this.setProperties({\n        currentView: selectedView\n      }, true);\n    }\n\n    if (this.viewIndex === -1) {\n      var currentIndex = this.getViewIndex(this.currentView);\n      this.viewIndex = typeof this.views[0] !== 'string' && !isNullOrUndefined(prevIndex) && prevIndex !== -1 ? prevIndex : currentIndex === -1 ? 0 : currentIndex;\n    }\n  };\n\n  Schedule.prototype.getActiveViewOptions = function () {\n    var timeScale = {\n      enable: this.timeScale.enable,\n      interval: this.timeScale.interval,\n      slotCount: this.timeScale.slotCount,\n      majorSlotTemplate: this.timeScale.majorSlotTemplate,\n      minorSlotTemplate: this.timeScale.minorSlotTemplate\n    };\n    var isYearView = this.viewCollections[this.viewIndex].option.indexOf('Year') > -1;\n    var group = {\n      byDate: isYearView ? false : this.group.byDate,\n      byGroupID: this.group.byGroupID,\n      allowGroupEdit: this.group.allowGroupEdit,\n      resources: this.group.resources,\n      headerTooltipTemplate: this.group.headerTooltipTemplate,\n      enableCompactView: this.group.enableCompactView,\n      hideNonWorkingDays: ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.currentView) > -1 ? this.group.hideNonWorkingDays : false\n    };\n    var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n    var scheduleOptions = {\n      dateFormat: this.dateFormat,\n      endHour: this.endHour,\n      isSelected: false,\n      option: null,\n      readonly: this.readonly,\n      startHour: this.startHour,\n      allowVirtualScrolling: false,\n      cellHeaderTemplate: this.cellHeaderTemplate,\n      dayHeaderTemplate: this.dayHeaderTemplate,\n      monthHeaderTemplate: this.monthHeaderTemplate,\n      cellTemplate: this.cellTemplate,\n      eventTemplate: this.eventSettings.template,\n      dateHeaderTemplate: this.dateHeaderTemplate,\n      dateRangeTemplate: this.dateRangeTemplate,\n      resourceHeaderTemplate: this.resourceHeaderTemplate,\n      headerIndentTemplate: this.headerIndentTemplate,\n      firstMonthOfYear: this.firstMonthOfYear,\n      firstDayOfWeek: this.firstDayOfWeek,\n      workDays: workDays,\n      monthsCount: this.monthsCount,\n      showWeekend: this.showWeekend,\n      showWeekNumber: this.showWeekNumber,\n      displayName: null,\n      interval: 1,\n      timeScale: timeScale,\n      timeFormat: this.internalTimeFormat,\n      group: group,\n      headerRows: this.headerRows,\n      orientation: 'Horizontal',\n      numberOfWeeks: 0,\n      displayDate: null\n    };\n    var viewOptions = this.viewCollections[this.viewIndex];\n    var viewsData = extend(scheduleOptions, viewOptions, undefined, true);\n\n    if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {\n      viewsData.firstDayOfWeek = this.firstDayOfWeek;\n    }\n\n    if (viewsData.displayDate) {\n      viewsData.displayDate = viewsData.displayDate instanceof Date ? new Date(viewsData.displayDate.getTime()) : new Date(viewsData.displayDate);\n    }\n\n    return viewsData;\n  };\n\n  Schedule.prototype.initializeDataModule = function () {\n    this.eventFields = {\n      id: this.eventSettings.fields.id,\n      isBlock: this.eventSettings.fields.isBlock,\n      subject: this.eventSettings.fields.subject.name,\n      startTime: this.eventSettings.fields.startTime.name,\n      endTime: this.eventSettings.fields.endTime.name,\n      startTimezone: this.eventSettings.fields.startTimezone.name,\n      endTimezone: this.eventSettings.fields.endTimezone.name,\n      location: this.eventSettings.fields.location.name,\n      description: this.eventSettings.fields.description.name,\n      isAllDay: this.eventSettings.fields.isAllDay.name,\n      recurrenceID: this.eventSettings.fields.recurrenceID.name,\n      recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n      recurrenceException: this.eventSettings.fields.recurrenceException.name,\n      isReadonly: this.eventSettings.fields.isReadonly,\n      followingID: this.eventSettings.fields.followingID\n    };\n    this.setEditorTitles();\n    this.dataModule = new Data(this, this.eventSettings.dataSource, this.eventSettings.query);\n    this.crudModule = new Crud(this);\n  };\n\n  Schedule.prototype.setEditorTitles = function () {\n    this.editorTitles = {\n      subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n      startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n      endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n      isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n      startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n      endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n      location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n      description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n      recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n    };\n  };\n\n  Schedule.prototype.initializeView = function (viewName) {\n    this.showSpinner();\n    this.activeViewOptions = this.getActiveViewOptions();\n\n    if (this.resourceBase) {\n      this.resourceBase.setResourceCollection();\n    }\n\n    this.initializeTemplates();\n    this.renderModule.render(viewName);\n  };\n\n  Schedule.prototype.initializeTemplates = function () {\n    this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n    this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n    this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n    this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n    this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n    this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n    this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n    this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n    this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n    this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n    this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n    this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n    this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n    this.editorTemplateFn = this.templateParser(this.editorTemplate);\n    this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n    this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n    this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n  };\n\n  Schedule.prototype.initializePopups = function () {\n    this.eventWindow = new EventWindow(this);\n    this.quickPopup = new QuickPopups(this);\n  };\n  /**\n   * Method to get day names\n   *\n   * @param {string} type Accepts the day name\n   * @returns {string[]} Returns the collection of day names\n   * @private\n   */\n\n\n  Schedule.prototype.getDayNames = function (type) {\n    var culShortNames = [];\n    var cldrObj;\n    var nameSpace = '';\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      nameSpace = 'days.stand-alone.';\n      cldrObj = getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode()));\n    } else {\n      nameSpace = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type;\n      cldrObj = getValue(nameSpace, cldrData);\n    }\n\n    for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n      var obj = _a[_i];\n      culShortNames.push(getValue(obj, cldrObj));\n    }\n\n    return culShortNames;\n  };\n\n  Schedule.prototype.setCldrTimeFormat = function () {\n    if (!isNullOrUndefined(this.timeFormat)) {\n      this.internalTimeFormat = this.timeFormat;\n      return;\n    }\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      this.internalTimeFormat = getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode()));\n    } else {\n      this.internalTimeFormat = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData);\n    }\n  };\n  /**\n   * Method to get calendar mode\n   *\n   * @returns {string} Returns the calendar mode\n   * @private\n   */\n\n\n  Schedule.prototype.getCalendarMode = function () {\n    return this.calendarMode.toLowerCase();\n  };\n  /**\n   * Method to get time in string\n   *\n   * @param {Date} date Accepts the date object\n   * @returns {string} Returns the time in string\n   * @private\n   */\n\n\n  Schedule.prototype.getTimeString = function (date) {\n    var time = this.globalize.formatDate(date, {\n      format: this.activeViewOptions.timeFormat,\n      type: 'time',\n      calendar: this.getCalendarMode()\n    });\n    return time.toLocaleUpperCase();\n  };\n  /**\n   * Method to get  date object\n   *\n   * @param {Date} date Accepts the date object\n   * @returns {Date} Returns the date object\n   * @private\n   */\n\n\n  Schedule.prototype.getDateTime = function (date) {\n    return date instanceof Date ? new Date(date.getTime()) : new Date(date);\n  };\n\n  Schedule.prototype.setCalendarMode = function () {\n    if (this.calendarMode === 'Islamic') {\n      this.calendarUtil = new Islamic();\n    } else {\n      this.calendarUtil = new Gregorian();\n    }\n  };\n  /**\n   * Method to change the current view\n   *\n   * @param {View} view Accepts the view name\n   * @param {Event} event Accepts the event object\n   * @param {boolean} muteOnChange Accepts the value to enable or disable mute on change\n   * @param {number} index Accepts the index value\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.changeView = function (view, event, muteOnChange, index) {\n    var _this = this;\n\n    if (isNullOrUndefined(index)) {\n      index = this.getViewIndex(view);\n    }\n\n    if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {\n      return;\n    }\n\n    var previousView = this.activeViewOptions ? this.activeViewOptions.option : this.currentView;\n    var args = {\n      requestType: 'viewNavigate',\n      cancel: false,\n      event: event\n    };\n    this.trigger(actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        var navArgs = {\n          action: 'view',\n          cancel: false,\n          currentDate: _this.selectedDate,\n          previousView: previousView,\n          currentView: view,\n          viewIndex: index\n        };\n\n        _this.trigger(navigating, navArgs, function (navigationArgs) {\n          if (!navigationArgs.cancel) {\n            var isVertical = ['Day', 'Week', 'WorkWeek'].indexOf(view) > -1 && ['Day', 'Week', 'WorkWeek'].indexOf(previousView) < 0;\n            _this.uiStateValues.isInitial = isVertical || view.indexOf('Timeline') > -1 || view.indexOf('Year') > -1;\n            _this.uiStateValues.top = view.indexOf('Timeline') > -1 && previousView.indexOf('Timeline') < 0 ? 0 : _this.uiStateValues.top;\n            _this.viewIndex = navigationArgs.viewIndex;\n\n            _this.setProperties({\n              currentView: view\n            }, true);\n\n            if (_this.headerModule) {\n              _this.headerModule.updateActiveView();\n\n              _this.headerModule.setCalendarDate(_this.selectedDate);\n\n              _this.headerModule.setCalendarView();\n            }\n\n            _this.initializeView(_this.currentView);\n\n            _this.animateLayout();\n\n            args = {\n              requestType: 'viewNavigate',\n              cancel: false,\n              event: event\n            };\n\n            _this.trigger(actionComplete, args);\n          } else {\n            _this.currentView = previousView;\n          }\n        });\n      } else {\n        _this.currentView = previousView;\n      }\n    });\n  };\n  /**\n   * Method to change the view date\n   *\n   * @param {Date} selectedDate Accepts the selected date\n   * @param {Event} event Accepts the event object\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.changeDate = function (selectedDate, event) {\n    var _this = this;\n\n    var args = {\n      requestType: 'dateNavigate',\n      cancel: false,\n      event: event\n    };\n    this.trigger(actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        var navArgs = {\n          action: 'date',\n          cancel: false,\n          previousDate: _this.selectedDate,\n          currentDate: selectedDate\n        };\n\n        _this.trigger(navigating, navArgs, function (navigationArgs) {\n          if (!navigationArgs.cancel) {\n            _this.uiStateValues.isInitial = _this.activeView.isTimelineView() && _this.currentView !== 'TimelineYear';\n\n            _this.validateDate(navigationArgs.currentDate);\n\n            if (_this.headerModule) {\n              _this.headerModule.setCalendarDate(navigationArgs.currentDate);\n            }\n\n            if (_this.currentView === 'MonthAgenda' && _this.monthAgendaModule) {\n              _this.monthAgendaModule.monthAgendaDate = new Date('' + _this.selectedDate);\n            }\n\n            _this.initializeView(_this.currentView);\n\n            _this.animateLayout();\n\n            args = {\n              requestType: 'dateNavigate',\n              cancel: false,\n              event: event\n            };\n\n            _this.trigger(actionComplete, args);\n          }\n        });\n      }\n    });\n  };\n  /**\n   * Method to validate min and max date\n   *\n   * @param {Date} date Accepts the date object\n   * @returns {boolean} Returns the boolean result to validate the min and max date\n   * @private\n   */\n\n\n  Schedule.prototype.isMinMaxDate = function (date) {\n    if (date === void 0) {\n      date = this.selectedDate;\n    }\n\n    return date.getTime() >= this.minDate.getTime() && date.getTime() <= this.maxDate.getTime();\n  };\n  /**\n   * Method to validate the selected date\n   *\n   * @param {Date} date Accepts the date object\n   * @returns {boolean} Returns the boolean value for given date is selected date or not\n   * @private\n   */\n\n\n  Schedule.prototype.isSelectedDate = function (date) {\n    return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n  };\n  /**\n   * Method to get the current time\n   *\n   * @param {Date} date Accepts the date object\n   * @returns {Date} Returns the date object after performing the timezone conversion\n   * @private\n   */\n\n\n  Schedule.prototype.getCurrentTime = function (date) {\n    if (date === void 0) {\n      date = new Date();\n    }\n\n    if (this.timezone) {\n      return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);\n    }\n\n    return date;\n  };\n  /** Method to get navigate view\n   *\n   * @returns {View} Return the navigate view name\n   * @private\n   */\n\n\n  Schedule.prototype.getNavigateView = function () {\n    if (this.activeView.isTimelineView()) {\n      return this.currentView === 'TimelineMonth' || this.currentView === 'TimelineYear' ? 'TimelineDay' : 'Agenda';\n    }\n\n    return 'Day';\n  };\n\n  Schedule.prototype.animateLayout = function () {\n    if (!this.activeView.element) {\n      return;\n    }\n\n    new Animation({\n      duration: 600,\n      name: 'FadeIn',\n      timingFunction: 'easeIn'\n    }).animate(this.activeView.element);\n  };\n  /**\n   * To provide the array of modules needed for control rendering\n   *\n   * @returns {ModuleDeclaration[]} Returns the declared modules\n   * @private\n   */\n\n\n  Schedule.prototype.requiredModules = function () {\n    var modules = [];\n    this.setViewOptions(true);\n\n    for (var _i = 0, _a = Object.keys(this.viewOptions); _i < _a.length; _i++) {\n      var view = _a[_i];\n      view = view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek' ? 'timelineViews' : view;\n      modules.push({\n        member: view,\n        args: [this]\n      });\n    }\n\n    if (this.allowDragAndDrop) {\n      modules.push({\n        member: 'dragAndDrop',\n        args: [this]\n      });\n    }\n\n    if (this.allowResizing) {\n      modules.push({\n        member: 'resize',\n        args: [this]\n      });\n    }\n\n    modules.push({\n      member: 'excelExport',\n      args: [this]\n    });\n    modules.push({\n      member: 'iCalendarExport',\n      args: [this]\n    });\n    modules.push({\n      member: 'iCalendarImport',\n      args: [this]\n    });\n    modules.push({\n      member: 'print',\n      args: [this]\n    });\n    return modules;\n  };\n  /**\n   * Initializes the values of private members.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.preRender = function () {\n    this.isAdaptive = Browser.isDevice || isIPadDevice();\n    this.globalize = new Internationalization(this.locale);\n    this.tzModule = new Timezone();\n\n    if (this && isNullOrUndefined(this.uiStateValues) || !this.enablePersistence) {\n      this.uiStateValues = {\n        expand: false,\n        isInitial: true,\n        left: 0,\n        top: 0,\n        isGroupAdaptive: false,\n        isIgnoreOccurrence: false,\n        groupIndex: 0,\n        action: false,\n        isBlock: false,\n        isCustomMonth: true,\n        isPreventTimezone: false\n      };\n    }\n\n    this.currentTimezoneDate = this.getCurrentTime();\n    this.activeCellsData = {\n      startTime: new Date(this.currentTimezoneDate),\n      endTime: new Date(this.currentTimezoneDate),\n      isAllDay: false\n    };\n    this.activeEventData = {\n      event: undefined,\n      element: undefined\n    };\n    this.getDefaultLocale();\n    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    this.setCldrTimeFormat();\n    this.setCalendarMode();\n    this.eventsData = [];\n    this.eventsProcessed = [];\n    this.blockData = [];\n    this.blockProcessed = [];\n    this.resourceCollection = [];\n    this.currentAction = null;\n    this.selectedElements = [];\n    this.setViewOptions();\n  };\n\n  Schedule.prototype.getDefaultLocale = function () {\n    this.defaultLocale = {\n      day: 'Day',\n      week: 'Week',\n      workWeek: 'Work Week',\n      month: 'Month',\n      year: 'Year',\n      agenda: 'Agenda',\n      weekAgenda: 'Week Agenda',\n      workWeekAgenda: 'Work Week Agenda',\n      monthAgenda: 'Month Agenda',\n      today: 'Today',\n      noEvents: 'No events',\n      emptyContainer: 'There are no events scheduled on this day.',\n      allDay: 'All day',\n      start: 'Start',\n      end: 'End',\n      more: 'more',\n      close: 'Close',\n      cancel: 'Cancel',\n      noTitle: '(No Title)',\n      delete: 'Delete',\n      deleteEvent: 'Delete Event',\n      deleteMultipleEvent: 'Delete Multiple Events',\n      selectedItems: 'Items selected',\n      deleteSeries: 'Entire Series',\n      edit: 'Edit',\n      editSeries: 'Entire Series',\n      editEvent: 'Edit Event',\n      createEvent: 'Create',\n      subject: 'Subject',\n      addTitle: 'Add title',\n      moreDetails: 'More Details',\n      save: 'Save',\n      editContent: 'How would you like to change the appointment in the series?',\n      deleteContent: 'Are you sure you want to delete this event?',\n      deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n      newEvent: 'New Event',\n      title: 'Title',\n      location: 'Location',\n      description: 'Description',\n      timezone: 'Timezone',\n      startTimezone: 'Start Timezone',\n      endTimezone: 'End Timezone',\n      repeat: 'Repeat',\n      saveButton: 'Save',\n      cancelButton: 'Cancel',\n      deleteButton: 'Delete',\n      recurrence: 'Recurrence',\n      wrongPattern: 'The recurrence pattern is not valid.',\n      seriesChangeAlert: 'Do you want to cancel the changes made to specific ' + 'instances of this series and match it to the whole series again?',\n      createError: 'The duration of the event must be shorter than how frequently it occurs. ' + 'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n      sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n      occurenceAlert: 'Cannot reschedule an occurrence of the recurring appointment if it skips over ' + 'a later occurrence of the same appointment.',\n      editRecurrence: 'Edit Recurrence',\n      repeats: 'Repeats',\n      alert: 'Alert',\n      startEndError: 'The selected end date occurs before the start date.',\n      invalidDateError: 'The entered date value is invalid.',\n      blockAlert: 'Events cannot be scheduled within the blocked time range.',\n      ok: 'Ok',\n      yes: 'Yes',\n      no: 'No',\n      occurrence: 'Occurrence',\n      series: 'Series',\n      previous: 'Previous',\n      next: 'Next',\n      timelineDay: 'Timeline Day',\n      timelineWeek: 'Timeline Week',\n      timelineWorkWeek: 'Timeline Work Week',\n      timelineMonth: 'Timeline Month',\n      timelineYear: 'Timeline Year',\n      editFollowingEvent: 'Following Events',\n      deleteTitle: 'Delete Event',\n      editTitle: 'Edit Event',\n      beginFrom: 'Begin From',\n      endAt: 'Ends At',\n      expandAllDaySection: 'Expand-all-day-section',\n      collapseAllDaySection: 'Collapse-all-day-section',\n      searchTimezone: 'Search Timezone',\n      noRecords: 'No records found'\n    };\n  };\n\n  Schedule.prototype.wireEvents = function () {\n    EventHandler.add(window, 'resize', this.onScheduleResize, this);\n    EventHandler.add(window, 'orientationchange', this.onScheduleResize, this);\n    EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n  };\n  /**\n   * Method to remove selected class\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.removeSelectedClass = function () {\n    var selectedCells = this.getSelectedCells();\n\n    for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n      var cell = selectedCells_1[_i];\n\n      if (this.currentView !== 'Year') {\n        cell.setAttribute('aria-selected', 'false');\n      }\n\n      cell.removeAttribute('tabindex');\n    }\n\n    removeClass(selectedCells, SELECTED_CELL_CLASS);\n\n    if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {\n      this.keyboardInteractionModule.selectedCells = [];\n    }\n  };\n  /**\n   * Method to add selected class\n   *\n   * @param {HTMLTableCellElement[]} cells Accepts the collection of elements\n   * @param {HTMLTableCellElement} focusCell Accepts the focus element\n   * @param {boolean} isPreventScroll Accepts the boolean value to prevent scroll\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.addSelectedClass = function (cells, focusCell, isPreventScroll) {\n    if (this.currentView !== 'Year') {\n      for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n        var cell = cells_1[_i];\n        cell.setAttribute('aria-selected', 'true');\n      }\n    }\n\n    addClass(cells, SELECTED_CELL_CLASS);\n\n    if (focusCell) {\n      focusCell.setAttribute('tabindex', '0');\n      focusCell.focus({\n        preventScroll: isPreventScroll || false\n      });\n    }\n  };\n  /**\n   * Method to select cell\n   *\n   * @param {HTMLElement | HTMLTableCellElement} element Accepts the select element\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.selectCell = function (element) {\n    this.removeSelectedClass();\n    this.addSelectedClass([element], element);\n  };\n  /**\n   * Method to get all day row element\n   *\n   * @returns {Element} Returns the all day row element\n   * @private\n   */\n\n\n  Schedule.prototype.getAllDayRow = function () {\n    return this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n  };\n  /**\n   * Method to get content table element\n   *\n   * @returns {HTMLElement} Returns the content table element\n   * @private\n   */\n\n\n  Schedule.prototype.getContentTable = function () {\n    return this.activeView.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n  };\n  /**\n   * Method to get all content table rows\n   *\n   * @returns {HTMLElement[]} Returns the content table rows\n   * @private\n   */\n\n\n  Schedule.prototype.getTableRows = function () {\n    return [].slice.call(this.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr:not(.' + HIDDEN_CLASS + ')'));\n  };\n  /**\n   * Method to get work cell elements\n   *\n   * @returns {Element[]} Returns the all work cell elements\n   * @private\n   */\n\n\n  Schedule.prototype.getWorkCellElements = function () {\n    return [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n  };\n  /**\n   * Method to get the index from date collection\n   *\n   * @param {Date[]} collection Accepts the collections of date\n   * @param {Date} date Accepts the date object\n   * @returns {number} Returns the index compared date with date collections\n   * @private\n   */\n\n\n  Schedule.prototype.getIndexOfDate = function (collection, date) {\n    return collection.map(Number).indexOf(+date);\n  };\n  /**\n   * Method to find all day cell\n   *\n   * @param {Element} td Accepts the DOM Element\n   * @returns {boolean} Returns the boolean value\n   * @private\n   */\n\n\n  Schedule.prototype.isAllDayCell = function (td) {\n    if (['Month', 'TimelineMonth', 'TimelineYear', 'MonthAgenda'].indexOf(this.currentView) > -1 || td.classList.contains(ALLDAY_CELLS_CLASS) || td.classList.contains(HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n      return true;\n    }\n\n    if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 && this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * Method to get date from element\n   *\n   * @param {Element} td Accepts the DOM element\n   * @returns {Date} Returns the date object\n   * @private\n   */\n\n\n  Schedule.prototype.getDateFromElement = function (td) {\n    var dateString;\n\n    if (!isNullOrUndefined(td)) {\n      dateString = td.getAttribute('data-date');\n    }\n\n    if (!isNullOrUndefined(dateString)) {\n      var dateInMS = parseInt(dateString, 10);\n      var date = new Date(dateInMS);\n      return date;\n    }\n\n    return undefined;\n  };\n  /**\n   * Method to get target element from given selector\n   *\n   * @param {string} selector Accepts the element selector\n   * @param {number} left Accepts the pageX value\n   * @param {number} top Accepts the pageY value\n   * @returns {Element[]} Returns the collection of elements based on the given selector\n   * @private\n   */\n\n\n  Schedule.prototype.getTargetElement = function (selector, left, top) {\n    var element = document.elementFromPoint(left, top);\n    var targetElement;\n\n    if (element) {\n      targetElement = element.closest(selector);\n    }\n\n    return targetElement ? [targetElement] : null;\n  };\n  /**\n   * Method to process cell header template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getCellHeaderTemplate = function () {\n    return this.cellHeaderTemplateFn;\n  };\n  /**\n   * Method to process cell header template in year view.\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getDayHeaderTemplate = function () {\n    return this.dayHeaderTemplateFn;\n  };\n  /**\n   * Method to process cell header template in year view.\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getMonthHeaderTemplate = function () {\n    return this.monthHeaderTemplateFn;\n  };\n  /**\n   * Method to process cell template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getCellTemplate = function () {\n    return this.cellTemplateFn;\n  };\n  /**\n   * Method to process date header template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getDateHeaderTemplate = function () {\n    return this.dateHeaderTemplateFn;\n  };\n  /**\n   * Method to process date range template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getDateRangeTemplate = function () {\n    return this.dateRangeTemplateFn;\n  };\n  /**\n   * Method to process major slot template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getMajorSlotTemplate = function () {\n    return this.majorSlotTemplateFn;\n  };\n  /**\n   * Method to process minor slot template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getMinorSlotTemplate = function () {\n    return this.minorSlotTemplateFn;\n  };\n  /**\n   * Method to process appointment template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getAppointmentTemplate = function () {\n    return this.appointmentTemplateFn;\n  };\n  /**\n   * Method to process appointment tooltip template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getEventTooltipTemplate = function () {\n    return this.eventTooltipTemplateFn;\n  };\n  /**\n   * Method to process header tooltip template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getHeaderTooltipTemplate = function () {\n    return this.headerTooltipTemplateFn;\n  };\n  /**\n   * Method to process editor template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getEditorTemplate = function () {\n    return this.editorTemplateFn;\n  };\n  /**\n   * Method to process quick info header template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getQuickInfoTemplatesHeader = function () {\n    return this.quickInfoTemplatesHeaderFn;\n  };\n  /**\n   * Method to process quick info content template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getQuickInfoTemplatesContent = function () {\n    return this.quickInfoTemplatesContentFn;\n  };\n  /**\n   * Method to process quick info footer template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getQuickInfoTemplatesFooter = function () {\n    return this.quickInfoTemplatesFooterFn;\n  };\n  /**\n   * Method to process resource header template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getResourceHeaderTemplate = function () {\n    return this.resourceHeaderTemplateFn;\n  };\n  /**\n   * Method to process indent template\n   *\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.getHeaderIndentTemplate = function () {\n    return this.headerIndentTemplateFn;\n  };\n  /**\n   * Method to get dynamic CSS properties\n   *\n   * @returns {ScrollCss} Returns the CSS properties dynamically\n   * @private\n   */\n\n\n  Schedule.prototype.getCssProperties = function () {\n    var cssProps = {\n      border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n      padding: this.enableRtl ? 'paddingLeft' : 'paddingRight',\n      rtlBorder: this.enableRtl ? 'borderRightWidth' : 'borderLeftWidth',\n      rtlPadding: this.enableRtl ? 'paddingRight' : 'paddingLeft'\n    };\n    return cssProps;\n  };\n  /**\n   * Method to remove new event element in adaptive mode\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.removeNewEventElement = function () {\n    var eventClone = this.element.querySelector('.' + NEW_EVENT_CLASS);\n\n    if (!isNullOrUndefined(eventClone)) {\n      remove(eventClone);\n    }\n  };\n  /**\n   * Method to get start end time from string\n   *\n   * @param {string} startEndTime Accepts the start end time string value\n   * @returns {Date} Returns the date object\n   * @private\n   */\n\n\n  Schedule.prototype.getStartEndTime = function (startEndTime) {\n    if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n      var startEndDate = resetTime(new Date(this.currentTimezoneDate) || this.getCurrentTime());\n      var timeString = startEndTime.split(':');\n\n      if (timeString.length === 2) {\n        startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n      }\n\n      return startEndDate;\n    }\n\n    return null;\n  };\n\n  Schedule.prototype.onDocumentClick = function (args) {\n    this.notify(documentClick, {\n      event: args\n    });\n  };\n\n  Schedule.prototype.onScheduleResize = function () {\n    if (isNullOrUndefined(this.activeView) || (this.isAdaptive || isMobile()) && document.activeElement && document.activeElement.classList.contains(SUBJECT_CLASS)) {\n      return;\n    }\n\n    if (this.activeViewOptions.timeScale.enable && this.activeView) {\n      this.activeView.highlightCurrentTime();\n    }\n\n    if (this.quickPopup) {\n      this.quickPopup.onClosePopup();\n    }\n\n    if (this.currentView === 'Month' || this.currentView !== 'Agenda' && this.currentView !== 'MonthAgenda' && !this.activeViewOptions.timeScale.enable || this.activeView.isTimelineView()) {\n      this.activeView.resetColWidth();\n      this.notify(scrollUiUpdate, {\n        cssProperties: this.getCssProperties(),\n        isPreventScrollUpdate: true\n      });\n      this.refreshEvents(false);\n    } else {\n      this.notify(contentReady, {});\n    }\n  };\n  /**\n   * Method to process the templates\n   *\n   * @param {string} template Accepts the template in string\n   * @returns {CallbackFunction} Returns the callback function\n   * @private\n   */\n\n\n  Schedule.prototype.templateParser = function (template) {\n    if (template) {\n      try {\n        if (document.querySelectorAll(template).length) {\n          return compile(document.querySelector(template).innerHTML.trim());\n        } else {\n          return compile(template);\n        }\n      } catch (error) {\n        return compile(template);\n      }\n    }\n\n    return undefined;\n  };\n  /**\n   * Retrieves the selected cells.\n   *\n   * @returns {Element[]} The elements of currently selected cells will be returned.\n   * @private\n   */\n\n\n  Schedule.prototype.getSelectedCells = function () {\n    return [].slice.call(this.element.querySelectorAll('.' + SELECTED_CELL_CLASS));\n  };\n  /**\n   * Method to generate the announcement string\n   *\n   * @param {Object} event Accepts the event object\n   * @param {string} subject Accepts the subject text\n   * @returns {string} Returns the announcement string\n   * @private\n   */\n\n\n  Schedule.prototype.getAnnouncementString = function (event, subject) {\n    var resourceName;\n\n    if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {\n      var constantText = '\"s event - ';\n      resourceName = this.quickPopup.getResourceText({\n        event: event\n      }, 'event') + constantText;\n    }\n\n    var recordSubject = subject || event[this.eventFields.subject] || this.eventSettings.fields.subject.default;\n    var skeleton = 'full';\n    var startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {\n      type: 'dateTime',\n      skeleton: skeleton,\n      calendar: this.getCalendarMode()\n    });\n    var endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {\n      type: 'dateTime',\n      skeleton: skeleton,\n      calendar: this.getCalendarMode()\n    });\n    var announcementString = recordSubject + ' ' + this.localeObj.getConstant('beginFrom') + ' ' + startDateText + ' ' + this.localeObj.getConstant('endAt') + ' ' + endDateText;\n\n    if (resourceName) {\n      announcementString = resourceName + ' ' + announcementString;\n    }\n\n    return announcementString;\n  };\n  /**\n   * Method to process the element boundary validation\n   *\n   * @param {number} pageY Accepts the pageY value\n   * @param {number} pageX Accepts the pageX value\n   * @returns {ResizeEdges} Returns the boundary validation object\n   * @private\n   */\n\n\n  Schedule.prototype.boundaryValidation = function (pageY, pageX) {\n    var autoScrollDistance = 30;\n    var scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var viewBoundaries = this.element.querySelector('.' + CONTENT_WRAP_CLASS).getBoundingClientRect();\n\n    if (pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset && pageY > viewBoundaries.top + window.pageYOffset) {\n      scrollEdges.top = true;\n    }\n\n    if (pageY > viewBoundaries.bottom - autoScrollDistance + window.pageYOffset && pageY < viewBoundaries.bottom + window.pageYOffset) {\n      scrollEdges.bottom = true;\n    }\n\n    if (pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset && pageX > viewBoundaries.left + window.pageXOffset) {\n      scrollEdges.left = true;\n    }\n\n    if (pageX > viewBoundaries.right - autoScrollDistance + window.pageXOffset && pageX < viewBoundaries.right + window.pageXOffset) {\n      scrollEdges.right = true;\n    }\n\n    return scrollEdges;\n  };\n  /**\n   * Method to get the week number.\n   *\n   * @param {Date[]} dates Accepts the date collections\n   * @returns {number} Returns the week number\n   * @private\n   */\n\n\n  Schedule.prototype.getWeekNumberContent = function (dates) {\n    var weekNumber;\n\n    if (this.weekRule === 'FirstDay') {\n      var weekNumberDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n      weekNumber = this.globalize.formatNumber(getWeekNumber(weekNumberDate));\n    } else if (this.weekRule === 'FirstFourDayWeek') {\n      var weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n      var weekLastDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n      var weekMidDate = getWeekMiddleDate(weekFirstDate, weekLastDate);\n      weekNumber = this.globalize.formatNumber(getWeekNumber(weekMidDate));\n    } else if (this.weekRule === 'FirstFullWeek') {\n      var weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n      weekNumber = this.globalize.formatNumber(getWeekNumber(weekFirstDate));\n    }\n\n    return weekNumber;\n  };\n  /**\n   * Method to render the header indent template.\n   *\n   * @param {TdData} data Accepts the td data\n   * @param {Element} td Accepts the td element\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.renderHeaderIndentTemplate = function (data, td) {\n    if (this.activeViewOptions.headerIndentTemplate) {\n      var scheduleId = this.element.id + '_';\n      var viewName = this.activeViewOptions.headerIndentTemplateName;\n      var templateId = scheduleId + viewName + 'headerIndentTemplate';\n      var indentTemplate = [].slice.call(this.getHeaderIndentTemplate()(data, this, 'headerIndentTemplate', templateId, false));\n      append(indentTemplate, td);\n    }\n  };\n  /**\n   * Method to check for refreshing the targeted resource row events.\n   *\n   * @returns {boolean} Returns the boolean value\n   * @private\n   */\n\n\n  Schedule.prototype.isSpecificResourceEvents = function () {\n    return this.activeViewOptions.group.resources.length > 0 && !this.activeViewOptions.group.allowGroupEdit && !this.rowAutoHeight && !this.virtualScrollModule && this.activeViewOptions.group.byGroupID;\n  };\n\n  Schedule.prototype.unWireEvents = function () {\n    EventHandler.remove(window, 'resize', this.onScheduleResize);\n    EventHandler.remove(window, 'orientationchange', this.onScheduleResize);\n    EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n  };\n  /**\n   * Core method to return the component name.\n   *\n   * @returns {string} Returns the module name\n   * @private\n   */\n\n\n  Schedule.prototype.getModuleName = function () {\n    return 'schedule';\n  };\n  /**\n   * Returns the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persistance data\n   * @private\n   */\n\n\n  Schedule.prototype.getPersistData = function () {\n    return this.addOnPersist(['currentView', 'selectedDate', 'scrollTop', 'scrollLeft']);\n  };\n  /**\n   * Called internally, if any of the property value changed.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Schedule.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.isReact && isNullOrUndefined(this.activeView)) {\n      return;\n    }\n\n    var state = {\n      isRefresh: false,\n      isResource: false,\n      isDate: false,\n      isView: false,\n      isLayout: false,\n      isDataManager: false\n    };\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'views':\n          this.setViewOptions();\n\n          if (this.headerModule) {\n            this.headerModule.updateItems();\n          }\n\n          state.isView = true;\n          break;\n\n        case 'currentView':\n          state.isView = true;\n          break;\n\n        case 'minDate':\n        case 'maxDate':\n        case 'selectedDate':\n          state.isDate = true;\n          break;\n\n        case 'dateFormat':\n          this.activeViewOptions = this.getActiveViewOptions();\n\n          if (this.headerModule) {\n            this.headerModule.updateDateRange();\n          }\n\n          break;\n\n        case 'showHeaderBar':\n          this.destroyHeaderModule();\n\n          if (newProp.showHeaderBar) {\n            this.headerModule = new HeaderRenderer(this);\n            this.headerModule.updateDateRange();\n          }\n\n          this.notify(scrollUiUpdate, {\n            cssProperties: this.getCssProperties()\n          });\n\n          if (this.activeView.isTimelineView()) {\n            this.refreshEvents(false);\n          }\n\n          break;\n\n        case 'workDays':\n          if (JSON.stringify(oldProp.workDays) !== JSON.stringify(newProp.workDays)) {\n            state.isLayout = true;\n          }\n\n          break;\n\n        case 'showWeekend':\n        case 'startHour':\n        case 'endHour':\n        case 'workHours':\n        case 'readonly':\n        case 'headerRows':\n        case 'showWeekNumber':\n        case 'rowAutoHeight':\n          state.isLayout = true;\n          break;\n\n        case 'locale':\n        case 'calendarMode':\n          this.globalize = new Internationalization(this.locale);\n          this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n          this.setCldrTimeFormat();\n          this.setCalendarMode();\n          state.isRefresh = true;\n          break;\n\n        case 'firstDayOfWeek':\n          this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;\n\n          if (this.eventWindow) {\n            this.eventWindow.refreshRecurrenceEditor();\n          }\n\n          state.isLayout = true;\n          break;\n\n        case 'showTimeIndicator':\n          if (this.activeViewOptions.timeScale.enable && this.activeView) {\n            this.activeView.highlightCurrentTime();\n          }\n\n          break;\n\n        case 'cellHeaderTemplate':\n          this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;\n          this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n          state.isLayout = true;\n          break;\n\n        case 'cellTemplate':\n          this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n          this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n          state.isLayout = true;\n          break;\n\n        case 'dateHeaderTemplate':\n          this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n          this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n          state.isLayout = true;\n          break;\n\n        case 'dateRangeTemplate':\n          this.activeViewOptions.dateRangeTemplate = newProp.dateRangeTemplate;\n          this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n\n          if (this.headerModule) {\n            this.headerModule.updateDateRange();\n          }\n\n          break;\n\n        case 'dayHeaderTemplate':\n          this.activeViewOptions.dayHeaderTemplate = newProp.dayHeaderTemplate;\n          this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n          state.isLayout = true;\n          break;\n\n        case 'monthHeaderTemplate':\n          this.activeViewOptions.monthHeaderTemplate = newProp.monthHeaderTemplate;\n          this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n          state.isLayout = true;\n          break;\n\n        case 'resourceHeaderTemplate':\n          this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;\n          this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n          state.isLayout = true;\n          break;\n\n        case 'timezone':\n          this.eventBase.timezonePropertyChange(oldProp.timezone);\n          this.headerModule.setCalendarTimezone();\n          break;\n\n        case 'enableRtl':\n          this.setRtlClass();\n          state.isRefresh = true;\n          break;\n\n        default:\n          this.extendedPropertyChange(prop, newProp, oldProp, state);\n          break;\n      }\n    }\n\n    this.propertyChangeAction(state);\n  };\n\n  Schedule.prototype.propertyChangeAction = function (state) {\n    if (state.isRefresh) {\n      this.refresh();\n    } else if (state.isResource) {\n      this.initializeResources(true);\n    } else if (state.isView) {\n      this.changeView(this.currentView, null, true);\n    } else if (state.isDate) {\n      this.changeDate(this.selectedDate);\n    } else if (state.isLayout) {\n      this.activeCellsData = null;\n      this.initializeView(this.currentView);\n    } else if (state.isDataManager && this.crudModule) {\n      if (this.dragAndDropModule) {\n        this.dragAndDropModule.actionObj.action = '';\n        removeClass([this.element], EVENT_ACTION_CLASS);\n      }\n\n      this.crudModule.refreshDataManager();\n    }\n  };\n\n  Schedule.prototype.allDayRowScrollUpdate = function () {\n    var dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n    var allDayRow = this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n\n    if (this.height === 'auto' || !this.enableAllDayScroll) {\n      addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n\n      if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_SCROLL)) {\n        removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n      }\n\n      if (this.uiStateValues.expand) {\n        var allDayCells = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n        allDayCells[0].style.height = allDayRow.style.height ? allDayRow.style.height : allDayCells[1].style.height;\n      }\n    } else {\n      if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_AUTO)) {\n        removeClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n      }\n\n      this.eventBase.allDayExpandScroll(dateHeader);\n    }\n\n    if (!this.uiStateValues.expand) {\n      allDayRow.style.height = '';\n    }\n  };\n\n  Schedule.prototype.extendedPropertyChange = function (prop, newProp, oldProp, state) {\n    switch (prop) {\n      case 'width':\n      case 'height':\n      case 'enableAllDayScroll':\n        if (['Day', 'Week', 'WorkWeek'].indexOf(this.currentView) > -1) {\n          this.allDayRowScrollUpdate();\n        }\n\n        this.notify(uiUpdate, {\n          module: 'scroll',\n          properties: {\n            width: newProp.width,\n            height: newProp.height\n          }\n        });\n        break;\n\n      case 'cssClass':\n        if (oldProp.cssClass) {\n          removeClass([this.element], oldProp.cssClass.split(' '));\n        }\n\n        if (newProp.cssClass) {\n          addClass([this.element], newProp.cssClass.split(' '));\n        }\n\n        break;\n\n      case 'hideEmptyAgendaDays':\n      case 'agendaDaysCount':\n        this.activeViewOptions = this.getActiveViewOptions();\n        state.isView = true;\n        break;\n\n      case 'eventSettings':\n        this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n        break;\n\n      case 'allowKeyboardInteraction':\n        if (this.keyboardInteractionModule) {\n          this.keyboardInteractionModule.destroy();\n          this.keyboardInteractionModule = null;\n        }\n\n        if (newProp.allowKeyboardInteraction) {\n          this.keyboardInteractionModule = new KeyboardInteraction(this);\n        }\n\n        break;\n\n      case 'timezoneDataSource':\n        if (this.eventWindow) {\n          this.eventWindow.refresh();\n        }\n\n        break;\n\n      case 'editorTemplate':\n        if (!isNullOrUndefined(this.editorTemplate)) {\n          this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        }\n\n        if (this.eventWindow) {\n          this.eventWindow.setDialogContent();\n        }\n\n        break;\n\n      case 'quickInfoTemplates':\n        if (this.quickInfoTemplates.header) {\n          this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        }\n\n        if (this.quickInfoTemplates.content) {\n          this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        }\n\n        if (this.quickInfoTemplates.footer) {\n          this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n        }\n\n        break;\n\n      case 'group':\n        this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n        break;\n\n      case 'resources':\n        state.isResource = true;\n        break;\n\n      case 'timeScale':\n        this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n        this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n\n        if (this.eventWindow) {\n          this.eventWindow.refreshDateTimePicker();\n        }\n\n        state.isLayout = true;\n        break;\n\n      case 'allowDragAndDrop':\n      case 'allowResizing':\n      case 'eventDragArea':\n        this.refreshEvents(false);\n        break;\n\n      case 'weekRule':\n        state.isLayout = true;\n        break;\n\n      case 'firstMonthOfYear':\n        this.activeViewOptions.firstMonthOfYear = newProp.firstMonthOfYear;\n        this.viewIndex = this.activeView.viewIndex;\n        state.isLayout = true;\n        break;\n\n      case 'monthsCount':\n        this.activeViewOptions.monthsCount = newProp.monthsCount;\n        this.viewIndex = this.activeView.viewIndex;\n        state.isLayout = true;\n        break;\n\n      case 'timeFormat':\n        this.internalTimeFormat = newProp.timeFormat || this.activeViewOptions.timeFormat;\n\n        if (this.eventWindow) {\n          this.eventWindow.refreshDateTimePicker();\n        }\n\n        state.isLayout = true;\n        break;\n\n      case 'enableAdaptiveUI':\n        if (this.showHeaderBar && this.headerModule) {\n          this.destroyHeaderModule();\n          this.headerModule = new HeaderRenderer(this);\n          this.headerModule.updateDateRange();\n        }\n\n        state.isLayout = true;\n        break;\n\n      case 'headerIndentTemplate':\n        this.activeViewOptions.headerIndentTemplate = newProp.headerIndentTemplate;\n        this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n        state.isLayout = true;\n        break;\n    }\n  };\n\n  Schedule.prototype.setRtlClass = function () {\n    if (this.enableRtl) {\n      addClass([this.element], 'e-rtl');\n    } else {\n      removeClass([this.element], 'e-rtl');\n    }\n  };\n\n  Schedule.prototype.onGroupSettingsPropertyChanged = function (newProp, oldProp, state) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      if (prop === 'headerTooltipTemplate') {\n        this.headerTooltipTemplateFn = this.templateParser(newProp.headerTooltipTemplate);\n      } else {\n        state.isLayout = true;\n\n        if (this.eventWindow) {\n          this.eventWindow.refresh();\n        }\n      }\n    }\n  };\n\n  Schedule.prototype.onEventSettingsPropertyChanged = function (newProp, oldProp, state) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'dataSource':\n        case 'query':\n        case 'fields':\n        case 'includeFiltersInQuery':\n          this.initializeDataModule();\n          state.isDataManager = true;\n          break;\n\n        case 'template':\n          this.activeViewOptions.eventTemplate = newProp.template;\n          this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n          state.isDataManager = true;\n          break;\n\n        case 'enableTooltip':\n          if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n          }\n\n          if (newProp.enableTooltip) {\n            this.eventTooltip = new EventTooltip(this);\n          }\n\n          break;\n\n        case 'tooltipTemplate':\n          this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n          break;\n\n        case 'resourceColorField':\n          if (this.resourceBase) {\n            this.resourceBase.setResourceCollection();\n          }\n\n          state.isDataManager = true;\n          break;\n\n        case 'editFollowingEvents':\n          if (this.quickPopup) {\n            this.quickPopup.refreshQuickDialog();\n          }\n\n          break;\n\n        case 'allowAdding':\n        case 'allowEditing':\n        case 'allowDeleting':\n          if (this.showHeaderBar && this.headerModule) {\n            this.headerModule.updateAddIcon();\n          }\n\n          if (this.eventWindow) {\n            this.eventWindow.refresh();\n          }\n\n          break;\n\n        case 'spannedEventPlacement':\n        case 'minimumEventDuration':\n        case 'enableMaxHeight':\n        case 'enableIndicator':\n          this.refreshEvents(false);\n          break;\n\n        case 'ignoreWhitespace':\n          state.isLayout = true;\n          break;\n      }\n    }\n  };\n\n  Schedule.prototype.destroyHeaderModule = function () {\n    if (this.headerModule) {\n      this.headerModule.destroy();\n      this.headerModule = null;\n    }\n  };\n\n  Schedule.prototype.destroyPopups = function () {\n    if (this.quickPopup) {\n      this.quickPopup.destroy();\n      this.quickPopup = null;\n    }\n\n    if (this.eventWindow) {\n      this.eventWindow.destroy();\n      this.eventWindow = null;\n    }\n  };\n  /**\n   * Allows to show the spinner on schedule at the required scenarios.\n   *\n   * @function showSpinner\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.showSpinner = function () {\n    showSpinner(this.element);\n  };\n  /**\n   * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n   *\n   * @function hideSpinner\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.hideSpinner = function () {\n    hideSpinner(this.element);\n  };\n  /**\n   * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n   *  as its parameters.\n   *\n   * @function setWorkHours\n   * @param {Date} dates Collection of dates on which the given start and end hour range needs to be applied.\n   * @param {string} start Defines the work start hour.\n   * @param {string} end Defines the work end hour.\n   * @param {number} groupIndex Defines the resource index from last level.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.setWorkHours = function (dates, start, end, groupIndex) {\n    var cells = [];\n    cells = this.getWorkHourCells(dates, start, end, groupIndex);\n    addClass(cells, WORK_HOURS_CLASS);\n  };\n  /**\n   * Removes or resets different working hours on the required working days by accepting the required start and end time as well as the\n   * date collection as its parameters.\n   * if no parameters has been passed to this function, it will remove all the work hours.\n   *\n   * @param {Date} dates Collection of dates on which the given start and end hour range need to be applied.\n   * @param {string} start Defines the work start hour.\n   * @param {string} end Defines the work end hour.\n   * @param {number} groupIndex Defines the resource index from last level.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.resetWorkHours = function (dates, start, end, groupIndex) {\n    if (dates === void 0) {\n      dates = this.activeView.renderDates;\n    }\n\n    if (dates && start && end) {\n      var cells = this.getWorkHourCells(dates, start, end, groupIndex);\n      removeClass(cells, WORK_HOURS_CLASS);\n    } else {\n      var workHourCells = [].slice.call(this.element.querySelectorAll('.' + WORK_HOURS_CLASS));\n      removeClass(workHourCells, WORK_HOURS_CLASS);\n    }\n  };\n\n  Schedule.prototype.getWorkHourCells = function (dates, start, end, groupIndex) {\n    if (['Agenda', 'MonthAgenda', 'Month', 'TimelineMonth'].indexOf(this.currentView) > -1) {\n      return [];\n    }\n\n    var startHour = this.getStartEndTime(start);\n    var endHour = this.getStartEndTime(end);\n    var tableEle = this.getContentTable();\n\n    if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n      return [];\n    }\n\n    startHour.setMilliseconds(0);\n    endHour.setMilliseconds(0);\n    var viewStartHour = this.activeView.getStartHour();\n\n    if (startHour < viewStartHour) {\n      startHour = viewStartHour;\n    }\n\n    var viewEndHour = this.activeView.getEndHour();\n\n    if (endHour > viewEndHour) {\n      endHour = viewEndHour;\n    }\n\n    var msMajorInterval = this.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n    var startIndex = Math.round((startHour.getTime() - viewStartHour.getTime()) / msInterval);\n    var endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime()) / msInterval);\n    var tempStartIndex = startIndex;\n    var tempEndIndex = endIndex;\n    var cells = [];\n\n    for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n      var date = dates_1[_i];\n      date = this.getDateTime(date);\n      resetTime(date);\n      var renderDates = this.activeView.renderDates;\n\n      if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n        renderDates = this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)].renderDates;\n      }\n\n      var colIndex = this.getIndexOfDate(renderDates, date);\n\n      if (colIndex >= 0) {\n        if (this.activeView.isTimelineView()) {\n          var slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);\n          startIndex = tempStartIndex + colIndex * slotsPerDay;\n          endIndex = tempEndIndex + colIndex * slotsPerDay;\n        }\n\n        for (var i = startIndex; i < endIndex; i++) {\n          if (this.activeView.isTimelineView()) {\n            var rowIndex = !isNullOrUndefined(groupIndex) ? groupIndex : 0;\n            cells.push(tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[parseInt(i.toString(), 10)]);\n          } else {\n            if (!isNullOrUndefined(groupIndex)) {\n              var selector = '.' + WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]';\n              var tds = [].slice.call(tableEle.rows[parseInt(i.toString(), 10)].querySelectorAll(selector));\n              cells.push(tds[parseInt(colIndex.toString(), 10)]);\n            } else {\n              cells.push(tableEle.rows[parseInt(i.toString(), 10)].cells[parseInt(colIndex.toString(), 10)]);\n            }\n          }\n        }\n      }\n    }\n\n    return cells;\n  };\n  /**\n   * Retrieves the start and end time information of the specific cell element.\n   *\n   * @function getCellDetails\n   * @param {Element | Element[]} tdCol Accepts the single or collection of elements.\n   * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML element will be returned.\n   */\n\n\n  Schedule.prototype.getCellDetails = function (tdCol) {\n    var td = tdCol instanceof Array ? tdCol : [tdCol];\n    var firstTd = getElement(td[0]);\n    var lastTd = getElement(td.slice(-1)[0]);\n    var startTime = this.getDateFromElement(firstTd);\n    var endTime = this.getDateFromElement(lastTd);\n\n    if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n      return undefined;\n    }\n\n    var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan')) && this.headerRows.length > 0;\n    var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n\n    if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(ALLDAY_CELLS_CLASS) || lastTd.classList.contains(HEADER_CELLS_CLASS)) {\n      endTime = addDays(new Date(endTime.getTime()), duration);\n    } else {\n      endTime = this.activeView.getEndDateFromStartDate(endTime);\n    }\n\n    var data = {\n      startTime: startTime,\n      endTime: endTime,\n      isAllDay: this.isAllDayCell(firstTd),\n      element: tdCol\n    };\n    var groupIndex = firstTd.getAttribute('data-group-index');\n\n    if (!isNullOrUndefined(groupIndex)) {\n      data.groupIndex = parseInt(groupIndex, 10);\n    }\n\n    return data;\n  };\n  /**\n   * Retrieves the selected cell elements.\n   *\n   * @function getSelectedElements\n   * @returns {Element[]} The elements of currently selected cells will be returned.\n   */\n\n\n  Schedule.prototype.getSelectedElements = function () {\n    if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {\n      return this.keyboardInteractionModule.selectedCells;\n    }\n\n    return this.getSelectedCells();\n  };\n  /**\n   * To get the resource collection\n   *\n   * @function getResourceCollections\n   * @returns {ResourcesModel[]} Returns the resource collections\n   */\n\n\n  Schedule.prototype.getResourceCollections = function () {\n    return this.resourceCollection;\n  };\n  /**\n   * To set the resource collection\n   *\n   * @function setResourceCollections\n   * @param {ResourcesModel[]} resourceCol Accepts the resource collections in ResourcesModel type\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.setResourceCollections = function (resourceCol) {\n    this.setProperties({\n      resources: resourceCol\n    }, false);\n  };\n  /**\n   * Current View could be change based on the provided parameters.\n   *\n   * @function changeCurrentView\n   * @param {View} viewName Accept the view in the viewCollections.\n   * @param {number} viewIndex Accept the viewIndex in the viewCollections.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.changeCurrentView = function (viewName, viewIndex) {\n    var index = this.getViewIndex(viewName);\n    var view = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n    var viewOptions = this.viewOptions[\"\" + view];\n\n    if (viewOptions) {\n      index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);\n    }\n\n    if (index === -1 || index === this.viewIndex) {\n      return;\n    }\n\n    this.changeView(viewName, null, null, index);\n  };\n  /**\n   * Return the current view Index.\n   *\n   * @function getCurrentViewIndex\n   * @returns {number} Returns the view index\n   */\n\n\n  Schedule.prototype.getCurrentViewIndex = function () {\n    return this.viewIndex;\n  };\n  /**\n   * Retrieves the resource details based on the provided resource index.\n   *\n   * @param {number} index index of the resources at the last level.\n   * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n   */\n\n\n  Schedule.prototype.getResourcesByIndex = function (index) {\n    if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n      if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n        return undefined;\n      }\n\n      var data = this.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n      var groupData = {};\n      this.resourceBase.setResourceValues(groupData, index);\n      return {\n        resource: data.resource,\n        resourceData: data.resourceData,\n        groupData: groupData\n      };\n    }\n\n    return undefined;\n  };\n  /**\n   * This method allows to expand the resource that available on the scheduler.\n   *\n   * @function expandResource\n   * @param {string | number} resourceId Accepts the resource id in either string or number type\n   * @param {string} name Accepts the name of the resource collection\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.expandResource = function (resourceId, name) {\n    if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n      this.resourceBase.resourceExpand(resourceId, name, false);\n    }\n  };\n  /**\n   * This method allows to collapse the resource that available on the scheduler.\n   *\n   * @function collapseResource\n   * @param {string | number} resourceId Accepts the resource id in either string or number type\n   * @param {string} name Accepts the name of the resource collection\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.collapseResource = function (resourceId, name) {\n    if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n      this.resourceBase.resourceExpand(resourceId, name, true);\n    }\n  };\n  /**\n   * Scrolls the Schedule content area to the specified time.\n   *\n   * @function scrollTo\n   * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n   * @param {Date} scrollDate Accepts the date object value.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.scrollTo = function (hour, scrollDate) {\n    if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {\n      this.activeView.scrollToDate(scrollDate);\n    } else if (this.activeView.scrollToHour) {\n      this.activeView.scrollToHour(hour, scrollDate);\n    }\n  };\n  /**\n   * This method allows scroll to the position of the any resources that available on the scheduler.\n   * This method is applicable for without Agenda and Month agenda views of the schedule.\n   *\n   * @function scrollToResource\n   * @param {string | number} resourceId Accepts the resource id in either string or number type\n   * @param {string} groupName Accepts the name of the resource collection\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.scrollToResource = function (resourceId, groupName) {\n    if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n      this.resourceBase.resourceScroll(resourceId, groupName);\n    }\n  };\n  /**\n   * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n   * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n   *\n   * @function exportToICalendar\n   * @param {string} fileName Accepts the string value.\n   * @param {Object[]} customData Accepts the collection of objects.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.exportToICalendar = function (fileName, customData) {\n    if (this.iCalendarExportModule) {\n      this.iCalendarExportModule.initializeCalendarExport(fileName, customData);\n    } else {\n      throw Error('Inject ICalendarExport module');\n    }\n  };\n  /**\n   * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n   * This method accepts the blob object or string format of an .ics file to be imported as a mandatory argument.\n   *\n   * @function importICalendar\n   * @param {Blob | string} fileContent Accepts the file object or string format of an .ics file.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.importICalendar = function (fileContent) {\n    if (this.iCalendarImportModule) {\n      this.iCalendarImportModule.initializeCalendarImport(fileContent);\n    } else {\n      throw Error('Inject ICalendarImport module');\n    }\n  };\n  /**\n   * Adds the newly created event into the Schedule dataSource.\n   *\n   * @function addEvent\n   * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.addEvent = function (data) {\n    this.crudModule.addEvent(data);\n  };\n  /**\n   * Generates the occurrences of a single recurrence event based on the provided event.\n   *\n   * @function generateEventOccurrences\n   * @param {Object} event Accepts the parent recurrence event from which the occurrences are generated.\n   * @param {Date} startDate Accepts the start date for the event occurrences. If not provided, the event's start date will be used.\n   * @returns {Object[]} Returns the collection of occurrence event objects.\n   */\n\n\n  Schedule.prototype.generateEventOccurrences = function (event, startDate) {\n    return this.eventBase ? this.eventBase.generateOccurrence(event, startDate) : [];\n  };\n  /**\n   * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n   * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n   * To export only the specific events of Scheduler, you need to pass the custom data collection as\n   * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n   * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n   * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n   * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n   * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n   * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n   * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n   *\n   * @function exportToExcel\n   * @param {ExportOptions} excelExportOptions The export options to be set before start with exporting the Scheduler events to an Excel file.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.exportToExcel = function (excelExportOptions) {\n    if (this.excelExportModule) {\n      this.excelExportModule.initializeExcelExport(excelExportOptions);\n    } else {\n      throw Error('Inject ExcelExport module');\n    }\n  };\n  /**\n   * Method allows to print the scheduler.\n   *\n   * @function print\n   * @param {ScheduleModel} printOptions The export options to be set before start with exporting\n   * the Scheduler events to the print window.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.print = function (printOptions) {\n    if (this.printModule) {\n      this.printModule.print(printOptions);\n    } else {\n      throw Error('Inject Print module');\n    }\n  };\n  /**\n   * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n   *\n   * @function saveEvent\n   * @param {Object | Object[]} data Single or collection of event objects to be saved into Schedule.\n   * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n   *  The valid current action names are `EditOccurrence` or `EditSeries`.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.saveEvent = function (data, currentAction) {\n    this.crudModule.saveEvent(data, currentAction);\n  };\n  /**\n   * Deletes the events based on the provided ID or event collection in the argument list.\n   *\n   * @function deleteEvent\n   * @param {string | number | Object | Object[]} id Accepts the ID as string or number type or single or collection of the event object which needs to be removed from the Schedule.\n   * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n   *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.deleteEvent = function (id, currentAction) {\n    this.crudModule.deleteEvent(id, currentAction);\n  };\n  /**\n   * Retrieves the entire collection of events bound to the Schedule.\n   *\n   * @function getEvents\n   * @param {Date} startDate Accepts the start date.\n   * @param {Date} endDate Accepts te end date.\n   * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n   * @returns {Object[]} Returns the collection of event objects from the Schedule.\n   */\n\n\n  Schedule.prototype.getEvents = function (startDate, endDate, includeOccurrences) {\n    var eventCollections = [];\n\n    if (includeOccurrences) {\n      eventCollections = this.eventBase.getProcessedEvents();\n    } else {\n      eventCollections = this.eventsData;\n    }\n\n    if (startDate) {\n      startDate = this.getDateTime(startDate);\n    }\n\n    if (endDate) {\n      endDate = this.getDateTime(endDate);\n    }\n\n    eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n    return eventCollections;\n  };\n  /**\n   * Retrieves the entire collection of block events bound to the Schedule.\n   *\n   * @function getBlockEvents\n   * @param {Date} startDate Accepts the start date.\n   * @param {Date} endDate Accepts te end date.\n   * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n   * @returns {Object[]} Returns the collection of block event objects from the Schedule.\n   */\n\n\n  Schedule.prototype.getBlockEvents = function (startDate, endDate, includeOccurrences) {\n    var eventCollections = [];\n\n    if (includeOccurrences) {\n      eventCollections = this.eventBase.getProcessedEvents(this.blockData);\n    } else {\n      eventCollections = this.blockData;\n    }\n\n    if (startDate) {\n      startDate = this.getDateTime(startDate);\n    }\n\n    if (endDate) {\n      endDate = this.getDateTime(endDate);\n    }\n\n    eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n    return eventCollections;\n  };\n  /**\n   * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n   *\n   * @function getOccurrencesByID\n   * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n   * @returns {Object[]} Returns the collection of occurrence event objects.\n   */\n\n\n  Schedule.prototype.getOccurrencesByID = function (eventID) {\n    return this.eventBase.getOccurrencesByID(eventID);\n  };\n  /**\n   * Retrieves all the occurrences that lies between the specific start and end time range.\n   *\n   * @function getOccurrencesByRange\n   * @param {Date} startTime Denotes the start time range.\n   * @param {Date} endTime Denotes the end time range.\n   * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n   */\n\n\n  Schedule.prototype.getOccurrencesByRange = function (startTime, endTime) {\n    startTime = this.getDateTime(startTime);\n    endTime = this.getDateTime(endTime);\n    return this.eventBase.getOccurrencesByRange(startTime, endTime);\n  };\n  /**\n   * Retrieves the dates that lies on active view of Schedule.\n   *\n   * @function getCurrentViewDates\n   * @returns {Date[]} Returns the collection of dates.\n   */\n\n\n  Schedule.prototype.getCurrentViewDates = function () {\n    return this.activeView ? this.activeView.renderDates : [];\n  };\n  /**\n   * Set the recurrence editor instance from custom editor template.\n   *\n   * @function setRecurrenceEditor\n   * @param {RecurrenceEditor} recurrenceEditor instance has passed to fetch the instance in event window.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n    this.eventWindow.setRecurrenceEditor(recurrenceEditor);\n  };\n  /**\n   * Get the maximum id of an event.\n   *\n   * @function getEventMaxID\n   * @returns {number | string} Returns the maximum ID from scheduler data collections.\n   */\n\n\n  Schedule.prototype.getEventMaxID = function () {\n    return this.eventBase.getEventMaxID();\n  };\n  /**\n   * Get deleted occurrences from given recurrence series.\n   *\n   * @function getDeletedOccurrences\n   * @param {string | number | Object} recurrenceData Accepts the parent ID of the event object or parent event object\n   * @returns {Object[]} Returns the collection of deleted occurrence events.\n   */\n\n\n  Schedule.prototype.getDeletedOccurrences = function (recurrenceData) {\n    return this.eventBase.getDeletedOccurrences(recurrenceData);\n  };\n  /**\n   * Retrieves the events that lies on the current date range of the active view of Schedule.\n   *\n   * @function getCurrentViewEvents\n   * @returns {Object[]} Returns the collection of events.\n   */\n\n\n  Schedule.prototype.getCurrentViewEvents = function () {\n    return this.eventsProcessed;\n  };\n  /**\n   * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n   *\n   * @function refreshEvents\n   * @param {boolean} isRemoteRefresh Accepts the boolean to refresh data from remote or local\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.refreshEvents = function (isRemoteRefresh) {\n    if (isRemoteRefresh === void 0) {\n      isRemoteRefresh = true;\n    }\n\n    if (isRemoteRefresh) {\n      if (this.dragAndDropModule) {\n        this.dragAndDropModule.actionObj.action = '';\n        removeClass([this.element], EVENT_ACTION_CLASS);\n      }\n\n      this.crudModule.refreshDataManager();\n    } else {\n      if (this.uiStateValues) {\n        this.uiStateValues.isPreventTimezone = true;\n      }\n\n      if (this.crudModule) {\n        this.crudModule.refreshProcessedData();\n      }\n\n      if (this.uiStateValues) {\n        this.uiStateValues.isPreventTimezone = false;\n      }\n    }\n  };\n  /**\n   * Method to refresh the given Schedule templates\n   *\n   * @param {string} templateName Accepts the template name\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.refreshTemplates = function (templateName) {\n    if (templateName) {\n      this.resetTemplates([templateName]);\n    } else {\n      this.resetTemplates();\n    }\n\n    switch (templateName) {\n      case 'eventTemplate':\n        this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n        this.refreshEvents(false);\n        break;\n\n      case 'dateHeaderTemplate':\n        this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n        this.activeView.refreshHeader();\n        break;\n\n      case 'dateRangeTemplate':\n        this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n\n        if (this.headerModule) {\n          this.headerModule.refresh();\n        }\n\n        break;\n\n      case 'resourceHeaderTemplate':\n        this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n\n        if (this.activeView.isTimelineView()) {\n          this.activeView.refreshResourceHeader();\n        } else {\n          this.activeView.refreshHeader();\n        }\n\n        break;\n\n      case 'quickInfoTemplates':\n        if (this.quickPopup) {\n          this.quickPopup.destroy();\n          this.quickPopup = null;\n        }\n\n        this.quickPopup = new QuickPopups(this);\n        this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n        break;\n\n      case 'editorTemplate':\n        if (this.eventWindow) {\n          this.eventWindow.destroy();\n          this.eventWindow = null;\n        }\n\n        this.eventWindow = new EventWindow(this);\n        this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        break;\n\n      case 'tooltipTemplate':\n      case 'headerTooltipTemplate':\n        if (this.eventTooltip) {\n          this.eventTooltip.destroy();\n          this.eventTooltip = null;\n        }\n\n        this.eventTooltip = new EventTooltip(this);\n        this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n        this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n        break;\n\n      default:\n        this.initializeView(this.currentView);\n        break;\n    }\n  };\n  /**\n   * Refreshes the Schedule layout without re-render.\n   *\n   * @function refreshLayout\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.refreshLayout = function () {\n    this.onScheduleResize();\n\n    if (this.headerModule) {\n      this.headerModule.refresh();\n    }\n\n    if (this.eventWindow) {\n      this.eventWindow.refresh();\n    }\n  };\n  /**\n   * To retrieve the appointment object from element.\n   *\n   * @function getEventDetails\n   * @param {Element} element Denotes the event UI element on the Schedule.\n   * @returns {Object} Returns the event details.\n   */\n\n\n  Schedule.prototype.getEventDetails = function (element) {\n    element = getElement(element);\n    var guid = element.getAttribute('data-guid');\n\n    if (guid) {\n      return this.eventBase.getEventByGuid(guid);\n    }\n\n    return {};\n  };\n  /**\n   * To check whether the given time range slots are available for event creation or already occupied by other events.\n   *\n   * @function isSlotAvailable\n   * @param {Date | Object} startTime Denotes the start time of the slot.\n   * @param {Date} endTime Denotes the end time of the slot.\n   * @param {number} groupIndex Defines the resource index from last level.\n   * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n   */\n\n\n  Schedule.prototype.isSlotAvailable = function (startTime, endTime, groupIndex) {\n    var _this = this;\n\n    var eventStart;\n    var eventEnd;\n    var eventObj = this.activeEventData.event;\n\n    if (startTime instanceof Date || typeof startTime === 'string') {\n      eventStart = startTime;\n      eventEnd = endTime;\n    } else {\n      eventObj = startTime;\n      eventStart = startTime[this.eventFields.startTime];\n      eventEnd = startTime[this.eventFields.endTime];\n\n      if (this.resourceBase) {\n        groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);\n      }\n    }\n\n    if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {\n      return true;\n    }\n\n    eventStart = this.getDateTime(eventStart);\n    eventEnd = this.getDateTime(eventEnd);\n    var eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);\n\n    if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n      eventCollection = this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)], eventCollection);\n    }\n\n    if (eventObj) {\n      if (eventObj.Guid) {\n        eventCollection = eventCollection.filter(function (event) {\n          return event.Guid !== eventObj.Guid;\n        });\n      } else {\n        eventCollection = eventCollection.filter(function (event) {\n          return event[_this.eventFields.id] !== eventObj[_this.eventFields.id];\n        });\n      }\n    }\n\n    return eventCollection.length > 0 ? false : true;\n  };\n  /**\n   * To manually open the event editor on specific time or on certain events.\n   *\n   * @function openEditor\n   * @param {Object} data It can be either cell data or event data.\n   * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n   *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n   *  and `EditSeries`.\n   * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n   *  passed event details.\n   * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.openEditor = function (data, action, isEventData, repeatType) {\n    if (action === 'Add' && !isEventData) {\n      data.startTime = this.getDateTime(data.startTime);\n      data.endTime = this.getDateTime(data.endTime);\n\n      if (!isNullOrUndefined(data.element)) {\n        data.element = getElement(data.element);\n      }\n    } else {\n      data[this.eventFields.startTime] = this.getDateTime(data[this.eventFields.startTime]);\n      data[this.eventFields.endTime] = this.getDateTime(data[this.eventFields.endTime]);\n    }\n\n    this.currentAction = action;\n\n    if (action !== 'Add') {\n      this.activeEventData.event = data;\n    }\n\n    this.eventWindow.openEditor(data, action, isEventData, repeatType);\n  };\n  /**\n   * To manually close the event editor window\n   *\n   * @function closeEditor\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.closeEditor = function () {\n    if (this.eventWindow) {\n      this.eventWindow.dialogClose();\n    }\n  };\n  /**\n   * To manually open the quick info popup based on cell or event details.\n   *\n   * @param {object} data Defines the cell or event data. If the data contains valid ID, it will open event quick info popup,\n   * otherwise cell quick info popup displayed.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.openQuickInfoPopup = function (data) {\n    var _this = this;\n\n    if (this.currentView === 'Year' || isNullOrUndefined(data)) {\n      return;\n    }\n\n    if (isNullOrUndefined(data[this.eventFields.id])) {\n      if (this.currentView === 'Agenda' || this.currentView === 'MonthAgenda' || isNullOrUndefined(this.activeView)) {\n        return;\n      }\n\n      var cellData = {\n        startTime: this.activeCellsData.startTime = this.getDateTime(data[this.eventFields.startTime]),\n        endTime: this.activeCellsData.endTime = this.getDateTime(data[this.eventFields.endTime]),\n        isAllDay: this.activeCellsData.isAllDay = !isNullOrUndefined(data[this.eventFields.isAllDay]) ? data[this.eventFields.isAllDay] : false\n      };\n      var startTime = this.activeView.getAdjustedDate(new Date(cellData.startTime));\n\n      if (startTime) {\n        var query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + startTime.getTime() + '\"]';\n\n        if (this.activeViewOptions.group.resources.length > 0 && !this.uiStateValues.isGroupAdaptive && this.resourceBase && this.eventBase) {\n          cellData.groupIndex = this.eventBase.getGroupIndexFromEvent(data);\n          query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + startTime.getTime() + '\"][data-group-index=\"' + cellData.groupIndex + '\"]';\n        }\n\n        var workCell = this.element.querySelector(query);\n\n        if (workCell) {\n          workCell.focus();\n          cellData.element = workCell;\n          this.notify(cellClick, cellData);\n        }\n      }\n    } else {\n      var app = this.getCurrentViewEvents().filter(function (item) {\n        return data[_this.eventFields.id] === item[_this.eventFields.id];\n      });\n\n      if (app.length <= 0) {\n        return;\n      }\n\n      var selectEvent = app[0];\n\n      if (data[this.eventFields.recurrenceRule]) {\n        var occurence = app.filter(function (x) {\n          return x[_this.eventFields.startTime].getTime() === data[_this.eventFields.startTime].getTime();\n        });\n\n        if (occurence.length > 0) {\n          selectEvent = occurence[0];\n        }\n      }\n\n      var element = this.element.querySelector('div[data-guid=\"' + selectEvent.Guid + '\"]');\n\n      if (element) {\n        this.eventBase.removeSelectedAppointmentClass();\n        this.eventBase.addSelectedAppointments([element], false);\n        this.activeEventData = {\n          event: selectEvent,\n          element: element\n        };\n\n        if (this.currentView === 'Agenda' || this.currentView === 'MonthAgenda') {\n          addClass([this.activeEventData.element], AGENDA_SELECTED_CELL);\n        }\n\n        this.notify(eventClick, this.activeEventData);\n      }\n    }\n  };\n  /**\n   * To manually close the quick info popup\n   *\n   * @function closeQuickInfoPopup\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.closeQuickInfoPopup = function () {\n    if (this.quickPopup) {\n      this.quickPopup.quickPopupHide(true);\n    }\n  };\n  /**\n   * Closes the tooltip.\n   * For example, when the context menu is opened for an event,\n   * the tooltip can be closed by calling this method.\n   *\n   * @function closeTooltip\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.closeTooltip = function () {\n    if (this.eventTooltip) {\n      this.eventTooltip.close();\n    }\n  };\n  /**\n   * Select the resource based on group index in mobile mode.\n   *\n   * @param {number} groupIndex Defines the resource index based on last level.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.selectResourceByIndex = function (groupIndex) {\n    if (this.resourceBase && this.uiStateValues.isGroupAdaptive) {\n      this.resourceBase.selectResourceByIndex(groupIndex);\n    }\n  };\n  /**\n   * Select the resources to the based on id.\n   *\n   * @param {string | number} id id of the resource defined in resources collection.\n   * @param {string} name Name of the resource defined in resources collection.\n   * @returns {number} Returns the group index\n   */\n\n\n  Schedule.prototype.getIndexFromResourceId = function (id, name) {\n    if (this.resourceBase) {\n      return this.resourceBase.getIndexFromResourceId(id, name);\n    }\n\n    return null;\n  };\n  /**\n   * Adds the resources to the specified index.\n   *\n   * @param {Object | Object[]} resources Accepts the resource data in single or collection of data.\n   * @param {string} name Name of the resource defined in resources collection.\n   * @param {number} index Index or position where the resource should be added.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.addResource = function (resources, name, index) {\n    this.resourceBase.addResource(resources, name, index);\n  };\n  /**\n   * Removes the specified resource.\n   *\n   * @param {string | string[] | number | number[]} resourceId Specifies the resource id to be removed.\n   * @param {string} name Specifies the resource name from which the id should be referred.\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.removeResource = function (resourceId, name) {\n    this.resourceBase.removeResource(resourceId, name);\n  };\n  /**\n   * Destroys the Schedule component.\n   *\n   * @function destroy\n   * @returns {void}\n   */\n\n\n  Schedule.prototype.destroy = function () {\n    if (this.eventTooltip) {\n      this.eventTooltip.destroy();\n      this.eventTooltip = null;\n    }\n\n    this.destroyPopups();\n    this.hideSpinner();\n    this.unWireEvents();\n    this.destroyHeaderModule();\n\n    if (this.eventBase) {\n      this.eventBase.destroy();\n      this.eventBase = null;\n    }\n\n    if (this.workCellAction) {\n      this.workCellAction.destroy();\n      this.workCellAction = null;\n    }\n\n    if (this.inlineModule) {\n      this.inlineModule.destroy();\n      this.inlineModule = null;\n    }\n\n    if (this.keyboardInteractionModule) {\n      this.keyboardInteractionModule.destroy();\n      this.keyboardInteractionModule = null;\n    }\n\n    if (this.scrollModule) {\n      this.scrollModule.destroy();\n      this.scrollModule = null;\n    }\n\n    if (this.printModule) {\n      this.printModule.destroy();\n    }\n\n    if (this.activeView) {\n      this.resetTemplates();\n      this.activeView.removeEventListener();\n      this.activeView.destroy();\n      this.activeView = null;\n    }\n\n    if (this.scheduleTouchModule) {\n      this.scheduleTouchModule.destroy();\n      this.scheduleTouchModule = null;\n    }\n\n    if (this.crudModule) {\n      this.crudModule.destroy();\n      this.crudModule = null;\n    }\n\n    if (this.dataModule) {\n      this.dataModule.destroy();\n      this.dataModule = null;\n    }\n\n    _super.prototype.destroy.call(this);\n\n    var modules = ['dayModule', 'weekModule', 'workWeekModule', 'monthModule', 'monthAgendaModule', 'yearModule', 'agendaModule', 'timelineViewsModule', 'timelineMonthModule', 'timelineYearModule', 'resizeModule', 'dragAndDropModule', 'excelExportModule', 'printModule', 'iCalendarExportModule', 'iCalendarImportModule', 'tzModule', 'eventsData', 'eventsProcessed', 'blockData', 'blockProcessed', 'uiStateValues', 'viewCollections', 'viewOptions', 'defaultLocale', 'localeObj', 'selectedElements', 'resourceCollection', 'editorTitles', 'eventFields', 'activeViewOptions', 'activeEventData', 'activeCellsData', 'renderModule'];\n\n    for (var _i = 0, modules_1 = modules; _i < modules_1.length; _i++) {\n      var module = modules_1[_i];\n      this[\"\" + module] = null;\n    }\n\n    removeChildren(this.element);\n    var removeClasses = [ROOT, RTL, DEVICE_CLASS, MULTI_DRAG];\n\n    if (this.cssClass) {\n      removeClasses = removeClasses.concat(this.cssClass.split(' '));\n    }\n\n    removeClass([this.element], removeClasses);\n  };\n\n  __decorate([Property('auto')], Schedule.prototype, \"width\", void 0);\n\n  __decorate([Property('auto')], Schedule.prototype, \"height\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"showHeaderBar\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"showTimeIndicator\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"allowSwiping\", void 0);\n\n  __decorate([Property('Week')], Schedule.prototype, \"currentView\", void 0);\n\n  __decorate([Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])], Schedule.prototype, \"views\", void 0);\n\n  __decorate([Property(new Date())], Schedule.prototype, \"selectedDate\", void 0);\n\n  __decorate([Property(new Date(1900, 0, 1))], Schedule.prototype, \"minDate\", void 0);\n\n  __decorate([Property(new Date(2099, 11, 31))], Schedule.prototype, \"maxDate\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"dateFormat\", void 0);\n\n  __decorate([Property('Gregorian')], Schedule.prototype, \"calendarMode\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"showWeekend\", void 0);\n\n  __decorate([Property(0)], Schedule.prototype, \"firstDayOfWeek\", void 0);\n\n  __decorate([Property('FirstDay')], Schedule.prototype, \"weekRule\", void 0);\n\n  __decorate([Property([1, 2, 3, 4, 5])], Schedule.prototype, \"workDays\", void 0);\n\n  __decorate([Property(12)], Schedule.prototype, \"monthsCount\", void 0);\n\n  __decorate([Property('00:00')], Schedule.prototype, \"startHour\", void 0);\n\n  __decorate([Property('24:00')], Schedule.prototype, \"endHour\", void 0);\n\n  __decorate([Property(null)], Schedule.prototype, \"timeFormat\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"enableAllDayScroll\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"enableAdaptiveUI\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"allowResizing\", void 0);\n\n  __decorate([Complex({}, WorkHours)], Schedule.prototype, \"workHours\", void 0);\n\n  __decorate([Complex({}, TimeScale)], Schedule.prototype, \"timeScale\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"allowDragAndDrop\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"dateRangeTemplate\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"cellHeaderTemplate\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"dayHeaderTemplate\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"monthHeaderTemplate\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"cellTemplate\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"readonly\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"showQuickInfo\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"allowInline\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"allowMultiCellSelection\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"allowMultiRowSelection\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"quickInfoOnSelectionEnd\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"showWeekNumber\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"rowAutoHeight\", void 0);\n\n  __decorate([Property(false)], Schedule.prototype, \"allowMultiDrag\", void 0);\n\n  __decorate([Property(0)], Schedule.prototype, \"firstMonthOfYear\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"editorTemplate\", void 0);\n\n  __decorate([Complex({}, QuickInfoTemplates)], Schedule.prototype, \"quickInfoTemplates\", void 0);\n\n  __decorate([Property(7)], Schedule.prototype, \"agendaDaysCount\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n\n  __decorate([Property(true)], Schedule.prototype, \"enableRecurrenceValidation\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"timezone\", void 0);\n\n  __decorate([Complex({}, EventSettings)], Schedule.prototype, \"eventSettings\", void 0);\n\n  __decorate([Property(timezoneData)], Schedule.prototype, \"timezoneDataSource\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"headerIndentTemplate\", void 0);\n\n  __decorate([Complex({}, Group)], Schedule.prototype, \"group\", void 0);\n\n  __decorate([Collection([], Resources)], Schedule.prototype, \"resources\", void 0);\n\n  __decorate([Collection([], HeaderRows)], Schedule.prototype, \"headerRows\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"cssClass\", void 0);\n\n  __decorate([Property()], Schedule.prototype, \"eventDragArea\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"created\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"destroyed\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"cellClick\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"cellDoubleClick\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"moreEventsClick\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"hover\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"select\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"actionBegin\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"actionComplete\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"actionFailure\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"navigating\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"renderCell\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"eventClick\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"eventRendered\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"dataBinding\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"popupOpen\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"popupClose\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"dragStart\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"drag\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"dragStop\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"resizeStart\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"resizing\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"resizeStop\", void 0);\n\n  __decorate([Event()], Schedule.prototype, \"dataBound\", void 0);\n\n  Schedule = __decorate([NotifyPropertyChanges], Schedule);\n  return Schedule;\n}(Component);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Base class for the common drag and resize related actions\n */\n\n\nvar ActionBase =\n/** @__PURE__ @class */\nfunction () {\n  function ActionBase(parent) {\n    this.daysVariation = 0;\n    this.parent = parent;\n    this.actionObj = {\n      X: 0,\n      Y: 0,\n      groupIndex: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      slotInterval: 0,\n      interval: 0,\n      actionIndex: 0,\n      cloneElement: [],\n      originalElement: [],\n      action: null,\n      isAllDay: null,\n      excludeSelectors: null,\n      index: 0,\n      navigationInterval: null,\n      scrollInterval: null\n    };\n    this.scrollArgs = {\n      element: null,\n      width: 0,\n      height: 0\n    };\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  }\n\n  ActionBase.prototype.getChangedData = function (multiData) {\n    var _this = this;\n\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n    eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n\n    if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n      eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var originalElement = this.getOriginalElement(this.actionObj.element);\n\n      if (originalElement) {\n        var indexCol_1 = originalElement.map(function (element) {\n          return parseInt(element.getAttribute('data-group-index'), 10);\n        });\n\n        if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || !isNullOrUndefined(multiData) && multiData.length > 0) {\n          var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n          indexCol_1 = indexCol_1.filter(function (index) {\n            return index !== cloneIndex_1;\n          });\n          indexCol_1.push(this.actionObj.groupIndex);\n\n          if (multiData && multiData.length > 0) {\n            multiData.forEach(function (data) {\n              _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n            });\n          } else {\n            this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n          }\n        }\n      }\n    }\n\n    return eventObj;\n  };\n\n  ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n    if (isMultiSelect === void 0) {\n      isMultiSelect = false;\n    }\n\n    this.parent.activeEventData.event = this.actionObj.event;\n    this.parent.currentAction = 'Save';\n    var currentAction;\n    var eventsCollection = [eventArgs.data];\n\n    if (isMultiSelect) {\n      eventsCollection = eventArgs.selectedData;\n    }\n\n    for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n      var eventObj = eventsCollection_1[_i];\n      var isSameResource = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n\n      if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] && +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n        this.parent.crudModule.crudObj.isCrudAction = false;\n        return;\n      }\n\n      if (eventObj[this.parent.eventFields.recurrenceRule]) {\n        var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n\n        if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n          eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n          currentAction = 'EditOccurrence';\n        }\n\n        if (this.parent.enableRecurrenceValidation && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n          return;\n        }\n      } else {\n        currentAction = null;\n      }\n\n      if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n        this.parent.eventBase.timezoneConvert(eventObj);\n      }\n\n      this.parent.crudModule.saveEvent(eventObj, currentAction);\n    }\n  };\n\n  ActionBase.prototype.calculateIntervalTime = function (date) {\n    var intervalTime = new Date(+date);\n    intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n    return intervalTime;\n  };\n\n  ActionBase.prototype.getContentAreaDimension = function () {\n    var viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var trElement = [].slice.call(viewElement.querySelector('tr').children);\n\n    if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {\n      trElement = this.getResourceElements(trElement);\n    }\n\n    var leftOffset = trElement[0].getBoundingClientRect();\n    var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n    var viewDimension = {\n      bottom: viewElement.scrollHeight - 5,\n      left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n      right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n      top: 0,\n      leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n      rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n    };\n    return viewDimension;\n  };\n\n  ActionBase.prototype.getIndex = function (index) {\n    var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n    var indexes = {\n      minIndex: 0,\n      maxIndex: contentElements.length - 1\n    };\n\n    if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n      var groupElements = this.getResourceElements(contentElements);\n      indexes.minIndex = groupElements[0].cellIndex;\n      indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n    }\n\n    if (index < indexes.minIndex) {\n      index = indexes.minIndex;\n    }\n\n    if (index > indexes.maxIndex) {\n      index = indexes.maxIndex;\n    }\n\n    return index;\n  };\n\n  ActionBase.prototype.updateTimePosition = function (date, multiData) {\n    var index = 0;\n\n    for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n      var cloneElement = _a[_i];\n      var timeElement = cloneElement.querySelector('.' + APPOINTMENT_TIME);\n\n      if (timeElement) {\n        var startTime = this.actionObj.start;\n        var endTime = this.actionObj.end;\n\n        if (multiData && multiData.length > 0) {\n          startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];\n          endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];\n        }\n\n        timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' + this.parent.getTimeString(endTime);\n      }\n\n      index++;\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      return;\n    }\n\n    var timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n\n    if (!timeIndicator) {\n      timeIndicator = createElement('div', {\n        className: CLONE_TIME_INDICATOR_CLASS\n      });\n      var wrapperClass = this.parent.activeView.isTimelineView() ? DATE_HEADER_WRAP_CLASS : TIME_CELLS_WRAP_CLASS;\n      this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n    }\n\n    timeIndicator.innerHTML = this.parent.getTimeString(date);\n    var offsetValue = 0;\n\n    if (this.parent.activeView.isTimelineView()) {\n      if (this.parent.enableRtl) {\n        var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? rightValue + this.actionObj.clone.offsetWidth : rightValue;\n        timeIndicator.style.right = formatUnit(offsetValue);\n      } else {\n        var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? leftValue : leftValue + this.actionObj.clone.offsetWidth;\n        timeIndicator.style.left = formatUnit(offsetValue);\n      }\n    } else {\n      offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n      timeIndicator.style.top = formatUnit(offsetValue);\n    }\n  };\n\n  ActionBase.prototype.getResourceElements = function (table) {\n    var _this = this;\n\n    return table.filter(function (element) {\n      return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n    });\n  };\n\n  ActionBase.prototype.getOriginalElement = function (element) {\n    var originalElement;\n    var guid = element.getAttribute('data-guid');\n    var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS);\n\n    if (isMorePopup || this.parent.activeView.isTimelineView() || this.actionObj.action !== 'resize' && this.parent.virtualScrollModule) {\n      originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n    } else {\n      var tr = closest(element, 'tr');\n\n      if (tr) {\n        originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n      }\n    }\n\n    return originalElement;\n  };\n\n  ActionBase.prototype.createCloneElement = function (element) {\n    var cloneWrapper = createElement('div', {\n      innerHTML: element.outerHTML\n    });\n    var cloneElement = cloneWrapper.children[0];\n    var cloneClassLists = [CLONE_ELEMENT_CLASS];\n    cloneClassLists.push(this.actionObj.action === 'drag' ? DRAG_CLONE_CLASS : RESIZE_CLONE_CLASS);\n\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      cloneClassLists.push(MONTH_CLONE_ELEMENT_CLASS);\n    }\n\n    addClass([cloneElement], cloneClassLists);\n    addClass([element], EVENT_ACTION_CLASS);\n\n    if (!isNullOrUndefined(element.parentElement)) {\n      element.parentElement.appendChild(cloneElement);\n    }\n\n    cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n\n    if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n      dragElement.appendChild(cloneElement);\n    }\n\n    setStyleAttribute(cloneElement, {\n      border: '0px'\n    });\n    return cloneElement;\n  };\n\n  ActionBase.prototype.removeCloneElementClasses = function () {\n    var elements = this.actionObj.originalElement;\n\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' || this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + EVENT_ACTION_CLASS));\n    }\n\n    removeClass(elements, EVENT_ACTION_CLASS);\n  };\n\n  ActionBase.prototype.removeCloneElement = function () {\n    this.actionObj.originalElement = [];\n    var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n\n    for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n      var cloneEle = dynamicEle_1[_i];\n      remove(cloneEle);\n    }\n\n    for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n      var cloneElement = _b[_a];\n\n      if (!isNullOrUndefined(cloneElement.parentNode)) {\n        remove(cloneElement);\n      }\n    }\n\n    this.actionObj.cloneElement = [];\n    var timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n\n    if (timeIndicator) {\n      remove(timeIndicator);\n    }\n  };\n\n  ActionBase.prototype.getCursorElement = function (e) {\n    var pages = this.parent.eventBase.getPageCoordinates(e);\n    return document.elementFromPoint(pages.clientX, pages.clientY);\n  };\n\n  ActionBase.prototype.autoScroll = function () {\n    var parent = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n    var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n    var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n    var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n\n    if (this.actionObj.action === 'resize' && this.scrollEdges.right && parent.scrollLeft + parent.offsetWidth > parent.scrollWidth) {\n      var tdCollections = [].slice.call(this.parent.getContentTable().querySelector('tr').children).length - 1;\n      var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + this.actionObj.clone.offsetWidth) / this.actionObj.cellWidth);\n      xInBounds = cellIndex === tdCollections;\n    }\n\n    if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n      parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n          this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n\n    if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n      parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n          this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n  };\n\n  ActionBase.prototype.autoScrollValidation = function () {\n    if (!this.actionObj.scroll.enable) {\n      return false;\n    }\n\n    var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n    this.scrollEdges = res;\n    return res.bottom || res.top || res.left || res.right;\n  };\n\n  ActionBase.prototype.actionClass = function (type) {\n    if (type === 'addClass') {\n      addClass([this.parent.element], EVENT_ACTION_CLASS);\n    } else {\n      removeClass([this.parent.element], EVENT_ACTION_CLASS);\n    }\n  };\n\n  ActionBase.prototype.updateScrollPosition = function (e) {\n    var _this = this;\n\n    this.scrollEventArgs = e;\n\n    if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n      this.actionObj.scrollInterval = window.setInterval(function () {\n        if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n          if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0 && _this.actionObj.groupIndex < 0) {\n            return;\n          }\n\n          _this.autoScroll();\n\n          if (_this.actionObj.action === 'drag') {\n            _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);\n          } else {\n            _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);\n          }\n        }\n      }, this.actionObj.scroll.timeDelay);\n    }\n  };\n\n  ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n    var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n    }\n\n    var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n    addClass(elements, EVENT_ACTION_CLASS);\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n    removeClass(eventWrappers, EVENT_ACTION_CLASS);\n  };\n\n  ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n    var event = JSON.parse(JSON.stringify(eventObj));\n    event[this.parent.eventFields.startTime] = startTime;\n    event[this.parent.eventFields.endTime] = endTime;\n    return event;\n  };\n\n  ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n    if (isResize === void 0) {\n      isResize = false;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventDragArea)) {\n      return;\n    }\n\n    var appWidth = this.actionObj.cellWidth - 7;\n\n    if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n      appWidth = this.actionObj.cellWidth * event.count;\n    }\n\n    if (!isResize && this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0) {\n      var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n\n      if (eventObj[this.parent.eventFields.startTime].getTime() === eventObj[this.parent.eventFields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n\n      appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n    }\n\n    if (!isResize && this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length !== 0) {\n      var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n      appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n    }\n\n    var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n    appointmentElement.setAttribute('drag', 'true');\n    addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n    setStyleAttribute(appointmentElement, {\n      'width': appWidth + 'px',\n      'border': '0px',\n      'pointer-events': 'none',\n      'position': 'absolute',\n      'overflow': 'hidden',\n      'padding': '3px'\n    });\n\n    if (this.actionObj.clone.style.backgroundColor !== '') {\n      setStyleAttribute(appointmentElement, {\n        'backgroundColor': this.actionObj.clone.style.backgroundColor\n      });\n    }\n\n    var date = resetTime(event[this.parent.eventFields.startTime]).getTime();\n    var query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n    }\n\n    var cellTd = this.parent.element.querySelector(query);\n\n    if (isNullOrUndefined(cellTd)) {\n      return;\n    }\n\n    if (isResize) {\n      var dateHeader = cellTd.querySelector('.' + DATE_HEADER_CLASS);\n      var appHeight = this.actionObj.cellHeight * event.count - (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n\n      if (this.resizeEdges.right || this.resizeEdges.left) {\n        appHeight = parseInt(this.actionObj.clone.style.height, 10);\n      }\n\n      setStyleAttribute(appointmentElement, {\n        'height': appHeight + 'px'\n      });\n    }\n\n    this.renderDynamicElement(cellTd, appointmentElement, true);\n    this.actionObj.cloneElement.push(appointmentElement);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n    if (isAppointment === void 0) {\n      isAppointment = false;\n    }\n\n    if (cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS)) {\n      cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n    } else {\n      var wrapper = createElement('div', {\n        className: APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(element);\n      cellTd.appendChild(wrapper);\n    }\n  };\n\n  ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n    var appointmentWrapper = createElement('div', {\n      className: APPOINTMENT_CLASS,\n      innerHTML: innerText\n    });\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n\n    return appointmentWrapper;\n  };\n\n  ActionBase.prototype.dynamicEventsRendering = function (event) {\n    var _this = this;\n\n    if (!isNullOrUndefined(this.parent.eventDragArea)) {\n      return;\n    }\n\n    var dateRender = this.parent.activeView.renderDates;\n    var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n    var workDays = this.parent.activeViewOptions.workDays;\n    var groupOrder;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n      var resources = renderedResource.filter(function (res) {\n        return res.groupIndex === _this.actionObj.groupIndex;\n      });\n      dateRender = resources[0].renderDates;\n      var elementSelector = \".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n      workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n      workDays = resources[0].workDays;\n      groupOrder = resources[0].groupOrder;\n    }\n\n    this.monthEvent.dateRender = dateRender;\n    this.monthEvent.getSlotDates(workDays);\n\n    if (this.resizeEdges.left || this.resizeEdges.right) {\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n\n      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n        var wrapper = eventWrappers_1[_i];\n        remove(wrapper);\n      }\n    }\n\n    var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n\n    for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n      var event_1 = spannedEvents_1[_a];\n      var day = this.parent.getIndexOfDate(dateRender, resetTime(event_1[this.monthEvent.fields.startTime]));\n      var diffInDays = event_1.data.count;\n      var appWidth = diffInDays * this.actionObj.cellWidth - 7;\n      var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n      appointmentElement.setAttribute('drag', 'true');\n      addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n      this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n      setStyleAttribute(appointmentElement, {\n        'width': appWidth + 'px',\n        'border': '0px',\n        'pointer-events': 'none'\n      });\n      var cellTd = workCells[parseInt(day.toString(), 10)];\n\n      if (cellTd) {\n        this.monthEvent.renderElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n      }\n    }\n  };\n\n  ActionBase.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.actionObj = {};\n    this.scrollArgs = {};\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  };\n\n  return ActionBase;\n}();\n\nvar __extends$14 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Schedule events resize actions\n */\n\n\nvar Resize =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$14(Resize, _super);\n\n  function Resize() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Resize.prototype.wireResizeEvent = function (element) {\n    var resizeElement = [].slice.call(element.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n\n    for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {\n      var element_1 = resizeElement_1[_i];\n      EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);\n    }\n  };\n\n  Resize.prototype.resizeHelper = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n      for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n        var cloneElement = this.createCloneElement(this.actionObj.originalElement[parseInt(i.toString(), 10)]);\n        this.actionObj.cloneElement[parseInt(i.toString(), 10)] = cloneElement;\n\n        if (this.actionObj.element === this.actionObj.originalElement[parseInt(i.toString(), 10)]) {\n          this.actionObj.clone = cloneElement;\n        }\n      }\n    } else {\n      if (this.actionObj.element) {\n        this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n      }\n\n      this.actionObj.cloneElement = [this.actionObj.clone];\n      this.actionObj.originalElement = [this.actionObj.element];\n    }\n  };\n\n  Resize.prototype.resizeStart = function (e) {\n    var _this = this;\n\n    this.actionObj.action = 'resize';\n    this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    this.actionObj.interval = this.actionObj.slotInterval;\n    var resizeTarget = closest(e.target, '.' + EVENT_RESIZE_CLASS);\n    this.actionObj.element = closest(resizeTarget, '.' + APPOINTMENT_CLASS);\n    this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var resizeArgs = {\n      cancel: false,\n      data: eventObj,\n      element: this.actionObj.element,\n      event: e,\n      interval: this.actionObj.interval,\n      scroll: {\n        enable: true,\n        scrollBy: 30,\n        timeDelay: 100\n      }\n    };\n    this.parent.trigger(resizeStart, resizeArgs, function (resizeEventArgs) {\n      if (resizeEventArgs.cancel) {\n        return;\n      }\n\n      _this.actionClass('addClass');\n\n      _this.parent.uiStateValues.action = true;\n      _this.resizeEdges = {\n        left: resizeTarget.classList.contains(LEFT_RESIZE_HANDLER),\n        right: resizeTarget.classList.contains(RIGHT_RESIZE_HANDLER),\n        top: resizeTarget.classList.contains(TOP_RESIZE_HANDLER),\n        bottom: resizeTarget.classList.contains(BOTTOM_RESIZE_HANDLER)\n      };\n      _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n\n      var workCell = _this.parent.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect();\n\n      _this.actionObj.cellWidth = workCell.width;\n      _this.actionObj.cellHeight = workCell.height;\n\n      var hRows = _this.parent.activeViewOptions.headerRows.map(function (row) {\n        return row.option;\n      });\n\n      if (_this.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n        var tr = _this.parent.getContentTable().querySelector('tr');\n\n        var noOfDays = 0;\n        var tdCollections = [].slice.call(tr.children);\n\n        for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {\n          var td = tdCollections_1[_i];\n          noOfDays += parseInt(td.getAttribute('colspan'), 10);\n        }\n\n        var trRect = tr.getBoundingClientRect();\n        _this.actionObj.cellWidth = trRect.width / noOfDays;\n        _this.actionObj.cellHeight = trRect.height;\n      }\n\n      var pages = _this.parent.eventBase.getPageCoordinates(e);\n\n      _this.actionObj.X = pages.pageX;\n      _this.actionObj.Y = pages.pageY;\n      _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n      _this.actionObj.interval = resizeEventArgs.interval;\n      _this.actionObj.scroll = resizeEventArgs.scroll;\n      _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n      _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n      _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n\n      if (_this.parent.currentView === 'Month') {\n        _this.daysVariation = -1;\n        _this.monthEvent = new MonthEvent(_this.parent);\n      }\n\n      var viewElement = _this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      _this.scrollArgs = {\n        element: viewElement,\n        width: viewElement.scrollWidth,\n        height: viewElement.scrollHeight\n      };\n      EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n      EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n    });\n  };\n\n  Resize.prototype.resizing = function (e) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    if (this.parent.element.querySelectorAll('.' + RESIZE_CLONE_CLASS).length === 0) {\n      this.resizeHelper();\n    }\n\n    if (!isNullOrUndefined(e.target) && e.target.classList.contains(DISABLE_DATES)) {\n      return;\n    }\n\n    var pages = this.parent.eventBase.getPageCoordinates(e);\n\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n      var doc = document.documentElement;\n      var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var top_1 = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      this.actionObj.pageX = pages.pageX - left;\n      this.actionObj.pageY = pages.pageY - top_1;\n    } else {\n      this.actionObj.pageX = pages.pageX;\n      this.actionObj.pageY = pages.pageY;\n    }\n\n    this.updateScrollPosition(e);\n    this.updateResizingDirection(e);\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var resizeArgs = {\n      cancel: false,\n      data: eventObj,\n      element: this.actionObj.element,\n      event: e,\n      startTime: this.actionObj.start,\n      endTime: this.actionObj.end\n    };\n\n    if (this.parent.group.resources.length > 0) {\n      resizeArgs.groupIndex = this.actionObj.groupIndex;\n    }\n\n    this.parent.trigger(resizing, resizeArgs);\n  };\n\n  Resize.prototype.updateResizingDirection = function (e) {\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n      this.monthResizing();\n      return;\n    }\n\n    var resizeValidation = this.resizeValidation(e);\n\n    if (this.resizeEdges.left) {\n      if (resizeValidation) {\n        var leftStyles = this.getLeftRightStyles(e, true);\n\n        if (parseInt(leftStyles.width, 10) < 1) {\n          return;\n        }\n\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n          var cloneElement = _a[_i];\n          setStyleAttribute(cloneElement, leftStyles);\n          addClass([cloneElement], LEFT_RESIZE_HANDLER);\n        }\n      }\n\n      this.horizontalResizing(!this.parent.enableRtl);\n    }\n\n    if (this.resizeEdges.right) {\n      if (resizeValidation) {\n        var rightStyles = this.getLeftRightStyles(e, false);\n\n        if (parseInt(rightStyles.width, 10) < 1) {\n          return;\n        }\n\n        for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n          var cloneElement = _c[_b];\n          setStyleAttribute(cloneElement, rightStyles);\n          addClass([cloneElement], RIGHT_RESIZE_HANDLER);\n        }\n      }\n\n      this.horizontalResizing(this.parent.enableRtl);\n    }\n\n    if (this.resizeEdges.top) {\n      if (resizeValidation) {\n        var topStyles = this.getTopBottomStyles(e, true);\n\n        if (parseInt(topStyles.height, 10) < 1) {\n          return;\n        }\n\n        for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n          var cloneElement = _e[_d];\n          setStyleAttribute(cloneElement, topStyles);\n          addClass([cloneElement], TOP_RESIZE_HANDLER);\n        }\n      }\n\n      this.verticalResizing(true);\n    }\n\n    if (this.resizeEdges.bottom) {\n      if (resizeValidation) {\n        var bottomStyles = this.getTopBottomStyles(e, false);\n\n        if (parseInt(bottomStyles.height, 10) < 1) {\n          return;\n        }\n\n        for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n          var cloneElement = _g[_f];\n          setStyleAttribute(cloneElement, bottomStyles);\n          addClass([cloneElement], BOTTOM_RESIZE_HANDLER);\n        }\n      }\n\n      this.verticalResizing(false);\n    }\n  };\n\n  Resize.prototype.monthResizing = function () {\n    this.removeCloneElement();\n\n    if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {\n      return;\n    }\n\n    var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n\n    if (isNullOrUndefined(td)) {\n      return;\n    }\n\n    var resizeTime = this.parent.getDateFromElement(td);\n    var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n    var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n    var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n\n    if (!this.parent.enableRtl && this.resizeEdges.left || this.parent.enableRtl && this.resizeEdges.right || this.resizeEdges.top) {\n      startTime = resizeTime;\n    } else if (!this.parent.enableRtl && this.resizeEdges.right || this.parent.enableRtl && this.resizeEdges.left || this.resizeEdges.bottom) {\n      endTime = addDays(resizeTime, 1);\n    }\n\n    if (isSameCell && startTime < endTime) {\n      this.actionObj.start = startTime;\n      this.actionObj.end = endTime;\n      var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n\n      if (this.parent.currentView === 'TimelineYear') {\n        this.yearEventsRendering(event_1);\n      } else {\n        this.dynamicEventsRendering(event_1);\n      }\n\n      this.updateOriginalElement(this.actionObj.clone);\n    }\n  };\n\n  Resize.prototype.yearEventsRendering = function (event) {\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n\n    var endDate = new Date(event[this.parent.eventFields.endTime]);\n    var monthDiff = 0;\n\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], addDays(endDate, -1));\n    }\n\n    for (var i = 0; i <= monthDiff; i++) {\n      var eventObj = void 0;\n\n      if (this.parent.activeViewOptions.group.resources.length === 0) {\n        eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n      } else {\n        eventObj = extend({}, event, null, true);\n        endDate = this.resizeEdges.left || this.resizeEdges.right ? addDays(endDate, -1) : endDate;\n        eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n      }\n\n      this.dynamicYearlyEventsRendering(eventObj, true);\n    }\n  };\n\n  Resize.prototype.getMonthDiff = function (startDate, endDate) {\n    var months;\n    months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n    months -= startDate.getMonth();\n    months += endDate.getMonth();\n    return months <= 0 ? 0 : months;\n  };\n\n  Resize.prototype.getEventCount = function (eventObj, month) {\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.parent.eventFields.startTime];\n    var eventEnd = eventData[this.parent.eventFields.endTime];\n    var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n    var monthEnd = addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n    var count = 1;\n\n    if (eventStart.getTime() < monthStart.getTime()) {\n      eventData[this.parent.eventFields.startTime] = monthStart;\n    }\n\n    if (eventEnd.getTime() > monthEnd.getTime()) {\n      eventData[this.parent.eventFields.endTime] = monthEnd;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() - eventData[this.parent.eventFields.startTime].getTime()) / MS_PER_DAY);\n    }\n\n    eventData.count = count;\n    return eventData;\n  };\n\n  Resize.prototype.resizeStop = function (e) {\n    var _this = this;\n\n    EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n    clearInterval(this.actionObj.scrollInterval);\n    this.actionObj.scrollInterval = null;\n    this.removeCloneElementClasses();\n    this.removeCloneElement();\n    this.actionClass('removeClass');\n    this.parent.uiStateValues.action = false;\n    var resizeArgs = {\n      cancel: false,\n      data: this.getChangedData(),\n      element: this.actionObj.element,\n      event: e\n    };\n    this.parent.trigger(resizeStop, resizeArgs, function (resizeEventArgs) {\n      if (resizeEventArgs.cancel) {\n        return;\n      }\n\n      if (_this.parent.isSpecificResourceEvents()) {\n        _this.parent.crudModule.crudObj.sourceEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n        _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;\n        _this.parent.crudModule.crudObj.isCrudAction = true;\n      }\n\n      _this.saveChangedData(resizeEventArgs);\n    });\n  };\n\n  Resize.prototype.verticalResizing = function (isTop) {\n    var offsetValue = this.actionObj.clone.offsetTop;\n\n    if (!isTop) {\n      offsetValue += this.actionObj.clone.offsetHeight;\n    }\n\n    var minutes = offsetValue / this.actionObj.cellHeight * this.actionObj.slotInterval;\n    var element = this.actionObj.clone.offsetParent;\n\n    if (isNullOrUndefined(element)) {\n      return;\n    }\n\n    var resizeTime = resetTime(this.parent.getDateFromElement(element));\n    resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n    resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n\n    if (isTop) {\n      this.actionObj.start = this.calculateIntervalTime(resizeTime);\n    } else {\n      this.actionObj.end = this.calculateIntervalTime(resizeTime);\n    }\n\n    this.updateTimePosition(resizeTime);\n  };\n\n  Resize.prototype.horizontalResizing = function (isLeft) {\n    var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n    var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n    var resizeTime;\n    var isDateHeader = false;\n    var headerName = this.parent.currentView;\n    var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1;\n    var isTimelineMonth = this.parent.currentView === 'TimelineMonth';\n    var isWithoutScale = isTimelineMonth || isTimeViews && !this.parent.activeViewOptions.timeScale.enable;\n\n    if (this.parent.activeView.isTimelineView()) {\n      var tr = this.parent.getContentTable().querySelector('tr');\n\n      if (this.parent.activeViewOptions.headerRows.length > 0) {\n        var rows = this.parent.activeViewOptions.headerRows.map(function (row) {\n          return row.option;\n        });\n        headerName = rows.slice(-1)[0];\n\n        if (isTimelineMonth && headerName === 'Hour') {\n          headerName = rows.slice(-2)[0] || 'Month';\n        }\n      }\n\n      resizeTime = isLeft ? eventStart : eventEnd;\n      var cellIndex = 0;\n      var tdCollections = [].slice.call(tr.children);\n      var isLastCell = false;\n      var pixelsPerMinute = this.actionObj.cellWidth / (this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount);\n      var offset = parseFloat(this.parent.enableRtl ? this.actionObj.clone.style.right : this.actionObj.clone.style.left);\n      offset = Math.round(offset / pixelsPerMinute) * pixelsPerMinute;\n\n      if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n        var noOfDays = 0;\n\n        for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {\n          var td = tdCollections_2[_i];\n          noOfDays += parseInt(td.getAttribute('colspan'), 10);\n        }\n\n        var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) : parseInt(this.actionObj.clone.style.left, 10);\n        offsetValue = Math.round(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n        if (!isLeft) {\n          offsetValue += this.actionObj.clone.getBoundingClientRect().width - this.actionObj.cellWidth;\n        }\n\n        cellIndex = Math.floor(offsetValue / Math.floor(tr.getBoundingClientRect().width / noOfDays));\n        isDateHeader = isTimeViews && headerName === 'Date';\n        cellIndex = isLeft ? cellIndex : isTimelineMonth ? cellIndex + 1 : cellIndex;\n        isLastCell = cellIndex === tdCollections.length;\n        cellIndex = cellIndex < 0 ? 0 : cellIndex >= noOfDays ? noOfDays - 1 : cellIndex;\n      } else {\n        var cellWidth = this.actionObj.cellWidth;\n        cellIndex = isLeft ? Math.floor(offset / this.actionObj.cellWidth) : Math.ceil((offset + (this.actionObj.clone.getBoundingClientRect().width - cellWidth)) / this.actionObj.cellWidth);\n\n        if (this.parent.enableRtl) {\n          var cellOffsetWidth = 0;\n\n          if (headerName === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable && !isTimelineMonth) {\n            cellOffsetWidth = this.actionObj.cellWidth;\n          }\n\n          var offsetWidth = Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth + (isLeft ? 0 : this.actionObj.clone.getBoundingClientRect().width - cellOffsetWidth);\n          cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n        }\n\n        isLastCell = cellIndex === tdCollections.length;\n        cellIndex = this.getIndex(cellIndex);\n      }\n\n      var resizeDate = void 0;\n\n      if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n        resizeDate = new Date(this.parent.activeView.renderDates[parseInt(cellIndex.toString(), 10)].getTime());\n      } else {\n        resizeDate = this.parent.getDateFromElement(tr.children[parseInt(cellIndex.toString(), 10)]);\n      }\n\n      if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 || !this.parent.activeViewOptions.timeScale.enable) {\n        resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n      } else {\n        if (!isLeft) {\n          offset += this.actionObj.clone.getBoundingClientRect().width;\n        }\n\n        var spanMinutes = Math.ceil(this.actionObj.slotInterval / this.actionObj.cellWidth * (offset - Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n        spanMinutes = isLastCell || !isLeft && spanMinutes === 0 ? this.actionObj.slotInterval : spanMinutes;\n        resizeTime = new Date(resizeDate.getTime());\n        resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n        this.updateTimePosition(resizeTime);\n      }\n    } else {\n      var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n      var originalWidth = Math.ceil((isLeft ? this.actionObj.element.getBoundingClientRect().width : 0) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n      var noOfDays = Math.ceil((this.actionObj.clone.getBoundingClientRect().width - originalWidth) / this.actionObj.cellWidth);\n      var tr = closest(this.actionObj.clone, 'tr');\n      var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n      dayIndex = this.getIndex(dayIndex);\n      resizeTime = this.parent.getDateFromElement(tr.children[parseInt(dayIndex.toString(), 10)]);\n\n      if (isLeft) {\n        resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n      } else {\n        resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n      }\n    }\n\n    var isNotHourSlot = ['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 || !this.parent.activeViewOptions.timeScale.enable;\n\n    if (isLeft) {\n      if (eventEnd.getTime() - resizeTime.getTime() <= 0) {\n        resizeTime = isWithoutScale ? resetTime(eventEnd) : eventStart;\n      }\n\n      this.actionObj.start = !isNotHourSlot ? this.calculateIntervalTime(resizeTime) : resizeTime;\n    } else {\n      var isTimeScaleViews = isTimeViews && this.parent.activeViewOptions.timeScale.enable;\n      var resizeEnd = (!isTimeScaleViews || isDateHeader || isTimeViews && ['Week', 'Month', 'Year'].indexOf(headerName) > -1) && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0 ? addDays(resizeTime, 1) : resizeTime;\n\n      if (isWithoutScale && resizeEnd.getTime() - eventStart.getTime() <= 0) {\n        resizeEnd = addDays(resetTime(eventStart), 1);\n      }\n\n      this.actionObj.end = !isNotHourSlot ? this.calculateIntervalTime(resizeEnd) : resizeEnd;\n    }\n  };\n\n  Resize.prototype.getTopBottomStyles = function (e, isTop) {\n    var viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var slotInterval = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;\n    var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n    var clnTop = isTop ? this.actionObj.element.offsetTop - (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n    clnHeight = clnTop < 0 ? this.actionObj.clone.offsetHeight : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight > this.scrollArgs.height ? this.actionObj.clone.offsetHeight : clnHeight;\n    clnTop = clnTop < 0 ? 0 : clnTop;\n    clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n    clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop : Math.ceil(clnHeight / slotInterval) * slotInterval;\n\n    if (!isTop && this.actionObj.clone.offsetTop + clnHeight >= this.parent.getContentTable().offsetHeight) {\n      clnHeight = this.parent.getContentTable().offsetHeight - this.actionObj.clone.offsetTop;\n    }\n\n    var styles = {\n      height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n      top: formatUnit(clnHeight < this.actionObj.cellHeight && isTop ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n      left: '0px',\n      right: '0px',\n      width: '100%'\n    };\n    return styles;\n  };\n\n  Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n    var styles = {};\n    var isTimelineView = this.parent.activeView.isTimelineView();\n    var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 && this.parent.activeViewOptions.timeScale.enable;\n    var slotInterval = this.actionObj.cellWidth / this.actionObj.slotInterval * this.actionObj.interval;\n    var pageWidth = isLeft ? this.actionObj.X - this.actionObj.pageX : this.actionObj.pageX - this.actionObj.X;\n    var targetWidth = isTimelineView ? this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth * this.actionObj.cellWidth : this.parent.currentView === 'Month' ? this.actionObj.element.getBoundingClientRect().width : Math.ceil(this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n    var offsetWidth = targetWidth + Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n    var left = this.parent.enableRtl ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n\n    if (isTimeViews) {\n      offsetWidth = targetWidth + Math.ceil(pageWidth / slotInterval) * slotInterval;\n      offsetWidth = Math.round((left + offsetWidth) / slotInterval) * slotInterval - left;\n      this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n    }\n\n    var width = !isLeft && offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : offsetWidth < this.actionObj.cellWidth ? offsetWidth : offsetWidth;\n\n    if (this.parent.enableRtl) {\n      var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) : -(offsetWidth - this.actionObj.cellWidth);\n      rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n\n      if (isTimelineView && !isLeft) {\n        rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.getBoundingClientRect().width + (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n        rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n      }\n\n      rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n      styles.right = formatUnit(rightValue);\n      width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : width;\n    } else {\n      var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) : this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n\n      if (isTimelineView) {\n        offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n\n        if (this.parent.enableRtl) {\n          offsetLeft = !isLeft ? this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.getBoundingClientRect().width ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n        } else {\n          offsetLeft = isLeft ? this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.getBoundingClientRect().width && this.actionObj.clone.getBoundingClientRect().width === this.actionObj.cellWidth ? parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n        }\n      }\n\n      var leftValue = offsetLeft;\n      offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft : Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth : Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n      if (offsetLeft < 0) {\n        offsetLeft = 0;\n        width = this.actionObj.clone.getBoundingClientRect().width;\n      }\n\n      var cloneWidth = Math.ceil(this.actionObj.clone.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n      if (isLeft) {\n        styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft : Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth : offsetLeft);\n      }\n    }\n\n    styles.width = formatUnit(width);\n    return styles;\n  };\n\n  Resize.prototype.resizeValidation = function (e) {\n    var pages = this.parent.eventBase.getPageCoordinates(e);\n    var viewDimension = this.getContentAreaDimension();\n    var isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;\n    var cellWidth = this.actionObj.cellWidth;\n    var resizeValidation = false;\n\n    if (this.resizeEdges.left) {\n      if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {\n        cellWidth = 0;\n      }\n\n      resizeValidation = pages.pageX - cellWidth >= viewDimension.left;\n    }\n\n    if (this.resizeEdges.right) {\n      if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {\n        cellWidth = 0;\n      }\n\n      resizeValidation = pages.pageX + cellWidth <= viewDimension.right;\n    }\n\n    if (this.resizeEdges.top) {\n      resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n    }\n\n    if (this.resizeEdges.bottom) {\n      resizeValidation = this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight <= this.scrollArgs.height;\n    }\n\n    return resizeValidation;\n  };\n  /**\n   * Get module name\n   *\n   * @returns {string} Returns the module name..\n   */\n\n\n  Resize.prototype.getModuleName = function () {\n    return 'resize';\n  };\n\n  return Resize;\n}(ActionBase);\n\nvar __extends$16 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar EVENT_GAP$2 = 2;\n/**\n * Year view events render\n */\n\nvar YearEvent =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$16(YearEvent, _super);\n\n  function YearEvent(parent) {\n    var _this = _super.call(this, parent, 'day') || this;\n\n    _this.isResource = false;\n    return _this;\n  }\n\n  YearEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n\n    this.fields = this.parent.eventFields;\n    var elementSelector = this.parent.currentView === 'Year' ? '.' + APPOINTMENT_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS + ',.' + MORE_INDICATOR_CLASS;\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n\n    this.renderedEvents = [];\n\n    if (this.parent.currentView === 'Year') {\n      this.yearViewEvents();\n    } else {\n      this.removeCellHeight();\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.isResource = true;\n        this.timelineResourceEvents();\n      } else {\n        this.timelineYearViewEvents();\n      }\n    }\n\n    this.parent.renderTemplates();\n    this.parent.notify(contentReady, {});\n  };\n\n  YearEvent.prototype.yearViewEvents = function () {\n    var months = this.getMonths();\n\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n      var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var startDate = getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n      var endDate = addDays(getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n\n      for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n        var start = resetTime(new Date(startDate.getTime()));\n        var end = addDays(new Date(start.getTime()), 1);\n        startDate = addDays(new Date(startDate.getTime()), 1);\n\n        if (!this.parent.isMinMaxDate(start)) {\n          continue;\n        }\n\n        var filterEvents = this.parent.eventBase.filterEvents(start, end);\n\n        if (filterEvents.length > 0) {\n          var workCell = workCells[parseInt(index.toString(), 10)];\n\n          if (workCell) {\n            workCell.appendChild(createElement('div', {\n              className: APPOINTMENT_CLASS\n            }));\n          }\n        }\n      }\n    }\n  };\n\n  YearEvent.prototype.timelineYearViewEvents = function () {\n    var _this = this;\n\n    var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')');\n    this.cellWidth = workCell.getBoundingClientRect().width;\n    this.cellHeader = getOuterHeight(workCell.querySelector('.' + DATE_HEADER_CLASS));\n    var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n    this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n    var months = this.getMonths();\n    var groupIndex = this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : undefined;\n\n    for (var row = 0; row < months.length; row++) {\n      var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n      var td = row + 1;\n      var eventWrapper = createElement('div', {\n        className: APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n      var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n      var dayIndex = monthStart.getDay();\n      var isSpannedCollection = [];\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        this.renderedEvents = [];\n      }\n\n      while (monthStart.getTime() <= monthEnd.getTime()) {\n        var leftValue = void 0;\n        var rightValue = void 0;\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n          td = dayIndex + 1;\n          eventWrapper = wrapper_1.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n          if (!eventWrapper) {\n            eventWrapper = createElement('div', {\n              className: APPOINTMENT_WRAPPER_CLASS\n            });\n            wrapper_1.appendChild(eventWrapper);\n          }\n\n          if (this.parent.enableRtl) {\n            rightValue = row * this.cellWidth;\n          } else {\n            leftValue = row * this.cellWidth;\n          }\n        } else {\n          if (this.parent.enableRtl) {\n            rightValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          } else {\n            leftValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          }\n        }\n\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n        this.cellHeight = rowTd.offsetHeight;\n        var dayStart = resetTime(new Date(monthStart.getTime()));\n        var dayEnd = addDays(new Date(dayStart.getTime()), 1);\n        var resource = void 0;\n\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        }\n\n        var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n        dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n\n        var _loop_1 = function (index, count) {\n          var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n          this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n          var overlapIndex = this_1.getIndex(dayStart);\n          eventData.Index = overlapIndex;\n          var availedHeight = this_1.cellHeader + this_1.eventHeight * (overlapIndex + 1) + EVENT_GAP$2 + this_1.moreIndicatorHeight;\n          var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n          var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP$2));\n          var moreIndicatorCount = count - renderedAppCount <= 0 ? 1 : count - renderedAppCount;\n\n          if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n            var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            var isSpanned = isSpannedCollection.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n\n            if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n              var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n              this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n              return \"continue\";\n            } else if (isRendered.length > 0 || isSpanned.length > 0) {\n              return \"continue\";\n            }\n          }\n\n          if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {\n            this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n            this_1.updateCellHeight(rowTd, availedHeight);\n            isSpannedCollection.push(eventData);\n          } else {\n            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n\n            if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n              eventData.MoreIndicator = true;\n              this_1.renderedEvents.push(eventData);\n              isSpannedCollection.push(eventData);\n            }\n          }\n        };\n\n        var this_1 = this;\n\n        for (var index = 0, count = dayEvents.length; index < count; index++) {\n          _loop_1(index, count);\n        }\n\n        monthStart = addDays(new Date(monthStart.getTime()), 1);\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          dayIndex++;\n          this.renderedEvents = [];\n        }\n      }\n    }\n\n    if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n      var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n      var tr_1 = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr'));\n      appContainer.forEach(function (ele, index) {\n        var app = [].slice.call(ele.querySelectorAll('.' + APPOINTMENT_CLASS));\n        var appTop = tr_1[parseInt(index.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP$2;\n        app.forEach(function (app) {\n          var overlap = parseInt(app.getAttribute('data-index'), 10);\n          app.style.top = appTop + overlap * _this.eventHeight + 'px';\n          app.removeAttribute('data-index');\n        });\n      });\n    }\n  };\n\n  YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n    var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n    var data = {\n      isLeft: true,\n      isRight: true,\n      isBottom: true,\n      isTop: true\n    };\n\n    if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isLeft = false;\n      } else {\n        data.isTop = false;\n      }\n    }\n\n    if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth() || isLeftRightResize && this.isResource && dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isRight = false;\n      } else {\n        data.isBottom = false;\n      }\n    }\n\n    eventObj.data = data;\n  };\n\n  YearEvent.prototype.timelineResourceEvents = function () {\n    var _this = this;\n\n    var contentTable = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;\n    var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n    this.cellWidth = workCell.getBoundingClientRect().width;\n    this.cellHeader = 0;\n    var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n    this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n    var months = this.getMonths();\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      for (var month = 0; month < months.length; month++) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n\n        for (var i = 0, len = resources.length; i < len; i++) {\n          this.renderedEvents = [];\n          this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    } else {\n      for (var i = 0, len = resources.length; i < len; i++) {\n        this.renderedEvents = [];\n\n        for (var month = 0; month < months.length; month++) {\n          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n          this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    }\n\n    if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {\n      var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n      appointments.forEach(function (ele) {\n        ele.style.removeProperty('left');\n        ele.style.removeProperty('right');\n      });\n      var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n      var conTable_1 = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n      var tr_2 = [].slice.call(conTable_1.querySelectorAll('tbody tr'));\n      appContainer.forEach(function (ele, index) {\n        var appWrapper = [].slice.call(ele.children);\n        var row = tr_2[parseInt(index.toString(), 10)];\n        appWrapper.forEach(function (appWrap, cellIndex) {\n          var td = row.querySelector(\"td:nth-child(\" + (cellIndex + 1) + \")\");\n          var app = [].slice.call(appWrap.children);\n          var width = td.getBoundingClientRect().width;\n          var left = td.offsetLeft;\n\n          if (_this.parent.enableRtl) {\n            var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;\n            app.forEach(function (app) {\n              app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n              app.style.right = right_1 + 'px';\n            });\n          } else {\n            app.forEach(function (app) {\n              app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n              app.style.left = left + 'px';\n            });\n          }\n        });\n      });\n    }\n  };\n\n  YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n    var eventWrapper = createElement('div', {\n      className: APPOINTMENT_WRAPPER_CLASS\n    });\n    wrapper.appendChild(eventWrapper);\n    var monthEnd = addDays(lastDateOfMonth(new Date(monthStart.getTime())), 1);\n    var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n    var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n    var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n    this.cellHeight = td.offsetHeight;\n    this.groupOrder = resource.groupOrder;\n    var isSpannedCollection = [];\n\n    var _loop_2 = function (a) {\n      var data = eventDatas[parseInt(a.toString(), 10)];\n      var overlapIndex = void 0;\n      var eventData = extend({}, data, null, true);\n\n      if (this_2.parent.activeViewOptions.group.resources.length > 0) {\n        var eventObj = this_2.isSpannedEvent(eventData, monthStart);\n        overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);\n        eventData.Index = overlapIndex;\n      } else {\n        overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);\n        eventData.Index = overlapIndex;\n      }\n\n      var availedHeight = this_2.cellHeader + this_2.eventHeight * (a + 1) + EVENT_GAP$2 + this_2.moreIndicatorHeight;\n      var leftValue = this_2.parent.activeViewOptions.orientation === 'Vertical' ? month * this_2.cellWidth : index * this_2.cellWidth;\n\n      if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {\n        return {\n          value: void 0\n        };\n      }\n\n      if (this_2.parent.activeViewOptions.orientation === 'Vertical' && this_2.parent.activeViewOptions.group.resources.length > 0) {\n        var isRendered = this_2.renderedEvents.filter(function (eventObj) {\n          return eventObj.Guid === eventData.Guid;\n        });\n        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n          return eventObj.Guid === eventData.Guid;\n        });\n\n        if (isRendered.length > 0 || isSpanned.length > 0) {\n          return \"continue\";\n        }\n      }\n\n      if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {\n        this_2.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n        this_2.updateCellHeight(td, availedHeight);\n        isSpannedCollection.push(eventData);\n      } else {\n        var moreIndex = this_2.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n        this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n\n        if (this_2.parent.activeViewOptions.orientation === 'Horizontal') {\n          for (var i = index; i < eventDatas.length; i++) {\n            this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], {\n              Index: overlapIndex + i\n            }, true));\n          }\n        }\n\n        return \"break\";\n      }\n    };\n\n    var this_2 = this;\n\n    for (var a = 0; a < eventDatas.length; a++) {\n      var state_1 = _loop_2(a);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n      if (state_1 === \"break\") break;\n    }\n  }; // eslint-disable-next-line max-len\n\n\n  YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n    var _this = this;\n\n    var eventObj = this.isSpannedEvent(eventData, monthDate);\n    var wrap = this.createEventElement(eventObj);\n    var width;\n    var index;\n\n    if (eventObj.isSpanned.count === 1) {\n      var endTime = addDays(eventObj[this.fields.endTime], -1);\n      eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n    }\n\n    if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n      return;\n    }\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      index = row + 1;\n\n      if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n\n      width = eventObj.isSpanned.count * this.cellWidth;\n    } else {\n      index = rowIndex + 1;\n      width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;\n    }\n\n    var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n    var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP$2;\n    setStyleAttribute(wrap, {\n      'width': width + 'px',\n      'height': this.eventHeight + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n\n    if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n      wrap.setAttribute('data-index', eventObj.Index.toString());\n    }\n\n    var args = {\n      data: eventObj,\n      element: wrap,\n      cancel: false,\n      type: 'event'\n    };\n    this.parent.trigger(eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        wrapper.appendChild(wrap);\n\n        _this.wireAppointmentEvents(wrap, eventObj);\n\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal' || !eventObj.isSpanned.isRight) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        }\n      }\n    });\n  }; // eslint-disable-next-line max-len\n\n\n  YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n    if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n      return;\n    }\n\n    var endDate;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      endDate = addDays(lastDateOfMonth(new Date(startDate.getTime())), 1);\n    } else {\n      endDate = addDays(new Date(startDate.getTime()), 1);\n    }\n\n    var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n    var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n    var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n    left = Math.floor(left / this.cellWidth) * this.cellWidth;\n    right = Math.floor(right / this.cellWidth) * this.cellWidth;\n    setStyleAttribute(moreIndicator, {\n      'width': this.cellWidth + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n\n    if (!isNullOrUndefined(index)) {\n      moreIndicator.setAttribute('data-group-index', index.toString());\n    }\n\n    wrapper.appendChild(moreIndicator);\n    EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n  };\n\n  YearEvent.prototype.createEventElement = function (record) {\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var eventWrapper = createElement('div', {\n      className: APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n\n    if (this.cssClass) {\n      addClass([eventWrapper], this.cssClass);\n    }\n\n    if (record[this.fields.isReadonly]) {\n      addClass([eventWrapper], READ_ONLY);\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resIndex = this.getGroupIndexFromEvent(record);\n      eventWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n\n    var templateElement = [];\n    var eventObj = extend({}, record, null, true);\n\n    if (this.parent.activeViewOptions.eventTemplate) {\n      var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n    } else {\n      var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var subjectEle = createElement('div', {\n        className: SUBJECT_CLASS,\n        innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n      });\n      var startTimeEle = createElement('div', {\n        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n      });\n      var endTimeEle = createElement('div', {\n        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n      });\n      addClass([subjectEle], 'e-text-center');\n\n      if (record[this.fields.isAllDay]) {\n        templateElement = [subjectEle];\n      } else if (!eventObj.isLeft && !eventObj.isRight) {\n        templateElement = [startTimeEle, subjectEle, endTimeEle];\n      } else {\n        if (!eventObj.isLeft) {\n          templateElement.push(startTimeEle);\n        }\n\n        templateElement.push(subjectEle);\n\n        if (!eventObj.isRight) {\n          templateElement.push(endTimeEle);\n        }\n      }\n    }\n\n    var appointmentDetails = createElement('div', {\n      className: APPOINTMENT_DETAILS\n    });\n    append(templateElement, appointmentDetails);\n    eventWrapper.appendChild(appointmentDetails);\n    this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);\n    this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n    this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n    return eventWrapper;\n  };\n\n  YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n    var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    var monthEnd = addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.fields.startTime];\n    var eventEnd = eventData[this.fields.endTime];\n    var isSpanned = {\n      isLeft: false,\n      isRight: false,\n      count: 1\n    };\n    var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);\n    var yearEnd = addMonths(yearStart, this.parent.monthsCount);\n\n    if (this.isResource) {\n      this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n    }\n\n    if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n      this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);\n      var originalStartTime = eventData[this.fields.startTime];\n      var originalEndTime = new Date(eventData[this.fields.endTime] - 1);\n      isSpanned.count = originalEndTime.getMonth() - originalStartTime.getMonth() + this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear()) + 1;\n    } else {\n      this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);\n\n      if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n        var end = resetTime(eventData[this.fields.endTime]).getTime();\n        var start = resetTime(eventData[this.fields.startTime]).getTime();\n\n        if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n          end = addDays(new Date(end), -1).getTime();\n        }\n\n        isSpanned.count = Math.ceil((end - start) / MS_PER_DAY) + 1;\n      }\n    }\n\n    eventData.isSpanned = isSpanned;\n\n    if (resetTime(eventStart).getTime() < resetTime(this.parent.minDate).getTime()) {\n      eventData[this.fields.startTime] = this.parent.minDate;\n    }\n\n    if (resetTime(eventEnd).getTime() > resetTime(this.parent.maxDate).getTime()) {\n      eventData[this.fields.endTime] = this.parent.maxDate;\n    }\n\n    return eventData;\n  };\n\n  YearEvent.prototype.updateSpannedEventDetails = function (eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {\n    if (eventStart.getTime() < viewStart.getTime()) {\n      eventObj[this.fields.startTime] = viewStart;\n      isSpanned.isLeft = true;\n    }\n\n    if (eventEnd.getTime() > viewEnd.getTime()) {\n      eventObj[this.fields.endTime] = viewEnd;\n      isSpanned.isRight = true;\n    }\n  };\n\n  YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateStart;\n    var dateEnd;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n      var monthEnd = addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n      dateStart = resetTime(new Date(monthStart.getTime())).getTime();\n      dateEnd = resetTime(new Date(monthEnd.getTime())).getTime();\n    } else {\n      if (this.parent.rowAutoHeight) {\n        dateStart = resetTime(new Date(date.getTime())).getTime();\n        dateEnd = addDays(resetTime(new Date(date.getTime())), 1).getTime();\n      } else {\n        dateStart = dateEnd = resetTime(new Date(date.getTime())).getTime();\n      }\n    }\n\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      var appStart = new Date(app[this.fields.startTime].getTime());\n      var appEnd = new Date(app[this.fields.endTime].getTime());\n      var timeCondition = app[this.fields.isAllDay] ? resetTime(appEnd).getTime() > dateStart : resetTime(appEnd).getTime() >= dateStart;\n\n      if (resetTime(appStart).getTime() <= dateStart && timeCondition || resetTime(appStart).getTime() >= dateStart && resetTime(appEnd).getTime() <= dateEnd) {\n        appointmentsList.push(app);\n      }\n    }\n\n    return appointmentsList;\n  };\n\n  YearEvent.prototype.getMonths = function () {\n    var _this = this; // eslint-disable-next-line prefer-spread\n\n\n    return Array.apply(null, {\n      length: this.parent.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n\n  YearEvent.prototype.removeCellHeight = function () {\n    var elementSelector = \".\" + MONTH_HEADER_WRAPPER + \" tbody tr,.\" + RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + CONTENT_TABLE_CLASS + \" tbody tr\";\n    var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n\n  YearEvent.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.parent = null;\n  };\n\n  return YearEvent;\n}(TimelineEvent);\n\nvar __extends$15 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\n\nvar DragAndDrop =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$15(DragAndDrop, _super);\n\n  function DragAndDrop() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.widthUptoCursorPoint = 0;\n    _this.heightUptoCursorPoint = 0;\n    _this.cursorPointIndex = 0;\n    _this.isHeaderRows = false;\n    _this.isTimelineDayProcess = false;\n    _this.widthPerMinute = 0;\n    _this.heightPerMinute = 0;\n    _this.minDiff = 0;\n    _this.isStepDragging = false;\n    _this.isMorePopupOpened = false;\n    _this.isAllDayDrag = false;\n    _this.isMultiSelect = false;\n    _this.multiData = [];\n    _this.updatedData = [];\n    _this.swagData = [];\n    _this.startTime = 0;\n    _this.isAllDayTarget = false;\n    _this.targetTd = null;\n    _this.isCursorAhead = false;\n    return _this;\n  }\n\n  DragAndDrop.prototype.wireDragEvent = function (element) {\n    new Draggable(element, {\n      abort: '.' + EVENT_RESIZE_CLASS,\n      clone: true,\n      isDragScroll: true,\n      enableTapHold: this.parent.isAdaptive,\n      enableTailMode: this.parent.eventDragArea ? true : false,\n      cursorAt: this.parent.eventDragArea ? {\n        left: -20,\n        top: -20\n      } : {\n        left: 0,\n        top: 0\n      },\n      dragArea: this.dragArea,\n      dragStart: this.dragStart.bind(this),\n      drag: this.drag.bind(this),\n      dragStop: this.dragStop.bind(this),\n      enableAutoScroll: false,\n      helper: this.dragHelper.bind(this),\n      queryPositionInfo: this.dragPosition.bind(this)\n    });\n  };\n\n  DragAndDrop.prototype.setDragArea = function () {\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n    this.dragArea = this.parent.eventDragArea && dragElement ? dragElement : this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n  };\n\n  DragAndDrop.prototype.dragHelper = function (e) {\n    var _this = this;\n\n    this.setDragActionDefaultValues();\n    this.actionObj.element = e.element;\n    this.actionObj.action = 'drag';\n    var elements = [];\n\n    if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 || this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1) {\n      elements = [e.element];\n    } else {\n      elements = this.parent.selectedElements;\n      this.isMultiSelect = true;\n    }\n\n    elements.forEach(function (ele) {\n      var cloneElement = _this.createCloneElement(ele);\n\n      if (ele.getAttribute('data-guid') === _this.actionObj.element.getAttribute('data-guid')) {\n        _this.actionObj.clone = cloneElement;\n\n        if (!_this.parent.eventDragArea && _this.parent.currentView !== 'Month' && _this.parent.activeViewOptions.timeScale.enable && !_this.parent.activeView.isTimelineView() && !_this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n          setStyleAttribute(_this.actionObj.clone, {\n            cursor: 'move',\n            left: '0%',\n            right: '0%',\n            width: '100%'\n          });\n        }\n\n        _this.actionObj.clone.style.top = formatUnit(_this.actionObj.element.offsetTop);\n      }\n\n      _this.actionObj.cloneElement.push(cloneElement);\n\n      _this.actionObj.originalElement.push(ele);\n    });\n    return this.actionObj.clone;\n  };\n\n  DragAndDrop.prototype.dragPosition = function (e) {\n    if (this.parent.eventDragArea) {\n      return {\n        left: e.left,\n        top: e.top\n      };\n    }\n\n    var cellHeight = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;\n    var leftValue = formatUnit(0);\n\n    if (this.parent.currentView === 'Month') {\n      leftValue = e.left;\n    }\n\n    var cloneRight;\n\n    if (this.isStepDragging) {\n      cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;\n    } else {\n      cloneRight = this.actionObj.clone.getBoundingClientRect().right;\n    }\n\n    var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var contentWrapRight = dragArea.getBoundingClientRect().right;\n\n    if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear' && !this.parent.enableRtl && this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {\n      this.isCursorAhead = true;\n    }\n\n    if (this.parent.activeView.isTimelineView()) {\n      leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n    }\n\n    var topValue;\n\n    if (this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable || !isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n      topValue = formatUnit(this.actionObj.clone.offsetTop);\n    } else if (this.parent.currentView === 'Month') {\n      topValue = formatUnit(0);\n    } else if (this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n      topValue = formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop);\n      setStyleAttribute(this.actionObj.clone, {\n        width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n        right: this.parent.enableRtl && formatUnit(0)\n      });\n    } else {\n      if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) && !this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n        setStyleAttribute(this.actionObj.clone, {\n          height: formatUnit(this.actionObj.cellHeight),\n          width: formatUnit(this.actionObj.cellWidth - 1),\n          pointerEvents: 'none'\n        });\n      }\n\n      var top_1 = parseInt(e.top, 10);\n      top_1 = top_1 < 0 ? 0 : top_1;\n      topValue = formatUnit(Math.ceil(top_1 / cellHeight) * cellHeight);\n      var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n      var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n\n      if (cloneBottom > scrollHeight) {\n        topValue = parseInt(topValue, 10) - (cloneBottom - scrollHeight) + 'px';\n      }\n    }\n\n    return {\n      left: leftValue,\n      top: topValue\n    };\n  };\n\n  DragAndDrop.prototype.setDragActionDefaultValues = function () {\n    this.actionObj.action = 'drag';\n    this.actionObj.isAllDay = null;\n    this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    this.actionObj.interval = this.actionObj.slotInterval;\n    var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n    this.actionObj.cellWidth = workCell.offsetWidth;\n    this.actionObj.cellHeight = workCell.offsetHeight;\n  };\n\n  DragAndDrop.prototype.dragStart = function (e) {\n    var _this = this;\n\n    var eventGuid = this.actionObj.element.getAttribute('data-guid');\n    this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n    var eventObj = extend({}, this.actionObj.event, null, true);\n\n    if (!isNullOrUndefined(eventObj)) {\n      this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n    }\n\n    var dragArgs = {\n      cancel: false,\n      data: eventObj,\n      selectedData: this.getSelectedData(),\n      event: e,\n      excludeSelectors: null,\n      element: this.actionObj.element,\n      interval: this.actionObj.interval,\n      navigation: {\n        enable: false,\n        timeDelay: 2000\n      },\n      scroll: {\n        enable: true,\n        scrollBy: 30,\n        timeDelay: 100\n      }\n    };\n    this.parent.trigger(dragStart, dragArgs, function (dragEventArgs) {\n      if (dragEventArgs.cancel || !isNullOrUndefined(_this.actionObj.element) && isNullOrUndefined(_this.actionObj.element.parentElement)) {\n        var dragObj = _this.actionObj.element.ej2_instances[0];\n\n        if (!isNullOrUndefined(dragObj)) {\n          dragObj.intDestroy(e.event);\n        }\n\n        _this.actionObj.action = '';\n\n        _this.removeCloneElementClasses();\n\n        _this.removeCloneElement();\n\n        return;\n      }\n\n      _this.actionClass('addClass');\n\n      _this.parent.uiStateValues.action = true;\n      _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];\n      _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];\n      _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n      _this.actionObj.interval = dragEventArgs.interval;\n      _this.actionObj.navigation = dragEventArgs.navigation;\n      _this.actionObj.scroll = dragEventArgs.scroll;\n      _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n\n      var viewElement = _this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      _this.scrollArgs = {\n        element: viewElement,\n        width: viewElement.scrollWidth,\n        height: viewElement.scrollHeight\n      };\n      _this.widthPerMinute = _this.actionObj.cellWidth / _this.actionObj.slotInterval * _this.actionObj.interval;\n      _this.heightPerMinute = _this.actionObj.cellHeight / _this.actionObj.slotInterval * _this.actionObj.interval;\n      _this.widthUptoCursorPoint = 0;\n      _this.heightUptoCursorPoint = 0;\n      _this.cursorPointIndex = -1;\n      _this.isHeaderRows = false;\n      _this.isTimelineDayProcess = false;\n      _this.minDiff = 0;\n      _this.isMorePopupOpened = false;\n      _this.daysVariation = -1;\n      _this.isAllDayTarget = _this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n\n      if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== 'TimelineYear') {\n        if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) && _this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n          _this.isMorePopupOpened = true;\n        }\n\n        _this.actionObj.pageX = e.event.pageX;\n        var rows = _this.parent.activeViewOptions.headerRows;\n        _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' && rows[rows.length - 1].option !== 'Date';\n        _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows || _this.parent.currentView === 'TimelineMonth' || rows.length > 0 && rows[rows.length - 1].option === 'Date';\n        _this.isStepDragging = !_this.isTimelineDayProcess && _this.actionObj.slotInterval !== _this.actionObj.interval;\n\n        if (_this.isTimelineDayProcess) {\n          _this.timelineEventModule = new TimelineEvent(_this.parent, 'day');\n        } else {\n          _this.timelineEventModule = new TimelineEvent(_this.parent, 'hour');\n        }\n      }\n\n      if (_this.parent.currentView === 'TimelineYear') {\n        _this.yearEvent = new YearEvent(_this.parent);\n      }\n\n      if (_this.parent.currentView === 'Month') {\n        _this.startTime = resetTime(new Date(_this.startTime)).getTime();\n\n        _this.updateOriginalElement(_this.actionObj.clone);\n\n        _this.monthEvent = new MonthEvent(_this.parent);\n      }\n\n      if (_this.parent.currentView === 'Day' || _this.parent.currentView === 'Week' || _this.parent.currentView === 'WorkWeek') {\n        _this.verticalEvent = new VerticalEvent(_this.parent);\n\n        _this.verticalEvent.initializeValues();\n\n        var splitEvents = _this.splitEvent(_this.actionObj.event);\n\n        splitEvents.forEach(function (event) {\n          var query = \".e-day-wrapper[data-date=\\\"\" + resetTime(event[_this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n\n          if (_this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + _this.actionObj.groupIndex + '\"]');\n          }\n\n          var appWrap = _this.parent.element.querySelector(query);\n\n          if (appWrap) {\n            var appEle = appWrap.querySelector('[data-id=\"' + _this.actionObj.clone.getAttribute('data-id') + '\"]');\n\n            if (appEle) {\n              addClass([appEle], EVENT_ACTION_CLASS);\n            }\n          }\n        });\n      }\n    });\n  };\n\n  DragAndDrop.prototype.getSelectedData = function () {\n    if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n      for (var _i = 0, _a = this.parent.selectedElements; _i < _a.length; _i++) {\n        var element = _a[_i];\n        var eventGuid = element.getAttribute('data-guid');\n        var data = this.parent.eventBase.getEventByGuid(eventGuid);\n        this.multiData.push(extend({}, data, null, true));\n      }\n    }\n\n    return this.multiData;\n  };\n\n  DragAndDrop.prototype.drag = function (e) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide(true);\n    }\n\n    if (!isNullOrUndefined(e.target) && e.target.classList.contains(DISABLE_DATES)) {\n      return;\n    }\n\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventArgs = this.parent.eventBase.getPageCoordinates(e);\n    this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n    this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n    this.actionObj.target = e.target;\n    this.widthUptoCursorPoint = this.widthUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute) * this.widthPerMinute : this.widthUptoCursorPoint;\n    this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n    this.heightUptoCursorPoint = this.heightUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute) * this.heightPerMinute : this.heightUptoCursorPoint;\n    this.isAllDayDrag = this.parent.activeViewOptions.timeScale.enable ? this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) : this.actionObj.event[this.parent.eventFields.isAllDay];\n\n    if (this.isStepDragging && this.minDiff === 0) {\n      this.calculateMinutesDiff(eventObj);\n    }\n\n    if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n      var date = this.parent.getDateFromElement(this.actionObj.target);\n\n      if (!isNullOrUndefined(date)) {\n        var currentDate = resetTime(date);\n        var startDate = resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n        this.daysVariation = (currentDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n      } else {\n        this.daysVariation = 0;\n      }\n    } else {\n      this.daysVariation = 0;\n    }\n\n    if (this.parent.eventDragArea) {\n      var targetElement = eventArgs.target;\n      this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n      this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n      var currentTarget = closest(targetElement, '.' + ROOT);\n\n      if (!currentTarget) {\n        this.actionObj.clone.style.height = '';\n        this.actionObj.clone.style.width = '';\n      } else {\n        if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n          this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n        }\n      }\n    }\n\n    this.updateScrollPosition(e);\n    this.updateNavigatingPosition(e);\n    this.updateDraggingDateTime(e);\n    var dragArgs = {\n      data: eventObj,\n      event: e,\n      element: this.actionObj.element,\n      startTime: this.actionObj.start,\n      endTime: this.actionObj.end,\n      selectedData: this.updatedData\n    };\n\n    if (this.parent.group.resources.length > 0) {\n      dragArgs.groupIndex = this.actionObj.groupIndex;\n    }\n\n    this.parent.trigger(drag, dragArgs);\n  };\n\n  DragAndDrop.prototype.calculateMinutesDiff = function (eventObj) {\n    if (this.parent.enableRtl) {\n      this.minDiff = (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute * this.actionObj.interval;\n    } else {\n      this.minDiff = this.widthUptoCursorPoint / this.widthPerMinute * this.actionObj.interval;\n    }\n\n    var startDate = eventObj[this.parent.eventFields.startTime];\n    var startTime = this.parent.activeView.renderDates[0];\n    var startEndHours = getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n\n    if (startEndHours.startHour.getTime() > startDate.getTime()) {\n      this.minDiff = this.minDiff + (startEndHours.startHour.getTime() - startDate.getTime()) / MS_PER_MINUTE;\n    }\n  };\n\n  DragAndDrop.prototype.dragStop = function (e) {\n    var _this = this;\n\n    this.isCursorAhead = false;\n    this.removeCloneElementClasses();\n    this.removeCloneElement();\n    clearInterval(this.actionObj.navigationInterval);\n    this.actionObj.navigationInterval = null;\n    clearInterval(this.actionObj.scrollInterval);\n    this.actionObj.scrollInterval = null;\n    this.actionClass('removeClass');\n    this.parent.uiStateValues.action = false;\n\n    if (this.isAllowDrop(e)) {\n      return;\n    }\n\n    var target = !e.target.classList.contains('e-work-cells') && this.parent.cellTemplate ? closest(e.target, '.e-work-cells') : e.target;\n    var dragArgs = {\n      cancel: false,\n      data: this.getChangedData(this.updatedData),\n      selectedData: this.updatedData,\n      event: e,\n      element: this.actionObj.element,\n      target: target\n    };\n    this.actionObj.action = null;\n    this.parent.trigger(dragStop, dragArgs, function (dragEventArgs) {\n      if (dragEventArgs.cancel) {\n        return;\n      }\n\n      if (_this.parent.isSpecificResourceEvents()) {\n        _this.parent.crudModule.crudObj.isCrudAction = true;\n        _this.parent.crudModule.crudObj.sourceEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n\n        var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this.actionObj.groupIndex;\n\n        _this.parent.crudModule.crudObj.targetEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(currentGroupIndex.toString(), 10)]];\n      }\n\n      _this.saveChangedData(dragEventArgs, _this.isMultiSelect);\n    });\n    this.updatedData = [];\n    this.multiData = [];\n    this.isMultiSelect = false;\n    this.parent.selectedElements = [];\n  };\n\n  DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n    var _this = this;\n\n    if (this.actionObj.navigation.enable) {\n      var currentDate_1 = this.parent.getCurrentTime();\n\n      if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n        this.actionObj.navigationInterval = window.setInterval(function () {\n          if (currentDate_1) {\n            var crtDate = _this.parent.getCurrentTime();\n\n            var end = crtDate.getSeconds();\n            var start = currentDate_1.getSeconds() + _this.actionObj.navigation.timeDelay / 1000;\n            start = start >= 60 ? start - 60 : start;\n\n            if (start === end) {\n              currentDate_1 = _this.parent.getCurrentTime();\n\n              _this.viewNavigation(e);\n\n              _this.updateDraggingDateTime(e);\n            }\n          }\n        }, this.actionObj.navigation.timeDelay);\n      }\n    }\n  };\n\n  DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n    if (!isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n      this.morePopupEventDragging(e);\n    } else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n      this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n      this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n      this.timelineEventModule.getSlotDates();\n      this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth : this.parent.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect().width;\n      this.calculateTimelineTime(e);\n    } else {\n      if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n        this.calculateVerticalDate(e);\n      } else {\n        this.calculateVerticalTime(e);\n      }\n    }\n  };\n\n  DragAndDrop.prototype.navigationWrapper = function () {\n    if (!this.parent.activeView.isTimelineView()) {\n      if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n        var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n        this.actionObj.index = this.parent.activeView.renderDates.length < this.actionObj.index ? this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n        var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n        if (!targetWrapper) {\n          targetWrapper = createElement('div', {\n            className: APPOINTMENT_WRAPPER_CLASS\n          });\n          outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n        }\n\n        targetWrapper.appendChild(this.actionObj.clone);\n      } else {\n        var wrapperClass = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) ? '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n        this.parent.element.querySelectorAll(wrapperClass).item(this.actionObj.index).appendChild(this.actionObj.clone);\n\n        if (wrapperClass === '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n          var elementHeight = this.getAllDayEventHeight();\n          var event_2 = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n\n          if (event_2[0].offsetHeight < elementHeight) {\n            for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {\n              var e = event_1[_i];\n              e.style.height = (elementHeight + 2) / 12 + 'em';\n            }\n          }\n\n          this.actionObj.clone.style.height = formatUnit(elementHeight);\n        }\n\n        this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n      }\n    } else {\n      var outWrapper = void 0;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n      } else {\n        outWrapper = this.parent.element.querySelector('.' + APPOINTMENT_CONTAINER_CLASS);\n      }\n\n      if (!isNullOrUndefined(outWrapper)) {\n        var tarWrapper_1 = outWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n        if (!tarWrapper_1) {\n          tarWrapper_1 = createElement('div', {\n            className: APPOINTMENT_WRAPPER_CLASS\n          });\n          outWrapper.appendChild(tarWrapper_1);\n        }\n\n        this.actionObj.cloneElement.forEach(function (ele) {\n          tarWrapper_1.appendChild(ele);\n        });\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DragAndDrop.prototype.viewNavigation = function (e) {\n    var navigationType;\n    var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n    if (dragArea && (!this.scrollEdges.top && !this.scrollEdges.bottom || closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n      if (dragArea.scrollLeft === 0 && Math.round(this.actionObj.X) <= Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset)) {\n        navigationType = this.parent.enableRtl ? 'next' : 'previous';\n      } else if (Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth && Math.round(this.actionObj.X) >= Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset)) {\n        navigationType = this.parent.enableRtl ? 'previous' : 'next';\n      }\n\n      if (navigationType) {\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n      }\n    }\n  };\n\n  DragAndDrop.prototype.morePopupEventDragging = function (e) {\n    if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, 'td'))) {\n      return;\n    }\n\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n    var td = closest(e.target, 'td');\n\n    if (this.parent.currentView === 'TimelineYear' && (!td.classList.contains(WORK_CELLS_CLASS) || td.classList.contains(OTHERMONTH_CLASS))) {\n      return;\n    }\n\n    var dragStart$$1 = this.parent.getDateFromElement(td);\n    var dragEnd = new Date(dragStart$$1.getTime());\n    dragEnd.setMilliseconds(eventDuration);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n    }\n\n    this.actionObj.start = new Date(dragStart$$1.getTime());\n    this.actionObj.end = new Date(dragEnd.getTime());\n    this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n    this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n    this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n    var eventContainer = td;\n    var eventWrapper;\n\n    if (this.parent.activeView.isTimelineView()) {\n      var rowIndex = closest(td, 'tr').rowIndex;\n      eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n    }\n\n    eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n    if (!eventWrapper) {\n      eventWrapper = createElement('div', {\n        className: APPOINTMENT_WRAPPER_CLASS\n      });\n      eventContainer.appendChild(eventWrapper);\n    }\n\n    this.appendCloneElement(eventWrapper);\n  };\n\n  DragAndDrop.prototype.calculateVerticalTime = function (e) {\n    var _this = this;\n\n    if (isNullOrUndefined(this.actionObj.target) || this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr')) || !closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS) && !closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)) {\n      return;\n    }\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.swapDragging(e);\n    }\n\n    var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventStart = eventObj[this.parent.eventFields.startTime];\n    var eventEnd = eventObj[this.parent.eventFields.endTime];\n    var eventDuration = getUniversalTime(eventEnd) - getUniversalTime(eventStart);\n    var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n    offsetTop = offsetTop < 0 ? 0 : offsetTop;\n\n    if (this.scrollEdges.top || this.scrollEdges.bottom) {\n      offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint + this.actionObj.cellHeight + window.pageYOffset : dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset + (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n      offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n\n      if (dragArea.scrollTop > 0) {\n        this.actionObj.clone.style.top = formatUnit(offsetTop);\n      }\n    }\n\n    var rowIndex = this.parent.activeViewOptions.timeScale.enable ? offsetTop / this.actionObj.cellHeight : 0;\n    var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n    var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n    var tr;\n\n    if (this.isAllDayDrag) {\n      tr = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n    } else {\n      var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n      tr = trCollections[parseInt(rowIndex.toString(), 10)];\n    }\n\n    var index;\n\n    if (closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS) || closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)) {\n      index = closest(this.actionObj.target, 'td').cellIndex;\n    }\n\n    var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n    this.actionObj.index = colIndex;\n\n    if (isNullOrUndefined(tr)) {\n      return;\n    }\n\n    var td = tr.children[parseInt(colIndex.toString(), 10)];\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n    }\n\n    var dragStart$$1;\n    var dragEnd;\n\n    if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n      this.appendCloneElement(this.getEventWrapper(colIndex));\n      dragStart$$1 = this.parent.getDateFromElement(td);\n      dragStart$$1.setMinutes(dragStart$$1.getMinutes() + diffInMinutes / heightPerMinute);\n      dragEnd = new Date(dragStart$$1.getTime());\n\n      if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n        dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n      } else {\n        dragEnd.setMilliseconds(eventDuration);\n      }\n    } else {\n      dragStart$$1 = this.parent.getDateFromElement(td);\n      dragStart$$1.setDate(dragStart$$1.getDate() - this.daysVariation);\n      dragStart$$1.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n      dragEnd = new Date(dragStart$$1.getTime());\n      dragEnd.setMilliseconds(eventDuration);\n\n      if (!this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) && this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n        dragEnd = addDays(resetTime(dragEnd), 1);\n      }\n\n      var index_1 = this.parent.activeViewOptions.group.byDate || this.parent.virtualScrollModule && !this.parent.activeViewOptions.timeScale.enable ? colIndex : undefined;\n      this.updateAllDayEvents(dragStart$$1, dragEnd, index_1);\n    }\n\n    this.actionObj.start = new Date(+dragStart$$1);\n    this.actionObj.end = new Date(+dragEnd);\n    var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n    var dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n\n    for (var _i = 0, dynamicWrappers_1 = dynamicWrappers; _i < dynamicWrappers_1.length; _i++) {\n      var wrapper = dynamicWrappers_1[_i];\n      remove(wrapper);\n    }\n\n    if (this.multiData.length > 0) {\n      if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n        var targetCellTime_1 = parseInt(closest(this.actionObj.target, 'td').getAttribute('data-date'), 10);\n        this.multiData.forEach(function (data) {\n          _this.swagData.push(extend({}, data, null, true));\n\n          if (data[_this.parent.eventFields.isAllDay]) {\n            data[_this.parent.eventFields.startTime] = new Date(data[_this.parent.eventFields.startTime].getTime() + (targetCellTime_1 - _this.startTime));\n            var startTime = new Date(data[_this.parent.eventFields.startTime]);\n            var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this.actionObj.slotInterval));\n            data[_this.parent.eventFields.endTime] = endTime;\n            data[_this.parent.eventFields.isAllDay] = false;\n          }\n        });\n        this.startTime = targetCellTime_1;\n      }\n\n      if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n        this.multiData = this.swagData;\n        this.swagData = [];\n        var eventObj_1 = extend({}, this.actionObj.event, null, true);\n        this.startTime = eventObj_1[this.parent.eventFields.startTime].getTime();\n      }\n\n      var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n\n      for (var index_2 = 0; index_2 < this.multiData.length; index_2++) {\n        this.updatedData[parseInt(index_2.toString(), 10)] = this.updateMultipleData(this.multiData[parseInt(index_2.toString(), 10)], startTimeDiff);\n        var dayIndex = this.getDayIndex(this.updatedData[parseInt(index_2.toString(), 10)]);\n\n        if (dayIndex >= 0) {\n          var wrapper = this.getEventWrapper(dayIndex, this.updatedData[parseInt(index_2.toString(), 10)][this.parent.eventFields.isAllDay]);\n          this.appendCloneElement(wrapper, this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n          this.updateEventHeight(this.updatedData[parseInt(index_2.toString(), 10)], index_2, dayIndex);\n        } else {\n          if (!isNullOrUndefined(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)].parentNode)) {\n            remove(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n          }\n        }\n      }\n    } else {\n      this.updateEventHeight(event);\n    }\n\n    this.updateTimePosition(this.actionObj.start, this.updatedData);\n  };\n\n  DragAndDrop.prototype.splitEvent = function (event) {\n    var eventFields = this.parent.eventFields;\n    var eventData = [];\n    var startTime = event[eventFields.startTime];\n    var endTime = event[eventFields.endTime];\n\n    if (resetTime(new Date(startTime.getTime())) < resetTime(new Date(endTime.getTime()))) {\n      var startReferenceDate = resetTime(new Date(startTime.getTime()));\n      var endReferenceDate = new Date(startReferenceDate.getTime());\n\n      for (var i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {\n        endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));\n        var eventObj = extend({}, event, null, true);\n        eventObj[eventFields.startTime] = new Date(startReferenceDate);\n        eventObj[eventFields.endTime] = new Date(endReferenceDate);\n        startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));\n        eventData.push(eventObj);\n      }\n\n      var index = eventData.length - 1;\n      eventData[0][eventFields.startTime] = startTime;\n      eventData[parseInt(index.toString(), 10)][eventFields.endTime] = endTime;\n    } else {\n      eventData.push(event);\n    }\n\n    return eventData;\n  };\n\n  DragAndDrop.prototype.updateMultipleData = function (data, timeDifference) {\n    var eventObj = extend({}, data, null, true);\n\n    if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable && (this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay] || !this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay])) {\n      eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n    }\n\n    var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n\n    if (eventObj[this.parent.eventFields.isAllDay]) {\n      var differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n      var day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n      var startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n      eventObj[this.parent.eventFields.startTime] = resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n      eventObj[this.parent.eventFields.endTime] = addDays(eventObj[this.parent.eventFields.startTime], day);\n    } else {\n      eventObj[this.parent.eventFields.startTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n      eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n    }\n\n    return eventObj;\n  };\n\n  DragAndDrop.prototype.getDayIndex = function (event) {\n    var eventObj = extend({}, event, null, true);\n    var startDate = resetTime(eventObj[this.parent.eventFields.startTime]);\n\n    if (this.parent.activeViewOptions.timeScale.enable && !eventObj[this.parent.eventFields.isAllDay]) {\n      var startHour = this.parent.activeView.getStartHour();\n      startDate.setMilliseconds(startHour.getTime() - resetTime(startHour).getTime());\n    }\n\n    var startTime = startDate.getTime();\n    var query = '';\n    var wrapper = DAY_WRAPPER_CLASS;\n\n    if (this.parent.activeViewOptions.timeScale.enable && eventObj[this.parent.eventFields.isAllDay]) {\n      wrapper = ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n    } else {\n      wrapper = WORK_CELLS_CLASS;\n    }\n\n    query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n    }\n\n    this.targetTd = this.parent.element.querySelector(query);\n\n    if (isNullOrUndefined(this.targetTd)) {\n      return -1;\n    }\n\n    return this.targetTd.cellIndex;\n  };\n\n  DragAndDrop.prototype.updateEventHeight = function (event, index, colIndex) {\n    this.verticalEvent.initializeValues();\n    var datesCount = this.verticalEvent.getStartCount();\n\n    if (!this.parent.uiStateValues.isGroupAdaptive) {\n      for (var i = 0; i < this.actionObj.groupIndex; i++) {\n        if (this.verticalEvent.dateRender[parseInt(i.toString(), 10)]) {\n          datesCount = datesCount + this.verticalEvent.dateRender[parseInt(i.toString(), 10)].length;\n        }\n      }\n    }\n\n    var indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;\n    var target = this.parent.activeViewOptions.group.byDate && !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target)) ? true : false;\n\n    if (target || !this.parent.activeViewOptions.group.byDate) {\n      var dynamicIndex = -1;\n      var dayIndex = !this.parent.activeViewOptions.group.byDate ? isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount : this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(indexGroup.toString(), 10)], resetTime( // eslint-disable-next-line max-len\n      this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n      var splitEvents = this.splitEvent(event);\n      var events_1 = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 || this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' ? [event] : splitEvents;\n\n      for (var i = 0; i < events_1.length; i++) {\n        if (i > 0) {\n          var filterQuery = \".e-day-wrapper[data-date=\\\"\" + resetTime(events_1[parseInt(i.toString(), 10)][this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n\n          if (this.parent.activeViewOptions.group.resources.length > 0) {\n            filterQuery = filterQuery.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n          }\n\n          var appWrap = this.parent.element.querySelector(filterQuery);\n\n          if (appWrap) {\n            dayIndex = dayIndex + 1;\n            dynamicIndex = appWrap.cellIndex;\n          } else {\n            dayIndex = -1;\n          }\n        }\n\n        if (dayIndex >= 0) {\n          var record = this.verticalEvent.isSpannedEvent(events_1[parseInt(i.toString(), 10)], dayIndex, indexGroup);\n          var eStart = record[this.verticalEvent.fields.startTime];\n          var eEnd = record[this.verticalEvent.fields.endTime];\n          var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) : this.actionObj.element.offsetHeight;\n          var topValue = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getTopValue(eStart, dayIndex, indexGroup) : this.actionObj.element.offsetTop;\n\n          if (isNullOrUndefined(index)) {\n            if (i === 0) {\n              this.actionObj.clone.style.top = formatUnit(topValue);\n              this.actionObj.clone.style.height = formatUnit(appHeight);\n            } else {\n              this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n            }\n          } else {\n            var appWidth = this.actionObj.cellWidth;\n\n            if (event[this.parent.eventFields.isAllDay]) {\n              topValue = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop;\n              appHeight = this.getAllDayEventHeight();\n              var timeDiff = event[this.parent.eventFields.endTime].getTime() - event[this.parent.eventFields.startTime].getTime();\n              var allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\n              if (allDayDifference >= 0) {\n                appWidth = allDayDifference * this.actionObj.cellWidth;\n              }\n            }\n\n            if (this.actionObj.cloneElement[parseInt(index.toString(), 10)]) {\n              if (i === 0) {\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.top = formatUnit(topValue);\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.height = formatUnit(appHeight);\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.width = formatUnit(appWidth);\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.left = formatUnit(0);\n              } else {\n                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n\n  DragAndDrop.prototype.renderSpannedEvents = function (record, index, top, height) {\n    var startTime = record[this.parent.eventFields.startTime].getTime();\n    var endTime = record[this.parent.eventFields.endTime].getTime();\n\n    if (startTime !== endTime) {\n      var appointmentElement = this.verticalEvent.createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);\n      addClass([appointmentElement], [CLONE_ELEMENT_CLASS, 'e-dynamic-clone']);\n      setStyleAttribute(appointmentElement, {\n        'width': '100%',\n        'height': height + 'px',\n        'top': top + 'px',\n        'border': '0px'\n      });\n      var appointmentWrap = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n      appointmentWrap[parseInt(index.toString(), 10)].appendChild(appointmentElement);\n    }\n  };\n\n  DragAndDrop.prototype.getRenderedDates = function () {\n    var _this = this;\n\n    var _a, _b;\n\n    var renderDates = this.parent.activeView.renderDates;\n\n    (_a = this.parent.eventBase.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) {\n      return +date;\n    }));\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.eventBase.slots = [];\n      var resources = this.parent.resourceBase.lastResourceLevel.filter(function (res) {\n        return res.groupIndex === _this.actionObj.groupIndex;\n      });\n      renderDates = resources[0].renderDates;\n\n      (_b = this.parent.eventBase.slots).push.apply(_b, renderDates.map(function (date) {\n        return +date;\n      }));\n    }\n\n    return renderDates;\n  };\n\n  DragAndDrop.prototype.updateAllDayEvents = function (startDate, endDate, colIndex) {\n    this.parent.eventBase.slots = [];\n    var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n    var renderDates = this.getRenderedDates();\n    var events = this.parent.eventBase.splitEvent(event, renderDates);\n    var query = \".e-all-day-cells[data-date=\\\"\" + events[0][this.parent.eventFields.startTime].getTime() + \"\\\"]\";\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n    }\n\n    var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n\n    if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n      var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n      this.appendCloneElement(this.getEventWrapper(cellIndex)); // eslint-disable-next-line max-len\n\n      this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  DragAndDrop.prototype.swapDragging = function (e) {\n    var colIndex = closest(this.actionObj.target, 'td').cellIndex;\n\n    if (closest(this.actionObj.target, '.' + DATE_HEADER_WRAP_CLASS) && !closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n      addClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n      this.appendCloneElement(this.getEventWrapper(colIndex));\n      this.actionObj.isAllDay = true;\n      var eventHeight = this.getAllDayEventHeight();\n      var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n\n      if (allDayElement[0].offsetHeight < eventHeight) {\n        for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {\n          var element = allDayElement_1[_i];\n          element.style.height = (eventHeight + 2) / 12 + 'em';\n        }\n      }\n\n      setStyleAttribute(this.actionObj.clone, {\n        width: formatUnit(this.actionObj.cellWidth),\n        height: formatUnit(eventHeight),\n        top: formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop)\n      });\n    }\n\n    if (closest(this.actionObj.target, '.' + WORK_CELLS_CLASS) && !closest(this.actionObj.clone, '.' + DAY_WRAPPER_CLASS)) {\n      removeClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n      this.appendCloneElement(this.getEventWrapper(colIndex));\n      this.actionObj.isAllDay = false; // eslint-disable-next-line max-len\n\n      var height = this.actionObj.element.offsetHeight === 0 ? this.actionObj.height : this.actionObj.element.offsetHeight;\n      setStyleAttribute(this.actionObj.clone, {\n        left: formatUnit(0),\n        height: formatUnit(height),\n        width: formatUnit(this.actionObj.cellWidth)\n      });\n    }\n  };\n\n  DragAndDrop.prototype.calculateVerticalDate = function (e) {\n    if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, 'tr')) || e.target && e.target.tagName === 'DIV') {\n      return;\n    }\n\n    var eventObj = extend({}, this.actionObj.event, null, true);\n\n    if (isNullOrUndefined(this.parent.eventDragArea)) {\n      this.removeCloneElement();\n    }\n\n    var eventDuration = getUniversalTime(eventObj[this.parent.eventFields.endTime]) - getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n    var td = closest(this.actionObj.target, 'td');\n\n    if (!isNullOrUndefined(td)) {\n      var tr = td.parentElement;\n      this.actionObj.index = tr.rowIndex * tr.children.length + td.cellIndex;\n      var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n      td = workCells[this.actionObj.index];\n      var currentDate = this.parent.getDateFromElement(td);\n\n      if (!isNullOrUndefined(currentDate)) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n\n        var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n        var dragStart$$1 = new Date(timeString.getTime());\n        var startTimeDiff = getUniversalTime(eventObj[this.parent.eventFields.startTime]) - getUniversalTime(resetTime(new Date(+eventObj[this.parent.eventFields.startTime])));\n        dragStart$$1.setMilliseconds(startTimeDiff);\n        var dragEnd = new Date(dragStart$$1.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        this.actionObj.start = new Date(dragStart$$1.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n      }\n    }\n\n    var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n\n    if (isNullOrUndefined(this.parent.eventDragArea)) {\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n\n      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n        var wrapper = eventWrappers_1[_i];\n        remove(wrapper);\n      }\n    }\n\n    if (this.multiData && this.multiData.length > 0) {\n      var startTime = resetTime(new Date(event[this.parent.eventFields.startTime]));\n      var startTimeDiff = startTime.getTime() - this.startTime;\n\n      if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n        startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n        startTimeDiff -= new Date(this.startTime).getMonth();\n        startTimeDiff += startTime.getMonth();\n      }\n\n      for (var index = 0; index < this.multiData.length; index++) {\n        this.updatedData[parseInt(index.toString(), 10)] = this.updateMultipleVerticalDate(this.multiData[parseInt(index.toString(), 10)], startTimeDiff);\n\n        if (this.parent.currentView === 'TimelineYear') {\n          this.dynamicYearlyEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n        } else {\n          this.dynamicEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n        }\n      }\n    } else {\n      if (this.parent.currentView === 'TimelineYear') {\n        this.dynamicYearlyEventsRendering(event);\n      } else {\n        this.dynamicEventsRendering(event);\n      }\n    }\n  };\n\n  DragAndDrop.prototype.updateMultipleVerticalDate = function (data, timeDifference) {\n    var eventObj = extend({}, data, null, true);\n    var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n    var startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n\n    if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n      eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n    } else {\n      var differInDays = Math.ceil(timeDifference / MS_PER_DAY);\n      eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n    }\n\n    eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n    return eventObj;\n  };\n\n  DragAndDrop.prototype.calculateTimelineTime = function (e) {\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventDuration = getUniversalTime(eventObj[this.parent.eventFields.endTime]) - getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n    var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth : parseInt(this.actionObj.clone.style.left, 10);\n    offsetLeft = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth)) * this.actionObj.cellWidth;\n    var rightOffset;\n\n    if (this.parent.enableRtl) {\n      rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n      this.actionObj.clone.style.right = formatUnit(rightOffset);\n    }\n\n    offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n    var colIndex = this.getColumnIndex(offsetLeft);\n    var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var contentWrapRight = dragArea.getBoundingClientRect().right;\n    var cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl && this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);\n    var leftVal = this.parent.eventDragArea ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n\n    if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {\n      this.isCursorAhead = true;\n    }\n\n    var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n\n    if (this.parent.enableRtl) {\n      cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) / this.actionObj.cellWidth)) - 1;\n    }\n\n    if (this.cursorPointIndex < 0) {\n      this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n    }\n\n    var tr = this.parent.getContentTable().querySelector('tr');\n    var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n    index = index < 0 ? 0 : index;\n    var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[parseInt(index.toString(), 10)].getTime()) : this.parent.getDateFromElement(tr.children[parseInt(index.toString(), 10)]);\n\n    if (this.isStepDragging) {\n      var widthDiff = this.getWidthDiff(tr, index);\n\n      if (widthDiff !== 0) {\n        var timeDiff = Math.round(widthDiff / this.widthPerMinute);\n        eventStart.setMinutes(eventStart.getMinutes() + timeDiff * this.actionObj.interval);\n\n        if (this.isCursorAhead || cursorDrag) {\n          eventStart.setMilliseconds(-eventDuration);\n        } else {\n          eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n        }\n      } else {\n        eventStart = this.actionObj.start;\n      }\n    } else {\n      if (this.isCursorAhead || cursorDrag) {\n        var minutes = this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval;\n        eventStart.setMinutes(eventStart.getMinutes() + minutes);\n        eventStart.setMilliseconds(-eventDuration);\n\n        if (eventStart.getTime() === resetTime(eventStart).getTime() && eventStart.getMinutes() === 0 && eventDuration === 0) {\n          eventStart.setMinutes(-minutes);\n        }\n      } else {\n        eventStart.setMinutes(eventStart.getMinutes() - this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval));\n      }\n    }\n\n    eventStart = this.calculateIntervalTime(eventStart);\n\n    if (this.isTimelineDayProcess) {\n      var eventSrt = eventObj[this.parent.eventFields.startTime];\n      eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n    }\n\n    if (this.parent.eventDragArea) {\n      var targetDate = this.parent.getDateFromElement(e.target);\n\n      if (!isNullOrUndefined(targetDate)) {\n        if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === 'TimelineMonth') {\n          var eventSrt = eventObj[this.parent.eventFields.startTime];\n          eventStart = new Date(targetDate.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds()));\n        } else {\n          eventStart = targetDate;\n        }\n      }\n    }\n\n    var eventEnd = new Date(eventStart.getTime());\n    eventEnd.setMilliseconds(eventDuration);\n    var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n\n    if (this.multiData.length > 0) {\n      var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n\n      for (var i = 0; i < this.multiData.length; i++) {\n        this.updatedData[parseInt(i.toString(), 10)] = this.updateMultipleData(this.multiData[parseInt(i.toString(), 10)], startTimeDiff);\n      }\n\n      eventsData = this.updatedData;\n    }\n\n    for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n      var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[parseInt(dataIndex.toString(), 10)] : this.actionObj.clone;\n\n      if (isNullOrUndefined(this.parent.eventDragArea)) {\n        var events_2 = this.timelineEventModule.splitEvent(eventsData[parseInt(dataIndex.toString(), 10)], this.timelineEventModule.dateRender);\n        var eventData = events_2[0].data;\n        var startTime = this.timelineEventModule.getStartTime(events_2[0], eventData);\n        var endTime = this.timelineEventModule.getEndTime(events_2[0], eventData); // eslint-disable-next-line max-len\n\n        var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count); // eslint-disable-next-line max-len\n\n        var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, resetTime(new Date(startTime.getTime())));\n        day = day < 0 ? 0 : day;\n        var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n\n        if (this.parent.enableRtl) {\n          cloneElement.style.right = formatUnit(left);\n        } else {\n          cloneElement.style.left = formatUnit(left);\n        }\n\n        if (!this.isMorePopupOpened) {\n          cloneElement.style.width = formatUnit(width);\n        }\n      }\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.calculateResourceGroupingPosition(e, cloneElement);\n      }\n\n      this.actionObj.start = new Date(eventStart.getTime());\n      this.actionObj.end = new Date(eventEnd.getTime());\n      this.updateTimePosition(this.actionObj.start, this.updatedData);\n    }\n  };\n\n  DragAndDrop.prototype.getOffsetValue = function (offsetLeft, rightOffset) {\n    if (this.scrollEdges.left || this.scrollEdges.right) {\n      var viewEle = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (this.parent.enableRtl) {\n        rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n\n        if (this.scrollEdges.right) {\n          rightOffset = rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth - (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n        } else {\n          rightOffset = rightOffset + this.widthUptoCursorPoint;\n\n          if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n            this.actionObj.clone.style.width = formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n            rightOffset = viewEle.scrollLeft - viewEle.scrollWidth;\n          }\n        }\n\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n          this.actionObj.clone.style.left = formatUnit(rightOffset);\n        }\n      } else {\n        if (this.scrollEdges.left) {\n          offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n\n          if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n            viewEle.scrollLeft = viewEle.scrollLeft - 1;\n          } else if (this.actionObj.clone.offsetLeft === 0) {\n            offsetLeft = viewEle.scrollLeft;\n          }\n        } else {\n          offsetLeft = viewEle.scrollLeft + viewEle.offsetWidth - this.actionObj.clone.offsetWidth + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n        }\n\n        offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n          this.actionObj.clone.style.left = formatUnit(offsetLeft);\n        }\n      }\n    }\n\n    return offsetLeft;\n  };\n\n  DragAndDrop.prototype.getWidthDiff = function (tr, index) {\n    var pages = this.scrollArgs.element.getBoundingClientRect();\n\n    if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n      var targetLeft = tr.children[parseInt(index.toString(), 10)].offsetLeft;\n      var pageX = this.actionObj.pageX - pages.left;\n\n      if (this.parent.enableRtl) {\n        return targetLeft + this.actionObj.cellWidth - (this.scrollArgs.element.scrollLeft + pageX);\n      } else {\n        return this.scrollArgs.element.scrollLeft + pageX - targetLeft;\n      }\n    }\n\n    return 0;\n  };\n\n  DragAndDrop.prototype.getColumnIndex = function (offsetLeft) {\n    var index = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth));\n\n    if (this.isHeaderRows) {\n      return index;\n    }\n\n    return this.getIndex(index);\n  };\n\n  DragAndDrop.prototype.getCursorCurrentIndex = function (colIndex, cloneIndex, tr) {\n    var index = colIndex + cloneIndex;\n\n    if (this.isHeaderRows) {\n      var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n      return index > dateLength - 1 ? dateLength - 1 : index;\n    }\n\n    return index > tr.children.length - 1 ? tr.children.length - 1 : index;\n  };\n\n  DragAndDrop.prototype.cursorIndex = function (e, event, left, index) {\n    var td = closest(e.target, '.e-work-cells');\n\n    if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n      var targetDate = this.parent.getDateFromElement(td);\n\n      if (this.isHeaderRows) {\n        var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n        targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n      }\n\n      var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n\n      if (this.isTimelineDayProcess) {\n        this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / MS_PER_DAY));\n      } else {\n        var widthDiff = Math.floor(timeDiff / MS_PER_MINUTE / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n        this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n        this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n      }\n    } else {\n      this.cursorPointIndex = 0;\n    }\n  };\n\n  DragAndDrop.prototype.calculateResourceGroupingPosition = function (e, cloneElement) {\n    var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n    var translateY = getTranslateY(dragArea.querySelector('table'));\n    translateY = isNullOrUndefined(translateY) ? 0 : translateY;\n    var rowHeight = this.parent.rowAutoHeight ? ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n    var rowIndex = Math.floor(Math.floor(this.actionObj.Y + (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset)) - dragArea.getBoundingClientRect().top) / rowHeight);\n    rowIndex = rowIndex < 0 ? 0 : rowIndex > trCollection.length - 1 ? trCollection.length - 1 : rowIndex;\n    this.actionObj.index = rowIndex;\n    var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n    var eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n    if (!eventWrapper) {\n      eventWrapper = createElement('div', {\n        className: APPOINTMENT_WRAPPER_CLASS\n      });\n      eventContainer.appendChild(eventWrapper);\n    }\n\n    this.appendCloneElement(eventWrapper, cloneElement);\n    var td = closest(this.actionObj.target, 'td');\n    this.actionObj.groupIndex = td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)) ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n\n    if (!isNullOrUndefined(this.parent.eventDragArea)) {\n      return;\n    }\n\n    var top = trCollection[parseInt(rowIndex.toString(), 10)].getBoundingClientRect().height * rowIndex;\n\n    if (this.parent.rowAutoHeight) {\n      var cursorElement = this.getCursorElement(e);\n\n      if (cursorElement) {\n        top = cursorElement.classList.contains(WORK_CELLS_CLASS) ? cursorElement.offsetTop : cursorElement.offsetParent && cursorElement.offsetParent.classList.contains(APPOINTMENT_CLASS) ? cursorElement.offsetParent.offsetTop : top;\n      }\n    }\n\n    cloneElement.style.top = formatUnit(top);\n  };\n\n  DragAndDrop.prototype.appendCloneElement = function (element, cloneElement) {\n    if (cloneElement === void 0) {\n      cloneElement = null;\n    }\n\n    cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n\n    if (this.parent.eventDragArea && dragElement) {\n      dragElement.appendChild(cloneElement);\n    } else {\n      element.appendChild(cloneElement);\n    }\n  };\n\n  DragAndDrop.prototype.getEventWrapper = function (index, isAllDayDrag) {\n    var eventWrapper;\n\n    if (isNullOrUndefined(isAllDayDrag)) {\n      isAllDayDrag = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n    }\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var wrapperClass = isAllDayDrag ? '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n      eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n    } else {\n      var targetWrapper = this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS).item(index);\n      eventWrapper = targetWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n\n      if (!eventWrapper) {\n        eventWrapper = createElement('div', {\n          className: APPOINTMENT_WRAPPER_CLASS\n        });\n        targetWrapper.appendChild(eventWrapper);\n      }\n    }\n\n    return eventWrapper;\n  };\n\n  DragAndDrop.prototype.getAllDayEventHeight = function () {\n    var eventWrapper = createElement('div', {\n      className: APPOINTMENT_CLASS\n    });\n    this.parent.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n    var eventHeight = eventWrapper.offsetHeight;\n    remove(eventWrapper);\n    return eventHeight;\n  };\n\n  DragAndDrop.prototype.isAllowDrop = function (e) {\n    if (!this.actionObj.excludeSelectors) {\n      return false;\n    }\n\n    var dropSelectors = this.actionObj.excludeSelectors.split(',');\n    var isAllowDrop = false;\n\n    for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n      var selector = dropSelectors_1[_i];\n\n      if (e.target.classList.contains(selector)) {\n        isAllowDrop = true;\n        break;\n      }\n    }\n\n    return isAllowDrop;\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} Returns the module name\n   */\n\n\n  DragAndDrop.prototype.getModuleName = function () {\n    return 'dragAndDrop';\n  };\n\n  return DragAndDrop;\n}(ActionBase);\n/**\n * view base\n */\n\n\nvar ViewBase =\n/** @__PURE__ @class */\nfunction () {\n  /**\n   * Constructor\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n  function ViewBase(parent) {\n    this.previousNextAction = 'next';\n    this.parent = parent;\n  }\n\n  ViewBase.prototype.isTimelineView = function () {\n    return this.parent.currentView.indexOf('Timeline') !== -1;\n  };\n\n  ViewBase.prototype.getContentRows = function () {\n    return [];\n  };\n\n  ViewBase.prototype.refreshHeader = function () {// Method to refresh the date header\n  };\n\n  ViewBase.prototype.refreshResourceHeader = function () {\n    remove(this.element.querySelector('tbody').lastElementChild.firstElementChild);\n    var resTd = createElement('td');\n    resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n    prepend([resTd], this.element.querySelector('tbody').lastElementChild);\n    this.parent.notify(contentReady, {});\n  };\n\n  ViewBase.prototype.getDayName = function (date) {\n    return this.parent.getDayNames('abbreviated')[date.getDay()];\n  };\n\n  ViewBase.prototype.getDate = function (date) {\n    return this.parent.globalize.formatDate(date, {\n      format: 'd',\n      calendar: this.parent.getCalendarMode()\n    });\n  };\n\n  ViewBase.prototype.getTime = function (date) {\n    if (this.parent.isAdaptive) {\n      if (this.parent.activeViewOptions.timeFormat === 'HH:mm' || this.parent.activeViewOptions.timeFormat === 'HH.mm') {\n        return this.parent.globalize.formatDate(date, {\n          format: 'H',\n          calendar: this.parent.getCalendarMode()\n        });\n      }\n\n      return this.parent.globalize.formatDate(date, {\n        skeleton: 'h',\n        calendar: this.parent.getCalendarMode()\n      });\n    }\n\n    return this.parent.getTimeString(date);\n  };\n\n  ViewBase.prototype.getTimelineDate = function (date) {\n    var text = this.parent.globalize.formatDate(date, {\n      skeleton: 'MMMd',\n      calendar: this.parent.getCalendarMode()\n    }) + ', ' + this.parent.getDayNames('wide')[date.getDay()];\n    return capitalizeFirstWord(text, 'multiple');\n  };\n\n  ViewBase.prototype.createEventTable = function (trCount) {\n    var eventTable = createElement('div', {\n      className: EVENT_TABLE_CLASS\n    });\n    append(this.getEventRows(trCount), eventTable);\n    return eventTable;\n  };\n\n  ViewBase.prototype.getEventRows = function (trCount) {\n    var eventRows = [];\n    var eventContainer;\n\n    for (var row = 0; row < trCount; row++) {\n      eventContainer = createElement('div', {\n        className: APPOINTMENT_CONTAINER_CLASS\n      });\n\n      if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n        eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)].groupIndex.toString());\n      }\n\n      eventRows.push(eventContainer);\n    }\n\n    return eventRows;\n  };\n\n  ViewBase.prototype.collapseRows = function (wrap) {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n      this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + EVENT_TABLE_CLASS));\n    }\n  };\n\n  ViewBase.prototype.createTableLayout = function (className) {\n    var clsName = className || '';\n    var table = createElement('table', {\n      className: SCHEDULE_TABLE_CLASS + ' ' + clsName\n    });\n    var tbody = createElement('tbody');\n    table.appendChild(tbody);\n    return table;\n  };\n\n  ViewBase.prototype.setAriaAttributes = function (table) {\n    table.setAttribute('role', 'grid');\n    table.setAttribute('aria-label', this.getLabelText(this.parent.currentView));\n  };\n\n  ViewBase.prototype.createColGroup = function (table, lastRow) {\n    var length = lastRow.length;\n\n    if (lastRow[0] && lastRow[0].colSpan) {\n      length = lastRow.map(function (value) {\n        return value.colSpan;\n      }).reduce(function (prev, next) {\n        return prev + next;\n      });\n    }\n\n    var colGroupEle = createElement('colgroup');\n\n    for (var i = 0; i < length; i++) {\n      colGroupEle.appendChild(createElement('col'));\n    }\n\n    prepend([colGroupEle], table);\n  };\n\n  ViewBase.prototype.getScrollXIndent = function (content) {\n    return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;\n  };\n\n  ViewBase.prototype.scrollTopPanel = function (target) {\n    this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n  };\n\n  ViewBase.prototype.scrollHeaderLabels = function (target) {\n    var headerTable = this.element.querySelector('.e-date-header-wrap table');\n    var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n\n    var applyLeft = function (headerCells, isRtl) {\n      var currentCell;\n      var tdLeft = 0;\n      var colSpan = 0;\n      var hiddenLeft = isRtl ? -target.scrollLeft : target.scrollLeft;\n\n      for (var _i = 0, headerCells_2 = headerCells; _i < headerCells_2.length; _i++) {\n        var cell = headerCells_2[_i];\n        colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n\n        if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n          currentCell = cell;\n          break;\n        }\n\n        tdLeft += cell.offsetWidth;\n      }\n\n      if (!isNullOrUndefined(currentCell)) {\n        currentCell.children[0].style[isRtl ? 'right' : 'left'] = hiddenLeft - tdLeft + 'px';\n      }\n    };\n\n    var classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n\n    for (var _i = 0, classNames_1 = classNames; _i < classNames_1.length; _i++) {\n      var className = classNames_1[_i];\n      var headerCells = [].slice.call(this.element.querySelectorAll(className));\n\n      if (headerCells.length > 0) {\n        for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {\n          var element = headerCells_1[_a];\n          element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n        }\n\n        applyLeft(headerCells, this.parent.enableRtl);\n      }\n    }\n  };\n\n  ViewBase.prototype.addAttributes = function (td, element) {\n    if (td.template) {\n      append(td.template, element);\n    }\n\n    if (td.colSpan) {\n      element.setAttribute('colspan', td.colSpan.toString());\n    }\n\n    if (td.className) {\n      addClass([element], td.className);\n    }\n  };\n\n  ViewBase.prototype.getHeaderBarHeight = function () {\n    var headerBarHeight = 2;\n\n    if (this.parent.headerModule) {\n      headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());\n    }\n\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resHeader = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n\n      if (resHeader) {\n        headerBarHeight += resHeader.offsetHeight;\n      }\n    }\n\n    return headerBarHeight;\n  };\n\n  ViewBase.prototype.renderPanel = function (type) {\n    if (type === PREVIOUS_PANEL_CLASS) {\n      prepend([this.element], this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n    } else {\n      this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n    }\n  };\n\n  ViewBase.prototype.setPanel = function (panel) {\n    this.element = panel;\n  };\n\n  ViewBase.prototype.getPanel = function () {\n    return this.element;\n  };\n\n  ViewBase.prototype.getDatesHeaderElement = function () {\n    return this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n    return []; // Here getDateSlots only need in vertical and month views\n  };\n\n  ViewBase.prototype.generateColumnLevels = function () {\n    return []; // Here generateColumnLevels only need in vertical and month views\n  };\n\n  ViewBase.prototype.getColumnLevels = function () {\n    return this.colLevels;\n  };\n\n  ViewBase.prototype.highlightCurrentTime = function () {// Here showTimeIndicator functionalities\n  };\n\n  ViewBase.prototype.getStartDate = function () {\n    return this.renderDates[0];\n  };\n\n  ViewBase.prototype.getEndDate = function () {\n    return this.renderDates[this.renderDates.length - 1];\n  };\n\n  ViewBase.prototype.startDate = function () {\n    return this.renderDates[0];\n  };\n\n  ViewBase.prototype.endDate = function () {\n    return addDays(this.renderDates[this.renderDates.length - 1], 1);\n  };\n\n  ViewBase.prototype.getStartHour = function () {\n    var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n\n    if (isNullOrUndefined(startHour)) {\n      startHour = new Date(2000, 0, 0, 0);\n    }\n\n    return startHour;\n  };\n\n  ViewBase.prototype.getEndHour = function () {\n    var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n\n    if (isNullOrUndefined(endHour)) {\n      endHour = new Date(2000, 0, 0, 0);\n    }\n\n    return endHour;\n  };\n\n  ViewBase.prototype.isCurrentDate = function (date) {\n    return date.setHours(0, 0, 0, 0) === new Date(this.parent.currentTimezoneDate).setHours(0, 0, 0, 0);\n  };\n\n  ViewBase.prototype.isCurrentMonth = function (date) {\n    if (this.parent.activeViewOptions.displayDate || this.parent.activeViewOptions.numberOfWeeks > 0) {\n      return this.parent.activeView.getStartDate().getTime() <= this.parent.getCurrentTime().getTime() && this.parent.activeView.getEndDate().getTime() >= this.parent.getCurrentTime().getTime();\n    }\n\n    return date.getFullYear() === this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n  };\n\n  ViewBase.prototype.isWorkDay = function (date, workDays) {\n    if (workDays === void 0) {\n      workDays = this.parent.activeViewOptions.workDays;\n    }\n\n    if (workDays.indexOf(date.getDay()) >= 0) {\n      return true;\n    }\n\n    return false;\n  };\n\n  ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n    if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n      return false;\n    }\n\n    startHour.setMilliseconds(0);\n    endHour.setMilliseconds(0);\n    return !(getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) || !this.isWorkDay(date, workDays));\n  };\n\n  ViewBase.prototype.getRenderDates = function (workDays) {\n    var renderDates = []; // Due to same code for vertical and time line, week & work week views, if condition has used\n\n    if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n      var selectedDate = resetTime(this.parent.selectedDate);\n      var start = getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n\n      for (var i = 0, length_1 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n        if (this.parent.activeViewOptions.showWeekend) {\n          renderDates.push(start);\n        } else {\n          if (this.isWorkDay(start, workDays)) {\n            renderDates.push(start);\n          }\n        }\n\n        start = addDays(start, 1);\n      }\n    } else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n      var start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n\n      for (var i = 0, length_2 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n        if (this.isWorkDay(start, workDays)) {\n          renderDates.push(start);\n        }\n\n        start = addDays(start, 1);\n      }\n    } else {\n      var dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount : this.parent.activeViewOptions.interval;\n      var start = resetTime(this.parent.selectedDate);\n\n      do {\n        if (this.parent.activeViewOptions.showWeekend) {\n          renderDates.push(start);\n        } else {\n          if (this.isWorkDay(start, workDays)) {\n            renderDates.push(start);\n          }\n        }\n\n        start = addDays(start, 1);\n      } while (dayCount !== renderDates.length);\n    }\n\n    if (!workDays) {\n      this.renderDates = renderDates;\n    }\n\n    if (this.parent.headerModule) {\n      this.parent.headerModule.previousNextIconHandler();\n    }\n\n    return renderDates;\n  };\n\n  ViewBase.prototype.getNextPreviousDate = function (type) {\n    this.previousNextAction = type;\n\n    if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n      if (this.parent.activeViewOptions.showWeekend) {\n        var daysCount = this.parent.activeViewOptions.interval;\n        return addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n      } else {\n        var date = void 0;\n\n        if (type === 'next') {\n          date = addDays(this.renderDates.slice(-1)[0], 1);\n\n          while (!this.isWorkDay(date)) {\n            date = addDays(date, 1);\n          }\n        } else {\n          date = addDays(this.renderDates[0], -1);\n          var count = 0;\n\n          do {\n            if (this.isWorkDay(date)) {\n              count += 1;\n            }\n\n            if (this.parent.activeViewOptions.interval !== count) {\n              date = addDays(date, -1);\n            }\n          } while (this.parent.activeViewOptions.interval !== count);\n        }\n\n        return date;\n      }\n    }\n\n    var weekLength = type === 'next' ? WEEK_LENGTH : -WEEK_LENGTH;\n    return addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n  };\n\n  ViewBase.prototype.getLabelText = function (view) {\n    var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n    return this.parent.localeObj.getConstant(viewStr) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n      skeleton: 'long',\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n\n  ViewBase.prototype.getDateRangeText = function () {\n    if (this.parent.isAdaptive) {\n      var formatDate = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n      return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n        format: formatDate,\n        calendar: this.parent.getCalendarMode()\n      }), 'single');\n    }\n\n    return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n  };\n\n  ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n    var globalize = this.parent.globalize;\n    var mode = this.parent.getCalendarMode();\n\n    if (startDate === endDate) {\n      endDate = null;\n    }\n\n    if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n      var text = '';\n\n      if (!endDate) {\n        text = globalize.formatDate(startDate, {\n          format: this.parent.activeViewOptions.dateFormat,\n          calendar: mode\n        });\n        return capitalizeFirstWord(text, 'multiple');\n      }\n\n      text = globalize.formatDate(startDate, {\n        format: this.parent.activeViewOptions.dateFormat,\n        calendar: mode\n      }) + ' - ' + globalize.formatDate(endDate, {\n        format: this.parent.activeViewOptions.dateFormat,\n        calendar: mode\n      });\n      return capitalizeFirstWord(text, 'multiple');\n    }\n\n    var formattedStr;\n    var longDateFormat;\n\n    if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n      longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n    } else {\n      longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n    }\n\n    if (!endDate) {\n      return capitalizeFirstWord(globalize.formatDate(startDate, {\n        format: longDateFormat,\n        calendar: mode\n      }), 'single');\n    }\n\n    var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n\n    if (dateFormat.substr(0, 1) === 'd') {\n      if (startDate.getFullYear() === endDate.getFullYear()) {\n        if (startDate.getMonth() === endDate.getMonth()) {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'dd',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'dd MMMM yyyy',\n            calendar: mode\n          });\n        } else {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'dd MMM',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'dd MMM yyyy',\n            calendar: mode\n          });\n        }\n      } else {\n        formattedStr = globalize.formatDate(startDate, {\n          format: 'dd MMM yyyy',\n          calendar: mode\n        }) + ' - ' + globalize.formatDate(endDate, {\n          format: 'dd MMM yyyy',\n          calendar: mode\n        });\n      }\n    } else if (dateFormat.substr(0, 1) === 'm') {\n      if (startDate.getFullYear() === endDate.getFullYear()) {\n        if (startDate.getMonth() === endDate.getMonth()) {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'MMMM dd',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'dd, yyyy',\n            calendar: mode\n          });\n        } else {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'MMM dd',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'MMM dd, yyyy',\n            calendar: mode\n          });\n        }\n      } else {\n        formattedStr = globalize.formatDate(startDate, {\n          format: 'MMM dd, yyyy',\n          calendar: mode\n        }) + ' - ' + globalize.formatDate(endDate, {\n          format: 'MMM dd, yyyy',\n          calendar: mode\n        });\n      }\n    } else {\n      formattedStr = globalize.formatDate(startDate, {\n        format: longDateFormat,\n        calendar: mode\n      }) + ' - ' + globalize.formatDate(endDate, {\n        format: longDateFormat,\n        calendar: mode\n      });\n    }\n\n    return capitalizeFirstWord(formattedStr, 'multiple');\n  };\n\n  ViewBase.prototype.getMobileDateElement = function (date, className) {\n    var wrap = createElement('div', {\n      className: className,\n      innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, {\n        format: 'd',\n        calendar: this.parent.getCalendarMode()\n      }) + '</div>' + '<div class=\"e-m-day\">' + capitalizeFirstWord(this.parent.globalize.formatDate(date, {\n        format: 'E',\n        calendar: this.parent.getCalendarMode()\n      }), 'single') + '</div>'\n    });\n    return wrap;\n  };\n\n  ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n    if (className === void 0) {\n      className = TEXT_ELLIPSIS;\n    }\n\n    if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n      var data = {\n        resource: tdData.resource,\n        resourceData: tdData.resourceData\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n      var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n      var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n      append(quickTemplate, tdElement);\n    } else {\n      var resourceText = createElement('div', {\n        className: className\n      });\n      this.parent.sanitize(tdData.resourceData[tdData.resource.textField], resourceText);\n      tdElement.appendChild(resourceText);\n    }\n  };\n\n  ViewBase.prototype.renderResourceMobileLayout = function () {\n    if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n      return;\n    }\n\n    this.parent.resourceBase.renderResourceHeader();\n    this.parent.resourceBase.renderResourceTree();\n  };\n\n  ViewBase.prototype.addAutoHeightClass = function (element) {\n    if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n      addClass([element], AUTO_HEIGHT);\n    }\n  };\n\n  ViewBase.prototype.getColElements = function () {\n    return [].slice.call(this.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' col, .' + DATE_HEADER_WRAP_CLASS + ' col'));\n  };\n\n  ViewBase.prototype.setColWidth = function (content) {\n    if (this.isTimelineView()) {\n      var colElements = this.getColElements();\n      var contentBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n      var colWidth_1 = contentBody.getBoundingClientRect().width / (colElements.length / 2);\n\n      if (content.offsetHeight !== content.clientHeight) {\n        var resourceColumn = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n\n        if (!isNullOrUndefined(resourceColumn)) {\n          setStyleAttribute(resourceColumn, {\n            'height': formatUnit(content.clientHeight)\n          });\n        }\n      }\n\n      var cssClass = \".\" + HEADER_CELLS_CLASS + \",.\" + TIME_SLOT_CLASS + \",.\" + HEADER_WEEK_CELLS_CLASS + \",.\" + HEADER_MONTH_CELLS_CLASS + \",.\" + HEADER_YEAR_CELLS_CLASS;\n      var headerCellElements = [].slice.call(this.element.querySelectorAll(cssClass));\n      headerCellElements.forEach(function (ele) {\n        var colSpan = isNullOrUndefined(ele.getAttribute('colspan')) ? '1' : ele.getAttribute('colspan');\n        var headerCellColSpan = parseInt(colSpan, 10);\n        setStyleAttribute(ele, {\n          'width': formatUnit(colWidth_1 * headerCellColSpan)\n        });\n      });\n    }\n  };\n\n  ViewBase.prototype.resetColWidth = function () {\n    var colElements = this.getColElements();\n\n    for (var _i = 0, colElements_1 = colElements; _i < colElements_1.length; _i++) {\n      var col = colElements_1[_i];\n      col.style.width = '';\n    }\n  };\n\n  ViewBase.prototype.getContentAreaElement = function () {\n    return this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n  };\n\n  ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n    if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n      var treeIcons = [].slice.call(this.element.querySelectorAll('.' + RESOURCE_TREE_ICON_CLASS));\n\n      for (var _i = 0, treeIcons_1 = treeIcons; _i < treeIcons_1.length; _i++) {\n        var icon = treeIcons_1[_i];\n        EventHandler.clearEvents(icon);\n        EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n      }\n    }\n  };\n\n  ViewBase.prototype.scrollToDate = function (scrollDate) {\n    if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n      return;\n    }\n\n    var scrollWrap = this.getContentAreaElement();\n    var tdDate = new Date(resetTime(new Date(+scrollDate)).getTime()).getTime();\n    var dateElement = scrollWrap.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-date=\\\"\" + tdDate + \"\\\"]\");\n\n    if (this.parent.currentView === 'Month' && dateElement) {\n      if (scrollWrap.scrollWidth > scrollWrap.clientWidth) {\n        if (!this.parent.enableRtl) {\n          scrollWrap.scrollLeft = dateElement.offsetLeft;\n        } else {\n          scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n        }\n      }\n\n      scrollWrap.scrollTop = dateElement.offsetTop;\n    }\n\n    if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n      if (!this.parent.enableRtl) {\n        scrollWrap.scrollLeft = dateElement.offsetLeft;\n      } else {\n        scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n      }\n    }\n  };\n\n  ViewBase.prototype.setPersistence = function () {\n    if (this.parent.enablePersistence) {\n      var contentWrap = this.element.querySelector('.e-content-wrap');\n\n      if (!isNullOrUndefined(contentWrap)) {\n        this.parent.scrollLeft = contentWrap.scrollLeft;\n        this.parent.scrollTop = contentWrap.scrollTop;\n      }\n    }\n  };\n\n  ViewBase.prototype.retainScrollPosition = function () {\n    if (this.parent.enablePersistence) {\n      var conWrap = this.parent.element.querySelector('.e-content-wrap');\n\n      if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n        conWrap.scrollTop = this.parent.scrollTop;\n        conWrap.scrollLeft = this.parent.scrollLeft;\n      }\n    }\n  };\n\n  ViewBase.prototype.getViewStartDate = function () {\n    var startDate = this.renderDates[0];\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n      startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n    }\n\n    return startDate;\n  };\n\n  ViewBase.prototype.getViewEndDate = function () {\n    var endDate = addDays(this.renderDates[this.renderDates.length - 1], 1);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n      endDate = addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n    }\n\n    return endDate;\n  };\n\n  ViewBase.prototype.getAdjustedDate = function (startTime) {\n    if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length === 0) {\n      return new Date(startTime.setHours(0, 0, 0, 0));\n    } else if (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length > 0) {\n      startTime.setHours(0, 0, 0, 0);\n      return new Date(startTime.setDate(1));\n    }\n\n    return null;\n  };\n\n  ViewBase.prototype.resetColLevels = function () {\n    this.parent.resourceBase.expandedResources = [];\n    var renderedCount = this.parent.virtualScrollModule.getRenderedCount();\n    var lastLevel = this.parent.activeViewOptions.group.byDate ? this.colLevels[0] : this.parent.resourceBase.renderedResources;\n    var index = 0;\n\n    for (var i = 0; i < lastLevel.length; i++) {\n      if (index >= renderedCount) {\n        break;\n      }\n\n      index += lastLevel[parseInt(i.toString(), 10)].colSpan;\n      this.parent.resourceBase.expandedResources.push(lastLevel[parseInt(i.toString(), 10)]);\n    }\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      this.colLevels[0] = this.parent.resourceBase.expandedResources;\n      this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources);\n    } else {\n      this.colLevels[this.colLevels.length - 2] = this.parent.resourceBase.expandedResources;\n      this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources;\n    }\n\n    if (this.parent.currentView !== 'Month') {\n      this.colLevels[this.colLevels.length - 1] = this.colLevels[this.colLevels.length - 1].slice(0, index);\n      this.parent.resourceBase.expandedResources = this.colLevels[this.colLevels.length - 1];\n    }\n  };\n\n  ViewBase.prototype.destroy = function () {\n    if (this.element && this.element.parentNode) {\n      remove(this.element);\n    }\n\n    this.element = null;\n    this.renderDates = null;\n    this.colLevels = null;\n  };\n\n  return ViewBase;\n}();\n\nvar __extends$18 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * vertical view\n */\n\n\nvar VerticalView =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$18(VerticalView, _super);\n\n  function VerticalView(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-day-view';\n    _this.isInverseTableSelect = true;\n    _this.baseCssClass = 'e-vertical-view';\n    _this.appointment = null;\n    return _this;\n  }\n\n  VerticalView.prototype.getModuleName = function () {\n    return 'verticalView';\n  };\n\n  VerticalView.prototype.addEventListener = function () {\n    this.parent.on(scrollUiUpdate, this.scrollUiUpdate, this);\n    this.parent.on(dataReady, this.renderEvents, this);\n  };\n\n  VerticalView.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(scrollUiUpdate, this.scrollUiUpdate);\n      this.parent.off(dataReady, this.renderEvents);\n    }\n  };\n\n  VerticalView.prototype.renderEvents = function () {\n    this.appointment = this.parent.activeViewOptions.timeScale.enable ? new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n    this.appointment.renderAppointments();\n    this.parent.notify(eventsLoaded, {});\n  };\n\n  VerticalView.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    var target = e.target;\n    this.parent.notify(virtualScroll, e);\n    this.scrollLeftPanel(target);\n    this.scrollTopPanel(target);\n\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = target.scrollTop;\n    }\n\n    this.parent.uiStateValues.left = target.scrollLeft;\n\n    if (!isNullOrUndefined(this.parent.quickPopup)) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    this.setPersistence();\n  };\n\n  VerticalView.prototype.onAdaptiveMove = function (e) {\n    if (this.parent.uiStateValues.action) {\n      e.preventDefault();\n    }\n  };\n\n  VerticalView.prototype.onAdaptiveScroll = function (e) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.removeNewEventElement();\n      this.parent.uiStateValues.top = e.target.scrollTop;\n    }\n  };\n\n  VerticalView.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n\n    if (!isNullOrUndefined(leftPanel)) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n\n  VerticalView.prototype.scrollUiUpdate = function (args) {\n    if (!this.parent) {\n      return;\n    }\n\n    var dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n    var headerBarHeight = this.getHeaderBarHeight();\n    var timeCells = this.getLeftPanelElement();\n    var content = this.getScrollableElement();\n    var header = this.getDatesHeaderElement();\n    var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n    this.setContentHeight(content, timeCells, scrollerHeight);\n    this.setColWidth(content);\n    var scrollBarWidth = getScrollBarWidth(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = ''; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    header.style[args.cssProperties.rtlPadding] = '';\n    var isDateHeaderScroll = this.parent.enableAllDayScroll ? !(content.offsetWidth - content.clientWidth <= dateHeader.offsetWidth - dateHeader.clientWidth && dateHeader.classList.contains('e-all-day-scroll')) : true;\n\n    if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = ''; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      header.style[args.cssProperties.padding] = '';\n    }\n\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        if (this.parent.currentView.indexOf('Timeline') > -1) {\n          content.scrollTop = this.parent.uiStateValues.top;\n        }\n\n        this.scrollToWorkHour();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        if (timeCells) {\n          timeCells.scrollTop = this.parent.uiStateValues.top;\n        }\n\n        content.scrollTop = this.parent.uiStateValues.top;\n        content.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.highlightCurrentTime();\n    }\n\n    this.retainScrollPosition();\n  };\n\n  VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    } else {\n      if (!isNullOrUndefined(leftPanelElement)) {\n        leftPanelElement.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height - this.getScrollXIndent(element));\n      }\n\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    }\n  };\n\n  VerticalView.prototype.scrollToWorkHour = function () {\n    if (this.parent.workHours.highlight) {\n      var firstWorkHourCell = this.element.querySelector('.' + WORK_HOURS_CLASS);\n\n      if (firstWorkHourCell) {\n        this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.left = 0;\n      }\n    }\n  };\n\n  VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n    var date = this.parent.getStartEndTime(hour);\n\n    if (!isNullOrUndefined(scrollDate)) {\n      var headerElement = this.element.querySelector('.' + HEADER_CELLS_CLASS + '[data-date=\"' + new Date(resetTime(scrollDate)).getTime() + '\"]');\n\n      if (headerElement) {\n        if (this.parent.enableRtl) {\n          var conWrap = this.element.querySelector('.' + CONTENT_TABLE_CLASS);\n          this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n        } else {\n          this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n        }\n      }\n    }\n\n    if (isNullOrUndefined(date)) {\n      return;\n    }\n\n    this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n  };\n\n  VerticalView.prototype.scrollToDate = function (scrollDate) {\n    this.scrollToHour(null, scrollDate);\n  };\n\n  VerticalView.prototype.generateColumnLevels = function () {\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    var columnLevels = [];\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n      if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n        while (columnLevels[0].length === 0) {\n          this.parent.setProperties({\n            selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction)\n          }, true);\n          this.parent.activeView.getRenderDates();\n\n          if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n            this.parent.headerModule.updateDateRange();\n          }\n\n          level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n          columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n        }\n      }\n\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n        var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n        var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n        columnLevels = [dateSlots];\n      }\n    } else {\n      columnLevels.push(level);\n    }\n\n    this.colLevels = columnLevels;\n    return columnLevels;\n  }; // eslint-disable-next-line max-len\n\n\n  VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n    if (workStartHour === void 0) {\n      workStartHour = this.parent.workHours.start;\n    }\n\n    if (workEndHour === void 0) {\n      workEndHour = this.parent.workHours.end;\n    }\n\n    var dateCol = [];\n    var start = this.parent.getStartEndTime(workStartHour);\n    var end = this.parent.getStartEndTime(workEndHour);\n\n    for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n      var col = renderDates_1[_i];\n      var classList$$1 = [HEADER_CELLS_CLASS];\n\n      if (this.isCurrentDate(col)) {\n        classList$$1.push(CURRENT_DAY_CLASS);\n      }\n\n      dateCol.push({\n        date: col,\n        type: 'dateHeader',\n        className: classList$$1,\n        colSpan: 1,\n        workDays: workDays,\n        startHour: new Date(+start),\n        endHour: new Date(+end)\n      });\n    }\n\n    return dateCol;\n  };\n\n  VerticalView.prototype.isWorkHourRange = function (date) {\n    return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();\n  };\n\n  VerticalView.prototype.highlightCurrentTime = function () {\n    var _this = this;\n\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return;\n    }\n\n    var currentDate = this.parent.getCurrentTime();\n\n    if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n\n      if (currentDateIndex.length > 0) {\n        var workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n\n        if (workCells.length > 0) {\n          this.changeCurrentTimePosition();\n        }\n\n        if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n          var interval = MS_PER_MINUTE - (currentDate.getSeconds() * 1000 + currentDate.getMilliseconds());\n\n          if (interval <= MS_PER_MINUTE - 1000) {\n            window.setTimeout(function () {\n              if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                _this.clearCurrentTimeIndicatorTimer();\n\n                _this.changeCurrentTimePosition();\n\n                _this.updateCurrentTimeIndicatorTimer();\n              }\n            }, interval);\n          }\n\n          this.updateCurrentTimeIndicatorTimer();\n        }\n      } else {\n        this.clearCurrentTimeIndicatorTimer();\n      }\n    } else {\n      this.clearCurrentTimeIndicatorTimer();\n    }\n  };\n\n  VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n    var currentDateIndex = [];\n\n    if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var count = 0;\n      var currentDate = resetTime(this.parent.getCurrentTime());\n\n      if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.byDate) {\n        for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n          var resource = _a[_i];\n\n          if (resetTime(resource.date).getTime() === currentDate.getTime()) {\n            currentDateIndex.push(count);\n          }\n\n          count += 1;\n        }\n      } else {\n        for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n          var resource = _c[_b];\n          var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n\n          if (index >= 0) {\n            var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;\n            currentDateIndex.push(resIndex);\n          }\n\n          count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n        }\n      }\n    } else {\n      var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n      var index = this.parent.getIndexOfDate(renderDates, resetTime(this.parent.getCurrentTime()));\n\n      if (index >= 0) {\n        currentDateIndex.push(index);\n      }\n    }\n\n    return currentDateIndex;\n  };\n\n  VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n    if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n      window.clearInterval(this.currentTimeIndicatorTimer);\n      this.currentTimeIndicatorTimer = null;\n      this.removeCurrentTimeIndicatorElements();\n    }\n  };\n\n  VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n    var _this = this;\n\n    this.currentTimeIndicatorTimer = window.setInterval(function () {\n      _this.changeCurrentTimePosition();\n    }, MS_PER_MINUTE);\n  };\n\n  VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n    var queryString = '.' + PREVIOUS_TIMELINE_CLASS + ',.' + CURRENT_TIMELINE_CLASS + ',.' + CURRENT_TIME_CLASS;\n    var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n\n    for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n      var indicator = timeIndicator_1[_i];\n      remove(indicator);\n    }\n  };\n\n  VerticalView.prototype.changeCurrentTimePosition = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeCurrentTimeIndicatorElements();\n    var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n    var firstRow = this.parent.getContentTable().rows[0];\n    var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n    var topInPx = formatUnit(top);\n    var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n    var timeCellsWrap = this.getLeftPanelElement();\n    var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n\n    if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n      return;\n    }\n\n    var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + TIMELINE_WRAPPER_CLASS));\n\n    for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n      curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', {\n        className: PREVIOUS_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n\n    for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n      var day = currentDateIndex_1[_i];\n      curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', {\n        className: CURRENT_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n\n    var currentTimeEle = createElement('div', {\n      innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n      className: CURRENT_TIME_CLASS,\n      styles: 'top:' + topInPx\n    });\n\n    if (rowIndex <= timeTrs.length) {\n      removeClass(timeCellsWrap.querySelectorAll('.' + HIDE_CHILDS_CLASS), HIDE_CHILDS_CLASS);\n\n      if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n        addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], HIDE_CHILDS_CLASS);\n      }\n\n      prepend([currentTimeEle], timeCellsWrap);\n      currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);\n    }\n  };\n\n  VerticalView.prototype.getTopFromDateTime = function (date) {\n    var startHour = this.getStartHour();\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n  };\n\n  VerticalView.prototype.getWorkCellHeight = function () {\n    return parseFloat(this.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n  };\n\n  VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n    var cntEle;\n    var wrapper = createElement('div');\n    var templateName = '';\n    var templateId = this.parent.element.id + '_';\n\n    switch (type) {\n      case 'dateHeader':\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n          templateName = 'dateHeaderTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n          cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        } else {\n          wrapper.innerHTML = this.parent.activeView.isTimelineView() ? \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" : \"<div class=\\\"e-header-day\\\">\" + capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" + (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'majorSlot':\n        if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n          templateName = 'majorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'minorSlot':\n        if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n          templateName = 'minorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'alldayCells':\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var viewName = this.parent.activeViewOptions.cellTemplateName;\n          templateName = 'cellTemplate';\n          var args = {\n            date: date,\n            type: type,\n            groupIndex: groupIndex\n          };\n          cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        }\n\n        break;\n    }\n\n    return cntEle;\n  };\n\n  VerticalView.prototype.refreshHeader = function () {\n    remove(this.element.querySelector('tbody tr'));\n    this.renderHeader();\n    this.parent.notify(contentReady, {});\n  };\n\n  VerticalView.prototype.renderLayout = function (type) {\n    this.setPanel(createElement('div', {\n      className: TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.baseCssClass, this.viewClass];\n    clsList.push(type);\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      addClass([this.element], [TIMESCALE_DISABLE, this.viewClass]);\n    }\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n      clsList.push(VIRTUAL_SCROLL_CLASS);\n    }\n\n    if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n      clsList.push(IGNORE_WHITESPACE);\n    }\n\n    this.renderPanel(type);\n    addClass([this.element], clsList);\n    this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n\n    this.parent.notify(contentReady, {});\n  };\n\n  VerticalView.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var indentTd = createElement('td', {\n        className: LEFT_INDENT_CLASS\n      });\n      indentTd.appendChild(this.renderLeftIndent());\n      tr.appendChild(indentTd);\n    }\n\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n\n  VerticalView.prototype.renderContent = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n    }\n\n    var tr = createElement('tr');\n    var workTd = createElement('td');\n\n    if (this.parent.isAdaptive) {\n      workTd.setAttribute('colspan', this.parent.activeViewOptions.timeScale.enable ? '2' : '1');\n      var scrollContainer = createElement('div', {\n        className: SCROLL_CONTAINER_CLASS\n      });\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        scrollContainer.appendChild(this.renderTimeCells());\n      }\n\n      scrollContainer.appendChild(this.renderContentArea());\n      workTd.appendChild(scrollContainer);\n      EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n      EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n      tr.appendChild(workTd);\n    } else {\n      var levels = this.colLevels.slice(0);\n\n      if (this.parent.virtualScrollModule) {\n        this.resetColLevels();\n      }\n\n      var wrap = this.renderContentArea();\n      workTd.appendChild(wrap);\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var timesTd = createElement('td');\n        timesTd.appendChild(this.renderTimeCells());\n        tr.appendChild(timesTd);\n      }\n\n      tr.appendChild(workTd);\n\n      if (this.parent.virtualScrollModule) {\n        this.colLevels = levels;\n        this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n      }\n    }\n\n    this.element.querySelector('tbody').appendChild(tr);\n  };\n\n  VerticalView.prototype.renderLeftIndent = function () {\n    var wrap = createElement('div', {\n      className: LEFT_INDENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n    var nth;\n\n    for (var i = 0; i < rowCount; i++) {\n      var ntr_1 = trEle.cloneNode();\n      var data_1 = {\n        className: [this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0]],\n        type: 'emptyCells'\n      };\n\n      if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(HEADER_CELLS_CLASS) !== -1) {\n        data_1.className.push(WEEK_NUMBER_CLASS);\n        var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n        data_1.template = [createElement('span', {\n          innerHTML: '' + weekNo,\n          attrs: {\n            title: this.parent.localeObj.getConstant('week') + ' ' + weekNo\n          }\n        })];\n      }\n\n      nth = this.createTd(data_1);\n      this.parent.renderHeaderIndentTemplate(data_1, nth);\n      ntr_1.appendChild(nth);\n      tbl.querySelector('tbody').appendChild(ntr_1);\n    }\n\n    var ntr = trEle.cloneNode();\n    var appointmentExpandCollapse = createElement('div', {\n      attrs: {\n        'tabindex': '0',\n        'role': 'list',\n        title: this.parent.localeObj.getConstant('expandAllDaySection'),\n        'aria-disabled': 'false',\n        'aria-label': 'Expand section'\n      },\n      className: ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + APPOINTMENT_ROW_EXPAND_CLASS + ' ' + ICON + ' ' + DISABLE_CLASS\n    });\n    var data = {\n      className: [ALLDAY_CELLS_CLASS],\n      type: 'emptyCells'\n    };\n    nth = this.createTd(data);\n    nth.appendChild(appointmentExpandCollapse);\n    this.parent.renderHeaderIndentTemplate(data, nth);\n    ntr.appendChild(nth);\n    tbl.querySelector('tbody').appendChild(ntr);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr', {\n      className: HEADER_ROW_CLASS\n    });\n    var rowCount = this.colLevels.length;\n    var lastLevel = this.colLevels[rowCount - 1];\n\n    for (var i = 0; i < rowCount; i++) {\n      var ntr = trEle.cloneNode();\n      var level = this.colLevels[parseInt(i.toString(), 10)];\n\n      for (var j = 0; j < level.length; j++) {\n        ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n      }\n\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n\n    this.createAllDayRow(tbl, lastLevel);\n    this.createColGroup(tbl, lastLevel);\n    wrap.appendChild(tbl);\n    return container;\n  };\n\n  VerticalView.prototype.createAllDayRow = function (table, tdData) {\n    var ntr = createElement('tr', {\n      className: ALLDAY_ROW_CLASS\n    });\n\n    for (var j = 0; j < tdData.length; j++) {\n      var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n      td.className = [ALLDAY_CELLS_CLASS];\n      td.type = 'alldayCells';\n      var ntd = this.createTd(td);\n      ntd.setAttribute('data-date', td.date.getTime().toString());\n\n      if (!isNullOrUndefined(td.groupIndex)) {\n        ntd.setAttribute('data-group-index', '' + td.groupIndex);\n      } else if (this.parent.uiStateValues.isGroupAdaptive) {\n        ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n      }\n\n      this.wireCellEvents(ntd);\n      ntr.appendChild(ntd);\n    }\n\n    table.querySelector('tbody').appendChild(ntr);\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n    prepend([thead], table);\n  };\n\n  VerticalView.prototype.createTd = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n\n    if (td.date && td.type) {\n      var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n\n      if (ele && ele.length) {\n        append(ele, tdEle);\n      }\n    }\n\n    if (!this.parent.isMinMaxDate(resetTime(new Date('' + td.date)))) {\n      addClass([tdEle], DISABLE_DATES);\n    }\n\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n\n    if (td.type === 'dateHeader' && td.className.indexOf(HEADER_CELLS_CLASS) >= 0) {\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n\n      if (!isNullOrUndefined(td.groupIndex)) {\n        tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n      }\n\n      this.wireMouseEvents(tdEle);\n    }\n\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(renderCell, args);\n    return tdEle;\n  };\n\n  VerticalView.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    this.wireMouseEvents(element);\n  };\n\n  VerticalView.prototype.wireMouseEvents = function (element) {\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n\n  VerticalView.prototype.renderTimeCells = function () {\n    var _this = this;\n\n    var wrap = createElement('div', {\n      className: TIME_CELLS_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n\n    var handler = function (r) {\n      r.type = r.first ? 'majorSlot' : 'minorSlot';\n      r.className = r.last ? [TIME_CELLS_CLASS, TIME_SLOT_CLASS] : [TIME_SLOT_CLASS];\n      var ntr = trEle.cloneNode();\n      var data = {\n        date: r.date,\n        type: r.type,\n        className: r.className\n      };\n      ntr.appendChild(_this.createTd(data));\n      tbl.querySelector('tbody').appendChild(ntr);\n      return r;\n    };\n\n    this.getTimeSlotRows(handler);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderContentArea = function () {\n    var wrap = createElement('div', {\n      className: CONTENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    this.addAutoHeightClass(tbl);\n    this.renderContentTable(tbl);\n    this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n    wrap.appendChild(tbl);\n    this.wireCellEvents(tbl.querySelector('tbody'));\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderContentTable = function (table) {\n    var tBody = table.querySelector('tbody');\n    append(this.getContentRows(), tBody);\n    this.renderContentTableHeader(table);\n  };\n\n  VerticalView.prototype.getContentRows = function () {\n    var _this = this;\n\n    var rows = [];\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        'aria-selected': 'false'\n      }\n    });\n\n    var handler = function (r) {\n      var ntr = tr.cloneNode();\n\n      for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var tdData = _a[_i];\n\n        var ntd = _this.createContentTd(tdData, r, td);\n\n        ntr.appendChild(ntd);\n      }\n\n      rows.push(ntr);\n      return r;\n    };\n\n    this.getTimeSlotRows(handler);\n    return rows;\n  };\n\n  VerticalView.prototype.createContentTd = function (tdData, r, td) {\n    var ntd = td.cloneNode();\n\n    if (tdData.colSpan) {\n      ntd.setAttribute('colspan', tdData.colSpan.toString());\n    }\n\n    var clsName = this.getContentTdClass(r);\n    var cellDate = resetTime(tdData.date);\n\n    if (!this.parent.isMinMaxDate(cellDate)) {\n      clsName.push(DISABLE_DATES);\n    }\n\n    setTime(cellDate, getDateInMs(r.date));\n    var type = 'workCells';\n\n    if (tdData.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n      clsName.push(RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n\n    if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {\n      clsName.push(WORK_HOURS_CLASS);\n    }\n\n    addClass([ntd], clsName);\n\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var args_1 = {\n        date: cellDate,\n        type: type,\n        groupIndex: tdData.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n      append(tooltipTemplate, ntd);\n    }\n\n    ntd.setAttribute('data-date', cellDate.getTime().toString());\n\n    if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: cellDate,\n      groupIndex: tdData.groupIndex\n    };\n    this.parent.trigger(renderCell, args);\n    return ntd;\n  };\n\n  VerticalView.prototype.getContentTdClass = function (r) {\n    return r.last ? [WORK_CELLS_CLASS] : [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n  };\n\n  VerticalView.prototype.renderContentTableHeader = function (table) {\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper());\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n    }\n\n    prepend([thead], table);\n  };\n\n  VerticalView.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n\n  VerticalView.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + TIME_CELLS_WRAP_CLASS);\n  };\n\n  VerticalView.prototype.getEndDateFromStartDate = function (start) {\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var end = new Date(start.getTime());\n    end.setMilliseconds(end.getMilliseconds() + msInterval);\n    return end;\n  };\n\n  VerticalView.prototype.getTimeSlotRows = function (handler) {\n    var rows = [];\n    var startHour = this.getStartHour();\n    var endHour = this.getEndHour();\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var length = Math.round(MS_PER_DAY / msInterval);\n    var msStartHour = startHour.getTime();\n    var msEndHour = endHour.getTime();\n\n    if (msStartHour !== msEndHour) {\n      var duration = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n      length = Math.abs(msEndHour - msStartHour) / msInterval - (new Date(msEndHour).getTimezoneOffset() - new Date(msStartHour).getTimezoneOffset()) / duration;\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      length = 1;\n    }\n\n    var start = this.parent.getStartEndTime(this.parent.workHours.start);\n    var end = this.parent.getStartEndTime(this.parent.workHours.end);\n\n    for (var i = 0; i < length; i++) {\n      var dt = new Date(msStartHour + msInterval * i);\n\n      if (isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n        var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n        dt = new Date(dt.getTime() - 1000 * 60 * timeOffset);\n      }\n\n      var majorTickDivider = i % (msMajorInterval / msInterval);\n      var row = {\n        date: new Date('' + dt),\n        startHour: start,\n        endHour: end,\n        first: majorTickDivider === 0,\n        middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,\n        last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,\n        type: ''\n      };\n\n      if (handler) {\n        handler(row);\n      }\n\n      rows.push(row);\n    }\n\n    return rows;\n  };\n\n  VerticalView.prototype.getAdjustedDate = function (startTime) {\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      return new Date(startTime.setHours(0, 0, 0, 0));\n    } else {\n      var timeSlots = this.getTimeSlotRows();\n      var startDate = new Date(new Date(timeSlots[0].date.getTime()).setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n\n      for (var i = 0; i < timeSlots.length; i++) {\n        if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n          startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n          return new Date(startTime);\n        }\n      }\n    }\n\n    return null;\n  };\n\n  VerticalView.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.clearCurrentTimeIndicatorTimer();\n\n    if (this.element) {\n      if (this.appointment) {\n        this.appointment.destroy();\n        this.appointment = null;\n      }\n\n      var contentScrollableEle = this.getContentAreaElement();\n\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n      }\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n\n      _super.prototype.destroy.call(this);\n    }\n  };\n\n  return VerticalView;\n}(ViewBase);\n\nvar __extends$17 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * day view\n */\n\n\nvar Day =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$17(Day, _super);\n  /**\n   * Constructor for day view\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n\n\n  function Day(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-day-view';\n    return _this;\n  }\n  /**\n   * Get module name.\n   *\n   * @returns {string} Returns the module name.\n   */\n\n\n  Day.prototype.getModuleName = function () {\n    return 'day';\n  };\n\n  return Day;\n}(VerticalView);\n\nvar __extends$19 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * week view\n */\n\n\nvar Week =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$19(Week, _super);\n  /**\n   * Constructor for week view\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n\n\n  function Week(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-week-view';\n    return _this;\n  }\n\n  Week.prototype.startDate = function () {\n    return this.getViewStartDate();\n  };\n\n  Week.prototype.endDate = function () {\n    return this.getViewEndDate();\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} Returns the module name.\n   */\n\n\n  Week.prototype.getModuleName = function () {\n    return 'week';\n  };\n\n  return Week;\n}(VerticalView);\n\nvar __extends$20 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * work week view\n */\n\n\nvar WorkWeek =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$20(WorkWeek, _super);\n  /**\n   * Constructor for work week view\n   *\n   * @param {Schedule} parent Accepts the schedule instance\n   */\n\n\n  function WorkWeek(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-work-week-view';\n    return _this;\n  }\n\n  WorkWeek.prototype.startDate = function () {\n    return this.getViewStartDate();\n  };\n\n  WorkWeek.prototype.endDate = function () {\n    return this.getViewEndDate();\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} Returns the module name.\n   */\n\n\n  WorkWeek.prototype.getModuleName = function () {\n    return 'workWeek';\n  };\n\n  return WorkWeek;\n}(VerticalView);\n\nvar __extends$21 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * month view\n */\n\n\nvar Month =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$21(Month, _super);\n\n  function Month(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.dayNameFormat = 'wide';\n    _this.viewClass = 'e-month-view';\n    _this.isInverseTableSelect = false;\n    _this.monthEvent = null;\n    _this.monthDates = {};\n    return _this;\n  }\n\n  Month.prototype.addEventListener = function () {\n    this.parent.on(scrollUiUpdate, this.onScrollUIUpdate, this);\n    this.parent.on(dataReady, this.onDataReady, this);\n    this.parent.on(cellClick, this.onCellClick, this);\n  };\n\n  Month.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(scrollUiUpdate, this.onScrollUIUpdate);\n      this.parent.off(dataReady, this.onDataReady);\n      this.parent.off(cellClick, this.onCellClick);\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Month.prototype.onDataReady = function (args) {\n    this.monthEvent = new MonthEvent(this.parent);\n    this.monthEvent.renderAppointments();\n    this.parent.notify(eventsLoaded, {});\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Month.prototype.onCellClick = function (event) {};\n\n  Month.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    this.parent.notify(virtualScroll, e);\n    this.scrollTopPanel(e.target);\n    this.scrollLeftPanel(e.target);\n    this.parent.uiStateValues.top = e.target.scrollTop;\n    this.parent.uiStateValues.left = e.target.scrollLeft;\n    this.setPersistence();\n  };\n\n  Month.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n\n    if (leftPanel) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n\n  Month.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS);\n  };\n\n  Month.prototype.onScrollUIUpdate = function (args) {\n    var headerHeight = this.getHeaderBarHeight();\n    var header = this.getDatesHeaderElement();\n    var content = this.getContentAreaElement();\n    var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n    var leftPanel = this.getLeftPanelElement();\n\n    if (this.parent.height !== 'auto') {\n      this.setContentHeight(content, leftPanel, height);\n    }\n\n    var scrollBarWidth = getScrollBarWidth();\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n    header.style[args.cssProperties.rtlPadding] = '';\n\n    if (content.offsetWidth - content.clientWidth > 0) {\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      header.firstElementChild.style[args.cssProperties.border] = '';\n      header.style[args.cssProperties.padding] = '';\n    }\n\n    this.setColWidth(content);\n\n    if (args.scrollPosition || !args.isPreventScrollUpdate && this.parent.currentView === 'TimelineMonth') {\n      var top_1 = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.top : args.scrollPosition.top;\n\n      if (leftPanel) {\n        leftPanel.scrollTop = top_1;\n      }\n\n      content.scrollTop = top_1;\n\n      if (this.parent.uiStateValues.isInitial) {\n        this.scrollToSelectedDate();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        content.scrollLeft = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.left : args.scrollPosition.left;\n      }\n    } else {\n      this.scrollToSelectedDate();\n    }\n\n    this.retainScrollPosition();\n  };\n\n  Month.prototype.scrollToSelectedDate = function () {\n    var headerCell = this.element.querySelector('.' + HEADER_CELLS_CLASS + '[data-date=\"' + this.parent.selectedDate.getTime().toString() + '\"]');\n    var content = this.getContentAreaElement();\n\n    if (!isNullOrUndefined(headerCell)) {\n      content.scrollLeft = !this.parent.enableRtl ? headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n    } else {\n      content.scrollLeft = 0;\n    }\n\n    if (content.scrollLeft === 0 && this.parent.uiStateValues.isInitial) {\n      this.parent.uiStateValues.left = 0;\n    }\n  };\n\n  Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n    content.style.height = 'auto';\n\n    if (this.parent.currentView === 'Month') {\n      content.style.height = formatUnit(height);\n    }\n\n    if (leftPanelElement) {\n      if (this.parent.currentView === 'MonthAgenda') {\n        height = this.parent.activeViewOptions.interval > 1 ? this.getContentAreaElement().firstElementChild.offsetHeight : this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n      }\n\n      leftPanelElement.style.height = 'auto';\n      leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n    }\n  };\n\n  Month.prototype.generateColumnLevels = function () {\n    var colLevels = [];\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      colLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n      if (this.parent.currentView === 'MonthAgenda') {\n        colLevels = [level];\n      }\n\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var levels_1 = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays);\n\n        if (this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays) {\n          var index = levels_1.findIndex(function (x, index) {\n            return index !== 0 && x.date.getDay() === levels_1[0].date.getDay();\n          });\n          levels_1 = index > -1 ? levels_1.slice(0, index) : levels_1;\n        }\n\n        colLevels = [levels_1];\n      }\n    } else {\n      colLevels.push(level);\n    }\n\n    this.colLevels = colLevels;\n    return colLevels;\n  };\n\n  Month.prototype.getDateSlots = function (renderDates, workDays) {\n    var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : workDays.length;\n    var dateSlots = [];\n    var isCurrentMonth = this.isCurrentMonth(this.parent.selectedDate);\n\n    for (var col = 0; col < count; col++) {\n      var classList$$1 = [HEADER_CELLS_CLASS];\n      var currentDateIndex = renderDates.slice(0, count).map(function (date) {\n        return date.getDay();\n      });\n\n      if (isCurrentMonth && currentDateIndex.indexOf(this.parent.currentTimezoneDate.getDay()) === col) {\n        classList$$1.push(CURRENT_DAY_CLASS);\n      }\n\n      dateSlots.push({\n        date: renderDates[parseInt(col.toString(), 10)],\n        type: 'monthDay',\n        className: classList$$1,\n        colSpan: 1,\n        workDays: workDays\n      });\n    }\n\n    return dateSlots;\n  };\n\n  Month.prototype.getDayNameFormat = function () {\n    if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n      return 'abbreviated';\n    }\n\n    return 'wide';\n  };\n\n  Month.prototype.renderLayout = function (type) {\n    this.dayNameFormat = this.getDayNameFormat();\n    this.setPanel(createElement('div', {\n      className: TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.viewClass];\n    clsList.push(type);\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n\n      if (this.parent.currentView !== 'Month') {\n        this.parent.activeViewOptions.group.hideNonWorkingDays = false;\n      }\n    }\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n      clsList.push(VIRTUAL_SCROLL_CLASS);\n    }\n\n    if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n      clsList.push(IGNORE_WHITESPACE);\n    }\n\n    addClass([this.element], clsList);\n    this.renderPanel(type);\n    this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n    var target = this.parent.currentView === 'MonthAgenda' ? this.parent.activeView.getPanel() : this.parent.element;\n\n    if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n\n    this.parent.notify(contentReady, {});\n\n    if (this.parent.uiStateValues.isCustomMonth) {\n      this.parent.uiStateValues.isCustomMonth = false;\n    }\n  };\n\n  Month.prototype.refreshHeader = function () {\n    remove(this.element.querySelector('tbody tr'));\n    this.renderHeader();\n    this.parent.notify(contentReady, {});\n  };\n\n  Month.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n\n  Month.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    this.renderLeftIndent(tr);\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n\n  Month.prototype.renderLeftIndent = function (tr) {\n    if (this.parent.activeViewOptions.showWeekNumber) {\n      tr.appendChild(createElement('td', {\n        className: 'e-left-indent'\n      }));\n    }\n  };\n\n  Month.prototype.renderContent = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n    }\n\n    var tr = createElement('tr');\n\n    if (this.parent.activeViewOptions.showWeekNumber) {\n      tr.appendChild(this.renderWeekNumberContent());\n    }\n\n    var workTd = createElement('td');\n    var levels = this.colLevels.slice(0);\n\n    if (this.parent.virtualScrollModule) {\n      this.resetColLevels();\n    }\n\n    var wrap = createElement('div', {\n      className: CONTENT_WRAP_CLASS\n    });\n    var contentArea = this.renderContentArea();\n\n    if (this.parent.currentView === 'Month') {\n      wrap.appendChild(contentArea);\n    } else {\n      var monthAgendaWrapper = createElement('div', {\n        className: TABLE_CONTAINER_CLASS\n      });\n      monthAgendaWrapper.appendChild(contentArea);\n      wrap.appendChild(monthAgendaWrapper);\n    }\n\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    workTd.appendChild(wrap);\n    tr.appendChild(workTd);\n\n    if (this.parent.virtualScrollModule) {\n      this.colLevels = levels;\n      this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n    }\n\n    this.element.querySelector('tbody').appendChild(tr);\n    this.renderAppointmentContainer();\n  };\n\n  Month.prototype.renderWeekNumberContent = function () {\n    var dateCol = this.renderDates.map(function (date) {\n      return new Date(+date);\n    });\n    var td = createElement('td');\n    var contentWrapper = createElement('div', {\n      className: WEEK_NUMBER_WRAPPER_CLASS\n    });\n    td.appendChild(contentWrapper);\n    var contentWrapTable = this.createTableLayout();\n    contentWrapper.appendChild(contentWrapTable);\n    var noOfDays = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;\n\n    for (var i = 0, length_1 = this.renderDates.length / noOfDays; i < length_1; i++) {\n      var dates = dateCol.splice(0, noOfDays);\n      var weekNumber = this.parent.getWeekNumberContent(dates);\n      contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n    }\n\n    return td;\n  };\n\n  Month.prototype.renderAppointmentContainer = function () {//Here needs to render mobile view appointment details on selected date\n  };\n\n  Month.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var table = this.createTableLayout();\n\n    if (this.parent.currentView === 'Month') {\n      var thead = createElement('thead');\n      thead.appendChild(createElement('tr'));\n      prepend([thead], table);\n    }\n\n    this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n    var trEle = createElement('tr');\n\n    for (var i = 0; i < this.colLevels.length; i++) {\n      var level = this.colLevels[parseInt(i.toString(), 10)];\n      var ntr = trEle.cloneNode();\n\n      for (var j = 0; j < level.length; j++) {\n        var td = level[parseInt(j.toString(), 10)];\n        ntr.appendChild(this.createHeaderCell(td));\n      }\n\n      table.querySelector('tbody').appendChild(ntr);\n    }\n\n    wrap.appendChild(table);\n    return container;\n  };\n\n  Month.prototype.createHeaderCell = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n\n    if (td.type === 'monthDay') {\n      var ele = createElement('span', {\n        innerHTML: capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single')\n      });\n      tdEle.appendChild(ele);\n    }\n\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n\n    if (td.type === 'dateHeader') {\n      addClass([tdEle], DATE_HEADER_CLASS);\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n\n      if (this.parent.activeViewOptions.dateHeaderTemplate) {\n        var cellArgs = {\n          date: td.date,\n          type: td.type\n        };\n        var elementId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n        var templateId = elementId + viewName + 'dateHeaderTemplate';\n        var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n\n        if (dateTemplate && dateTemplate.length) {\n          append(dateTemplate, tdEle);\n        }\n      } else {\n        var ele = createElement('span', {\n          className: NAVIGATE_CLASS\n        });\n        var skeleton = 'full';\n        var title = this.parent.globalize.formatDate(td.date, {\n          skeleton: skeleton,\n          calendar: this.parent.getCalendarMode()\n        });\n        ele.setAttribute('title', capitalizeFirstWord(title, 'multiple'));\n        var innerText = this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(td.date, {\n          format: 'MMM d',\n          calendar: this.parent.getCalendarMode()\n        }) : this.parent.globalize.formatDate(td.date, {\n          skeleton: 'd',\n          calendar: this.parent.getCalendarMode()\n        });\n        ele.innerHTML = capitalizeFirstWord(innerText, 'single');\n        tdEle.appendChild(ele);\n      }\n\n      this.wireCellEvents(tdEle);\n    }\n\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(renderCell, args);\n    return tdEle;\n  };\n\n  Month.prototype.getContentSlots = function () {\n    if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n      return [];\n    }\n\n    var slotDatas = [];\n\n    var prepareSlots = function (rowIndex, renderDate, resData, classList$$1) {\n      var data = {\n        date: new Date(+renderDate),\n        groupIndex: resData.groupIndex,\n        workDays: resData.workDays,\n        type: 'monthCells',\n        className: classList$$1 || [WORK_CELLS_CLASS]\n      };\n\n      if (!slotDatas[parseInt(rowIndex.toString(), 10)]) {\n        slotDatas[parseInt(rowIndex.toString(), 10)] = [];\n      }\n\n      slotDatas[parseInt(rowIndex.toString(), 10)].push(data);\n    };\n\n    var includeResource = this.parent.currentView !== 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0;\n\n    if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n      for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n        var res = _a[_i];\n        var dates = res.renderDates.map(function (date) {\n          return new Date(+date);\n        });\n        var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : res.workDays.length;\n\n        for (var i = 0; i < res.renderDates.length / count; i++) {\n          var colDates = dates.splice(0, count);\n\n          for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n            var colDate = colDates_1[_b];\n            prepareSlots(i, colDate, res);\n          }\n        }\n      }\n    } else {\n      var dates = this.renderDates.map(function (date) {\n        return new Date(+date);\n      });\n      var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;\n      var level = this.colLevels.slice(0, 1)[0];\n      var startIndex = this.renderDates.map(Number).indexOf(+level[0].date);\n\n      for (var i = 0; i < this.renderDates.length / count; i++) {\n        var colDates = dates.splice(0, count);\n        var k = startIndex;\n\n        var _loop_1 = function (j) {\n          var colDate = colDates[parseInt(k.toString(), 10)];\n          k++;\n\n          if (includeResource) {\n            var lastRow = this_1.colLevels[this_1.colLevels.length - 1];\n            var rowCount = lastRow.length / count;\n            var resourcesTd = lastRow.slice(0, rowCount);\n\n            if (this_1.parent.activeViewOptions.group.hideNonWorkingDays) {\n              resourcesTd = lastRow.filter(function (x) {\n                return x.date.getDay() === colDate.getDay();\n              });\n\n              if (resourcesTd.length === 0) {\n                j = j - 1;\n                return out_j_1 = j, \"continue\";\n              }\n            }\n\n            for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n              var clsList = void 0;\n\n              if (resIndex !== 0) {\n                clsList = [WORK_CELLS_CLASS, DISABLE_DATE];\n              }\n\n              prepareSlots(i, colDate, resourcesTd[parseInt(resIndex.toString(), 10)], clsList);\n            }\n          } else {\n            prepareSlots(i, colDate, this_1.colLevels[this_1.colLevels.length - 1][0]);\n          }\n\n          out_j_1 = j;\n        };\n\n        var this_1 = this,\n            out_j_1;\n\n        for (var j = startIndex; j < this.colLevels[0].length + startIndex && j < colDates.length; j++) {\n          _loop_1(j);\n\n          j = out_j_1;\n        }\n      }\n    }\n\n    return slotDatas;\n  };\n\n  Month.prototype.updateClassList = function (data) {\n    if (!this.isCustomMonth() && this.isOtherMonth(data.date)) {\n      data.className.push(OTHERMONTH_CLASS);\n    }\n\n    if (!this.parent.isMinMaxDate(data.date)) {\n      data.className.push(DISABLE_DATES);\n    }\n\n    this.updateSelectedCellClass(data);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Month.prototype.updateSelectedCellClass = function (data) {\n    return;\n  };\n\n  Month.prototype.isOtherMonth = function (date) {\n    return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n  };\n\n  Month.prototype.renderContentArea = function () {\n    var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    this.addAutoHeightClass(tbl);\n\n    if (this.parent.currentView === 'TimelineMonth') {\n      this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n    }\n\n    var monthDate = new Date(this.parent.selectedDate.getTime());\n    this.monthDates = {\n      start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n      end: this.parent.calendarUtil.lastDateOfMonth(addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n    };\n    var tBody = tbl.querySelector('tbody');\n    append(this.getContentRows(), tBody);\n    this.wireCellEvents(tBody);\n    return tbl;\n  };\n\n  Month.prototype.getContentRows = function () {\n    var trows = [];\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        'aria-selected': 'false'\n      }\n    });\n    var slotDatas = this.getContentSlots();\n\n    for (var row = 0; row < slotDatas.length; row++) {\n      var ntr = tr.cloneNode();\n\n      for (var col = 0; col < slotDatas[parseInt(row.toString(), 10)].length; col++) {\n        var ntd = this.createContentTd(slotDatas[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)], td);\n        ntr.appendChild(ntd);\n      }\n\n      trows.push(ntr);\n    }\n\n    return trows;\n  };\n\n  Month.prototype.createContentTd = function (data, td) {\n    var ntd = td.cloneNode();\n\n    if (data.colSpan) {\n      ntd.setAttribute('colspan', data.colSpan.toString());\n    }\n\n    this.updateClassList(data);\n    var type = data.type;\n\n    if (data.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n      data.className.push(RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n\n    if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n      data.className.push(WORKDAY_CLASS);\n    }\n\n    if (this.isCurrentDate(data.date)) {\n      data.className.push(CURRENTDATE_CLASS);\n    }\n\n    addClass([ntd], data.className);\n    ntd.setAttribute('data-date', data.date.getTime().toString());\n\n    if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : data.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n\n    this.renderDateHeaderElement(data, ntd);\n\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var args_1 = {\n        date: data.date,\n        type: type,\n        groupIndex: data.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n      append(cellTemplate, ntd);\n    }\n\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: data.date,\n      groupIndex: data.groupIndex\n    };\n    this.parent.trigger(renderCell, args);\n    return ntd;\n  };\n\n  Month.prototype.renderDateHeaderElement = function (data, ntd) {\n    if (this.parent.currentView === 'TimelineMonth') {\n      return;\n    }\n\n    var dateHeader = createElement('div', {\n      className: DATE_HEADER_CLASS\n    });\n\n    if (this.parent.activeViewOptions.cellHeaderTemplate) {\n      var args = {\n        date: data.date,\n        type: data.type,\n        groupIndex: data.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n      var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n      var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n      append(cellHeaderTemplate, dateHeader);\n    } else {\n      var innerText = this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(data.date, {\n        format: 'MMM d',\n        calendar: this.parent.getCalendarMode()\n      }) : this.parent.globalize.formatDate(data.date, {\n        skeleton: 'd',\n        calendar: this.parent.getCalendarMode()\n      });\n      dateHeader.innerHTML = capitalizeFirstWord(innerText, 'single');\n    }\n\n    ntd.appendChild(dateHeader);\n\n    if (this.getModuleName() === 'month') {\n      addClass([dateHeader], NAVIGATE_CLASS);\n      var skeleton = 'full';\n      var announcementText = this.parent.globalize.formatDate(data.date, {\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      ntd.setAttribute('aria-label', announcementText);\n    }\n  };\n\n  Month.prototype.getMonthStart = function (currentDate) {\n    var useDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && (this.parent.uiStateValues.isCustomMonth || this.isCustomRange());\n    var date = useDisplayDate ? this.parent.activeViewOptions.displayDate : !(this.parent.uiStateValues.isCustomMonth || this.isCustomRange()) && this.isCustomMonth() ? currentDate : this.parent.calendarUtil.firstDateOfMonth(currentDate);\n    var monthStart = getWeekFirstDate(date, this.parent.activeViewOptions.firstDayOfWeek);\n    return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n  };\n\n  Month.prototype.getMonthEnd = function (currentDate) {\n    if (this.isCustomMonth()) {\n      var start = this.getMonthStart(currentDate);\n      var numberOfDays = WEEK_LENGTH * (this.parent.activeViewOptions.numberOfWeeks > 0 ? this.parent.activeViewOptions.numberOfWeeks : DEFAULT_WEEKS);\n      return addDays(start, numberOfDays - 1);\n    } else {\n      var endDate = addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n      var lastWeekOfMonth = getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n      return addDays(lastWeekOfMonth, WEEK_LENGTH - 1);\n    }\n  };\n\n  Month.prototype.isCustomRange = function () {\n    var dates = this.parent.getCurrentViewDates();\n\n    if (dates && dates.length > 0) {\n      var selectedTime = resetTime(this.parent.selectedDate).getTime();\n      var weekFirstDate = getWeekFirstDate(dates[dates.length - 1], this.parent.activeViewOptions.firstDayOfWeek);\n      return !(selectedTime >= getWeekFirstDate(dates[0], this.parent.activeViewOptions.firstDayOfWeek).getTime() && selectedTime <= addDays(weekFirstDate, 6).getTime());\n    }\n\n    return false;\n  };\n\n  Month.prototype.getRenderDates = function (workDays) {\n    var renderDates = [];\n    var currentDate = resetTime(this.parent.selectedDate);\n    var start = this.getMonthStart(currentDate);\n    var monthEnd = this.getMonthEnd(currentDate);\n\n    do {\n      if (this.parent.activeViewOptions.showWeekend) {\n        renderDates.push(start);\n      } else {\n        if (this.isWorkDay(start, workDays)) {\n          renderDates.push(start);\n        }\n      }\n\n      start = addDays(start, 1);\n\n      if (start.getHours() > 0) {\n        start = resetTime(start);\n      }\n    } while (start.getTime() <= monthEnd.getTime());\n\n    if (!workDays) {\n      this.renderDates = renderDates;\n    }\n\n    if (this.parent.headerModule) {\n      this.parent.headerModule.previousNextIconHandler();\n    }\n\n    return renderDates;\n  };\n\n  Month.prototype.getNextPreviousDate = function (type) {\n    if (this.isCustomMonth()) {\n      var dates = this.parent.getCurrentViewDates();\n      var date = getWeekFirstDate(type === 'next' ? dates[dates.length - 1] : dates[0], this.parent.activeViewOptions.firstDayOfWeek);\n      return addDays(date, type === 'next' ? WEEK_LENGTH : -(this.parent.activeViewOptions.numberOfWeeks > 0 ? this.parent.activeViewOptions.numberOfWeeks : DEFAULT_WEEKS) * WEEK_LENGTH);\n    } else {\n      return addMonths(this.parent.selectedDate, (type === 'next' ? 1 : -1) * this.parent.activeViewOptions.interval);\n    }\n  };\n\n  Month.prototype.getStartDate = function () {\n    return this.getMonthStart(this.parent.selectedDate);\n  };\n\n  Month.prototype.getEndDate = function () {\n    return this.getMonthEnd(this.parent.selectedDate);\n  };\n\n  Month.prototype.getEndDateFromStartDate = function (start) {\n    return addDays(new Date(start.getTime()), 1);\n  };\n\n  Month.prototype.getDateRangeText = function () {\n    if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n      var startDate = this.parent.selectedDate;\n      var endDate = void 0;\n      var updateCustomRange = false;\n\n      if (this.isCustomMonth()) {\n        var dates = this.parent.getCurrentViewDates();\n        updateCustomRange = dates[0].getMonth() !== dates[dates.length - 1].getMonth() || dates[0].getFullYear() !== dates[dates.length - 1].getFullYear();\n\n        if (updateCustomRange) {\n          startDate = dates[0];\n          endDate = dates[dates.length - 1];\n        }\n      }\n\n      var isUpdateDateRange = this.parent.currentView !== 'Month' || !this.isCustomMonth();\n\n      if (this.parent.activeViewOptions.interval > 1 && isUpdateDateRange || updateCustomRange) {\n        endDate = endDate ? endDate : addMonths(lastDateOfMonth(startDate), this.parent.activeViewOptions.interval - 1);\n\n        if (startDate.getFullYear() === endDate.getFullYear()) {\n          var monthNames = this.parent.globalize.formatDate(startDate, {\n            format: 'MMMM',\n            calendar: this.parent.getCalendarMode()\n          }) + ' - ' + this.parent.globalize.formatDate(endDate, {\n            format: 'MMMM ',\n            calendar: this.parent.getCalendarMode()\n          }) + this.parent.globalize.formatDate(endDate, {\n            skeleton: 'y',\n            calendar: this.parent.getCalendarMode()\n          });\n          return capitalizeFirstWord(monthNames, 'single');\n        }\n\n        var text = this.parent.globalize.formatDate(startDate, {\n          format: 'MMMM',\n          calendar: this.parent.getCalendarMode()\n        }) + ' ' + startDate.getFullYear() + ' - ' + this.parent.globalize.formatDate(endDate, {\n          format: 'MMMM ',\n          calendar: this.parent.getCalendarMode()\n        }) + this.parent.globalize.formatDate(endDate, {\n          skeleton: 'y',\n          calendar: this.parent.getCalendarMode()\n        });\n        return capitalizeFirstWord(text, 'single');\n      }\n\n      var format = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n      return capitalizeFirstWord(this.parent.globalize.formatDate(startDate, {\n        format: format,\n        calendar: this.parent.getCalendarMode()\n      }), 'single');\n    }\n\n    return this.formatDateRange(this.parent.selectedDate);\n  };\n\n  Month.prototype.getLabelText = function (view) {\n    return this.parent.localeObj.getConstant(view) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n      format: 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n\n  Month.prototype.createWeekNumberElement = function (text) {\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      className: WEEK_NUMBER_CLASS,\n      attrs: {\n        'title': text ? this.parent.localeObj.getConstant('week') + ' ' + text : ''\n      },\n      innerHTML: text || ''\n    });\n    tr.appendChild(td);\n    var args = {\n      elementType: 'weekNumberCell',\n      element: td\n    };\n    this.parent.trigger(renderCell, args);\n    return tr;\n  };\n\n  Month.prototype.unWireEvents = function () {\n    var contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n    if (contentScrollableEle) {\n      EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n    }\n  };\n\n  Month.prototype.isCustomMonth = function () {\n    return this.parent.currentView === 'Month' && (!isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0);\n  };\n\n  Month.prototype.getModuleName = function () {\n    return 'month';\n  };\n\n  Month.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.element) {\n      if (this.monthEvent) {\n        this.monthEvent.destroy();\n        this.monthEvent = null;\n      }\n\n      this.unWireEvents();\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n\n      _super.prototype.destroy.call(this);\n    }\n  };\n\n  return Month;\n}(ViewBase);\n\nvar __extends$22 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * year view\n */\n\n\nvar Year =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$22(Year, _super);\n\n  function Year(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-year-view';\n    _this.isInverseTableSelect = false;\n    _this.yearEventModule = null;\n    return _this;\n  }\n\n  Year.prototype.getModuleName = function () {\n    return 'year';\n  };\n\n  Year.prototype.renderLayout = function (className) {\n    if (this.parent.resourceBase) {\n      this.parent.resourceBase.generateResourceLevels([{\n        renderDates: this.parent.activeView.renderDates\n      }]);\n    }\n\n    this.setPanel(createElement('div', {\n      className: TABLE_WRAP_CLASS\n    }));\n    var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n    addClass([this.element], [this.viewClass, viewTypeClass, className]);\n    this.renderPanel(className);\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      addClass([this.element], [VIRTUAL_SCROLL_CLASS]);\n    }\n\n    var calendarTable = this.createTableLayout(OUTER_TABLE_CLASS);\n    this.element.appendChild(calendarTable);\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    var calendarTBody = calendarTable.querySelector('tbody');\n    this.rowCount = this.getRowColumnCount('row');\n    this.columnCount = this.getRowColumnCount('column');\n    this.renderHeader(calendarTBody);\n    this.renderContent(calendarTBody);\n\n    if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n      this.generateColumnLevels();\n      this.renderResourceMobileLayout();\n    }\n\n    EventHandler.add(this.element.querySelector('.' + CONTENT_WRAP_CLASS), 'scroll', this.onContentScroll, this);\n    this.parent.notify(contentReady, {});\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Year.prototype.renderHeader = function (headerWrapper) {};\n\n  Year.prototype.renderContent = function (content) {\n    var tr = createElement('tr');\n    content.appendChild(tr);\n    var td = createElement('td');\n    tr.appendChild(td);\n    this.element.querySelector('tbody').appendChild(tr);\n    var contentWrapper = createElement('div', {\n      className: CONTENT_WRAP_CLASS\n    });\n    td.appendChild(contentWrapper);\n    var calendarTable = this.createTableLayout('e-calendar-table');\n    contentWrapper.appendChild(calendarTable);\n    var cTr = createElement('tr');\n    calendarTable.querySelector('tbody').appendChild(cTr);\n    var cTd = createElement('td');\n    cTr.appendChild(cTd);\n    var calendarWrapper = createElement('div', {\n      className: 'e-calendar-wrapper'\n    });\n    cTd.appendChild(calendarWrapper);\n    var months = this.getMonths();\n\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var calendarElement = createElement('div', {\n        className: 'e-month-calendar e-calendar',\n        attrs: {\n          'data-role': 'calendar'\n        }\n      });\n      calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n      calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n      calendarWrapper.appendChild(calendarElement);\n    }\n\n    this.renderDates.splice(0, 1);\n  };\n\n  Year.prototype.renderCalendarHeader = function (currentDate) {\n    var headerWrapper = createElement('div', {\n      className: 'e-header e-month'\n    });\n    var headerContent = createElement('div', {\n      className: 'e-day e-title'\n    });\n\n    if (this.parent.activeViewOptions.monthHeaderTemplate) {\n      var args = {\n        date: currentDate,\n        type: 'monthHeader'\n      };\n      this.renderTemplates(this.parent.getMonthHeaderTemplate(), args, 'monthHeaderTemplate', this.parent.activeViewOptions.monthHeaderTemplateName, headerContent);\n    } else {\n      headerContent.innerHTML = this.getMonthName(currentDate);\n    }\n\n    headerWrapper.appendChild(headerContent);\n    this.parent.trigger(renderCell, {\n      elementType: 'headerCells',\n      element: headerContent,\n      date: currentDate\n    });\n    return headerWrapper;\n  };\n\n  Year.prototype.renderCalendarContent = function (currentDate) {\n    var dateCollection = this.getMonthDates(currentDate);\n    var contentWrapper = createElement('div', {\n      className: 'e-content e-month'\n    });\n    var contentTable = this.createTableLayout('e-calendar-table ' + CONTENT_TABLE_CLASS);\n    contentWrapper.appendChild(contentTable);\n    this.setAriaAttributes(contentTable);\n    var thead = createElement('thead', {\n      className: 'e-week-header'\n    });\n    var tr = createElement('tr');\n    var currentWeek = getWeekFirstDate(firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n\n    if (this.parent.activeViewOptions.showWeekNumber) {\n      tr.appendChild(createElement('th'));\n    }\n\n    for (var i = 0; i < WEEK_LENGTH; i++) {\n      if (this.parent.activeViewOptions.dayHeaderTemplate) {\n        var th = createElement('th');\n        var args = {\n          date: currentWeek,\n          type: 'dayHeader'\n        };\n        this.renderTemplates(this.parent.getDayHeaderTemplate(), args, 'dayHeaderTemplate', this.parent.activeViewOptions.dayHeaderTemplateName, th);\n        tr.appendChild(th);\n      } else {\n        tr.appendChild(createElement('th', {\n          innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()]\n        }));\n      }\n\n      currentWeek = new Date(currentWeek.getTime() + MS_PER_DAY);\n    }\n\n    thead.appendChild(tr);\n    prepend([thead], contentTable);\n    var tbody = contentTable.querySelector('tbody');\n\n    while (dateCollection.length > 0) {\n      var weekDates = dateCollection.splice(0, WEEK_LENGTH);\n      var tr_1 = createElement('tr');\n\n      if (this.parent.activeViewOptions.showWeekNumber) {\n        var weekNumber = this.parent.getWeekNumberContent(weekDates);\n        var td = createElement('td', {\n          className: 'e-week-number',\n          attrs: {\n            'title': this.parent.localeObj.getConstant('week') + ' ' + weekNumber\n          },\n          innerHTML: weekNumber\n        });\n        tr_1.appendChild(td);\n        this.parent.trigger(renderCell, {\n          elementType: 'weekNumberCells',\n          element: td\n        });\n      }\n\n      for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n        var date = weekDates_1[_i];\n        var td = createElement('td', {\n          className: 'e-cell ' + WORK_CELLS_CLASS,\n          attrs: {\n            'data-date': date.getTime().toString()\n          }\n        });\n\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n          var args = {\n            date: date,\n            type: 'monthCells'\n          };\n          this.renderTemplates(this.parent.getCellHeaderTemplate(), args, 'cellHeaderTemplate', this.parent.activeViewOptions.cellHeaderTemplateName, td);\n        } else {\n          var span = createElement('span', {\n            className: 'e-day',\n            innerHTML: this.parent.globalize.formatDate(date, {\n              skeleton: 'd',\n              calendar: this.parent.getCalendarMode()\n            }),\n            attrs: {\n              title: this.parent.globalize.formatDate(date, {\n                type: 'date',\n                skeleton: 'full'\n              })\n            }\n          });\n          td.appendChild(span);\n        }\n\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var args = {\n            date: date,\n            type: 'monthCells'\n          };\n          this.renderTemplates(this.parent.getCellTemplate(), args, 'cellTemplate', this.parent.activeViewOptions.cellTemplateName, td);\n        }\n\n        var classList$$1 = [];\n\n        if (currentDate.getMonth() !== date.getMonth()) {\n          classList$$1.push(OTHERMONTH_CLASS);\n        }\n\n        if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n          classList$$1 = classList$$1.concat(['e-today', 'e-selected']);\n        }\n\n        if (classList$$1.length > 0) {\n          addClass([td], classList$$1);\n        }\n\n        tr_1.appendChild(td);\n\n        if (currentDate.getMonth() === date.getMonth()) {\n          this.renderDates.push(new Date(date));\n        }\n\n        if (!this.parent.isMinMaxDate(date)) {\n          addClass([td], DISABLE_DATES);\n        } else {\n          EventHandler.add(td, 'click', this.onCellClick, this);\n\n          if (!this.parent.isAdaptive) {\n            EventHandler.add(td, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n          }\n        }\n\n        this.parent.trigger(renderCell, {\n          elementType: 'workCells',\n          element: td,\n          date: date\n        });\n      }\n\n      tbody.appendChild(tr_1);\n    }\n\n    return contentWrapper;\n  };\n\n  Year.prototype.createTableColGroup = function (count) {\n    var colGroupEle = createElement('colgroup');\n\n    for (var i = 0; i < count; i++) {\n      colGroupEle.appendChild(createElement('col'));\n    }\n\n    return colGroupEle;\n  };\n\n  Year.prototype.getMonthName = function (date) {\n    var month = this.parent.globalize.formatDate(date, {\n      format: this.parent.activeViewOptions.dateFormat || 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    });\n    return capitalizeFirstWord(month, 'multiple');\n  };\n\n  Year.prototype.generateColumnLevels = function () {\n    var colLevels = [];\n    var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      colLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n      if (this.parent.uiStateValues.isGroupAdaptive) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n      }\n    } else {\n      colLevels.push(level);\n    }\n\n    colLevels.pop();\n    this.colLevels = colLevels;\n    return colLevels;\n  }; // eslint-disable-next-line max-len\n\n\n  Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n    if (startHour === void 0) {\n      startHour = this.parent.workHours.start;\n    }\n\n    if (endHour === void 0) {\n      endHour = this.parent.workHours.end;\n    }\n\n    var dateCol = [{\n      date: renderDates[0],\n      type: 'dateHeader',\n      className: [HEADER_CELLS_CLASS],\n      colSpan: 1,\n      workDays: workDays,\n      startHour: new Date(+this.parent.globalize.parseDate(startHour, {\n        skeleton: 'Hm'\n      })),\n      endHour: new Date(+this.parent.globalize.parseDate(endHour, {\n        skeleton: 'Hm'\n      }))\n    }];\n    return dateCol;\n  };\n\n  Year.prototype.getMonthDates = function (date) {\n    var startDate = getWeekFirstDate(firstDateOfMonth(date), this.parent.firstDayOfWeek);\n    var endDate = addDays(new Date(+startDate), 6 * WEEK_LENGTH);\n    var dateCollection = [];\n\n    for (var start = startDate; start.getTime() < endDate.getTime(); start = addDays(start, 1)) {\n      dateCollection.push(resetTime(new Date(start)));\n    }\n\n    return dateCollection;\n  };\n\n  Year.prototype.getRowColumnCount = function (type) {\n    var months = this.getMonths();\n    var year = this.parent.selectedDate.getFullYear();\n    var monthDaysCount = [];\n\n    for (var _i = 0, months_2 = months; _i < months_2.length; _i++) {\n      var month = months_2[_i];\n      monthDaysCount.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n    }\n\n    var maxCount = Math.max.apply(Math, monthDaysCount);\n    var count;\n\n    if (type === 'row') {\n      count = this.parent.activeViewOptions.orientation === 'Horizontal' ? months.length : maxCount;\n    } else {\n      count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : months.length;\n    }\n\n    return count;\n  };\n\n  Year.prototype.isCurrentDate = function (date) {\n    return resetTime(new Date()).getTime() === resetTime(new Date(date.getTime())).getTime();\n  };\n\n  Year.prototype.getMonths = function () {\n    var _this = this; // eslint-disable-next-line prefer-spread\n\n\n    return Array.apply(null, {\n      length: this.parent.activeViewOptions.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n\n  Year.prototype.renderTemplates = function (fn, args, tName, vName, ele) {\n    var templateId = this.parent.element.id + '_' + vName + tName;\n    var template = [].slice.call(fn(args, this.parent, tName, templateId, false));\n    append(template, ele);\n  };\n\n  Year.prototype.onCellClick = function (e) {\n    var target = closest(e.target, '.' + WORK_CELLS_CLASS);\n    var startDate = this.parent.getDateFromElement(target);\n    this.parent.activeCellsData = this.parent.getCellDetails(target);\n    var isPrevious = startDate.getTime() < this.getStartDate().getTime();\n\n    if (isPrevious || startDate.getTime() > this.getEndDate().getTime()) {\n      this.parent.changeDate(this.parent.activeView.getNextPreviousDate(isPrevious ? 'previous' : 'next'), e);\n      var activeDate = this.parent.activeCellsData.startTime.getTime();\n      var inRange = activeDate >= this.getStartDate().getTime() && activeDate <= this.getEndDate().getTime();\n      var dateAttr = inRange ? activeDate : (isPrevious ? this.getEndDate() : this.getStartDate()).getTime();\n      var selectedCell = this.parent.element.querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + dateAttr + '\"]');\n      this.parent.selectCell(selectedCell);\n      this.parent.activeCellsData = this.parent.getCellDetails(selectedCell);\n    } else {\n      var endDate = addDays(new Date(startDate.getTime()), 1);\n      var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n      var moreEventArgs = {\n        date: startDate,\n        event: filteredEvents,\n        element: e.target\n      };\n\n      if (target.classList.contains(OTHERMONTH_CLASS)) {\n        target = this.parent.element.querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + target.getAttribute('data-date') + '\"]');\n      }\n\n      this.parent.activeCellsData = this.parent.getCellDetails(target);\n      var args = extend(this.parent.activeCellsData, {\n        cancel: false,\n        event: e,\n        name: 'cellClick'\n      });\n      this.parent.trigger(cellClick, args);\n      this.parent.quickPopup.moreEventClick(moreEventArgs, endDate);\n    }\n  };\n\n  Year.prototype.onContentScroll = function (e) {\n    var target = e.target;\n    var headerWrapper = this.getDatesHeaderElement();\n    this.parent.notify(virtualScroll, e);\n\n    if (headerWrapper) {\n      headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n    }\n\n    var scrollTopSelector = \".\" + MONTH_HEADER_WRAPPER + \",.\" + RESOURCE_COLUMN_WRAP_CLASS;\n    var scrollTopElement = this.element.querySelector(scrollTopSelector);\n\n    if (scrollTopElement) {\n      scrollTopElement.scrollTop = target.scrollTop;\n    }\n\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = e.target.scrollTop;\n    }\n\n    this.parent.uiStateValues.left = e.target.scrollLeft;\n    this.setPersistence();\n  };\n\n  Year.prototype.onScrollUiUpdate = function (args) {\n    var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n    var headerWrapper = this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n\n    if (headerWrapper) {\n      height -= headerWrapper.offsetHeight;\n    }\n\n    var contentWrapper = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n    if (contentWrapper) {\n      contentWrapper.style.height = formatUnit(height);\n    }\n\n    if (!this.parent.isAdaptive && headerWrapper) {\n      var scrollBarWidth = getScrollBarWidth();\n\n      if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n        headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n        headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n      } else {\n        headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n        headerWrapper.style[args.cssProperties.padding] = '';\n      }\n    }\n\n    this.setColWidth(this.getContentAreaElement());\n    var leftPanelSelector = \".\" + MONTH_HEADER_WRAPPER + \",.\" + RESOURCE_COLUMN_WRAP_CLASS;\n    var leftPanelElement = this.element.querySelector(leftPanelSelector);\n\n    if (leftPanelElement) {\n      var isYScroll = contentWrapper.scrollWidth > contentWrapper.clientWidth;\n      leftPanelElement.style.height = formatUnit(height - (isYScroll ? 17 : 0));\n    }\n\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        this.parent.uiStateValues.isInitial = false;\n        this.parent.uiStateValues.top = this.parent.uiStateValues.left = 0;\n      } else {\n        if (leftPanelElement) {\n          leftPanelElement.scrollTop = this.parent.uiStateValues.top;\n        }\n\n        contentWrapper.scrollTop = this.parent.uiStateValues.top;\n        contentWrapper.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n\n    this.retainScrollPosition();\n  };\n\n  Year.prototype.getStartDate = function () {\n    return new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear % 12, 1);\n  };\n\n  Year.prototype.getEndDate = function () {\n    return addDays(addMonths(this.getStartDate(), this.parent.monthsCount), -1);\n  };\n\n  Year.prototype.startDate = function () {\n    return this.parent.currentView === 'Year' ? getWeekFirstDate(this.getStartDate(), this.parent.firstDayOfWeek) : this.getStartDate();\n  };\n\n  Year.prototype.endDate = function () {\n    return this.parent.currentView === 'Year' ? addDays(getWeekLastDate(this.getEndDate(), this.parent.firstDayOfWeek), 1) : addDays(this.getEndDate(), 1);\n  };\n\n  Year.prototype.getEndDateFromStartDate = function (start) {\n    var date = new Date(start.getTime());\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      date = lastDateOfMonth(date);\n    }\n\n    return addDays(new Date(date.getTime()), 1);\n  };\n\n  Year.prototype.getNextPreviousDate = function (type) {\n    return addYears(this.parent.selectedDate, type === 'next' ? 1 : -1);\n  };\n\n  Year.prototype.getDateRangeText = function () {\n    var startDate = this.getStartDate();\n    var endDate = this.getEndDate();\n\n    if (startDate.getFullYear() !== endDate.getFullYear()) {\n      return this.parent.globalize.formatDate(startDate, {\n        skeleton: 'yMMM'\n      }) + ' - ' + this.parent.globalize.formatDate(endDate, {\n        skeleton: 'yMMM'\n      });\n    } else {\n      return this.parent.globalize.formatDate(this.parent.selectedDate, {\n        skeleton: 'y'\n      });\n    }\n  };\n\n  Year.prototype.addEventListener = function () {\n    this.parent.on(scrollUiUpdate, this.onScrollUiUpdate, this);\n    this.parent.on(dataReady, this.onDataReady, this);\n  };\n\n  Year.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(scrollUiUpdate, this.onScrollUiUpdate);\n      this.parent.off(dataReady, this.onDataReady);\n    }\n  };\n\n  Year.prototype.onDataReady = function (args) {\n    this.yearEventModule = new YearEvent(this.parent);\n    this.yearEventModule.renderAppointments();\n    this.parent.notify(eventsLoaded, args);\n  };\n\n  Year.prototype.scrollToDate = function (scrollDate) {\n    var date = +new Date(resetTime(scrollDate));\n    var element = this.element.querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + date + '\"]');\n\n    if (element) {\n      element = closest(element, '.e-month-calendar');\n      this.getContentAreaElement().scrollTop = element.offsetTop;\n    }\n  };\n\n  Year.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.element) {\n      var contentScroll = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (contentScroll) {\n        EventHandler.remove(contentScroll, 'scroll', this.onContentScroll);\n      }\n\n      if (this.yearEventModule) {\n        this.yearEventModule.destroy();\n        this.yearEventModule = null;\n      }\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      _super.prototype.destroy.call(this);\n    }\n  };\n\n  return Year;\n}(ViewBase);\n\nvar __extends$24 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nvar AgendaBase =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$24(AgendaBase, _super);\n\n  function AgendaBase(parent) {\n    return _super.call(this, parent) || this;\n  } // eslint-disable-next-line max-len\n\n\n  AgendaBase.prototype.createAgendaContentElement = function (type, listData, aTd, groupOrder, groupIndex) {\n    var _this = this;\n\n    var listElement;\n    var fieldMapping = this.parent.eventFields;\n\n    if (type === 'noEvents') {\n      var noEvents = [{\n        'subject': this.parent.localeObj.getConstant('noEvents')\n      }];\n      listElement = ListBase.createList(this.parent.createElement, noEvents, {\n        moduleName: 'agenda',\n        listClass: this.parent.activeView.viewClass,\n        itemClass: this.parent.activeView.viewClass,\n        template: \"<div class=\\\"\" + AGENDA_NO_EVENT_CLASS + \"\\\">\" + this.parent.localeObj.getConstant('noEvents') + \"</div>\"\n      });\n\n      if (listElement.querySelector('.e-agenda-item').children.length === 0) {\n        listElement.firstElementChild.appendChild(createElement('div', {\n          className: AGENDA_NO_EVENT_CLASS,\n          innerHTML: this.parent.localeObj.getConstant('noEvents')\n        }));\n      }\n    } else {\n      listElement = ListBase.createList(this.parent.createElement, listData, {\n        moduleName: 'agenda',\n        listClass: this.parent.activeView.viewClass,\n        itemClass: this.parent.activeView.viewClass\n      });\n      var listElements = [].slice.call(listElement.children);\n      listElements.forEach(function (element, li) {\n        var appWrapper = createElement('div', {\n          className: APPOINTMENT_CLASS,\n          attrs: {\n            'data-id': 'Appointment_' + listData[parseInt(li.toString(), 10)][\"\" + _this.parent.eventFields.id],\n            'data-guid': listData[parseInt(li.toString(), 10)].Guid,\n            'role': 'button',\n            'tabindex': '0',\n            'aria-disabled': _this.parent.eventBase.getReadonlyAttribute(listData[parseInt(li.toString(), 10)]),\n            'aria-label': _this.parent.getAnnouncementString(listData[parseInt(li.toString(), 10)])\n          }\n        });\n\n        if (!isNullOrUndefined(groupIndex)) {\n          appWrapper.setAttribute('data-group-index', groupIndex.toString());\n        }\n\n        _this.parent.eventBase.applyResourceColor(appWrapper, listData[parseInt(li.toString(), 10)], 'borderColor', groupOrder);\n\n        var templateEle;\n\n        if (!isNullOrUndefined(_this.parent.activeViewOptions.eventTemplate)) {\n          addClass([appWrapper], EVENT_TEMPLATE);\n          var scheduleId = _this.parent.element.id + '_';\n          var viewName = _this.parent.activeViewOptions.eventTemplateName;\n          var templateId = scheduleId + viewName + 'eventTemplate';\n          templateEle = _this.parent.getAppointmentTemplate()(listData[parseInt(li.toString(), 10)], _this.parent, 'eventTemplate', templateId, false);\n\n          if (!isNullOrUndefined(listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceRule])) {\n            var iconClass = listData[parseInt(li.toString(), 10)][fieldMapping.id] === listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appWrapper.appendChild(createElement('div', {\n              className: ICON + ' ' + iconClass\n            }));\n          }\n        } else {\n          templateEle = _this.createAppointment(listData[parseInt(li.toString(), 10)]);\n        }\n\n        append([].slice.call(templateEle), appWrapper);\n        removeChildren(element);\n        element.appendChild(appWrapper);\n        var args = {\n          data: extend({}, listData[parseInt(li.toString(), 10)], null, true),\n          element: element,\n          cancel: false\n        };\n\n        _this.parent.trigger(eventRendered, args, function (eventArgs) {\n          if (eventArgs.cancel) {\n            remove(element);\n          }\n        });\n      });\n    }\n\n    aTd.appendChild(listElement);\n\n    if (this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0 || this.parent.currentView === 'Agenda') {\n      addClass([aTd], AGENDA_DAY_BORDER_CLASS);\n    }\n\n    this.parent.renderTemplates();\n    return aTd;\n  };\n\n  AgendaBase.prototype.createAppointment = function (event) {\n    var fieldMapping = this.parent.eventFields;\n    var eventSubject = event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var eventLocation = event[fieldMapping.location] || this.parent.eventSettings.fields.location.default;\n    var appSubjectWrap = createElement('div', {\n      className: SUBJECT_WRAP\n    });\n\n    if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n      eventSubject += ',';\n    }\n\n    var appSubjectText = createElement('div', {\n      className: SUBJECT_CLASS\n    });\n    this.parent.sanitize(eventSubject, appSubjectText);\n    appSubjectWrap.appendChild(appSubjectText);\n\n    if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n      var appLocation = createElement('div', {\n        className: LOCATION_CLASS\n      });\n      this.parent.sanitize(eventLocation, appLocation);\n      appSubjectWrap.appendChild(appLocation);\n    }\n\n    if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n      var iconClass = event[fieldMapping.id] === event[fieldMapping.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n      appSubjectWrap.appendChild(createElement('div', {\n        className: ICON + ' ' + iconClass\n      }));\n    }\n\n    var strDate = event[fieldMapping.startTime];\n    var endDate = event[fieldMapping.endTime];\n    var isAllDay = event[fieldMapping.isAllDay];\n    var allDayStr = this.parent.localeObj.getConstant('allDay');\n    var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n\n    if (!isNullOrUndefined(event.data)) {\n      var milliSeconds = endDate.getTimezoneOffset() !== strDate.getTimezoneOffset() ? endDate.getTime() - strDate.getTime() + 3600000 : endDate.getTime() - strDate.getTime();\n      var eventString = milliSeconds / MS_PER_DAY >= 1 ? allDayStr : timeStr;\n      allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' ' + event.data.index + '/' + event.data.count + ')';\n    }\n\n    var displayStr = !isNullOrUndefined(event.data) || isAllDay ? allDayStr : timeStr;\n    var appDateTime = createElement('div', {\n      className: DATE_TIME_CLASS,\n      innerHTML: displayStr\n    });\n    return [appSubjectWrap, appDateTime];\n  };\n\n  AgendaBase.prototype.processAgendaEvents = function (events) {\n    var eventsProcessed = [];\n\n    if (isNullOrUndefined(events)) {\n      return eventsProcessed;\n    }\n\n    for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n      var event_1 = events_1[_i];\n      var spanned = this.parent.eventBase.splitEventByDay(event_1);\n      eventsProcessed = eventsProcessed.concat(spanned.length > 1 ? spanned : event_1);\n    }\n\n    return eventsProcessed;\n  };\n\n  AgendaBase.prototype.wireEventActions = function () {\n    var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n\n    for (var _i = 0, eventElement_1 = eventElement; _i < eventElement_1.length; _i++) {\n      var element = eventElement_1[_i];\n      this.parent.eventBase.wireAppointmentEvents(element, this.parent.getEventDetails(element), true);\n    }\n\n    var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n\n    for (var _a = 0, dateHeaderElement_1 = dateHeaderElement; _a < dateHeaderElement_1.length; _a++) {\n      var element = dateHeaderElement_1[_a];\n      EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n    }\n  };\n\n  AgendaBase.prototype.calculateResourceTableElement = function (tBody, noOfDays, agendaDate) {\n    if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n      var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n      this.parent.resourceBase.generateResourceLevels(level);\n    }\n\n    var agendaLastDate = addDays(new Date(agendaDate.getTime()), noOfDays);\n    var days = this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda' ? noOfDays : 1;\n    var resColl = this.parent.resourceBase.resourceCollection;\n    var resData = this.parent.resourceBase.lastResourceLevel;\n    var initialDate = agendaDate;\n\n    for (var i = 0; i < days; i++) {\n      var lastLevelInfo = [];\n      var tempLastLevelInfo = [];\n      var tempIndex = 0;\n      var eventObj = void 0;\n      var dateObj = void 0;\n      var firstDate = addDays(initialDate, i);\n      var finalDate = this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda' ? addDays(firstDate, 1) : agendaLastDate;\n      var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n\n      if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n        for (var res = 0; res < resData.length; res++) {\n          noOfDays = !this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda' ? noOfDays : 1;\n          var data = [];\n          agendaDate = firstDate; // eslint-disable-next-line max-len\n\n          var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[parseInt(res.toString(), 10)]);\n\n          if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n            for (var r = 0; r < noOfDays; r++) {\n              // eslint-disable-next-line max-len\n              var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, addDays(agendaDate, 1), resDataCollection, undefined);\n\n              if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                data.push(resDayCollection[0]);\n                eventObj = {\n                  rowSpan: 1,\n                  type: 'eventColumn',\n                  resource: resColl[resColl.length - 1],\n                  groupIndex: resData[parseInt(res.toString(), 10)].groupIndex,\n                  groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                  resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                  eventData: resDayCollection,\n                  date: agendaDate\n                };\n                dateObj = {\n                  rowSpan: 1,\n                  type: 'dateColumn',\n                  resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                  groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                  resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                  date: agendaDate\n                };\n\n                if (!lastLevelInfo[parseInt(tempIndex.toString(), 10)]) {\n                  lastLevelInfo[parseInt(tempIndex.toString(), 10)] = [];\n                }\n\n                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(eventObj);\n                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(dateObj);\n                tempIndex++;\n              }\n\n              agendaDate = addDays(agendaDate, 1);\n\n              if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = AGENDA_DAY_BORDER_CLASS;\n                var tempObj = {\n                  rowSpan: data.length,\n                  type: 'resourceColumn',\n                  resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                  groupOrder: resData[parseInt(res.toString(), 10)].groupOrder.slice(0, -1),\n                  resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                  groupIndex: lastLevelInfo.length - data.length,\n                  className: [RESOURCE_NAME],\n                  date: agendaDate\n                };\n                lastLevelInfo[parseInt((lastLevelInfo.length - data.length).toString(), 10)].push(tempObj);\n                tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                break;\n              }\n            }\n          }\n        }\n\n        var topResources = resColl.slice(0, -1);\n        var tempGroupedData = [];\n        var totalRowSpan = 0;\n\n        for (var y = 0; y < topResources.length; y++) {\n          var data = topResources[topResources.length - (y + 1)].dataSource;\n\n          for (var x = 0; x < data.length; x++) {\n            var z = 0;\n\n            for (var u = 0; u < tempLastLevelInfo.length; u++) {\n              // eslint-disable-next-line max-len\n              if (tempLastLevelInfo[parseInt(u.toString(), 10)].groupOrder[topResources.length - (y + 1)] === data[parseInt(x.toString(), 10)][topResources[topResources.length - (y + 1)].idField]) {\n                totalRowSpan = totalRowSpan + tempLastLevelInfo[parseInt(u.toString(), 10)].rowSpan;\n                tempGroupedData.push(extend({}, tempLastLevelInfo[parseInt(u.toString(), 10)], null, true));\n              }\n\n              if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                tempGroupedData[0].rowSpan = totalRowSpan;\n                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                tempGroupedData[0].resourceData = data[parseInt(x.toString(), 10)];\n                tempGroupedData[0].date = agendaDate;\n                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                tempGroupedData = [];\n                totalRowSpan = 0;\n              }\n            }\n          }\n        }\n\n        this.createResourceTableRow(lastLevelInfo, tBody);\n      }\n    }\n\n    var totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n\n    if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n      this.renderEmptyContent(tBody, initialDate);\n    }\n  };\n\n  AgendaBase.prototype.createResourceTableRow = function (tContent, tBody) {\n    var tr = createElement('tr');\n    var ntr;\n    var td = createElement('td', {\n      attrs: {\n        'aria-selected': 'false'\n      }\n    });\n    var tempData;\n    var rowSpan = 0;\n    var level;\n\n    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n      var tContentCollection = [];\n      var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n\n      for (var w = 0; w < tContent.length; w++) {\n        tContentCollection = tContentCollection.concat(tContent[parseInt(w.toString(), 10)]);\n      }\n\n      level = parentCollection.length > 0 ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n      var rowSpanCollection = tContentCollection.filter(function (data) {\n        return data.type === level;\n      });\n\n      for (var x = 0; x < rowSpanCollection.length; x++) {\n        rowSpan = rowSpan + rowSpanCollection[parseInt(x.toString(), 10)].rowSpan;\n      }\n    }\n\n    for (var row = 0; row < tContent.length; row++) {\n      ntr = tr.cloneNode();\n\n      for (var col = tContent[parseInt(row.toString(), 10)].length - 1; col >= 0; col--) {\n        var data = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n        var ntd = td.cloneNode();\n\n        if (data.type === 'dateColumn') {\n          if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            tempData = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n            continue;\n          }\n\n          ntd.setAttribute('data-date', data.date.getTime().toString());\n          ntd.appendChild(this.createDateHeaderElement(data.date));\n          var className = [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS];\n\n          if (data.cssClass) {\n            className.push(data.cssClass);\n          }\n\n          addClass([ntd], className);\n\n          if (this.isCurrentDate(new Date(data.date.getTime()))) {\n            addClass(ntd.childNodes, AGENDA_CURRENT_DAY_CLASS);\n          }\n\n          ntr.appendChild(ntd);\n        } else if (data.type === 'eventColumn') {\n          var elementType = data.eventData.length === 0 ? 'noEvents' : 'data';\n          ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n          ntd.setAttribute('data-date', data.date.getTime().toString());\n\n          if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            addClass([ntd], [AGENDA_CELLS_CLASS, AGENDA_DAY_PADDING_CLASS]);\n          }\n\n          ntr.appendChild(ntd);\n        } else {\n          ntd.setAttribute('rowspan', data.rowSpan.toString());\n          addClass([ntd], AGENDA_RESOURCE_CLASS);\n          this.setResourceHeaderContent(ntd, data, data.className[0]);\n          ntr.appendChild(ntd);\n        }\n      }\n\n      if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n        var ntd = td.cloneNode();\n        ntd.setAttribute('data-date', tempData.date.getTime().toString());\n        ntd.setAttribute('rowspan', rowSpan.toString());\n        ntd.appendChild(this.createDateHeaderElement(tempData.date));\n        addClass([ntd], [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS, DATE_BORDER_CLASS]);\n        var daysCount = getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n        ntr.setAttribute('data-row-index', daysCount.toString());\n\n        if (this.parent.element.querySelector(\".e-agenda-view tr[data-row-index=\\\"\" + daysCount + \"\\\"]\")) {\n          break;\n        }\n\n        ntr.insertBefore(ntd, ntr.childNodes[0]);\n      }\n\n      tBody.appendChild(ntr);\n    }\n  };\n\n  AgendaBase.prototype.createDateHeaderElement = function (date) {\n    var dateHeader;\n\n    if (this.parent.activeViewOptions.dateHeaderTemplate) {\n      dateHeader = createElement('div', {\n        className: AGENDA_HEADER_CLASS\n      });\n      var args = {\n        date: date,\n        type: 'dateHeader'\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n      var templateId = scheduleId + viewName + 'dateHeaderTemplate';\n      var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false));\n      append(dateTemplate, dateHeader);\n    } else {\n      dateHeader = this.getMobileDateElement(date, AGENDA_HEADER_CLASS);\n    }\n\n    return dateHeader;\n  };\n\n  AgendaBase.prototype.renderEmptyContent = function (tBody, agendaDate) {\n    var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n    var eTd = eTr.children[0];\n    var noEvents = createElement('div', {\n      className: AGENDA_EMPTY_EVENT_CLASS,\n      innerHTML: this.parent.localeObj.getConstant('noEvents')\n    });\n    eTd.appendChild(noEvents);\n    tBody.appendChild(eTr);\n  };\n\n  AgendaBase.prototype.createTableRowElement = function (date, type) {\n    var daysCount = getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n    var tr = createElement('tr', {\n      attrs: {\n        'data-row-index': daysCount.toString()\n      }\n    });\n    var td = createElement('td', {\n      attrs: {\n        'class': type === 'monthHeader' ? MONTH_HEADER_CLASS : AGENDA_CELLS_CLASS,\n        'aria-selected': 'false',\n        'data-column-index': daysCount.toString(),\n        'data-date': date.getTime().toString()\n      }\n    });\n    var dTd = td.cloneNode();\n    var aTd = td.cloneNode();\n    tr.appendChild(dTd);\n\n    if (type !== 'noEvents') {\n      tr.appendChild(aTd);\n    }\n\n    return tr;\n  };\n\n  AgendaBase.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n\n  return AgendaBase;\n}(ViewBase);\n\nvar __extends$23 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * agenda view\n */\n\n\nvar Agenda =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$23(Agenda, _super);\n\n  function Agenda(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-agenda-view';\n    _this.isInverseTableSelect = false;\n    _this.agendaDates = {};\n    _this.virtualScrollTop = 1;\n    return _this;\n  }\n\n  Agenda.prototype.getModuleName = function () {\n    return 'agenda';\n  };\n\n  Agenda.prototype.renderLayout = function () {\n    this.agendaDates = {};\n    this.element = createElement('div', {\n      className: TABLE_WRAP_CLASS\n    });\n    addClass([this.element], this.viewClass);\n    this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n    var eTr = createElement('tr');\n    this.element.querySelector('tbody').appendChild(eTr);\n    var workTd = createElement('td');\n    eTr.appendChild(workTd);\n    var wrap = createElement('div', {\n      className: CONTENT_WRAP_CLASS\n    });\n    workTd.appendChild(wrap);\n    var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    wrap.appendChild(tbl);\n    var tBody = tbl.querySelector('tbody');\n    var agendaDate = resetTime(this.parent.selectedDate);\n    this.renderEmptyContent(tBody, agendaDate);\n    this.wireEvents();\n\n    if (this.parent.resourceBase) {\n      this.parent.resourceBase.generateResourceLevels([{\n        renderDates: this.parent.activeView.renderDates\n      }]);\n    }\n\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n\n    this.parent.notify(contentReady, {});\n  };\n\n  Agenda.prototype.eventLoad = function (args) {\n    this.dataSource = extend([], this.parent.eventsData, null, true);\n\n    for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n      var event_1 = _a[_i];\n      delete event_1.generatedDates;\n    }\n\n    var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ? args.processedData : this.parent.eventsProcessed;\n\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n      this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n      eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n    }\n\n    this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n    var agendaDate = resetTime(this.parent.selectedDate);\n    var tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n    removeChildren(tBody);\n    this.renderInitialContent(tBody, agendaDate);\n    this.wireEventActions();\n    var contentArea = closest(tBody, '.' + CONTENT_WRAP_CLASS);\n    contentArea.scrollTop = 1;\n    this.parent.notify(eventsLoaded, {});\n\n    if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.retainScrollPosition();\n    }\n  };\n\n  Agenda.prototype.refreshEvent = function (refreshDate) {\n    var processedData = [];\n    var fields = this.parent.eventFields;\n\n    for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n      var data = _a[_i];\n\n      if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) && !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n        processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n      }\n    }\n\n    this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n  };\n\n  Agenda.prototype.refreshHeader = function () {\n    var tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      removeChildren(tBody);\n    } else {\n      remove(tBody.firstElementChild);\n    }\n\n    var agendaDate = resetTime(this.parent.selectedDate);\n    var emptyTBody = createElement('tbody');\n    var firstDate = new Date(agendaDate.getTime());\n    var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n    this.renderContent(emptyTBody, firstDate, lastDate);\n    append([].slice.call(emptyTBody.childNodes), tBody);\n  };\n\n  Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n    var emptyTBody = createElement('tbody');\n    var firstDate = new Date(agendaDate.getTime());\n    var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n    this.renderContent(emptyTBody, firstDate, lastDate);\n    append([].slice.call(emptyTBody.childNodes), tBody); // Initial rendering, to load previous date events upto scroll bar enable\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n      var contentArea = this.getContentAreaElement();\n      var contentChild = contentArea.querySelector('.e-content-table');\n\n      while (contentArea.offsetWidth <= contentArea.clientWidth) {\n        if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n          break;\n        }\n\n        var emptyTBody_1 = createElement('tbody');\n        lastDate = firstDate;\n        firstDate = addDays(lastDate, -this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody_1, firstDate, lastDate);\n        prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n\n        if (firstDate <= this.parent.minDate) {\n          break;\n        }\n      }\n    }\n\n    if (tBody.childNodes.length <= 0) {\n      this.renderEmptyContent(tBody, agendaDate);\n    }\n  };\n\n  Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n    var fieldMapping = this.parent.eventFields;\n    var firstDate = new Date(agendaDate.getTime());\n    var isObject = this.appointmentFiltering(firstDate, lastDate);\n\n    if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n      agendaDate = isObject[0][fieldMapping.startTime];\n      agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n      this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n    }\n\n    var endDate;\n\n    if (!this.parent.hideEmptyAgendaDays || this.parent.agendaDaysCount > 0 && isObject.length > 0) {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        var date = agendaDate;\n\n        if (!this.parent.activeViewOptions.group.byDate) {\n          this.parent.activeViewOptions.allowVirtualScrolling = false;\n          date = firstDate;\n\n          if (this.parent.headerModule) {\n            this.parent.headerModule.updateDateRange();\n            this.parent.headerModule.updateHeaderItems('remove');\n          }\n        }\n\n        this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n      } else {\n        for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n          var filterData = this.appointmentFiltering(agendaDate);\n          var nTr = this.createTableRowElement(agendaDate, 'data');\n\n          if (this.element.querySelector('tr[data-row-index=\"' + parseInt(nTr.getAttribute('data-row-index'), 10) + '\"]')) {\n            agendaDate = addDays(agendaDate, 1);\n            continue;\n          }\n\n          var dTd = nTr.children[0];\n          var aTd = nTr.children[1];\n\n          if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays && filterData.length === 0) {\n            var elementType = !this.parent.hideEmptyAgendaDays && filterData.length === 0 ? 'noEvents' : 'data';\n            dTd.appendChild(this.createDateHeaderElement(agendaDate));\n            nTr.appendChild(dTd);\n            var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n            nTr.appendChild(cTd);\n\n            if (cTd.querySelectorAll('li').length > 0) {\n              tBody.appendChild(nTr);\n            }\n          } else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            day--;\n          }\n\n          if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n            addClass(dTd.childNodes, AGENDA_CURRENT_DAY_CLASS);\n          }\n\n          agendaDate = addDays(agendaDate, 1);\n\n          if (agendaDate.getTime() > lastDate.getTime()) {\n            break;\n          }\n        }\n      }\n\n      endDate = new Date(agendaDate.getTime() - MS_PER_DAY);\n    }\n\n    this.agendaDates = {\n      start: firstDate,\n      end: endDate\n    };\n  };\n\n  Agenda.prototype.agendaScrolling = function (event) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.virtualScrolling(event);\n    }\n\n    if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.setPersistence();\n    }\n  };\n\n  Agenda.prototype.virtualScrolling = function (event) {\n    var target = event.target;\n    var scrollTop = target.scrollTop;\n    var scrollHeight = target.scrollHeight;\n    var offsetHeight = target.clientHeight;\n    var totalHeight = scrollTop + offsetHeight;\n    var direction = this.virtualScrollTop < scrollTop ? 'next' : 'previous';\n    var tBody = target.querySelector('tbody');\n    var emptyTBody = createElement('tbody');\n    var topElement = this.getElementFromScrollerPosition(event);\n    var scrollDate = this.parent.getDateFromElement(topElement);\n    var filterDate;\n    var filterData;\n\n    if (scrollTop === 0) {\n      filterDate = this.getPreviousNextDate(addDays(scrollDate, -1), direction);\n      filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n        prepend([].slice.call(emptyTBody.childNodes), tBody);\n        this.wireEventActions();\n\n        for (var s = 0, element = tBody.children; s < element.length; s++) {\n          if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n            var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop - this.element.querySelector('.e-agenda-item').offsetHeight;\n            target.scrollTop = scrollToValue;\n            break;\n          }\n        }\n\n        this.updateHeaderText(scrollDate);\n      }\n    } else if (totalHeight >= scrollHeight - 5) {\n      filterDate = this.getPreviousNextDate(addDays(scrollDate, 1), direction);\n      filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        this.wireEventActions();\n        this.updateHeaderText(scrollDate);\n      }\n    } else {\n      this.updateHeaderText(scrollDate);\n    }\n\n    this.virtualScrollTop = scrollTop;\n    var selectedElements = this.parent.eventBase.getSelectedAppointments();\n\n    if (selectedElements.length > 0) {\n      selectedElements[selectedElements.length - 1].focus();\n    }\n  };\n\n  Agenda.prototype.getElementFromScrollerPosition = function (event) {\n    var filterElement;\n    var target = event.target;\n    var scrollTop = target.scrollTop;\n    var scrollHeight = target.scrollHeight;\n    var offsetHeight = target.clientHeight;\n    var totalHeight = scrollTop + offsetHeight;\n    var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n    var li;\n    var liDetails;\n\n    if (liCollection.length > 0) {\n      if (scrollTop === 0) {\n        li = liCollection[0];\n        filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n      } else if (totalHeight === scrollHeight) {\n        li = liCollection[liCollection.length - 1];\n        filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n      } else {\n        for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n          li = liCollection[parseInt(a.toString(), 10)];\n          liDetails = li.getBoundingClientRect();\n\n          if (liDetails.top >= 0) {\n            filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n            break;\n          }\n        }\n      }\n    }\n\n    return filterElement;\n  };\n\n  Agenda.prototype.updateHeaderText = function (date) {\n    if (this.parent.showHeaderBar) {\n      this.parent.headerModule.updateDateRange(date);\n    }\n  };\n\n  Agenda.prototype.getPreviousNextDate = function (date, type) {\n    var currentDate = new Date(date.getTime());\n    var firstDate = this.getStartDateFromEndDate(date);\n    var lastDate = this.getEndDateFromStartDate(date);\n    var daysCount = 0;\n\n    do {\n      var filterData = this.appointmentFiltering(currentDate);\n\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        daysCount++;\n      }\n\n      currentDate = addDays(currentDate, type === 'next' ? 1 : -1);\n\n      if (currentDate < firstDate || currentDate > lastDate) {\n        break;\n      }\n    } while (daysCount !== this.parent.agendaDaysCount);\n\n    var endDate = addDays(currentDate, type === 'next' ? -1 : 1);\n    return type === 'next' ? {\n      start: date,\n      end: addDays(endDate, 1)\n    } : {\n      start: endDate,\n      end: addDays(date, 1)\n    };\n  };\n\n  Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n    var dateStart;\n    var dateEnd;\n\n    if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n      dateStart = resetTime(new Date(startDate.getTime()));\n      dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n    } else {\n      dateStart = new Date(startDate.getTime());\n      dateEnd = new Date(endDate.getTime());\n    }\n\n    var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n\n    if (filterData.length === 0) {\n      this.refreshEvent(startDate);\n      filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    }\n\n    return filterData;\n  };\n\n  Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n    var filterDate;\n    var fields = this.parent.eventFields;\n\n    if (this.parent.eventsProcessed.length > 0) {\n      var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n        return a[fields.startTime].getTime();\n      }));\n      filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n    } else {\n      filterDate = this.parent.hideEmptyAgendaDays ? addMonths(endDate, -1) : this.parent.minDate;\n    }\n\n    return resetTime(filterDate);\n  };\n\n  Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n    var filterDate;\n    var fieldMapping = this.parent.eventFields;\n\n    if (this.parent.eventsProcessed.length > 0) {\n      var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n        return a[fieldMapping.endTime].getTime();\n      }));\n      filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n    } else {\n      filterDate = this.parent.hideEmptyAgendaDays ? addMonths(startDate, 1) : this.parent.maxDate;\n    }\n\n    return resetTime(addDays(filterDate, 1));\n  };\n\n  Agenda.prototype.getNextPreviousDate = function (type) {\n    var noOfDays = type === 'next' ? 1 : -1;\n    return addDays(this.parent.selectedDate, noOfDays);\n  };\n\n  Agenda.prototype.startDate = function () {\n    return resetTime(this.parent.selectedDate);\n  };\n\n  Agenda.prototype.endDate = function () {\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      return this.getEndDateFromStartDate(this.startDate());\n    } else {\n      return addDays(this.startDate(), this.parent.agendaDaysCount);\n    }\n  };\n\n  Agenda.prototype.getDateRangeText = function (date) {\n    var formatDate = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n      var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n      return capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, {\n        format: formatDate,\n        calendar: this.parent.getCalendarMode()\n      }), 'multiple');\n    } else {\n      var startDate = this.parent.selectedDate;\n      var endDate = addDays(startDate, this.parent.agendaDaysCount - 1);\n      return this.formatDateRange(startDate, endDate);\n    }\n  };\n\n  Agenda.prototype.dayNavigationClick = function (e) {\n    var element = closest(e.currentTarget, '.' + AGENDA_CELLS_CLASS);\n    var date = this.parent.getDateFromElement(element);\n\n    if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n      this.parent.setProperties({\n        selectedDate: date\n      }, true);\n      this.parent.changeView('Day', e);\n    }\n  };\n\n  Agenda.prototype.wireEvents = function () {\n    EventHandler.add(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling, this);\n  };\n\n  Agenda.prototype.unWireEvents = function () {\n    EventHandler.remove(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling);\n    var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n\n    for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n      var element = dateHeaderElement_1[_i];\n      EventHandler.remove(element, 'click', this.dayNavigationClick);\n    }\n  };\n\n  Agenda.prototype.addEventListener = function () {\n    this.parent.on(scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n    this.parent.on(dataReady, this.eventLoad, this);\n  };\n\n  Agenda.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(scrollUiUpdate, this.onAgendaScrollUiUpdate);\n      this.parent.off(dataReady, this.eventLoad);\n    }\n  };\n\n  Agenda.prototype.onAgendaScrollUiUpdate = function () {\n    var headerHeight = this.getHeaderBarHeight();\n\n    if (this.parent.headerModule) {\n      if (this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.parent.headerModule.updateHeaderItems('add');\n      } else {\n        this.parent.headerModule.updateHeaderItems('remove');\n      }\n    }\n\n    var contentArea = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n    if (this.parent.height !== 'auto') {\n      contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n    }\n  };\n\n  Agenda.prototype.scrollToDate = function (scrollDate) {\n    var date = new Date(+resetTime(scrollDate));\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, addDays(date, 1), true).length > 0) {\n        this.parent.changeDate(date);\n      }\n    } else {\n      var dateElement = this.element.querySelector('.' + AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n\n      if (dateElement) {\n        this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n      }\n    }\n  };\n\n  Agenda.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.element) {\n      this.unWireEvents();\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.parent.headerModule.updateHeaderItems('remove');\n      }\n\n      _super.prototype.destroy.call(this);\n    }\n  };\n\n  return Agenda;\n}(AgendaBase);\n\nvar __extends$25 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * month agenda view\n */\n\n\nvar MonthAgenda =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$25(MonthAgenda, _super);\n\n  function MonthAgenda(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.dayNameFormat = 'narrow';\n    _this.viewClass = 'e-month-agenda-view';\n    _this.monthAgendaDate = new Date('' + parent.selectedDate);\n    return _this;\n  }\n\n  MonthAgenda.prototype.getModuleName = function () {\n    return 'monthAgenda';\n  };\n\n  MonthAgenda.prototype.renderAppointmentContainer = function () {\n    var contentArea = this.getContentAreaElement();\n    var wrapperContainer = createElement('div', {\n      className: WRAPPER_CONTAINER_CLASS\n    });\n    contentArea.appendChild(wrapperContainer);\n    var appWrap = createElement('div', {\n      className: APPOINTMENT_WRAP_CLASS\n    });\n    wrapperContainer.appendChild(appWrap);\n    this.appendAppContainer(appWrap);\n    this.setEventWrapperHeight();\n  };\n\n  MonthAgenda.prototype.getDayNameFormat = function () {\n    if (this.parent.isAdaptive) {\n      return 'narrow';\n    }\n\n    return 'abbreviated';\n  };\n\n  MonthAgenda.prototype.updateSelectedCellClass = function (data) {\n    if (resetTime(data.date).getTime() === resetTime(this.monthAgendaDate).getTime()) {\n      data.className.push(SELECTED_CELL_CLASS);\n    }\n  };\n\n  MonthAgenda.prototype.setEventWrapperHeight = function () {\n    var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n    var resourceWrapper = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n\n    if (resourceWrapper) {\n      headerHeight += resourceWrapper.offsetHeight;\n    }\n\n    var contentArea = this.getContentAreaElement().firstElementChild;\n    var dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n    var availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight;\n    var contentAreaHeight = this.parent.activeViewOptions.interval > 1 ? Math.round(availHeight * 0.8) : contentArea.offsetHeight;\n    var appContainerHeight = availHeight - contentAreaHeight;\n    var wrapperContainer = this.element.querySelector('.' + WRAPPER_CONTAINER_CLASS);\n    var eventWrapper = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n\n    if (this.parent.height !== 'auto') {\n      if (this.parent.activeViewOptions.interval > 1) {\n        contentArea.style.height = formatUnit(contentAreaHeight);\n        EventHandler.add(contentArea, 'scroll', this.onContentScroll, this);\n      }\n\n      wrapperContainer.style.height = eventWrapper.style.height = formatUnit(appContainerHeight);\n    }\n  };\n\n  MonthAgenda.prototype.onDataReady = function (args) {\n    this.setEventWrapperHeight();\n    this.clearElements();\n    var eventCollection = args.processedData;\n\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n      eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n    }\n\n    this.agendaBase = this.getAgendaBase();\n    this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n    var count = 0;\n\n    for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n      var date = _a[_i];\n      var filterData = this.appointmentFiltering(date);\n      var workCell = this.element.querySelectorAll('.' + WORK_CELLS_CLASS)[parseInt(count.toString(), 10)];\n\n      if (filterData.length > 0) {\n        if (!workCell.querySelector('.' + APPOINTMENT_INDICATOR_CLASS)) {\n          workCell.appendChild(createElement('div', {\n            className: APPOINTMENT_INDICATOR_CLASS\n          }));\n        }\n\n        if (date.getTime() === resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n          this.onEventRender(filterData, date);\n        }\n      }\n\n      count++;\n    }\n\n    this.parent.notify(eventsLoaded, {});\n  };\n\n  MonthAgenda.prototype.onCellClick = function (event) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    var filterData = this.appointmentFiltering(event.startTime);\n    this.onEventRender(filterData, event.startTime);\n    this.parent.notify(eventsLoaded, {});\n    this.monthAgendaDate = new Date('' + event.startTime);\n  };\n\n  MonthAgenda.prototype.onEventRender = function (events, date) {\n    this.agendaBase = this.getAgendaBase();\n    var appWrap = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n    removeChildren(appWrap);\n\n    if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n      if (events.length > 0) {\n        var appContainer = createElement('div', {\n          className: APPOINTMENT_CONTAINER_CLASS\n        });\n        appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n      } else {\n        this.appendAppContainer(appWrap);\n      }\n    } else {\n      if (events.length > 0) {\n        var table = this.createTableLayout();\n        var tBody = table.querySelector('tbody');\n        this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n        table.appendChild(tBody);\n        appWrap.appendChild(table);\n      } else {\n        this.appendAppContainer(appWrap);\n      }\n    }\n\n    this.agendaBase.wireEventActions();\n  };\n\n  MonthAgenda.prototype.appointmentFiltering = function (date) {\n    var dateStart = resetTime(new Date(date.getTime()));\n    var dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n    return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n  };\n\n  MonthAgenda.prototype.clearElements = function () {\n    var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_INDICATOR_CLASS));\n\n    for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n      var appointmentIndicator = appointmentIndicators_1[_i];\n      remove(appointmentIndicator);\n    }\n\n    this.appendAppContainer(this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS));\n  };\n\n  MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n    var app = createElement('div', {\n      className: APPOINTMENT_CONTAINER_CLASS\n    });\n    addClass([app], AGENDA_NO_EVENT_CLASS);\n    app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n    removeChildren(appWrap);\n    appWrap.appendChild(app);\n  };\n\n  MonthAgenda.prototype.getNextPreviousDate = function (type) {\n    var selectedDate = this.parent.selectedDate;\n    var interval = type === 'next' ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n    var navigateDate = addMonths(this.parent.selectedDate, interval);\n    var month = type === 'next' ? 2 : 0;\n    var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n    var date = lastDate >= this.monthAgendaDate.getDate() ? this.monthAgendaDate.getDate() : lastDate;\n    this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n    return this.monthAgendaDate;\n  };\n\n  MonthAgenda.prototype.getAgendaBase = function () {\n    return this.agendaBase || new AgendaBase(this.parent);\n  };\n\n  MonthAgenda.prototype.destroy = function () {\n    if (this.agendaBase) {\n      this.agendaBase.destroy();\n      this.agendaBase = null;\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return MonthAgenda;\n}(Month);\n/**\n * timeline header rows\n */\n\n\nvar TimelineHeaderRow =\n/** @__PURE__ @class */\nfunction () {\n  function TimelineHeaderRow(parent, renderDates) {\n    this.parent = parent;\n    this.renderDates = renderDates;\n  }\n\n  TimelineHeaderRow.prototype.groupByYear = function (dates) {\n    var result = {};\n\n    for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n      var d = dates_1[_i];\n      var key = d.getFullYear();\n      result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n      result[parseInt(key.toString(), 10)].push(d);\n    }\n\n    return result;\n  };\n\n  TimelineHeaderRow.prototype.groupByMonth = function (dates) {\n    var result = {};\n\n    for (var _i = 0, dates_2 = dates; _i < dates_2.length; _i++) {\n      var d = dates_2[_i];\n      var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n      result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n      result[parseInt(key.toString(), 10)].push(d);\n    }\n\n    return result;\n  };\n\n  TimelineHeaderRow.prototype.groupByWeek = function (dates) {\n    var result = {};\n\n    for (var _i = 0, dates_3 = dates; _i < dates_3.length; _i++) {\n      var d = dates_3[_i];\n      var jsDate = +new Date(1970, 0, 1);\n      var tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n      var key = Math.ceil(((+d - jsDate - tzOffsetDiff * 60 * 1000) / MS_PER_DAY + new Date(jsDate).getDay() + 1) / 7);\n\n      if (this.parent.firstDayOfWeek && this.parent.firstDayOfWeek > new Date(+d).getDay()) {\n        key = key - 1;\n      }\n\n      result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n      result[parseInt(key.toString(), 10)].push(d);\n    }\n\n    return result;\n  };\n\n  TimelineHeaderRow.prototype.generateSlots = function (data, colspan, row, cls, type) {\n    var _this = this;\n\n    var dateParser = function (date, format) {\n      return _this.parent.globalize.formatDate(date, {\n        format: format,\n        calendar: _this.parent.getCalendarMode()\n      });\n    };\n\n    var tdDatas = [];\n    var keys = Object.keys(data);\n\n    for (var i = 0; i < keys.length; i++) {\n      var dates = data[keys[parseInt(i.toString(), 10)]];\n      var htmlCol = void 0;\n\n      if (row.template) {\n        var args = {\n          date: dates[0],\n          type: type\n        };\n        var templateId = this.parent.element.id + '_headerRowTemplate';\n        htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n      } else {\n        var viewTemplate = void 0;\n\n        switch (row.option) {\n          case 'Year':\n            viewTemplate = \"<span class=\\\"e-header-year\\\">\" + dateParser(dates[0], 'y') + \"</span>\";\n            break;\n\n          case 'Month':\n            viewTemplate = \"<span class=\\\"e-header-month\\\">\" + capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single') + \"</span>\";\n            break;\n\n          case 'Week':\n            viewTemplate = \"<span class=\\\"e-header-week\\\">\" + this.parent.getWeekNumberContent(dates) + \"</span>\";\n        }\n\n        var headerWrapper = createElement('div', {\n          innerHTML: viewTemplate\n        });\n        htmlCol = [].slice.call(headerWrapper.childNodes);\n      }\n\n      tdDatas.push({\n        date: dates[0],\n        type: type,\n        className: [cls],\n        colSpan: dates.length * colspan,\n        template: htmlCol\n      });\n    }\n\n    return tdDatas;\n  };\n\n  TimelineHeaderRow.prototype.generateColumnLevels = function (dateSlots, hourSlots) {\n    var levels = [];\n    var rows = this.parent.activeViewOptions.headerRows;\n    var lastLevelColspan = 1;\n\n    if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n      lastLevelColspan = hourSlots.length / dateSlots.length;\n    }\n\n    var tdDatas = [];\n    var byYear;\n    var byMonth;\n    var byWeek;\n\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n\n      switch (row.option) {\n        case 'Year':\n          byYear = this.groupByYear(this.renderDates);\n          tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n          levels.push(tdDatas);\n          break;\n\n        case 'Month':\n          byMonth = this.groupByMonth(this.renderDates);\n          tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n          levels.push(tdDatas);\n          break;\n\n        case 'Week':\n          byWeek = this.groupByWeek(this.renderDates);\n          tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n          levels.push(tdDatas);\n          break;\n\n        case 'Date':\n          tdDatas = dateSlots;\n          tdDatas = tdDatas.map(function (value) {\n            value.colSpan = lastLevelColspan;\n            return value;\n          });\n          levels.push(tdDatas);\n          break;\n\n        case 'Hour':\n          if (hourSlots.length > 0) {\n            levels.push(hourSlots);\n          }\n\n          break;\n      }\n    }\n\n    return levels;\n  };\n\n  return TimelineHeaderRow;\n}();\n\nvar __extends$26 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * timeline views\n */\n\n\nvar TimelineViews =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$26(TimelineViews, _super);\n\n  function TimelineViews(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.timelineAppointment = null;\n    _this.baseCssClass = 'e-timeline-view';\n    return _this;\n  }\n\n  TimelineViews.prototype.getModuleName = function () {\n    return 'timelineViews';\n  };\n\n  TimelineViews.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n  };\n\n  TimelineViews.prototype.scrollTopPanel = function (target) {\n    _super.prototype.scrollTopPanel.call(this, target);\n\n    this.scrollHeaderLabels(target);\n  };\n\n  TimelineViews.prototype.scrollToWorkHour = function () {\n    var start = this.parent.getStartEndTime(this.parent.workHours.start);\n    var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight && !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0) : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n    var queryString = '[data-date=\"' + new Date(currDateTime).getTime().toString() + '\"]';\n    var firstWorkHourCell = this.element.querySelector(queryString);\n\n    if (firstWorkHourCell) {\n      this.getContentAreaElement().scrollLeft = !this.parent.enableRtl ? firstWorkHourCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - firstWorkHourCell.offsetLeft - firstWorkHourCell.offsetWidth);\n    }\n  };\n\n  TimelineViews.prototype.scrollToHour = function (hour, scrollDate) {\n    var date;\n    var index;\n\n    if (scrollDate) {\n      index = this.parent.getIndexOfDate(this.renderDates, resetTime(scrollDate));\n\n      if (index >= 0) {\n        date = scrollDate;\n\n        if (!isNullOrUndefined(hour)) {\n          var timeString = hour.split(':');\n\n          if (timeString.length === 2) {\n            date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n          }\n        }\n      }\n    }\n\n    date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n\n    if (isNullOrUndefined(date)) {\n      return;\n    }\n\n    var scrollLeft;\n\n    if (isNullOrUndefined(hour) || !this.parent.activeViewOptions.timeScale.enable) {\n      scrollLeft = index * this.getWorkCellWidth();\n    } else {\n      scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) : this.getLeftFromDateTime([index], date);\n    }\n\n    this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n  };\n\n  TimelineViews.prototype.generateColumnLevels = function () {\n    var levels = [];\n    var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    levels.push(dateSlots);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n    }\n\n    var hourSlots = [];\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n      levels.push(hourSlots);\n    }\n\n    if (this.parent.activeViewOptions.headerRows.length > 0) {\n      var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n      levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n    }\n\n    return levels;\n  };\n\n  TimelineViews.prototype.generateTimeSlots = function (dateSlots) {\n    var _this = this;\n\n    var handler = function (r) {\n      r.type = r.first ? 'majorSlot' : 'minorSlot';\n      r.className = r.first ? [TIME_SLOT_CLASS] : [TIME_SLOT_CLASS, TIME_CELLS_CLASS];\n      r.workDays = _this.parent.activeViewOptions.workDays;\n      return r;\n    };\n\n    var timeSlotData = this.getTimeSlotRows(handler);\n    var slots = [];\n\n    for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n      var data = dateSlots_1[_i];\n      data.colSpan = timeSlotData.length;\n      var tempTimeSlots = extend([], timeSlotData, null, true);\n\n      for (var _a = 0, tempTimeSlots_1 = tempTimeSlots; _a < tempTimeSlots_1.length; _a++) {\n        var slot = tempTimeSlots_1[_a];\n        var cellDate = resetTime(new Date('' + data.date));\n        slot.date = setTime(cellDate, getDateInMs(slot.date));\n        slots.push(slot);\n      }\n    }\n\n    return slots;\n  };\n\n  TimelineViews.prototype.changeCurrentTimePosition = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeCurrentTimeIndicatorElements();\n    var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n    var left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n    var height = this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n    var headerWrap = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n    var contentWrap = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    contentWrap.appendChild(createElement('div', {\n      className: CURRENT_TIMELINE_CLASS,\n      styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n    }));\n\n    if (this.parent.virtualScrollModule) {\n      var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n      var element = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n      setStyleAttribute(timeIndicator, {\n        transform: element.style.transform\n      });\n    }\n\n    var currentTimeEle = createElement('div', {\n      innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n      className: CURRENT_TIME_CLASS\n    });\n    headerWrap.appendChild(currentTimeEle);\n    currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - currentTimeEle.offsetWidth / 2);\n  };\n\n  TimelineViews.prototype.getLeftFromDateTime = function (currentDateIndex, date) {\n    var startHour = this.getStartHour();\n    var endHour = this.getEndHour();\n    var diffInDates = 0;\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n\n    if (!isNullOrUndefined(currentDateIndex)) {\n      var end = endHour.getHours() === 0 ? 24 : endHour.getHours();\n\n      if (currentDateIndex[0] !== 0) {\n        diffInDates = currentDateIndex[0] * ((end - startHour.getHours()) * 60) + (endHour.getMinutes() - startHour.getMinutes());\n      }\n\n      diffInMinutes = diffInDates + diffInMinutes;\n    }\n\n    return diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n  };\n\n  TimelineViews.prototype.getWorkCellWidth = function () {\n    return this.element.querySelector('.e-work-cells').getBoundingClientRect().width;\n  };\n\n  TimelineViews.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.parent.resourceBase.renderResourceHeaderIndent(tr);\n    }\n\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  TimelineViews.prototype.createAllDayRow = function (table, tdData) {};\n\n  TimelineViews.prototype.getCurrentTimeIndicatorIndex = function () {\n    var currentDateIndex = [];\n    var index = this.parent.getIndexOfDate(this.renderDates, resetTime(this.parent.getCurrentTime()));\n\n    if (index >= 0) {\n      currentDateIndex.push(index);\n    }\n\n    return currentDateIndex;\n  };\n\n  TimelineViews.prototype.renderContent = function () {\n    var tr = createElement('tr');\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var resTd = createElement('td');\n      resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n      tr.appendChild(resTd);\n    }\n\n    var workTd = createElement('td');\n    var wrap = this.renderContentArea();\n    wrap.appendChild(this.createEventTable(this.getRowCount()));\n    this.collapseRows(wrap);\n    workTd.appendChild(wrap);\n    tr.appendChild(workTd);\n\n    if (this.parent.virtualScrollModule) {\n      this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n    }\n\n    this.element.querySelector('tbody').appendChild(tr);\n  };\n\n  TimelineViews.prototype.getRowCount = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      return this.parent.resourceBase.renderedResources.length;\n    }\n\n    return 1;\n  };\n\n  TimelineViews.prototype.getResourceTdData = function (i, tdData) {\n    var resLevel = this.parent.resourceBase.renderedResources[parseInt(i.toString(), 10)];\n    var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n    var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n    tdData.startHour = this.parent.getStartEndTime(resSHr);\n    tdData.endHour = this.parent.getStartEndTime(resEHr);\n    tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n    tdData.className = resLevel.className;\n    tdData.groupIndex = resLevel.groupIndex;\n    tdData.groupOrder = resLevel.groupOrder;\n    return tdData;\n  };\n\n  TimelineViews.prototype.renderContentTable = function (table) {\n    var tBody = table.querySelector('tbody');\n    append(this.getContentRows(), tBody);\n  };\n\n  TimelineViews.prototype.getContentRows = function () {\n    var rows = [];\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        'aria-selected': 'false'\n      }\n    });\n    var trCount = this.getRowCount();\n\n    for (var i = 0; i < trCount; i++) {\n      var ntr = tr.cloneNode();\n\n      for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var tdData = _a[_i];\n\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n          tdData = this.getResourceTdData(i, tdData);\n        }\n\n        var ntd = this.createContentTd(tdData, tdData, td);\n        ntr.appendChild(ntd);\n      }\n\n      rows.push(ntr);\n    }\n\n    return rows;\n  };\n\n  TimelineViews.prototype.getContentTdClass = function (r) {\n    return r.first || !this.parent.activeViewOptions.timeScale.enable ? [WORK_CELLS_CLASS] : [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n  };\n\n  TimelineViews.prototype.renderEvents = function () {\n    this.timelineAppointment = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n    this.timelineAppointment.renderAppointments();\n    this.parent.notify(eventsLoaded, {});\n  };\n\n  TimelineViews.prototype.getAdjustedDate = function (date) {\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      return new Date(date.setHours(0, 0, 0, 0));\n    } else {\n      var timeSlots = this.colLevels[this.colLevels.length - 1];\n\n      for (var i = 0; i < timeSlots.length; i++) {\n        if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > date.getTime()) {\n          return timeSlots[i - 1].date;\n        }\n      }\n    }\n\n    return null;\n  };\n\n  TimelineViews.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.timelineAppointment) {\n      this.timelineAppointment.destroy();\n      this.timelineAppointment = null;\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return TimelineViews;\n}(VerticalView);\n\nvar __extends$27 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * timeline month view\n */\n\n\nvar TimelineMonth =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$27(TimelineMonth, _super);\n\n  function TimelineMonth(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-timeline-month-view';\n    _this.isInverseTableSelect = true;\n    _this.appointment = null;\n    return _this;\n  }\n\n  TimelineMonth.prototype.getModuleName = function () {\n    return 'timelineMonth';\n  };\n\n  TimelineMonth.prototype.onDataReady = function () {\n    this.appointment = new TimelineEvent(this.parent, 'day');\n    this.appointment.renderAppointments();\n    this.parent.notify(eventsLoaded, {});\n  };\n\n  TimelineMonth.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n  };\n\n  TimelineMonth.prototype.scrollTopPanel = function (target) {\n    _super.prototype.scrollTopPanel.call(this, target);\n\n    this.scrollHeaderLabels(target);\n  };\n\n  TimelineMonth.prototype.setContentHeight = function (content, leftPanelElement, height) {\n    if (leftPanelElement) {\n      leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n    }\n\n    content.style.height = formatUnit(height);\n  };\n\n  TimelineMonth.prototype.getDateSlots = function (renderDates, workDays) {\n    var dateSlots = [];\n\n    for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n      var col = renderDates_1[_i];\n      var classList$$1 = [HEADER_CELLS_CLASS];\n\n      if (this.isCurrentDate(col)) {\n        classList$$1.push(CURRENT_DAY_CLASS);\n      }\n\n      dateSlots.push({\n        date: col,\n        type: 'dateHeader',\n        className: classList$$1,\n        colSpan: 1,\n        workDays: workDays\n      });\n    }\n\n    return dateSlots;\n  };\n\n  TimelineMonth.prototype.renderLeftIndent = function (tr) {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.parent.resourceBase.renderResourceHeaderIndent(tr);\n    }\n  };\n\n  TimelineMonth.prototype.renderContent = function () {\n    var contentTr = createElement('tr');\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var resTd = createElement('td');\n      resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n      contentTr.appendChild(resTd);\n    }\n\n    var contentTd = createElement('td');\n    this.element.querySelector('tbody').appendChild(contentTr);\n    var wrap = createElement('div', {\n      className: CONTENT_WRAP_CLASS\n    });\n    wrap.appendChild(this.renderContentArea());\n    wrap.appendChild(this.createEventTable(this.getRowCount()));\n    this.collapseRows(wrap);\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    contentTd.appendChild(wrap);\n\n    if (this.parent.virtualScrollModule) {\n      this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n    }\n\n    contentTr.appendChild(contentTd);\n  };\n\n  TimelineMonth.prototype.getRowCount = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      return this.parent.resourceBase.renderedResources.length;\n    }\n\n    return 1;\n  };\n\n  TimelineMonth.prototype.getContentSlots = function () {\n    var slotDatas = [];\n\n    for (var row = 0; row < this.getRowCount(); row++) {\n      for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var data = _a[_i];\n        data.className = [WORK_CELLS_CLASS];\n\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n          var resLevel = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n          data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n          data.className = data.className.concat(resLevel.className);\n          data.groupIndex = resLevel.groupIndex;\n          data.groupOrder = resLevel.groupOrder;\n        }\n\n        var slotData = {\n          date: new Date(+data.date),\n          colSpan: data.colSpan,\n          groupIndex: data.groupIndex,\n          workDays: data.workDays,\n          type: 'monthCells',\n          className: data.className\n        };\n\n        if (!slotDatas[parseInt(row.toString(), 10)]) {\n          slotDatas[parseInt(row.toString(), 10)] = [];\n        }\n\n        slotDatas[parseInt(row.toString(), 10)].push(slotData);\n      }\n    }\n\n    return slotDatas;\n  };\n\n  TimelineMonth.prototype.updateClassList = function (data) {\n    if (!this.parent.isMinMaxDate(data.date)) {\n      data.className.push(DISABLE_DATES);\n    }\n  };\n\n  TimelineMonth.prototype.unWireEvents = function () {\n    EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n  };\n\n  TimelineMonth.prototype.getMonthStart = function (currentDate) {\n    var monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n    return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n  };\n\n  TimelineMonth.prototype.getMonthEnd = function (currentDate) {\n    var monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n    return this.parent.calendarUtil.lastDateOfMonth(addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n  };\n\n  TimelineMonth.prototype.generateColumnLevels = function () {\n    var colLevels = [];\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    colLevels.push(level);\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n    }\n\n    var hourSlots = [];\n\n    if (this.parent.activeViewOptions.headerRows.length > 0) {\n      var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n      colLevels = renderGn.generateColumnLevels(level, hourSlots);\n    }\n\n    this.colLevels = colLevels;\n    return colLevels;\n  };\n\n  TimelineMonth.prototype.getAdjustedDate = function (startTime) {\n    var timeSlots = this.colLevels[this.colLevels.length - 1];\n\n    for (var i = 0; i < timeSlots.length; i++) {\n      if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startTime.getTime()) {\n        return timeSlots[i - 1].date;\n      }\n    }\n\n    return null;\n  };\n\n  TimelineMonth.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    if (this.element) {\n      var contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n      }\n    }\n\n    if (this.appointment) {\n      this.appointment.destroy();\n      this.appointment = null;\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return TimelineMonth;\n}(Month);\n\nvar __extends$28 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * timeline year view\n */\n\n\nvar TimelineYear =\n/** @__PURE__ @class */\nfunction (_super) {\n  __extends$28(TimelineYear, _super);\n\n  function TimelineYear(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-timeline-year-view';\n    _this.isInverseTableSelect = true;\n    return _this;\n  }\n\n  TimelineYear.prototype.getModuleName = function () {\n    return 'timelineYear';\n  };\n\n  TimelineYear.prototype.renderHeader = function (headerWrapper) {\n    var tr = createElement('tr');\n    headerWrapper.appendChild(tr);\n\n    if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.parent.resourceBase.renderResourceHeaderIndent(tr);\n    } else {\n      var leftHeaderCells = createElement('td', {\n        className: LEFT_INDENT_CLASS\n      });\n      tr.appendChild(leftHeaderCells);\n      leftHeaderCells.appendChild(this.renderResourceHeader(LEFT_INDENT_WRAP_CLASS));\n    }\n\n    var isHorizontal = this.parent.activeViewOptions.orientation === 'Horizontal';\n    var isGroup = this.parent.activeViewOptions.group.resources.length > 0;\n    this.isInverseTableSelect = isHorizontal && !isGroup ? false : true;\n    var td = createElement('td');\n    tr.appendChild(td);\n    var container = createElement('div', {\n      className: DATE_HEADER_CONTAINER_CLASS\n    });\n    td.appendChild(container);\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      container.appendChild(this.renderResourceHeader(DATE_HEADER_WRAP_CLASS));\n      this.columnCount = this.colLevels.slice(-1)[0].length;\n    } else {\n      var wrapper = createElement('div', {\n        className: DATE_HEADER_WRAP_CLASS\n      });\n      container.appendChild(wrapper);\n      var table = this.createTableLayout();\n      wrapper.appendChild(table);\n      table.appendChild(this.createTableColGroup(this.columnCount));\n      var innerTr = createElement('tr');\n      table.querySelector('tbody').appendChild(innerTr);\n      var months = this.getMonths();\n      var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n\n      for (var column = 0; column < this.columnCount; column++) {\n        var date = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], 1);\n        var innerTd = createElement('td', {\n          className: HEADER_CELLS_CLASS\n        });\n\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          if (this.parent.dayHeaderTemplate) {\n            append(this.renderDayMonthHeaderTemplate(dayHeaderDates[parseInt(column.toString(), 10)], column, 'dayHeaderTemplate'), innerTd);\n          } else {\n            innerTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[column % 7] + \"</span>\";\n          }\n        } else {\n          if (this.parent.monthHeaderTemplate) {\n            append(this.renderDayMonthHeaderTemplate(date, months[parseInt(column.toString(), 10)], 'monthHeaderTemplate'), innerTd);\n          } else {\n            innerTd.innerHTML = \"<span>\" + this.getMonthName(date) + \"</span>\";\n          }\n\n          innerTd.setAttribute('data-date', date.getTime().toString());\n        }\n\n        innerTr.appendChild(innerTd);\n        this.parent.trigger(renderCell, {\n          elementType: 'headerCells',\n          element: innerTd\n        });\n      }\n    }\n  };\n\n  TimelineYear.prototype.renderResourceHeader = function (className) {\n    var wrap = createElement('div', {\n      className: className\n    });\n    var tbl = this.createTableLayout();\n    wrap.appendChild(tbl);\n    var trEle = createElement('tr');\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.colLevels = this.generateColumnLevels();\n    } else {\n      var colData = [{\n        className: [HEADER_CELLS_CLASS],\n        type: 'headerCell'\n      }];\n      this.colLevels = [colData];\n    }\n\n    for (var _i = 0, _a = this.colLevels; _i < _a.length; _i++) {\n      var col = _a[_i];\n      var ntr = trEle.cloneNode();\n      var count = className === DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n\n      for (var _b = 0, count_1 = count; _b < count_1.length; _b++) {\n        var c = count_1[_b];\n        var tdEle = createElement('td');\n\n        if (c.className) {\n          addClass([tdEle], c.className);\n        }\n\n        if (className === DATE_HEADER_WRAP_CLASS) {\n          if (c.template) {\n            append(c.template, tdEle);\n          }\n\n          if (c.colSpan) {\n            tdEle.setAttribute('colspan', c.colSpan.toString());\n          }\n\n          if (c.groupIndex > -1) {\n            tdEle.setAttribute('data-group-index', c.groupIndex.toString());\n          }\n\n          this.setResourceHeaderContent(tdEle, c);\n        }\n\n        if (className === LEFT_INDENT_WRAP_CLASS) {\n          this.parent.renderHeaderIndentTemplate(c, tdEle);\n        }\n\n        var args = {\n          elementType: c.type,\n          element: tdEle,\n          date: c.date,\n          groupIndex: c.groupIndex\n        };\n        this.parent.trigger(renderCell, args);\n        ntr.appendChild(tdEle);\n      }\n\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n\n    if (className === DATE_HEADER_WRAP_CLASS) {\n      tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n    }\n\n    return wrap;\n  };\n\n  TimelineYear.prototype.renderContent = function (contentWrapper) {\n    var tr = createElement('tr');\n    contentWrapper.appendChild(tr);\n    var firstTd = createElement('td');\n    var lastTd = createElement('td');\n    var tdCollection = [];\n    var monthTBody;\n\n    if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      tdCollection.push(firstTd);\n      firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n      this.rowCount = this.parent.resourceBase.renderedResources.length;\n    } else {\n      tdCollection.push(firstTd);\n      var monthWrapper = createElement('div', {\n        className: MONTH_HEADER_WRAPPER\n      });\n      firstTd.appendChild(monthWrapper);\n      monthWrapper.appendChild(this.createTableLayout());\n      monthTBody = monthWrapper.querySelector('tbody');\n    }\n\n    tdCollection.push(lastTd);\n    append(tdCollection, tr);\n    var content = createElement('div', {\n      className: CONTENT_WRAP_CLASS\n    });\n    lastTd.appendChild(content);\n    var contentTable = this.createTableLayout(CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(contentTable);\n    content.appendChild(contentTable);\n    var eventWrapper = createElement('div', {\n      className: EVENT_TABLE_CLASS\n    });\n    content.appendChild(eventWrapper);\n\n    if (this.parent.virtualScrollModule) {\n      this.parent.virtualScrollModule.renderVirtualTrack(content);\n    }\n\n    var contentTBody = contentTable.querySelector('tbody');\n\n    if (this.parent.rowAutoHeight) {\n      var addClassTable = [contentTable];\n      var monthHeader = this.parent.element.querySelector('.' + MONTH_HEADER_WRAPPER + ' .' + SCHEDULE_TABLE_CLASS);\n\n      if (monthHeader) {\n        addClassTable.push(monthHeader);\n      }\n\n      addClass(addClassTable, AUTO_HEIGHT);\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : this.columnCount;\n      contentTable.appendChild(this.createTableColGroup(colCount));\n      this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n    } else {\n      contentTable.appendChild(this.createTableColGroup(this.columnCount));\n      this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n    }\n  };\n\n  TimelineYear.prototype.renderDefaultContent = function (wrapper, monthBody, contentBody) {\n    var months = this.getMonths();\n    var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n\n    for (var month = 0; month < this.rowCount; month++) {\n      wrapper.appendChild(createElement('div', {\n        className: APPOINTMENT_CONTAINER_CLASS\n      }));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var tr = createElement('tr');\n      var monthTr = tr.cloneNode();\n      monthBody.appendChild(monthTr);\n      var contentTr = tr.cloneNode();\n      contentBody.appendChild(contentTr);\n      var monthTd = createElement('td', {\n        className: MONTH_HEADER_CLASS\n      });\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        if (this.parent.monthHeaderTemplate) {\n          append(this.renderDayMonthHeaderTemplate(monthStart, month, 'monthHeaderTemplate'), monthTd);\n        } else {\n          monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n        }\n\n        monthTd.setAttribute('data-date', monthDate.getTime().toString());\n      } else {\n        if (this.parent.dayHeaderTemplate) {\n          append(this.renderDayMonthHeaderTemplate(dayHeaderDates[parseInt(month.toString(), 10)], month, 'dayHeaderTemplate'), monthTd);\n        } else {\n          monthTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[month % 7] + \"</span>\";\n        }\n      }\n\n      monthTr.appendChild(monthTd);\n      this.parent.trigger(renderCell, {\n        elementType: 'leftHeaderCells',\n        element: monthTd\n      });\n      var date = new Date(monthStart.getTime());\n\n      for (var column = 0; column < this.columnCount; column++) {\n        var isDateAvail = void 0;\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], 1);\n          monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n          monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n          var dayDate = month - monthStart.getDay() + 1;\n          date = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], dayDate);\n          isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n        } else {\n          isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n        }\n\n        var announcementText = this.parent.globalize.formatDate(date, {\n          skeleton: 'full',\n          calendar: this.parent.getCalendarMode()\n        });\n        var td = createElement('td', {\n          className: WORK_CELLS_CLASS,\n          attrs: {\n            'aria-selected': 'false',\n            'aria-label': announcementText\n          }\n        });\n        contentTr.appendChild(td);\n        var dateHeader = createElement('div', {\n          className: DATE_HEADER_CLASS + ' ' + NAVIGATE_CLASS,\n          innerHTML: isDateAvail ? this.parent.globalize.formatDate(date, {\n            skeleton: 'd',\n            calendar: this.parent.getCalendarMode()\n          }) : ''\n        });\n\n        if (isDateAvail) {\n          var tds = [td];\n          var classList$$1 = [];\n\n          if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n            classList$$1.push(WORKDAY_CLASS);\n          }\n\n          if (!this.parent.isMinMaxDate(date)) {\n            addClass([td], DISABLE_DATES);\n          }\n\n          if (this.isCurrentDate(date)) {\n            classList$$1.push(CURRENT_DAY_CLASS);\n\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n              tds.push(this.element.querySelector('.' + HEADER_CELLS_CLASS + (\":nth-child(\" + (column + 1) + \")\")));\n            } else {\n              tds.push(this.element.querySelectorAll('.' + MONTH_HEADER_CLASS).item(month));\n            }\n          }\n\n          if (classList$$1.length > 0) {\n            addClass(tds, classList$$1);\n          }\n        } else {\n          addClass([td], OTHERMONTH_CLASS);\n\n          if (!this.parent.isMinMaxDate(date)) {\n            addClass([td], DISABLE_DATES);\n          }\n        }\n\n        if (td.classList.contains(OTHERMONTH_CLASS)) {\n          continue;\n        } else {\n          this.renderDates.push(new Date(date));\n        }\n\n        td.appendChild(dateHeader);\n\n        if (isDateAvail) {\n          td.setAttribute('data-date', date.getTime().toString());\n          this.wireEvents(td);\n        }\n\n        this.renderCellTemplate({\n          date: date,\n          type: 'workCells'\n        }, td);\n        this.parent.trigger(renderCell, {\n          elementType: 'workCells',\n          element: td,\n          date: date\n        });\n\n        if (isDateAvail) {\n          if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            date = addDays(new Date(date.getTime()), 1);\n          }\n        }\n      }\n    }\n\n    this.renderDates.splice(0, 1);\n  };\n\n  TimelineYear.prototype.getContentRows = function () {\n    var tRow = [];\n    var monthCells = this.getMonths();\n\n    for (var row = 0; row < this.parent.resourceBase.renderedResources.length; row++) {\n      var tr = createElement('tr');\n      tRow.push(tr);\n      var resData = void 0;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        resData = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n      }\n\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), monthCells[parseInt(row.toString(), 10)], 1);\n      var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n\n      for (var month = 0; month < this.columnCount; month++) {\n        var classList$$1 = [];\n        var groupIndex = resData.groupIndex;\n        classList$$1 = classList$$1.concat(resData.className);\n\n        if (classList$$1.indexOf(RESOURCE_PARENT_CLASS) > -1) {\n          classList$$1.push(RESOURCE_GROUP_CELLS_CLASS);\n        } else {\n          classList$$1.push(WORKDAY_CLASS);\n        }\n\n        monthDate = new Date(this.parent.selectedDate.getFullYear(), monthCells[parseInt(month.toString(), 10)], 1);\n        date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n        var tdELe = createElement('td', {\n          className: WORK_CELLS_CLASS,\n          attrs: {\n            'aria-selected': 'false',\n            'data-date': date.getTime().toString()\n          }\n        });\n        addClass([tdELe], classList$$1);\n        tdELe.setAttribute('data-group-index', groupIndex.toString());\n        this.renderCellTemplate({\n          date: date,\n          type: 'resourceGroupCells',\n          groupIndex: groupIndex\n        }, tdELe);\n        this.wireEvents(tdELe);\n        this.parent.trigger(renderCell, {\n          elementType: 'resourceGroupCells',\n          element: tdELe,\n          date: date\n        });\n        tr.appendChild(tdELe);\n      }\n    }\n\n    return tRow;\n  };\n\n  TimelineYear.prototype.renderResourceContent = function (wrapper, monthBody, contentBody) {\n    var months = this.getMonths();\n\n    for (var row = 0; row < this.rowCount; row++) {\n      wrapper.appendChild(createElement('div', {\n        className: APPOINTMENT_CONTAINER_CLASS\n      }));\n      var tr = createElement('tr');\n      contentBody.appendChild(tr);\n      var resData = void 0;\n\n      if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        resData = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n      }\n\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n      var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        var monthTr = tr.cloneNode();\n        monthBody.appendChild(monthTr);\n        var monthTd = createElement('td', {\n          className: MONTH_HEADER_CLASS,\n          attrs: {\n            'data-date': date.getTime().toString()\n          }\n        });\n\n        if (this.parent.monthHeaderTemplate) {\n          append(this.renderDayMonthHeaderTemplate(monthDate, row, 'monthHeaderTemplate'), monthTd);\n        } else {\n          monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n        }\n\n        monthTr.appendChild(monthTd);\n      }\n\n      for (var month = 0; month < this.columnCount; month++) {\n        var classList$$1 = [];\n        var groupIndex = void 0;\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          groupIndex = resData.groupIndex;\n          classList$$1 = classList$$1.concat(resData.className);\n\n          if (classList$$1.indexOf(RESOURCE_PARENT_CLASS) > -1) {\n            classList$$1.push(RESOURCE_GROUP_CELLS_CLASS);\n          } else {\n            classList$$1.push(WORKDAY_CLASS);\n          }\n\n          monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n          date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n        } else {\n          groupIndex = this.colLevels.slice(-1)[0][parseInt(month.toString(), 10)].groupIndex;\n          classList$$1.push(WORKDAY_CLASS);\n        }\n\n        var td = createElement('td', {\n          className: WORK_CELLS_CLASS,\n          attrs: {\n            'aria-selected': 'false',\n            'data-date': date.getTime().toString()\n          }\n        });\n        addClass([td], classList$$1);\n        td.setAttribute('data-group-index', groupIndex.toString());\n        this.renderCellTemplate({\n          date: date,\n          type: 'resourceGroupCells',\n          groupIndex: groupIndex\n        }, td);\n        this.wireEvents(td);\n        tr.appendChild(td);\n        this.parent.trigger(renderCell, {\n          elementType: 'resourceGroupCells',\n          element: td,\n          date: date\n        });\n      }\n    }\n\n    if (this.parent.activeViewOptions.orientation === 'Vertical') {\n      this.collapseRows(this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS));\n    }\n  };\n\n  TimelineYear.prototype.renderDayMonthHeaderTemplate = function (date, column, type) {\n    var args = {\n      date: date,\n      type: type === 'dayHeaderTemplate' ? 'dayHeader' : 'monthHeader'\n    };\n    var dayId = \"schedule_\" + this.parent.activeViewOptions.dayHeaderTemplateName + \"dayHeaderTemplate\";\n    var monthId = \"schedule_\" + this.parent.activeViewOptions.dayHeaderTemplateName + \"monthHeaderTemplate\";\n\n    if (type === 'dayHeaderTemplate') {\n      args.day = this.parent.getDayNames('wide')[column % 7];\n      return [].slice.call(this.parent.getDayHeaderTemplate()(args, this.parent, 'dayHeaderTemplate', dayId, false));\n    } else {\n      return [].slice.call(this.parent.getMonthHeaderTemplate()(args, this.parent, 'monthHeaderTemplate', monthId, false));\n    }\n  };\n\n  TimelineYear.prototype.renderCellTemplate = function (data, td) {\n    if (!this.parent.activeViewOptions.cellTemplate || td.classList.contains(OTHERMONTH_CLASS)) {\n      return;\n    }\n\n    var args = {\n      date: data.date,\n      type: data.type\n    };\n\n    if (data.groupIndex) {\n      args.groupIndex = data.groupIndex;\n    }\n\n    var scheduleId = this.parent.element.id + '_';\n    var viewName = this.parent.activeViewOptions.cellTemplateName;\n    var templateId = scheduleId + viewName + 'cellTemplate';\n    var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n    append(cellTemplate, td);\n  };\n\n  TimelineYear.prototype.scrollToDate = function (scrollDate) {\n    var date;\n\n    if (this.parent.activeViewOptions.group.resources !== null && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      date = +new Date(resetTime(firstDateOfMonth(scrollDate)));\n    } else {\n      date = +new Date(resetTime(scrollDate));\n    }\n\n    var element = this.element.querySelector('[data-date=\"' + date + '\"]');\n\n    if (element) {\n      var wrap = this.getScrollableElement();\n\n      if (this.parent.enableRtl) {\n        var conTable = this.element.querySelector('.' + CONTENT_TABLE_CLASS);\n        wrap.scrollLeft = -(conTable.offsetWidth - element.offsetLeft - element.offsetWidth);\n      } else {\n        wrap.scrollLeft = element.offsetLeft;\n      }\n\n      wrap.scrollTop = element.offsetTop;\n    }\n  };\n\n  TimelineYear.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n\n  TimelineYear.prototype.wireEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n\n  return TimelineYear;\n}(Year);\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * ICalendar Export Module\n */\n\n\nvar ICalendarExport =\n/** @__PURE__ @class */\nfunction () {\n  function ICalendarExport(parent) {\n    this.parent = parent;\n  }\n\n  ICalendarExport.prototype.initializeCalendarExport = function (fileName, customData) {\n    var icsString = this.getCalendarString(fileName, customData);\n    this.download(icsString, fileName);\n  };\n\n  ICalendarExport.prototype.getCalendarString = function (fileName, customData) {\n    var _this = this;\n\n    var eventsData = customData ? customData : extend([], this.parent.eventsData, null, true);\n    eventsData = this.parent.eventBase.sortByTime(eventsData);\n    var SEPARATOR = navigator.appVersion.indexOf('Win') !== -1 ? '\\r\\n' : '\\n';\n    var iCalendarEvents = [];\n    var filterCollection = [];\n    var timeZone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n    var fields = this.parent.eventFields;\n    eventsData.forEach(function (eventObj) {\n      var uId = eventObj[fields.id] || eventObj.Guid || _this.parent.eventBase.generateGuid();\n\n      var editedExDate = [];\n\n      if (eventObj[fields.recurrenceID]) {\n        var filter = _this.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n\n        uId = filter.length > 0 ? filter[0].UID : uId;\n      }\n\n      if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n        var exDate = eventObj[fields.recurrenceException].split(',');\n\n        var editedObj = _this.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n\n        editedObj.forEach(function (edited) {\n          editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n        });\n        var exceptionDateList = exDate.filter(function (value) {\n          return editedExDate.indexOf(value) === -1;\n        });\n        eventObj[fields.recurrenceException] = exceptionDateList.length > 0 ? exceptionDateList.join(',') + ',' : '';\n      }\n\n      var startZone = eventObj[fields.startTimezone] || timeZone;\n      var endZone = eventObj[fields.endTimezone] || timeZone;\n      var readonly = eventObj[fields.isReadonly] ? eventObj[fields.isReadonly] : false;\n      var calendarEvent = ['BEGIN:VEVENT', 'LOCATION:' + (eventObj[fields.location] || ''), 'SUMMARY:' + (eventObj[fields.subject] || ''), 'UID:' + uId, 'DESCRIPTION:' + (eventObj[fields.description] || ''), 'ISREADONLY:' + readonly, 'END:VEVENT'];\n\n      if (eventObj[fields.isAllDay]) {\n        calendarEvent.splice(4, 0, 'DTEND;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.endTime], true));\n        calendarEvent.splice(4, 0, 'DTSTART;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.startTime], true));\n      } else if (!eventObj[fields.isAllDay] && !eventObj[fields.recurrenceRule]) {\n        calendarEvent.splice(4, 0, 'DTEND:' + _this.convertDateToString(eventObj[fields.endTime]));\n        calendarEvent.splice(4, 0, 'DTSTART:' + _this.convertDateToString(eventObj[fields.startTime]));\n      } else {\n        calendarEvent.splice(4, 0, 'DTEND;TZID=\"' + endZone + '\":' + _this.convertDateToString(eventObj[fields.endTime]));\n        calendarEvent.splice(4, 0, 'DTSTART;TZID=\"' + startZone + '\":' + _this.convertDateToString(eventObj[fields.startTime]));\n      }\n\n      if (eventObj[fields.recurrenceRule]) {\n        calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n      }\n\n      if (eventObj[fields.recurrenceException]) {\n        var exDate = eventObj[fields.recurrenceException].split(',');\n\n        for (var i = 0; i < exDate.length - 1; i++) {\n          calendarEvent.splice(5, 0, 'EXDATE:' + _this.convertDateToString(getDateFromRecurrenceDateString(exDate[parseInt(i.toString(), 10)]), eventObj[fields.isAllDay]));\n        }\n      }\n\n      if (eventObj[fields.recurrenceID]) {\n        calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":' + _this.convertDateToString(eventObj[fields.startTime], eventObj[fields.isAllDay]));\n      }\n\n      var customFields = _this.customFieldFilter(eventObj, fields);\n\n      if (customFields.length > 0) {\n        customFields.forEach(function (customField) {\n          return calendarEvent.splice(4, 0, customField + ':' + (eventObj[\"\" + customField] || ''));\n        });\n      }\n\n      var app = extend({}, eventObj);\n      app.UID = uId;\n      filterCollection.push(app);\n      iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n    });\n    var iCalendar = ['BEGIN:VCALENDAR', 'PRODID:-//Syncfusion Inc//Scheduler//EN', 'VERSION:2.0', 'CALSCALE:GREGORIAN', 'METHOD:PUBLISH', 'X-WR-CALNAME:' + (fileName || 'Calendar'), 'X-WR-TIMEZONE:' + timeZone].join(SEPARATOR);\n    var icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n    return icsString;\n  };\n\n  ICalendarExport.prototype.customFieldFilter = function (eventObj, fields) {\n    var defaultFields = Object.keys(fields).map(function (key) {\n      return fields[\"\" + key];\n    });\n    var eventFields = Object.keys(eventObj);\n    return eventFields.filter(function (value) {\n      return defaultFields.indexOf(value) === -1 && value !== 'Guid';\n    });\n  };\n\n  ICalendarExport.prototype.convertDateToString = function (eventDate, allDay) {\n    var year = ('0000' + eventDate.getFullYear().toString()).slice(-4);\n    var month = ('00' + (eventDate.getMonth() + 1).toString()).slice(-2);\n    var date = ('00' + eventDate.getDate().toString()).slice(-2);\n    var hours = ('00' + eventDate.getHours().toString()).slice(-2);\n    var minutes = ('00' + eventDate.getMinutes().toString()).slice(-2);\n    var seconds = ('00' + eventDate.getSeconds().toString()).slice(-2);\n    var timeString = allDay ? year + month + date : year + month + date + 'T' + hours + minutes + seconds;\n    return timeString;\n  };\n\n  ICalendarExport.prototype.download = function (icsString, fileName) {\n    var buffer = new Blob([icsString], {\n      type: 'data:text/calendar;charset=utf8'\n    });\n    fileName = (fileName || 'Calendar') + '.ics';\n\n    if (navigator.msSaveBlob) {\n      navigator.msSaveBlob(buffer, fileName);\n    } else {\n      var downloadLink_1 = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n      downloadLink_1.download = fileName;\n      downloadLink_1.href = URL.createObjectURL(buffer);\n      var event_1 = document.createEvent('MouseEvent');\n      event_1.initEvent('click', true, true);\n      downloadLink_1.dispatchEvent(event_1);\n      setTimeout(function () {\n        URL.revokeObjectURL(downloadLink_1.href);\n        downloadLink_1.href = undefined;\n      });\n    }\n  };\n\n  ICalendarExport.prototype.filterEvents = function (data, field, value) {\n    return data.filter(function (e) {\n      return e[\"\" + field] === value;\n    });\n  };\n\n  ICalendarExport.prototype.getModuleName = function () {\n    return 'iCalendarExport';\n  };\n\n  ICalendarExport.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent = null;\n  };\n\n  return ICalendarExport;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * ICalendar Import Module\n */\n\n\nvar ICalendarImport =\n/** @__PURE__ @class */\nfunction () {\n  function ICalendarImport(parent) {\n    this.allDay = false;\n    this.parent = parent;\n  }\n\n  ICalendarImport.prototype.initializeCalendarImport = function (fileContent) {\n    var _this = this;\n\n    if (fileContent && fileContent instanceof Blob) {\n      var fileReader_1 = new FileReader();\n\n      fileReader_1.onload = function () {\n        var iCalString = fileReader_1.result;\n\n        _this.iCalendarParser(iCalString);\n      };\n\n      fileReader_1.readAsText(fileContent, 'UTF-8');\n    } else if (fileContent && typeof fileContent === 'string') {\n      this.iCalendarParser(fileContent);\n    }\n  };\n\n  ICalendarImport.prototype.iCalendarParser = function (iCalString) {\n    var _this = this;\n\n    var fields = this.parent.eventFields;\n    var events = [];\n    var uId = 'UID';\n    var calArray = iCalString.replace(new RegExp('\\\\r', 'g'), '').split('\\n');\n    var isEvent = false;\n    var curEvent; // eslint-disable-next-line prefer-const\n\n    var id = this.parent.eventBase.getEventMaxID();\n    var count = 0;\n    calArray.forEach(function (element) {\n      var index;\n      var type;\n      var value;\n\n      if (!isEvent && element === 'BEGIN:VEVENT') {\n        isEvent = true;\n        curEvent = {};\n      }\n\n      if (isEvent && element === 'END:VEVENT') {\n        isEvent = false;\n        events.push(curEvent);\n        curEvent = null;\n      }\n\n      if (isEvent) {\n        index = element.indexOf(':');\n        type = element.substr(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n        value = element.substr(index + 1, element.length - (index + 1)).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\n        if (element.indexOf('SUMMARY') !== -1) {\n          type = 'SUMMARY';\n        }\n\n        if (element.indexOf('DTSTART') !== -1) {\n          curEvent[fields.startTime] = _this.dateParsing(element);\n          curEvent[fields.isAllDay] = _this.allDay;\n          _this.allDay = false;\n        } else if (element.indexOf('DTEND') !== -1) {\n          curEvent[fields.endTime] = _this.dateParsing(element);\n        } else if (element.indexOf('EXDATE') !== -1) {\n          value = getRecurrenceStringFromDate(_this.dateParsing(element));\n          curEvent[fields.recurrenceException] = isNullOrUndefined(curEvent[fields.recurrenceException]) ? value : curEvent[fields.recurrenceException] + ',' + value;\n        } else if (element.indexOf('RECURRENCE-ID') !== -1) {\n          value = getRecurrenceStringFromDate(_this.dateParsing(element));\n          curEvent[fields.recurrenceException] = value;\n          curEvent[fields.recurrenceID] = value;\n        } else {\n          switch (type) {\n            case 'BEGIN':\n              break;\n\n            case 'UID':\n              curEvent[\"\" + uId] = value;\n\n              if (typeof id == 'number') {\n                curEvent[fields.id] = parseInt(value, 10);\n\n                if (isNaN(curEvent[fields.id])) {\n                  curEvent[fields.id] = id + count;\n                  count++;\n                }\n              } else {\n                curEvent[fields.id] = value;\n              }\n\n              break;\n\n            case 'SUMMARY':\n              curEvent[fields.subject] = value;\n              break;\n\n            case 'LOCATION':\n              curEvent[fields.location] = value;\n              break;\n\n            case 'DESCRIPTION':\n              curEvent[fields.description] = value;\n              break;\n\n            case 'ISREADONLY':\n              curEvent[fields.isReadonly] = value.indexOf('true') > -1;\n              break;\n\n            case 'RRULE':\n              curEvent[fields.recurrenceRule] = value;\n              break;\n\n            default:\n              if (_this.parent.resourceCollection.length > 0) {\n                var resData = _this.parent.resourceCollection.filter(function (data) {\n                  return data.field === type;\n                });\n\n                curEvent[\"\" + type] = resData.length > 0 && typeof resData[0].dataSource[0][resData[0].idField] == 'number' ? parseInt(value, 10) : value;\n              } else {\n                curEvent[\"\" + type] = value;\n              }\n\n          }\n        }\n      }\n    });\n    var app = extend([], events, null, true);\n    this.parent.addEvent(this.processOccurrence(app, id));\n  };\n\n  ICalendarImport.prototype.processOccurrence = function (app, maxId) {\n    var _this = this;\n\n    var appoint = [];\n    var uId = 'UID';\n    var fields = this.parent.eventFields;\n    var appointmentIds = [];\n    this.parent.eventsData.forEach(function (eventObj) {\n      appointmentIds.push(eventObj[fields.id]);\n    });\n    app.forEach(function (eventObj) {\n      var parentObj;\n      var id; // eslint-disable-next-line no-prototype-builtins\n\n      if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n        parentObj = eventObj;\n        id = eventObj[fields.id];\n      }\n\n      if (appointmentIds.indexOf(eventObj[fields.id]) < 0) {\n        var data = app.filter(function (data) {\n          return data.UID === eventObj[\"\" + uId];\n        });\n\n        if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n          id = typeof maxId === 'number' ? maxId++ : id;\n\n          for (var i = 0; i < data.length; i++) {\n            // eslint-disable-next-line no-prototype-builtins\n            if (data[parseInt(i.toString(), 10)].hasOwnProperty(fields.recurrenceID)) {\n              var exdate = data[parseInt(i.toString(), 10)][fields.recurrenceID];\n              data[parseInt(i.toString(), 10)][fields.id] = typeof maxId === 'number' ? maxId++ : _this.parent.eventBase.generateGuid();\n              data[parseInt(i.toString(), 10)][fields.recurrenceID] = id;\n              data[parseInt(i.toString(), 10)][fields.recurrenceException] = null;\n              parentObj[fields.recurrenceException] = _this.getExcludeDateString(parentObj[fields.recurrenceException], exdate);\n              delete data[parseInt(i.toString(), 10)][\"\" + uId];\n              appoint.push(data[parseInt(i.toString(), 10)]);\n            }\n          }\n\n          delete parentObj[\"\" + uId];\n          parentObj[fields.id] = id;\n          appoint.push(parentObj); // eslint-disable-next-line no-prototype-builtins\n        } else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n          delete eventObj[\"\" + uId];\n          eventObj[fields.id] = typeof maxId === 'number' ? maxId++ : id;\n          appoint.push(eventObj);\n        }\n      }\n    });\n    return appoint;\n  };\n\n  ICalendarImport.prototype.getExcludeDateString = function (parentException, occurrenceException) {\n    if (isNullOrUndefined(parentException)) {\n      return occurrenceException;\n    } else if (isNullOrUndefined(occurrenceException)) {\n      return parentException;\n    }\n\n    var parentExDate = parentException.split(',').map(function (x) {\n      return x.split('T')[0];\n    });\n    var childExDate = occurrenceException.split(',').map(function (x) {\n      return x.split('T')[0];\n    });\n    var exDate = parentExDate.filter(function (x) {\n      return childExDate.indexOf(x) > -1;\n    });\n\n    if (exDate.length > 0) {\n      return parentException;\n    }\n\n    return parentException + ',' + occurrenceException;\n  };\n\n  ICalendarImport.prototype.getDateString = function (value) {\n    value = value || ''; // eslint-disable-next-line no-useless-escape\n\n    return value.replace(/\\\\\\,/g, ',').replace(/\\\\\\;/g, ';').replace(/\\\\[nN]/g, '\\n').replace(/\\\\\\\\/g, '\\\\');\n  };\n\n  ICalendarImport.prototype.dateParsing = function (element) {\n    var split = element.split(':');\n    var value = split[split.length - 1];\n    var newDate = new Date(this.getDateString(value));\n\n    if (element && (element.indexOf('VALUE=DATE') > -1 || element.indexOf('RECURRENCE-ID;TZID') > -1)) {\n      var data_1 = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n\n      if (data_1 !== null) {\n        newDate = new Date(parseInt(data_1[1], 10), parseInt(data_1[2], 10) - 1, parseInt(data_1[3], 10));\n      }\n\n      if (element.indexOf('DTSTART') > -1) {\n        this.allDay = true;\n      }\n    }\n\n    var data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n\n    if (data !== null) {\n      if (data[7] === 'Z') {\n        newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n      } else {\n        newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n      }\n    }\n\n    return newDate;\n  };\n\n  ICalendarImport.prototype.getModuleName = function () {\n    return 'iCalendarImport';\n  };\n\n  ICalendarImport.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n  };\n\n  return ICalendarImport;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Excel Export Module\n */\n\n\nvar ExcelExport =\n/** @__PURE__ @class */\nfunction () {\n  function ExcelExport(parent) {\n    this.parent = parent;\n  }\n\n  ExcelExport.prototype.initializeExcelExport = function (excelExportOptions) {\n    if (excelExportOptions === void 0) {\n      excelExportOptions = {};\n    }\n\n    var exportColumns = this.getExportColumns(excelExportOptions);\n    var exportName = excelExportOptions.fileName || 'Schedule';\n    var exportType = excelExportOptions.exportType || 'xlsx';\n    var isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n    var separator;\n\n    if (!isNullOrUndefined(excelExportOptions.separator) && excelExportOptions.separator !== ',') {\n      separator = excelExportOptions.separator;\n    }\n\n    var eventCollection;\n\n    if (excelExportOptions.customData) {\n      eventCollection = !isIncludeOccurrences ? excelExportOptions.customData : this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n    } else {\n      eventCollection = !isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed;\n    }\n\n    this.processWorkbook(exportColumns, exportName, exportType, eventCollection, separator);\n  };\n\n  ExcelExport.prototype.processWorkbook = function (fields, name, type, eventCollection, separator) {\n    var _this = this;\n\n    var columns = [];\n    var rows = [];\n    var columnHeader = [];\n    fields.forEach(function (field, i) {\n      columns.push({\n        index: i + 1,\n        width: field.name === 'Id' ? 50 : 150\n      });\n    });\n    var style = {\n      fontSize: 12,\n      borders: {\n        color: '#E0E0E0'\n      },\n      bold: true\n    };\n    fields.forEach(function (field, i) {\n      columnHeader.push({\n        index: i + 1,\n        value: field.text,\n        style: style\n      });\n    });\n    rows.push({\n      index: 1,\n      cells: columnHeader\n    });\n    eventCollection.forEach(function (event, i) {\n      var columnData = [];\n      fields.forEach(function (field, n) {\n        var columnRule = {\n          index: n + 1,\n          value: event[field.name] || ''\n        };\n\n        if (field.name === _this.parent.eventFields.startTime || field.name === _this.parent.eventFields.endTime) {\n          var styleRule = {\n            fontSize: 12,\n            numberFormat: 'm/d/yyyy h:mm AM/PM'\n          };\n          columnRule = extend({}, columnRule, {\n            style: styleRule\n          }, true);\n        }\n\n        columnData.push(columnRule);\n      });\n      rows.push({\n        index: i + 2,\n        cells: columnData\n      });\n    });\n    var workSheet = [{\n      columns: columns,\n      rows: rows\n    }];\n    var book = new Workbook({\n      worksheets: workSheet\n    }, type, this.parent.locale, undefined, separator);\n    book.save(name + '.' + type);\n  };\n\n  ExcelExport.prototype.getExportColumns = function (exportOptions) {\n    var _this = this;\n\n    var exportColumns = exportOptions.fieldsInfo || [];\n\n    if (exportColumns.length === 0) {\n      var fields = exportOptions.fields || Object.keys(this.parent.eventFields).map(function (field) {\n        return _this.parent.eventFields[\"\" + field];\n      });\n      fields.forEach(function (field) {\n        exportColumns.push({\n          name: field,\n          text: field\n        });\n      });\n    }\n\n    return exportColumns;\n  };\n\n  ExcelExport.prototype.getModuleName = function () {\n    return 'excelExport';\n  };\n\n  ExcelExport.prototype.destroy = function () {\n    this.parent = null;\n  };\n\n  return ExcelExport;\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Print Module\n */\n\n\nvar Print =\n/** @__PURE__ @class */\nfunction () {\n  function Print(parent) {\n    this.parent = parent;\n  }\n\n  Print.prototype.print = function (printOptions) {\n    if (isNullOrUndefined(printOptions)) {\n      this.printScheduler();\n    } else {\n      this.printSchedulerWithModel(printOptions);\n    }\n  };\n\n  Print.prototype.printScheduler = function () {\n    var clone = this.parent.element.cloneNode(true);\n    clone.id = this.parent.element.id + '_print';\n    document.body.appendChild(clone);\n    var className = this.parent.currentView === 'MonthAgenda' ? '.e-appointment-wrap' : '.e-content-wrap';\n    var scrollableEle = this.parent.element.querySelector(className);\n    var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n    var reference = '';\n\n    for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n      var link = links_1[_i];\n      reference += link.outerHTML;\n    }\n\n    var div = createElement('div');\n    clone.style.width = this.parent.element.offsetWidth + 'px';\n    var elementWidth = Math.round(parseInt(clone.style.width, 10) / 100) * 100;\n    div.appendChild(clone);\n    var printWindow = window.open('', 'print', 'height=550,width=' + elementWidth + ',tabbar=no');\n    printWindow.document.write('<!DOCTYPE html><html><head>' + reference + '</head><body>' + div.innerHTML + '<script>(function() { window.ready = true; })();</script></body></html>');\n    printWindow.document.close();\n    printWindow.focus();\n    setTimeout(function () {\n      if (printWindow.ready && scrollableEle) {\n        // eslint-disable-next-line no-self-assign\n        scrollableEle.scrollLeft = scrollableEle.scrollLeft; // eslint-disable-next-line no-self-assign\n\n        scrollableEle.scrollTop = scrollableEle.scrollTop;\n        var headerTimeCellsScroll = printWindow.document.querySelector('.e-date-header-wrap');\n\n        if (headerTimeCellsScroll) {\n          headerTimeCellsScroll.scrollLeft = scrollableEle.scrollLeft;\n        }\n\n        var timeCellsScroll = printWindow.document.querySelector('.e-time-cells-wrap');\n\n        if (timeCellsScroll) {\n          timeCellsScroll.scrollTop = scrollableEle.scrollTop;\n        }\n\n        printWindow.print();\n        printWindow.close();\n      }\n    }, 500);\n  };\n\n  Print.prototype.printSchedulerWithModel = function (printOptions) {\n    var element = createElement('div', {\n      id: this.parent.element.id + '_print',\n      className: 'e-print-schedule'\n    });\n    document.body.appendChild(element);\n    Schedule.Inject(Day, Week, WorkWeek, Month, Agenda, MonthAgenda, TimelineViews, TimelineMonth, Year, TimelineYear);\n    this.printInstance = new Schedule(this.getPrintScheduleModel(printOptions));\n    this.printInstance.isPrinting = true;\n    this.printInstance.appendTo(element);\n    this.printInstance.on(print$1, this.contentReady, this);\n    this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n    this.printWindow.moveTo(0, 0);\n    this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n  };\n\n  Print.prototype.getPrintScheduleModel = function (printOptions) {\n    var printModel = {};\n    var scheduleProps = ['agendaDaysCount', 'calendarMode', 'cssClass', 'currentView', 'dateFormat', 'enableRtl', 'endHour', 'eventSettings', 'firstDayOfWeek', 'firstMonthOfYear', 'group', 'height', 'locale', 'maxDate', 'minDate', 'readonly', 'resources', 'rowAutoHeight', 'selectedDate', 'showHeaderBar', 'showTimeIndicator', 'showWeekNumber', 'showWeekend', 'startHour', 'timeFormat', 'timeScale', 'timezone', 'views', 'width', 'workDays', 'workHours', 'dateHeaderTemplate', 'dateRangeTemplate', 'cellHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate', 'cellTemplate', 'resourceHeaderTemplate', 'headerIndentTemplate', 'actionBegin', 'actionComplete', 'actionFailure', 'created', 'dataBinding', 'dataBound', 'destroyed', 'eventRendered', 'moreEventsClick', 'navigating', 'popupOpen', 'popupClose', 'renderCell'];\n    var scheduleTemplates = ['cellHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate', 'cellTemplate', 'dateHeaderTemplate', 'dateRangeTemplate', 'eventTemplate', 'resourceHeaderTemplate', 'headerIndentTemplate'];\n    var scheduleEvents = ['actionBegin', 'actionComplete', 'actionFailure', 'created', 'dataBinding', 'dataBound', 'destroyed', 'eventRendered', 'moreEventsClick', 'navigating', 'popupOpen', 'popupClose', 'renderCell'];\n    var eventSettings;\n    var group;\n    var timeScale;\n    var views;\n\n    for (var _i = 0, scheduleProps_1 = scheduleProps; _i < scheduleProps_1.length; _i++) {\n      var key = scheduleProps_1[_i];\n\n      switch (key) {\n        case 'eventSettings':\n          {\n            eventSettings = Object.assign({}, this.parent.eventSettings.properties);\n            eventSettings.dataSource = this.parent.eventsData;\n            var eventTemplate = !isNullOrUndefined(printOptions.eventSettings) && !isNullOrUndefined(printOptions.eventSettings.template) ? printOptions.eventSettings.template : eventSettings.template;\n            eventSettings.template = typeof eventTemplate === 'function' ? null : eventTemplate;\n            printModel.eventSettings = eventSettings;\n            break;\n          }\n\n        case 'group':\n          group = isNullOrUndefined(printOptions.group) ? this.parent.group : printOptions.group;\n          group.headerTooltipTemplate = null;\n          printModel.group = group;\n          break;\n\n        case 'timeScale':\n          timeScale = isNullOrUndefined(printOptions.timeScale) ? this.parent.timeScale : printOptions.timeScale;\n          timeScale.majorSlotTemplate = typeof timeScale.majorSlotTemplate === 'function' ? null : timeScale.majorSlotTemplate;\n          timeScale.minorSlotTemplate = typeof timeScale.minorSlotTemplate === 'function' ? null : timeScale.minorSlotTemplate;\n          printOptions.timeScale = timeScale;\n          break;\n\n        case 'views':\n          views = isNullOrUndefined(printOptions.views) ? this.parent.views : printOptions.views;\n\n          if (views && views.length > 0 && typeof views[0] === 'object') {\n            var _loop_1 = function (view) {\n              scheduleTemplates.forEach(function (x) {\n                if (!isNullOrUndefined(view[\"\" + x])) {\n                  view[\"\" + x] = typeof view[\"\" + x] === 'function' ? null : view[\"\" + x];\n                }\n              });\n            };\n\n            for (var _a = 0, views_1 = views; _a < views_1.length; _a++) {\n              var view = views_1[_a];\n\n              _loop_1(view);\n            }\n          }\n\n          printModel.views = views;\n          break;\n\n        default:\n          if (scheduleTemplates.indexOf(key) > -1) {\n            printModel[\"\" + key] = isNullOrUndefined(printOptions[\"\" + key]) ? typeof this.parent[\"\" + key] === 'function' ? null : this.parent[\"\" + key] : typeof printOptions[\"\" + key] === 'function' ? null : printOptions[\"\" + key];\n            break;\n          }\n\n          if (scheduleEvents.indexOf(key) > -1) {\n            printModel[\"\" + key] = printOptions[\"\" + key];\n            break;\n          }\n\n          printModel[\"\" + key] = isNullOrUndefined(printOptions[\"\" + key]) ? this.parent[\"\" + key] : printOptions[\"\" + key];\n          break;\n      }\n    }\n\n    return printModel;\n  };\n\n  Print.prototype.contentReady = function () {\n    var _this = this;\n\n    this.printWindow = print(this.printInstance.element, this.printWindow);\n\n    this.printWindow.onbeforeunload = function () {\n      _this.printInstance.off(print$1, _this.contentReady);\n\n      _this.printInstance.element.remove();\n\n      _this.printInstance.destroy();\n\n      _this.printInstance = null;\n      _this.printWindow = null;\n    };\n  };\n\n  Print.prototype.getModuleName = function () {\n    return 'print';\n  };\n\n  Print.prototype.destroy = function () {\n    this.parent = null;\n  };\n\n  return Print;\n}();\n/**\n * Exporting modules\n */\n\n/**\n * Schedule component exported items\n */\n\n/**\n * Recurrence-Editor component exported items\n */\n\n/**\n * Calendar util exported items\n */\n\n/**\n * Export Schedule components\n */\n\n\nexport { Schedule, cellClick, cellDoubleClick, moreEventsClick, select, hover, actionBegin, actionComplete, actionFailure, navigating, renderCell, eventClick, eventRendered, dataBinding, dataBound, popupOpen, popupClose, dragStart, drag, dragStop, resizeStart, resizing, resizeStop, inlineClick, cellSelect, initialLoad, initialEnd, print$1 as print, dataReady, eventsLoaded, contentReady, scroll, virtualScroll, scrollUiUpdate, uiUpdate, documentClick, cellMouseDown, WEEK_LENGTH, DEFAULT_WEEKS, MS_PER_DAY, MS_PER_MINUTE, getElementHeightFromClass, getElementWidthFromClass, getTranslateY, getTranslateX, getWeekFirstDate, getWeekLastDate, firstDateOfMonth, lastDateOfMonth, getWeekNumber, getWeekMiddleDate, setTime, resetTime, getDateInMs, getDateCount, addDays, addMonths, addYears, getStartEndHours, getMaxDays, getDaysCount, getDateFromString, getScrollBarWidth, findIndexInData, getOuterHeight, removeChildren, isDaylightSavingTime, getUniversalTime, isMobile, isIPadDevice, capitalizeFirstWord, Resize, DragAndDrop, HeaderRenderer, ViewBase, Day, Week, WorkWeek, Month, Year, Agenda, MonthAgenda, TimelineViews, TimelineMonth, TimelineYear, Timezone, timezoneData, ICalendarExport, ICalendarImport, ExcelExport, Print, RecurrenceEditor, generateSummary, generate, getDateFromRecurrenceDateString, extractObjectFromRule, getCalendarUtil, getRecurrenceStringFromDate, Gregorian, Islamic };","map":{"version":3,"names":["Animation","Browser","ChildProperty","Collection","Complex","Component","Draggable","Event","EventHandler","HijriParser","Internationalization","KeyboardEvents","L10n","NotifyPropertyChanges","Property","SanitizeHtmlHelper","Touch","addClass","append","classList","cldrData","closest","compile","createElement","detach","extend","formatUnit","getDefaultDateObject","getElement","getValue","isNullOrUndefined","prepend","print","remove","removeClass","setStyleAttribute","Dialog","Popup","Tooltip","createSpinner","hideSpinner","isCollide","showSpinner","Toolbar","TreeView","Calendar","DatePicker","DateTimePicker","DataManager","Deferred","Predicate","Query","Button","CheckBox","RadioButton","FormValidator","Input","NumericTextBox","DropDownList","MultiSelect","ListBase","Workbook","cellClick","cellDoubleClick","moreEventsClick","select","hover","actionBegin","actionComplete","actionFailure","navigating","renderCell","eventClick","eventRendered","dataBinding","dataBound","popupOpen","popupClose","dragStart","drag","dragStop","resizeStart","resizing","resizeStop","inlineClick","cellSelect","initialLoad","initialEnd","print$1","dataReady","eventsLoaded","contentReady","scroll","virtualScroll","scrollUiUpdate","uiUpdate","documentClick","cellMouseDown","WEEK_LENGTH","DEFAULT_WEEKS","MS_PER_DAY","MS_PER_MINUTE","getElementHeightFromClass","container","elementClass","height","el","className","cloneNode","style","visibility","position","appendChild","getBoundingClientRect","getElementWidthFromClass","width","getTranslateY","element","getComputedStyle","window","WebKitCSSMatrix","webkitTransform","m42","getTranslateX","m41","getWeekFirstDate","date","firstDayOfWeek","date1","Date","getTime","getDay","setDate","getDate","getWeekLastDate","weekFirst","weekLast","getFullYear","getMonth","firstDateOfMonth","lastDateOfMonth","getWeekNumber","valueOf","currentDate","dayOfYear","Math","ceil","getWeekMiddleDate","setTime","time","tzOffsetBefore","getTimezoneOffset","d","tzOffsetDiff","resetTime","getDateInMs","localOffset","dateOffset","timezoneOffset","getDateCount","startDate","endDate","addDays","noOfDays","addMonths","noOfMonths","day","setMonth","min","getMaxDays","addYears","noOfYears","setFullYear","getStartEndHours","startHour","endHour","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","date2","getDaysCount","strTime","endTime","round","getDateFromString","indexOf","parseInt","match","toString","replace","getScrollBarWidth","divNode","value","cssText","document","body","ratio","devicePixelRatio","toFixed","floor","offsetWidth","clientWidth","removeChild","findIndexInData","data","field","event","resourceCollection","i","length_1","length","field_1","slice","res","Array","resData","join","includes","groupIDField","getOuterHeight","offsetHeight","marginTop","marginBottom","removeChildren","elementChildren","call","children","_i","elementChildren_1","elementChild","isDaylightSavingTime","jan","jul","max","getUniversalTime","year","month","hours","minutes","seconds","milliseconds","getMilliseconds","UTC","isMobile","navigator","userAgent","toLowerCase","isIPadDevice","capitalizeFirstWord","inputString","type","split","map","e","charAt","toLocaleUpperCase","substring","array","index","ROOT","RTL","DEVICE_CLASS","MULTI_DRAG","ICON","ENABLE_CLASS","DISABLE_CLASS","TABLE_CONTAINER_CLASS","SCHEDULE_TABLE_CLASS","ALLDAY_CELLS_CLASS","HEADER_POPUP_CLASS","HEADER_CALENDAR_CLASS","ALLDAY_ROW_CLASS","CONTENT_TABLE_CLASS","WORK_CELLS_CLASS","WORK_HOURS_CLASS","POPUP_OPEN","DATE_HEADER_WRAP_CLASS","DATE_HEADER_CONTAINER_CLASS","HEADER_CELLS_CLASS","HEADER_WEEK_CELLS_CLASS","HEADER_MONTH_CELLS_CLASS","HEADER_YEAR_CELLS_CLASS","WORKDAY_CLASS","OTHERMONTH_CLASS","CURRENT_DAY_CLASS","CURRENTDATE_CLASS","CURRENT_PANEL_CLASS","PREVIOUS_PANEL_CLASS","NEXT_PANEL_CLASS","PREVIOUS_DATE_CLASS","NEXT_DATE_CLASS","TRANSLATE_CLASS","LEFT_INDENT_CLASS","LEFT_INDENT_WRAP_CLASS","EVENT_TABLE_CLASS","RESOURCE_LEFT_TD_CLASS","RESOURCE_GROUP_CELLS_CLASS","RESOURCE_TEXT_CLASS","RESOURCE_COLUMN_WRAP_CLASS","RESOURCE_COLUMN_TABLE_CLASS","RESOURCE_CHILD_CLASS","RESOURCE_PARENT_CLASS","RESOURCE_EXPAND_CLASS","RESOURCE_COLLAPSE_CLASS","RESOURCE_TREE_ICON_CLASS","RESOURCE_CELLS_CLASS","TIME_CELLS_WRAP_CLASS","TIME_CELLS_CLASS","TIME_SLOT_CLASS","ALTERNATE_CELLS_CLASS","CURRENT_TIME_CLASS","CURRENT_TIMELINE_CLASS","PREVIOUS_TIMELINE_CLASS","HIDE_CHILDS_CLASS","SCROLL_CONTAINER_CLASS","TIMELINE_WRAPPER_CLASS","APPOINTMENT_WRAPPER_CLASS","DAY_WRAPPER_CLASS","TOOLBAR_CONTAINER","RESOURCE_TOOLBAR_CONTAINER","HEADER_TOOLBAR","RESOURCE_HEADER_TOOLBAR","SELECTED_CELL_CLASS","WEEK_NUMBER_WRAPPER_CLASS","WEEK_NUMBER_CLASS","APPOINTMENT_WRAP_CLASS","WRAPPER_CONTAINER_CLASS","APPOINTMENT_CONTAINER_CLASS","APPOINTMENT_CLASS","BLOCK_APPOINTMENT_CLASS","BLOCK_INDICATOR_CLASS","APPOINTMENT_BORDER","APPOINTMENT_DETAILS","SUBJECT_WRAP","RESOURCE_NAME","APPOINTMENT_TIME","TABLE_WRAP_CLASS","OUTER_TABLE_CLASS","CONTENT_WRAP_CLASS","VIRTUAL_TRACK_CLASS","AGENDA_CELLS_CLASS","AGENDA_CURRENT_DAY_CLASS","AGENDA_SELECTED_CELL","MONTH_HEADER_CLASS","AGENDA_HEADER_CLASS","AGENDA_RESOURCE_CLASS","AGENDA_DATE_CLASS","NAVIGATE_CLASS","DATE_HEADER_CLASS","AGENDA_DAY_BORDER_CLASS","DATE_BORDER_CLASS","AGENDA_DAY_PADDING_CLASS","DATE_TIME_CLASS","DATE_TIME_WRAPPER_CLASS","AGENDA_EMPTY_EVENT_CLASS","AGENDA_NO_EVENT_CLASS","APPOINTMENT_INDICATOR_CLASS","EVENT_INDICATOR_CLASS","EVENT_ICON_UP_CLASS","EVENT_ICON_DOWN_CLASS","EVENT_ICON_LEFT_CLASS","EVENT_ICON_RIGHT_CLASS","EVENT_ACTION_CLASS","NEW_EVENT_CLASS","CLONE_ELEMENT_CLASS","MONTH_CLONE_ELEMENT_CLASS","CLONE_TIME_INDICATOR_CLASS","DRAG_CLONE_CLASS","EVENT_RESIZE_CLASS","RESIZE_CLONE_CLASS","LEFT_RESIZE_HANDLER","RIGHT_RESIZE_HANDLER","TOP_RESIZE_HANDLER","BOTTOM_RESIZE_HANDLER","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","HEADER_ROW_CLASS","ALLDAY_APPOINTMENT_WRAPPER_CLASS","ALLDAY_APPOINTMENT_CLASS","EVENT_COUNT_CLASS","ROW_COUNT_WRAPPER_CLASS","ALLDAY_APPOINTMENT_SECTION_CLASS","APPOINTMENT_ROW_EXPAND_CLASS","APPOINTMENT_ROW_COLLAPSE_CLASS","MORE_INDICATOR_CLASS","CELL_POPUP_CLASS","EVENT_POPUP_CLASS","MULTIPLE_EVENT_POPUP_CLASS","POPUP_HEADER_CLASS","POPUP_HEADER_ICON_WRAPPER","POPUP_CONTENT_CLASS","POPUP_FOOTER_CLASS","DATE_TIME_DETAILS_CLASS","RECURRENCE_SUMMARY_CLASS","QUICK_POPUP_EVENT_DETAILS_CLASS","EVENT_CREATE_CLASS","EDIT_EVENT_CLASS","DELETE_EVENT_CLASS","TEXT_ELLIPSIS","MORE_POPUP_WRAPPER_CLASS","MORE_EVENT_POPUP_CLASS","MORE_EVENT_HEADER_CLASS","MORE_EVENT_DATE_HEADER_CLASS","MORE_EVENT_HEADER_DAY_CLASS","MORE_EVENT_HEADER_DATE_CLASS","MORE_EVENT_CLOSE_CLASS","MORE_EVENT_CONTENT_CLASS","MORE_EVENT_WRAPPER_CLASS","QUICK_DIALOG_CLASS","QUICK_DIALOG_OCCURRENCE_CLASS","QUICK_DIALOG_SERIES_CLASS","QUICK_DIALOG_FOLLOWING_EVENTS_CLASS","FOLLOWING_EVENTS_DIALOG","QUICK_DIALOG_DELETE_CLASS","QUICK_DIALOG_CANCEL_CLASS","QUICK_DIALOG_ALERT_OK","QUICK_DIALOG_ALERT_CANCEL","QUICK_DIALOG_ALERT_FOLLOWING","QUICK_DIALOG_ALERT_BTN_CLASS","EVENT_WINDOW_DIALOG_CLASS","FORM_CONTAINER_CLASS","FORM_CLASS","EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS","EVENT_WINDOW_ALL_DAY_CLASS","TIME_ZONE_CLASS","TIME_ZONE_ICON_CLASS","TIME_ZONE_DETAILS_CLASS","EVENT_WINDOW_REPEAT_DIV_CLASS","EVENT_WINDOW_REPEAT_CLASS","EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS","SUBJECT_CLASS","LOCATION_CLASS","LOCATION_ICON_CLASS","LOCATION_DETAILS_CLASS","EVENT_WINDOW_START_END_DIV_CLASS","EVENT_WINDOW_START_CLASS","EVENT_WINDOW_END_CLASS","EVENT_WINDOW_RESOURCES_DIV_CLASS","DESCRIPTION_CLASS","DESCRIPTION_ICON_CLASS","DESCRIPTION_DETAILS_CLASS","EVENT_WINDOW_TIME_ZONE_DIV_CLASS","EVENT_WINDOW_START_TZ_CLASS","EVENT_WINDOW_END_TZ_CLASS","EVENT_WINDOW_BACK_ICON_CLASS","EVENT_WINDOW_SAVE_ICON_CLASS","EVENT_WINDOW_CANCEL_BUTTON_CLASS","EVENT_WINDOW_SAVE_BUTTON_CLASS","EVENT_WINDOW_DIALOG_PARENT_CLASS","EVENT_WINDOW_TITLE_TEXT_CLASS","EVENT_WINDOW_ICON_DISABLE_CLASS","EDIT_CLASS","EDIT_ICON_CLASS","DELETE_CLASS","DELETE_ICON_CLASS","CLOSE_CLASS","CLOSE_ICON_CLASS","ERROR_VALIDATION_CLASS","EVENT_TOOLTIP_ROOT_CLASS","ALLDAY_ROW_ANIMATE_CLASS","TIMESCALE_DISABLE","DISABLE_DATE","HIDDEN_CLASS","DISABLE_DATES","POPUP_WRAPPER_CLASS","POPUP_TABLE_CLASS","RESOURCE_MENU","RESOURCE_MENU_ICON","RESOURCE_LEVEL_TITLE","RESOURCE_TREE","RESOURCE_TREE_POPUP_OVERLAY","RESOURCE_TREE_POPUP","RESOURCE_CLASS","RESOURCE_ICON_CLASS","RESOURCE_DETAILS_CLASS","DATE_TIME_ICON_CLASS","VIRTUAL_SCROLL_CLASS","ICON_DISABLE_CLASS","AUTO_HEIGHT","IGNORE_WHITESPACE","EVENT_TEMPLATE","READ_ONLY","MONTH_HEADER_WRAPPER","INLINE_SUBJECT_CLASS","INLINE_APPOINTMENT_CLASS","SCROLL_HIDDEN","ALLDAY_APPOINTMENT_SCROLL","ALLDAY_APPOINTMENT_AUTO","HeaderRenderer","parent","l10n","localeObj","renderHeader","addEventListener","prototype","on","closeHeaderPopup","removeEventListener","off","closestEle","target","closestPop","contentWrap","querySelector","isAdaptive","contains","popupEle","popupObj","ej2_instances","hide","hideHeaderPopup","headerPopup","toolbarEle","insertBefore","firstElementChild","renderToolbar","_this","items","getItems","trigger","requestType","args","toolbarObj","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","enableHtmlSanitizer","locale","appendTo","prevNavEle","setAttribute","getConstant","nextNavEle","updateAddIcon","updateActiveView","updateItems","dataBind","getPopUpRelativeElement","setDayOfWeek","headerCalendar","setCalendarDate","setCalendarMinMaxDate","minDate","maxDate","getCalendarView","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","querySelectorAll","viewIndex","updateDateRange","textEle","activeViewOptions","dateRangeTemplate","textContent","activeView","getStartDate","getEndDate","viewName","dateRangeTemplateName","templateId","id","dateTemplate","getDateRangeTemplate","text","getDateRangeText","refreshOverflow","addEle","eventSettings","allowAdding","dateString","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","push","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","suffixIcon","enableAdaptiveUI","showAlwaysInPopup","views","_a","item","getItemObject","displayName","option","view","orientationClass","isItemInsidePopup","orientation","renderHeaderPopup","headerPopupEle","headerCalendarEle","actionOnScroll","targetType","relateTo","X","Y","isDisplayDate","displayDate","hasSelectedDate","calendarMode","change","calendarChange","setCalendarTimezone","calendarDate","changeDate","timezone","tzModule","getLocalTimezoneName","calculateViewIndex","originalEvent","strClass","isSameTime","currentTime","show","changeView","undefined","getCurrentTime","isSelectedDate","numberOfWeeks","getNextPreviousDate","activeCellsData","startTime","interval","timeScale","slotCount","msInterval","currentTime_1","setMilliseconds","isAllDay","eventWindow","openEditor","cancel","toolbarPopUp","name","duration","selectedTime","getHeaderElement","updateHeaderItems","classType","dateRangeEle","previousNextIconHandler","dates","getCurrentViewDates","firstDate","lastDate","isCustomMonth","enableItems","getModuleName","destroy","isDestroyed","Scroll","setWidth","setHeight","setDimensions","onPropertyChanged","cssProperties","getCssProperties","module","notify","ScheduleTouch","touchObj","scrollHandler","swipe","swipeHandler","tapHold","tapHoldHandler","swipeSettings","swipeThresholdDistance","add","onTransitionEnd","touchLeftDirection","touchRightDirection","uiStateValues","action","allowSwiping","timeStampStart","now","scrollDirection","scrollDiv","scrollWidth","isScrollTriggered","preventDefault","stopPropagation","nextPanel","renderPanel","getPanel","renderDates","colLevels","x","distanceX","transform","prevWidth","previousPanel","swipeDate","swipeDirection","offsetDist","isDevice","swapPanels","transitionDuration","confirmSwipe","cancelSwipe","quickPopup","tapHoldEventPopup","clsName","nextPrevType","currentPanel","setProperties","headerModule","getRenderDates","renderLayout","direction","temp","previousDate","navArgs","setPanel","translateX","offsetLeft","renderTemplates","crudModule","refreshDataManager","resetValues","KeyboardInteraction","selectedCells","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDownArrow","shiftUpArrow","shiftRightArrow","shiftLeftArrow","ctrlLeftArrow","ctrlRightArrow","altOne","altTwo","altThree","altFour","altFive","altSix","altSeven","altEight","altNine","enter","escape","delete","backspace","home","pageUp","pageDown","tab","shiftTab","ctrlShiftUpArrow","ctrlShiftDownArrow","ctrlShiftLeftArrow","ctrlShiftRightArrow","tabIndex","keyboardModule","keyAction","keyActionHandler","eventName","processDown","shiftKey","processUp","processLeft","processRight","focus","processViewNavigation","processEnter","focusFirstCell","processTab","processDelete","processCtrlShiftNavigationArrows","processEscape","allowInline","inlineModule","processFTwelve","getSelectedElements","inlineArgs","groupIndex","click","onCellMouseDown","initialTarget","getClosestCell","readonly","which","removeSelectedClass","getContentTable","onMouseSelection","onMoveUp","allDayRow","getAllDayRow","appointments","selectionEdges","boundaryValidation","pageY","pageX","bottom","top","left","right","parent_1","yInBounds","scrollHeight","scrollTop","xInBounds","scrollLeft","selectCells","isPreventAction","queryStr","cellData","convertToEventData","getSelectedCells","showQuickPopup","selectArgs","isPopupShow","quickInfoOnSelectionEnd","cellArgs","resourceIcon","inlineCrudActions","getDateFromElement","getNavigateView","cellDetails","getCellDetails","end","getCells","isInverseTable","tableEle","isTimelineYear","query","cells","maxRow","rows","maxColumn","startIndex","endIndex","inverseCells","j","cell","sCells","focusCell","eventBase","removeSelectedAppointmentClass","isTimelineView","isVerticalYear","getWorkCellElements","isInverseTableSelect","isMultiple","targetCell","initialId_1","views_1","allowMultipleRow","removeInlineAppointmentElement","allowMultiRowSelection","isGroupYear","group","resources","parentElement","cellIndex","getAttribute","resourceSelectedCells","selectedCells_1","allowMultiCellSelection","allDayCells","getAllDayCells","resourceAllDayCells","allDayCells_1","concat","addSelectedClass","selectAppointment","isReverse","getAppointmentElements","nextAppEle","targetIndex","addSelectedAppointments","selectAppointmentElementFromWorkCell","appointmentElements_1","getUniqueAppointmentElements","filteredElements_1","selectedDate_1","selectedSeriesEvents","eventsProcessed","filter","eventObject","eventFields","JSON","stringify","Guid","selectedElement","focusElements","getAppointmentElementsByGuid","startCell","endCell","guid","appointmentElements","self","getWorkCellFromAppointmentElement","selectedObject","getEventByGuid","selectWorkCellByTime","key","viewCollections","cancelUpDownAction","isGroup","selectedElements","selectedEventElements","getSelectedAppointments","moreEventWrapper","quickPopupWrapper","getQuickPopupElement","tableRows","getTableRows","curRowIndex","getVerticalUpDownCell","getHorizontalUpDownCell","getYearUpDownCell","rowIndex","isUp","row","workCell","hasRow","column","dateAttr","processLeftRight","parentNode","sectionRowIndex","columnIndex","maxIndex","isCancelLeftRightAction","prevent","selectedAppointments","targetDate","isMonthEnd","calculateNextPrevDate","getTimelineYearTargetCell","changeTargetCell","getHorizontalLeftRightCell","curColIndex","maxColIndex","allDayRow_1","isMonthStart","otherMonthCell","tbody","allDayRow_2","isRight","getVerticalLeftRightCell","currentCell","initialId","nextPrevDate","getFocusableElements","queryString","processTabOnPopup","popupElement","focusableElements","footerEle","offsetParent","firstEle","lastEle","activeElement","popupWrapper","appSelector","appElements","focusAppointment","resourceBase","lastResourceLevel","virtualScrollModule","virtual","averageRowHeight","expandedResources","virtualScrolling","setScrollPosition","isTimeline","resCellSelector","resourceCell","preventScroll","processTabOnResourceCells","activeEle","selectedEle","getSelectedEvents","activeEventData","allowDeleting","deleteClick","eventEle","renderedResources","onClosePopup","morePopup","tabElements","currentTabIndex","nextTabElement","resColWrap_1","resCells","forEach","offsetTop","Data","dataSource","initDataManager","dataManager","generateQuery","clone","includeFiltersInQuery","dateQuery","getStartEndQuery","recurrenceQuery","recurrenceRule","and","where","or","addParams","toISOString","fieldMapping","getData","executeQuery","Gregorian","dt","getLeapYearDaysCount","getYearDaysCount","getYearLastDate","getMonthDaysCount","getMonthStartDate","getMonthEndDate","getExpectedDays","days","dateObj","setValidDate","monthValue","beginDate","maxDay","isSameMonth","checkMonth","months","compareMonth","isSameYear","isLastMonth","isLeapYear","Islamic","hDate","getHijriDate","gDate","toGregorian","daysInMonth","getDaysInMonth","finalGDate","finalHDate","hijriDate","updateDateObj","currentHijri","tempHijri","hDate1","Timezone","timezoneData","getTimezoneData","offset","convertedDate","toLocaleString","timeZone","isNaN","error","convert","fromOffset","toOffset","fromLocalOffset","toLocalOffset","removeLocalOffset","Intl","DateTimeFormat","resolvedOptions","Value","Text","generateSummary","rule","localeObject","calendarType","ruleObject","extractObjectFromRule","summary","EVERY","cldrObj","cldrObj1","nameSpace1","nameSpace","freq","DAYS","WEEKS","ON","DAYINDEXOBJECT","MONTHS","getMonthSummary","YEARS","count","TIMES","until","tempDate","UNTIL","monthDay","pos","setPosition","WEEKPOS","generate","excludeDate","startDayOfWeek","maximumCount","viewDate","oldTimezone","newTimezone","MAXOCCURRENCE","cacheDate","calendarUtil","getCalendarUtil","modifiedDate","tempExcludeDate","tz","content","parsedDate","getDateFromRecurrenceDateString","recExceptionCount","tempViewDate","maxOccurrence","setFirstDayOfWeek","DAYINDEX","dailyType","weeklyType","monthlyType","yearlyType","recDateString","substr","excludeDateHandler","zeroIndex","getDateCount$1","expectedCount","state","expectedDays","compareDates","validateRules","weekState","wkstIndex","weekCollection","wkst","dayIndex","startDateDiff","weekstartDate","weekendDate","compareTempDate","insertDataCollection","getStartDateForWeek","ruleType","validateMonthlyRuleType","monthlyDayTypeProcessforMonthFreq","monthlyDayTypeProcess","monthlyDateTypeProcessforMonthFreq","monthlyDateTypeProcess","typeValue","checkYearlyType","processWeekNo","processYearDay","stDate","startDay","firstWeekSpan","weekNos","weekNo","insertDateCollection","insertDatasIntoExistingCollection","dateCollection","yearDay","initializeRecRuleVariables","ruleData","monthCollection","mainDate","monthInit","currentMonthDate","processDateCollectionForByMonthDay","setNextValidDate","recRuleVariables","isByMonth","validateProperDate","monthData","getMonthCollection","isHavingNumber","HASNUMBER","test","expectedDaysArray","SPLITNUMBERANDSTRING","filterDateCollectionByIndex","insertDateCollectionBasedonBySetPos","dayCycleData","processWeekDays","initialDate","datas","week","insertDateCollectionBasedonIndex","processDateCollectionforByDayWithInteger","newstr","getDayString","getRecurrenceCollection","recurrenceCollectionObject","expectedDaysArrays","arrPosition","getDateCollectionforBySetPosNull","recurrenceCollections","dayData","chDate","weekCount","firstOfMonth","lastOfMonth","numberOfDaysInMonth","firstWeekDay","used","sort","weekIndex","validRules","REMOVENUMBERINSTRING","checkDayIndex","sortedExpectedDays","expectedDaysNumberSplit","expectedDaysArr","rules","rulesList","splitData","Number","splice","dayCycle","checkDate","expectedDate","shift","checkYear","expectedyearDay","getYearDay","startDateCollection","diff","rotate","expectedMonth","SU","MO","TU","WE","TH","FR","SA","getRecurrenceStringFromDate","getUTCFullYear","roundDateValues","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","EventBase","slots","isDoubleTapped","processData","events","timeZonePropChanged","fields","processed","generateID","_loop_1","event_1","this_1","updateEventDateTime","processTimezoneChange","isPrinting","isPreventTimezone","processTimezone","level","recurrenceID","crudObj","isCrudAction","generateOccurrence","recurrenceEvent","_loop_2","occurrence","app","generateGuid","recurrenceEvent_1","events_1","eventData","isBlock","filterEvents","blockData","blockData_1","eventObj","isDifferentDate","blockProcessed","getProcessedEvents","eventCollection","eventsData","eventCollection_1","event_2","timezonePropertyChange","processedData","timezoneConvert","startTimezone","endTimezone","startTz","endTz","filterBlockEvents","eStart","eEnd","resourceData","getGroupIndexFromEvent","blockEvents","blockEvents_1","eventObj_1","isDifferentTime","resourceTdData","predicate","dataModule","json","executeLocal","filterEventsByResource","sortByTime","filterEventsByRange","filteredEvents","groupOrder","keys","Object","filteredCollection","every","appointmentsCollection","sortComparer","customSorting","fieldMappings_1","a","b","d1","d2","sortByDateTime","fieldMapping_1","object1","object2","d3","d4","d5","d6","splits","sortFn","getSmallestMissingNumber","large","apply","splitEventByDay","eventStartTime","eventEndTime","eventLength","isSpanned","splitEvent","dateRender","orgStart","orgEnd","ranges","cStart","slot","byDate","showWeekend","slotDates","slot_1","s","renderedDates","getRenderedDates","renderedDates_1","firstSlot","hasBreak","isLeft","cloneEventObject","dateInRange","availSlot","_b","availSlot_1","slot_2","getSelectedEventElements","isAlreadySelected","elementSelector","focusElements_1","eventSelect","elementSelect","selectAppointments","isAlreadyAdded","preventFocus","focusElement","isFocused","dialogObject","visible","selectedCell","keyboardInteractionModule","nearestTime","isAllDayAppointment","targetArea","levelIndex","resource","levelName","idField","parentField","getIndexFromResourceId","isFullDay","spannedEventPlacement","appointmentBorderRemove","wireAppointmentEvents","isPreventCrud","isReadOnly","isReadonly","eventTouchClick","eventDoubleClick","resizeModule","wireResizeEvent","dragAndDropModule","wireDragEvent","setTimeout","renderResizeHandler","spanEvent","allowResizing","resizeEdge","resizeHandler","isTop","isBottom","ctrlKey","metaKey","target_1","selectEventArgs","eventClickArgs","quickPopupHide","currentAction","openRecurrenceAlert","getEventById","c","r","random","v","getEventIDType","getEventMaxID","resourceId","eventId","idType","appIds","maxId","reduce","obj","isMaxCount","eventRule","timeZoneDiff","exception","recurrenceException","maxCount","firstDay","generatedDates","occurrenceCollection","dates_1","clonedObject","getDSTAdjustedTime","followingID","occurDate","eventOffset","getDSTDiff","schOffset","startOffset","occurOffset","getParentEvent","isParent","parentEvent","getFollowingEvent","collection","getEventCollections","followObj","follow","parentObj","childObj","followingCollection","followingEvent","getOccurrenceEvent","collections","fields_1","fieldValue","parentApp","isFollowingEvent","parentStart","childStart","isGuid","isFollowing","fieldKey","getOccurrencesByID","parentObject","parentObject_1","event_3","getOccurrencesByRange","event_4","getDeletedOccurrences","recurrenceData","deletedOccurrences","exDateString_1","_loop_3","len","edited","this_2","exDate","childObject","applyResourceColor","alpha","alphaColor","color","g","getResourceColor","createBlockAppointmentElement","record","resIndex","isResourceEventTemplate","eventSubject","subject","default","appointmentWrapper","attrs","templateElement","eventTemplate","scheduleId","eventTemplateName","templateName","getAppointmentTemplate","appointmentSubject","sanitize","setWrapperAttributes","getReadonlyAttribute","isBlockRange","isBlockAlert","event_5","dataCol","dataCol_1","getFilterEventsList","getSeriesEvents","deleteFutureEditEvents","futureEvents","deleteFutureEditEventList","delId","followingId","deleteFutureEvent","startTimeQuery","getEditedOccurrences","deleteRecurrenceEventList","delEditedEvents","deleteFutureEditEventList_1","event_6","delEventQuery","filteredDates","isValidEvent","schedule","isHourRange","isSameRange","allDayExpandScroll","dateHeader","indentHeight","headerRows","tdEle","ele","expand","updateEventMinimumDuration","startEndHours","eventDuration","minimumEventDuration","tempEnd","tempStart","createEventWrapper","tr","levels","col","appointmentWrap","innerWrapper","getPageCoordinates","eventArgs","changedTouches","renderSpannedIcon","iconElement","iconLeft","iconRight","iconTop","iconBottom","unWireEvents","appElements_1","clearEvents","__extends$1","__extends","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","VerticalEvent","_super","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","allDayLevel","getStartHour","getEndHour","animation","progress","animationUiUpdate","renderAppointments","setDragArea","isSpecificResourceEvents","wrapperElements","isDragging","wrapperElements_1","wrapper","sourceEvent","targetEvent","updateFocusedWorkCell","allDayElement","setAllDayRowHeight","expandCollapse","rowExpandCollapse","initializeValues","processBlockEvents","renderEvents","arr","animate","isGroupAdaptive","allowVirtualScrolling","cellHeight","parseFloat","getHeight","appHeight","appendEvent","appointmentElement","appLeft","eventType","getResourceList","dateCount","getStartCount","resources_1","filterEvents_1","setValues","renderBlockEvents","dayCount","spannedData","isSpannedEvent","isWorkDayAvailable","blockTop","blockHeight","getTopValue","getDayIndex","isRender","allDayRowTop","renderedDate","length_2","filterEvents_2","renderAllDayEvents","enableMaxHeight","getOverlapIndex","renderNormalEvents","filterEvents_3","resources_2","enable","hideNonWorkingDays","renderedIndex","dateIndex","firstColumn","currentResources","resourceDateTree","colSpan","findIndex","resourceIndex","getCssClass","createAppointmentElement","recordSubject","getAnnouncementString","appointmentDetails","elementId","appointmentStartTime","innerHTML","getTimeString","appointmentEndTime","timeStr","appointmentTime","appointmentLocation","location","iconClass","recurrenceIcon","createMoreIndicator","currentDay","countWrapper","childElementCount","innerCountWrap","moreIndicatorElement","countCell","moreCount","formatNumber","eventDates","workDays","workDaysField","inline","cellTop","eventHeight","currentDates","appWidth","topValue","isDateRange","isAlreadyRendered","allDayDifference_1","allDayIndex_1","Index","widthAdjustment","wIndex_1","eventWrapper_1","appointmentElement_1","createInlineAppointmentElement","length_3","allDayRowHeight","addOrRemoveClass","appIndex","getEventWidth","argsData","tempData","adjustOverlapElements","iconHeight","maxHeight","subjectElement","tempWidth","getEventLeft","tempLeft","diffInMinutes","eventsList","date_1","appointmentList_1","appointment_1","recordStart_1","recordEnd_1","filterList","val","eventsList_1","record_1","appLevel","length1","length2","eleGuid","apps","enableAllDayScroll","moreEventCount","getEventHeight","eventElement","styles","eventWrapper","rowHeight","__extends$2","EVENT_GAP","MonthEvent","monthHeaderHeight","moreIndicatorHeight","renderType","enableIndicator","rowAutoHeight","withIndicator","maxOrIndicator","ignoreWhitespace","removeEventWrapper","appElement","appElement_1","wrap","conWrap","appointmentWrapper_1","removeHeightProperty","cellTd","isHorizontalScroll","renderResourceEvents","renderEventsHandler","updateBlockElements","isPreventScrollUpdate","scrollPosition","updateVirtualScrollHeight","enablePersistence","showWeekNumber","totalCells_1","weekNumberCells","blockList","workCells","totalCells","height_1","clientHeight","cellDetail","cellWidth","getSlotDates","spannedEvents","spannedEvents_1","sDate","getStartTime","getIndex","updateIndicatorIcon","blockSpannedList","isSameDate","isBlockIcon","blockSpannedList_1","blockEvent","spannedEvents_2","isIcon","getEndTime","getIndexOfDate","getCellTd","getPosition","diffInDays","appRight","appTop","getRowTop","blockElement","renderEventElement","renderBlockIndicator","blockIndicator","cloneData","actualStartTime","actualEndTime","actualStartHour","actualEndHour","sourceRes","slotData","isCloneElement","newRecord","getEventData","eventLocation","innerElement","allDayString","timeString","appTime","appLocation","appendEventIcons","overlapCount","enableAppRender","inlineValue","firstChild","updateCellHeight","indicator","getMoreIndicatorText","getMoreIndicatorElement","renderElement","moreIndicatorClick","blockElement_1","getFilteredEvents","getOverlapEvents","appointmentsList","dateTime","appointments_1","moreArgs","isPopupOpen","clickArgs","moreArgs_1","moreEventClick","isAppointment","pop","setMaxEventHeight","wrapperEle","selector","rows_1","headerHeight","__extends$3","EVENT_GAP$1","BLOCK_INDICATOR_WIDTH","BLOCK_INDICATOR_HEIGHT","TimelineEvent","cellTops","eventContainers","dayLength","slotsPerDay","appointments_2","trimStartTime","trimEndTime","getSortComparerIndex","getOverlapSortComparerEvents","appointmentsCollection_1","source","isDayProcess","top_1","renderApp","conWidth","isWithoutScroll","getFirstChild","adjustAppointments","moreIndicator","appPos","position_1","renderTimelineMoreIndicator","k","position_2","isAlreadyAvail","startDateTime","slotStartTime","slotEndTime","getFilterEvents","appArea","renderedAppCount","monthHeader","currentPercentage","td","blockIndicator_1","getNextDay","getPreviousDay","isSameDay","getSameDayEventsWidth","getSpannedEventsWidth","endWidth","startWidth","spannedWidth","endDay","getAppointmentLeft","slotTd","daySlot","gIndex","indicatorPos","wrapIndex","InlineEdit","inlineEdit","moreWrapper","cellEdit","eventEdit","saveObj","generateEventData","getEventDaysCount","isVertical","createVerticalViewInline","createMonthViewInline","createTimelineViewInline","inlineSubject","subEle","innerText","subjectWrap","setSelectionRange","daysCount","verticalEvent","allDayElements","saveObject","monthEvent","monthCellSelector","monthModule","timelineView","abs","inlineElement","setDefaultValueToObject","setResourceValues","addEvent","eventTarget","eventDetails","getEventDetails","saveEvent","inlineData","inlineAppointmentElement","inlineDetails","inlineAppointment","node","FieldValidator","renderFormValidator","form","formObj","customPlacement","inputElement","errorPlacement","validationComplete","focusout","focusOut","relatedTarget","ignoreError","elem","inputName","display","status","createTooltip","dlgContent","client","inputClient","div","arrow","destroyToolTip","elements","elements_1","reset","EVENT_FIELD","QuickPopups","isMultipleEventSelect","fieldValidator","render","renderQuickPopup","renderMorePopup","renderQuickDialog","open","quickPopupOpen","close","quickPopupClose","hideAnimation","showAnimation","collision","viewPortElement","zIndex","moreEventPopup","morePopupOpen","morePopupClose","closeButton","renderButton","closeClick","navigationClick","buttonModel","isPrimary","dialogButtonClick","editFollowingEvents","followingSeriesButton","quickDialog","animationSettings","effect","buttons","closeOnEscape","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","dialogElement","okButton","cancelButton","iconName","isDisabled","clickEvent","buttonObj","disabled","iconCss","quickDialogClass","classList$$1","followingEventButton","applyFormValidation","validation","editDeleteOnly","editFollowingEventsOnly","editDeleteSeries","header","showQuickDialog","openRecurrenceValidationAlert","dialogCancel","enableRecurrenceValidation","openDeleteAlert","openValidationError","popupType","eventProp","popupArgs","createMoreEventList","moreEventContentEle","moreEventWrapperEle","eventText","tempId","eventTitle","closeIcon","editAction","allowEditing","deleteAction","editIcon","editClick","deleteIcon","beforeQuickPopupOpen","isCellBlocked","tempObj","showQuickInfo","isMinMaxDate","targetEle","newEventClone","isSameTarget","subjectElement_1","destroyPopupButtons","quickCellPopup","getPopupHeader","getPopupContent","getPopupFooter","createInput","properties","placeholder","moreButton","detailsClick","saveButton","saveClick","isSameEventClick","editButton","isQuickTemplate","quickInfoTemplates","templateType","eventTooltip","updateTapHoldEventPopup","quickEventPopup","buttonClass","deleteButton","headerType","headerData","headerTemplate","headerArgs","elementType","headerTemp","getQuickInfoTemplatesHeader","getFormattedString","replaceAll","templateWrapper","subjectText","childNodes","contentTemplate","contentArgs","contentTemp","getQuickInfoTemplatesContent","resourceText","getResourceText","details","getRecurrenceSummary","getTimezone","description","locationDetails","descriptionDetails","resourceDetails","footerType","footerData","footerTemplate","footer","footerArgs","footerTemp","getQuickInfoTemplatesFooter","resourceValue","resourceCollection_1","id_1","textField","resourceData_1","lastResource_1","isArray","resNames_1","lastResourceData_1","startDateDetails","getDateFormat","endDateDetails","startTimeDetail","endTimeDetail","spanLength","dateElement","moreEventElements","tdDate","dialogEvent","subjectEle","updateMoreEventContent","moreElement","selectCell","cancelBtn","deleteEvent","isIgnoreOccurrence","eventSave","titleContent","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","toUpperCase","skeletonString","skeleton","getDataFromTarget","cellsData","popupCloseArgs","isEventPopup","removeAttribute","innerHeight","isVirtualScroll","conTable","offsetX","offsetY","refreshPosition","collide","leftCollide","translateY","clientX","clientY","targetRect","y","previousOffset","popupRect","elementFromPoint","applyEventColor","colorField","colorEle","borderLeftColor","backgroundColor","editElement","isCellPopup","popupData","formvalidator","validate","getObjectFromFormData","navigateEle","currentTarget","classNames","popupWrap","removeNewEventElement","tar","popupName","popup","buttonCollections","buttonCollections_1","button","instance","refreshQuickDialog","destroyQuickDialog","refreshQuickPopup","destroyQuickPopup","refreshMorePopup","destroyMorePopup","EventTooltip","tooltipObj","mouseTrail","showTipPointer","getTargets","beforeRender","onBeforeRender","onBeforeClose","targets","headerTooltipTemplate","enableTooltip","resCollection","getColumnLevels","contentContainer","tooltipTemplate","getHeaderTooltipTemplate","setContent","getEventTooltipTemplate","eventStart","eventEnd","tooltipSubject","tooltipLocation","startMonthDate","startMonthYearDate","endMonthYearDate","tooltipDetails","tooltipTime","resetTemplates","__extends$4","__decorate$1","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","HEADER","INPUTWARAPPER","INPUTWARAPPERSIDE","REPEATELEMENT","REPEATINTERVAL","INTERVALCLASS","DAYWRAPPER","WEEKWRAPPER","WEEKPOSITION","DAYPOSITION","YEAREXPANDERWRAPPER","YEAREXPANDERELEMENT","MONETHEXPANDERWRAPPER","MONETHEXPANDWRAPPER","MONTHEXPANDERELEMENT","MONTHEXPANDERCHECKBOXWRAPPER","FORMLEFT","FORMRIGHT","MONTHDAYWRAPPER","MONTHEXPANNDERELEM","MONTHPOS","MONTHWEEK","ENDON","MONTHEXPANDERLABEL","WEEKEXPANDERLABEL","ENDONLABEL","ENDONLEFT","MONTHDAYELEMENT","ENDONELEMENT","ENDONDATE","UNTILDATE","ENDONCOUNTWRAPPER","ENDONCOUNT","HIDEWRAPPER","RTLCLASS","PRIMARY","ACTIVE","RECURRENCETABLE","REPEATCONTENT","REPEATCONTENTWRAPPER","NONE","DAILY","WEEKLY","MONTHLY","YEARLY","NEVER","UNTIL$1","COUNT","TEXTFIELD","VALUEFIELD","LAST","REPEAT","REPEATEVERY","ON$1","END","RADIOLABEL","RULEUNTIL","RULEBYDAY","RULEBYMONTHDAY","RULEBYMONTH","RULEINTERVAL","RULECOUNT","RULESETPOS","RULEFREQ","RULEDAILY","RULEWEEKLY","RULEMONTHLY","RULEYEARLY","RULESUNDAY","RULEMONDAY","RULETUESDAY","RULEWEDNESDAY","RULETHURSDAY","RULEFRIDAY","RULESATURDAY","KEYSUNDAY","KEYMONDAY","KEYTUESDAY","KEYWEDNESDAY","KEYTHURSDAY","KEYFRIDAY","KEYSATURDAY","EQUAL","SEMICOLON","COMMA","FIRST","SECOND","THIRD","FOURTH","contentType","none","daily","weekly","monthly","yearly","valueData","neverClassList","weekClassList","monthClassList","yearClassList","dailyClassList","noEndClassList","endOnCountClassList","endOnDateClassList","RecurrenceEditor","options","defaultLocale","never","first","second","third","fourth","last","repeat","repeatEvery","onDay","weeks","years","summaryTimes","summaryOn","summaryUntil","summaryRepeat","summaryDay","summaryWeek","summaryMonth","summaryYear","monthWeek","monthPosition","monthExpander","yearExpander","repeatInterval","renderStatus","dayButtons","monthButtons","startState","endOn","showFormElement","updateForm","freshOnEndForm","updateEndOnForm","selectMonthDay","updateUntilDate","onMonthDay","checked","preRender","applyCustomClass","initialize","renderComponent","setRecurrenceRule","repeatType","selectedType","getRecurrenceRule","triggerChangeEvent","resetDayButton","daySelection","rotateArray","rtlClass","untilDateObj","weekday","monthDate","monthWeekDays","monthWeekPos","getDayPosition","endType","hideElement","renderDropdowns","getRepeatData","floatLabelType","role","frequencies","resetFormValues","getEndData","popupWidth","getPopupWidth","renderDropDownList","dropDownData","onWeekDay","getMonthPosData","getDayData","getMonthData","setDefaultValue","formelement","formelement_1","recurreneElement","recurreneElement_1","renderDatePickers","dateFormat","getFormat","formatType","dayButtonRender","btns","btns_1","btn","isToggle","radioButtonRender","label","numericTextboxRender","recurrenceCount","setTemplate","endData","positionCollection","textValue","monthpos","monthposValue","nameSpaceString","weekday_1","fullDay","getSelectedDaysData","getSelectedMonthData","getIntervalData","getEndOnCount","getYearMonthRuleData","updateWeekButton","updateMonthUI","updateUI","getUntilData","tempStr","destroyComponents","resetFields","updateRuleUntilDate","untilDate","newUntilDate","getRecurrenceDates","endon","detachInputs","inputElements","inputElements_1","removeClasses","getPersistData","addOnPersist","renderComplete","newProp","oldProp","prop","EVENT_FIELD$1","REPEAT_CONTAINER_CLASS","REPEAT_BUTTON_ICON_CLASS","REPEAT_BUTTON_CLASS","REPEAT_DIALOG_CLASS","HIDE_STYLE_CLASS","EventWindow","eventWindowTime","renderEventWindow","dialogModel","getEventWindowContent","minHeight","beforeOpen","onBeforeOpen","eventDelete","dialogClose","preventEventSave","refreshRecurrenceEditor","createRecurrenceEditor","setRecurrenceEditor","editorTemplate","isEventData","cellClickAction","renderFormElements","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","allowKeyboardInteraction","code","isEnterKey","getSlotDuration","getInstance","deleteObj","callBackPromise","trimAllDay","refreshDateTimePicker","startObj","endObj","resolve","isInteracted","eventCrudData","processCrudActions","resetForm","onsubmit","formElements","formElements_1","tempEle","getEditorTemplate","getDefaultEventWindowContent","parentDiv","createDivElement","titleLocationDiv","renderTextBox","editorTitles","startEndDateTimeDiv","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","renderCheckBox","timezoneParentDiv","renderDropDown","repeatParentDiv","repeatDiv","repeatEditContainer","loadRecurrenceEditor","resourceParentDiv","renderResourceDetails","submit","title","renderRecurrenceEditor","updateMinMaxDateToEditor","createInputElement","fieldName","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","dateTimePicker","timeFormat","getFieldLabel","step","startEndElement","startEndElement_1","labelValue","resourceDiv","resourceInput","resourceTemplate","allowMultiple","listObj","onMultiselectResourceChange","itemTemplate","popupHeight","mode","dropDownList","onDropdownResourceChange","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","timezoneDataSource","filterBarPlaceholder","noRecordsTemplate","filtering","updateData","byGroupID","getColumnName","resObject","createInstance","datasource","resourceModel","groupId","filterRes","filterDatasource","clear","resObj","itemData","resValue","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","onChange","repeatStatus","textBoxDiv","textBoxInput","labelText","targetSelector","onAllDayChange","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","repeatSaveDialog","repeatCancelDialog","repeatOpenDialog","repeatRule","repeatStartDate","updateRepeatLabel","closeRepeatDialog","repeatTempRule","showDetails","disableButton","RecurrenceRule","getValidationRule","subjectRule","locationRule","startTimeRule","endTimeRule","descriptionRule","getFormElements","keyNames","formElements_2","curElement","columnName","setValueToElement","setDefaultValueToElement","timezoneObj","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","updateDateTime","getStartEndTime","workHours","timezoneValue","isDisable","saveIcon","untilObj","resetFormFields","localTimezoneName","found","some","formElement","formElement_1","currentElement","alert","dataCollection","getEventDataFromEditor","processEventValidation","Repeat","alertType","recurrenceValidation","isShowAlert","getResourceData","isResourceEventExpand","allowGroupEdit","getEventIdFromForm","eveId_1","editedData","editOccurrenceValidation","resourceSaveEvent","lastResourceData","formElement_2","getValueFromElement","alertMessage","recEditor","activeEvent","excludedEvents","seriesEvents","types","tempDiff","tempValue","getRecurrenceIndex","recColl","recIndex","currentData","editData","recurColl","excludedDatas","recurColl_1","currentStartTime","currentEndTime","nextStartTime","nextEndTime","lastEndTime","previousStartTime","previousEndTime","reverse","lastLevel","eventList","addValues","lastResource","resCol","groupId_1","index_1","l","state_1","eventList_1","dateValue","formElements_3","detachComponents","formElements_4","isIgnore","VirtualScroll","itemSize","bufferCount","renderedLength","getRenderedCount","setItemSize","containerSize","renderVirtualTrack","colCount","lastResourceIndex","lastRenderIndex","updateVirtualTrackHeight","resourceCount","resWrap","eventWrap","setTranslate","lastCollIndex","renderedResCount","setTabIndex","refreshProcessedData","horizontalScrolling","timeIndicator","firstTDIndex","upScroll","downScroll","focusedEle","updateContent","actionObj","navigationWrapper","clearTimeout","timeValue","leftScroll","rightScroll","updateHorizontalContent","prevSetCollection","getBufferCollection","nextSetResIndex","lastIndex","nextSetCollection","getCollection","nextSetIndex","getResCollection","getByDateCollection","setRenderedDates","getByIdCollection","firstItem","lastItem","setStartEndIndex","colIndex","isResourceCell","resourceRows","getContentRows","contentRows","eventRows","getEventRows","table","thead","colGroupEle_1","dateCol_1","dateCol_2","renderDates_1","resColWrap","focusResCell","Render","isDataRefresh","initializeLayout","templates","dayModule","weekModule","workWeekModule","yearModule","agendaModule","monthAgendaModule","timelineViewsModule","viewClass","timelineMonthModule","timelineYearModule","firstView","Error","updateLabelText","enableCompactView","updateHeader","currentTimezoneDate","getLabelText","__extends$5","__decorate$2","WorkHours","__extends$6","__decorate$3","TimeScale","__extends$7","__decorate$4","QuickInfoTemplates","__extends$8","__decorate$5","HeaderRows","Crud","getQuery","getTable","fromTable","then","dataManagerSuccess","catch","dataManagerFailure","resultData","result","isVirtualScrollAction","templateNames","refreshData","actionArgs","addedRecords","editParams","changedRecords","deletedRecords","crudData","tdData","crudData_1","offline","offlineArgs","promise","onlineArgs","isBlockEvent","addEvents","addArgs","eventData_1","saveChanges","insert","crudArgs","updateEvents","processSave","processOccurrences","processFollowSeries","processEntireSeries","saveArgs","eventData_2","update","deleteEvents","deleteArgs","occurrenceData","isDeletedRecords","eventData_3","occurrenceArgs","occurrenceEvents","childEvent","parentException","exceptionDate","excludeDateCheck","followData","eventData_4","updateFollowEvents","followArgs","followEvents","followData_1","processRecurrenceRule","seriesData","eventData_5","event_7","updateSeriesEvents","seriesArgs","fields_2","_loop_4","eventCollections","deletedEvents","originalParent","deleteData","eventData_6","fields_3","_loop_5","isDelete","parentEvent_1","isEdited","editedDate","eventData_7","editArgs","exceptionString","parentEle","exceptionDateList","followEvent","newRecurrenceRule","ruleException","getUpdatedRecurrenceRule","splitRule","updatedRule","splitRule_1","ruleKey","ruleValue","event_8","WorkCellInteraction","onHover","navigateView","sameView","viewOptions","isWorkCell_1","cellDblClick","hoverTarget","hoverArgs","__extends$11","__decorate$8","FieldOptions","__extends$10","__decorate$7","Field","__extends$9","__decorate$6","EventSettings","__extends$12","__decorate$9","Group","__extends$13","__decorate$10","Resources","ResourceBase","leftPixel","renderResourceHeaderIndent","resColTd","resColDiv","headerIndentTemplate","renderHeaderIndentTemplate","hideResourceRows","tBody","trCount","ClassName","expandedField","trCollection","slicedCollection","Count","createResourceColumn","resColl","resDiv","tbl","createTableLayout","generateTreeData","countCalculation","setExpandedResources","setRenderedResources","isExpanded","resRows","rIndex","tabindex","ntd","iconDiv","setMargin","onTreeIconClick","setResourceHeaderContent","resourceHeaderTemplate","classCollection","ntr","marginLeft","marginRight","parentCollection","wholeCollection","totalCount","z","trElement","eventElements","eventElements_1","updateVirtualContent","refreshEvents","rowCollection","workCellCollection","headerRowCollection","pNode","clickedRes","clonedCollection","expanded","trElem","sIndex","virtualTrack","resTable","contentTable","eventTable","renderResourceHeader","resourceWrapper","renderResourceHeaderText","menuClick","renderResourceTree","popupOverlay","treeWrapper","resourceTree","treeViewObj","child","nodeTemplate","nodeClicked","resourceClick","created","resourceTreeCreated","expandAll","treePopup","portals","isTimeLine","treeCollection","resTreeColl","treeHandler","treeLevel","levelId","treeArgs","resourceName","resourceChild","tree","resourceTreeLevel","headerCollection","resourceLevel","levelIcon","headerWrapper","headerCollection_1","treeNodes","selectResourceByIndex","triggerEvents","renderModule","bindResourcesData","isSetModel","promises","Promise","all","resourceObj","getResourceModel","refreshLayout","startHourField","endHourField","cssClassField","renderElements","setResourceCollection","requiredResources","colorIndex","requiredResources_1","resourceColorField","generateResourceLevels","innerDates","resTreeGroup","lastColumnDates","prevResource","prevResourceData","prevOrder","resTree","dateCol","resWorkDays","resStartHour","resEndHour","getDateSlots","dateSlots","generateCustomHours","resCssClass","resourceLevelIndex","generateHeaderLevels","dateSlots_1","dateSlot","headerDates","headerLevels","currentLevelChilds","currentLevelChilds_1","currentLevelChild","nextLevelChilds","_c","nextLevelChilds_1","nextLevelChild","_d","_e","lastLevelResource","dateHeaderLevels","datesColumn","headerDate","this_3","currentDateLevels","resTd_1","filterDates","currentLevel","filteredResource","existedResource","filteredTd","_f","headerDates_1","unshift","dateColSpan","_g","_h","firstRowTd","_j","headerDates_2","resGroup","_k","_l","resTd","colorFieldIndex","filterData","getResourceRenderDates","resourceDates","removeDuplicateDates","dateColl","groupEditIndex","groupEditIndex_1","length_4","addResource","_loop_6","addObj","removeResource","_loop_7","removeObj","state_2","resourceExpand","resourceScroll","scrollElement","offsetTarget","treeViewTemplates","propName","resToolBarEle","Schedule","addClasses","allowMultiDrag","cssClass_1","cls_1","validateDate","scrollModule","workCellAction","initializeDataModule","renderTableContainer","getActiveViewOptions","initializeResources","wireEvents","callback","isReact","renderReactTemplates","isAngular","clearTemplate","isLayoutOnly","initializeView","destroyHeaderModule","showHeaderBar","isTouch","scheduleTouchModule","destroyPopups","initializePopups","getViewIndex","checkIndex","setViewOptions","isModuleLoad","selectedView","prevIndex","isOptions","isSelected","fieldViewName","cellHeaderTemplateName","cellHeaderTemplate","dateHeaderTemplateName","dateHeaderTemplate","cellTemplateName","cellTemplate","dayHeaderTemplateName","dayHeaderTemplate","monthHeaderTemplateName","monthHeaderTemplate","resourceHeaderTemplateName","headerIndentTemplateName","currentIndex","majorSlotTemplate","minorSlotTemplate","isYearView","scheduleOptions","template","firstMonthOfYear","monthsCount","internalTimeFormat","viewsData","setEditorTitles","initializeTemplates","cellHeaderTemplateFn","templateParser","dayHeaderTemplateFn","monthHeaderTemplateFn","cellTemplateFn","dateHeaderTemplateFn","dateRangeTemplateFn","majorSlotTemplateFn","minorSlotTemplateFn","appointmentTemplateFn","resourceHeaderTemplateFn","headerIndentTemplateFn","headerTooltipTemplateFn","eventTooltipTemplateFn","editorTemplateFn","quickInfoTemplatesHeaderFn","quickInfoTemplatesContentFn","quickInfoTemplatesFooterFn","getDayNames","culShortNames","setCldrTimeFormat","getDateTime","setCalendarMode","muteOnChange","previousView","navigationArgs","isInitial","animateLayout","monthAgendaDate","timingFunction","requiredModules","modules","member","allowDragAndDrop","getDefaultLocale","workWeek","agenda","weekAgenda","workWeekAgenda","monthAgenda","today","noEvents","emptyContainer","allDay","more","noTitle","deleteMultipleEvent","selectedItems","deleteSeries","edit","editSeries","editEvent","createEvent","addTitle","moreDetails","save","editContent","deleteContent","deleteMultipleContent","newEvent","recurrence","wrongPattern","seriesChangeAlert","createError","sameDayAlert","occurenceAlert","editRecurrence","repeats","startEndError","invalidDateError","blockAlert","ok","yes","no","series","previous","next","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","timelineYear","editFollowingEvent","deleteTitle","editTitle","beginFrom","endAt","expandAllDaySection","collapseAllDaySection","searchTimezone","noRecords","onScheduleResize","touchStartEvent","onDocumentClick","isPreventScroll","cells_1","isAllDayCell","dateInMS","getTargetElement","targetElement","getCellHeaderTemplate","getDayHeaderTemplate","getMonthHeaderTemplate","getCellTemplate","getDateHeaderTemplate","getMajorSlotTemplate","getMinorSlotTemplate","getResourceHeaderTemplate","getHeaderIndentTemplate","cssProps","border","padding","rtlBorder","rtlPadding","eventClone","startEndTime","startEndDate","highlightCurrentTime","resetColWidth","trim","constantText","startDateText","endDateText","announcementString","autoScrollDistance","scrollEdges","viewBoundaries","pageYOffset","pageXOffset","getWeekNumberContent","weekNumber","weekRule","weekNumberDate","weekFirstDate","weekLastDate","weekMidDate","indentTemplate","isRefresh","isResource","isDate","isView","isLayout","isDataManager","setRtlClass","extendedPropertyChange","propertyChangeAction","allDayRowScrollUpdate","onEventSettingsPropertyChanged","onGroupSettingsPropertyChanged","setWorkHours","getWorkHourCells","resetWorkHours","workHourCells","viewStartHour","viewEndHour","msMajorInterval","tempStartIndex","tempEndIndex","tds","tdCol","firstTd","lastTd","endDateFromColSpan","getEndDateFromStartDate","getResourceCollections","setResourceCollections","resourceCol","changeCurrentView","getCurrentViewIndex","getResourcesByIndex","groupData","expandResource","collapseResource","scrollTo","hour","scrollDate","scrollToDate","scrollToHour","scrollToResource","groupName","exportToICalendar","fileName","customData","iCalendarExportModule","initializeCalendarExport","importICalendar","fileContent","iCalendarImportModule","initializeCalendarImport","generateEventOccurrences","exportToExcel","excelExportOptions","excelExportModule","initializeExcelExport","printOptions","printModule","getEvents","includeOccurrences","getBlockEvents","eventID","getCurrentViewEvents","isRemoteRefresh","refreshTemplates","refreshHeader","refreshResourceHeader","isSlotAvailable","closeEditor","openQuickInfoPopup","getAdjustedDate","selectEvent","occurence","closeQuickInfoPopup","closeTooltip","modules_1","ActionBase","daysVariation","slotInterval","actionIndex","cloneElement","originalElement","excludeSelectors","navigationInterval","scrollInterval","scrollArgs","resizeEdges","getChangedData","multiData","getOriginalElement","indexCol_1","cloneIndex_1","saveChangedData","isMultiSelect","eventsCollection","selectedData","eventsCollection_1","isSameResource","eveId","calculateIntervalTime","intervalTime","getContentAreaDimension","viewElement","getResourceElements","leftOffset","rightOffset","viewDimension","contentElements","indexes","minIndex","groupElements","updateTimePosition","timeElement","wrapperClass","offsetValue","rightValue","leftValue","isMorePopup","createCloneElement","cloneWrapper","outerHTML","cloneClassLists","dragElement","eventDragArea","removeCloneElementClasses","removeCloneElement","dynamicEle","dynamicEle_1","cloneEle","getCursorElement","pages","autoScroll","yIsScrollable","xIsScrollable","tdCollections","scrollBy","autoScrollValidation","actionClass","updateScrollPosition","scrollEventArgs","setInterval","updateDraggingDateTime","updateResizingDirection","timeDelay","updateOriginalElement","eventWrappers","getUpdatedEvent","parse","dynamicYearlyEventsRendering","isResize","yearEvent","renderDynamicElement","dynamicEventsRendering","renderedResource","eventWrappers_1","__extends$14","Resize","resizeElement","resizeElement_1","element_1","resizeHelper","resizeTarget","resizeArgs","resizeEventArgs","hRows","tdCollections_1","trRect","touchMoveEvent","touchEndEvent","doc","documentElement","clientLeft","clientTop","monthResizing","resizeValidation","leftStyles","getLeftRightStyles","horizontalResizing","rightStyles","topStyles","getTopBottomStyles","verticalResizing","bottomStyles","resizeTime","isSameCell","yearEventsRendering","monthDiff","getMonthDiff","getEventCount","monthStart","monthEnd","clearInterval","isDateHeader","headerName","isTimeViews","isTimelineMonth","isWithoutScale","isLastCell","pixelsPerMinute","tdCollections_2","cellOffsetWidth","resizeDate","spanMinutes","cloneIndex","originalWidth","isNotHourSlot","isTimeScaleViews","resizeEnd","clnHeight","clnTop","pageWidth","targetWidth","cloneWidth","isTimeScale","__extends$16","EVENT_GAP$2","YearEvent","yearViewEvents","removeCellHeight","timelineResourceEvents","timelineYearViewEvents","getMonths","months_1","cellHeader","wrapperCollection","isSpannedCollection","wrapper_1","rowTd","dayStart","dayEnd","dayEvents","updateSpannedEvents","overlapIndex","availedHeight","moreIndicatorCount","isRendered","MoreIndicator","moreIndex","renderMoreIndicator","renderEvent","appContainer","tr_1","overlap","isLeftRightResize","isVerticalScrollbarAvail","renderResourceEvent","removeProperty","conTable_1","tr_2","appWrapper","appWrap","right_1","eventDatas","createEventElement","rowTr","locationEle","startTimeEle","endTimeEle","yearStart","yearEnd","updateSpannedEventDetails","originalStartTime","originalEndTime","viewStart","viewEnd","dateStart","dateEnd","appStart","appEnd","timeCondition","__extends$15","MINUTES_PER_DAY","DragAndDrop","widthUptoCursorPoint","heightUptoCursorPoint","cursorPointIndex","isHeaderRows","isTimelineDayProcess","widthPerMinute","heightPerMinute","minDiff","isStepDragging","isMorePopupOpened","isAllDayDrag","updatedData","swagData","isAllDayTarget","targetTd","isCursorAhead","abort","isDragScroll","enableTapHold","enableTailMode","cursorAt","dragArea","enableAutoScroll","helper","dragHelper","queryPositionInfo","dragPosition","setDragActionDefaultValues","cursor","cloneRight","contentWrapRight","pointerEvents","cloneBottom","eventGuid","dragArgs","getSelectedData","navigation","dragEventArgs","dragObj","intDestroy","timelineEventModule","splitEvents","appEle","calculateMinutesDiff","updateNavigatingPosition","isAllowDrop","currentGroupIndex","currentDate_1","crtDate","viewNavigation","morePopupEventDragging","calculateTimelineTime","calculateVerticalDate","calculateVerticalTime","outerWrapperCls","targetWrapper","elementHeight","getAllDayEventHeight","outWrapper","tarWrapper_1","navigationType","dragStart$$1","dragEnd","eventContainer","appendCloneElement","swapDragging","trCollections","getEventWrapper","updateAllDayEvents","dynamicWrappers","dynamicWrappers_1","targetCellTime_1","startTimeDiff","index_2","updateMultipleData","updateEventHeight","startReferenceDate","endReferenceDate","timeDifference","endTimeDiff","differInDays","datesCount","indexGroup","dynamicIndex","filterQuery","renderSpannedEvents","timeDiff","allDayDifference","allDayElement_1","tagName","updateMultipleVerticalDate","trunc","getOffsetValue","getColumnIndex","cursorDrag","leftVal","cursorIndex","getCursorCurrentIndex","widthDiff","getWidthDiff","eventSrt","dataIndex","events_2","calculateResourceGroupingPosition","viewEle","targetLeft","dateLength","scrollY","cursorElement","dropSelectors","dropSelectors_1","ViewBase","previousNextAction","lastElementChild","getDayName","getTimelineDate","createEventTable","collapseRows","setAriaAttributes","createColGroup","lastRow","prev","colGroupEle","getScrollXIndent","scrollTopPanel","getDatesHeaderElement","scrollHeaderLabels","headerTable","colWidth","applyLeft","headerCells","isRtl","tdLeft","hiddenLeft","headerCells_2","classNames_1","headerCells_1","addAttributes","getHeaderBarHeight","headerBarHeight","resHeader","panel","generateColumnLevels","isCurrentDate","isCurrentMonth","isWorkDay","isWorkHour","agendaDaysCount","weekLength","viewStr","formatDateRange","formattedStr","longDateFormat","toLocaleLowerCase","getMobileDateElement","tdElement","quickTemplate","renderResourceMobileLayout","addAutoHeightClass","getColElements","setColWidth","colElements","contentBody","colWidth_1","resourceColumn","headerCellElements","headerCellColSpan","colElements_1","getContentAreaElement","wireExpandCollapseIconEvents","treeIcons","treeIcons_1","icon","scrollWrap","setPersistence","retainScrollPosition","getViewStartDate","getViewEndDate","resetColLevels","renderedCount","__extends$18","VerticalView","baseCssClass","appointment","onContentScroll","scrollLeftPanel","onAdaptiveMove","onAdaptiveScroll","leftPanel","getLeftPanelElement","timeCells","getScrollableElement","scrollerHeight","setContentHeight","scrollBarWidth","isDateHeaderScroll","scrollToWorkHour","leftPanelElement","highlight","firstWorkHourCell","headerElement","getTopFromDateTime","columnLevels","workStartHour","workEndHour","isWorkHourRange","showTimeIndicator","currentDateIndex","getCurrentTimeIndicatorIndex","changeCurrentTimePosition","currentTimeIndicatorTimer","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","removeCurrentTimeIndicatorElements","timeIndicator_1","firstRow","topInPx","timeCellsWrap","timeTrs","curTimeWrap","currentDateIndex_1","currentTimeEle","getWorkCellHeight","getTdContent","cntEle","clsList","renderContent","dateTd","renderDatesHeader","indentTd","renderLeftIndent","workTd","scrollContainer","renderTimeCells","renderContentArea","timesTd","trEle","rowCount","nth","ntr_1","data_1","createTd","appointmentExpandCollapse","createAllDayRow","wireCellEvents","wireMouseEvents","handler","getTimeSlotRows","renderContentTable","renderContentTableHeader","createContentTd","getContentTdClass","cellDate","args_1","msStartHour","msEndHour","timeOffset","majorTickDivider","middle","timeSlots","contentScrollableEle","__extends$17","Day","__extends$19","Week","__extends$20","WorkWeek","__extends$21","Month","dayNameFormat","monthDates","onScrollUIUpdate","onDataReady","onCellClick","scrollToSelectedDate","headerCell","levels_1","getDayNameFormat","renderWeekNumberContent","contentArea","monthAgendaWrapper","renderAppointmentContainer","contentWrapper","contentWrapTable","createWeekNumberElement","createHeaderCell","getContentSlots","slotDatas","prepareSlots","renderDate","includeResource","colDates","colDates_1","colDate","resourcesTd","out_j_1","updateClassList","isOtherMonth","updateSelectedCellClass","trows","renderDateHeaderElement","announcementText","getMonthStart","useDisplayDate","isCustomRange","getMonthEnd","numberOfDays","lastWeekOfMonth","updateCustomRange","isUpdateDateRange","monthNames","__extends$22","Year","yearEventModule","viewTypeClass","calendarTable","calendarTBody","getRowColumnCount","columnCount","cTr","cTd","calendarWrapper","currentMonth","calendarElement","renderCalendarHeader","renderCalendarContent","headerContent","getMonthName","getMonthDates","currentWeek","th","weekDates","weekDates_1","span","createTableColGroup","parseDate","monthDaysCount","months_2","fn","tName","vName","isPrevious","activeDate","inRange","moreEventArgs","scrollTopSelector","scrollTopElement","onScrollUiUpdate","leftPanelSelector","isYScroll","contentScroll","__extends$24","AgendaBase","createAgendaContentElement","listData","aTd","listElement","createList","moduleName","listClass","itemClass","listElements","li","templateEle","createAppointment","appSubjectWrap","appSubjectText","strDate","allDayStr","milliSeconds","eventString","displayStr","appDateTime","processAgendaEvents","spanned","wireEventActions","eventElement_1","dateHeaderElement","dateHeaderElement_1","dayNavigationClick","calculateResourceTableElement","agendaDate","agendaLastDate","lastLevelInfo","tempLastLevelInfo","tempIndex","finalDate","agendaCollection","hideEmptyAgendaDays","resDataCollection","resDayCollection","rowSpan","topResources","tempGroupedData","totalRowSpan","u","createResourceTableRow","totalCollection","renderEmptyContent","tContent","tContentCollection","w","rowSpanCollection","createDateHeaderElement","eTr","createTableRowElement","eTd","dTd","__extends$23","Agenda","agendaDates","virtualScrollTop","eventLoad","renderInitialContent","refreshEvent","refreshDate","emptyTBody","contentChild","emptyTBody_1","isObject","appointmentFiltering","updateHeaderText","nTr","agendaScrolling","totalHeight","topElement","getElementFromScrollerPosition","filterDate","getPreviousNextDate","scrollToValue","filterElement","liCollection","liDetails","getStartDateFromEndDate","onAgendaScrollUiUpdate","__extends$25","MonthAgenda","wrapperContainer","appendAppContainer","setEventWrapperHeight","availHeight","contentAreaHeight","appContainerHeight","clearElements","agendaBase","getAgendaBase","onEventRender","appointmentIndicators","appointmentIndicators_1","appointmentIndicator","navigateDate","TimelineHeaderRow","groupByYear","groupByMonth","dates_2","groupByWeek","dates_3","jsDate","generateSlots","colspan","cls","dateParser","tdDatas","htmlCol","viewTemplate","hourSlots","lastLevelColspan","byYear","byMonth","byWeek","__extends$26","TimelineViews","timelineAppointment","currDateTime","getWorkCellWidth","getLeftFromDateTime","generateTimeSlots","renderGn","timeSlotData","tempTimeSlots","tempTimeSlots_1","headerWrap","diffInDates","getRowCount","getResourceTdData","resLevel","resSHr","resEHr","__extends$27","TimelineMonth","contentTr","contentTd","__extends$28","TimelineYear","leftHeaderCells","isHorizontal","innerTr","dayHeaderDates","innerTd","renderDayMonthHeaderTemplate","colData","count_1","tdCollection","monthTBody","monthWrapper","contentTBody","addClassTable","renderResourceContent","renderDefaultContent","monthBody","monthTr","monthTd","isDateAvail","dayDate","renderCellTemplate","tRow","monthCells","tdELe","dayId","monthId","ICalendarExport","icsString","getCalendarString","download","SEPARATOR","appVersion","iCalendarEvents","filterCollection","uId","editedExDate","UID","editedObj","startZone","endZone","calendarEvent","convertDateToString","customFields","customFieldFilter","customField","iCalendar","defaultFields","eventDate","buffer","Blob","msSaveBlob","downloadLink_1","createElementNS","href","URL","createObjectURL","initEvent","dispatchEvent","revokeObjectURL","ICalendarImport","fileReader_1","FileReader","onload","iCalString","iCalendarParser","readAsText","calArray","RegExp","isEvent","curEvent","dateParsing","processOccurrence","appoint","appointmentIds","exdate","getExcludeDateString","occurrenceException","parentExDate","childExDate","getDateString","newDate","exec","ExcelExport","exportColumns","getExportColumns","exportName","exportType","isIncludeOccurrences","separator","processWorkbook","columns","columnHeader","fontSize","borders","bold","columnData","n","columnRule","styleRule","numberFormat","workSheet","book","worksheets","exportOptions","fieldsInfo","Print","printScheduler","printSchedulerWithModel","scrollableEle","links","getElementsByTagName","reference","links_1","link","elementWidth","printWindow","write","ready","headerTimeCellsScroll","timeCellsScroll","Inject","printInstance","getPrintScheduleModel","outerHeight","outerWidth","moveTo","resizeTo","screen","availWidth","printModel","scheduleProps","scheduleTemplates","scheduleEvents","scheduleProps_1","assign","onbeforeunload"],"sources":["D:/Primary files/Hims UI/node_modules/@syncfusion/ej2-schedule/dist/es6/ej2-schedule.es5.js"],"sourcesContent":["import { Animation, Browser, ChildProperty, Collection, Complex, Component, Draggable, Event, EventHandler, HijriParser, Internationalization, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, classList, cldrData, closest, compile, createElement, detach, extend, formatUnit, getDefaultDateObject, getElement, getValue, isNullOrUndefined, prepend, print, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, Tooltip, createSpinner, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Toolbar, TreeView } from '@syncfusion/ej2-navigations';\nimport { Calendar, DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { DataManager, Deferred, Predicate, Query } from '@syncfusion/ej2-data';\nimport { Button, CheckBox, RadioButton } from '@syncfusion/ej2-buttons';\nimport { FormValidator, Input, NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\n\n/**\n * Constants\n */\n/** @private */\nvar cellClick = 'cellClick';\n/** @private */\nvar cellDoubleClick = 'cellDoubleClick';\n/** @private */\nvar moreEventsClick = 'moreEventsClick';\n/** @private */\nvar select = 'select';\n/** @private */\nvar hover = 'hover';\n/** @private */\nvar actionBegin = 'actionBegin';\n/** @private */\nvar actionComplete = 'actionComplete';\n/** @private */\nvar actionFailure = 'actionFailure';\n/** @private */\nvar navigating = 'navigating';\n/** @private */\nvar renderCell = 'renderCell';\n/** @private */\nvar eventClick = 'eventClick';\n/** @private */\nvar eventRendered = 'eventRendered';\n/** @private */\nvar dataBinding = 'dataBinding';\n/** @private */\nvar dataBound = 'dataBound';\n/** @private */\nvar popupOpen = 'popupOpen';\n/** @private */\nvar popupClose = 'popupClose';\n/** @private */\nvar dragStart = 'dragStart';\n/** @private */\nvar drag = 'drag';\n/** @private */\nvar dragStop = 'dragStop';\n/** @private */\nvar resizeStart = 'resizeStart';\n/** @private */\nvar resizing = 'resizing';\n/** @private */\nvar resizeStop = 'resizeStop';\n/** @private */\nvar inlineClick = 'inlineClick';\n/** @private */\nvar cellSelect = 'cellSelect';\n/**\n * Specifies schedule internal events\n */\n/** @private */\nvar initialLoad = 'initial-load';\n/** @private */\nvar initialEnd = 'initial-end';\n/** @private */\nvar print$1 = 'print';\n/** @private */\nvar dataReady = 'data-ready';\n/** @private */\nvar eventsLoaded = 'events-loaded';\n/** @private */\nvar contentReady = 'content-ready';\n/** @private */\nvar scroll = 'scroll';\n/** @private */\nvar virtualScroll = 'virtual-scroll';\n/** @private */\nvar scrollUiUpdate = 'scroll-ui-update';\n/** @private */\nvar uiUpdate = 'ui-update';\n/** @private */\nvar documentClick = 'document-click';\n/** @private */\nvar cellMouseDown = 'cell-mouse-down';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Schedule common utilities\n */\nvar WEEK_LENGTH = 7;\nvar DEFAULT_WEEKS = 6;\nvar MS_PER_DAY = 86400000;\nvar MS_PER_MINUTE = 60000;\n/**\n * Method to get height from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @returns {number} Returns the height of the element\n */\nfunction getElementHeightFromClass(container, elementClass) {\n    var height = 0;\n    var el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    height = el.getBoundingClientRect().height;\n    remove(el);\n    return height;\n}\n/**\n * Method to get width from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @returns {number} Returns the width of the element\n */\nfunction getElementWidthFromClass(container, elementClass) {\n    var width = 0;\n    var el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    width = el.getBoundingClientRect().width;\n    remove(el);\n    return width;\n}\n/**\n * Method to get translateY value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateY value of given element\n */\nfunction getTranslateY(element) {\n    var style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\n/**\n * Method to get translateX value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateX value of given element\n */\nfunction getTranslateX(element) {\n    var style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m41 : 0;\n}\n/**\n * Method to get week first date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nfunction getWeekFirstDate(date, firstDayOfWeek) {\n    var date1 = new Date(date.getTime());\n    firstDayOfWeek = (firstDayOfWeek - date1.getDay() + 7 * (-1)) % 7;\n    return new Date(date1.setDate(date1.getDate() + firstDayOfWeek));\n}\n/**\n * Method to get week last date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nfunction getWeekLastDate(date, firstDayOfWeek) {\n    var weekFirst = getWeekFirstDate(date, firstDayOfWeek);\n    var weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);\n    return new Date(weekLast.getTime());\n}\n/**\n * Method to get first date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nfunction firstDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n/**\n * Method to get last date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nfunction lastDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\n/**\n * Method to get week number\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the week number\n */\nfunction getWeekNumber(date) {\n    var date1 = new Date(date.getFullYear(), 0, 1).valueOf();\n    var currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate()).valueOf();\n    var dayOfYear = ((currentDate - date1 + MS_PER_DAY) / MS_PER_DAY);\n    return Math.ceil(dayOfYear / 7);\n}\n/**\n * Method to get week middle date\n *\n * @param {Date} weekFirst Accepts the week first date object\n * @param {Date} weekLast Accepts the week last date object\n * @returns {Date} Returns the date object\n */\nfunction getWeekMiddleDate(weekFirst, weekLast) {\n    return new Date(weekLast.valueOf() - ((weekLast.valueOf() - weekFirst.valueOf()) / 2));\n}\n/**\n * Method to set time to date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} time Accepts the milliseconds\n * @returns {Date} Returns the date object\n */\nfunction setTime(date, time) {\n    var tzOffsetBefore = date.getTimezoneOffset();\n    var d = new Date(date.getTime() + time);\n    var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n    date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n    return date;\n}\n/**\n * Method the reset hours in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nfunction resetTime(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n/**\n * Method to get milliseconds from date object\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the milliseconds from date object\n */\nfunction getDateInMs(date) {\n    var localOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();\n    var dateOffset = date.getTimezoneOffset();\n    var timezoneOffset = dateOffset - localOffset;\n    return ((date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime())\n        - (timezoneOffset * 60 * 1000));\n}\n/**\n * Method to get date count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the date count\n */\nfunction getDateCount(startDate, endDate) {\n    return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to add no of days in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfDays Accepts the number of days count\n * @returns {Date} Returns the date object\n */\nfunction addDays(date, noOfDays) {\n    date = new Date('' + date);\n    return new Date(date.setDate(date.getDate() + noOfDays));\n}\n/**\n * Method to add no of months in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfMonths Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nfunction addMonths(date, noOfMonths) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setMonth(date.getMonth() + noOfMonths);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to add no of years in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfYears Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nfunction addYears(date, noOfYears) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setFullYear(date.getFullYear() + noOfYears);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to get start and end hours\n *\n * @param {Date} date Accepts the date object\n * @param {Date} startHour Accepts the start hour date object\n * @param {Date} endHour Accepts the end hour date object\n * @returns {Object} Returns the start and end hour date objects\n */\nfunction getStartEndHours(date, startHour, endHour) {\n    var date1 = new Date(date.getTime());\n    date1.setHours(startHour.getHours());\n    date1.setMinutes(startHour.getMinutes());\n    date1.setSeconds(startHour.getSeconds());\n    var date2 = new Date(date.getTime());\n    if (endHour.getHours() === 0) {\n        date2 = addDays(date2, 1);\n    }\n    else {\n        date2.setHours(endHour.getHours());\n        date2.setMinutes(endHour.getMinutes());\n        date2.setSeconds(endHour.getSeconds());\n    }\n    return { startHour: date1, endHour: date2 };\n}\n/**\n * Method to get month last date\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the month last date\n */\nfunction getMaxDays(date) {\n    return lastDateOfMonth(date).getDate();\n}\n/**\n * Method to get days count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the days count\n */\nfunction getDaysCount(startDate, endDate) {\n    var strTime = resetTime(new Date(startDate));\n    var endTime = resetTime(new Date(endDate));\n    return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to get date object from date string\n *\n * @param {string} date Accepts the date string\n * @returns {Date} Returns the date object\n */\nfunction getDateFromString(date) {\n    return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) :\n        date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/**\n * Method to get scrollbar width\n *\n * @returns {number} Returns the scrollbar width\n * @private\n */\nfunction getScrollBarWidth() {\n    var divNode = createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    var ratio = (devicePixelRatio) ? (devicePixelRatio.toFixed(2) === '1.10' || devicePixelRatio <= 1) ?\n        Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;\n    value = (divNode.offsetWidth - divNode.clientWidth - ratio) | 0;\n    document.body.removeChild(divNode);\n    return value;\n}\n/**\n * Method to find the index from data collection\n *\n * @param {Object} data Accepts the data as object\n * @param {string} field Accepts the field name\n * @param {string} value Accepts the value name\n * @param {Object} event Accepts the data as object\n * @param {Object[]} resourceCollection Accepts the data collections\n * @returns {number} Returns the index number\n */\n// eslint-disable-next-line max-len\nfunction findIndexInData(data, field, value, event, resourceCollection) {\n    for (var i = 0, length_1 = data.length; i < length_1; i++) {\n        if (data[parseInt(i.toString(), 10)][\"\" + field] === value) {\n            if (event) {\n                var field_1 = resourceCollection.slice(-2)[0].field;\n                var res = (event[\"\" + field_1] instanceof Array ? event[\"\" + field_1] : [event[\"\" + field_1]]);\n                var resData = res.join(',');\n                if (resData.includes(data[parseInt(i.toString(), 10)][resourceCollection.slice(-1)[0].groupIDField])) {\n                    return i;\n                }\n            }\n            else {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n/**\n * Method to get element outer height\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @returns {number} Returns the outer height of the given element\n */\nfunction getOuterHeight(element) {\n    var style = getComputedStyle(element);\n    return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\n/**\n * Method to remove child elements\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {void}\n */\nfunction removeChildren(element) {\n    var elementChildren = [].slice.call(element.children);\n    for (var _i = 0, elementChildren_1 = elementChildren; _i < elementChildren_1.length; _i++) {\n        var elementChild = elementChildren_1[_i];\n        element.removeChild(elementChild);\n    }\n}\n/**\n * Method to check DST is present or not in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {boolean} Returns the boolean value for either DST is present or not\n */\nfunction isDaylightSavingTime(date) {\n    var jan = new Date(date.getFullYear(), 0, 1);\n    var jul = new Date(date.getFullYear(), 6, 1);\n    return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n}\n/**\n * Method to get UTC time value from date\n *\n * @param {Date} date Accepts the date\n * @returns {number} Returns the UTC time value\n */\nfunction getUniversalTime(date) {\n    var year = date.getFullYear();\n    var month = date.getMonth();\n    var day = date.getDate();\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var seconds = date.getSeconds();\n    var milliseconds = date.getMilliseconds();\n    return Date.UTC(year, month, day, hours, minutes, seconds, milliseconds);\n}\n/**\n * Method to check the device\n *\n * @returns {boolean} Returns the boolean value for either device is present or not.\n */\nfunction isMobile() {\n    return window.navigator.userAgent.toLowerCase().indexOf('mobi') > -1;\n}\n/**\n * Method to check the IPad device\n *\n * @returns {boolean} Returns the boolean value for either IPad device is present or not.\n */\nfunction isIPadDevice() {\n    return window.navigator.userAgent.toLowerCase().indexOf('ipad') > -1;\n}\n/**\n * Method to capitalize the first word in string\n *\n * @param {string} inputString Accepts the string value\n * @param {string} type Accepts the string type\n * @returns {string} Returns the output string\n */\nfunction capitalizeFirstWord(inputString, type) {\n    if (type === 'multiple') {\n        inputString = inputString.split(' ').map(function (e) { return e.charAt(0).toLocaleUpperCase() + e.substring(1); }).join(' ');\n    }\n    else if (type === 'single') {\n        if (inputString[0] >= '0' && inputString[0] <= '9') {\n            var array = inputString.match(/[a-zA-Z]/);\n            inputString = isNullOrUndefined(array) ? inputString :\n                inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);\n        }\n        inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);\n    }\n    return inputString;\n}\n\n/**\n * CSS Constants\n */\n/** @private */\nvar ROOT = 'e-schedule';\n/** @private */\nvar RTL = 'e-rtl';\n/** @private */\nvar DEVICE_CLASS = 'e-device';\n/** @private */\nvar MULTI_DRAG = 'e-multi-drag';\n/** @private */\nvar ICON = 'e-icons';\n/** @private */\nvar ENABLE_CLASS = 'e-enable';\n/** @private */\nvar DISABLE_CLASS = 'e-disable';\n/** @private */\nvar TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @private */\nvar SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @private */\nvar ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @private */\nvar HEADER_POPUP_CLASS = 'e-header-popup';\n/** @private */\nvar HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @private */\nvar ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @private */\nvar CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\nvar WORK_CELLS_CLASS = 'e-work-cells';\n/** @private */\nvar WORK_HOURS_CLASS = 'e-work-hours';\n/** @private */\nvar POPUP_OPEN = 'e-popup-open';\n/** @private */\n\n/** @private */\nvar DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @private */\nvar DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @private */\nvar HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\nvar HEADER_WEEK_CELLS_CLASS = 'e-header-week-cell';\n/** @private */\nvar HEADER_MONTH_CELLS_CLASS = 'e-header-month-cell';\n/** @private */\nvar HEADER_YEAR_CELLS_CLASS = 'e-header-year-cell';\n/** @private */\nvar WORKDAY_CLASS = 'e-work-days';\n/** @private */\nvar OTHERMONTH_CLASS = 'e-other-month';\n/** @private */\nvar CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nvar CURRENTDATE_CLASS = 'e-current-date';\n/** @private */\nvar CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @private */\nvar PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @private */\nvar NEXT_PANEL_CLASS = 'e-next-panel';\n/** @private */\nvar PREVIOUS_DATE_CLASS = 'e-prev';\n/** @private */\nvar NEXT_DATE_CLASS = 'e-next';\n/** @private */\nvar TRANSLATE_CLASS = 'e-translate';\n/** @private */\nvar LEFT_INDENT_CLASS = 'e-left-indent';\n/** @private */\nvar LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @private */\nvar EVENT_TABLE_CLASS = 'e-event-table';\n/** @private */\nvar RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @private */\nvar RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @private */\nvar RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @private */\nvar RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @private */\nvar RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @private */\nvar RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @private */\nvar RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @private */\nvar RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @private */\nvar RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @private */\nvar RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @private */\nvar RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @private */\nvar TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @private */\nvar TIME_CELLS_CLASS = 'e-time-cells';\n/** @private */\nvar TIME_SLOT_CLASS = 'e-time-slots';\n/** @private */\nvar ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @private */\nvar CURRENT_TIME_CLASS = 'e-current-time';\n/** @private */\nvar CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @private */\nvar PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @private */\nvar HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @private */\nvar SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @private */\n\n/** @private */\nvar TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @private */\nvar APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @private */\nvar DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @private */\nvar TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @private */\nvar RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @private */\nvar HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @private */\nvar RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @private */\nvar SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @private */\nvar WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @private */\nvar WEEK_NUMBER_CLASS = 'e-week-number';\n/** @private */\nvar APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @private */\nvar WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @private */\nvar APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @private */\nvar APPOINTMENT_CLASS = 'e-appointment';\n/** @private */\nvar BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @private */\nvar BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @private */\nvar APPOINTMENT_BORDER = 'e-appointment-border';\n/** @private */\nvar APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @private */\nvar SUBJECT_WRAP = 'e-subject-wrap';\n/** @private */\nvar RESOURCE_NAME = 'e-resource-name';\n/** @private */\nvar APPOINTMENT_TIME = 'e-time';\n/** @private */\nvar TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @private */\nvar OUTER_TABLE_CLASS = 'e-outer-table';\n/** @private */\nvar CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @private */\nvar VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @private */\nvar AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @private */\nvar AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nvar AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @private */\nvar MONTH_HEADER_CLASS = 'e-month-header';\n/** @private */\nvar AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @private */\nvar AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @private */\nvar AGENDA_DATE_CLASS = 'e-date-column';\n/** @private */\nvar NAVIGATE_CLASS = 'e-navigate';\n/** @private */\nvar DATE_HEADER_CLASS = 'e-date-header';\n/** @private */\nvar AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @private */\nvar DATE_BORDER_CLASS = 'e-date-border';\n/** @private */\nvar AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @private */\nvar DATE_TIME_CLASS = 'e-date-time';\n/** @private */\nvar DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @private */\nvar AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @private */\nvar AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @private */\nvar APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @private */\nvar EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @private */\nvar EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @private */\nvar EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @private */\nvar EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @private */\nvar EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @private */\nvar EVENT_ACTION_CLASS = 'e-event-action';\n/** @private */\nvar NEW_EVENT_CLASS = 'e-new-event';\n/** @private */\nvar CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @private */\nvar MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @private */\nvar CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @private */\nvar DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @private */\nvar EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @private */\nvar RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @private */\nvar LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @private */\nvar RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @private */\nvar TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @private */\nvar BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @private */\nvar EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @private */\nvar EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @private */\nvar HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\nvar ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @private */\nvar ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @private */\nvar EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @private */\nvar ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @private */\nvar ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @private */\nvar APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @private */\nvar APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @private */\nvar MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @private */\nvar CELL_POPUP_CLASS = 'e-cell-popup';\n/** @private */\nvar EVENT_POPUP_CLASS = 'e-event-popup';\n/** @private */\nvar MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @private */\nvar POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\nvar POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @private */\nvar POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\nvar POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @private */\nvar DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @private */\nvar RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @private */\nvar QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @private */\nvar EVENT_CREATE_CLASS = 'e-event-create';\n/** @private */\nvar EDIT_EVENT_CLASS = 'e-event-edit';\n/** @private */\nvar DELETE_EVENT_CLASS = 'e-event-delete';\n/** @private */\nvar TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @private */\nvar MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @private */\nvar MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @private */\nvar MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @private */\nvar MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @private */\nvar MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @private */\nvar MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @private */\nvar MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @private */\nvar MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @private */\nvar MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @private */\nvar QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @private */\nvar QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @private */\nvar QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @private */\nvar QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = 'e-quick-dialog-following-events';\n/** @private */\nvar FOLLOWING_EVENTS_DIALOG = 'e-following-events-dialog';\n/** @private */\nvar QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @private */\nvar QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @private */\nvar QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @private */\nvar QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @private */\nvar QUICK_DIALOG_ALERT_FOLLOWING = 'e-quick-alertfollowing';\n/** @private */\nvar QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @private */\nvar EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @private */\nvar FORM_CONTAINER_CLASS = 'e-form-container';\n/** @private */\nvar FORM_CLASS = 'e-schedule-form';\n/** @private */\nvar EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @private */\nvar EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @private */\nvar TIME_ZONE_CLASS = 'e-time-zone';\n/** @private */\nvar TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @private */\nvar TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @private */\nvar EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @private */\nvar EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @private */\nvar EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @private */\nvar SUBJECT_CLASS = 'e-subject';\n/** @private */\nvar LOCATION_CLASS = 'e-location';\n/** @private */\nvar LOCATION_ICON_CLASS = 'e-location-icon';\n/** @private */\nvar LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @private */\nvar EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @private */\nvar EVENT_WINDOW_START_CLASS = 'e-start';\n/** @private */\nvar EVENT_WINDOW_END_CLASS = 'e-end';\n/** @private */\nvar EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @private */\nvar DESCRIPTION_CLASS = 'e-description';\n/** @private */\nvar DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @private */\nvar DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @private */\nvar EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @private */\nvar EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @private */\nvar EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @private */\nvar EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @private */\nvar EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @private */\nvar EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @private */\nvar EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @private */\nvar EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @private */\nvar EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @private */\nvar EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nvar EDIT_CLASS = 'e-edit';\n/** @private */\nvar EDIT_ICON_CLASS = 'e-edit-icon';\n/** @private */\nvar DELETE_CLASS = 'e-delete';\n/** @private */\nvar DELETE_ICON_CLASS = 'e-delete-icon';\n/** @private */\nvar CLOSE_CLASS = 'e-close';\n/** @private */\nvar CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\nvar ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @private */\nvar EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @private */\nvar ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @private */\nvar TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @private */\nvar DISABLE_DATE = 'e-disable-date';\n/** @private */\nvar HIDDEN_CLASS = 'e-hidden';\n/** @private */\nvar DISABLE_DATES = 'e-disable-dates';\n/** @private */\nvar POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @private */\nvar POPUP_TABLE_CLASS = 'e-popup-table';\n/** @private */\nvar RESOURCE_MENU = 'e-resource-menu';\n/** @private */\nvar RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @private */\nvar RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @private */\nvar RESOURCE_TREE = 'e-resource-tree';\n/** @private */\nvar RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @private */\nvar RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @private */\nvar RESOURCE_CLASS = 'e-resource';\n/** @private */\nvar RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @private */\nvar RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @private */\nvar DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @private */\nvar VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @private */\nvar ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nvar AUTO_HEIGHT = 'e-auto-height';\n/** @private */\nvar IGNORE_WHITESPACE = 'e-ignore-whitespace';\n/** @private */\nvar EVENT_TEMPLATE = 'e-template';\n/** @private */\nvar READ_ONLY = 'e-read-only';\n/** @private */\nvar MONTH_HEADER_WRAPPER = 'e-month-header-wrapper';\n/** @private */\nvar INLINE_SUBJECT_CLASS = 'e-inline-subject';\n/** @private */\nvar INLINE_APPOINTMENT_CLASS = 'e-inline-appointment';\n/** @hidden */\nvar SCROLL_HIDDEN = 'e-scroll-hidden';\n/** @private */\nvar ALLDAY_APPOINTMENT_SCROLL = 'e-all-day-scroll';\n/** @private */\nvar ALLDAY_APPOINTMENT_AUTO = 'e-all-day-auto';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Header module\n */\nvar HeaderRenderer = /** @__PURE__ @class */ (function () {\n    function HeaderRenderer(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    HeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(documentClick, this.closeHeaderPopup, this);\n    };\n    HeaderRenderer.prototype.removeEventListener = function () {\n        this.parent.off(documentClick, this.closeHeaderPopup);\n    };\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n        var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n        var contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.parent.isAdaptive) {\n            if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') ||\n                closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') &&\n                this.element.querySelector('.e-toolbar-pop').classList.contains(POPUP_OPEN))) {\n                addClass([contentWrap], SCROLL_HIDDEN);\n            }\n            else {\n                removeClass([contentWrap], SCROLL_HIDDEN);\n                var popupEle = this.element.querySelector('.e-toolbar-pop');\n                if (!isNullOrUndefined(popupEle)) {\n                    var popupObj = popupEle.ej2_instances[0];\n                    if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') &&\n                        popupEle.classList.contains(POPUP_OPEN))) {\n                        popupObj.hide();\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    };\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    };\n    HeaderRenderer.prototype.renderHeader = function () {\n        this.element = createElement('div', { className: TOOLBAR_CONTAINER });\n        var toolbarEle = createElement('div', { className: HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    };\n    HeaderRenderer.prototype.renderToolbar = function () {\n        var _this = this;\n        var items = this.getItems();\n        this.parent.trigger(actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n            _this.toolbarObj = new Toolbar({\n                items: args.items,\n                overflowMode: 'Popup',\n                clicked: _this.toolbarClickHandler.bind(_this),\n                enableRtl: _this.parent.enableRtl,\n                enableHtmlSanitizer: _this.parent.enableHtmlSanitizer,\n                locale: _this.parent.locale\n            });\n            _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + HEADER_TOOLBAR));\n            var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n            if (prevNavEle) {\n                prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n            }\n            var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n            if (nextNavEle) {\n                nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n            }\n            _this.updateAddIcon();\n            _this.updateActiveView();\n            _this.parent.trigger(actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n        });\n    };\n    HeaderRenderer.prototype.updateItems = function () {\n        var _this = this;\n        if (this.toolbarObj) {\n            var items = this.getItems();\n            this.parent.trigger(actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n                _this.toolbarObj.items = args.items;\n                _this.toolbarObj.dataBind();\n                _this.parent.trigger(actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n            });\n        }\n    };\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    };\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.min = this.parent.minDate;\n            this.headerCalendar.max = this.parent.maxDate;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.getCalendarView = function () {\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n            return 'Year';\n        }\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    };\n    HeaderRenderer.prototype.setCalendarView = function () {\n        if (this.headerCalendar) {\n            var calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    };\n    HeaderRenderer.prototype.updateActiveView = function () {\n        var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    };\n    HeaderRenderer.prototype.updateDateRange = function (date) {\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (!selEle) {\n            return;\n        }\n        var textEle = selEle.querySelector('.e-tbar-btn-text');\n        if (this.parent.activeViewOptions.dateRangeTemplate) {\n            textEle.textContent = '';\n            var args = {\n                startDate: this.parent.activeView.getStartDate(),\n                endDate: this.parent.activeView.getEndDate(), currentView: this.parent.currentView\n            };\n            var viewName = this.parent.activeViewOptions.dateRangeTemplateName;\n            var templateId = this.parent.element.id + '_' + viewName + 'dateRangeTemplate';\n            var dateTemplate = [].slice.call(this.parent.getDateRangeTemplate()(args, this.parent, 'dateRangeTemplate', templateId, false));\n            append(dateTemplate, textEle);\n        }\n        else {\n            var text = this.parent.activeView.getDateRangeText(date);\n            selEle.firstElementChild.setAttribute('aria-label', text);\n            textEle.textContent = text;\n        }\n        this.refresh();\n    };\n    HeaderRenderer.prototype.refresh = function () {\n        if (this.toolbarObj) {\n            this.toolbarObj.refreshOverflow();\n        }\n    };\n    HeaderRenderer.prototype.updateAddIcon = function () {\n        var addEle = this.toolbarObj.element.querySelector('.e-add');\n        if (addEle) {\n            if (!this.parent.eventSettings.allowAdding) {\n                addClass([addEle], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([addEle], HIDDEN_CLASS);\n            }\n        }\n    };\n    HeaderRenderer.prototype.getDateRangeText = function () {\n        var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n            format: 'MMMM y', calendar: this.parent.getCalendarMode()\n        });\n        return capitalizeFirstWord(dateString, 'single');\n    };\n    HeaderRenderer.prototype.getItems = function () {\n        var items = [];\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev', htmlAttributes: { 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next', htmlAttributes: { 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show',\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'role': 'navigation' }\n        });\n        if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-add',\n                text: this.l10n.getConstant('newEvent'), cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-today',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-day',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n            if (this.parent.views.length > 1) {\n                items.push({ align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator' });\n            }\n        }\n        if (this.parent.views.length > 1) {\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n                var item = _a[_i];\n                items.push(this.getItemObject(item));\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItemObject = function (item) {\n        var viewName;\n        var displayName;\n        if (typeof (item) === 'string') {\n            viewName = item.toLowerCase();\n            displayName = null;\n        }\n        else {\n            viewName = item.option.toLowerCase();\n            displayName = item.displayName;\n        }\n        var view;\n        var orientationClass;\n        var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            case 'year':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-year',\n                    text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n                };\n                break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-agenda',\n                    text: displayName || this.l10n.getConstant('agenda'), cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month-agenda',\n                    text: displayName || this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n            case 'timelineyear':\n                orientationClass = (item.orientation === 'Vertical') ? 'vertical' : 'horizontal';\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\n                };\n                break;\n        }\n        return view;\n    };\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\n        var headerPopupEle = createElement('div', { className: HEADER_POPUP_CLASS });\n        var headerCalendarEle = createElement('div', { className: HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl\n        });\n        var calendarView = this.getCalendarView();\n        var isDisplayDate = this.parent.currentView === 'Month' &&\n            !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();\n        this.headerCalendar = new Calendar({\n            value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,\n            min: this.parent.minDate,\n            max: this.parent.maxDate,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.setCalendarTimezone();\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calendarChange = function (args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            var calendarDate = resetTime(new Date(args.value));\n            this.parent.changeDate(calendarDate);\n        }\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.setCalendarTimezone = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        }\n    };\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\n        var target = closest(args.originalEvent.target, '.e-views');\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    };\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n        if (!args.item) {\n            return;\n        }\n        var strClass = args.item.cssClass.replace('e-views ', '');\n        var data;\n        var isSameTime;\n        var currentTime;\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-year':\n                this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-year':\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                currentTime = resetTime(this.parent.getCurrentTime());\n                if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda' || !this.parent.isSelectedDate(currentTime) ||\n                    this.parent.currentView === 'Month' && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() &&\n                        resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === 'Month' &&\n                    this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate()\n                    && resetTime(firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {\n                    this.parent.changeDate(currentTime, args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n                break;\n            case 'e-add':\n                isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    var msInterval = (interval * MS_PER_MINUTE) / slotCount;\n                    var startTime = new Date(this.parent.selectedDate.getTime());\n                    var currentTime_1 = this.parent.getCurrentTime();\n                    startTime.setHours(currentTime_1.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        if (isNullOrUndefined(this.toolbarObj)) {\n            return;\n        }\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp && args.item.type !== 'Input') {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    };\n    HeaderRenderer.prototype.hasSelectedDate = function () {\n        var selectedTime = resetTime(this.parent.selectedDate).getTime();\n        return selectedTime >= this.parent.activeView.getStartDate().getTime() &&\n            selectedTime <= this.parent.activeView.getEndDate().getTime();\n    };\n    HeaderRenderer.prototype.getHeaderElement = function () {\n        return this.toolbarObj.element;\n    };\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            if (classType === 'add') {\n                addClass([prevNavEle], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([prevNavEle], HIDDEN_CLASS);\n            }\n        }\n        if (nextNavEle) {\n            if (classType === 'add') {\n                addClass([nextNavEle], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([nextNavEle], HIDDEN_CLASS);\n            }\n        }\n        if (dateRangeEle) {\n            if (classType === 'add') {\n                addClass([dateRangeEle], TEXT_ELLIPSIS);\n            }\n            else {\n                removeClass([dateRangeEle], TEXT_ELLIPSIS);\n            }\n        }\n    };\n    HeaderRenderer.prototype.previousNextIconHandler = function () {\n        var dates = (this.parent.currentView === 'Agenda' ?\n            [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates());\n        var prevNavEle = this.toolbarObj.element.querySelector('.' + PREVIOUS_DATE_CLASS);\n        var nextNavEle = this.toolbarObj.element.querySelector('.' + NEXT_DATE_CLASS);\n        var firstDate = new Date(dates[0].getTime());\n        var lastDate = new Date(dates[dates.length - 1].getTime());\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            firstDate = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n            lastDate = addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n        }\n        else if (this.parent.currentView === 'Month') {\n            var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) ||\n                this.parent.activeViewOptions.numberOfWeeks > 0;\n            firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : firstDateOfMonth(this.parent.selectedDate);\n            lastDate = isCustomMonth ? this.parent.activeView.getEndDate() :\n                lastDateOfMonth(addMonths(firstDate, this.parent.activeViewOptions.interval - 1));\n        }\n        if (!isNullOrUndefined(prevNavEle)) {\n            this.toolbarObj.enableItems(prevNavEle, firstDate > resetTime(this.parent.minDate));\n        }\n        if (!isNullOrUndefined(nextNavEle)) {\n            this.toolbarObj.enableItems(nextNavEle, lastDate < resetTime(this.parent.maxDate));\n        }\n        this.setCalendarMinMaxDate();\n    };\n    HeaderRenderer.prototype.getModuleName = function () {\n        return 'headerbar';\n    };\n    HeaderRenderer.prototype.destroy = function () {\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\n            this.headerPopup.destroy();\n            this.headerPopup = null;\n        }\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n            this.headerCalendar.destroy();\n            this.headerCalendar = null;\n        }\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n            this.toolbarObj = null;\n        }\n        this.element = null;\n        this.parent = null;\n        this.l10n = null;\n    };\n    return HeaderRenderer;\n}());\n\n/**\n * `Scroll` module\n */\nvar Scroll = /** @__PURE__ @class */ (function () {\n    /**\n     * Constructor for the scrolling.\n     *\n     * @param {Schedule} parent Accepts the Schedule instance\n     */\n    function Scroll(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} Returns the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * Internal method to set the element width\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n    };\n    /**\n     * Internal method to set the element height\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setHeight = function () {\n        this.parent.element.style.height = formatUnit(this.parent.height);\n    };\n    /**\n     * Internal method to bind events\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.addEventListener = function () {\n        this.parent.on(contentReady, this.setDimensions, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    /**\n     * Internal method to unbind events\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.removeEventListener = function () {\n        this.parent.off(contentReady, this.setDimensions);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    /**\n     * Internal method to set the dimensions\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setDimensions = function () {\n        this.setWidth();\n        this.setHeight();\n        var data = { cssProperties: this.parent.getCssProperties(), module: this.getModuleName() };\n        this.parent.notify(scrollUiUpdate, data);\n    };\n    /**\n     * Internal method to set the dimensions dynamically\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.onPropertyChanged = function () {\n        this.setDimensions();\n    };\n    /**\n     * Destroy the scroll module\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Scroll;\n}());\n\n/**\n * `touch` module is used to handle touch interactions.\n */\nvar ScheduleTouch = /** @__PURE__ @class */ (function () {\n    function ScheduleTouch(parent) {\n        this.parent = parent;\n        this.element = this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS);\n        this.touchObj = new Touch(this.element, {\n            scroll: this.scrollHandler.bind(this),\n            swipe: this.swipeHandler.bind(this),\n            tapHold: this.tapHoldHandler.bind(this),\n            swipeSettings: { swipeThresholdDistance: 1 }\n        });\n        EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n        this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n        this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n    }\n    ScheduleTouch.prototype.scrollHandler = function (e) {\n        if (this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action || !this.parent.allowSwiping ||\n            (e.originalEvent && e.originalEvent.target &&\n                (e.originalEvent.target.classList.contains(APPOINTMENT_CLASS) ||\n                    closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS)) && !this.parent.isAdaptive)) {\n            return;\n        }\n        if (!this.timeStampStart) {\n            this.timeStampStart = Date.now();\n        }\n        if (this.element.classList.contains(TRANSLATE_CLASS)) {\n            this.onTransitionEnd();\n        }\n        if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            var scrollDiv = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n                return;\n            }\n            else {\n                this.isScrollTriggered = true;\n                e.originalEvent.preventDefault();\n                e.originalEvent.stopPropagation();\n            }\n        }\n        if (e.scrollDirection === this.touchLeftDirection) {\n            if (!this.nextPanel) {\n                this.renderPanel(NEXT_PANEL_CLASS, 'next');\n                this.nextPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime()),\n                    renderDates: this.parent.activeView.renderDates,\n                    colLevels: this.parent.activeView.colLevels\n                };\n                this.setDimensions(this.nextPanel.element);\n            }\n            var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n        else if (e.scrollDirection === this.touchRightDirection) {\n            var prevWidth = 0;\n            if (!this.previousPanel) {\n                this.renderPanel(PREVIOUS_PANEL_CLASS, 'previous');\n                this.previousPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime()),\n                    renderDates: this.parent.activeView.renderDates,\n                    colLevels: this.parent.activeView.colLevels\n                };\n                this.setDimensions(this.previousPanel.element);\n                prevWidth = this.previousPanel.element.offsetWidth;\n            }\n            var x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n    };\n    ScheduleTouch.prototype.swipeHandler = function (e) {\n        if (!this.isScrollTriggered || this.parent.uiStateValues.action || !this.parent.allowSwiping) {\n            return;\n        }\n        this.isScrollTriggered = false;\n        var swipeDate = e.swipeDirection === 'Left' ?\n            this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];\n        if ((e.swipeDirection === 'Left' && swipeDate < this.parent.maxDate) ||\n            (e.swipeDirection === 'Right' && swipeDate >= this.parent.minDate)) {\n            var time = Date.now() - this.timeStampStart;\n            var offsetDist = (e.distanceX * (Browser.isDevice ? 6 : 1.66));\n            if (offsetDist > time || (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                this.swapPanels(e.swipeDirection);\n                if (offsetDist > time && (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                    this.element.style.transitionDuration = (((Browser.isDevice ? e.distanceX : offsetDist) / time) / 10) + 's';\n                }\n                this.confirmSwipe(e.swipeDirection);\n            }\n            else {\n                this.cancelSwipe();\n            }\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(actionComplete, args);\n        }\n        else {\n            this.cancelSwipe();\n        }\n        this.timeStampStart = null;\n    };\n    ScheduleTouch.prototype.tapHoldHandler = function (e) {\n        var target = closest(e.originalEvent.target, '.' + APPOINTMENT_CLASS);\n        if (!isNullOrUndefined(target) && this.parent.isAdaptive) {\n            this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n            return;\n        }\n    };\n    ScheduleTouch.prototype.renderPanel = function (clsName, nextPrevType) {\n        if (!this.currentPanel) {\n            this.currentPanel = {\n                element: this.parent.activeView.getPanel(),\n                selectedDate: new Date(this.parent.selectedDate.getTime()),\n                renderDates: this.parent.activeView.renderDates,\n                colLevels: this.parent.activeView.colLevels\n            };\n            this.setDimensions(this.currentPanel.element);\n        }\n        else {\n            this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        }\n        this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType) }, true);\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n        }\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.renderLayout(clsName);\n    };\n    ScheduleTouch.prototype.swapPanels = function (direction) {\n        if (direction === this.touchLeftDirection) {\n            var temp = this.nextPanel;\n            this.nextPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n        else {\n            var temp = this.previousPanel;\n            this.previousPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n    };\n    ScheduleTouch.prototype.confirmSwipe = function (swipeDirection) {\n        var _this = this;\n        var previousDate = swipeDirection === this.touchLeftDirection ?\n            this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n        var args = {\n            action: 'date', cancel: false, previousDate: previousDate, currentDate: this.currentPanel.selectedDate\n        };\n        this.parent.trigger(navigating, args, function (navArgs) {\n            if (navArgs.cancel) {\n                _this.swapPanels(swipeDirection);\n                _this.cancelSwipe();\n            }\n            else {\n                _this.parent.activeView.setPanel(_this.currentPanel.element);\n                _this.parent.setProperties({ selectedDate: _this.currentPanel.selectedDate }, true);\n                var translateX = void 0;\n                if (_this.parent.enableRtl) {\n                    translateX = swipeDirection === _this.touchLeftDirection ?\n                        (_this.previousPanel ? _this.previousPanel.element.offsetLeft : _this.currentPanel.element.offsetWidth) : 0;\n                }\n                else {\n                    translateX = swipeDirection === _this.touchLeftDirection ? -_this.currentPanel.element.offsetLeft : 0;\n                }\n                _this.parent.activeView.renderDates = _this.currentPanel.renderDates;\n                _this.parent.activeView.colLevels = _this.currentPanel.colLevels;\n                addClass([_this.element], TRANSLATE_CLASS);\n                _this.element.style.transform = 'translatex(' + translateX + 'px)';\n                if (_this.parent.headerModule) {\n                    _this.parent.headerModule.updateDateRange();\n                }\n                _this.parent.renderTemplates();\n                _this.parent.crudModule.refreshDataManager();\n            }\n        });\n    };\n    ScheduleTouch.prototype.cancelSwipe = function () {\n        this.parent.activeView.setPanel(this.currentPanel.element);\n        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        this.parent.activeView.renderDates = this.currentPanel.renderDates;\n        this.parent.activeView.colLevels = this.currentPanel.colLevels;\n        addClass([this.element], TRANSLATE_CLASS);\n        var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n        this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n    };\n    ScheduleTouch.prototype.onTransitionEnd = function () {\n        removeClass([this.element], TRANSLATE_CLASS);\n        this.element.style.transitionDuration = '';\n        this.element.style.transform = '';\n        if (this.previousPanel) {\n            remove(this.previousPanel.element);\n            this.previousPanel = null;\n            removeClass([this.currentPanel.element], PREVIOUS_PANEL_CLASS);\n            addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n        }\n        if (this.nextPanel) {\n            remove(this.nextPanel.element);\n            this.nextPanel = null;\n            removeClass([this.currentPanel.element], NEXT_PANEL_CLASS);\n            addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);\n        }\n        this.currentPanel = null;\n        this.parent.activeView.getPanel().style.width = '';\n    };\n    ScheduleTouch.prototype.getTranslateX = function (element) {\n        var style = window.getComputedStyle(element);\n        return new WebKitCSSMatrix(style.webkitTransform).m41;\n    };\n    ScheduleTouch.prototype.setDimensions = function (element) {\n        element.style.width = (this.parent.element.clientWidth) + 'px';\n    };\n    ScheduleTouch.prototype.resetValues = function () {\n        this.currentPanel = null;\n        this.previousPanel = null;\n        this.nextPanel = null;\n        this.timeStampStart = null;\n        this.element.style.transform = '';\n        this.element.style.transitionDuration = '';\n        removeChildren(this.element);\n        removeClass([this.element], TRANSLATE_CLASS);\n    };\n    ScheduleTouch.prototype.destroy = function () {\n        if (this.touchObj) {\n            this.touchObj.destroy();\n            this.touchObj = null;\n        }\n        EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n        this.resetValues();\n    };\n    return ScheduleTouch;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Keyboard interaction\n */\nvar KeyboardInteraction = /** @__PURE__ @class */ (function () {\n    function KeyboardInteraction(parent) {\n        this.selectedCells = [];\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDownArrow: 'shift+downarrow',\n            shiftUpArrow: 'shift+uparrow',\n            shiftRightArrow: 'shift+rightarrow',\n            shiftLeftArrow: 'shift+leftarrow',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow',\n            altOne: 'alt+1',\n            altTwo: 'alt+2',\n            altThree: 'alt+3',\n            altFour: 'alt+4',\n            altFive: 'alt+5',\n            altSix: 'alt+6',\n            altSeven: 'alt+7',\n            altEight: 'alt+8',\n            altNine: 'alt+9',\n            enter: 'enter',\n            escape: 'escape',\n            delete: 'delete',\n            backspace: 'backspace',\n            home: 'home',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            ctrlShiftUpArrow: 'ctrl+shift+uparrow',\n            ctrlShiftDownArrow: 'ctrl+shift+downarrow',\n            ctrlShiftLeftArrow: 'ctrl+shift+leftarrow',\n            ctrlShiftRightArrow: 'ctrl+shift+rightarrow'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.addEventListener();\n    }\n    KeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'downArrow':\n            case 'shiftDownArrow':\n                this.processDown(e, e.shiftKey);\n                break;\n            case 'upArrow':\n            case 'shiftUpArrow':\n                this.processUp(e, e.shiftKey);\n                break;\n            case 'leftArrow':\n            case 'shiftLeftArrow':\n                this.processLeft(e, e.shiftKey);\n                break;\n            case 'rightArrow':\n            case 'shiftRightArrow':\n                this.processRight(e, e.shiftKey);\n                break;\n            case 'ctrlLeftArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-prev button').focus();\n                }\n                break;\n            case 'ctrlRightArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-next button').focus();\n                }\n                break;\n            case 'altOne':\n            case 'altTwo':\n            case 'altThree':\n            case 'altFour':\n            case 'altFive':\n            case 'altSix':\n            case 'altSeven':\n            case 'altEight':\n            case 'altNine':\n                this.processViewNavigation(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'home':\n                this.focusFirstCell();\n                break;\n            case 'tab':\n            case 'shiftTab':\n                this.processTab(e, e.shiftKey);\n                break;\n            case 'delete':\n            case 'backspace':\n                this.processDelete(e);\n                break;\n            case 'ctrlShiftUpArrow':\n            case 'ctrlShiftDownArrow':\n            case 'ctrlShiftLeftArrow':\n            case 'ctrlShiftRightArrow':\n                this.processCtrlShiftNavigationArrows(e);\n                break;\n            case 'escape':\n                this.processEscape(e);\n                break;\n            case 'fTwelve':\n                if (this.parent.allowInline && this.parent.inlineModule) {\n                    e.preventDefault();\n                    this.processFTwelve(e);\n                }\n                break;\n        }\n    };\n    KeyboardInteraction.prototype.processFTwelve = function (e) {\n        var target = e.target;\n        if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            this.parent.activeCellsData = this.getSelectedElements(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            var inlineArgs = {\n                element: args.element,\n                groupIndex: args.groupIndex, type: 'Cell'\n            };\n            this.parent.notify(inlineClick, inlineArgs);\n        }\n        if (target.classList.contains(APPOINTMENT_CLASS)) {\n            target.click();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.addEventListener = function () {\n        this.parent.on(cellMouseDown, this.onCellMouseDown, this);\n    };\n    KeyboardInteraction.prototype.removeEventListener = function () {\n        this.parent.off(cellMouseDown, this.onCellMouseDown);\n    };\n    KeyboardInteraction.prototype.onCellMouseDown = function (e) {\n        if (e.event.shiftKey) {\n            return;\n        }\n        this.initialTarget = this.getClosestCell(e.event);\n        if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n            return;\n        }\n        if (e.event.target.classList.contains(WORK_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveUp, this);\n        }\n        if (e.event.target.classList.contains(ALLDAY_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(allDayRow, 'mouseup', this.onMoveUp, this);\n        }\n    };\n    KeyboardInteraction.prototype.onMouseSelection = function (e) {\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        addClass(appointments, 'e-allow-select');\n        var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n        if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n            var parent_1 = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            var yInBounds = parent_1.offsetHeight <= parent_1.scrollHeight && parent_1.scrollTop >= 0 &&\n                parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n            var xInBounds = parent_1.offsetWidth <= parent_1.scrollWidth && parent_1.scrollLeft >= 0 &&\n                parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n            if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n                parent_1.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;\n            }\n            if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n                parent_1.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;\n            }\n        }\n        var target = this.getClosestCell(e);\n        if (target) {\n            this.selectCells(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.getClosestCell = function (e) {\n        return closest(e.target, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n    };\n    KeyboardInteraction.prototype.onMoveUp = function (e) {\n        var _this = this;\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        removeClass(appointments, 'e-allow-select');\n        if (e.target.classList.contains(WORK_CELLS_CLASS)) {\n            EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n            EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveUp);\n        }\n        if (e.target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n            EventHandler.remove(allDayRow, 'mouseup', this.onMoveUp);\n        }\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (this.parent.currentView === 'TimelineYear' && target.classList.contains(OTHERMONTH_CLASS)) {\n            return;\n        }\n        this.parent.activeCellsData = this.getSelectedElements(target);\n        var cellData = {};\n        if (this.parent.eventWindow) {\n            this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);\n        }\n        var selectedCells = this.parent.getSelectedCells();\n        var args = {\n            data: cellData, element: this.parent.activeCellsData.element, event: e,\n            requestType: cellSelect, showQuickPopup: false\n        };\n        this.parent.trigger(select, args, function (selectArgs) {\n            var isPopupShow = selectArgs.showQuickPopup || _this.parent.quickInfoOnSelectionEnd;\n            if (isPopupShow && selectedCells.length > 1) {\n                var cellArgs = extend(_this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n                _this.parent.notify(cellClick, cellArgs);\n            }\n        });\n    };\n    KeyboardInteraction.prototype.processEnter = function (e) {\n        if ((this.parent.activeViewOptions.readonly && !e.target.classList.contains(APPOINTMENT_CLASS))\n            || this.isPreventAction(e)) {\n            return;\n        }\n        if (this.parent.currentView === 'TimelineYear' && e.target.classList.contains(OTHERMONTH_CLASS)) {\n            return;\n        }\n        var target = e.target;\n        if (closest(target, '.' + POPUP_WRAPPER_CLASS)) {\n            if (target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) ||\n                target.classList.contains(EVENT_CREATE_CLASS) ||\n                target.classList.contains(EDIT_EVENT_CLASS) ||\n                target.classList.contains(DELETE_EVENT_CLASS) ||\n                target.classList.contains(CLOSE_CLASS)) {\n                target.click();\n                e.preventDefault();\n            }\n            else if (target.classList.contains(SUBJECT_CLASS)) {\n                this.parent.element.querySelector('.' + EVENT_CREATE_CLASS).click();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(RESOURCE_CELLS_CLASS) && target.classList.contains(RESOURCE_PARENT_CLASS)) {\n            var resourceIcon = target.querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n            if (resourceIcon) {\n                resourceIcon.click();\n            }\n            return;\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            this.parent.activeCellsData = this.getSelectedElements(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            if (this.parent.allowInline) {\n                var inlineArgs = {\n                    element: args.element,\n                    groupIndex: args.groupIndex, type: 'Cell'\n                };\n                this.parent.notify(inlineClick, inlineArgs);\n            }\n            else {\n                if (this.parent.currentView === 'Year') {\n                    target.click();\n                }\n                else {\n                    this.parent.notify(cellClick, args);\n                }\n            }\n            return;\n        }\n        if (target.classList.contains(INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {\n            this.parent.inlineModule.inlineCrudActions(target);\n            return;\n        }\n        if (target.classList.contains(APPOINTMENT_CLASS) || target.classList.contains(MORE_EVENT_CLOSE_CLASS) ||\n            target.classList.contains(ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(MORE_INDICATOR_CLASS)) {\n            target.click();\n            return;\n        }\n        if (target.classList.contains(MORE_EVENT_HEADER_DATE_CLASS)) {\n            this.parent.setProperties({ selectedDate: this.parent.getDateFromElement(target) }, true);\n            this.parent.changeView(this.parent.getNavigateView(), e);\n            this.processEscape(e);\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.getSelectedElements = function (target) {\n        var cellDetails;\n        if (this.selectedCells.length > 1 && target.classList.contains(SELECTED_CELL_CLASS)) {\n            var start = this.parent.getCellDetails(this.selectedCells[0]);\n            var end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);\n            start.endTime = end.endTime;\n            start.element = target;\n            cellDetails = start;\n        }\n        else {\n            cellDetails = this.parent.getCellDetails(target);\n        }\n        return cellDetails;\n    };\n    KeyboardInteraction.prototype.getCells = function (isInverseTable, start, end) {\n        var tableEle = this.parent.getContentTable();\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        var query = isTimelineYear && !isInverseTable ? '.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')' : 'td';\n        var cells = [].slice.call(tableEle.querySelectorAll(query));\n        var maxRow = tableEle.rows.length;\n        var maxColumn = tableEle.rows[0].cells.length;\n        if (start && start.classList.contains(ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            cells = [].slice.call(allDayRow.cells);\n            maxRow = 1;\n            maxColumn = allDayRow.cells.length;\n        }\n        var startIndex = cells.indexOf(start);\n        var endIndex = cells.indexOf(end);\n        var inverseCells = [];\n        if (isInverseTable) {\n            for (var i = 0; i < maxColumn; i++) {\n                for (var j = 0; j < maxRow; j++) {\n                    var cell = cells[maxColumn * j + i];\n                    if (isTimelineYear && cell.classList.contains(OTHERMONTH_CLASS)) {\n                        continue;\n                    }\n                    inverseCells.push(cell);\n                }\n            }\n            startIndex = inverseCells.indexOf(start);\n            endIndex = inverseCells.indexOf(end);\n        }\n        if (startIndex > endIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        var sCells = isInverseTable ? inverseCells : cells;\n        return sCells.slice(startIndex, endIndex + 1);\n    };\n    KeyboardInteraction.prototype.focusFirstCell = function () {\n        if (this.parent.currentView === 'Agenda') {\n            var focusCell = this.parent.getContentTable().querySelector('.' + AGENDA_CELLS_CLASS);\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            var cell = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS +\n                ' tr:not(.' + HIDDEN_CLASS + ') .' + WORK_CELLS_CLASS + ':not(.' + RESOURCE_GROUP_CELLS_CLASS + ')');\n            this.selectCells(false, cell);\n        }\n        else if (this.parent.currentView.indexOf('Year') > -1) {\n            var query = '.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')' + ':not(.' + RESOURCE_GROUP_CELLS_CLASS + ')';\n            var isVerticalYear = this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.orientation === 'Vertical';\n            query += isVerticalYear ? '[data-date=\"' + this.parent.activeView.startDate().getTime() + '\"]' : '';\n            this.selectCells(false, this.parent.element.querySelector(query));\n        }\n        else {\n            this.selectCells(false, this.parent.getWorkCellElements()[0]);\n        }\n    };\n    KeyboardInteraction.prototype.isInverseTableSelect = function () {\n        return this.parent.activeView.isInverseTableSelect;\n    };\n    /**\n     * Internal method to select cells\n     *\n     * @param {boolean} isMultiple Accepts to select multiple cells or not\n     * @param {HTMLTableCellElement} targetCell Accepts the target cells\n     * @returns {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.selectCells = function (isMultiple, targetCell) {\n        var _this = this;\n        this.parent.removeSelectedClass();\n        var target = (targetCell instanceof Array) ? targetCell.slice(-1)[0] : targetCell;\n        if (isMultiple) {\n            var initialId_1;\n            var views_1 = ['Day', 'Week', 'WorkWeek', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth', 'TimelineYear'];\n            var args = { element: targetCell, requestType: 'mousemove', allowMultipleRow: true };\n            this.parent.inlineModule.removeInlineAppointmentElement();\n            this.parent.trigger(select, args, function (selectArgs) {\n                var allowMultipleRow = (!selectArgs.allowMultipleRow) || (!_this.parent.allowMultiRowSelection);\n                if (allowMultipleRow) {\n                    var isTimelineYear = _this.parent.currentView === 'TimelineYear';\n                    if (isTimelineYear && _this.parent.activeViewOptions.orientation === 'Horizontal' || _this.parent.currentView === 'Month') {\n                        var isGroupYear = isTimelineYear && _this.parent.activeViewOptions.group.resources.length > 0;\n                        target = isGroupYear ? _this.initialTarget :\n                            _this.initialTarget.parentElement.children[target.cellIndex];\n                    }\n                    else if (views_1.indexOf(_this.parent.currentView) > -1) {\n                        target = target.parentElement.children[_this.initialTarget.cellIndex];\n                    }\n                }\n                var selectedCells = _this.getCells(_this.isInverseTableSelect(), _this.initialTarget, target);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    initialId_1 = _this.initialTarget.getAttribute('data-group-index');\n                    var resourceSelectedCells = [];\n                    for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n                        var cell = selectedCells_1[_i];\n                        if (cell.getAttribute('data-group-index') === initialId_1) {\n                            resourceSelectedCells.push(cell);\n                        }\n                    }\n                    selectedCells = resourceSelectedCells;\n                }\n                if (!_this.parent.allowMultiCellSelection) {\n                    selectedCells = [_this.initialTarget];\n                }\n                _this.selectedCells = selectedCells;\n                if (selectedCells.length > 2 && !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n                    var allDayCells = _this.getAllDayCells(selectedCells);\n                    if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                        var resourceAllDayCells = [];\n                        for (var _a = 0, allDayCells_1 = allDayCells; _a < allDayCells_1.length; _a++) {\n                            var cell = allDayCells_1[_a];\n                            if (cell.getAttribute('data-group-index') === initialId_1) {\n                                resourceAllDayCells.push(cell);\n                            }\n                        }\n                        allDayCells = resourceAllDayCells;\n                    }\n                    selectedCells = selectedCells.concat(allDayCells);\n                }\n                if ((target.getAttribute('data-group-index') !== initialId_1) && _this.parent.activeViewOptions.group.resources.length > 0) {\n                    target = _this.selectedCells[_this.selectedCells.length - 1];\n                }\n                _this.parent.addSelectedClass(selectedCells, target);\n            });\n        }\n        else {\n            var args = {\n                element: target, requestType: cellSelect\n            };\n            // activeCellsData is not reset on schedule property changed(group properties)\n            // const cellData: Record<string, any> = {};\n            // const cellDetails: CellClickEventArgs = this.parent.getCellDetails(target);\n            // if (this.parent.eventWindow && cellDetails) {\n            //     if (this.parent.activeCellsData.element !== cellDetails.element) {\n            //         this.parent.activeCellsData = cellDetails;\n            //     }\n            //     this.parent.eventWindow.convertToEventData(this.parent.activeCellsData as unknown as Record<string, any>, cellData);\n            //     args.data = cellData;\n            // }\n            this.parent.trigger(select, args, function () {\n                _this.initialTarget = target;\n                _this.selectedCells = [target];\n                _this.parent.addSelectedClass([target], target);\n            });\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointment = function (isReverse, target) {\n        var appointments = this.getAppointmentElements();\n        if (appointments.length < 0) {\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        var nextAppEle;\n        if (target.classList.contains(APPOINTMENT_CLASS)) {\n            var targetIndex = appointments.indexOf(target);\n            nextAppEle = appointments[(isReverse ? targetIndex - 1 : targetIndex + 1)];\n        }\n        else {\n            nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n        }\n        if (nextAppEle) {\n            this.parent.eventBase.addSelectedAppointments([nextAppEle], true);\n            nextAppEle.focus();\n            addClass([nextAppEle], AGENDA_SELECTED_CELL);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointmentElementFromWorkCell = function (isReverse, target) {\n        var _this = this;\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        this.parent.removeSelectedClass();\n        if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            var appointmentElements_1 = this.getUniqueAppointmentElements();\n            var filteredElements_1 = [];\n            var selectedDate_1 = this.parent.getDateFromElement(target).getTime();\n            var selectedSeriesEvents = this.parent.eventsProcessed.filter(function (eventObject) {\n                return (!isReverse ? (eventObject[_this.parent.eventFields.startTime].getTime() >= selectedDate_1) :\n                    (eventObject[_this.parent.eventFields.startTime].getTime() <= selectedDate_1));\n            });\n            selectedSeriesEvents.filter(function (event) {\n                appointmentElements_1.filter(function (element) {\n                    if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n                        filteredElements_1.push(element);\n                    }\n                });\n            });\n            if (filteredElements_1.length > 0) {\n                var selectedElement = isReverse ? filteredElements_1[filteredElements_1.length - 1] : filteredElements_1[0];\n                var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n                this.parent.eventBase.addSelectedAppointments(focusElements, true);\n                (focusElements[focusElements.length - 1]).focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getAllDayCells = function (cells) {\n        var allDayRow = this.parent.getAllDayRow();\n        if (!allDayRow) {\n            return [];\n        }\n        var startCell = cells[0];\n        var endCell = cells[cells.length - 1];\n        var start = this.parent.getCellDetails(startCell);\n        var end = this.parent.getCellDetails(endCell);\n        if (end.endTime.getTime() - start.startTime.getTime() >= MS_PER_DAY) {\n            var allDayCells = [].slice.call(allDayRow.cells);\n            return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n        }\n        return [];\n    };\n    KeyboardInteraction.prototype.getAppointmentElements = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n    };\n    KeyboardInteraction.prototype.getAppointmentElementsByGuid = function (guid) {\n        return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n    };\n    KeyboardInteraction.prototype.getUniqueAppointmentElements = function () {\n        var appointments = this.getAppointmentElements();\n        var appointmentElements = [];\n        appointments.map(function (value) { return value.getAttribute('data-guid'); }).filter(function (value, index, self) {\n            if (self.indexOf(value) === index) {\n                appointmentElements.push(appointments[parseInt(index.toString(), 10)]);\n            }\n        });\n        return appointmentElements;\n    };\n    KeyboardInteraction.prototype.getWorkCellFromAppointmentElement = function (target) {\n        var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n        return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n    };\n    KeyboardInteraction.prototype.processViewNavigation = function (e) {\n        var index = parseInt(e.key, 10) - 1;\n        if (index < this.parent.views.length) {\n            var view = this.parent.viewCollections[parseInt(index.toString(), 10)].option;\n            this.parent.changeView(view, e, undefined, index);\n            if (this.parent.headerModule) {\n                this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.cancelUpDownAction = function (isTimelineYear) {\n        var isVerticalYear = isTimelineYear && this.parent.activeViewOptions.orientation === 'Vertical';\n        var isGroup = this.parent.activeViewOptions.group.resources.length > 0;\n        if (isVerticalYear && isGroup || isTimelineYear && this.initialTarget.classList.contains(OTHERMONTH_CLASS)) {\n            return true;\n        }\n        if (this.parent.activeView.isTimelineView() && !isTimelineYear || this.parent.currentView === 'MonthAgenda') {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processUp = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (isMultiple && this.cancelUpDownAction(isTimelineYear)) {\n            return;\n        }\n        var target = (e.target);\n        var selectedElements = this.parent.getSelectedCells();\n        var selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedElements.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n            target = selectedElements[selectedElements.length - 1];\n        }\n        if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n            var tableRows = this.parent.getTableRows();\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            var targetCell = void 0;\n            if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {\n                targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, true) :\n                    this.getHorizontalUpDownCell(tableRows, target, curRowIndex, true);\n            }\n            if ((curRowIndex > 0 || targetCell) && curRowIndex < tableRows.length) {\n                targetCell = targetCell ? targetCell : (tableRows[curRowIndex - 1]).cells[target.cellIndex];\n                if (this.parent.currentView === 'Year' && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n                    if (this.parent.activeView.getStartDate().getTime() < +targetCell.getAttribute('data-date')) {\n                        targetCell = this.getYearUpDownCell(tableRows, curRowIndex - 1, target.cellIndex, true);\n                    }\n                    else {\n                        return;\n                    }\n                }\n                this.selectCells(isMultiple, targetCell);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.processDown = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (isMultiple && this.cancelUpDownAction(isTimelineYear)) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedCells();\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedCells.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        var tableRows = this.parent.getTableRows();\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + POPUP_OPEN)) {\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            var targetCell = void 0;\n            if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {\n                targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, false)\n                    : this.getHorizontalUpDownCell(tableRows, target, curRowIndex, false);\n            }\n            if (curRowIndex >= 0 && ((curRowIndex < tableRows.length - 1) || targetCell)) {\n                targetCell = targetCell ? targetCell : (tableRows[curRowIndex + 1]).cells[target.cellIndex];\n                if (this.parent.currentView === 'Year' && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n                    if (this.parent.activeView.getEndDate().getTime() > +targetCell.getAttribute('data-date')) {\n                        targetCell = this.getYearUpDownCell(tableRows, curRowIndex + 1, target.cellIndex, false);\n                    }\n                    else {\n                        return;\n                    }\n                }\n                this.selectCells(isMultiple, targetCell);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(false, target);\n        }\n    };\n    KeyboardInteraction.prototype.getYearUpDownCell = function (tableRows, rowIndex, cellIndex, isUp) {\n        while (tableRows[parseInt(rowIndex.toString(), 10)] &&\n            tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)].classList.contains(OTHERMONTH_CLASS)) {\n            rowIndex = rowIndex + (isUp ? -1 : 1);\n        }\n        return tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)];\n    };\n    // eslint-disable-next-line max-len\n    KeyboardInteraction.prototype.getHorizontalUpDownCell = function (tableRows, target, curRowIndex, isUp) {\n        var row = tableRows[curRowIndex + (isUp ? -1 : 1)];\n        var cell = row ? row.cells[target.cellIndex] : target;\n        if (cell.classList.contains(OTHERMONTH_CLASS)) {\n            var workCell = row.querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')');\n            var date = new Date(+workCell.getAttribute('data-date'));\n            var query = '[data-date=\"' + new Date(date.getFullYear(), date.getMonth() + 1, 0).getTime() + '\"]';\n            cell = cell.cellIndex < workCell.cellIndex ? workCell : row.querySelector(query);\n        }\n        return cell;\n    };\n    // eslint-disable-next-line max-len\n    KeyboardInteraction.prototype.getVerticalUpDownCell = function (tableRows, target, curRowIndex, isUp) {\n        var hasRow = isUp && curRowIndex > 0 || !isUp && curRowIndex < tableRows.length - 1;\n        var targetCell = hasRow ? tableRows[curRowIndex + (isUp ? -1 : 1)].cells[target.cellIndex] : undefined;\n        if (!targetCell || targetCell.classList.contains(OTHERMONTH_CLASS)) {\n            var column = tableRows[parseInt(curRowIndex.toString(), 10)].cells[target.cellIndex - (isUp ? 1 : -1)];\n            if (column) {\n                var dateAttr = +target.getAttribute('data-date') - (isUp ? MS_PER_DAY : -MS_PER_DAY);\n                return this.parent.getContentTable().querySelector('.' + WORK_CELLS_CLASS + '[data-date=\"' + dateAttr + '\"]');\n            }\n            targetCell = target;\n        }\n        return targetCell;\n    };\n    KeyboardInteraction.prototype.processLeftRight = function (target) {\n        var tableEle = (this.parent.currentView === 'Year' ? target.closest('tbody') : this.parent.getContentTable());\n        var curRowIndex = target.parentNode.sectionRowIndex;\n        var key = {\n            element: tableEle,\n            rowIndex: curRowIndex,\n            columnIndex: target.cellIndex,\n            maxIndex: tableEle.rows[parseInt(curRowIndex.toString(), 10)].cells.length\n        };\n        return key;\n    };\n    KeyboardInteraction.prototype.getQuickPopupElement = function () {\n        return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + POPUP_WRAPPER_CLASS);\n    };\n    KeyboardInteraction.prototype.isCancelLeftRightAction = function (e, isMultiple, isTimelineYear) {\n        var prevent = this.parent.currentView === 'MonthAgenda' || isTimelineYear && this.initialTarget.classList.contains(OTHERMONTH_CLASS);\n        if (this.parent.currentView === 'Agenda' || (isMultiple && prevent)) {\n            return true;\n        }\n        if (this.isPreventAction(e) && isMultiple) {\n            return true;\n        }\n        var moreEventWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (moreEventWrapper.classList.contains(POPUP_OPEN) || quickPopupWrapper.classList.contains(POPUP_OPEN)) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processRight = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear)) {\n            return;\n        }\n        var selectedCells = this.parent.getSelectedCells();\n        var targetCell;\n        var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n        var target = (e.target);\n        if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) &&\n            !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedAppointments.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if (target.classList.contains(WORK_CELLS_CLASS) &&\n            (e.target).classList.contains(WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            var targetDate = new Date(+target.getAttribute('data-date'));\n            var isMonthEnd = this.parent.currentView === 'Year' && targetDate.getTime() === lastDateOfMonth(targetDate).getTime();\n            if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1 && !isMonthEnd) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n                if (isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n                    targetCell = this.getTimelineYearTargetCell(key, target, true);\n                }\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === key.maxIndex - 1 || isMonthEnd) {\n                if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1 && !isMonthEnd) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n                    var changeTargetCell = isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS);\n                    targetCell = changeTargetCell ? this.getHorizontalLeftRightCell(key, target, true) : targetCell;\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    if (isMonthEnd && targetDate.getTime() !== this.parent.activeView.getEndDate().getTime()) {\n                        this.selectCells(isMultiple, this.parent.element.querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + (targetDate.getTime() + MS_PER_DAY) + '\"]'));\n                        return;\n                    }\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                    var tableEle = this.parent.getContentTable();\n                    var cell = isMonthEnd ? tableEle.rows[parseInt(rowIndex.toString(), 10)].querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')')\n                        : tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[0];\n                    this.selectCells(false, cell);\n                }\n            }\n        }\n        else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n            }\n            else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), e);\n                var allDayRow_1 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_1.cells[0]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processLeft = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear)) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedCells();\n        var targetCell;\n        if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) &&\n            !target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if ((e.target).classList.contains(WORK_CELLS_CLASS) &&\n            target.classList.contains(WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            var targetDate = new Date(+target.getAttribute('data-date'));\n            var isMonthStart = this.parent.currentView === 'Year' && targetDate.getTime() === firstDateOfMonth(targetDate).getTime();\n            if (key.columnIndex > 0 && key.columnIndex < key.maxIndex && !isMonthStart) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n                if (isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS)) {\n                    targetCell = this.getTimelineYearTargetCell(key, target, false);\n                }\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === 0 || isMonthStart) {\n                if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n                    var otherMonthCell = isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS);\n                    targetCell = otherMonthCell ? this.getHorizontalLeftRightCell(key, target, false) : targetCell;\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    if (isMonthStart && targetDate.getTime() !== this.parent.activeView.getStartDate().getTime()) {\n                        this.selectCells(isMultiple, this.parent.element.querySelector('[data-date=\"' + (targetDate.getTime() - MS_PER_DAY) + '\"]'));\n                        return;\n                    }\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                    var tableEle = this.parent.getContentTable();\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n                    var cell = tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[key.maxIndex - 1];\n                    if (isMonthStart) {\n                        var tbody = this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody');\n                        cell = tbody.item(tbody.length - 1).querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + this.parent.activeView.getEndDate().getTime() + '\"]');\n                    }\n                    this.selectCells(false, cell);\n                }\n            }\n        }\n        else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex > 0 && curColIndex < maxColIndex) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n            }\n            else if (curColIndex === 0 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), e);\n                var allDayRow_2 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_2.cells[maxColIndex - 1]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getTimelineYearTargetCell = function (key, target, isRight) {\n        return this.isInverseTableSelect() ? this.getVerticalLeftRightCell(target, isRight) :\n            this.getHorizontalLeftRightCell(key, target, isRight);\n    };\n    KeyboardInteraction.prototype.getHorizontalLeftRightCell = function (key, target, isRight) {\n        var row = key.element.rows[target.parentNode.sectionRowIndex + (isRight ? 1 : -1)];\n        if (row) {\n            var query = isRight ? '.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')'\n                : '[data-date=\"' + ((+target.getAttribute('data-date')) - MS_PER_DAY) + '\"]';\n            return row.querySelector(query);\n        }\n        return target;\n    };\n    KeyboardInteraction.prototype.getVerticalLeftRightCell = function (target, isRight) {\n        var date = new Date(+target.getAttribute('data-date'));\n        var start = new Date(date.getFullYear(), date.getMonth() + (isRight ? 1 : -1), 1);\n        var tableEle = this.parent.getContentTable();\n        var targetCell = tableEle.querySelector('[data-date=\"' + start.getTime() + '\"]');\n        if (targetCell.parentNode.sectionRowIndex > target.parentNode.sectionRowIndex) {\n            return targetCell;\n        }\n        return tableEle.querySelector('[data-date=\"' + new Date(start.getFullYear(), start.getMonth() + 1, 0).getTime() + '\"]');\n    };\n    KeyboardInteraction.prototype.calculateNextPrevDate = function (currentCell, target, type) {\n        var initialId = this.initialTarget.getAttribute('data-group-index');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n            if (currentCell && target && target.getAttribute('data-group-index') !== initialId) {\n                var currentDate = this.parent.getDateFromElement(currentCell);\n                var nextPrevDate = (type === 'right') ? new Date(currentDate.setDate(currentDate.getDate() + 1))\n                    : new Date(currentDate.setDate(currentDate.getDate() - 1));\n                target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"'\n                    + nextPrevDate.getTime().toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n            }\n        }\n        return target;\n    };\n    KeyboardInteraction.prototype.getFocusableElements = function (container) {\n        var queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' +\n            'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' +\n            'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n        return [].slice.call(container.querySelectorAll(queryString));\n    };\n    KeyboardInteraction.prototype.processTabOnPopup = function (e, popupElement) {\n        var _this = this;\n        var focusableElements = this.getFocusableElements(popupElement);\n        focusableElements = focusableElements.filter(function (element) {\n            var footerEle = _this.parent.element.querySelector('.' + POPUP_FOOTER_CLASS);\n            if (footerEle && footerEle.offsetParent) {\n                return !(element.classList.contains(EDIT_CLASS) || element.classList.contains(DELETE_CLASS));\n            }\n            else {\n                return !(element.classList.contains(EDIT_EVENT_CLASS) || element.classList.contains(DELETE_EVENT_CLASS));\n            }\n        });\n        var firstEle = focusableElements[0];\n        var lastEle = focusableElements[focusableElements.length - 1];\n        if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n            e.preventDefault();\n            firstEle.focus();\n        }\n        if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n            e.preventDefault();\n            lastEle.focus();\n        }\n    };\n    KeyboardInteraction.prototype.processTab = function (e, isReverse) {\n        var target = e.target;\n        if (target.classList.contains(INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {\n            target = target.closest('.e-appointment');\n            this.parent.inlineModule.inlineCrudActions(e.target);\n        }\n        if (this.parent.currentView === 'TimelineYear' && target.classList.contains(OTHERMONTH_CLASS)) {\n            if (target.classList.contains(SELECTED_CELL_CLASS)) {\n                this.parent.removeSelectedClass();\n            }\n            return;\n        }\n        var popupWrapper = closest(target, '.' + POPUP_WRAPPER_CLASS + ',.' + MORE_POPUP_WRAPPER_CLASS);\n        if (popupWrapper && popupWrapper.classList.contains(POPUP_OPEN)) {\n            if (popupWrapper.classList.contains(MORE_POPUP_WRAPPER_CLASS)) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n            }\n            this.processTabOnPopup(e, popupWrapper);\n            return;\n        }\n        if (target.classList.contains(ROOT)) {\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            return;\n        }\n        if (target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            var index = parseInt(target.getAttribute('data-group-index'), 10);\n            var appSelector = \".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index - 1 : index) + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment], true);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n            else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {\n                this.parent.element.focus();\n                e.preventDefault();\n            }\n            else if (this.parent.virtualScrollModule) {\n                var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n                var averageRowHeight = Math.round(virtual.offsetHeight / this.parent.resourceBase.expandedResources.length);\n                this.parent.element.querySelector('.e-content-wrap').scrollTop = ((isReverse ? index - 1 : index + 1) * averageRowHeight);\n                this.parent.virtualScrollModule.virtualScrolling();\n            }\n            else {\n                this.setScrollPosition(index);\n            }\n            return;\n        }\n        if (target.classList.contains(APPOINTMENT_CLASS)) {\n            var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n            var isTimelineYear = this.parent.currentView === 'TimelineYear';\n            var isTimeline = this.parent.activeView.isTimelineView() && !isTimelineYear;\n            if ((isTimeline || isTimelineYear && this.parent.activeViewOptions.orientation === 'Vertical') && this.parent.activeViewOptions.group.resources.length > 0) {\n                var index = parseInt(target.getAttribute('data-group-index'), 10);\n                appElements = [].slice.call(this.parent.element.querySelectorAll(\".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                var resCellSelector = \".\" + RESOURCE_CELLS_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index : index + 1) + \"\\\"]\";\n                var resourceCell = this.parent.element.querySelector(resCellSelector);\n                if (resourceCell && (isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid') ||\n                    !isReverse && target.getAttribute('data-guid') === appElements.slice(-1)[0].getAttribute('data-guid'))) {\n                    this.parent.eventBase.removeSelectedAppointmentClass();\n                    if (this.parent.virtualScrollModule) {\n                        resourceCell.focus({ preventScroll: true });\n                    }\n                    else {\n                        resourceCell.focus();\n                    }\n                    if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n                        isNullOrUndefined(this.parent.virtualScrollModule)) {\n                        this.setScrollPosition(index);\n                    }\n                    e.preventDefault();\n                    return;\n                }\n            }\n            var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n            if (selectedAppointments.length > 0) {\n                target = selectedAppointments[selectedAppointments.length - 1];\n            }\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!isReverse && target.getAttribute('data-guid') === appElements[appElements.length - 1].getAttribute('data-guid') ||\n                isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid')) {\n                return;\n            }\n            if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n                this.selectAppointment(isReverse, target);\n                e.preventDefault();\n            }\n            return;\n        }\n        var selectedCells = this.parent.getSelectedCells();\n        if (selectedCells.length > 0 && !target.classList.contains(APPOINTMENT_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n            this.selectAppointmentElementFromWorkCell(isReverse, target);\n            e.preventDefault();\n            return;\n        }\n        if (target && !target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            this.processTabOnResourceCells(target, isReverse);\n        }\n    };\n    KeyboardInteraction.prototype.processDelete = function (e) {\n        var activeEle = document.activeElement;\n        if (this.parent.currentView === 'MonthAgenda') {\n            var selectedEle = this.parent.eventBase.getSelectedEvents().element;\n            activeEle = ((selectedEle && isNullOrUndefined(selectedEle.length)) ? selectedEle : selectedEle[0]);\n        }\n        if (activeEle && activeEle.classList.contains(APPOINTMENT_CLASS)) {\n            addClass([activeEle], APPOINTMENT_BORDER);\n            this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n            if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(READ_ONLY) ||\n                !this.parent.eventSettings.allowDeleting) {\n                return;\n            }\n            this.parent.quickPopup.deleteClick(e);\n        }\n    };\n    KeyboardInteraction.prototype.processCtrlShiftNavigationArrows = function (e) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n            var groupIndex = parseInt(document.activeElement.getAttribute('data-group-index'), 10);\n            var index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? groupIndex - 1 : groupIndex + 1;\n            index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ?\n                this.parent.resourceBase.lastResourceLevel.length : index;\n            var eventEle = [];\n            while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {\n                eventEle = [].slice.call(this.parent.element.querySelectorAll(\".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? index - 1 : index + 1;\n            }\n            var nextAppEle = eventEle[0];\n            if (nextAppEle) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                this.parent.eventBase.addSelectedAppointments([nextAppEle], true);\n                nextAppEle.focus();\n            }\n        }\n        else if (this.parent.activeViewOptions.group.resources.length > 0 &&\n            !document.activeElement.classList.contains(APPOINTMENT_CLASS)) {\n            var index = this.parent.resourceBase.renderedResources[0].groupIndex;\n            var appSelector = \".\" + APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment], true);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processEscape = function (event) {\n        this.parent.quickPopup.onClosePopup(event);\n        this.parent.quickPopup.morePopup.hide();\n        if (this.parent.headerModule) {\n            this.parent.headerModule.hideHeaderPopup();\n        }\n        if (this.parent.inlineModule) {\n            this.parent.inlineModule.removeInlineAppointmentElement();\n        }\n    };\n    KeyboardInteraction.prototype.isPreventAction = function (e) {\n        var target = closest(e.target, '.' + RESOURCE_GROUP_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processTabOnResourceCells = function (target, isReverse) {\n        var tabElements = [].slice.call(this.parent.element.querySelectorAll('[tabIndex=\"0\"]'));\n        var currentTabIndex = tabElements.indexOf(target);\n        var nextTabElement = !isReverse ? tabElements[currentTabIndex + 1] : tabElements[currentTabIndex - 1];\n        if (nextTabElement && nextTabElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n            var groupIndex = parseInt(nextTabElement.getAttribute('data-group-index'), 10);\n            if (this.parent.virtualScrollModule) {\n                var resColWrap_1 = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n                var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n                resCells.forEach(function (element) {\n                    if (element.getBoundingClientRect().top < resColWrap_1.getBoundingClientRect().top) {\n                        element.setAttribute('tabindex', '-1');\n                    }\n                });\n            }\n            else {\n                this.setScrollPosition(groupIndex);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.setScrollPosition = function (index) {\n        var workCell = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n        if (workCell) {\n            this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop = workCell.offsetTop;\n        }\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    KeyboardInteraction.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * To destroy the keyboard module.\n     *\n     * @returns {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.destroy = function () {\n        this.removeEventListener();\n        this.selectedCells = [];\n        this.keyboardModule.destroy();\n    };\n    return KeyboardInteraction;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * data module is used to generate query and data source.\n *\n * @private\n */\nvar Data = /** @__PURE__ @class */ (function () {\n    /**\n     * Constructor for data module\n     *\n     * @param {Schedule} parent Accepts the schedule element instance\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @private\n     */\n    function Data(parent, dataSource, query) {\n        this.parent = parent;\n        this.initDataManager(dataSource, query);\n    }\n    /**\n     * The function used to initialize dataManager and query\n     *\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {Date} startDate Accepts the start date\n     * @param {Date} endDate Accepts the end date\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.generateQuery = function (startDate, endDate) {\n        var query = this.query.clone();\n        if (this.parent && this.parent.eventSettings.includeFiltersInQuery && startDate && endDate) {\n            var dateQuery = this.getStartEndQuery(startDate, endDate);\n            var recurrenceQuery = new Predicate(this.parent.eventFields.recurrenceRule, 'notequal', null).and(new Predicate(this.parent.eventFields.recurrenceRule, 'notequal', ''));\n            return query.where(dateQuery.or(recurrenceQuery));\n        }\n        if (startDate) {\n            query.addParams('StartDate', startDate.toISOString());\n        }\n        if (endDate) {\n            query.addParams('EndDate', endDate.toISOString());\n        }\n        return query;\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {Date} startDate Accepts the start date\n     * @param {Date} endDate Accepts the end date\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getStartEndQuery = function (startDate, endDate) {\n        var fieldMapping = this.parent.eventFields;\n        var dateQuery = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate)\n            .and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate))\n            .and(new Predicate(fieldMapping.startTime, 'lessthan', endDate))\n            .or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate)\n            .and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n        return dateQuery;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        return this.dataManager.executeQuery(query);\n    };\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.destroy = function () {\n        this.dataManager = null;\n        this.query = null;\n    };\n    return Data;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/** @private */\nvar Gregorian = /** @__PURE__ @class */ (function () {\n    function Gregorian() {\n    }\n    Gregorian.prototype.firstDateOfMonth = function (date) {\n        return new Date(date.getFullYear(), date.getMonth());\n    };\n    Gregorian.prototype.lastDateOfMonth = function (dt) {\n        return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n    };\n    Gregorian.prototype.isMonthStart = function (date) {\n        return (date.getDate() === 1);\n    };\n    Gregorian.prototype.getLeapYearDaysCount = function () {\n        return 366;\n    };\n    Gregorian.prototype.getYearDaysCount = function (date, interval) {\n        return ((date.getFullYear() + interval) % 4 === 0) ? 366 : 365;\n    };\n    Gregorian.prototype.getDate = function (date) {\n        return date.getDate();\n    };\n    Gregorian.prototype.getMonth = function (date) {\n        return (date.getMonth() + 1);\n    };\n    Gregorian.prototype.getFullYear = function (date) {\n        return date.getFullYear();\n    };\n    Gregorian.prototype.getYearLastDate = function (date, interval) {\n        return new Date(date.getFullYear() + interval, 0, 0);\n    };\n    Gregorian.prototype.getMonthDaysCount = function (date) {\n        return this.lastDateOfMonth(date).getDate();\n    };\n    Gregorian.prototype.getMonthStartDate = function (date) {\n        return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n    };\n    Gregorian.prototype.getMonthEndDate = function (date) {\n        date.setDate(1);\n        return new Date(date.setMonth(date.getMonth() + 1));\n    };\n    Gregorian.prototype.getExpectedDays = function (date, days) {\n        return days;\n    };\n    Gregorian.prototype.setDate = function (dateObj, date) {\n        dateObj.setDate(date);\n    };\n    Gregorian.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        if (!isNullOrUndefined(beginDate)) {\n            date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n        }\n        else {\n            date.setMonth(date.getMonth() + interval, startDate);\n        }\n    };\n    Gregorian.prototype.setMonth = function (date, interval, startDate) {\n        date.setDate(1);\n        date.setFullYear(date.getFullYear());\n        date.setMonth(interval - 1);\n        var maxDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n        date.setDate(Math.min(startDate, maxDay));\n    };\n    Gregorian.prototype.addYears = function (date, interval) {\n        date.setFullYear(date.getFullYear() + interval);\n    };\n    Gregorian.prototype.isSameMonth = function (date1, date2) {\n        return (date1.getMonth() === date2.getMonth());\n    };\n    Gregorian.prototype.checkMonth = function (date, months) {\n        return (months.indexOf(date.getMonth() + 1) === -1);\n    };\n    Gregorian.prototype.compareMonth = function (date1, date2) {\n        return (date1.getMonth() > date2.getMonth());\n    };\n    Gregorian.prototype.isSameYear = function (date1, date2) {\n        return (date1.getFullYear() === date2.getFullYear());\n    };\n    Gregorian.prototype.isLastMonth = function (date) {\n        return (date.getMonth() === 11);\n    };\n    Gregorian.prototype.isLeapYear = function (year, interval) {\n        return ((year + interval) % 4 === 0);\n    };\n    return Gregorian;\n}());\n/** @private */\nvar Islamic = /** @__PURE__ @class */ (function () {\n    function Islamic() {\n    }\n    Islamic.prototype.firstDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n        return gDate;\n    };\n    Islamic.prototype.lastDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var daysInMonth = this.getDaysInMonth(hDate.month, hDate.year);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, daysInMonth);\n        var finalGDate = new Date(gDate.getTime());\n        finalGDate = new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n        var finalHDate = this.getHijriDate(finalGDate);\n        if (hDate.month === finalHDate.month) {\n            return finalGDate;\n        }\n        finalHDate = this.getHijriDate(gDate);\n        if (hDate.month === finalHDate.month) {\n            return gDate;\n        }\n        return new Date(gDate.setDate(gDate.getDate() - 1));\n    };\n    Islamic.prototype.isMonthStart = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return (hijriDate.date === 1);\n    };\n    Islamic.prototype.getLeapYearDaysCount = function () {\n        return 355;\n    };\n    Islamic.prototype.getYearDaysCount = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n    };\n    Islamic.prototype.getDate = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.month;\n    };\n    Islamic.prototype.getFullYear = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.year;\n    };\n    Islamic.prototype.getYearLastDate = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n        return gDate;\n    };\n    Islamic.prototype.getMonthDaysCount = function (date) {\n        var maxDate = this.lastDateOfMonth(date);\n        var hijriDate = this.getHijriDate(maxDate);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonthStartDate = function (date) {\n        var firstDate = this.firstDateOfMonth(date);\n        return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n    };\n    Islamic.prototype.getMonthEndDate = function (date) {\n        var lastDate = this.lastDateOfMonth(date);\n        lastDate.setDate(lastDate.getDate() + 1);\n        return new Date(lastDate.setMonth(lastDate.getMonth()));\n    };\n    Islamic.prototype.getExpectedDays = function (date, days) {\n        var hDate = this.getHijriDate(date);\n        var day = [];\n        for (var i = 0; i < days.length; i++) {\n            var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[parseInt(i.toString(), 10)]);\n            day.push(gDate.getDate());\n        }\n        return day;\n    };\n    Islamic.prototype.setDate = function (dateObj, date) {\n        var hDate = this.getHijriDate(dateObj);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n        this.updateDateObj(dateObj, gDate);\n    };\n    Islamic.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        var firstDate = (!isNullOrUndefined(beginDate)) ? this.firstDateOfMonth(beginDate) : date;\n        var hDate = this.getHijriDate(firstDate);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.setMonth = function (date, interval, startDate) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.addYears = function (date, interval, monthValue) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.isSameMonth = function (date1, date2) {\n        var currentHijri = this.getHijriDate(date1);\n        var tempHijri = this.getHijriDate(date2);\n        return (currentHijri.month === tempHijri.month);\n    };\n    Islamic.prototype.checkMonth = function (date, months) {\n        var hDate = this.getHijriDate(date);\n        return (months.indexOf(hDate.month) === -1);\n    };\n    Islamic.prototype.compareMonth = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.month > hDate1.month);\n    };\n    Islamic.prototype.isSameYear = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.year === hDate1.year);\n    };\n    Islamic.prototype.isLastMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return (hDate.month === 12);\n    };\n    Islamic.prototype.updateDateObj = function (date, gDate) {\n        date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n    };\n    Islamic.prototype.isLeapYear = function (year, interval) {\n        return (14 + 11 * (year + interval)) % 30 < 11;\n    };\n    Islamic.prototype.getDaysInMonth = function (month, year) {\n        var length = 0;\n        length = 29 + ((month + 1) % 2);\n        if (month === 11 && this.isLeapYear(year, 0)) {\n            length++;\n        }\n        return length;\n    };\n    Islamic.prototype.getHijriDate = function (date) {\n        return HijriParser.getHijriDate(date);\n    };\n    return Islamic;\n}());\n\n/**\n * Time zone\n */\nvar Timezone = /** @__PURE__ @class */ (function () {\n    function Timezone() {\n        this.timezoneData = [];\n        this.timezoneData = this.getTimezoneData();\n    }\n    Timezone.prototype.offset = function (date, timezone) {\n        var localOffset = date.getTimezoneOffset();\n        try {\n            var convertedDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\n            if (!isNaN(convertedDate.getTime())) {\n                return ((date.getTime() - convertedDate.getTime()) / 60000) + localOffset;\n            }\n            return 0;\n        }\n        catch (error) {\n            return 0;\n        }\n    };\n    Timezone.prototype.convert = function (date, fromOffset, toOffset) {\n        if (typeof fromOffset === 'string') {\n            fromOffset = this.offset(date, fromOffset);\n        }\n        if (typeof toOffset === 'string') {\n            toOffset = this.offset(date, toOffset);\n        }\n        var fromLocalOffset = date.getTimezoneOffset();\n        date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n        var toLocalOffset = date.getTimezoneOffset();\n        return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n    };\n    Timezone.prototype.add = function (date, timezone) {\n        return this.convert(date, date.getTimezoneOffset(), timezone);\n    };\n    Timezone.prototype.remove = function (date, timezone) {\n        return this.convert(date, timezone, date.getTimezoneOffset());\n    };\n    Timezone.prototype.removeLocalOffset = function (date) {\n        return new Date(date.getTime() - (date.getTimezoneOffset() * 60000));\n    };\n    Timezone.prototype.getLocalTimezoneName = function () {\n        return window.Intl ? Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n    };\n    Timezone.prototype.getTimezoneData = function () {\n        return timezoneData;\n    };\n    return Timezone;\n}());\nvar timezoneData = [\n    { Value: 'Pacific/Niue', Text: '(UTC-11:00) Niue' },\n    { Value: 'Pacific/Pago_Pago', Text: '(UTC-11:00) Pago Pago' },\n    { Value: 'Pacific/Honolulu', Text: '(UTC-10:00) Hawaii Time' },\n    { Value: 'Pacific/Rarotonga', Text: '(UTC-10:00) Rarotonga' },\n    { Value: 'Pacific/Tahiti', Text: '(UTC-10:00) Tahiti' },\n    { Value: 'Pacific/Marquesas', Text: '(UTC-09:30) Marquesas' },\n    { Value: 'America/Anchorage', Text: '(UTC-09:00) Alaska Time' },\n    { Value: 'Pacific/Gambier', Text: '(UTC-09:00) Gambier' },\n    { Value: 'America/Los_Angeles', Text: '(UTC-08:00) Pacific Time' },\n    { Value: 'America/Tijuana', Text: '(UTC-08:00) Pacific Time - Tijuana' },\n    { Value: 'America/Vancouver', Text: '(UTC-08:00) Pacific Time - Vancouver' },\n    { Value: 'America/Whitehorse', Text: '(UTC-08:00) Pacific Time - Whitehorse' },\n    { Value: 'Pacific/Pitcairn', Text: '(UTC-08:00) Pitcairn' },\n    { Value: 'America/Denver', Text: '(UTC-07:00) Mountain Time' },\n    { Value: 'America/Phoenix', Text: '(UTC-07:00) Mountain Time - Arizona' },\n    { Value: 'America/Mazatlan', Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan' },\n    { Value: 'America/Dawson_Creek', Text: '(UTC-07:00) Mountain Time - Dawson Creek' },\n    { Value: 'America/Edmonton', Text: '(UTC-07:00) Mountain Time - Edmonton' },\n    { Value: 'America/Hermosillo', Text: '(UTC-07:00) Mountain Time - Hermosillo' },\n    { Value: 'America/Yellowknife', Text: '(UTC-07:00) Mountain Time - Yellowknife' },\n    { Value: 'America/Belize', Text: '(UTC-06:00) Belize' },\n    { Value: 'America/Chicago', Text: '(UTC-06:00) Central Time' },\n    { Value: 'America/Mexico_City', Text: '(UTC-06:00) Central Time - Mexico City' },\n    { Value: 'America/Regina', Text: '(UTC-06:00) Central Time - Regina' },\n    { Value: 'America/Tegucigalpa', Text: '(UTC-06:00) Central Time - Tegucigalpa' },\n    { Value: 'America/Winnipeg', Text: '(UTC-06:00) Central Time - Winnipeg' },\n    { Value: 'America/Costa_Rica', Text: '(UTC-06:00) Costa Rica' },\n    { Value: 'America/El_Salvador', Text: '(UTC-06:00) El Salvador' },\n    { Value: 'Pacific/Galapagos', Text: '(UTC-06:00) Galapagos' },\n    { Value: 'America/Guatemala', Text: '(UTC-06:00) Guatemala' },\n    { Value: 'America/Managua', Text: '(UTC-06:00) Managua' },\n    { Value: 'America/Cancun', Text: '(UTC-05:00) America Cancun' },\n    { Value: 'America/Bogota', Text: '(UTC-05:00) Bogota' },\n    { Value: 'Pacific/Easter', Text: '(UTC-05:00) Easter Island' },\n    { Value: 'America/New_York', Text: '(UTC-05:00) Eastern Time' },\n    { Value: 'America/Iqaluit', Text: '(UTC-05:00) Eastern Time - Iqaluit' },\n    { Value: 'America/Toronto', Text: '(UTC-05:00) Eastern Time - Toronto' },\n    { Value: 'America/Guayaquil', Text: '(UTC-05:00) Guayaquil' },\n    { Value: 'America/Havana', Text: '(UTC-05:00) Havana' },\n    { Value: 'America/Jamaica', Text: '(UTC-05:00) Jamaica' },\n    { Value: 'America/Lima', Text: '(UTC-05:00) Lima' },\n    { Value: 'America/Nassau', Text: '(UTC-05:00) Nassau' },\n    { Value: 'America/Panama', Text: '(UTC-05:00) Panama' },\n    { Value: 'America/Port-au-Prince', Text: '(UTC-05:00) Port-au-Prince' },\n    { Value: 'America/Rio_Branco', Text: '(UTC-05:00) Rio Branco' },\n    { Value: 'America/Halifax', Text: '(UTC-04:00) Atlantic Time - Halifax' },\n    { Value: 'America/Barbados', Text: '(UTC-04:00) Barbados' },\n    { Value: 'Atlantic/Bermuda', Text: '(UTC-04:00) Bermuda' },\n    { Value: 'America/Boa_Vista', Text: '(UTC-04:00) Boa Vista' },\n    { Value: 'America/Caracas', Text: '(UTC-04:00) Caracas' },\n    { Value: 'America/Curacao', Text: '(UTC-04:00) Curacao' },\n    { Value: 'America/Grand_Turk', Text: '(UTC-04:00) Grand Turk' },\n    { Value: 'America/Guyana', Text: '(UTC-04:00) Guyana' },\n    { Value: 'America/La_Paz', Text: '(UTC-04:00) La Paz' },\n    { Value: 'America/Manaus', Text: '(UTC-04:00) Manaus' },\n    { Value: 'America/Martinique', Text: '(UTC-04:00) Martinique' },\n    { Value: 'America/Port_of_Spain', Text: '(UTC-04:00) Port of Spain' },\n    { Value: 'America/Porto_Velho', Text: '(UTC-04:00) Porto Velho' },\n    { Value: 'America/Puerto_Rico', Text: '(UTC-04:00) Puerto Rico' },\n    { Value: 'America/Santo_Domingo', Text: '(UTC-04:00) Santo Domingo' },\n    { Value: 'America/Thule', Text: '(UTC-04:00) Thule' },\n    { Value: 'America/St_Johns', Text: '(UTC-03:30) Newfoundland Time - St. Johns' },\n    { Value: 'America/Araguaina', Text: '(UTC-03:00) Araguaina' },\n    { Value: 'America/Asuncion', Text: '(UTC-03:00) Asuncion' },\n    { Value: 'America/Belem', Text: '(UTC-03:00) Belem' },\n    { Value: 'America/Argentina/Buenos_Aires', Text: '(UTC-03:00) Buenos Aires' },\n    { Value: 'America/Campo_Grande', Text: '(UTC-03:00) Campo Grande' },\n    { Value: 'America/Cayenne', Text: '(UTC-03:00) Cayenne' },\n    { Value: 'America/Cuiaba', Text: '(UTC-03:00) Cuiaba' },\n    { Value: 'America/Fortaleza', Text: '(UTC-03:00) Fortaleza' },\n    { Value: 'America/Godthab', Text: '(UTC-03:00) Godthab' },\n    { Value: 'America/Maceio', Text: '(UTC-03:00) Maceio' },\n    { Value: 'America/Miquelon', Text: '(UTC-03:00) Miquelon' },\n    { Value: 'America/Montevideo', Text: '(UTC-03:00) Montevideo' },\n    { Value: 'Antarctica/Palmer', Text: '(UTC-03:00) Palmer' },\n    { Value: 'America/Paramaribo', Text: '(UTC-03:00) Paramaribo' },\n    { Value: 'America/Punta_Arenas', Text: '(UTC-03:00) Punta Arenas' },\n    { Value: 'America/Recife', Text: '(UTC-03:00) Recife' },\n    { Value: 'Antarctica/Rothera', Text: '(UTC-03:00) Rothera' },\n    { Value: 'America/Bahia', Text: '(UTC-03:00) Salvador' },\n    { Value: 'America/Santiago', Text: '(UTC-03:00) Santiago' },\n    { Value: 'Atlantic/Stanley', Text: '(UTC-03:00) Stanley' },\n    { Value: 'America/Noronha', Text: '(UTC-02:00) Noronha' },\n    { Value: 'America/Sao_Paulo', Text: '(UTC-02:00) Sao Paulo' },\n    { Value: 'Atlantic/South_Georgia', Text: '(UTC-02:00) South Georgia' },\n    { Value: 'Atlantic/Azores', Text: '(UTC-01:00) Azores' },\n    { Value: 'Atlantic/Cape_Verde', Text: '(UTC-01:00) Cape Verde' },\n    { Value: 'America/Scoresbysund', Text: '(UTC-01:00) Scoresbysund' },\n    { Value: 'Africa/Abidjan', Text: '(UTC+00:00) Abidjan' },\n    { Value: 'Africa/Accra', Text: '(UTC+00:00) Accra' },\n    { Value: 'Africa/Bissau', Text: '(UTC+00:00) Bissau' },\n    { Value: 'Atlantic/Canary', Text: '(UTC+00:00) Canary Islands' },\n    { Value: 'Africa/Casablanca', Text: '(UTC+00:00) Casablanca' },\n    { Value: 'America/Danmarkshavn', Text: '(UTC+00:00) Danmarkshavn' },\n    { Value: 'Europe/Dublin', Text: '(UTC+00:00) Dublin' },\n    { Value: 'Africa/El_Aaiun', Text: '(UTC+00:00) El Aaiun' },\n    { Value: 'Atlantic/Faroe', Text: '(UTC+00:00) Faeroe' },\n    { Value: 'Etc/UTC', Text: '(UTC+00:00) UTC (no daylight saving)' },\n    { Value: 'Europe/Lisbon', Text: '(UTC+00:00) Lisbon' },\n    { Value: 'Europe/London', Text: '(UTC+00:00) London' },\n    { Value: 'Africa/Monrovia', Text: '(UTC+00:00) Monrovia' },\n    { Value: 'Atlantic/Reykjavik', Text: '(UTC+00:00) Reykjavik' },\n    { Value: 'UTC', Text: 'UTC' },\n    { Value: 'Africa/Algiers', Text: '(UTC+01:00) Algiers' },\n    { Value: 'Europe/Amsterdam', Text: '(UTC+01:00) Amsterdam' },\n    { Value: 'Europe/Andorra', Text: '(UTC+01:00) Andorra' },\n    { Value: 'Europe/Berlin', Text: '(UTC+01:00) Berlin' },\n    { Value: 'Europe/Brussels', Text: '(UTC+01:00) Brussels' },\n    { Value: 'Europe/Budapest', Text: '(UTC+01:00) Budapest' },\n    { Value: 'Europe/Belgrade', Text: '(UTC+01:00) Central European Time - Belgrade' },\n    { Value: 'Europe/Prague', Text: '(UTC+01:00) Central European Time - Prague' },\n    { Value: 'Africa/Ceuta', Text: '(UTC+01:00) Ceuta' },\n    { Value: 'Europe/Copenhagen', Text: '(UTC+01:00) Copenhagen' },\n    { Value: 'Europe/Gibraltar', Text: '(UTC+01:00) Gibraltar' },\n    { Value: 'Africa/Lagos', Text: '(UTC+01:00) Lagos' },\n    { Value: 'Europe/Luxembourg', Text: '(UTC+01:00) Luxembourg' },\n    { Value: 'Europe/Madrid', Text: '(UTC+01:00) Madrid' },\n    { Value: 'Europe/Malta', Text: '(UTC+01:00) Malta' },\n    { Value: 'Europe/Monaco', Text: '(UTC+01:00) Monaco' },\n    { Value: 'Africa/Ndjamena', Text: '(UTC+01:00) Ndjamena' },\n    { Value: 'Europe/Oslo', Text: '(UTC+01:00) Oslo' },\n    { Value: 'Europe/Paris', Text: '(UTC+01:00) Paris' },\n    { Value: 'Europe/Rome', Text: '(UTC+01:00) Rome' },\n    { Value: 'Europe/Stockholm', Text: '(UTC+01:00) Stockholm' },\n    { Value: 'Europe/Tirane', Text: '(UTC+01:00) Tirane' },\n    { Value: 'Africa/Tunis', Text: '(UTC+01:00) Tunis' },\n    { Value: 'Europe/Vienna', Text: '(UTC+01:00) Vienna' },\n    { Value: 'Europe/Warsaw', Text: '(UTC+01:00) Warsaw' },\n    { Value: 'Europe/Zurich', Text: '(UTC+01:00) Zurich' },\n    { Value: 'Asia/Amman', Text: '(UTC+02:00) Amman' },\n    { Value: 'Europe/Athens', Text: '(UTC+02:00) Athens' },\n    { Value: 'Asia/Beirut', Text: '(UTC+02:00) Beirut' },\n    { Value: 'Europe/Bucharest', Text: '(UTC+02:00) Bucharest' },\n    { Value: 'Africa/Cairo', Text: '(UTC+02:00) Cairo' },\n    { Value: 'Europe/Chisinau', Text: '(UTC+02:00) Chisinau' },\n    { Value: 'Asia/Damascus', Text: '(UTC+02:00) Damascus' },\n    { Value: 'Asia/Gaza', Text: '(UTC+02:00) Gaza' },\n    { Value: 'Europe/Helsinki', Text: '(UTC+02:00) Helsinki' },\n    { Value: 'Asia/Jerusalem', Text: '(UTC+02:00) Jerusalem' },\n    { Value: 'Africa/Johannesburg', Text: '(UTC+02:00) Johannesburg' },\n    { Value: 'Africa/Khartoum', Text: '(UTC+02:00) Khartoum' },\n    { Value: 'Europe/Kiev', Text: '(UTC+02:00) Kiev' },\n    { Value: 'Africa/Maputo', Text: '(UTC+02:00) Maputo' },\n    { Value: 'Europe/Kaliningrad', Text: '(UTC+02:00) Moscow-01 - Kaliningrad' },\n    { Value: 'Asia/Nicosia', Text: '(UTC+02:00) Nicosia' },\n    { Value: 'Europe/Riga', Text: '(UTC+02:00) Riga' },\n    { Value: 'Europe/Sofia', Text: '(UTC+02:00) Sofia' },\n    { Value: 'Europe/Tallinn', Text: '(UTC+02:00) Tallinn' },\n    { Value: 'Africa/Tripoli', Text: '(UTC+02:00) Tripoli' },\n    { Value: 'Europe/Vilnius', Text: '(UTC+02:00) Vilnius' },\n    { Value: 'Africa/Windhoek', Text: '(UTC+02:00) Windhoek' },\n    { Value: 'Asia/Baghdad', Text: '(UTC+03:00) Baghdad' },\n    { Value: 'Europe/Istanbul', Text: '(UTC+03:00) Istanbul' },\n    { Value: 'Europe/Minsk', Text: '(UTC+03:00) Minsk' },\n    { Value: 'Europe/Moscow', Text: '(UTC+03:00) Moscow+00 - Moscow' },\n    { Value: 'Africa/Nairobi', Text: '(UTC+03:00) Nairobi' },\n    { Value: 'Asia/Qatar', Text: '(UTC+03:00) Qatar' },\n    { Value: 'Asia/Riyadh', Text: '(UTC+03:00) Riyadh' },\n    { Value: 'Antarctica/Syowa', Text: '(UTC+03:00) Syowa' },\n    { Value: 'Asia/Tehran', Text: '(UTC+03:30) Tehran' },\n    { Value: 'Asia/Baku', Text: '(UTC+04:00) Baku' },\n    { Value: 'Asia/Dubai', Text: '(UTC+04:00) Dubai' },\n    { Value: 'Indian/Mahe', Text: '(UTC+04:00) Mahe' },\n    { Value: 'Indian/Mauritius', Text: '(UTC+04:00) Mauritius' },\n    { Value: 'Europe/Samara', Text: '(UTC+04:00) Moscow+01 - Samara' },\n    { Value: 'Indian/Reunion', Text: '(UTC+04:00) Reunion' },\n    { Value: 'Asia/Tbilisi', Text: '(UTC+04:00) Tbilisi' },\n    { Value: 'Asia/Yerevan', Text: '(UTC+04:00) Yerevan' },\n    { Value: 'Asia/Kabul', Text: '(UTC+04:30) Kabul' },\n    { Value: 'Asia/Aqtau', Text: '(UTC+05:00) Aqtau' },\n    { Value: 'Asia/Aqtobe', Text: '(UTC+05:00) Aqtobe' },\n    { Value: 'Asia/Ashgabat', Text: '(UTC+05:00) Ashgabat' },\n    { Value: 'Asia/Dushanbe', Text: '(UTC+05:00) Dushanbe' },\n    { Value: 'Asia/Karachi', Text: '(UTC+05:00) Karachi' },\n    { Value: 'Indian/Kerguelen', Text: '(UTC+05:00) Kerguelen' },\n    { Value: 'Indian/Maldives', Text: '(UTC+05:00) Maldives' },\n    { Value: 'Antarctica/Mawson', Text: '(UTC+05:00) Mawson' },\n    { Value: 'Asia/Yekaterinburg', Text: '(UTC+05:00) Moscow+02 - Yekaterinburg' },\n    { Value: 'Asia/Tashkent', Text: '(UTC+05:00) Tashkent' },\n    { Value: 'Asia/Colombo', Text: '(UTC+05:30) Colombo' },\n    { Value: 'Asia/Kolkata', Text: '(UTC+05:30) India Standard Time' },\n    { Value: 'Asia/Katmandu', Text: '(UTC+05:45) Katmandu' },\n    { Value: 'Asia/Almaty', Text: '(UTC+06:00) Almaty' },\n    { Value: 'Asia/Bishkek', Text: '(UTC+06:00) Bishkek' },\n    { Value: 'Indian/Chagos', Text: '(UTC+06:00) Chagos' },\n    { Value: 'Asia/Dhaka', Text: '(UTC+06:00) Dhaka' },\n    { Value: 'Asia/Omsk', Text: '(UTC+06:00) Moscow+03 - Omsk' },\n    { Value: 'Asia/Thimphu', Text: '(UTC+06:00) Thimphu' },\n    { Value: 'Antarctica/Vostok', Text: '(UTC+06:00) Vostok' },\n    { Value: 'Indian/Cocos', Text: '(UTC+06:30) Cocos' },\n    { Value: 'Asia/Yangon', Text: '(UTC+06:30) Rangoon' },\n    { Value: 'Asia/Bangkok', Text: '(UTC+07:00) Bangkok' },\n    { Value: 'Indian/Christmas', Text: '(UTC+07:00) Christmas' },\n    { Value: 'Antarctica/Davis', Text: '(UTC+07:00) Davis' },\n    { Value: 'Asia/Saigon', Text: '(UTC+07:00) Hanoi' },\n    { Value: 'Asia/Hovd', Text: '(UTC+07:00) Hovd' },\n    { Value: 'Asia/Jakarta', Text: '(UTC+07:00) Jakarta' },\n    { Value: 'Asia/Krasnoyarsk', Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk' },\n    { Value: 'Asia/Brunei', Text: '(UTC+08:00) Brunei' },\n    { Value: 'Asia/Shanghai', Text: '(UTC+08:00) China Time - Beijing' },\n    { Value: 'Asia/Choibalsan', Text: '(UTC+08:00) Choibalsan' },\n    { Value: 'Asia/Hong_Kong', Text: '(UTC+08:00) Hong Kong' },\n    { Value: 'Asia/Kuala_Lumpur', Text: '(UTC+08:00) Kuala Lumpur' },\n    { Value: 'Asia/Macau', Text: '(UTC+08:00) Macau' },\n    { Value: 'Asia/Makassar', Text: '(UTC+08:00) Makassar' },\n    { Value: 'Asia/Manila', Text: '(UTC+08:00) Manila' },\n    { Value: 'Asia/Irkutsk', Text: '(UTC+08:00) Moscow+05 - Irkutsk' },\n    { Value: 'Asia/Singapore', Text: '(UTC+08:00) Singapore' },\n    { Value: 'Asia/Taipei', Text: '(UTC+08:00) Taipei' },\n    { Value: 'Asia/Ulaanbaatar', Text: '(UTC+08:00) Ulaanbaatar' },\n    { Value: 'Australia/Perth', Text: '(UTC+08:00) Western Time - Perth' },\n    { Value: 'Asia/Pyongyang', Text: '(UTC+08:30) Pyongyang' },\n    { Value: 'Asia/Dili', Text: '(UTC+09:00) Dili' },\n    { Value: 'Asia/Jayapura', Text: '(UTC+09:00) Jayapura' },\n    { Value: 'Asia/Yakutsk', Text: '(UTC+09:00) Moscow+06 - Yakutsk' },\n    { Value: 'Pacific/Palau', Text: '(UTC+09:00) Palau' },\n    { Value: 'Asia/Seoul', Text: '(UTC+09:00) Seoul' },\n    { Value: 'Asia/Tokyo', Text: '(UTC+09:00) Tokyo' },\n    { Value: 'Australia/Darwin', Text: '(UTC+09:30) Central Time - Darwin' },\n    { Value: 'Antarctica/DumontDUrville', Text: '(UTC+10:00) Dumont D\"Urville' },\n    { Value: 'Australia/Brisbane', Text: '(UTC+10:00) Eastern Time - Brisbane' },\n    { Value: 'Pacific/Guam', Text: '(UTC+10:00) Guam' },\n    { Value: 'Asia/Vladivostok', Text: '(UTC+10:00) Moscow+07 - Vladivostok' },\n    { Value: 'Pacific/Port_Moresby', Text: '(UTC+10:00) Port Moresby' },\n    { Value: 'Pacific / Chuuk', Text: '(UTC+10:00) Truk' },\n    { Value: 'Australia/Adelaide', Text: '(UTC+10:30) Central Time - Adelaide' },\n    { Value: 'Antarctica/Casey', Text: '(UTC+11:00) Casey' },\n    { Value: 'Australia/Hobart', Text: '(UTC+11:00) Eastern Time - Hobart' },\n    { Value: 'Australia/Sydney', Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney' },\n    { Value: 'Pacific/Efate', Text: '(UTC+11:00) Efate' },\n    { Value: 'Pacific/Guadalcanal', Text: '(UTC+11:00) Guadalcanal' },\n    { Value: 'Pacific/Kosrae', Text: '(UTC+11:00) Kosrae' },\n    { Value: 'Asia/Magadan', Text: '(UTC+11:00) Moscow+08 - Magadan' },\n    { Value: 'Pacific / Norfolk', Text: '(UTC+11:00) Norfolk' },\n    { Value: 'Pacific/Noumea', Text: '(UTC+11:00) Noumea' },\n    { Value: 'Pacific/Pohnpei', Text: '(UTC+11:00) Ponape' },\n    { Value: 'Pacific/Funafuti', Text: '(UTC+12:00) Funafuti' },\n    { Value: 'Pacific/Kwajalein', Text: '(UTC+12:00) Kwajalein' },\n    { Value: 'Pacific/Majuro', Text: '(UTC+12:00) Majuro' },\n    { Value: 'Asia/Kamchatka', Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy' },\n    { Value: 'Pacific / Nauru', Text: '(UTC+12:00) Nauru' },\n    { Value: 'Pacific/Tarawa', Text: '(UTC+12:00) Tarawa' },\n    { Value: 'Pacific/Wake', Text: '(UTC+12:00) Wake' },\n    { Value: 'Pacific/Wallis', Text: '(UTC+12:00) Wallis' },\n    { Value: 'Pacific/Auckland', Text: '(UTC+13:00) Auckland' },\n    { Value: 'Pacific/Enderbury', Text: '(UTC+13:00) Enderbury' },\n    { Value: 'Pacific/Fakaofo', Text: '(UTC+13:00) Fakaofo' },\n    { Value: 'Pacific/Fiji', Text: '(UTC+13:00) Fiji' },\n    { Value: 'Pacific/Tongatapu', Text: '(UTC+13:00) Tongatapu' },\n    { Value: 'Pacific/Apia', Text: '(UTC+14:00) Apia' },\n    { Value: 'Pacific/Kiritimati', Text: '(UTC+14:00) Kiritimati' }\n];\n\n/* eslint-disable max-len */\n/**\n * Date Generator from Recurrence Rule\n */\n/**\n * Generate Summary from Recurrence Rule\n *\n * @param {string} rule Accepts the Recurrence rule\n * @param {L10n} localeObject Accepts the locale object\n * @param {string} locale Accepts the locale name\n * @param {CalendarType} calendarType Accepts the calendar type\n * @returns {string} Returns the summary string from given recurrence rule\n */\nfunction generateSummary(rule, localeObject, locale, calendarType) {\n    if (calendarType === void 0) { calendarType = 'Gregorian'; }\n    var ruleObject = extractObjectFromRule(rule);\n    var summary = localeObject.getConstant(EVERY) + ' ';\n    var cldrObj;\n    var cldrObj1;\n    var calendarMode = calendarType.toLowerCase();\n    if (locale === 'en' || locale === 'en-US') {\n        var nameSpace1 = 'months.stand-alone.abbreviated';\n        var nameSpace = 'days.stand-alone.abbreviated';\n        cldrObj1 = (getValue(nameSpace1, getDefaultDateObject(calendarMode)));\n        cldrObj = (getValue(nameSpace, getDefaultDateObject(calendarMode)));\n    }\n    else {\n        var nameSpace1 = 'main.' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated';\n        var nameSpace = 'main.' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated';\n        cldrObj1 =\n            (getValue(nameSpace1, cldrData));\n        cldrObj =\n            (getValue(nameSpace, cldrData));\n    }\n    if (ruleObject.interval > 1) {\n        summary += ruleObject.interval + ' ';\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            summary += localeObject.getConstant(DAYS);\n            break;\n        case 'WEEKLY':\n            summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n            ruleObject.day.forEach(function (day, index) {\n                summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT[\"\" + day], cldrObj), 'single');\n                summary += (((ruleObject.day.length - 1) === index) ? '' : ', ');\n            });\n            break;\n        case 'MONTHLY':\n            summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n        case 'YEARLY':\n            summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += capitalizeFirstWord(getValue((ruleObject.month[0]).toString(), cldrObj1), 'single') + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n    }\n    if (ruleObject.count) {\n        summary += ', ' + (ruleObject.count) + ' ' + localeObject.getConstant(TIMES);\n    }\n    else if (ruleObject.until) {\n        var tempDate = ruleObject.until;\n        summary += ', ' + localeObject.getConstant(UNTIL)\n            + ' ' + tempDate.getDate()\n            + ' ' + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), 'single')\n            + ' ' + tempDate.getFullYear();\n    }\n    return summary;\n}\n/**\n * Generates Month summary\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {string[]} cldrObj Accepts the collections of month name from calendar\n * @param {L10n} localeObj Accepts the locale object\n * @returns {string} Returns the month summary string from given recurrence rule object\n * @private\n */\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n    var summary = '';\n    if (ruleObject.monthDay.length) {\n        summary += ruleObject.monthDay[0];\n    }\n    else if (ruleObject.day) {\n        var pos = ruleObject.setPosition - 1;\n        summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : (WEEKPOS.length - 1)])\n            + ' ' + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), 'single');\n    }\n    return summary;\n}\n/**\n * Generates the date collections from the given recurrence rule\n *\n * @param {Date} startDate Accepts the rule start date\n * @param {string} rule Accepts the recurrence rule\n * @param {string} excludeDate Accepts the exception dates in string format\n * @param {number} startDayOfWeek Accepts the start day index of week\n * @param {number} maximumCount Accepts the maximum number count to generate date collections\n * @param {Date} viewDate Accepts the current date instead of start date\n * @param {CalendarType} calendarMode Accepts the calendar type\n * @param {string} oldTimezone Accepts the timezone name\n * @param {string} newTimezone Accepts the timezone name\n * @returns {number[]} Returns the collection of dates\n */\nfunction generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount, viewDate, calendarMode, oldTimezone, newTimezone) {\n    if (maximumCount === void 0) { maximumCount = MAXOCCURRENCE; }\n    if (viewDate === void 0) { viewDate = null; }\n    if (calendarMode === void 0) { calendarMode = 'Gregorian'; }\n    if (oldTimezone === void 0) { oldTimezone = null; }\n    if (newTimezone === void 0) { newTimezone = null; }\n    var ruleObject = extractObjectFromRule(rule);\n    var cacheDate;\n    calendarUtil = getCalendarUtil(calendarMode);\n    var data = [];\n    var modifiedDate = new Date(startDate.getTime());\n    tempExcludeDate = [];\n    var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n    var tz = new Timezone();\n    tempDate.forEach(function (content) {\n        var parsedDate = getDateFromRecurrenceDateString(content);\n        if (oldTimezone && newTimezone) {\n            parsedDate = tz.convert(new Date(parsedDate.getTime()), oldTimezone, newTimezone);\n        }\n        tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n    });\n    ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;\n    if (viewDate && viewDate > startDate && !ruleObject.count) {\n        tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n    }\n    else {\n        tempViewDate = null;\n    }\n    if (!ruleObject.until && tempViewDate) {\n        cacheDate = new Date(tempViewDate.getTime());\n        cacheDate.setDate(tempViewDate.getDate() + maximumCount * (ruleObject.interval));\n        ruleObject.until = cacheDate;\n    }\n    if (ruleObject.until && startDate > ruleObject.until) {\n        return data;\n    }\n    maxOccurrence = maximumCount;\n    setFirstDayOfWeek(DAYINDEX[parseInt(startDayOfWeek.toString(), 10)]);\n    if (ruleObject.until) {\n        var end = resetTime(ruleObject.until);\n        ruleObject.until = new Date(end.getFullYear(), end.getMonth(), end.getDate(), 23, 59, 59);\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'WEEKLY':\n            weeklyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'MONTHLY':\n            monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'YEARLY':\n            yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n    }\n    return data;\n}\n/**\n * Generate date object from given date string\n *\n * @param {string} recDateString Accepts the exception date as string\n * @returns {Date} Returns the date from exception date string\n */\nfunction getDateFromRecurrenceDateString(recDateString) {\n    return new Date(recDateString.substr(0, 4) +\n        '-' + recDateString.substr(4, 2) +\n        '-' + recDateString.substr(6, 5) +\n        ':' + recDateString.substr(11, 2) +\n        ':' + recDateString.substr(13));\n}\n/**\n * Internal method to handle exclude date\n *\n * @param {number[]} data Accepts the exception date collections\n * @param {number} date Accepts the new exclude date\n * @returns {void}\n * @private\n */\nfunction excludeDateHandler(data, date) {\n    var zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n    if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n        data.push(date);\n    }\n}\n/**\n * Internal method for get date count\n *\n * @param {Date} startDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} Returns the number of date count\n * @private\n */\nfunction getDateCount$1(startDate, ruleObject) {\n    var count = maxOccurrence;\n    if (ruleObject.count) {\n        count = ruleObject.count;\n    }\n    else if (ruleObject.until) {\n        if (ruleObject.freq === 'DAILY' || ruleObject.freq === 'WEEKLY') {\n            count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;\n        }\n        else if (ruleObject.freq === 'MONTHLY' || ruleObject.freq === 'YEARLY') {\n            count = Math.floor(((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear()) -\n                (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) +\n                (ruleObject.day.length > 1 ? (Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1) : 1);\n            if (ruleObject.freq === 'YEARLY') {\n                count = ruleObject.month.length > 1 ? (count * ruleObject.month.length) : count;\n            }\n        }\n    }\n    return count;\n}\n/**\n *  Internal method for daily type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction dailyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var state;\n    var expectedDays = ruleObject.day;\n    while (compareDates(tempDate, endDate)) {\n        state = true;\n        state = validateRules(tempDate, ruleObject);\n        if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n            excludeDateHandler(data, tempDate.getTime());\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n        }\n        tempDate.setDate(tempDate.getDate() + interval);\n        if (tempDate.getHours() !== startDate.getHours()) {\n            tempDate.setHours(startDate.getHours());\n        }\n    }\n}\n/**\n * Internal method for weekly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction weeklyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    if (!ruleObject.day.length) {\n        ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n    }\n    var interval = ruleObject.interval;\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var weekState = true;\n    var wkstIndex;\n    var weekCollection = [];\n    if (expectedDays.length > 1) {\n        if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n            ruleObject.wkst = dayIndex[0];\n        }\n        wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n        while (compareDates(tempDate, endDate)) {\n            var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n            startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n            var weekstartDate = addDays(tempDate, -startDateDiff);\n            var weekendDate = addDays(weekstartDate, 6);\n            var compareTempDate = new Date(tempDate.getTime());\n            weekendDate = resetTime(weekendDate);\n            compareTempDate = resetTime(compareTempDate);\n            while (weekendDate >= compareTempDate) {\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    weekCollection.push([tempDate.getTime()]);\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    break;\n                }\n                tempDate.setDate(tempDate.getDate() + 1);\n                if (tempDate.getHours() !== startDate.getHours()) {\n                    tempDate.setHours(startDate.getHours());\n                }\n                compareTempDate = new Date(tempDate.getTime());\n                compareTempDate = resetTime(compareTempDate);\n            }\n            tempDate.setDate(tempDate.getDate() - 1);\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate((tempDate.getDate()) + 1 + ((interval - 1) * 7));\n            insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n            weekCollection = [];\n        }\n    }\n    else {\n        tempDate = getStartDateForWeek(startDate, ruleObject.day);\n        while (compareDates(tempDate, endDate)) {\n            weekState = validateRules(tempDate, ruleObject);\n            if (weekState && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1)) {\n                excludeDateHandler(data, tempDate.getTime());\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate(tempDate.getDate() + (interval * 7));\n        }\n        insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n        weekCollection = [];\n    }\n}\n/**\n *  Internal method for monthly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n    // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n    if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n        if (ruleObject.freq === 'YEARLY') {\n            ruleObject.month.push(startDate.getMonth() + 1);\n        }\n    }\n    else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n    }\n    var ruleType = validateMonthlyRuleType(ruleObject);\n    switch (ruleType) {\n        case 'day':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n        case 'both':\n        case 'date':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n    }\n}\n/**\n * Internal method for yearly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n    var typeValue = checkYearlyType(ruleObject);\n    switch (typeValue) {\n        case 'MONTH':\n            monthlyType(startDate, endDate, data, ruleObject);\n            break;\n        case 'WEEKNO':\n            processWeekNo(startDate, endDate, data, ruleObject);\n            break;\n        case 'YEARDAY':\n            processYearDay(startDate, endDate, data, ruleObject);\n            break;\n    }\n}\n/**\n * Internal method for process week no\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var state;\n    var startDay;\n    var firstWeekSpan;\n    var weekNos = ruleObject.weekNo;\n    var weekNo;\n    var maxDate;\n    var minDate;\n    var weekCollection = [];\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n        firstWeekSpan = (6 - startDay) + 1;\n        for (var index = 0; index < weekNos.length; index++) {\n            weekNo = weekNos[parseInt(index.toString(), 10)];\n            weekNo = (weekNo > 0) ? weekNo : 53 + weekNo + 1;\n            maxDate = (weekNo === 1) ? firstWeekSpan : firstWeekSpan + ((weekNo - 1) * 7);\n            minDate = (weekNo === 1) ? firstWeekSpan - 7 : firstWeekSpan + ((weekNo - 2) * 7);\n            while (minDate < maxDate) {\n                tempDate = new Date(stDate.getTime() + (MS_PER_DAY * minDate));\n                if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                    }\n                    else {\n                        weekCollection.push([tempDate.getTime()]);\n                    }\n                }\n                minDate++;\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        weekCollection = [];\n    }\n}\n/**\n * Internal method for process year day\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var state;\n    var dateCollection = [];\n    var date;\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        for (var index = 0; index < ruleObject.yearDay.length; index++) {\n            date = ruleObject.yearDay[parseInt(index.toString(), 10)];\n            tempDate = new Date(stDate.getTime());\n            if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) &&\n                (!calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1))) {\n                tempDate.setDate(tempDate.getDate() + 1);\n                continue;\n            }\n            tempDate.setDate(tempDate.getDate() + ((date < 0) ?\n                calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n            if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                if (ruleObject.setPosition == null) {\n                    insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                }\n                else {\n                    dateCollection.push([tempDate.getTime()]);\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        dateCollection = [];\n    }\n}\n/**\n * Internal method to check yearly type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {YearRuleType} Returns the Yearly rule type object\n * @private\n */\nfunction checkYearlyType(ruleObject) {\n    if (ruleObject.yearDay.length) {\n        return 'YEARDAY';\n    }\n    else if (ruleObject.weekNo.length) {\n        return 'WEEKNO';\n    }\n    return 'MONTH';\n}\n/**\n * Internal method to initialize recurrence rule variables\n *\n * @param {Date} startDate Accepts the start date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {RuleData} Return the rule data object\n * @private\n */\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n    var ruleData = {\n        monthCollection: [],\n        index: 0,\n        tempDate: new Date(startDate.getTime()),\n        mainDate: new Date(startDate.getTime()),\n        expectedCount: getDateCount$1(startDate, ruleObject),\n        monthInit: 0,\n        dateCollection: []\n    };\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n    }\n    return ruleData;\n}\n/**\n * Internal method for process monthly date type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n    if (ruleObject.month.length) {\n        monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    var currentMonthDate;\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    while (compareDates(ruleData.tempDate, endDate)) {\n        currentMonthDate = new Date(ruleData.tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) &&\n            (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) <= ruleData.expectedCount)) {\n            if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month))) {\n                processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n                ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n                ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n            }\n            else {\n                calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n                ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n                break;\n            }\n        }\n        ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n            calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n            ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * Internal method for process monthly date type with month frequency from recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    if (((ruleObject.freq === 'MONTHLY' && ruleObject.interval === 12) || (ruleObject.freq === 'YEARLY')) &&\n        calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {\n        return;\n    }\n    while (compareDates(ruleData.tempDate, endDate)) {\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * To process date collection for Monthly & Yearly based on BYMONTH Day property\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {RuleData} recRuleVariables Accepts the rule data\n * @param {Date} endDate Accepts the end date\n * @param {boolean} isByMonth Accepts the boolean to validate either month or not\n * @param {Date} startDate Accepts the start date\n * @param {number[]} data Accepts the collection of dates\n * @returns {void}\n * @private\n */\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n    for (var index = 0; index < ruleObject.monthDay.length; index++) {\n        recRuleVariables.date = ruleObject.monthDay[parseInt(index.toString(), 10)];\n        recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n        var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n        recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : (maxDate + recRuleVariables.date + 1);\n        if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate)\n            && (recRuleVariables.date > 0)) {\n            calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n            if (endDate && recRuleVariables.tempDate > endDate) {\n                return;\n            }\n            if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n                if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && (recRuleVariables.expectedCount\n                    && (data.length + ruleObject.recExceptionCount) < recRuleVariables.expectedCount)) {\n                    insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n                }\n                else {\n                    recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n                }\n            }\n        }\n    }\n}\n/**\n * Internal method to set next valid date\n *\n * @param {Date} tempDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} monthInit Accepts the initial month\n * @param {Date} beginDate Accepts the initial date\n * @param {number} interval Accepts the interval duration\n * @returns {number} Returnx the next valid date\n * @private\n */\nfunction setNextValidDate(tempDate, ruleObject, monthInit, beginDate, interval) {\n    if (beginDate === void 0) { beginDate = null; }\n    var monthData = beginDate ? beginDate.getMonth() : 0;\n    var startDate = calendarUtil.getMonthStartDate(tempDate);\n    interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n    tempDate.setFullYear(startDate.getFullYear());\n    tempDate.setMonth(startDate.getMonth());\n    tempDate.setDate(startDate.getDate());\n    if (ruleObject.month.length) {\n        monthInit++;\n        monthInit = monthInit % ruleObject.month.length;\n        calendarUtil.setMonth(tempDate, ruleObject.month[parseInt(monthInit.toString(), 10)], 1);\n        if (monthInit === 0) {\n            calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n        }\n    }\n    else {\n        if (beginDate && (beginDate.getFullYear() < tempDate.getFullYear())) {\n            monthData = tempDate.getMonth() - 1;\n        }\n        calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n    }\n    return monthInit;\n}\n/**\n * To get month collection when BYDAY property having more than one value in list.\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var tempDate = new Date(startDate.getTime());\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var monthCollection = [];\n    var dateCollection = [];\n    var dates = [];\n    var index;\n    var state;\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var monthInit = 0;\n    var beginDate;\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)\n        && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        var currentMonthDate = new Date(tempDate.getTime());\n        var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n        if (isHavingNumber.indexOf(true) > -1) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);\n                var position = parseInt(expectedDaysArray[0], 10);\n                tempDate = new Date(tempDate.getTime());\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, expectedDays);\n                currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n                    if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n                        monthCollection.push([currentMonthDate.getTime()]);\n                    }\n                    currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                }\n                currentMonthDate.setDate(currentMonthDate.getDate() - (1));\n                if (expectedDaysArray[0].indexOf('-') > -1) {\n                    index = monthCollection.length - (-1 * position);\n                }\n                else {\n                    index = position - 1;\n                }\n                index = isNaN(index) ? 0 : index;\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, dates))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n                monthCollection = [];\n            }\n            if (!isNullOrUndefined(ruleObject.setPosition)) {\n                insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n                dates = [];\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n        else {\n            var weekCollection = [];\n            var dayCycleData = processWeekDays(expectedDays);\n            currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n            var initialDate = new Date(tempDate.getTime());\n            beginDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n                weekCollection.push(tempDate.getTime());\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    monthCollection.push(weekCollection);\n                    weekCollection = [];\n                }\n                tempDate.setDate(tempDate.getDate()\n                    + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n            }\n            index = ((ruleObject.setPosition < 1) ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n            if (isNullOrUndefined(ruleObject.setPosition)) {\n                index = 0;\n                var datas = [];\n                for (var week = 0; week < monthCollection.length; week++) {\n                    for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {\n                        datas.push(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]);\n                    }\n                }\n                monthCollection = [datas];\n            }\n            if (monthCollection.length > 0) {\n                insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                return;\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n    }\n}\n/**\n * To process monday day type for FREQ=MONTHLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    // When BYDAY property having more than 1 value.\n    if (expectedDays.length > 1) {\n        getMonthCollection(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var monthCollection = [];\n    var beginDate;\n    var monthInit = 0;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate) && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        beginDate = new Date(tempDate.getTime());\n        var currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n            monthCollection.push([currentMonthDate.getTime()]);\n            currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n        }\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process monday day type for FREQ=YEARLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n    // If BYDAY property having more than 1 value in list\n    if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n        processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n        return;\n    }\n    else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n        monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var currentMonthDate;\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n    // Set the date as start date of the yeear if yearly freq having ByDay property alone\n    if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n        tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n    }\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n            (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n            currentMonthDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                    && !calendarUtil.checkMonth(tempDate, ruleObject.month))) {\n                    if (expectedDays.length > 1) {\n                        if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                    }\n                    else {\n                        // If BYDAY property having 1 value in list\n                        if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        var newstr = getDayString(expectedDays[0]);\n                        if (DAYINDEX[currentMonthDate.getDay()] === newstr\n                            && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0)\n                                > new Date(startDate.getFullYear())) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n                    }\n                }\n                else {\n                    calendarUtil.setValidDate(tempDate, 1, 1);\n                    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    break;\n                }\n            }\n        }\n        tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        }\n        tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process the recurrence rule when BYDAY property having values with integer\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    var dateCollection = [];\n    var index;\n    var state;\n    var monthInit = 0;\n    var currentMonthDate;\n    var currentDate;\n    var beginDate;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var datas = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        for (var i = 0; i <= ruleObject.month.length; i++) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                monthCollection = [];\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n                    (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n                    while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                        currentMonthDate = new Date(tempDate.getTime());\n                        if (ruleObject.month.length === 0 ||\n                            (ruleObject.month.length > 0 && ruleObject.month[parseInt(i.toString(), 10)] === calendarUtil.getMonth(currentMonthDate))) {\n                            var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);\n                            var position = parseInt(expectedDaysArray[0], 10);\n                            currentDate = new Date(tempDate.getTime());\n                            while (calendarUtil.isSameYear(currentDate, tempDate)\n                                && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                                    monthCollection.push([currentDate.getTime()]);\n                                }\n                                currentDate.setDate(currentDate.getDate() + (1));\n                            }\n                            currentDate.setDate(currentDate.getDate() - (1));\n                            if (expectedDaysArray[0].indexOf('-') > -1) {\n                                index = monthCollection.length - (-1 * position);\n                            }\n                            else {\n                                index = position - 1;\n                            }\n                            index = isNaN(index) ? 0 : index;\n                        }\n                        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n                        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    }\n                }\n                tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n            datas = [];\n        }\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        }\n        else {\n            tempDate.setFullYear(tempDate.getFullYear() + interval);\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        if (ruleObject.month.length) {\n            calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n        }\n    }\n}\n/**\n * To get recurrence collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month collection dates\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {RuleData} Returns the rule data object\n * @private\n */\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n    var index;\n    var recurrenceCollectionObject = { monthCollection: [], index: 0 };\n    if (expectedDays.length === 1) {\n        // To split numeric value from BYDAY property value\n        var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n        var arrPosition = void 0;\n        if (expectedDaysArrays.length > 1) {\n            arrPosition = parseInt(expectedDaysArrays[0], 10);\n            index = ((arrPosition < 1) ? (monthCollection.length + arrPosition) : arrPosition - 1);\n        }\n        else {\n            index = 0;\n            monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n        }\n    }\n    else {\n        index = 0;\n        monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n    recurrenceCollectionObject.monthCollection = monthCollection;\n    recurrenceCollectionObject.index = index;\n    return recurrenceCollectionObject;\n}\n/**\n * Internal method to process the data collections\n *\n * @param {number[]} dateCollection Accepts the date collections\n * @param {boolean} state Accepts the state\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of numbers\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n    var index = ((ruleObject.setPosition < 1) ?\n        (dateCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n    if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n    }\n    if (dateCollection.length > 0) {\n        insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n}\n/**\n * To process month collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @returns {number[]} Returns the month date collections\n * @private\n */\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n    var datas = [];\n    for (var week = 0; week < monthCollection.length; week++) {\n        for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {\n            datas.push(new Date(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]).getTime());\n        }\n    }\n    monthCollection = datas.length > 0 ? [datas] : [];\n    return monthCollection;\n}\n/**\n * To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the date collections\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var state;\n    var datas = [];\n    var dateCollection = [];\n    var recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n    monthCollection = recurrenceCollections.monthCollection;\n    var index = recurrenceCollections.index;\n    if (ruleObject.setPosition != null) {\n        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n    else {\n        if (monthCollection.length > 0) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n        }\n    }\n    datas = [];\n}\n/**\n * To filter date collection when BYDAY property having values with number\n *\n * @param {number[]} monthCollection Accepts the date collections\n * @param {number} index Accepts the index of date collections\n * @param {number[]} datas Accepts the collection of dates\n * @returns {number[]} Returns the collection of dates\n * @private\n */\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n    for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {\n        datas.push(monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)]);\n    }\n    return datas;\n}\n/**\n * To insert processed date collection in final array element\n *\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} dayData Accepts the date index\n * @returns {void}\n * @private\n */\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n    var expectedCount = getDateCount$1(startDate, ruleObject);\n    var chDate = new Date(dayData);\n    state = validateRules(chDate, ruleObject);\n    if ((chDate >= startDate) && compareDates(chDate, endDate) && state\n        && expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount) {\n        excludeDateHandler(data, dayData);\n    }\n}\n/**\n * Return the last week number of given month and year.\n *\n * @param {number} year Accepts the Year in number format\n * @param {number} startDayOfWeek Accepts the start date\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {number} week Accepts the week in number format\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} returns week number\n * @private\n */\nfunction weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {\n    var firstDayOfWeek = startDayOfWeek || 0;\n    var firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);\n    var lastOfMonth = new Date(year, ruleObject.month[0], 0);\n    var numberOfDaysInMonth = lastOfMonth.getDate();\n    var firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;\n    var used = firstWeekDay + numberOfDaysInMonth;\n    var count = Math.ceil(used / 7) - 1;\n    var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(count.toString(), 10)];\n    var chDate = new Date(dayData);\n    var state = validateRules(chDate, ruleObject);\n    return (state) ? count : count - 1;\n}\n/**\n * To process date collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n    if (monthCollection.length > 0) {\n        for (var week = 0; week < monthCollection.length; week++) {\n            monthCollection[parseInt(week.toString(), 10)].sort();\n            var expectedDays = ruleObject.day;\n            var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n            var weekIndex = (ruleObject.freq === 'YEARLY' && (ruleObject.validRules.indexOf('BYMONTH') > -1) &&\n                !(isHavingNumber.indexOf(true) > -1)) ?\n                weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject)\n                : (monthCollection[parseInt(week.toString(), 10)].length + ruleObject.setPosition);\n            var index = ((ruleObject.setPosition < 1) ? weekIndex : ruleObject.setPosition - 1);\n            var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(index.toString(), 10)];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * To insert datas into existing collection which is processed from previous loop.\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} index Accepts the index value\n * @returns {void}\n * @private\n */\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n    if (monthCollection.length > 0) {\n        index = !isNullOrUndefined(index) ? index :\n            ((ruleObject.setPosition < 1)\n                ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n        monthCollection[parseInt(index.toString(), 10)].sort();\n        for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {\n            var dayData = monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * Internal method to compare dates\n *\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @returns {boolean} Returns the result of checking start and end dates\n * @private\n */\nfunction compareDates(startDate, endDate) {\n    return endDate ? (startDate <= endDate) : true;\n}\n/**\n * Internal method to get day string\n *\n * @param {string} expectedDays Accepts the exception date string\n * @returns {string} Returns the valid string\n * @private\n */\nfunction getDayString(expectedDays) {\n    // To get BYDAY value without numeric value\n    var newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n    return newstr;\n}\n/**\n * Internal method to check day index\n *\n * @param {number} day Accepts the day index\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {boolean} Returns the index date\n * @private\n */\nfunction checkDayIndex(day, expectedDays) {\n    var sortedExpectedDays = [];\n    expectedDays.forEach(function (element) {\n        var expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n        if (expectedDaysNumberSplit.length === 2) {\n            sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n        }\n        else {\n            sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n        }\n    });\n    return (sortedExpectedDays.indexOf(DAYINDEX[parseInt(day.toString(), 10)]) === -1);\n}\n/**\n * Internal method to get start date of week\n *\n * @param {Date} startDate Accepts the start date\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {Date} Return the week start date\n * @private\n */\nfunction getStartDateForWeek(startDate, expectedDays) {\n    var tempDate = new Date(startDate.getTime());\n    var newstr;\n    if (expectedDays.length > 0) {\n        var expectedDaysArr = [];\n        for (var i = 0; i <= expectedDays.length - 1; i++) {\n            newstr = getDayString(expectedDays[parseInt(i.toString(), 10)]);\n            expectedDaysArr.push(newstr);\n        }\n        if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n            do {\n                tempDate.setDate(tempDate.getDate() + 1);\n            } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n        }\n    }\n    return tempDate;\n}\n/**\n * Method to generate recurrence rule object from given rule\n *\n * @param {string} rules Accepts the recurrence rule\n * @returns {RecRule} Returns the recurrence rule object\n */\nfunction extractObjectFromRule(rules) {\n    var ruleObject = {\n        freq: null,\n        interval: 1,\n        count: null,\n        until: null,\n        day: [],\n        wkst: null,\n        month: [],\n        weekNo: [],\n        monthDay: [],\n        yearDay: [],\n        setPosition: null,\n        validRules: []\n    };\n    var rulesList = rules.split(';');\n    var splitData = [];\n    var temp;\n    rulesList.forEach(function (data) {\n        splitData = data.split('=');\n        switch (splitData[0]) {\n            case 'UNTIL':\n                temp = splitData[1];\n                ruleObject.until = getDateFromRecurrenceDateString(temp);\n                break;\n            case 'BYDAY':\n                ruleObject.day = splitData[1].split(',');\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTHDAY':\n                ruleObject.monthDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTH':\n                ruleObject.month = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYYEARDAY':\n                ruleObject.yearDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYWEEKNO':\n                ruleObject.weekNo = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'INTERVAL':\n                ruleObject.interval = parseInt(splitData[1], 10);\n                break;\n            case 'COUNT':\n                ruleObject.count = parseInt(splitData[1], 10);\n                break;\n            case 'BYSETPOS':\n                ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);\n                break;\n            case 'FREQ':\n                ruleObject.freq = splitData[1];\n                break;\n            case 'WKST':\n                ruleObject.wkst = splitData[1];\n                break;\n        }\n    });\n    if ((ruleObject.freq === 'MONTHLY') && (ruleObject.monthDay.length === 0)) {\n        var index = ruleObject.validRules.indexOf('BYDAY');\n        ruleObject.validRules.splice(index, 1);\n    }\n    return ruleObject;\n}\n/**\n * Internal method to validate proper date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number} data Accepts the data value\n * @param {Date} startDate Accepts the start date\n * @returns {boolean} Returns the result of date validate\n * @private\n */\nfunction validateProperDate(tempDate, data, startDate) {\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    return (data <= maxDate) && (tempDate >= startDate);\n}\n/**\n * Internal method to process week days\n *\n * @param {string[]} expectedDays Accepts the expection dates\n * @returns {Object} Returns the weekdays object\n * @private\n */\nfunction processWeekDays(expectedDays) {\n    var dayCycle = {};\n    expectedDays.forEach(function (element, index) {\n        if (index === expectedDays.length - 1) {\n            var startIndex = dayIndex.indexOf(element);\n            var temp = startIndex;\n            while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n                temp++;\n            }\n            dayCycle[\"\" + element] = temp - startIndex;\n        }\n        else {\n            dayCycle[\"\" + element] = dayIndex.indexOf(expectedDays[(index + 1)]) - dayIndex.indexOf(element);\n        }\n    });\n    return dayCycle;\n}\n/**\n * Internal method to check date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedDate Accepts the exception dates\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkDate(tempDate, expectedDate) {\n    var temp = expectedDate.slice(0);\n    var data;\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + maxDate + 1;\n        }\n        if (data === tempDate.getDate()) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to check the year value\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedyearDay Accepts the exception dates in year\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkYear(tempDate, expectedyearDay) {\n    var temp = expectedyearDay.slice(0);\n    var data;\n    var yearDay = getYearDay(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n        }\n        if (data === yearDay) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to get the year day\n *\n * @param {Date} currentDate Accepts the date value\n * @returns {number} Returns the boolean value\n * @private\n */\nfunction getYearDay(currentDate) {\n    if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n        startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n    }\n    var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n    var diff = currentDate.getTime() - tempDate.getTime();\n    return Math.ceil(diff / MS_PER_DAY);\n}\n/**\n * Internal method to validate monthly rule type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {MonthlyType} Returns the monthly type object\n * @private\n */\nfunction validateMonthlyRuleType(ruleObject) {\n    if (ruleObject.monthDay.length && !ruleObject.day.length) {\n        return 'date';\n    }\n    else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n        return 'day';\n    }\n    return 'both';\n}\n/**\n * Internal method to re-order the week days based on first day of week\n *\n * @param {string[]} days Accepts the week days value\n * @returns {void}\n * @private\n */\nfunction rotate(days) {\n    var data = days.shift();\n    days.push(data);\n}\n/**\n * Internal method to set first day of week\n *\n * @param {string} day Accepts the first day string\n * @returns {void}\n * @private\n */\nfunction setFirstDayOfWeek(day) {\n    while (dayIndex[0] !== day) {\n        rotate(dayIndex);\n    }\n}\n/**\n * Internal method to validate recurrence rule\n *\n * @param {Date} tempDate Accepts the date value\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction validateRules(tempDate, ruleObject) {\n    var state = true;\n    var expectedDays = ruleObject.day;\n    var expectedMonth = ruleObject.month;\n    var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n    var expectedyearDay = ruleObject.yearDay;\n    ruleObject.validRules.forEach(function (rule) {\n        switch (rule) {\n            case 'BYDAY':\n                if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTH':\n                if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTHDAY':\n                if (checkDate(tempDate, expectedDate)) {\n                    state = false;\n                }\n                break;\n            case 'BYYEARDAY':\n                if (checkYear(tempDate, expectedyearDay)) {\n                    state = false;\n                }\n                break;\n        }\n    });\n    return state;\n}\n/**\n * Internal method to get calendar util\n *\n * @param {CalendarType} calendarMode Accepts the calendar type object\n * @returns {CalendarUtil} Returns the calendar util object\n * @private\n */\nfunction getCalendarUtil(calendarMode) {\n    if (calendarMode === 'Islamic') {\n        return new Islamic();\n    }\n    return new Gregorian();\n}\nvar startDateCollection = {};\nvar tempExcludeDate;\nvar dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar maxOccurrence;\nvar tempViewDate;\nvar calendarUtil;\nvar DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar MAXOCCURRENCE = 43;\nvar WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nvar TIMES = 'summaryTimes';\nvar ON = 'summaryOn';\nvar EVERY = 'every';\nvar UNTIL = 'summaryUntil';\nvar DAYS = 'summaryDay';\nvar WEEKS = 'summaryWeek';\nvar MONTHS = 'summaryMonth';\nvar YEARS = 'summaryYear';\nvar DAYINDEXOBJECT = {\n    SU: 'sun',\n    MO: 'mon',\n    TU: 'tue',\n    WE: 'wed',\n    TH: 'thu',\n    FR: 'fri',\n    SA: 'sat'\n};\n// To check string has number\nvar HASNUMBER = /\\d/;\n// To find the numbers in string\nvar REMOVENUMBERINSTRING = /[^A-Z]+/;\n// To split number and string\nvar SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\n/**\n * Method to generate string from date\n *\n * @param {Date} date Accepts the date value\n * @returns {string} Returns the string value\n */\nfunction getRecurrenceStringFromDate(date) {\n    return [date.getUTCFullYear(),\n        roundDateValues(date.getUTCMonth() + 1),\n        roundDateValues(date.getUTCDate()),\n        'T',\n        roundDateValues(date.getUTCHours()),\n        roundDateValues(date.getUTCMinutes()),\n        roundDateValues(date.getUTCSeconds()),\n        'Z'].join('');\n}\n/**\n * Internal method to round the date values\n *\n * @param {string | number} date Accepts the date value in either string or number format\n * @returns {string} Returns the date value in string format\n * @private\n */\nfunction roundDateValues(date) {\n    return ('0' + date).slice(-2);\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\n/**\n * EventBase for appointment rendering\n */\nvar EventBase = /** @__PURE__ @class */ (function () {\n    /**\n     * Constructor for EventBase\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function EventBase(parent) {\n        this.slots = [];\n        this.isDoubleTapped = false;\n        this.parent = parent;\n    }\n    EventBase.prototype.processData = function (events, timeZonePropChanged, oldTimezone) {\n        var _this = this;\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var fields = this.parent.eventFields;\n        var processed = [];\n        var temp = 1;\n        var generateID = false;\n        var resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];\n        if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n            generateID = true;\n        }\n        var _loop_1 = function (event_1) {\n            if (generateID) {\n                event_1[fields.id] = temp++;\n            }\n            event_1 = this_1.updateEventDateTime(event_1);\n            if (timeZonePropChanged) {\n                this_1.processTimezoneChange(event_1, oldTimezone);\n            }\n            else if (!this_1.parent.isPrinting && !this_1.parent.uiStateValues.isPreventTimezone) {\n                event_1 = this_1.processTimezone(event_1);\n            }\n            for (var level = 0; level < resourceCollection.length; level++) {\n                if (event_1[resourceCollection[parseInt(level.toString(), 10)].field] === null || event_1[resourceCollection[parseInt(level.toString(), 10)].field] === 0) {\n                    event_1[resourceCollection[parseInt(level.toString(), 10)].field] = undefined;\n                }\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && event_1[fields.recurrenceRule] === '') {\n                event_1[fields.recurrenceRule] = null;\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID]) &&\n                !(this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction)) {\n                processed = processed.concat(this_1.generateOccurrence(event_1, null, oldTimezone, true));\n            }\n            else {\n                if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction) {\n                    if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID])) {\n                        var recurrenceEvent = this_1.generateOccurrence(event_1, null, oldTimezone, true);\n                        var _loop_2 = function (occurrence) {\n                            var app = this_1.parent.eventsProcessed.filter(function (data) {\n                                return data[fields.startTime].getTime() - occurrence[fields.startTime].getTime() === 0 &&\n                                    data[fields.id] === occurrence[fields.id];\n                            });\n                            occurrence.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                            processed.push(occurrence);\n                        };\n                        for (var _i = 0, recurrenceEvent_1 = recurrenceEvent; _i < recurrenceEvent_1.length; _i++) {\n                            var occurrence = recurrenceEvent_1[_i];\n                            _loop_2(occurrence);\n                        }\n                    }\n                    else {\n                        var app = this_1.parent.eventsProcessed.filter(function (data) {\n                            return data[_this.parent.eventFields.id] === event_1[_this.parent.eventFields.id];\n                        });\n                        event_1.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                        processed.push(event_1);\n                    }\n                }\n                else {\n                    event_1.Guid = this_1.generateGuid();\n                    processed.push(event_1);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            _loop_1(event_1);\n        }\n        this.parent.eventsProcessed = [];\n        var eventData = processed.filter(function (data) {\n            return !data[_this.parent.eventFields.isBlock];\n        });\n        this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n        var blockData = processed.filter(function (data) {\n            return data[_this.parent.eventFields.isBlock];\n        });\n        for (var _a = 0, blockData_1 = blockData; _a < blockData_1.length; _a++) {\n            var eventObj = blockData_1[_a];\n            if (eventObj[fields.isAllDay]) {\n                var isDifferentDate = resetTime(new Date(eventObj[fields.startTime].getTime())) <\n                    resetTime(new Date(eventObj[fields.endTime].getTime()));\n                if (!isDifferentDate) {\n                    eventObj[fields.startTime] = resetTime(eventObj[fields.startTime]);\n                    eventObj[fields.endTime] = addDays(resetTime(eventObj[fields.endTime]), 1);\n                }\n            }\n        }\n        this.parent.blockProcessed = blockData;\n        return eventData;\n    };\n    EventBase.prototype.updateEventDateTime = function (eventData) {\n        if (typeof eventData[this.parent.eventFields.startTime] === 'string') {\n            eventData[this.parent.eventFields.startTime] = getDateFromString(eventData[this.parent.eventFields.startTime]);\n        }\n        if (typeof eventData[this.parent.eventFields.endTime] === 'string') {\n            eventData[this.parent.eventFields.endTime] = getDateFromString(eventData[this.parent.eventFields.endTime]);\n        }\n        return eventData;\n    };\n    EventBase.prototype.getProcessedEvents = function (eventCollection) {\n        if (eventCollection === void 0) { eventCollection = this.parent.eventsData; }\n        var processed = [];\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_2 = eventCollection_1[_i];\n            if (!isNullOrUndefined(event_2[this.parent.eventFields.recurrenceRule]) &&\n                isNullOrUndefined(event_2[this.parent.eventFields.recurrenceID])) {\n                processed = processed.concat(this.generateOccurrence(event_2));\n            }\n            else {\n                processed.push(event_2);\n            }\n        }\n        return processed;\n    };\n    EventBase.prototype.timezonePropertyChange = function (oldTimezone) {\n        var data = this.parent.eventsData.concat(this.parent.blockData);\n        var processed = this.processData(data, true, oldTimezone);\n        this.parent.notify(dataReady, { processedData: processed });\n    };\n    EventBase.prototype.timezoneConvert = function (eventData) {\n        var fields = this.parent.eventFields;\n        eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n        eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n        if (this.parent.timezone) {\n            var startTz = eventData[fields.startTimezone];\n            var endTz = eventData[fields.endTimezone];\n            eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n            eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n        }\n    };\n    EventBase.prototype.processTimezoneChange = function (event, oldTimezone) {\n        var fields = this.parent.eventFields;\n        if (event[fields.isAllDay]) {\n            return;\n        }\n        if (oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n        }\n        else if (!oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n        }\n        else if (oldTimezone && !this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);\n            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);\n        }\n    };\n    EventBase.prototype.processTimezone = function (event, isReverse) {\n        if (isReverse === void 0) { isReverse = false; }\n        var fields = this.parent.eventFields;\n        if (event[fields.startTimezone] || event[fields.endTimezone]) {\n            var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n            var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n            if (isReverse) {\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n                }\n                else {\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);\n                }\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                }\n            }\n        }\n        else if (this.parent.timezone) {\n            if (isReverse) {\n                event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n            }\n        }\n        return event;\n    };\n    EventBase.prototype.filterBlockEvents = function (eventObj) {\n        var fields = this.parent.eventFields;\n        var eStart = eventObj[fields.startTime];\n        var eEnd = eventObj[fields.endTime];\n        var resourceData;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var data = this.getGroupIndexFromEvent(eventObj);\n            resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(data.toString(), 10)];\n        }\n        var blockEvents = extend([], this.parent.blockProcessed, null, true);\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var eventObj_1 = blockEvents_1[_i];\n            if (eventObj_1[fields.isAllDay]) {\n                var isDifferentTime = eventObj_1[fields.endTime].getTime() >\n                    resetTime(new Date(eventObj_1[fields.endTime].getTime())).getTime();\n                if (isDifferentTime) {\n                    eventObj_1[fields.startTime] = resetTime(eventObj_1[fields.startTime]);\n                    eventObj_1[fields.endTime] = addDays(resetTime(eventObj_1[fields.endTime]), 1);\n                }\n            }\n        }\n        return this.filterEvents(eStart, eEnd, blockEvents, resourceData);\n    };\n    EventBase.prototype.filterEvents = function (startDate, endDate, appointments, resourceTdData) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var predicate = this.parent.dataModule.getStartEndQuery(startDate, endDate);\n        var filter = new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));\n        if (resourceTdData) {\n            filter = this.filterEventsByResource(resourceTdData, filter);\n        }\n        return this.sortByTime(filter);\n    };\n    EventBase.prototype.filterEventsByRange = function (eventCollection, startDate, endDate) {\n        var _this = this;\n        var filteredEvents = [];\n        if (startDate && endDate) {\n            filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n        }\n        else if (startDate && !endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.startTime] >= startDate; });\n        }\n        else if (!startDate && endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.endTime] <= endDate; });\n        }\n        else {\n            filteredEvents = eventCollection;\n        }\n        return this.sortByTime(filteredEvents);\n    };\n    EventBase.prototype.filterEventsByResource = function (resourceTdData, appointments) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var predicate = {};\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var level = 0; level < resourceCollection.length; level++) {\n            predicate[resourceCollection[parseInt(level.toString(), 10)].field] = resourceTdData.groupOrder[parseInt(level.toString(), 10)];\n        }\n        var keys = Object.keys(predicate);\n        var filteredCollection = appointments.filter(function (eventObj) { return keys.every(function (key) {\n            if (eventObj[\"\" + key] instanceof Array) {\n                return eventObj[\"\" + key].indexOf(predicate[\"\" + key]) > -1;\n            }\n            else {\n                return eventObj[\"\" + key] === predicate[\"\" + key];\n            }\n        }); });\n        return filteredCollection;\n    };\n    EventBase.prototype.sortByTime = function (appointmentsCollection) {\n        if (this.parent.eventSettings.sortComparer && (typeof (this.parent.eventSettings.sortComparer) === 'function' || typeof (this.parent.eventSettings.sortComparer) === 'string')) {\n            appointmentsCollection = this.customSorting(appointmentsCollection);\n        }\n        else {\n            var fieldMappings_1 = this.parent.eventFields;\n            appointmentsCollection.sort(function (a, b) {\n                var d1 = a[fieldMappings_1.startTime];\n                var d2 = b[fieldMappings_1.startTime];\n                return d1.getTime() - d2.getTime();\n            });\n        }\n        return appointmentsCollection;\n    };\n    EventBase.prototype.sortByDateTime = function (appointments) {\n        if (this.parent.eventSettings.sortComparer && (typeof (this.parent.eventSettings.sortComparer) === 'function' || typeof (this.parent.eventSettings.sortComparer) === 'string')) {\n            appointments = this.customSorting(appointments);\n        }\n        else {\n            var fieldMapping_1 = this.parent.eventFields;\n            appointments.sort(function (object1, object2) {\n                var d3 = object1[fieldMapping_1.startTime];\n                var d4 = object2[fieldMapping_1.startTime];\n                var d5 = object1[fieldMapping_1.endTime];\n                var d6 = object2[fieldMapping_1.endTime];\n                var d1 = d5.getTime() - d3.getTime();\n                var d2 = d6.getTime() - d4.getTime();\n                return (d3.getTime() - d4.getTime() || d2 - d1);\n            });\n        }\n        return appointments;\n    };\n    EventBase.prototype.customSorting = function (appointments) {\n        if (typeof (this.parent.eventSettings.sortComparer) === 'function') {\n            return this.parent.eventSettings.sortComparer.call(this.parent, appointments);\n        }\n        else if (typeof (this.parent.eventSettings.sortComparer) === 'string') {\n            var splits = this.parent.eventSettings.sortComparer.split('.');\n            var sortFn = void 0;\n            if (!isNullOrUndefined(window)) {\n                sortFn = window[splits[splits.length - 1]];\n            }\n            if (sortFn) {\n                return sortFn(appointments);\n            }\n        }\n        return appointments;\n    };\n    EventBase.prototype.getSmallestMissingNumber = function (array) {\n        var large = Math.max.apply(Math, array);\n        for (var i = 0; i < large; i++) {\n            if (array.indexOf(i) === -1) {\n                return i;\n            }\n        }\n        return large + 1;\n    };\n    EventBase.prototype.splitEventByDay = function (event) {\n        var eventFields = this.parent.eventFields;\n        var data = [];\n        var eventStartTime = event[eventFields.startTime];\n        var eventEndTime = event[eventFields.endTime];\n        var isDifferentDate = resetTime(new Date(eventStartTime.getTime())) <\n            resetTime(new Date(eventEndTime.getTime()));\n        if (isDifferentDate) {\n            var start = new Date(eventStartTime.getTime());\n            var end = addDays(resetTime(new Date(eventStartTime.getTime())), 1);\n            var endDate = (eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0) ?\n                eventEndTime : addDays(eventEndTime, 1);\n            var index = 1;\n            var eventLength = getDaysCount(eventStartTime.getTime(), endDate.getTime());\n            while (end <= eventEndTime && start.getTime() !== end.getTime()) {\n                var app = extend({}, event);\n                app[eventFields.startTime] = start;\n                app[eventFields.endTime] = end;\n                app.data = { index: index, count: eventLength };\n                app.Guid = this.generateGuid();\n                app.isSpanned = true;\n                data.push(app);\n                start = end;\n                if ((resetTime(new Date(start.getTime())).getTime() === resetTime(new Date(eventEndTime.getTime())).getTime())\n                    && !(end.getTime() === eventEndTime.getTime())) {\n                    end = new Date(start.getTime());\n                    end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));\n                }\n                else {\n                    end = addDays(resetTime(new Date(start.getTime())), 1);\n                }\n                index++;\n            }\n        }\n        else {\n            data.push(event);\n        }\n        return data;\n    };\n    EventBase.prototype.splitEvent = function (event, dateRender) {\n        var fields = this.parent.eventFields;\n        var start = resetTime(event[fields.startTime]).getTime();\n        var end = resetTime(event[fields.endTime]).getTime();\n        if (getDateInMs(event[fields.endTime]) <= 0) {\n            var temp = addDays(resetTime(event[fields.endTime]), -1).getTime();\n            end = start > temp ? start : temp;\n        }\n        var orgStart = start;\n        var orgEnd = end;\n        var ranges = [];\n        if (start !== end) {\n            if (start < dateRender[0].getTime()) {\n                start = dateRender[0].getTime();\n            }\n            if (end > dateRender[dateRender.length - 1].getTime()) {\n                end = dateRender[dateRender.length - 1].getTime();\n            }\n            var cStart = start;\n            for (var level = 0; level < this.slots.length; level++) {\n                var slot = this.slots[parseInt(level.toString(), 10)];\n                if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek'\n                    || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {\n                    var slotDates = [];\n                    for (var _i = 0, slot_1 = slot; _i < slot_1.length; _i++) {\n                        var s = slot_1[_i];\n                        slotDates.push(new Date(s));\n                    }\n                    var renderedDates = this.getRenderedDates(slotDates);\n                    if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {\n                        slot = [];\n                        for (var _a = 0, renderedDates_1 = renderedDates; _a < renderedDates_1.length; _a++) {\n                            var date = renderedDates_1[_a];\n                            slot.push(date.getTime());\n                        }\n                    }\n                }\n                if (typeof (slot) === 'number') {\n                    var temp = slot;\n                    slot = [];\n                    slot.push(temp);\n                }\n                var firstSlot = slot[0];\n                cStart = (cStart <= firstSlot && end >= firstSlot) ? firstSlot : cStart;\n                if (cStart > end || firstSlot > end) {\n                    break;\n                }\n                if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend &&\n                    this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n                    var startIndex = slot.indexOf(cStart);\n                    if (startIndex !== -1) {\n                        var endIndex = slot.indexOf(end);\n                        var hasBreak = endIndex !== -1;\n                        endIndex = hasBreak ? endIndex : slot.length - 1;\n                        var count = ((endIndex - startIndex) + 1);\n                        var isLeft = (slot[parseInt(startIndex.toString(), 10)] !== orgStart);\n                        var isRight = (slot[parseInt(endIndex.toString(), 10)] !== orgEnd);\n                        ranges.push(this.cloneEventObject(event, slot[parseInt(startIndex.toString(), 10)], slot[parseInt(endIndex.toString(), 10)], count, isLeft, isRight));\n                        if (hasBreak) {\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n                        var availSlot = [];\n                        for (var i = 0; i < slot.length; i++) {\n                            if (this.dateInRange(slot[parseInt(i.toString(), 10)], orgStart, orgEnd)) {\n                                availSlot.push(slot[parseInt(i.toString(), 10)]);\n                            }\n                        }\n                        if (availSlot.length > 0) {\n                            if (!this.parent.activeViewOptions.group.byDate) {\n                                var isLeft = (availSlot[0] !== orgStart);\n                                var isRight = (availSlot[availSlot.length - 1] !== orgEnd);\n                                ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));\n                            }\n                            else {\n                                for (var _b = 0, availSlot_1 = availSlot; _b < availSlot_1.length; _b++) {\n                                    var slot_2 = availSlot_1[_b];\n                                    ranges.push(this.cloneEventObject(event, slot_2, slot_2, 1, (slot_2 !== orgStart), (slot_2 !== orgEnd)));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n        }\n        return ranges;\n    };\n    EventBase.prototype.cloneEventObject = function (event, start, end, count, isLeft, isRight) {\n        var fields = this.parent.eventFields;\n        var e = extend({}, event, null, true);\n        var data = { count: count, isLeft: isLeft, isRight: isRight };\n        data[fields.startTime] = event[fields.startTime];\n        data[fields.endTime] = event[fields.endTime];\n        e.data = data;\n        e[fields.startTime] = new Date(start);\n        e[fields.endTime] = new Date(end);\n        return e;\n    };\n    EventBase.prototype.dateInRange = function (date, start, end) {\n        return start <= date && date <= end;\n    };\n    EventBase.prototype.getSelectedEventElements = function (target) {\n        this.removeSelectedAppointmentClass();\n        if (this.parent.selectedElements.length <= 0) {\n            this.parent.selectedElements.push(target);\n        }\n        else {\n            var isAlreadySelected = this.parent.selectedElements.filter(function (element) {\n                return element.getAttribute('data-guid') === target.getAttribute('data-guid');\n            });\n            if (isAlreadySelected.length <= 0) {\n                var elementSelector = 'div[data-guid=\"' + target.getAttribute('data-guid') + '\"]';\n                var focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n                for (var _i = 0, focusElements_1 = focusElements; _i < focusElements_1.length; _i++) {\n                    var element = focusElements_1[_i];\n                    this.parent.selectedElements.push(element);\n                }\n            }\n            else {\n                var selectedElements = this.parent.selectedElements.filter(function (element) {\n                    return element.getAttribute('data-guid') !== target.getAttribute('data-guid');\n                });\n                this.parent.selectedElements = selectedElements;\n            }\n        }\n        if (target && this.parent.selectedElements.length > 0) {\n            this.addSelectedAppointments(this.parent.selectedElements, false);\n        }\n        return this.parent.selectedElements;\n    };\n    EventBase.prototype.getSelectedEvents = function () {\n        var _this = this;\n        var eventSelect = [];\n        var elementSelect = [];\n        var selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n        selectAppointments.filter(function (element) {\n            var isAlreadyAdded = eventSelect.filter(function (event) {\n                return event.Guid === element.getAttribute('data-guid');\n            });\n            if (isAlreadyAdded.length === 0) {\n                eventSelect.push(_this.getEventByGuid(element.getAttribute('data-guid')));\n            }\n            elementSelect.push(element);\n        });\n        return {\n            event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n            element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n        };\n    };\n    EventBase.prototype.removeSelectedAppointmentClass = function () {\n        var selectedAppointments = this.getSelectedAppointments();\n        removeClass(selectedAppointments, APPOINTMENT_BORDER);\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            removeClass(selectedAppointments, AGENDA_SELECTED_CELL);\n        }\n    };\n    EventBase.prototype.addSelectedAppointments = function (cells, preventFocus) {\n        if (this.parent.currentView !== 'MonthAgenda') {\n            this.parent.removeSelectedClass();\n        }\n        addClass(cells, APPOINTMENT_BORDER);\n        if (cells.length > 0 && !preventFocus) {\n            cells[cells.length - 1].focus();\n        }\n    };\n    EventBase.prototype.getSelectedAppointments = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER + ',.' + APPOINTMENT_CLASS + ':focus'));\n    };\n    EventBase.prototype.focusElement = function (isFocused) {\n        if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {\n            return;\n        }\n        var activeEle = document.activeElement;\n        var selectedCell = this.parent.getSelectedCells();\n        if (selectedCell.length > 0 && ((activeEle && (this.parent.element.contains(activeEle) ||\n            selectedCell.indexOf(activeEle) !== -1)) || isFocused)) {\n            if (this.parent.keyboardInteractionModule) {\n                var target = ((!isNullOrUndefined(this.parent.activeCellsData) &&\n                    this.parent.activeCellsData.element) || selectedCell[selectedCell.length - 1]);\n                this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n            }\n            return;\n        }\n        var selectedAppointments = this.getSelectedAppointments();\n        if (selectedAppointments.length > 0) {\n            if (this.parent.activeEventData && this.parent.activeEventData.element && selectedAppointments.indexOf(this.parent.activeEventData.element) > -1) {\n                this.parent.activeEventData.element.focus();\n                return;\n            }\n            selectedAppointments[selectedAppointments.length - 1].focus();\n            return;\n        }\n    };\n    EventBase.prototype.selectWorkCellByTime = function (eventsData) {\n        var target;\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            return target;\n        }\n        if (eventsData.length > 0) {\n            var selectedObject = eventsData[eventsData.length - 1];\n            var eventStartTime = selectedObject[this.parent.eventFields.startTime];\n            var nearestTime = new Date(+eventStartTime).setMinutes(0, 0, 0);\n            var isAllDay = this.isAllDayAppointment(selectedObject);\n            if (this.parent.currentView === 'Month' || isAllDay) {\n                nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n            }\n            var targetArea = void 0;\n            if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n                targetArea = this.parent.getAllDayRow();\n            }\n            else {\n                targetArea = this.parent.getContentTable();\n            }\n            var queryString = '[data-date=\"' + new Date(nearestTime).getTime() + '\"]';\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n            }\n            target = targetArea.querySelector(queryString);\n            if (target) {\n                this.parent.activeCellsData = this.parent.getCellDetails(target);\n                if (this.parent.keyboardInteractionModule) {\n                    this.parent.keyboardInteractionModule.selectCells(false, target);\n                }\n                return target;\n            }\n        }\n        return target;\n    };\n    EventBase.prototype.getGroupIndexFromEvent = function (eventData) {\n        var levelIndex;\n        var resource;\n        var levelName;\n        var idField;\n        for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n            var resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n            if (!isNullOrUndefined(resourceData)) {\n                resource = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n                levelIndex = i;\n                levelName = resource.name;\n                idField = resource.field;\n                break;\n            }\n        }\n        if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {\n            levelName = this.parent.resourceCollection.slice(-1)[0].name;\n            levelIndex = this.parent.resourceCollection.length - 1;\n            idField = this.parent.resourceCollection.slice(-1)[0].field;\n            resource = this.parent.resourceCollection.filter(function (e, index) {\n                if (e.name === levelName) {\n                    levelIndex = index;\n                    return e;\n                }\n                return null;\n            })[0];\n        }\n        var id = ((eventData[\"\" + idField] instanceof Array) ?\n            eventData[\"\" + idField][0] : eventData[\"\" + idField]);\n        if (levelIndex > 0) {\n            var parentField = this.parent.resourceCollection[levelIndex - 1].field;\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);\n        }\n        else {\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);\n        }\n    };\n    EventBase.prototype.isAllDayAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var isAllDay = event[fieldMapping.isAllDay];\n        var isFullDay = ((getUniversalTime(event[fieldMapping.endTime]) - getUniversalTime(event[fieldMapping.startTime]))\n            / MS_PER_DAY) >= 1;\n        return (isAllDay || (this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' && isFullDay)) ? true : false;\n    };\n    EventBase.prototype.addEventListener = function () {\n        this.parent.on(documentClick, this.appointmentBorderRemove, this);\n    };\n    EventBase.prototype.removeEventListener = function () {\n        this.parent.off(documentClick, this.appointmentBorderRemove);\n    };\n    EventBase.prototype.appointmentBorderRemove = function (event) {\n        var element = event.event.target;\n        if (closest(element, '.' + APPOINTMENT_CLASS)) {\n            if (this.parent.currentView !== 'MonthAgenda') {\n                this.parent.removeSelectedClass();\n            }\n        }\n        else if (!closest(element, '.' + POPUP_OPEN)) {\n            this.removeSelectedAppointmentClass();\n            this.parent.selectedElements = [];\n        }\n    };\n    EventBase.prototype.wireAppointmentEvents = function (element, event, isPreventCrud) {\n        if (isPreventCrud === void 0) { isPreventCrud = false; }\n        var isReadOnly = (!isNullOrUndefined(event)) ? event[this.parent.eventFields.isReadonly] : false;\n        EventHandler.add(element, 'click', this.eventClick, this);\n        if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n            EventHandler.add(element, 'touchstart', this.eventTouchClick, this);\n            EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n        }\n        if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {\n            if (this.parent.resizeModule) {\n                this.parent.resizeModule.wireResizeEvent(element);\n            }\n            if (this.parent.dragAndDropModule) {\n                this.parent.dragAndDropModule.wireDragEvent(element);\n            }\n        }\n    };\n    EventBase.prototype.eventTouchClick = function (e) {\n        var _this = this;\n        setTimeout(function () { return _this.isDoubleTapped = false; }, 250);\n        e.preventDefault();\n        if (this.isDoubleTapped) {\n            this.eventDoubleClick(e);\n        }\n        else if (!this.isDoubleTapped) {\n            this.isDoubleTapped = true;\n            this.eventClick(e);\n        }\n    };\n    EventBase.prototype.renderResizeHandler = function (element, spanEvent, isReadOnly) {\n        if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(spanEvent); _i < _a.length; _i++) {\n            var resizeEdge = _a[_i];\n            var resizeHandler = createElement('div', { className: EVENT_RESIZE_CLASS });\n            switch (resizeEdge) {\n                case 'isLeft':\n                    if (!spanEvent.isLeft) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? RIGHT_RESIZE_HANDLER : LEFT_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isRight':\n                    if (!spanEvent.isRight) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? LEFT_RESIZE_HANDLER : RIGHT_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n                case 'isTop':\n                    if (!spanEvent.isTop) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], TOP_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isBottom':\n                    if (!spanEvent.isBottom) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], BOTTOM_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n            }\n        }\n    };\n    EventBase.prototype.eventClick = function (eventData) {\n        var _this = this;\n        var target = eventData.target;\n        if (target.classList.contains(DRAG_CLONE_CLASS) || target.classList.contains(RESIZE_CLONE_CLASS) ||\n            target.classList.contains(INLINE_SUBJECT_CLASS)) {\n            return;\n        }\n        if ((eventData.ctrlKey || eventData.metaKey) && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n            this.parent.quickPopup.quickPopup.hide();\n            this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_BORDER));\n            var target_1 = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n            this.getSelectedEventElements(target_1);\n            this.activeEventData(eventData, false);\n            var selectArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(select, selectArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(eventClick, args);\n        }\n        else {\n            this.removeSelectedAppointmentClass();\n            this.activeEventData(eventData, true);\n            var selectEventArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(select, selectEventArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(eventClick, args, function (eventClickArgs) {\n                if (eventClickArgs.cancel) {\n                    _this.removeSelectedAppointmentClass();\n                    _this.parent.selectedElements = [];\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n                else {\n                    if (_this.parent.currentView === 'Agenda' || _this.parent.currentView === 'MonthAgenda') {\n                        addClass([_this.parent.activeEventData.element], AGENDA_SELECTED_CELL);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            data: eventClickArgs.event,\n                            element: eventClickArgs.element,\n                            type: 'Event'\n                        };\n                        _this.parent.notify(inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(eventClick, eventClickArgs);\n                    }\n                }\n            });\n        }\n    };\n    EventBase.prototype.eventDoubleClick = function (e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if (e.type === 'touchstart') {\n            this.activeEventData(e, true);\n        }\n        this.removeSelectedAppointmentClass();\n        this.parent.selectedElements = [];\n        if (this.parent.activeEventData.element.classList.contains(INLINE_APPOINTMENT_CLASS) ||\n            this.parent.activeEventData.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n            return;\n        }\n        if (!isNullOrUndefined(this.parent.activeEventData.event) &&\n            isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {\n            this.parent.eventWindow.openEditor(this.parent.activeEventData.event, 'Save');\n        }\n        else {\n            this.parent.currentAction = 'EditOccurrence';\n            this.parent.quickPopup.openRecurrenceAlert();\n        }\n    };\n    EventBase.prototype.getEventByGuid = function (guid) {\n        return this.parent.eventsProcessed.filter(function (data) { return data.Guid === guid; })[0];\n    };\n    EventBase.prototype.getEventById = function (id) {\n        var _this = this;\n        return this.parent.eventsData.filter(function (data) {\n            return data[_this.parent.eventFields.id] === id;\n        })[0];\n    };\n    EventBase.prototype.generateGuid = function () {\n        return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = (c === 'x') ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n    EventBase.prototype.getEventIDType = function () {\n        if (this.parent.eventsData.length !== 0) {\n            return typeof (this.parent.eventsData[0][this.parent.eventFields.id]);\n        }\n        if (this.parent.blockData.length !== 0) {\n            return typeof (this.parent.blockData[0][this.parent.eventFields.id]);\n        }\n        return 'string';\n    };\n    EventBase.prototype.getEventMaxID = function (resourceId) {\n        var _this = this;\n        if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n            return 1;\n        }\n        var eventId;\n        var idType = this.getEventIDType();\n        if (idType === 'string') {\n            eventId = this.generateGuid();\n        }\n        if (idType === 'number') {\n            var datas = this.parent.eventsData.concat(this.parent.blockData);\n            var appIds = datas.map(function (event) { return event[_this.parent.eventFields.id]; });\n            var maxId = appIds.reduce(function (a, b) { return Math.max(a, b); });\n            maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n            eventId = maxId + 1;\n        }\n        return eventId;\n    };\n    EventBase.prototype.activeEventData = function (eventData, isMultiple) {\n        var _this = this;\n        var target = closest(eventData.target, '.' + APPOINTMENT_CLASS);\n        var guid = target.getAttribute('data-guid');\n        if (isMultiple) {\n            this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')), true);\n            target.focus();\n        }\n        var eventObject = this.getEventByGuid(guid);\n        if (eventObject && eventObject.isSpanned) {\n            eventObject = this.parent.eventsData.filter(function (obj) {\n                return obj[_this.parent.eventFields.id] === eventObject[_this.parent.eventFields.id];\n            })[0];\n        }\n        this.parent.activeEventData = { event: eventObject, element: target };\n    };\n    EventBase.prototype.generateOccurrence = function (event, viewDate, oldTimezone, isMaxCount) {\n        var startDate = event[this.parent.eventFields.startTime];\n        var endDate = event[this.parent.eventFields.endTime];\n        var eventRule = event[this.parent.eventFields.recurrenceRule];\n        var timeZoneDiff = endDate.getTimezoneOffset() - startDate.getTimezoneOffset();\n        var duration = (endDate.getTime() - startDate.getTime()) - (timeZoneDiff * 60000);\n        viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);\n        var exception = event[this.parent.eventFields.recurrenceException];\n        var maxCount;\n        if (this.parent.currentView !== 'Agenda' && isMaxCount) {\n            maxCount = getDateCount(viewDate, this.parent.activeView.endDate()) + 1;\n        }\n        var newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var firstDay = this.parent.activeViewOptions.firstDayOfWeek;\n        var calendarMode = this.parent.calendarMode;\n        var dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, oldTimezone, newTimezone);\n        if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n            if (isNullOrUndefined(event.generatedDates)) {\n                event.generatedDates = { start: new Date(dates[0]), end: new Date(dates[dates.length - 1]) };\n            }\n            else {\n                if (dates[0] < event.generatedDates.start.getTime()) {\n                    event.generatedDates.start = new Date(dates[0]);\n                }\n                if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n                    event.generatedDates.end = new Date(dates[dates.length - 1]);\n                }\n            }\n        }\n        var occurrenceCollection = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            var clonedObject = extend({}, event, null, true);\n            date = this.getDSTAdjustedTime(date, clonedObject);\n            clonedObject[this.parent.eventFields.startTime] = new Date(date);\n            clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n            clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];\n            delete clonedObject[this.parent.eventFields.recurrenceException];\n            delete clonedObject[this.parent.eventFields.followingID];\n            clonedObject.Guid = this.generateGuid();\n            occurrenceCollection.push(clonedObject);\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getDSTAdjustedTime = function (date, event) {\n        var occurDate = date;\n        if (this.parent.timezone &&\n            (event[this.parent.eventFields.startTimezone] || event[this.parent.eventFields.endTimezone])) {\n            var eventOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), event[this.parent.eventFields.startTimezone]);\n            var schOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), this.parent.timezone);\n            occurDate = (new Date(date).getTime() - (eventOffset - schOffset) * 60000);\n        }\n        return occurDate;\n    };\n    EventBase.prototype.getDSTDiff = function (startDate, occurDate, timezone) {\n        var startOffset = this.parent.tzModule.offset(new Date(startDate), timezone);\n        var occurOffset = this.parent.tzModule.offset(new Date(occurDate), timezone);\n        return startOffset - occurOffset;\n    };\n    EventBase.prototype.getParentEvent = function (eventObj, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent;\n        do {\n            eventObj = this.getFollowingEvent(eventObj);\n            if (eventObj) {\n                parentEvent = extend({}, eventObj, null, true);\n            }\n        } while (eventObj && isParent);\n        if (isParent && parentEvent) {\n            var collection = this.getEventCollections(parentEvent);\n            var followObj = collection.follow.slice(-1)[0];\n            if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {\n                followObj = collection.occurrence.slice(-1)[0];\n            }\n            if (followObj) {\n                parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];\n            }\n        }\n        return parentEvent;\n    };\n    EventBase.prototype.getEventCollections = function (parentObj, childObj) {\n        var followingCollection = [];\n        var occurrenceCollection = [];\n        var followingEvent = parentObj;\n        do {\n            followingEvent = this.getFollowingEvent(followingEvent, true);\n            if (followingEvent) {\n                followingCollection.push(followingEvent);\n            }\n            occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));\n        } while (followingEvent);\n        var collections = {};\n        if (childObj) {\n            var fields_1 = this.parent.eventFields;\n            collections = {\n                follow: followingCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                }),\n                occurrence: occurrenceCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                })\n            };\n        }\n        else {\n            collections = { follow: followingCollection, occurrence: occurrenceCollection };\n        }\n        return collections;\n    };\n    EventBase.prototype.getFollowingEvent = function (parentObj, isReverse) {\n        var fields = this.parent.eventFields;\n        var fieldValue;\n        if (isReverse) {\n            fieldValue = parentObj[fields.id];\n        }\n        else {\n            fieldValue = (parentObj[fields.recurrenceID] || parentObj[fields.followingID]);\n        }\n        var parentApp = this.parent.eventsData.filter(function (data) {\n            return data[isReverse ? fields.followingID : fields.id] === fieldValue;\n        });\n        return parentApp.shift();\n    };\n    EventBase.prototype.isFollowingEvent = function (parentObj, childObj) {\n        var parentStart = parentObj[this.parent.eventFields.startTime];\n        var childStart = childObj[this.parent.eventFields.startTime];\n        return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() &&\n            parentStart.getSeconds() === childStart.getSeconds();\n    };\n    EventBase.prototype.getOccurrenceEvent = function (eventObj, isGuid, isFollowing) {\n        if (isGuid === void 0) { isGuid = false; }\n        if (isFollowing === void 0) { isFollowing = false; }\n        var idField = isGuid ? 'Guid' : (isFollowing) ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;\n        var fieldKey = isGuid ? 'Guid' : this.parent.eventFields.id;\n        var dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;\n        return dataSource.filter(function (data) { return data[\"\" + idField] === eventObj[\"\" + fieldKey]; });\n    };\n    EventBase.prototype.getOccurrencesByID = function (id) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        var parentObject = this.parent.eventsData.filter(function (obj) { return obj[fields.id] === id; });\n        for (var _i = 0, parentObject_1 = parentObject; _i < parentObject_1.length; _i++) {\n            var event_3 = parentObject_1[_i];\n            if (!isNullOrUndefined(event_3[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_3));\n            }\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_4 = _a[_i];\n            if (!isNullOrUndefined(event_4[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_4));\n            }\n        }\n        var filter = occurrenceCollection.filter(function (obj) {\n            return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);\n        });\n        return filter;\n    };\n    EventBase.prototype.getDeletedOccurrences = function (recurrenceData) {\n        var fields = this.parent.eventFields;\n        var parentObject;\n        var deletedOccurrences = [];\n        if (typeof recurrenceData === 'string' || typeof recurrenceData === 'number') {\n            parentObject = this.parent.eventsData.filter(function (obj) {\n                return obj[fields.id] === recurrenceData;\n            })[0];\n        }\n        else {\n            parentObject = extend({}, recurrenceData, null, true);\n        }\n        if (parentObject[fields.recurrenceException]) {\n            var exDateString_1 = parentObject[fields.recurrenceException].split(',');\n            var _loop_3 = function (i, len) {\n                var edited = this_2.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString_1[parseInt(i.toString(), 10)];\n                });\n                if (edited.length === 0) {\n                    var exDate = getDateFromRecurrenceDateString(exDateString_1[parseInt(i.toString(), 10)]);\n                    var childObject = extend({}, recurrenceData, null, true);\n                    childObject[fields.recurrenceID] = parentObject[fields.id];\n                    delete childObject[fields.followingID];\n                    childObject[fields.recurrenceException] = exDateString_1[parseInt(i.toString(), 10)];\n                    var startDate = new Date(exDate.getTime());\n                    var time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();\n                    var endDate = new Date(startDate.getTime());\n                    endDate.setMilliseconds(time);\n                    childObject[fields.startTime] = new Date(startDate.getTime());\n                    childObject[fields.endTime] = new Date(endDate.getTime());\n                    deletedOccurrences.push(childObject);\n                }\n            };\n            var this_2 = this;\n            for (var i = 0, len = exDateString_1.length; i < len; i++) {\n                _loop_3(i, len);\n            }\n        }\n        return deletedOccurrences;\n    };\n    EventBase.prototype.applyResourceColor = function (element, data, type, index, alpha) {\n        if (!this.parent.resourceBase) {\n            return;\n        }\n        var alphaColor = function (color, alpha) {\n            color = color.replace('#', '');\n            var r = parseInt(color.substring(0, color.length / 3), 16);\n            var g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n            var b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n            return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n        };\n        // index refers groupOrder\n        var color = this.parent.resourceBase.getResourceColor(data, index);\n        if (color) {\n            element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n        }\n    };\n    EventBase.prototype.createBlockAppointmentElement = function (record, resIndex, isResourceEventTemplate) {\n        var eventSubject = (record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: BLOCK_APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n                'aria-disabled': 'true'\n            }\n        });\n        var templateElement;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var templateName = 'eventTemplate' + (isResourceEventTemplate &&\n                this.parent.currentView.indexOf('Year') === -1 ? '_' + resIndex : '');\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: SUBJECT_CLASS });\n            this.parent.sanitize(eventSubject, appointmentSubject);\n            templateElement = [appointmentSubject];\n        }\n        append(templateElement, appointmentWrapper);\n        this.setWrapperAttributes(appointmentWrapper, resIndex);\n        return appointmentWrapper;\n    };\n    EventBase.prototype.setWrapperAttributes = function (appointmentWrapper, resIndex) {\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n    };\n    EventBase.prototype.getReadonlyAttribute = function (event) {\n        return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();\n    };\n    EventBase.prototype.isBlockRange = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var isBlockAlert = false;\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {\n            var event_5 = _a[_i];\n            var dataCol = [];\n            if (!isNullOrUndefined(event_5[fields.recurrenceRule]) &&\n                (isNullOrUndefined(event_5[fields.recurrenceID]) || event_5[fields.id] === event_5[fields.recurrenceID])) {\n                dataCol = this.generateOccurrence(event_5);\n            }\n            else {\n                dataCol.push(event_5);\n            }\n            for (var _b = 0, dataCol_1 = dataCol; _b < dataCol_1.length; _b++) {\n                var data = dataCol_1[_b];\n                var filterBlockEvents = this.filterBlockEvents(data);\n                if (filterBlockEvents.length > 0) {\n                    isBlockAlert = true;\n                    break;\n                }\n            }\n        }\n        this.parent.uiStateValues.isBlock = isBlockAlert;\n        return isBlockAlert;\n    };\n    EventBase.prototype.getFilterEventsList = function (dataSource, query) {\n        return new DataManager(dataSource).executeLocal(new Query().where(query));\n    };\n    EventBase.prototype.getSeriesEvents = function (parentEvent, startTime) {\n        var fields = this.parent.eventFields;\n        startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;\n        var deleteFutureEditEvents;\n        var futureEvents;\n        var deleteFutureEditEventList = [];\n        var delId = parentEvent[fields.id];\n        var followingId = parentEvent[fields.followingID];\n        var deleteFutureEvent;\n        var startTimeQuery = this.parent.currentAction === 'EditSeries' ? 'greaterthan' : 'greaterthanorequal';\n        do {\n            deleteFutureEvent = ((new Predicate(fields.followingID, 'equal', delId))).\n                and(new Predicate(fields.startTime, startTimeQuery, startTime));\n            futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);\n            deleteFutureEditEvents = futureEvents.slice(-1)[0];\n            if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {\n                deleteFutureEditEventList.push(deleteFutureEditEvents);\n                delId = deleteFutureEditEvents[fields.id];\n                followingId = deleteFutureEditEvents[fields.followingID];\n            }\n            else {\n                followingId = null;\n            }\n        } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));\n        return deleteFutureEditEventList;\n    };\n    EventBase.prototype.getEditedOccurrences = function (deleteFutureEditEventList, startTime) {\n        var fields = this.parent.eventFields;\n        var deleteRecurrenceEventList = [];\n        var delEditedEvents;\n        for (var _i = 0, deleteFutureEditEventList_1 = deleteFutureEditEventList; _i < deleteFutureEditEventList_1.length; _i++) {\n            var event_6 = deleteFutureEditEventList_1[_i];\n            var delEventQuery = new Predicate(fields.recurrenceID, 'equal', event_6[fields.id]).\n                or(new Predicate(fields.recurrenceID, 'equal', event_6[fields.followingID]).\n                and(new Predicate(fields.recurrenceID, 'notequal', undefined)).\n                and(new Predicate(fields.recurrenceID, 'notequal', null)));\n            if (this.parent.currentAction === 'EditFollowingEvents' || this.parent.currentAction === 'DeleteFollowingEvents') {\n                delEventQuery = delEventQuery.and(new Predicate(fields.startTime, 'greaterthanorequal', startTime));\n            }\n            delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);\n            deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);\n        }\n        return deleteRecurrenceEventList;\n    };\n    EventBase.prototype.getRenderedDates = function (dateRender) {\n        var firstDate = 0;\n        var lastDate = dateRender.length;\n        var filteredDates;\n        if (dateRender[0] < this.parent.minDate && dateRender[dateRender.length - 1] > this.parent.maxDate) {\n            for (var i = 0; i < dateRender.length; i++) {\n                if (resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === resetTime(new Date(this.parent.minDate)).getTime()) {\n                    firstDate = i;\n                }\n                if (resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === resetTime(new Date(this.parent.maxDate)).getTime()) {\n                    lastDate = i;\n                }\n            }\n            filteredDates = dateRender.filter(function (date) { return date >= dateRender[parseInt(firstDate.toString(), 10)] && date <= dateRender[parseInt(lastDate.toString(), 10)]; });\n        }\n        return filteredDates;\n    };\n    EventBase.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n        var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n        var isSameRange = schedule.startHour.getTime() <= start.getTime() &&\n            eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() &&\n            eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n        return isHourRange || isSameRange;\n    };\n    EventBase.prototype.allDayExpandScroll = function (dateHeader) {\n        var indentHeight = 0;\n        var headerRows = [].slice.call(this.parent.element.querySelectorAll('.' + HEADER_ROW_CLASS));\n        headerRows.forEach(function (element) {\n            var tdEle = [].slice.call(element.children);\n            tdEle.forEach(function (ele) { ele.style.top = indentHeight + 'px'; });\n            indentHeight += element.offsetHeight;\n        });\n        indentHeight = dateHeader.offsetHeight - indentHeight;\n        this.parent.element.querySelector('.' + ALLDAY_CELLS_CLASS).style.height = (indentHeight / 12) + 'em';\n        if (this.parent.uiStateValues.expand) {\n            addClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n        }\n        else {\n            removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n        }\n    };\n    EventBase.prototype.updateEventMinimumDuration = function (startEndHours, startTime, endTime) {\n        if (startTime.getTime() < endTime.getTime()) {\n            var eventDuration = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE;\n            if (eventDuration < this.parent.eventSettings.minimumEventDuration) {\n                var tempEnd = new Date(startTime);\n                tempEnd.setMinutes(tempEnd.getMinutes() + this.parent.eventSettings.minimumEventDuration);\n                endTime = tempEnd;\n                if (endTime.getTime() > startEndHours.endHour.getTime()) {\n                    var tempStart = new Date(startEndHours.endHour.getTime());\n                    tempStart.setMinutes(tempStart.getMinutes() - this.parent.eventSettings.minimumEventDuration);\n                    startTime = tempStart;\n                    endTime = startEndHours.endHour;\n                }\n            }\n        }\n        return { startDate: startTime, endDate: endTime };\n    };\n    EventBase.prototype.createEventWrapper = function (type, index) {\n        if (type === void 0) { type = ''; }\n        if (index === void 0) { index = 0; }\n        var tr = createElement('tr');\n        var levels = this.parent.activeView.colLevels.slice(-1)[0];\n        for (var i = 0, len = levels.length; i < len; i++) {\n            var col = levels[parseInt(i.toString(), 10)];\n            var appointmentWrap = createElement('td', {\n                className: (type === 'allDay') ? ALLDAY_APPOINTMENT_WRAPPER_CLASS : (type === 'timeIndicator') ?\n                    TIMELINE_WRAPPER_CLASS : DAY_WRAPPER_CLASS, attrs: { 'data-date': col.date.getTime().toString() }\n            });\n            if (!isNullOrUndefined(col.groupIndex)) {\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n            }\n            if (type === '') {\n                var innerWrapper = createElement('div', {\n                    id: APPOINTMENT_WRAPPER_CLASS + '-' + index.toString(),\n                    className: APPOINTMENT_WRAPPER_CLASS\n                });\n                appointmentWrap.appendChild(innerWrapper);\n            }\n            tr.appendChild(appointmentWrap);\n            index = index + 1;\n        }\n        return tr;\n    };\n    EventBase.prototype.getPageCoordinates = function (e) {\n        if (isNullOrUndefined(e)) {\n            return e;\n        }\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    EventBase.prototype.renderSpannedIcon = function (element, spanEvent) {\n        var iconElement = createElement('div', { className: EVENT_INDICATOR_CLASS + ' ' + ICON });\n        if (spanEvent.isLeft) {\n            var iconLeft = iconElement.cloneNode();\n            addClass([iconLeft], EVENT_ICON_LEFT_CLASS);\n            prepend([iconLeft], element);\n        }\n        if (spanEvent.isRight) {\n            var iconRight = iconElement.cloneNode();\n            addClass([iconRight], EVENT_ICON_RIGHT_CLASS);\n            append([iconRight], element);\n        }\n        if (spanEvent.isTop) {\n            var iconTop = iconElement.cloneNode();\n            addClass([iconTop], EVENT_ICON_UP_CLASS);\n            prepend([iconTop], element);\n        }\n        if (spanEvent.isBottom) {\n            var iconBottom = iconElement.cloneNode();\n            addClass([iconBottom], EVENT_ICON_DOWN_CLASS);\n            append([iconBottom], element);\n        }\n    };\n    EventBase.prototype.unWireEvents = function () {\n        var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        for (var _i = 0, appElements_1 = appElements; _i < appElements_1.length; _i++) {\n            var element = appElements_1[_i];\n            EventHandler.clearEvents(element);\n        }\n    };\n    EventBase.prototype.destroy = function () {\n        this.unWireEvents();\n        this.parent = null;\n    };\n    return EventBase;\n}());\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @__PURE__ @class */ (function (_super) {\n    __extends$1(VerticalEvent, _super);\n    function VerticalEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateRender = [];\n        _this.renderedEvents = [];\n        _this.renderedAllDayEvents = [];\n        _this.overlapEvents = [];\n        _this.moreEvents = [];\n        _this.overlapList = [];\n        _this.allDayEvents = [];\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.allDayLevel = 0;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.animation = new Animation({ progress: _this.animationUiUpdate.bind(_this) });\n        _this.addEventListener();\n        return _this;\n    }\n    VerticalEvent.prototype.renderAppointments = function () {\n        if (isNullOrUndefined(this.parent)) {\n            return;\n        }\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n        var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS +\n            ',.' + APPOINTMENT_CLASS + ',.' + ROW_COUNT_WRAPPER_CLASS));\n        var isDragging = (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) ? true : false;\n        for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {\n            var wrapper = wrapperElements_1[_i];\n            if (isDragging && !(wrapper.classList.contains(ALLDAY_APPOINTMENT_CLASS) ||\n                wrapper.classList.contains(ROW_COUNT_WRAPPER_CLASS))) {\n                var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n                for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n                    if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[parseInt(j.toString(), 10)].groupIndex ||\n                        groupIndex === this.parent.crudModule.crudObj.targetEvent[parseInt(j.toString(), 10)].groupIndex) {\n                        remove(wrapper);\n                    }\n                }\n            }\n            else {\n                remove(wrapper);\n            }\n        }\n        if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.updateFocusedWorkCell();\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        var expandCollapse = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.Guid; }).indexOf(item.Guid);\n            });\n            removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            this.renderEvents('allDayEvents');\n            this.animation.animate(this.allDayElement[0]);\n        }\n        this.parent.notify(contentReady, {});\n        addClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n        if (isDragging) {\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        this.parent.renderTemplates();\n    };\n    VerticalEvent.prototype.initializeValues = function () {\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        if (this.resources.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.virtualScrollModule) {\n            this.resources = this.parent.resourceBase.renderedResources;\n        }\n        this.cellHeight =\n            parseFloat(this.parent.element.querySelector('.e-content-wrap tbody tr').getBoundingClientRect().height.toFixed(2));\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var i = 0, len = this.resources.length; i < len; i++) {\n                this.dateRender[parseInt(i.toString(), 10)] = this.resources[parseInt(i.toString(), 10)].renderDates;\n            }\n        }\n    };\n    VerticalEvent.prototype.getHeight = function (start, end) {\n        var appHeight = (getUniversalTime(end) - getUniversalTime(start)) /\n            MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight <= 0) ? this.cellHeight : appHeight;\n        return appHeight;\n    };\n    VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n        var appointmentWrap = this.element.querySelector('.' + APPOINTMENT_WRAPPER_CLASS + '[id=\"' + APPOINTMENT_WRAPPER_CLASS + '-' + index + '\"]');\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = {\n            data: extend({}, eventObj, null, true),\n            element: appointmentElement, cancel: false, type: eventType\n        };\n        this.parent.trigger(eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                appointmentWrap.appendChild(appointmentElement);\n            }\n        });\n    };\n    VerticalEvent.prototype.processBlockEvents = function () {\n        var resources = this.getResourceList();\n        var dateCount = this.getStartCount();\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            var renderDates = this.dateRender[parseInt(resource.toString(), 10)];\n            for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n                var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n                var endDate = addDays(renderDates[parseInt(day.toString(), 10)], 1);\n                var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[parseInt(resource.toString(), 10)]);\n                for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n                    var event_1 = filterEvents_1[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_1, resource);\n                    }\n                    this.renderBlockEvents(event_1, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = spannedData[this.fields.startTime];\n        var eEnd = spannedData[this.fields.endTime];\n        var currentDate = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n        var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule) && this.isWorkDayAvailable(resource, eStart)) {\n            var blockTop = void 0;\n            var blockHeight = void 0;\n            if (spannedData[this.fields.isAllDay]) {\n                var contentWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart, dayIndex, resource));\n            }\n            var appointmentElement = this.createBlockAppointmentElement(eventObj, resource, this.isResourceEventTemplate);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            var index = this.getDayIndex(dayIndex, resource, dayCount);\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    };\n    VerticalEvent.prototype.renderEvents = function (eventType) {\n        removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);\n        var eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        var resources = this.getResourceList();\n        var dateCount = this.getStartCount();\n        var isRender;\n        var appHeight = eventType === 'allDayEvents' ? getElementHeightFromClass(this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS), APPOINTMENT_CLASS) : 0;\n        var allDayRowTop = eventType === 'allDayEvents' && this.allDayElement.length > 0 ? this.allDayElement[0].offsetTop : 0;\n        var _loop_1 = function (resource) {\n            isRender = true;\n            if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents'\n                && !this_1.parent.uiStateValues.isGroupAdaptive) {\n                if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0 &&\n                    this_1.parent.crudModule.crudObj.targetEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0) {\n                    isRender = false;\n                }\n            }\n            this_1.slots = [];\n            var renderDates = this_1.dateRender[parseInt(resource.toString(), 10)];\n            var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;\n            this_1.slots.push(renderDates.map(function (date) { return +date; }));\n            for (var day = 0, length_2 = renderDates.length; day < length_2 &&\n                renderDates[parseInt(day.toString(), 10)] <= renderedDate[renderedDate.length - 1]; day++) {\n                this_1.renderedEvents = [];\n                var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n                var endDate = addDays(renderDates[parseInt(day.toString(), 10)], 1);\n                var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[parseInt(resource.toString(), 10)]);\n                if (isRender) {\n                    for (var _i = 0, filterEvents_2 = filterEvents; _i < filterEvents_2.length; _i++) {\n                        var event_2 = filterEvents_2[_i];\n                        if (this_1.parent.resourceBase) {\n                            this_1.setValues(event_2, resource);\n                        }\n                        if (eventType === 'allDayEvents') {\n                            this_1.renderAllDayEvents(event_2, day, resource, dateCount, false, allDayRowTop, appHeight);\n                        }\n                        else {\n                            if (this_1.isAllDayAppointment(event_2)) {\n                                this_1.allDayEvents.push(extend({}, event_2, null, true));\n                            }\n                            else {\n                                if (this_1.parent.eventSettings.enableMaxHeight) {\n                                    if (this_1.getOverlapIndex(event_2, day, false, resource) > 0) {\n                                        continue;\n                                    }\n                                }\n                                this_1.renderNormalEvents(event_2, day, resource, dateCount);\n                            }\n                        }\n                        this_1.cssClass = null;\n                        this_1.groupOrder = null;\n                    }\n                }\n                else {\n                    for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {\n                        var event_3 = filterEvents_3[_a];\n                        if (this_1.isAllDayAppointment(event_3)) {\n                            this_1.allDayEvents.push(extend({}, event_3, null, true));\n                        }\n                    }\n                }\n                dateCount += 1;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            _loop_1(resource);\n        }\n    };\n    VerticalEvent.prototype.getStartCount = function () {\n        return this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.timeScale.enable ?\n            parseInt(this.element.querySelector('.' + APPOINTMENT_WRAPPER_CLASS).getAttribute('id').split('-').slice(-1)[0], 10) : 0;\n    };\n    VerticalEvent.prototype.getDayIndex = function (dayIndex, resource, dayCount) {\n        var _this = this;\n        if (!this.parent.activeViewOptions.group.byDate) {\n            return dayCount;\n        }\n        if (this.parent.activeViewOptions.group.byDate && !this.parent.activeViewOptions.group.hideNonWorkingDays) {\n            var renderedIndex = this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]);\n            return (this.resources.length * renderedIndex) + resource;\n        }\n        var dateIndex = 0;\n        var firstColumn = this.parent.activeView.colLevels[0];\n        var currentDate = this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime();\n        var currentResources = [];\n        for (var i = 0; i < firstColumn.length; i++) {\n            currentResources = this.parent.resourceBase.resourceDateTree[parseInt(i.toString(), 10)];\n            if (currentDate === firstColumn[parseInt(i.toString(), 10)].date.getTime()) {\n                break;\n            }\n            dateIndex = dateIndex + firstColumn[parseInt(i.toString(), 10)].colSpan;\n        }\n        var resIndex = currentResources.findIndex(function (x) { return x.groupOrder.toString() ===\n            _this.resources[parseInt(resource.toString(), 10)].groupOrder.toString(); });\n        if (resIndex < 0) {\n            return dateIndex;\n        }\n        return dateIndex + resIndex;\n    };\n    VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[parseInt(resourceIndex.toString(), 10)].cssClass;\n            this.groupOrder = this.resources[parseInt(resourceIndex.toString(), 10)].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    };\n    VerticalEvent.prototype.getResourceList = function () {\n        // eslint-disable-next-line prefer-spread\n        var resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map(function (value, index) { return index; });\n        return resources;\n    };\n    // eslint-disable-next-line max-len\n    VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n        var fieldMapping = this.parent.eventFields;\n        var recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var appointmentWrapper = createElement('div', {\n            className: APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        var templateElement;\n        var eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var elementId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = elementId + viewName + 'eventTemplate';\n            var resIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            var templateName = 'eventTemplate' + (this.isResourceEventTemplate ? '_' + resIndex : '');\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: SUBJECT_CLASS });\n            this.parent.sanitize(recordSubject, appointmentSubject);\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    var appointmentStartTime = createElement('div', {\n                        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    var appointmentEndTime = createElement('div', {\n                        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                var appointmentTime = createElement('div', {\n                    className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                    innerHTML: timeStr\n                });\n                var appointmentLocation = createElement('div', { className: LOCATION_CLASS });\n                this.parent.sanitize((record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || ''), appointmentLocation);\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            var iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            var recurrenceIcon = createElement('div', { className: ICON + ' ' + iconClass });\n            if (isAllDay) {\n                appointmentDetails.appendChild(recurrenceIcon);\n            }\n            else {\n                appointmentWrapper.appendChild(recurrenceIcon);\n            }\n        }\n        this.parent.eventBase.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n        var index = currentDay + count;\n        var countWrapper = allDayRow[parseInt(index.toString(), 10)];\n        if (countWrapper.childElementCount <= 0) {\n            var innerCountWrap = createElement('div', {\n                className: ROW_COUNT_WRAPPER_CLASS,\n                id: ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            var moreIndicatorElement = createElement('div', {\n                className: MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            var countCell = countWrapper.querySelector('.' + MORE_INDICATOR_CLASS);\n            var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + this.parent.globalize.formatNumber(moreCount) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    };\n    VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n        var currentDate = resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]);\n        var renderedDate = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || [currentDate];\n        var currentDay = renderedDate.filter(function (date) { return date.getDay() === day; });\n        if (currentDay.length === 0) {\n            currentDate = resetTime(renderedDate[0]);\n        }\n        var field = this.parent.eventFields;\n        var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        var event = extend({}, record, null, true);\n        event.isSpanned = { isBottom: false, isTop: false };\n        if (record[field.startTime].getTime() < schedule.startHour.getTime()) {\n            event[field.startTime] = schedule.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[field.endTime].getTime() > schedule.endHour.getTime()) {\n            event[field.endTime] = schedule.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        var eventDates = this.updateEventMinimumDuration(schedule, event[field.startTime], event[field.endTime]);\n        event[field.startTime] = eventDates.startDate;\n        event[field.endTime] = eventDates.endDate;\n        return event;\n    };\n    VerticalEvent.prototype.isWorkDayAvailable = function (resource, start) {\n        if (this.parent.activeViewOptions.group.hideNonWorkingDays && this.resources.length > 0) {\n            var workDays = this.resources[parseInt(resource.toString(), 10)].\n                resourceData[this.resources[parseInt(resource.toString(), 10)].resource.workDaysField] ||\n                this.parent.activeViewOptions.workDays;\n            return workDays && workDays.indexOf(start.getDay()) >= 0;\n        }\n        return true;\n    };\n    // eslint-disable-next-line max-len\n    VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount, inline, cellTop, eventHeight) {\n        var _this = this;\n        var currentDates = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) ||\n            this.dateRender[parseInt(resource.toString(), 10)];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()];\n            currentDates = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]];\n        }\n        var record = this.splitEvent(eventObj, currentDates)[0];\n        var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        var appWidth = 0;\n        var topValue = 1;\n        var isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange && this.isWorkDayAvailable(resource, eStart)) {\n            var isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[parseInt(resource.toString(), 10)]) {\n                isAlreadyRendered = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (event) {\n                    return event.Guid === eventObj.Guid;\n                });\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n                        return event[_this.parent.eventFields.startTime] >= currentDates[parseInt(dayIndex.toString(), 10)] &&\n                            event[_this.parent.eventFields.endTime] <=\n                                addDays(new Date(+currentDates[parseInt(dayIndex.toString(), 10)]), 1);\n                    });\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                var allDayDifference_1 = record.data.count;\n                var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex_1;\n                this.allDayLevel = (this.allDayLevel < allDayIndex_1) ? allDayIndex_1 : this.allDayLevel;\n                var widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference_1 >= 0) {\n                    appWidth = (allDayDifference_1 * 100) - widthAdjustment;\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n                    this.renderedAllDayEvents[parseInt(resource.toString(), 10)] = [];\n                }\n                this.renderedAllDayEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n                var allDayRow_1 = [].slice.call(this.element.querySelector('.' + ALLDAY_ROW_CLASS).children);\n                var wIndex_1 = this.getDayIndex(dayIndex, resource, dayCount);\n                var eventWrapper_1 = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex_1 + 1) + ')');\n                var appointmentElement_1;\n                if (inline) {\n                    appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n                }\n                else {\n                    appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n                }\n                addClass([appointmentElement_1], ALLDAY_APPOINTMENT_CLASS);\n                var eventData = extend({}, record.data, null, true);\n                eventObj.data = eventData;\n                var args = { data: eventObj, element: appointmentElement_1, cancel: false };\n                this.parent.trigger(eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        eventWrapper_1.appendChild(appointmentElement_1);\n                        topValue += (allDayIndex_1 === 0 ? cellTop : (cellTop + (allDayIndex_1 * eventHeight))) + 1;\n                        setStyleAttribute(appointmentElement_1, { 'width': appWidth + '%', 'top': formatUnit(topValue) });\n                        if (allDayIndex_1 > 1) {\n                            _this.moreEvents.push(appointmentElement_1);\n                            for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n                            }\n                        }\n                        _this.allDayElement[0].setAttribute('data-count', _this.allDayLevel.toString());\n                        var allDayRowHeight = ((!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ?\n                            (3 * eventHeight) : ((_this.allDayLevel + 1) * eventHeight)) + 4;\n                        _this.setAllDayRowHeight(allDayRowHeight);\n                        _this.addOrRemoveClass();\n                        _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n                    }\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n        var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = record[this.fields.startTime];\n        var eEnd = record[this.fields.endTime];\n        var appWidth = '0%';\n        var appLeft = '0%';\n        var topValue = 0;\n        var currentDate = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n        var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if ((eStart.getTime() < this.parent.minDate.getTime()) || (eEnd.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        if (eStart <= eEnd && isValidEvent && this.isWorkDayAvailable(resource, eStart)) {\n            var appHeight = this.getHeight(eStart, eEnd);\n            if (eStart.getTime() > schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart, dayIndex, resource);\n            }\n            var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[parseInt(appIndex.toString(), 10)])) {\n                    this.overlapEvents[parseInt(appIndex.toString(), 10)] = [];\n                }\n                this.overlapEvents[parseInt(appIndex.toString(), 10)].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            appWidth = this.getEventWidth();\n            var argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayCount, dayIndex: dayIndex, record: record, resource: resource\n            };\n            var tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)])) {\n                this.renderedEvents[parseInt(resource.toString(), 10)] = [];\n            }\n            this.renderedEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n            var appointmentElement = void 0;\n            if (inline) {\n                appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n            }\n            else {\n                appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            }\n            setStyleAttribute(appointmentElement, {\n                'width': (this.parent.eventSettings.enableMaxHeight ? '100%' : tempData.appWidth),\n                'height': appHeight + 'px', 'top': topValue + 'px'\n            });\n            var iconHeight = appointmentElement.querySelectorAll('.' + EVENT_INDICATOR_CLASS).length * 15;\n            var maxHeight = appHeight - 40 - iconHeight;\n            var subjectElement = appointmentElement.querySelector('.' + SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            var index = this.getDayIndex(dayIndex, resource, dayCount);\n            var eventData = {};\n            eventData[this.fields.startTime] = eventObj[this.fields.startTime];\n            eventData[this.fields.endTime] = eventObj[this.fields.endTime];\n            record.data = eventData;\n            this.appendEvent(record, appointmentElement, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement, eventObj);\n        }\n    };\n    VerticalEvent.prototype.getEventWidth = function () {\n        var width = this.parent.currentView === 'Day' ? 97 : 94;\n        var tempWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length);\n        return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    };\n    VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n        var tempLeft = (parseFloat(appWidth) + 1) * index;\n        return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    };\n    VerticalEvent.prototype.getTopValue = function (date, day, resource) {\n        var startEndHours = getStartEndHours(resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]), this.startHour, this.endHour);\n        var startHour = startEndHours.startHour;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (this.parent.activeViewOptions.timeScale.enable) ? ((diffInMinutes * this.cellHeight * this.slotCount) / this.interval) : 0;\n    };\n    VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n        var _this = this;\n        var fieldMapping = this.parent.eventFields;\n        var eventsList = [];\n        var appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n                var date_1 = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)].getTime()));\n                eventsList = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (app) {\n                    return resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() &&\n                        resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n                });\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], eventsList);\n                }\n            }\n        }\n        else {\n            var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)]) ?\n                this.renderedEvents[parseInt(resource.toString(), 10)] : [];\n            var appointment_1 = [];\n            var recordStart_1 = record[fieldMapping.startTime];\n            var recordEnd_1 = record[fieldMapping.endTime];\n            this.overlapList = appointmentList_1.filter(function (data) {\n                return (data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1) ||\n                    (data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1) ||\n                    (data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() &&\n                        data[fieldMapping.startTime].getTime() === recordStart_1.getTime() && data[fieldMapping.endTime] < recordEnd_1);\n            });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], this.overlapList);\n            }\n            this.overlapList.forEach(function (obj) {\n                var filterList = appointmentList_1.filter(function (data) {\n                    return data[fieldMapping.endTime] > obj[fieldMapping.startTime] && data[fieldMapping.startTime] <= obj[fieldMapping.endTime];\n                });\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = _this.filterEventsByResource(_this.resources[parseInt(resource.toString(), 10)], filterList);\n                }\n                var collection = filterList.filter(function (val) {\n                    return _this.overlapList.indexOf(val) === -1;\n                });\n                if (collection.length > 0) {\n                    appointment_1 = appointment_1.concat(collection);\n                }\n            });\n            for (var i = 0; i < appointment_1.length - 1; i++) {\n                for (var j = i + 1; j < appointment_1.length; j++) {\n                    if (appointment_1[parseInt(i.toString(), 10)][fieldMapping.id] ===\n                        appointment_1[parseInt(j.toString(), 10)][fieldMapping.id]) {\n                        appointment_1.splice(j, 1);\n                        j--;\n                    }\n                }\n            }\n            this.overlapList = this.overlapList.concat(appointment_1);\n            eventsList = this.overlapList;\n            for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n                var event_4 = eventsList_1[_i];\n                var record_1 = event_4;\n                var index = record_1.Index;\n                if (isNullOrUndefined(this.overlapEvents[parseInt(index.toString(), 10)])) {\n                    this.overlapEvents[parseInt(index.toString(), 10)] = [event_4];\n                }\n                else {\n                    this.overlapEvents[parseInt(index.toString(), 10)].push(event_4);\n                }\n            }\n        }\n        if (!isAllDay) {\n            eventsList = eventsList.filter(function (obj) { return (obj[fieldMapping.startTime] === record[fieldMapping.startTime] &&\n                obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] &&\n                obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime]\n                && obj[fieldMapping.startTime] === record[fieldMapping.endTime]) ||\n                ((obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                    obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime())\n                    || (obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                        obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() ||\n                        obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime())); });\n        }\n        if (eventsList.length > 0) {\n            var appLevel = eventsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    VerticalEvent.prototype.adjustOverlapElements = function (args) {\n        var data = { appWidth: args.width, appLeft: args.left };\n        for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[parseInt(i.toString(), 10)])) {\n                for (var j = 0, length2 = this.overlapEvents[parseInt(i.toString(), 10)].length; j < length2; j++) {\n                    var dayCount = this.getDayIndex(args.dayIndex, args.resource, args.day);\n                    var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element && element.childElementCount > 0) {\n                        var eleGuid = this.overlapEvents[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                if (this.parent.enableRtl) {\n                                    apps.style.right = this.getEventLeft(args.width, i);\n                                }\n                                else {\n                                    apps.style.left = this.getEventLeft(args.width, i);\n                                }\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                            else {\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            var appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                appWidth = this.getEventWidth();\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = this.getEventLeft(appWidth, args.index);\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    };\n    VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n        var dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        if (this.parent.height === 'auto' || !this.parent.enableAllDayScroll) {\n            addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n        }\n        var allDayRow = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n        allDayRow.style.height = '';\n        if (this.parent.uiStateValues.expand && this.parent.height !== 'auto' && this.parent.enableAllDayScroll) {\n            allDayRow.style.height = (height / 12) + 'em';\n            this.parent.eventBase.allDayExpandScroll(dateHeader);\n        }\n        else {\n            for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n                var element = _a[_i];\n                element.style.height = (height / 12) + 'em';\n            }\n            removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n        }\n    };\n    VerticalEvent.prototype.addOrRemoveClass = function () {\n        var _this = this;\n        this.moreEvents.filter(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                addClass([element], EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        var moreEventCount = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        if (this.allDayLevel > 2) {\n            removeClass([moreEventCount], DISABLE_CLASS);\n        }\n        else {\n            addClass([moreEventCount], DISABLE_CLASS);\n        }\n        var countCell = [].slice.call(this.element.querySelectorAll('.' + ROW_COUNT_WRAPPER_CLASS));\n        countCell.forEach(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                removeClass([element], DISABLE_CLASS);\n            }\n            else {\n                addClass([element], DISABLE_CLASS);\n            }\n        });\n    };\n    VerticalEvent.prototype.getEventHeight = function () {\n        var eventElement = createElement('div', { className: APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        var eventWrapper = this.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        var height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    };\n    VerticalEvent.prototype.rowExpandCollapse = function () {\n        var target = this.element.querySelector('.' + ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(APPOINTMENT_ROW_EXPAND_CLASS);\n        var rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            target.setAttribute('aria-label', 'Collapse section');\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n            target.setAttribute('aria-label', 'Expand section');\n            rowHeight = (3 * this.getEventHeight()) + 4;\n            this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS).scrollTop = 0;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.animation.animate(this.allDayElement[0]);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    };\n    VerticalEvent.prototype.animationUiUpdate = function () {\n        this.parent.notify(contentReady, {});\n    };\n    VerticalEvent.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.allDayElement = null;\n        this.renderedAllDayEvents = null;\n        this.renderedEvents = null;\n        this.slotCount = null;\n        this.interval = null;\n        this.startHour = null;\n        this.endHour = null;\n        this.element = null;\n        this.fields = null;\n        this.animation = null;\n        _super.prototype.destroy.call(this);\n    };\n    return VerticalEvent;\n}(EventBase));\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(MonthEvent, _super);\n    function MonthEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.renderedEvents = [];\n        _this.monthHeaderHeight = 0;\n        _this.moreIndicatorHeight = 19;\n        _this.renderType = 'day';\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.maxOrIndicator = (_this.maxHeight || _this.withIndicator);\n        _this.moreIndicatorHeight =\n            (_this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace) ? 0 : _this.moreIndicatorHeight;\n        _this.addEventListener();\n        return _this;\n    }\n    MonthEvent.prototype.removeEventWrapper = function (appElement) {\n        if (appElement.length > 0) {\n            appElement = (this.parent.currentView === 'Month' || (!this.parent.activeView.isTimelineView() &&\n                !this.parent.activeViewOptions.timeScale.enable)) ? appElement : [appElement[0]];\n            for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n                var wrap = appElement_1[_i];\n                if (wrap.parentElement && wrap.parentElement.parentNode) {\n                    remove(wrap.parentElement);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n        var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.parent.rowAutoHeight) {\n            this.parent.uiStateValues.top = conWrap.scrollTop;\n            this.parent.uiStateValues.left = conWrap.scrollLeft;\n        }\n        var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                    this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n                this.removeEventWrapper(appElement);\n                if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] &&\n                    this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                        this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                        this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n                    this.removeEventWrapper(ele);\n                }\n            }\n        }\n        else {\n            for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n                var wrap = appointmentWrapper_1[_i];\n                remove(wrap);\n            }\n        }\n        this.removeHeightProperty(CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.currentView === 'Month') {\n            var wrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            var cellTd = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n            cellTd.appendChild(wrapper);\n            this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n            cellTd.removeChild(wrapper);\n        }\n        this.eventHeight = getElementHeightFromClass(this.element, APPOINTMENT_CLASS);\n        var scrollTop = conWrap.scrollTop;\n        if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll\n            && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n            if (this.parent.virtualScrollModule) {\n                this.parent.virtualScrollModule.updateFocusedWorkCell();\n            }\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.rowAutoHeight) {\n            this.updateBlockElements();\n            var data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true,\n                scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }\n            };\n            if (this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            if (!this.parent.enablePersistence) {\n                this.parent.notify(contentReady, {});\n            }\n            this.parent.notify(scrollUiUpdate, data);\n            if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n                var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n                var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + WEEK_NUMBER_CLASS));\n                weekNumberCells.forEach(function (cell, i) {\n                    var height = totalCells_1[parseInt(i.toString(), 10)].offsetHeight;\n                    setStyleAttribute(cell, { 'height': height + 'px' });\n                });\n                this.parent.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS).scrollTop =\n                    this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS).scrollTop;\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        var eventsList;\n        var blockList;\n        var resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n            var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n            var height_1 = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS).clientHeight / totalCells.length;\n            totalCells.forEach(function (cell) {\n                setStyleAttribute(cell, { 'height': height_1 + 'px' });\n            });\n        }\n        var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ?\n            0 : this.workCells.length - 1].getBoundingClientRect();\n        this.cellWidth = cellDetail.width;\n        this.cellHeight = cellDetail.height;\n        this.dateRender = dateRender;\n        var filteredDates = this.getRenderedDates(dateRender);\n        this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        var events = [];\n        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n            var event_1 = eventsList_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n            }\n            events = events.concat(this.splitEvent(event_1, filteredDates || this.dateRender));\n        }\n        for (var level = 0; level < this.slots.length; level++) {\n            this.renderedEvents = [];\n            var slot = this.slots[parseInt(level.toString(), 10)];\n            var endDate = addDays(new Date(slot[slot.length - 1]), 1);\n            var spannedEvents = this.filterEvents(new Date(slot[0]), endDate, events);\n            for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n                var event_2 = spannedEvents_1[_a];\n                if (this.maxHeight) {\n                    var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] :\n                        this.getStartTime(event_2, event_2.data);\n                    if (this.getIndex(sDate) > 0) {\n                        continue;\n                    }\n                }\n                this.updateIndicatorIcon(event_2);\n                this.renderEvents(event_2, resIndex, eventsList);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    };\n    MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var event_3 = blockEvents_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n            }\n            var blockSpannedList = [];\n            if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n                var temp = extend({}, event_3, null, true);\n                var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && getDateInMs(temp[this.fields.startTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.endTime] = addDays(resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && getDateInMs(temp[this.fields.endTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.startTime] = resetTime(new Date(event_3[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event_3);\n            }\n            for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n                var blockEvent = blockSpannedList_1[_a];\n                var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {\n                    var event_4 = spannedEvents_2[_b];\n                    this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.isSameDate = function (start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    };\n    MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        var day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        var cellTd = this.getCellTd(day);\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            var diffInDays = eventData.count;\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            var appLeft = (this.parent.enableRtl) ? 0 : position;\n            var appRight = (this.parent.enableRtl) ? position : 0;\n            var appHeight = this.cellHeight - this.monthHeaderHeight;\n            var appTop = this.getRowTop(resIndex);\n            var blockElement = this.createBlockAppointmentElement(event, resIndex, this.isResourceEventTemplate);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px',\n                'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        var blockIndicator = createElement('div', { className: 'e-icons ' + BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getStartTime = function (event, eventData) {\n        return event[this.fields.startTime];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getEndTime = function (event, eventData) {\n        return event[this.fields.endTime];\n    };\n    MonthEvent.prototype.getCellTd = function (day) {\n        return this.workCells[parseInt(day.toString(), 10)];\n    };\n    MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        return 0;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getRowTop = function (resIndex) {\n        return 0;\n    };\n    MonthEvent.prototype.updateIndicatorIcon = function (event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        var cloneData = event.data;\n        var start = this.parent.activeView.getStartHour();\n        var end = this.parent.activeView.getEndHour();\n        var startHour = getStartEndHours(event[this.fields.startTime], start, end);\n        var endHour = getStartEndHours(event[this.fields.endTime], start, end);\n        var actualStartTime = cloneData[this.fields.startTime];\n        var actualEndTime = cloneData[this.fields.endTime];\n        cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n        if (resetTime(actualStartTime).getTime() !== resetTime(actualEndTime).getTime()) {\n            var actualStartHour = startHour.startHour;\n            var actualEndHour = endHour.endHour;\n            var startTime = new Date(resetTime(actualStartTime));\n            startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n            cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ?\n                startTime.getTime() : addDays(startTime, 1).getTime());\n            if (actualEndTime.getTime() !== resetTime(actualEndTime).getTime()) {\n                var endTime = new Date(resetTime(actualEndTime));\n                cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <=\n                    endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n            }\n        }\n    };\n    MonthEvent.prototype.renderResourceEvents = function () {\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var sourceRes = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n                this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n                if (this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n                    this.renderEventsHandler(target.renderDates, target.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n                var slotData = resources_1[_i];\n                this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n            }\n        }\n    };\n    MonthEvent.prototype.getSlotDates = function (workDays) {\n        this.slots = [];\n        var dates = this.dateRender.map(function (date) { return +date; });\n        var noOfDays = !this.parent.activeViewOptions.showWeekend || (this.parent.activeViewOptions.group.byDate &&\n            this.parent.activeViewOptions.group.hideNonWorkingDays) ? workDays.length : WEEK_LENGTH;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    };\n    MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n        if (isCloneElement === void 0) { isCloneElement = false; }\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default ||\n            this.parent.localeObj.getConstant('addTitle'));\n        var newRecord = extend({}, record, record.data, true);\n        var attrs = {\n            'data-id': 'Appointment_' + record[this.fields.id],\n            'role': 'button', 'tabindex': '0',\n            'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n            'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n        };\n        if (!isCloneElement) {\n            attrs['data-guid'] = record.Guid;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            attrs['data-group-index'] = resIndex.toString();\n        }\n        var appointmentWrapper = createElement('div', { className: APPOINTMENT_CLASS, attrs: attrs });\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        var templateElement;\n        var eventData = record.data;\n        var eventObj = this.getEventData(record);\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var eventTemplate = 'eventTemplate' + (this.isResourceEventTemplate ? '_' + resIndex : '');\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false);\n        }\n        else {\n            var eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var appointmentSubject = createElement('div', { className: SUBJECT_CLASS });\n            this.parent.sanitize((eventSubject + (eventLocation ? '; ' + eventLocation : '')), appointmentSubject);\n            var appointmentStartTime = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var innerElement = void 0;\n                if (record[this.fields.isAllDay]) {\n                    var allDayString = createElement('div', {\n                        className: APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    var timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    var appTime = createElement('div', {\n                        className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''), innerHTML: timeString\n                    });\n                    var appLocation = createElement('div', { className: LOCATION_CLASS });\n                    this.parent.sanitize(eventLocation, appLocation);\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                var wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n        var eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            var iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            var iconLeft = createElement('div', {\n                className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            var iconRight = createElement('div', {\n                className: EVENT_INDICATOR_CLASS + ' ' + ICON + ' ' + EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        var day = this.parent.getIndexOfDate(this.dateRender, resetTime(startTime));\n        if ((day < 0) || (startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            var appWidth = (diffInDays * this.cellWidth) - 5;\n            var cellTd = this.workCells[parseInt(day.toString(), 10)];\n            var appTop = (overlapCount * (this.eventHeight + EVENT_GAP));\n            var height = this.monthHeaderHeight + ((overlapCount + 1) * (this.eventHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || enableAppRender) {\n                this.renderedEvents.push(extend({}, event, null, true));\n                var appointmentElement = void 0;\n                if (this.inlineValue) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = cellTd.parentElement.firstElementChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    if (this.workCells[day + i]) {\n                        var indicator = this.workCells[day + i].querySelector('.' + MORE_INDICATOR_CLASS);\n                        if (indicator) {\n                            var count = parseInt(indicator.getAttribute('data-count'), 10) + 1;\n                            indicator.setAttribute('data-count', count.toString());\n                            indicator.innerHTML = this.getMoreIndicatorText(count);\n                        }\n                        else {\n                            var startDate = new Date(this.dateRender[day + i].getTime());\n                            var endDate = addDays(this.dateRender[day + i], 1);\n                            var groupIndex = this.workCells[day + i].getAttribute('data-group-index');\n                            var moreIndicatorElement = this.getMoreIndicatorElement(1, startDate, endDate);\n                            if (!isNullOrUndefined(groupIndex)) {\n                                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                            }\n                            moreIndicatorElement.style.top = (this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight) + 'px';\n                            moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n                            this.renderElement(this.workCells[day + i], moreIndicatorElement);\n                            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    };\n    MonthEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var target = closest(element, 'tr');\n            this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            var firstChild = target.firstElementChild;\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    };\n    // eslint-disable-next-line max-len\n    MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n        var filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n        }\n        return filteredEvents;\n    };\n    MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateTime = resetTime(date).getTime();\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            if ((resetTime(app[this.fields.startTime]).getTime() <= dateTime) &&\n                (resetTime(app[this.fields.endTime]).getTime() >= dateTime)) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    MonthEvent.prototype.getIndex = function (date) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapEvents(date, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    MonthEvent.prototype.moreIndicatorClick = function (event) {\n        var _this = this;\n        var target = closest(event.target, '.' + MORE_INDICATOR_CLASS);\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n        var groupIndex = target.getAttribute('data-group-index');\n        var moreArgs = {\n            cancel: false, event: event, element: target, isPopupOpen: true,\n            startTime: startDate, endTime: endDate, viewName: this.parent.getNavigateView()\n        };\n        if (groupIndex) {\n            moreArgs.groupIndex = parseInt(groupIndex, 10);\n        }\n        this.parent.trigger(moreEventsClick, moreArgs, function (clickArgs) {\n            if (!clickArgs.cancel) {\n                if (clickArgs.isPopupOpen) {\n                    var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n                    var moreArgs_1 = { date: startDate, event: filteredEvents, element: event.target };\n                    _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n                }\n                else {\n                    _this.parent.setProperties({ selectedDate: startDate }, true);\n                    _this.parent.changeView(clickArgs.viewName, event);\n                }\n            }\n        });\n    };\n    MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n        var _this = this;\n        var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var isAppointment = appointmentElement.classList.contains(APPOINTMENT_CLASS);\n        var eventObj = this.getEventData(event);\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(eventRendered, args, function (eventArgs) {\n            if (eventArgs.cancel) {\n                _this.renderedEvents.pop();\n            }\n            else {\n                _this.renderElement(cellTd, appointmentElement, isAppointment);\n            }\n        });\n    };\n    MonthEvent.prototype.getEventData = function (event) {\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n        eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n        return eventObj;\n    };\n    MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (this.maxOrIndicator && isAppointment) {\n            this.setMaxEventHeight(element, cellTd);\n        }\n        var wrapperEle = cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n        if (wrapperEle) {\n            wrapperEle.appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n        var moreIndicatorElement = createElement('div', {\n            className: MORE_INDICATOR_CLASS,\n            innerHTML: this.getMoreIndicatorText(count),\n            attrs: {\n                'tabindex': '0',\n                'data-count': count.toString(),\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString()\n            }\n        });\n        return moreIndicatorElement;\n    };\n    MonthEvent.prototype.getMoreIndicatorText = function (count) {\n        return '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n    };\n    MonthEvent.prototype.removeHeightProperty = function (selector) {\n        var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n        var headerHeight = getOuterHeight(cell.querySelector('.' + DATE_HEADER_CLASS));\n        var height = (cell.offsetHeight - headerHeight) - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n        setStyleAttribute(event, { 'height': height + 'px', 'align-items': 'center' });\n    };\n    MonthEvent.prototype.destroy = function () {\n        this.element = null;\n        this.fields = null;\n        this.maxHeight = null;\n        this.withIndicator = null;\n        this.maxOrIndicator = null;\n        this.moreIndicatorHeight = null;\n        this.removeEventListener();\n        _super.prototype.destroy.call(this);\n    };\n    return MonthEvent;\n}(EventBase));\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar EVENT_GAP$1 = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nvar TimelineEvent = /** @__PURE__ @class */ (function (_super) {\n    __extends$3(TimelineEvent, _super);\n    function TimelineEvent(parent, type) {\n        var _this = _super.call(this, parent) || this;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.day = 0;\n        _this.rowIndex = 0;\n        _this.cellTops = [];\n        _this.renderType = type;\n        _this.eventContainers = [].slice.call(_this.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        var tr = [].slice.call(_this.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr'));\n        _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n        _this.content = _this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n        return _this;\n    }\n    TimelineEvent.prototype.getSlotDates = function () {\n        this.slots = [];\n        this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            this.renderType = 'day';\n            var workCell = this.content.querySelector('.' + WORK_CELLS_CLASS);\n            this.cellWidth = workCell.getBoundingClientRect().width / +(workCell.getAttribute('colspan') || 1);\n            this.slotsPerDay = 1;\n        }\n        else {\n            this.slotsPerDay = (this.dayLength / this.dateRender.length);\n        }\n    };\n    TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        if (this.renderType === 'day') {\n            for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n                var app = appointments_1[_i];\n                if ((resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(date.getTime())).getTime()) &&\n                    (resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(date.getTime())).getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        else {\n            for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n                var app = appointments_2[_a];\n                var eventData = app.data;\n                if (eventData.trimStartTime.getTime() <= date.getTime() &&\n                    eventData.trimEndTime.getTime() > date.getTime()) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    TimelineEvent.prototype.getSortComparerIndex = function (startDate, endDate) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    TimelineEvent.prototype.getOverlapSortComparerEvents = function (startDate, endDate, appointmentsCollection) {\n        var appointments = [];\n        for (var _i = 0, appointmentsCollection_1 = appointmentsCollection; _i < appointmentsCollection_1.length; _i++) {\n            var app = appointmentsCollection_1[_i];\n            if (this.renderType === 'day') {\n                if ((resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(startDate.getTime())).getTime()) &&\n                    (resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(startDate.getTime())).getTime())) {\n                    appointments.push(app);\n                }\n            }\n            else {\n                var eventData = app.data;\n                if (((eventData.trimStartTime.getTime() <= startDate.getTime()) && (startDate.getTime() < eventData.trimEndTime.getTime())) ||\n                    ((startDate.getTime() <= eventData.trimStartTime.getTime()) && (eventData.trimStartTime.getTime() < endDate.getTime()))) {\n                    appointments.push(app);\n                }\n            }\n        }\n        return appointments;\n    };\n    TimelineEvent.prototype.renderResourceEvents = function () {\n        this.removeHeightProperty(RESOURCE_COLUMN_TABLE_CLASS);\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var source = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n                this.rowIndex = source.groupIndex;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n                if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n                    this.rowIndex = target.groupIndex;\n                    this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var i = 0; i < resources.length; i++) {\n                this.rowIndex = i;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    TimelineEvent.prototype.renderEvents = function (event, resIndex, appointmentsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var eventData = event.data;\n        startTime = this.getStartTime(event, eventData);\n        endTime = this.getEndTime(event, eventData);\n        var startEndHours = getStartEndHours(event[this.fields.startTime], this.startHour, this.endHour);\n        var eventDates = this.updateEventMinimumDuration(startEndHours, startTime, endTime);\n        startTime = eventDates.startDate;\n        endTime = eventDates.endDate;\n        this.day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n        if (this.day < 0) {\n            return;\n        }\n        var cellTd = this.getCellTd();\n        var overlapCount = (isNullOrUndefined(this.parent.eventSettings.sortComparer)) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        var diffInDays = eventData.count;\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n        eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n        var currentDate = resetTime(new Date(this.dateRender[this.day].getTime()));\n        var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = true;\n        if (this.isDayProcess() || eventObj[this.fields.isAllDay]) {\n            isValidEvent = true;\n        }\n        else {\n            isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n        }\n        if (startTime <= endTime && isValidEvent) {\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n            var appLeft = 0;\n            var appRight = 0;\n            var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n            this.renderedEvents.push(extend({}, event, null, true));\n            if (isNullOrUndefined(this.cellTops[parseInt(resIndex.toString(), 10)])) {\n                this.cellTops[parseInt(resIndex.toString(), 10)] = this.getRowTop(resIndex);\n            }\n            var top_1 = this.cellTops[parseInt(resIndex.toString(), 10)];\n            var appTop = (top_1 + (this.maxHeight ? 0 : EVENT_GAP$1)) + (overlapCount * (appHeight + EVENT_GAP$1));\n            appLeft = (this.parent.enableRtl) ? 0 : position;\n            appRight = (this.parent.enableRtl) ? position : 0;\n            var height = ((overlapCount + 1) * (appHeight + EVENT_GAP$1)) + this.moreIndicatorHeight;\n            var renderApp = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || renderApp) {\n                var appointmentElement = void 0;\n                if (isNullOrUndefined(this.inlineValue)) {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                else {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                setStyleAttribute(appointmentElement, {\n                    'width': appWidth + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n                });\n                this.wireAppointmentEvents(appointmentElement, event);\n                if (this.parent.rowAutoHeight) {\n                    var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n                    var conWidth = conWrap.getBoundingClientRect().width;\n                    var isWithoutScroll = conWrap.offsetHeight === conWrap.clientHeight &&\n                        conWrap.offsetWidth === conWrap.clientWidth;\n                    this.renderEventElement(event, appointmentElement, cellTd);\n                    var firstChild = this.getFirstChild(resIndex);\n                    this.updateCellHeight(firstChild, height);\n                    if (isWithoutScroll &&\n                        (conWrap.offsetWidth > conWrap.clientWidth || conWidth !== conWrap.getBoundingClientRect().width)) {\n                        this.adjustAppointments(conWidth);\n                    }\n                }\n                else {\n                    this.renderEventElement(event, appointmentElement, cellTd);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var moreIndicator = cellTd.querySelector('.' + MORE_INDICATOR_CLASS);\n                    var appPos = (this.parent.enableRtl) ? appRight : appLeft;\n                    appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n                    var interval = this.interval / this.slotCount;\n                    var startDate = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' || i !== 0) ?\n                        new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);\n                    var endDate = addDays(this.dateRender[this.day + i], 1);\n                    if (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') {\n                        var position_1 = this.getPosition(startDate, endDate, event[this.fields.isAllDay], (this.day + i));\n                        this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_1);\n                    }\n                    else {\n                        var slotCount = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE *\n                            this.slotCount / this.interval;\n                        for (var k = 0; k < slotCount; k++) {\n                            startDate = (k === 0) ? new Date(startDate.getTime()) : new Date(startDate.getTime() + (60000 * interval));\n                            endDate = new Date(startDate.getTime() + (60000 * interval));\n                            if (endDate.getTime() > endTime.getTime()) {\n                                break;\n                            }\n                            var position_2 = this.getPosition(startDate, endDate, false, (this.day + i));\n                            if (appPos > position_2) {\n                                break;\n                            }\n                            appPos = position_2;\n                            this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_2);\n                        }\n                    }\n                }\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    TimelineEvent.prototype.renderTimelineMoreIndicator = function (startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {\n        appLeft = (this.parent.enableRtl) ? appRight = position : position;\n        appPos = (this.parent.enableRtl) ? appRight : appLeft;\n        appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n        if ((cellTd && isNullOrUndefined(moreIndicator)) ||\n            (!this.isAlreadyAvail(appPos, cellTd))) {\n            var startDateTime = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') ? new Date(+startTime) : startDate;\n            var slotStartTime = (new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval)));\n            var slotEndTime = new Date(slotStartTime.getTime() + (60000 * interval));\n            var groupIndex = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n                groupIndex = resIndex.toString();\n            }\n            var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n            var appArea = this.cellHeight - this.moreIndicatorHeight;\n            appHeight = this.withIndicator ? appArea - EVENT_GAP$1 : appHeight;\n            var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP$1));\n            var count = (filterEvents.length - renderedAppCount) <= 0 ? 1 : (filterEvents.length - renderedAppCount);\n            var moreIndicatorElement = void 0;\n            if (this.renderType === 'day') {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n            }\n            else {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n            }\n            if (!isNullOrUndefined(groupIndex)) {\n                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n            }\n            moreIndicatorElement.style.top = top + appArea + 'px';\n            moreIndicatorElement.style.width = this.cellWidth + 'px';\n            moreIndicatorElement.style.left = (Math.floor(appLeft / this.cellWidth) * this.cellWidth) + 'px';\n            moreIndicatorElement.style.right = (Math.floor(appRight / this.cellWidth) * this.cellWidth) + 'px';\n            this.renderElement(cellTd, moreIndicatorElement);\n            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n        }\n    };\n    TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n        var cellHeight = cell.style.height === '' ? this.cellHeight : parseInt(cell.style.height, 10);\n        if (height > cellHeight) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var resourceCell = this.parent.element.querySelector('.' + RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' +\n                    cell.getAttribute('data-group-index') + '\"]');\n                if (resourceCell) {\n                    setStyleAttribute(resourceCell, { 'height': height + 'px' });\n                }\n            }\n            var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' +\n                (cell.parentElement.rowIndex + 1) + ') td');\n            if (monthHeader) {\n                setStyleAttribute(monthHeader, { 'height': height + 'px' });\n            }\n        }\n    };\n    TimelineEvent.prototype.adjustAppointments = function (conWidth) {\n        var _this = this;\n        var tr = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody tr');\n        this.cellWidth = this.workCells[0].getBoundingClientRect().width;\n        var currentPercentage = (this.cellWidth * tr.children.length) / (conWidth / 100);\n        var apps = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        apps.forEach(function (app) {\n            if (_this.parent.enableRtl && app.style.right !== '0px') {\n                app.style.right = ((parseFloat(app.style.right) / 100) * currentPercentage) + 'px';\n            }\n            else if (app.style.left !== '0px') {\n                app.style.left = ((parseFloat(app.style.left) / 100) * currentPercentage) + 'px';\n            }\n            app.style.width = ((parseFloat(app.style.width) / 100) * currentPercentage) + 'px';\n        });\n    };\n    TimelineEvent.prototype.getFirstChild = function (index) {\n        var query = '.' + CONTENT_TABLE_CLASS + ' tbody td';\n        var groupIndex = '';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n        }\n        var td = this.parent.element.querySelector(query + groupIndex);\n        return td;\n    };\n    TimelineEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            var firstChild = this.getFirstChild(resIndex);\n            element.style.height = firstChild.offsetHeight + 'px';\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n        var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + BLOCK_INDICATOR_CLASS));\n        for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n            var element = blockIndicator_1[_a];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            element.style.top = this.getRowTop(resIndex) +\n                this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n    };\n    TimelineEvent.prototype.getStartTime = function (event, eventData) {\n        var startTime = event[this.fields.startTime];\n        var schedule = getStartEndHours(startTime, this.startHour, this.endHour);\n        if (this.isDayProcess()) {\n            startTime = event[this.fields.startTime];\n        }\n        else {\n            if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n                startTime = schedule.startHour;\n            }\n            else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n                startTime = this.getNextDay(schedule.startHour, eventData);\n            }\n            else {\n                startTime = eventData[this.fields.startTime];\n            }\n        }\n        // To overcome the overflow\n        eventData.trimStartTime = (event[this.fields.isAllDay]) ? schedule.startHour : eventData[this.fields.startTime];\n        return startTime;\n    };\n    TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n        var startDate;\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            startDate = addDays(startTime, i);\n            if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n                eventData.count = eventData.count - 1;\n                return startDate;\n            }\n        }\n        return startDate;\n    };\n    TimelineEvent.prototype.getEndTime = function (event, eventData) {\n        var endTime = event[this.fields.endTime];\n        var schedule = getStartEndHours(endTime, this.startHour, this.endHour);\n        if (this.isDayProcess()) {\n            endTime = eventData[this.fields.endTime];\n        }\n        else {\n            endTime = eventData[this.fields.endTime];\n            if (schedule.endHour.getTime() <= eventData[this.fields.endTime] || event[this.fields.isAllDay]) {\n                endTime = schedule.endHour;\n            }\n            if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event[this.fields.isAllDay]) {\n                endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);\n            }\n        }\n        // To overcome the overflow\n        eventData.trimEndTime = (event[this.fields.isAllDay]) ? schedule.endHour : eventData[this.fields.endTime];\n        return endTime;\n    };\n    TimelineEvent.prototype.getPreviousDay = function (startTime, endTime, eventData) {\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            var endDate = addDays(endTime, -i);\n            if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {\n                endDate = resetTime(new Date(endDate.getTime()));\n                endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());\n                var count = eventData.count;\n                var actualEndTime = eventData[this.fields.endTime];\n                eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;\n                return endDate;\n            }\n        }\n        return eventData[this.fields.endTime];\n    };\n    TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (count * this.slotsPerDay) * this.cellWidth;\n        }\n        if (this.isSameDay(startDate, endDate)) {\n            return this.getSameDayEventsWidth(startDate, endDate);\n        }\n        else {\n            return this.getSpannedEventsWidth(startDate, endDate, count);\n        }\n    };\n    TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n        return ((getUniversalTime(endDate) - getUniversalTime(startDate)) /\n            MS_PER_MINUTE * (this.cellWidth * this.slotCount) / this.interval);\n    };\n    TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n        var width = (diffInDays * this.slotsPerDay) * this.cellWidth;\n        var endWidth;\n        var start = getStartEndHours(resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n        if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endDate.getTime()))) === -1) {\n            endWidth = 0;\n        }\n        else {\n            var end = getStartEndHours(resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n            endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n            endWidth = ((this.slotsPerDay * this.cellWidth) === endWidth) ? 0 : endWidth;\n        }\n        var spannedWidth = startWidth + endWidth;\n        return (width > spannedWidth) ? width - spannedWidth : width - startWidth;\n    };\n    TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n        var startDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));\n        var endDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endTime.getTime())));\n        return (startDay === endDay);\n    };\n    TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n        var slotTd = (this.isSameDay(startTime, schedule.startHour)) ?\n            ((getUniversalTime(startTime) - getUniversalTime(schedule.startHour)) /\n                (MS_PER_MINUTE * this.interval)) * this.slotCount : 0;\n        if (day === 0) {\n            return slotTd;\n        }\n        else {\n            var daySlot = Math.round((((getUniversalTime(schedule.endHour) - getUniversalTime(schedule.startHour)) /\n                MS_PER_MINUTE) / this.interval) * this.slotCount);\n            return (daySlot * day) + slotTd;\n        }\n    };\n    TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (day * this.slotsPerDay) * this.cellWidth;\n        }\n        var currentDate = resetTime(new Date(this.dateRender[parseInt(day.toString(), 10)].getTime()));\n        var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);\n        var cellIndex;\n        if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else if (schedule.endHour.getTime() <= endTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        else if (schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        return cellIndex * this.cellWidth;\n    };\n    TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex, eventsList) {\n        if (this.renderType === 'day') {\n            return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n        }\n        else {\n            return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n        }\n    };\n    TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n        var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + MORE_INDICATOR_CLASS));\n        for (var i = 0; i < moreIndicator.length; i++) {\n            var indicatorPos = void 0;\n            if (moreIndicator) {\n                indicatorPos = (this.parent.enableRtl) ? moreIndicator[parseInt(i.toString(), 10)].style.right : moreIndicator[parseInt(i.toString(), 10)].style.left;\n            }\n            if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    TimelineEvent.prototype.getRowTop = function (resIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS +\n                ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop;\n        }\n        return 0;\n    };\n    TimelineEvent.prototype.getCellTd = function () {\n        var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n        return this.eventContainers[parseInt(wrapIndex.toString(), 10)];\n    };\n    TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        // No need to render block icon for Year, Month and Week header rows\n        if (this.parent.headerRows.length > 0 &&\n            (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' ||\n                this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n            return;\n        }\n        position = (Math.floor(position / this.cellWidth) * this.cellWidth) + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n        if (!this.isAlreadyAvail(position, cellTd)) {\n            var blockIndicator = createElement('div', { className: 'e-icons ' + BLOCK_INDICATOR_CLASS });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                blockIndicator.setAttribute('data-group-index', resIndex.toString());\n            }\n            if (this.parent.enableRtl) {\n                blockIndicator.style.right = position + 'px';\n            }\n            else {\n                blockIndicator.style.left = position + 'px';\n            }\n            blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n            this.renderElement(cellTd, blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineEvent.prototype.setMaxEventHeight = function (event, cell) {\n        setStyleAttribute(event, {\n            'height': (this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP$1) - (this.maxHeight ? 0 : this.moreIndicatorHeight)) + 'px'\n        });\n    };\n    TimelineEvent.prototype.isDayProcess = function () {\n        if (this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable ||\n            (this.parent.activeViewOptions.headerRows.length > 0 &&\n                this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour')) {\n            return true;\n        }\n        return false;\n    };\n    TimelineEvent.prototype.destroy = function () {\n        this.renderType = null;\n        this.eventContainers = null;\n        this.dayLength = null;\n        this.content = null;\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return TimelineEvent;\n}(MonthEvent));\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Inline Edit interactions\n */\nvar InlineEdit = /** @__PURE__ @class */ (function () {\n    function InlineEdit(parent) {\n        this.parent = parent;\n        this.parent.on(inlineClick, this.inlineEdit, this);\n    }\n    InlineEdit.prototype.inlineEdit = function (args) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (args.type === 'Cell') {\n            var moreWrapper = this.parent.element.querySelector('.' + MORE_POPUP_WRAPPER_CLASS);\n            if (moreWrapper && moreWrapper.classList.contains(POPUP_OPEN)) {\n                this.parent.quickPopup.morePopup.hide();\n            }\n            this.removeInlineAppointmentElement();\n            this.cellEdit(args);\n        }\n        else {\n            if (this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS) !==\n                args.element.querySelector('.' + INLINE_SUBJECT_CLASS)) {\n                this.removeInlineAppointmentElement();\n            }\n            this.eventEdit(args);\n        }\n    };\n    InlineEdit.prototype.cellEdit = function (args) {\n        var saveObj = this.generateEventData();\n        var cellIndex = args.element.cellIndex;\n        var count = this.getEventDaysCount(saveObj);\n        if (count > 1) {\n            count = Math.round(count);\n            count--;\n            cellIndex = cellIndex - count;\n        }\n        var start = resetTime(new Date('' + saveObj[this.parent.eventFields.startTime])).getTime();\n        var end = resetTime(new Date('' + saveObj[this.parent.eventFields.endTime])).getTime();\n        var resIndex = args.groupIndex || 0;\n        var isVertical = this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek';\n        if (this.parent.activeViewOptions.timeScale.enable && isVertical) {\n            var dayIndex = saveObj[this.parent.eventFields.startTime].getDay();\n            this.createVerticalViewInline(saveObj, dayIndex, resIndex, cellIndex);\n        }\n        else if (this.parent.currentView === 'Month' || (!this.parent.activeViewOptions.timeScale.enable && isVertical)) {\n            this.createMonthViewInline(saveObj, resIndex, start, end);\n        }\n        else {\n            this.createTimelineViewInline(saveObj, start, end, resIndex);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            inlineSubject.focus();\n        }\n    };\n    InlineEdit.prototype.eventEdit = function (args) {\n        var inlineSubject = args.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        var subject;\n        if (inlineSubject) {\n            subject = inlineSubject.value;\n        }\n        else {\n            var subEle = args.element.querySelector('.' + SUBJECT_CLASS);\n            if (!isNullOrUndefined(subEle)) {\n                addClass([subEle], DISABLE_CLASS);\n                subject = subEle.innerText;\n            }\n            else {\n                subject = args.data[this.parent.eventFields.subject];\n            }\n            inlineSubject = createElement('input', { className: INLINE_SUBJECT_CLASS, attrs: { value: subject } });\n            if (closest(args.element, '.' + MORE_POPUP_WRAPPER_CLASS)) {\n                args.element.insertBefore(inlineSubject, subEle);\n            }\n            else if (['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n                var subjectWrap = args.element.querySelector('.' + SUBJECT_WRAP);\n                if (isNullOrUndefined(subjectWrap)) {\n                    subjectWrap = createElement('div', { className: SUBJECT_WRAP });\n                    args.element.prepend(subjectWrap);\n                }\n                subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);\n            }\n            else {\n                args.element.querySelector('.e-appointment-details').prepend(inlineSubject);\n            }\n            inlineSubject.focus();\n        }\n        inlineSubject.setSelectionRange(subject.length, subject.length);\n    };\n    InlineEdit.prototype.createVerticalViewInline = function (saveObj, dayIndex, resIndex, daysCount) {\n        var _a;\n        var count = this.getEventDaysCount(saveObj);\n        var verticalEvent = new VerticalEvent(this.parent);\n        verticalEvent.initializeValues();\n        var index = verticalEvent.dateRender[parseInt(resIndex.toString(), 10)].map(function (date) { return date.getDay(); }).indexOf(dayIndex);\n        if (count >= 1) {\n            verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n            (_a = verticalEvent.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            var allDayElements = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_APPOINTMENT_CLASS));\n            var allDayLevel = 0;\n            if (allDayElements.length > 0) {\n                allDayLevel = Math.floor(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).getBoundingClientRect().height /\n                    allDayElements[0].offsetHeight) - 1;\n            }\n            verticalEvent.allDayLevel = allDayLevel;\n            var appHeight = getElementHeightFromClass(this.parent.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS), APPOINTMENT_CLASS);\n            var cellTop = verticalEvent.allDayElement.length > 0 ? verticalEvent.allDayElement[0].offsetTop : 0;\n            verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline, cellTop, appHeight);\n        }\n        else {\n            verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n    };\n    InlineEdit.prototype.createMonthViewInline = function (saveObj, index, start, end) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var monthEvent = new MonthEvent(this.parent);\n        monthEvent.dateRender = this.parent.activeView.renderDates;\n        monthEvent.inlineValue = this.parent.allowInline;\n        var renderDates = this.parent.activeView.renderDates;\n        var workDays = this.parent.activeViewOptions.workDays;\n        var monthCellSelector = '.' + WORK_CELLS_CLASS;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            monthCellSelector += '[data-group-index=\"' + index + '\"]';\n            var resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n            renderDates = resourceData.renderDates;\n            workDays = resourceData.workDays;\n        }\n        monthEvent.dateRender = renderDates;\n        monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));\n        monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;\n        monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;\n        monthEvent.eventHeight =\n            getElementHeightFromClass(this.parent.monthModule.element || monthEvent.element, APPOINTMENT_CLASS);\n        monthEvent.getSlotDates(workDays);\n        var filteredDates = monthEvent.getRenderedDates(renderDates);\n        var spannedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);\n        for (var _i = 0, spannedEvents_1 = spannedEvents; _i < spannedEvents_1.length; _i++) {\n            var eventData = spannedEvents_1[_i];\n            monthEvent.renderEvents(eventData, index);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        inlineSubject.focus();\n    };\n    InlineEdit.prototype.createTimelineViewInline = function (saveObj, start, end, resIndex) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        timelineView.dateRender = this.parent.activeView.renderDates;\n        timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        timelineView.inlineValue = this.parent.allowInline;\n        timelineView.cellWidth = workCell.offsetWidth;\n        timelineView.cellHeight = workCell.offsetHeight;\n        var dayLength = this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr').length === 0 ?\n            0 : this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n        timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;\n        timelineView.eventHeight = getElementHeightFromClass(timelineView.element, APPOINTMENT_CLASS);\n        timelineView.renderEvents(saveObject, resIndex);\n    };\n    InlineEdit.prototype.getEventDaysCount = function (saveObj) {\n        var startDate = saveObj[this.parent.eventFields.startTime];\n        var endDate = saveObj[this.parent.eventFields.endTime];\n        var daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n        return daysCount;\n    };\n    InlineEdit.prototype.generateEventData = function (target) {\n        var inlineElement = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        var subject = inlineElement ? inlineElement.value : target ? target.innerHTML : '';\n        var saveObj = {};\n        saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n        saveObj[this.parent.eventFields.subject] = subject;\n        saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        this.parent.eventWindow.setDefaultValueToObject(saveObj);\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);\n        }\n        return saveObj;\n    };\n    InlineEdit.prototype.documentClick = function () {\n        var target = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (target && target.value !== '') {\n            this.inlineCrudActions(target);\n        }\n        else {\n            this.removeInlineAppointmentElement();\n        }\n    };\n    InlineEdit.prototype.inlineCrudActions = function (target) {\n        if (closest(target, '.' + INLINE_APPOINTMENT_CLASS)) {\n            var saveObj = this.generateEventData(target);\n            this.parent.addEvent(saveObj);\n        }\n        else {\n            var eventTarget = closest(target, '.' + APPOINTMENT_CLASS);\n            var eventDetails = this.parent.getEventDetails(eventTarget);\n            eventDetails[this.parent.eventFields.subject] = target.value;\n            var currentAction = void 0;\n            if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {\n                currentAction = 'EditOccurrence';\n                eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n            }\n            this.parent.saveEvent(eventDetails, currentAction);\n        }\n        this.removeInlineAppointmentElement();\n    };\n    InlineEdit.prototype.createInlineAppointmentElement = function (inlineData) {\n        var inlineAppointmentElement = createElement('div', {\n            className: APPOINTMENT_CLASS + ' ' + INLINE_APPOINTMENT_CLASS\n        });\n        var inlineDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        inlineAppointmentElement.appendChild(inlineDetails);\n        var inline = createElement('input', { className: INLINE_SUBJECT_CLASS });\n        inlineDetails.appendChild(inline);\n        if (inlineData) {\n            this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, 'backgroundColor');\n        }\n        return inlineAppointmentElement;\n    };\n    InlineEdit.prototype.removeInlineAppointmentElement = function () {\n        var inlineAppointment = [].slice.call(this.parent.element.querySelectorAll('.' + INLINE_APPOINTMENT_CLASS));\n        if (inlineAppointment.length > 0) {\n            inlineAppointment.forEach(function (node) { return remove(node); });\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            var appointmentSubject = closest(inlineSubject, '.' + APPOINTMENT_CLASS);\n            var subject = appointmentSubject.querySelector('.' + SUBJECT_CLASS);\n            if (!isNullOrUndefined(subject)) {\n                removeClass([subject], DISABLE_CLASS);\n            }\n            remove(inlineSubject);\n        }\n    };\n    InlineEdit.prototype.destroy = function () {\n        this.parent.off(inlineClick, this.inlineEdit);\n    };\n    return InlineEdit;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Appointment window field validation\n */\nvar FieldValidator = /** @__PURE__ @class */ (function () {\n    function FieldValidator() {\n    }\n    FieldValidator.prototype.renderFormValidator = function (form, rules, element, locale) {\n        var _this = this;\n        this.element = element;\n        this.formObj = new FormValidator(form, {\n            locale: locale,\n            customPlacement: function (inputElement, error) {\n                _this.errorPlacement(inputElement, error);\n            },\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            focusout: function (args) {\n                _this.focusOut(args);\n            }\n        });\n    };\n    FieldValidator.prototype.focusOut = function (args) {\n        var target = args.relatedTarget;\n        if (target && (target.classList.contains('e-dlg-closeicon-btn') || target.classList.contains('e-close')\n            || target.classList.contains(ALLDAY_CELLS_CLASS) || target.classList.contains(HEADER_CELLS_CLASS)\n            || target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(WORK_CELLS_CLASS)\n            || target.classList.contains(EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {\n            this.ignoreError = true;\n        }\n        else {\n            this.ignoreError = false;\n        }\n    };\n    FieldValidator.prototype.validationComplete = function (args) {\n        var elem = this.element.querySelector('#' + args.inputName + '_Error');\n        if (elem) {\n            elem.style.display = (args.status === 'failure') ? '' : 'none';\n        }\n    };\n    FieldValidator.prototype.errorPlacement = function (inputElement, error) {\n        var id = error.getAttribute('for');\n        var elem = this.element.querySelector('#' + id + '_Error');\n        if (!elem && !this.ignoreError) {\n            this.createTooltip(inputElement, error, id, '');\n        }\n        if (!isNullOrUndefined(elem)) {\n            elem.querySelector('.e-error').innerHTML = error.innerHTML;\n        }\n    };\n    FieldValidator.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.getBoundingClientRect();\n        if (this.element.classList.contains(POPUP_WRAPPER_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    FieldValidator.prototype.destroyToolTip = function () {\n        if (this.element) {\n            var elements = [].slice.call(this.element.querySelectorAll('.' + ERROR_VALIDATION_CLASS));\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                remove(elem);\n            }\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    FieldValidator.prototype.destroy = function () {\n        if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.formObj = null;\n        this.element = null;\n    };\n    return FieldValidator;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @__PURE__ @class */ (function () {\n    function QuickPopups(parent) {\n        this.isMultipleEventSelect = false;\n        this.isCrudAction = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    QuickPopups.prototype.render = function () {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.renderQuickPopup = function () {\n        var quickPopupWrapper = createElement('div', { className: POPUP_WRAPPER_CLASS + ' e-popup-close' });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'none', Y: 'fit' })),\n            position: (this.parent.isAdaptive || this.parent.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1004 : 3)\n        });\n    };\n    QuickPopups.prototype.renderMorePopup = function () {\n        var moreEventPopup = \"<div class=\\\"\" + MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + MORE_EVENT_HEADER_CLASS + \"\\\">\" +\n            (\"<div class=\\\"\" + MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\"></div>\") +\n            (\"<div class=\\\"\" + MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + MORE_EVENT_HEADER_DAY_CLASS + \"\\\"></div>\") +\n            (\"<div class=\\\"\" + MORE_EVENT_HEADER_DATE_CLASS + \" \" + NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n        var moreEventWrapper = createElement('div', {\n            className: MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(moreEventWrapper);\n            addClass([moreEventWrapper], DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(moreEventWrapper);\n        }\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'flip', Y: 'flip' })),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1002 : 2)\n        });\n        var closeButton = this.morePopup.element.querySelector('.' + MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', ICON + ' ' + CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    };\n    QuickPopups.prototype.renderQuickDialog = function () {\n        var buttonModel = [\n            { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n            { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n            {\n                buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (this.parent.eventSettings.editFollowingEvents) {\n            var followingSeriesButton = {\n                buttonModel: { cssClass: 'e-quick-alertfollowing e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this)\n            };\n            buttonModel.splice(1, 0, followingSeriesButton);\n        }\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: buttonModel,\n            cssClass: QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        var dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n    };\n    // eslint-disable-next-line max-len\n    QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n        var buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        EventHandler.add(element, 'click', clickEvent, this);\n        removeClass([element], ICON);\n    };\n    QuickPopups.prototype.quickDialogClass = function (action) {\n        var classList$$1 = [\n            QUICK_DIALOG_OCCURRENCE_CLASS, QUICK_DIALOG_SERIES_CLASS, QUICK_DIALOG_DELETE_CLASS,\n            QUICK_DIALOG_CANCEL_CLASS, QUICK_DIALOG_ALERT_BTN_CLASS, DISABLE_CLASS\n        ];\n        var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        var followingEventButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n        removeClass([okButton, cancelButton], classList$$1);\n        addClass([this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS)], DISABLE_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n            addClass([followingEventButton], DISABLE_CLASS);\n            removeClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n        }\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], QUICK_DIALOG_SERIES_CLASS);\n                if (this.parent.eventSettings.editFollowingEvents) {\n                    removeClass([followingEventButton], DISABLE_CLASS);\n                    addClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);\n                    addClass([followingEventButton], QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n                }\n                break;\n            case 'Delete':\n                addClass([okButton], QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [QUICK_DIALOG_ALERT_OK, QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [QUICK_DIALOG_ALERT_CANCEL, DISABLE_CLASS]);\n                break;\n        }\n    };\n    QuickPopups.prototype.applyFormValidation = function () {\n        var form = this.quickPopup.element.querySelector('.' + FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n    };\n    QuickPopups.prototype.openRecurrenceAlert = function () {\n        var editDeleteOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n            editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n        }\n        var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_FOLLOWING);\n        if (editFollowingEventsOnly) {\n            editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n            editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n        }\n        var editDeleteSeries = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n            editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n        }\n        this.quickDialog.content = this.l10n.getConstant('editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n        this.quickDialogClass('Recurrence');\n        this.showQuickDialog('RecurrenceAlert');\n    };\n    QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n        this.quickDialogClass('Alert');\n        var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n        var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        var dialogCancel;\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'createError':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                dialogCancel = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n            case 'occurrenceAlert':\n                addClass([cancelButton], DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n                break;\n        }\n        if ((!this.parent.enableRecurrenceValidation && type === 'wrongPattern') || this.parent.enableRecurrenceValidation) {\n            this.showQuickDialog('RecurrenceValidationAlert');\n        }\n    };\n    QuickPopups.prototype.openDeleteAlert = function () {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    };\n    QuickPopups.prototype.openValidationError = function (type, eventData) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        var okButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            okButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog('ValidationAlert', eventData);\n    };\n    QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n        var _this = this;\n        this.quickDialog.dataBind();\n        var eventProp = {\n            type: popupType, cancel: false, element: this.quickDialog.element,\n            data: extend({}, (eventData || this.parent.activeEventData.event), null, true)\n        };\n        this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.quickDialog.show();\n            }\n        });\n    };\n    QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var moreEventContentEle = createElement('div', { className: MORE_EVENT_CONTENT_CLASS });\n        var moreEventWrapperEle = createElement('div', { className: MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            var _loop_1 = function (eventData) {\n                var eventText = (eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default\n                    || this_1.parent.localeObj.getConstant('addTitle'));\n                var appointmentElement = createElement('div', {\n                    className: APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-disabled': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-label': this_1.parent.getAnnouncementString(eventData)\n                    }\n                });\n                var templateElement = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n                    templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false);\n                    append(templateElement, appointmentElement);\n                }\n                else {\n                    appointmentElement.appendChild(createElement('div', { className: SUBJECT_CLASS }));\n                    this_1.parent.sanitize(eventText, appointmentElement.firstElementChild);\n                }\n                if (!isNullOrUndefined(groupIndex)) {\n                    appointmentElement.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    var iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentElement.appendChild(createElement('div', { className: ICON + ' ' + iconClass }));\n                }\n                var args = {\n                    data: extend({}, eventData, null, true),\n                    element: appointmentElement, cancel: false\n                };\n                this_1.parent.trigger(eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        moreEventWrapperEle.appendChild(appointmentElement);\n                        var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n                        _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n                        _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n                var eventData = eventCollection_1[_i];\n                _loop_1(eventData);\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    };\n    QuickPopups.prototype.tapHoldEventPopup = function (e) {\n        var target = closest(e.target, '.' + APPOINTMENT_CLASS);\n        this.isMultipleEventSelect = false;\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        var guid = target.getAttribute('data-guid');\n        var eventObj = this.parent.eventBase.getEventByGuid(guid);\n        if (isNullOrUndefined(eventObj)) {\n            return;\n        }\n        var eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        var eventTemplate = \"<div class=\\\"\" + MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + POPUP_HEADER_CLASS + \"\\\">\" +\n            (\"<button class=\\\"\" + CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") +\n            (\"<div class=\\\"\" + SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") +\n            (\"<button class=\\\"\" + EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n            (\"<button class=\\\"\" + DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n        this.quickPopup.element.innerHTML = eventTemplate;\n        var closeIcon = this.quickPopup.element.querySelector('.' + CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n        var editAction = !this.parent.eventSettings.allowEditing || readonly;\n        var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n        var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n        if (editIcon) {\n            this.renderButton('e-flat e-round e-small', ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n        }\n        var deleteIcon = this.quickPopup.element.querySelector('.' + DELETE_CLASS);\n        if (deleteIcon) {\n            this.renderButton('e-flat e-round e-small', ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n        }\n        this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(e));\n    };\n    QuickPopups.prototype.isCellBlocked = function (args) {\n        var tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    };\n    QuickPopups.prototype.cellClick = function (args) {\n        var date = new Date(args.startTime.getTime());\n        if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding ||\n            this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) ||\n            !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n            this.quickPopupHide();\n            return;\n        }\n        var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            var newEventClone = this.parent.element.querySelector('.' + NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: NEW_EVENT_CLASS,\n                    innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n                });\n            }\n            var targetCell = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        var target = closest(targetEle, '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' +\n            HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        var isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n            var subjectElement_1 = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n            if (subjectElement_1) {\n                subjectElement_1.focus();\n            }\n            return;\n        }\n        else if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n        }\n        var temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        var quickCellPopup = createElement('div', { className: CELL_POPUP_CLASS });\n        quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n        quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n        quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n        var subjectElement = quickCellPopup.querySelector('.' + SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            subjectElement.value = this.parent.eventSettings.fields.subject.default;\n        }\n        var closeIcon = quickCellPopup.querySelector('.' + CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n        var moreButton = quickCellPopup.querySelector('.' + QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        var saveButton = quickCellPopup.querySelector('.' + EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.relateTo = target;\n        this.quickPopup.dataBind();\n        this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(args.event));\n    };\n    QuickPopups.prototype.isSameEventClick = function (events) {\n        var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n            var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                var editButton = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.isQuickTemplate = function (type) {\n        return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    };\n    QuickPopups.prototype.eventClick = function (events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + APPOINTMENT_CLASS));\n        }\n        else {\n            var isSameTarget = this.isSameEventClick(events);\n            this.parent.selectedElements = [];\n            if (isSameTarget) {\n                return;\n            }\n            else if (this.quickPopup.element) {\n                this.destroyPopupButtons('quickPopup');\n            }\n            var eventData = events.event;\n            var quickEventPopup = createElement('div', { className: EVENT_POPUP_CLASS });\n            quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n            quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n            quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n            var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            var editAction = !this.parent.eventSettings.allowEditing || readonly;\n            var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n            var editIcon = quickEventPopup.querySelector('.' + EDIT_CLASS);\n            var buttonClass = 'e-flat e-round e-small';\n            if (editIcon) {\n                this.renderButton(buttonClass, ICON + ' ' + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n            }\n            var deleteIcon = quickEventPopup.querySelector('.' + DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton(buttonClass, ICON + ' ' + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n            }\n            var closeIcon = quickEventPopup.querySelector('.' + CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton(buttonClass, ICON + ' ' + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n            }\n            var editButton = quickEventPopup.querySelector('.' + EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n            }\n            var deleteButton = quickEventPopup.querySelector('.' + DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n            }\n            if (this.morePopup && !closest(events.element, '.' + MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + APPOINTMENT_CLASS);\n            this.quickPopup.dataBind();\n            this.beforeQuickPopupOpen(events.element, this.parent.eventBase.getPageCoordinates(events.originalEvent));\n        }\n    };\n    QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n        var headerTemplate = createElement('div', { className: POPUP_HEADER_CLASS });\n        if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n            var headerArgs = extend({}, headerData, { elementType: headerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n            append([].slice.call(headerTemp), headerTemplate);\n        }\n        else {\n            var header = void 0;\n            var args = void 0;\n            switch (headerType) {\n                case 'Cell':\n                    header = \"<div class=\\\"\" + POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + CLOSE_CLASS + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n                    break;\n                case 'Event':\n                    args = this.getFormattedString(headerData);\n                    header = \"<div class=\\\"\" + POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                        (\"<button class=\\\"\" + (EDIT_CLASS + ' ' + ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + (DELETE_CLASS + ' ' + ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") +\n                        (\"<div class=\\\"\" + SUBJECT_WRAP + \"\\\"><div class=\\\"\" + SUBJECT_CLASS + \" \" + TEXT_ELLIPSIS + \"\\\" \") +\n                        (\"title=\\\"\" + (args.eventSubject ? args.eventSubject.replaceAll('\"', '\\'') : args.eventSubject) + \"\\\"></div></div >\");\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: header });\n            if (headerType === 'Event') {\n                var subjectText = templateWrapper.querySelector('.' + SUBJECT_CLASS);\n                this.parent.sanitize(args.eventSubject, subjectText);\n            }\n            append([].slice.call(templateWrapper.childNodes), headerTemplate);\n        }\n        return headerTemplate;\n    };\n    QuickPopups.prototype.getPopupContent = function (type, args, data) {\n        var contentTemplate = createElement('div', { className: POPUP_CONTENT_CLASS });\n        if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n            var contentArgs = extend({}, data, { elementType: type.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n            append([].slice.call(contentTemp), contentTemplate);\n        }\n        else {\n            var content = void 0;\n            var cellDetails = void 0;\n            var argsData = void 0;\n            var resourceText = this.getResourceText(args, type.toLowerCase());\n            switch (type) {\n                case 'Cell':\n                    cellDetails = this.getFormattedString(data);\n                    content = \"<table class=\\\"\" + POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + FORM_CLASS + \"\\\" onsubmit=\" +\n                        (\"\\\"return false;\\\"><input class=\\\"\" + SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") +\n                        (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + DATE_TIME_CLASS + \"\\\">\") +\n                        (\"<div class=\\\"\" + DATE_TIME_ICON_CLASS + \" \" + ICON + \"\\\"></div><div class=\\\"\" + DATE_TIME_DETAILS_CLASS + \" \") +\n                        (TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") +\n                        ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + RESOURCE_CLASS + \"\\\">\" +\n                            (\"<div class=\\\"\" + RESOURCE_ICON_CLASS + \" \" + ICON + \" \\\"></div><div class=\\\"\" + RESOURCE_DETAILS_CLASS + \" \") +\n                            (TEXT_ELLIPSIS + \"\\\"></div></div>\") : '') + \"</td></tr></tbody></table>\");\n                    break;\n                case 'Event':\n                    argsData = this.getFormattedString(data);\n                    content = '<div class=\"' + DATE_TIME_CLASS + '\"><div class=\"' + DATE_TIME_ICON_CLASS + ' ' + ICON +\n                        '\"></div><div class=\"' + DATE_TIME_WRAPPER_CLASS + ' ' + TEXT_ELLIPSIS + '\"><div class=\"' +\n                        DATE_TIME_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n                    if (data[this.parent.eventFields.recurrenceRule]) {\n                        content += '<div class=\"' + RECURRENCE_SUMMARY_CLASS + ' ' + TEXT_ELLIPSIS + '\">' +\n                            this.getRecurrenceSummary(data) + '</div>';\n                    }\n                    content += '</div></div>';\n                    if (data[this.parent.eventFields.location]) {\n                        content += '<div class=\"' + LOCATION_CLASS + '\"><div class=\"' + LOCATION_ICON_CLASS + ' ' +\n                            ICON + '\"></div><div class=\"' + LOCATION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n                        content += '<div class=\"' + TIME_ZONE_CLASS + '\"><div class=\"' + TIME_ZONE_ICON_CLASS + ' ' + ICON +\n                            '\"></div><div class=\"' + TIME_ZONE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\">' +\n                            this.getTimezone(data) + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.description]) {\n                        content += '<div class=\"' + DESCRIPTION_CLASS + '\"><div class=\"' + DESCRIPTION_ICON_CLASS + ' ' + ICON +\n                            '\"></div><div class=\"' + DESCRIPTION_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    if (this.parent.resourceCollection.length > 0) {\n                        content += '<div class=\"' + RESOURCE_CLASS + '\"><div class=\"' + RESOURCE_ICON_CLASS + ' ' + ICON +\n                            '\"></div><div class=\"' + RESOURCE_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: content });\n            if (data[this.parent.eventFields.location]) {\n                var locationDetails = templateWrapper.querySelector('.' + LOCATION_DETAILS_CLASS);\n                if (!isNullOrUndefined(locationDetails)) {\n                    this.parent.sanitize(data[this.parent.eventFields.location], locationDetails);\n                }\n            }\n            if (data[this.parent.eventFields.description]) {\n                var descriptionDetails = templateWrapper.querySelector('.' + DESCRIPTION_DETAILS_CLASS);\n                if (!isNullOrUndefined(descriptionDetails)) {\n                    this.parent.sanitize(data[this.parent.eventFields.description], descriptionDetails);\n                }\n            }\n            if (resourceText) {\n                var resourceDetails = templateWrapper.querySelector('.' + RESOURCE_DETAILS_CLASS);\n                if (!isNullOrUndefined(resourceDetails)) {\n                    this.parent.sanitize(resourceText, resourceDetails);\n                }\n            }\n            append([].slice.call(templateWrapper.childNodes), contentTemplate);\n        }\n        return contentTemplate;\n    };\n    QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n        var footerTemplate = createElement('div', { className: POPUP_FOOTER_CLASS });\n        if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n            var footerArgs = extend({}, footerData, { elementType: footerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n            append([].slice.call(footerTemp), footerTemplate);\n        }\n        else {\n            var footer = void 0;\n            switch (footerType) {\n                case 'Cell':\n                    footer = \"<button class=\\\"\" + (QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + TEXT_ELLIPSIS) + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") +\n                        (\"<button class=\\\"\" + EVENT_CREATE_CLASS + \" \" + TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") +\n                        (this.l10n.getConstant('save') + \"</button>\");\n                    break;\n                case 'Event':\n                    footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + EDIT_EVENT_CLASS + \" \" +\n                        (TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") +\n                        (\"<button class=\\\"\" + DELETE_EVENT_CLASS + \" \" + TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") +\n                        (this.l10n.getConstant('delete') + \"</button>\"));\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: footer });\n            append([].slice.call(templateWrapper.childNodes), footerTemplate);\n        }\n        return footerTemplate;\n    };\n    QuickPopups.prototype.getResourceText = function (args, type) {\n        if (this.parent.resourceCollection.length === 0) {\n            return null;\n        }\n        var resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            var resourceData = resourceCollection_1.dataSource;\n            if (type === 'event') {\n                var eventData = args.event;\n                var _loop_2 = function (data) {\n                    var resourceId = eventData[resourceCollection_1.field];\n                    if (resourceId instanceof Array) {\n                        if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n                            var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n                            var resource = resourceData.filter(function (e) {\n                                return e[resourceCollection_1.idField] === id_1;\n                            })[0];\n                            resourceValue += (resourceValue === '') ? resource[resourceCollection_1.textField] :\n                                ', ' + resource[resourceCollection_1.textField];\n                        }\n                    }\n                    else if (data[resourceCollection_1.idField] === resourceId) {\n                        resourceValue = data[resourceCollection_1.textField].toString();\n                    }\n                };\n                for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n                    var data = resourceData_1[_i];\n                    _loop_2(data);\n                }\n            }\n            else {\n                resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n            }\n        }\n        else {\n            if (type === 'event') {\n                var eventData = args.event;\n                var resourceData = void 0;\n                var lastResource_1;\n                for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                var resNames_1 = [];\n                var lastResourceData_1 = lastResource_1.dataSource;\n                resourceData.forEach(function (value) {\n                    var text;\n                    var i = findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n                    if (i > -1) {\n                        text = lastResourceData_1[parseInt(i.toString(), 10)][lastResource_1.textField];\n                    }\n                    if (text) {\n                        resNames_1.push(text);\n                    }\n                });\n                resourceValue = resNames_1.join(', ');\n            }\n            else {\n                var argsData = args;\n                var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    };\n    QuickPopups.prototype.getFormattedString = function (eventData) {\n        var fields = this.parent.eventFields;\n        var eventSubject = (eventData[fields.subject] || this.l10n.getConstant('noTitle'));\n        var startDate = eventData[fields.startTime];\n        var endDate = eventData[fields.endTime];\n        var startDateDetails = this.getDateFormat(startDate, 'long');\n        var endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(addDays(new Date(endDate.getTime()), -1), 'long') :\n            this.getDateFormat(endDate, 'long');\n        var startTimeDetail = this.parent.getTimeString(startDate);\n        var endTimeDetail = this.parent.getTimeString(endDate);\n        var details = '';\n        var spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    };\n    QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n        var _this = this;\n        this.quickPopupHide(true);\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var selectedDate = ((data.date).getTime()).toString();\n        var target = closest(data.element, '.' + MORE_INDICATOR_CLASS + ',.' + WORK_CELLS_CLASS);\n        var day = this.parent.globalize.formatDate(data.date, { format: 'E', calendar: this.parent.getCalendarMode() });\n        this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DAY_CLASS).innerHTML = capitalizeFirstWord(day, 'single');\n        var dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n        if (resetTime(data.date).getTime() === resetTime(this.parent.getCurrentTime()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);\n        }\n        if (!this.parent.isAdaptive) {\n            if (this.parent.currentView.indexOf('Timeline') !== -1) {\n                var gIndex = target.getAttribute('data-group-index');\n                var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n                startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n                var tdDate = startDate.getTime().toString();\n                if (isNullOrUndefined(gIndex)) {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-date=\"' + tdDate + '\"]');\n                }\n                else {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n                    if (isNullOrUndefined(this.morePopup.relateTo)) {\n                        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS +\n                            ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n                        for (var i = 0; i < workCells.length; i++) {\n                            var date = workCells[parseInt(i.toString(), 10)].getAttribute('data-date');\n                            if (date < tdDate) {\n                                this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                this.morePopup.relateTo = closest(target, '.' + WORK_CELLS_CLASS);\n            }\n        }\n        this.parent.renderTemplates(function () {\n            var eventProp = {\n                type: 'EventContainer', cancel: false,\n                element: _this.morePopup.element, data: data\n            };\n            _this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n                if (!popupArgs.cancel) {\n                    _this.morePopup.show();\n                }\n            });\n        });\n    };\n    QuickPopups.prototype.saveClick = function (event) {\n        this.applyFormValidation();\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.quickPopupHide();\n    };\n    QuickPopups.prototype.detailsClick = function (event) {\n        var subjectEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    QuickPopups.prototype.editClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        var data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    };\n    QuickPopups.prototype.deleteClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    };\n    QuickPopups.prototype.updateMoreEventContent = function () {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var dateElement = this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS);\n        var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n        var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        var groupIndex = dateElement.getAttribute('data-group-index');\n        var data;\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    };\n    QuickPopups.prototype.closeClick = function (event) {\n        this.dialogEvent = event;\n        if (this.parent.currentView === 'Year' && this.parent.activeCellsData && this.parent.activeCellsData.element) {\n            this.parent.selectCell(this.parent.activeCellsData.element);\n        }\n        this.quickPopupHide();\n        this.morePopup.hide();\n    };\n    QuickPopups.prototype.dialogButtonClick = function (event) {\n        this.dialogEvent = event;\n        this.quickDialog.hide();\n        var target = event.target;\n        var cancelBtn = this.quickDialog.element.querySelector('.' + QUICK_DIALOG_ALERT_CANCEL);\n        var eventData = this.parent.activeEventData.event;\n        if (target.classList.contains(QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n            switch (this.parent.currentAction) {\n                case 'EditFollowingEvents':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteFollowingEvents':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(QUICK_DIALOG_DELETE_CLASS)) {\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n        }\n        else if (!cancelBtn.classList.contains(DISABLE_CLASS) && (target.classList.contains(QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n        }\n    };\n    QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n        var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            var titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + EDIT_ICON_CLASS)], HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    };\n    QuickPopups.prototype.getTimezone = function (event) {\n        var zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    };\n    QuickPopups.prototype.getRecurrenceSummary = function (event) {\n        var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    };\n    QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n        return capitalizeFirstWord(this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    QuickPopups.prototype.getDataFromTarget = function (target) {\n        if (target.classList.contains(APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Deprecated cells data in quick popups\n        var eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        var cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    };\n    QuickPopups.prototype.beforeQuickDialogClose = function (e) {\n        var _this = this;\n        var args = {\n            event: e.event || this.dialogEvent,\n            type: (isNullOrUndefined(this.parent.activeEventData.event)) ? 'ValidationAlert' :\n                !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])\n                    ? 'RecurrenceAlert' : 'DeleteAlert', cancel: false, data: this.parent.activeEventData.event,\n            element: this.quickDialog.element\n        };\n        this.parent.trigger(popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                _this.parent.eventBase.focusElement(true);\n            }\n        });\n    };\n    QuickPopups.prototype.beforeQuickPopupOpen = function (target, originalEvent) {\n        var _this = this;\n        this.parent.renderTemplates(function () {\n            var isEventPopup = _this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n            var popupType = _this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n            var eventProp = {\n                type: popupType, cancel: false, data: extend({}, _this.getDataFromTarget(target), null, true),\n                target: target, element: _this.quickPopup.element\n            };\n            _this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n                if (popupArgs.cancel) {\n                    _this.quickPopupHide();\n                    _this.destroyPopupButtons('quickPopup');\n                    if (popupArgs.element.classList.contains(POPUP_OPEN)) {\n                        _this.quickPopupClose();\n                    }\n                    removeChildren(_this.quickPopup.element);\n                    _this.isMultipleEventSelect = false;\n                }\n                else {\n                    var display = _this.quickPopup.element.style.display;\n                    _this.quickPopup.element.style.display = 'block';\n                    if (_this.parent.isAdaptive) {\n                        _this.quickPopup.element.removeAttribute('style');\n                        _this.quickPopup.element.style.display = 'block';\n                        _this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n                    }\n                    else {\n                        var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll\n                            && !isNullOrUndefined(closest(target, '.' + CONTENT_TABLE_CLASS));\n                        var conTable = _this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n                        _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? (getTranslateX(conTable) + 10) : 10;\n                        _this.quickPopup.offsetY = _this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll ?\n                            _this.quickPopup.offsetY : 0;\n                        _this.quickPopup.collision = { X: _this.parent.enableRtl ? 'flip' : 'none', Y: 'fit' };\n                        _this.quickPopup.position = { X: _this.parent.enableRtl ? 'left' : 'right', Y: _this.parent.enableRtl ? 'bottom' : 'top' };\n                        _this.quickPopup.dataBind();\n                        _this.quickPopup.refreshPosition(null, true);\n                        var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n                        if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n                            _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n                            if (isVirtualScroll && !_this.parent.enableRtl) {\n                                _this.quickPopup.offsetX = getTranslateX(conTable) + _this.quickPopup.offsetX;\n                            }\n                            _this.quickPopup.dataBind();\n                            _this.quickPopup.refreshPosition(null, true);\n                            var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n                            if (leftCollide.indexOf('left') > -1) {\n                                _this.quickPopup.position = { X: 'center', Y: 'center' };\n                                _this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                                _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n                                _this.quickPopup.dataBind();\n                            }\n                        }\n                        if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                            var translateY = getTranslateY(conTable);\n                            _this.quickPopup.offsetY = translateY;\n                            _this.quickPopup.dataBind();\n                            _this.quickPopup.refreshPosition(null, true);\n                        }\n                        if (_this.quickPopup.position.X === 'center' && _this.quickPopup.position.Y === 'center' && !isNullOrUndefined(originalEvent) &&\n                            originalEvent.clientX && originalEvent.clientY) {\n                            var clientX = originalEvent.clientX;\n                            var clientY = originalEvent.clientY;\n                            var targetRect = target.getBoundingClientRect();\n                            var offsetY = originalEvent.offsetY || Math.ceil(clientY - targetRect.y);\n                            var previousOffset = _this.quickPopup.offsetY;\n                            var collision = isCollide(_this.quickPopup.element, target);\n                            var popupRect = _this.quickPopup.element.getBoundingClientRect();\n                            var targetEle = document.elementFromPoint(clientX, clientY);\n                            if (collision.indexOf('top') > -1 || collision.indexOf('bottom') > -1 || closest(targetEle, '.' + POPUP_WRAPPER_CLASS)) {\n                                if (popupRect.top <= clientY &&\n                                    clientY <= popupRect.top + popupRect.height) {\n                                    _this.quickPopup.offsetY = previousOffset - popupRect.height - 10;\n                                    _this.quickPopup.dataBind();\n                                    collision = isCollide(_this.quickPopup.element, _this.parent.element);\n                                    if (collision.indexOf('top') > -1) {\n                                        _this.quickPopup.offsetY = previousOffset + offsetY + 10;\n                                        _this.quickPopup.dataBind();\n                                    }\n                                }\n                                else if (isCollide(_this.quickPopup.element, _this.parent.element).indexOf('bottom') > -1) {\n                                    _this.quickPopup.offsetY =\n                                        previousOffset - offsetY - Math.ceil(popupRect.height) - 10;\n                                    _this.quickPopup.dataBind();\n                                }\n                            }\n                        }\n                    }\n                    if (isEventPopup) {\n                        _this.applyEventColor();\n                    }\n                    _this.quickPopup.element.style.display = display;\n                    _this.quickPopup.dataBind();\n                    _this.quickPopup.show();\n                }\n            });\n        });\n    };\n    QuickPopups.prototype.applyEventColor = function () {\n        var colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        var color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        var colorEle = this.quickPopup.element.querySelector('.' + POPUP_HEADER_CLASS);\n        var footerEle = this.quickPopup.element.querySelector('.' + POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    };\n    QuickPopups.prototype.quickPopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.style.top = '0px';\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS)) {\n            var subjectElement = this.quickPopup.element.querySelector('.' + SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            var editElement = this.quickPopup.element.querySelector('.' + EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            var editIcon = this.quickPopup.element.querySelector('.' + EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    };\n    QuickPopups.prototype.quickPopupClose = function () {\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = '.' + WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.destroyPopupButtons('quickPopup');\n        removeChildren(this.quickPopup.element);\n    };\n    QuickPopups.prototype.morePopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.morePopup.element.style.top = '0px';\n            this.morePopup.element.style.left = '0px';\n            this.morePopup.element.style.height = formatUnit(window.innerHeight);\n            return;\n        }\n        this.morePopup.element.querySelector('.' + MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    };\n    QuickPopups.prototype.morePopupClose = function () {\n        var moreWrapper = this.parent.element.querySelector('.' + MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    };\n    QuickPopups.prototype.popupClose = function (event) {\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.quickPopupHide(true);\n    };\n    QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n        var _this = this;\n        if (!this.quickPopup.element.classList.contains(POPUP_OPEN)) {\n            return;\n        }\n        var isCellPopup = this.quickPopup.element.querySelector('.' + CELL_POPUP_CLASS);\n        var popupData;\n        if (isCellPopup) {\n            var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n            if (this.isCrudAction && formvalidator &&\n                !formvalidator.ej2_instances[0].validate()) {\n                return;\n            }\n            var fields = this.parent.eventFields;\n            var saveObj = this.parent.eventWindow.getObjectFromFormData(POPUP_WRAPPER_CLASS);\n            this.parent.eventWindow.setDefaultValueToObject(saveObj);\n            saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n            saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n            saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n            saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.setResourceValues(saveObj);\n            }\n            popupData = saveObj;\n        }\n        else {\n            popupData = this.parent.activeEventData.event;\n        }\n        var isEventPopup = this.quickPopup.element.querySelector('.' + EVENT_POPUP_CLASS);\n        var args = {\n            event: this.dialogEvent,\n            type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n            cancel: false, data: popupData, element: this.quickPopup.element,\n            target: (isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        this.parent.trigger(popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n                    if (isCellPopup && _this.isCrudAction) {\n                        _this.parent.currentAction = 'Add';\n                        _this.parent.crudModule.addEvent(popupCloseArgs.data);\n                    }\n                    if (hideAnimation) {\n                        var animation = _this.quickPopup.hideAnimation;\n                        _this.quickPopup.hideAnimation = null;\n                        _this.quickPopup.hide();\n                        _this.quickPopup.hideAnimation = animation;\n                    }\n                    else {\n                        _this.quickPopup.hide();\n                    }\n                    _this.isMultipleEventSelect = false;\n                    _this.isCrudAction = false;\n                }\n            }\n        });\n    };\n    QuickPopups.prototype.navigationClick = function (e) {\n        var navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            var date = this.parent.getDateFromElement(e.currentTarget);\n            if (!isNullOrUndefined(date)) {\n                this.closeClick(e);\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    QuickPopups.prototype.documentClick = function (e) {\n        var target = e.event.target;\n        var classNames = '.' + POPUP_WRAPPER_CLASS + ',.' + HEADER_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS +\n            ',.' + WORK_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.e-popup';\n        var popupWrap = this.parent.element.querySelector('.' + POPUP_WRAPPER_CLASS);\n        if ((popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames)) || !closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        var tar = this.parent.element.querySelector('.' + INLINE_SUBJECT_CLASS);\n        if (tar && tar !== target && this.parent.allowInline) {\n            this.parent.inlineModule.documentClick();\n        }\n        if (closest(target, '.' + APPOINTMENT_CLASS + ',.' + HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + MORE_POPUP_WRAPPER_CLASS) && (target.classList &&\n            !target.classList.contains(MORE_INDICATOR_CLASS))\n            && (!closest(target, '.' + POPUP_OPEN)) && !closest(target, '.' + WORK_CELLS_CLASS)) {\n            this.morePopup.hide();\n        }\n    };\n    QuickPopups.prototype.onClosePopup = function (event) {\n        if (!isNullOrUndefined(event)) {\n            this.dialogEvent = event;\n        }\n        this.quickPopupHide();\n        this.parent.eventBase.focusElement();\n    };\n    QuickPopups.prototype.addEventListener = function () {\n        this.parent.on(cellClick, this.cellClick, this);\n        this.parent.on(eventClick, this.eventClick, this);\n        this.parent.on(documentClick, this.documentClick, this);\n        this.parent.on(dataReady, this.updateMoreEventContent, this);\n    };\n    QuickPopups.prototype.removeEventListener = function () {\n        this.parent.off(cellClick, this.cellClick);\n        this.parent.off(eventClick, this.eventClick);\n        this.parent.off(documentClick, this.documentClick);\n        this.parent.off(dataReady, this.updateMoreEventContent);\n    };\n    QuickPopups.prototype.destroyPopupButtons = function (popupName) {\n        var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n        var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n        for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n            var button = buttonCollections_1[_i];\n            var instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        }\n    };\n    QuickPopups.prototype.refreshQuickDialog = function () {\n        this.destroyQuickDialog();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.refreshQuickPopup = function () {\n        this.destroyQuickPopup();\n        this.renderQuickPopup();\n    };\n    QuickPopups.prototype.refreshMorePopup = function () {\n        this.destroyMorePopup();\n        this.renderMorePopup();\n    };\n    QuickPopups.prototype.destroyQuickDialog = function () {\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog = null;\n        }\n    };\n    QuickPopups.prototype.destroyQuickPopup = function () {\n        if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n            this.quickPopup.destroy();\n            remove(this.quickPopup.element);\n            this.quickPopup = null;\n        }\n    };\n    QuickPopups.prototype.destroyMorePopup = function () {\n        if (this.morePopup.element) {\n            this.destroyPopupButtons('morePopup');\n            this.morePopup.destroy();\n            remove(this.morePopup.element);\n            this.morePopup = null;\n        }\n    };\n    QuickPopups.prototype.destroy = function () {\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.removeEventListener();\n        this.destroyQuickPopup();\n        this.destroyMorePopup();\n        this.destroyQuickDialog();\n        this.dialogEvent = null;\n        this.parent = null;\n        this.l10n = null;\n        this.isCrudAction = null;\n        this.fieldValidator = null;\n        this.isMultipleEventSelect = null;\n    };\n    return QuickPopups;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Tooltip for Schedule\n */\nvar EventTooltip = /** @__PURE__ @class */ (function () {\n    function EventTooltip(parent) {\n        this.parent = parent;\n        this.tooltipObj = new Tooltip({\n            animation: { close: { effect: 'FadeOut' } },\n            content: 'No title',\n            position: 'BottomRight',\n            offsetY: 10,\n            mouseTrail: this.parent.isAdaptive ? false : true,\n            showTipPointer: false,\n            cssClass: this.parent.cssClass + ' ' + EVENT_TOOLTIP_ROOT_CLASS,\n            target: this.getTargets(),\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onBeforeClose.bind(this),\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n    }\n    EventTooltip.prototype.getTargets = function () {\n        var targets = [];\n        if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n            targets.push('.' + RESOURCE_CELLS_CLASS);\n        }\n        if (this.parent.eventSettings.enableTooltip) {\n            targets.push('.' + APPOINTMENT_CLASS);\n        }\n        return targets.join(',');\n    };\n    EventTooltip.prototype.onBeforeRender = function (args) {\n        if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n            return;\n        }\n        if (args.target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n            var resCollection = void 0;\n            if (this.parent.activeView.isTimelineView()) {\n                var index = parseInt(args.target.getAttribute('data-group-index'), 10);\n                resCollection = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n            }\n            else {\n                var rowIndex = args.target.parentNode.sectionRowIndex;\n                var cellIndex = args.target.cellIndex;\n                resCollection =\n                    this.parent.activeView.getColumnLevels()[parseInt(rowIndex.toString(), 10)][parseInt(cellIndex.toString(), 10)];\n            }\n            var data = {\n                resource: resCollection.resource,\n                resourceData: resCollection.resourceData\n            };\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_headerTooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n            this.parent.renderTemplates();\n            return;\n        }\n        var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n        if (isNullOrUndefined(record)) {\n            return;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(record, this.parent, 'tooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n        }\n        else {\n            var globalize = this.parent.globalize;\n            var fields = this.parent.eventFields;\n            var eventStart = new Date('' + record[fields.startTime]);\n            var eventEnd = new Date('' + record[fields.endTime]);\n            eventEnd = (eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0) ? new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n            var startDate = resetTime(new Date('' + eventStart));\n            var endDate = resetTime(new Date('' + eventEnd));\n            var tooltipSubject = (record[fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.parent.localeObj.getConstant('addTitle'));\n            var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n            var startMonthDate = '';\n            var startMonthYearDate = '';\n            var endMonthYearDate = '';\n            startMonthDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'MMMd', calendar: this.parent.getCalendarMode()\n            });\n            startMonthYearDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            endMonthYearDate = globalize.formatDate(eventEnd, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            startMonthDate = capitalizeFirstWord(startMonthDate, 'single');\n            startMonthYearDate = capitalizeFirstWord(startMonthYearDate, 'single');\n            endMonthYearDate = capitalizeFirstWord(endMonthYearDate, 'single');\n            var startTime = this.parent.getTimeString(eventStart);\n            var endTime = this.parent.getTimeString(eventEnd);\n            var tooltipDetails = void 0;\n            if (startDate.getTime() === endDate.getTime()) {\n                tooltipDetails =\n                    globalize.formatDate(eventStart, {\n                        type: 'date', skeleton: 'long', calendar: this.parent.getCalendarMode()\n                    });\n                tooltipDetails = capitalizeFirstWord(tooltipDetails, 'single');\n            }\n            else {\n                tooltipDetails = (startDate.getFullYear() === endDate.getFullYear()) ? (startMonthDate + ' - ' + endMonthYearDate) :\n                    (startMonthYearDate + ' - ' + endMonthYearDate);\n            }\n            var tooltipTime = (record[fields.isAllDay]) ? this.parent.localeObj.getConstant('allDay') :\n                (startTime + ' - ' + endTime);\n            var content = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' +\n                '<div class=\"e-location\">' + tooltipLocation + '</div>' +\n                '<div class=\"e-details\">' + tooltipDetails + '</div>' +\n                '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n            this.setContent(content);\n        }\n        this.parent.renderTemplates();\n    };\n    EventTooltip.prototype.onBeforeClose = function () {\n        this.parent.resetTemplates(['tooltipTemplate', 'headerTooltipTemplate']);\n    };\n    EventTooltip.prototype.setContent = function (content) {\n        this.tooltipObj.setProperties({ content: content }, true);\n    };\n    EventTooltip.prototype.close = function () {\n        this.tooltipObj.close();\n    };\n    EventTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n        this.parent = null;\n    };\n    return EventTooltip;\n}());\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar DAYPOSITION = 'e-day-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLABEL = 'e-end-on-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL$1 = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON$1 = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n    none: '',\n    daily: 'days',\n    weekly: 'weeks',\n    monthly: 'months',\n    yearly: 'years'\n};\nvar valueData = {\n    'sun': RULESUNDAY,\n    'mon': RULEMONDAY,\n    'tue': RULETUESDAY,\n    'wed': RULEWEDNESDAY,\n    'thu': RULETHURSDAY,\n    'fri': RULEFRIDAY,\n    'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\nvar RecurrenceEditor = /** @__PURE__ @class */ (function (_super) {\n    __extends$4(RecurrenceEditor, _super);\n    /**\n     * Constructor for creating the widget\n     *\n     * @param {RecurrenceEditorModel} options Accepts the recurrence editor model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    function RecurrenceEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this.defaultLocale = {\n            none: 'None',\n            daily: 'Daily',\n            weekly: 'Weekly',\n            monthly: 'Monthly',\n            month: 'Month',\n            yearly: 'Yearly',\n            never: 'Never',\n            until: 'Until',\n            count: 'Count',\n            first: 'First',\n            second: 'Second',\n            third: 'Third',\n            fourth: 'Fourth',\n            last: 'Last',\n            repeat: 'Repeat',\n            repeatEvery: 'Repeat every',\n            on: 'Repeat On',\n            end: 'End',\n            onDay: 'Day',\n            days: 'Day(s)',\n            weeks: 'Week(s)',\n            months: 'Month(s)',\n            years: 'Year(s)',\n            every: 'every',\n            summaryTimes: 'time(s)',\n            summaryOn: 'on',\n            summaryUntil: 'until',\n            summaryRepeat: 'Repeats',\n            summaryDay: 'day(s)',\n            summaryWeek: 'week(s)',\n            summaryMonth: 'month(s)',\n            summaryYear: 'year(s)',\n            monthWeek: 'Month Week',\n            monthPosition: 'Month Position',\n            monthExpander: 'Month Expander',\n            yearExpander: 'Year Expander',\n            repeatInterval: 'Repeat Interval'\n        };\n        _this.renderStatus = false;\n        _this.dayButtons = [];\n        _this.monthButtons = [];\n        return _this;\n    }\n    RecurrenceEditor.prototype.startState = function (freq, endOn, startDate) {\n        this.showFormElement();\n        this.updateForm(freq);\n        this.freshOnEndForm();\n        this.updateEndOnForm(endOn);\n        this.selectMonthDay(startDate);\n        this.updateUntilDate(startDate);\n        this.onMonthDay.setProperties({ checked: true });\n    };\n    RecurrenceEditor.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.calendarUtil = getCalendarUtil(this.calendarMode);\n    };\n    RecurrenceEditor.prototype.applyCustomClass = function (cssClass) {\n        if (cssClass) {\n            addClass([this.element], cssClass.split(' '));\n        }\n    };\n    RecurrenceEditor.prototype.initialize = function () {\n        addClass([this.element], 'e-' + this.getModuleName());\n        this.renderComponent();\n        if (!isNullOrUndefined(this.value) && this.value !== '') {\n            this.setRecurrenceRule(this.value);\n        }\n        else {\n            if (!isNullOrUndefined(this.repeatType.value)) {\n                this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);\n                this.updateForm(this.repeatType.value.toString());\n            }\n            if (this.selectedType > 0) {\n                this.setProperties({ value: this.getRecurrenceRule() }, false);\n            }\n        }\n        this.applyCustomClass(this.cssClass);\n    };\n    RecurrenceEditor.prototype.triggerChangeEvent = function () {\n        var _this = this;\n        if (this.renderStatus) {\n            var value = this.getRecurrenceRule();\n            this.trigger('change', { value: value }, function (args) { return _this.setProperties({ value: args.value }, false); });\n        }\n    };\n    RecurrenceEditor.prototype.resetDayButton = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        elements.forEach(function (element) { return removeClass([element], [ACTIVE, PRIMARY]); });\n    };\n    RecurrenceEditor.prototype.daySelection = function (dayIndex) {\n        this.resetDayButton();\n        var days = [0, 1, 2, 3, 4, 5, 6];\n        this.rotateArray(days, this.firstDayOfWeek);\n        var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n        if (element) {\n            addClass([element], [ACTIVE, PRIMARY]);\n        }\n    };\n    RecurrenceEditor.prototype.rtlClass = function (status) {\n        if (status) {\n            addClass([this.element], RTLCLASS);\n        }\n        else {\n            removeClass([this.element], RTLCLASS);\n        }\n    };\n    RecurrenceEditor.prototype.updateUntilDate = function (date) {\n        var tempDate = new Date(date.getTime());\n        tempDate.setDate(tempDate.getDate() + 60);\n        this.untilDateObj.setProperties({ value: tempDate });\n    };\n    RecurrenceEditor.prototype.selectMonthDay = function (date) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        this.monthDate.setProperties({ value: this.calendarUtil.getDate(date) });\n        this.monthWeekDays.setProperties({ value: valueData[weekday[date.getDay()]] });\n        this.monthValue.setProperties({ value: '' + this.calendarUtil.getMonth(date) });\n        this.monthWeekPos.setProperties({ value: this.getDayPosition(date) });\n        this.daySelection(date.getDay());\n    };\n    RecurrenceEditor.prototype.updateForm = function (state) {\n        var _this = this;\n        this.repeatType.setProperties({ value: state });\n        var end = this.element.querySelector('.' + ENDON);\n        if (state === DAILY) {\n            classList(end, [FORMLEFT], [FORMRIGHT]);\n        }\n        else {\n            classList(end, [FORMRIGHT], [FORMLEFT]);\n        }\n        switch (state) {\n            case NONE:\n                neverClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case WEEKLY:\n                weekClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case MONTHLY:\n                monthClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case YEARLY:\n                yearClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case DAILY:\n                dailyClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.updateEndOnForm = function (state) {\n        var _this = this;\n        this.endType.setProperties({ value: state });\n        switch (state) {\n            case NEVER:\n                noEndClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case UNTIL$1:\n                endOnDateClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case COUNT:\n                endOnCountClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.freshOnEndForm = function () {\n        var _this = this;\n        noEndClassList.forEach(function (className) {\n            var element = _this.element.querySelector('.' + className);\n            if (element) {\n                removeClass([element], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.showFormElement = function () {\n        var _this = this;\n        neverClassList.forEach(function (className) {\n            var hideElement = _this.element.querySelector('.' + className);\n            if (hideElement) {\n                removeClass([hideElement], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.renderDropdowns = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.repeatType = new DropDownList({\n            //set the data to dataSource property\n            dataSource: this.getRepeatData(),\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: this.selectedType,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            placeholder: this.localeObj.getConstant(REPEAT),\n            htmlAttributes: { 'title': this.localeObj.getConstant(REPEAT), role: 'option' },\n            change: function (args) {\n                self.setProperties({ selectedType: _this.frequencies.indexOf(args.value) }, false);\n                self.element.querySelector('.' + REPEATCONTENT).innerHTML =\n                    self.localeObj.getConstant(contentType[args.value]);\n                self.showFormElement();\n                self.updateForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        // set placeholder to DropDownList input element\n        this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n        this.endType = new DropDownList({\n            dataSource: this.getEndData(),\n            popupWidth: this.getPopupWidth(),\n            enableRtl: this.enableRtl,\n            index: 1,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            htmlAttributes: { role: 'option' },\n            change: function (args) {\n                self.freshOnEndForm();\n                self.updateEndOnForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n        var renderDropDownList = function (dropDownData) {\n            return new DropDownList({\n                dataSource: dropDownData,\n                popupWidth: _this.getPopupWidth(),\n                enableRtl: _this.enableRtl,\n                fields: {\n                    text: TEXTFIELD,\n                    value: VALUEFIELD\n                },\n                htmlAttributes: { role: 'option' },\n                index: 1,\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                change: function (args) {\n                    self.onWeekDay.setProperties({ checked: true });\n                    self.resetFormValues();\n                    self.triggerChangeEvent();\n                }\n            });\n        };\n        this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n        this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n        this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n        this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n        this.monthValue = new DropDownList({\n            dataSource: this.getMonthData(),\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            htmlAttributes: { role: 'option' },\n            enableRtl: this.enableRtl,\n            index: 7,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n    };\n    RecurrenceEditor.prototype.setDefaultValue = function () {\n        var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(REPEATINTERVAL)) {\n                instance.value = 1;\n                instance.dataBind();\n            }\n            else if (instance.element.classList.contains(ENDONCOUNT)) {\n                instance.value = 10;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.resetFormValues = function () {\n        var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n        for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {\n            var element = recurreneElement_1[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances[0];\n                if (instance.value) {\n                    // eslint-disable-next-line no-self-assign\n                    instance.value = instance.value;\n                    instance.dataBind();\n                }\n                else {\n                    this.updateUntilDate(this.startDate);\n                }\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances[0];\n                instance.index = instance.index || 0;\n                instance.dataBind();\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances[0];\n                var value = void 0;\n                if (instance.element.classList.contains(REPEATINTERVAL)) {\n                    value = 1;\n                }\n                else if (instance.element.classList.contains(ENDONCOUNT)) {\n                    value = 10;\n                }\n                else {\n                    value = this.startDate.getDate();\n                }\n                instance.value = instance.value || value;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.getPopupWidth = function () {\n        return Browser.isDevice ? '100%' : 'auto';\n    };\n    RecurrenceEditor.prototype.renderDatePickers = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.untilDateObj = new DatePicker({\n            firstDayOfWeek: this.firstDayOfWeek,\n            enableRtl: this.enableRtl,\n            locale: this.locale,\n            min: this.minDate,\n            max: this.maxDate,\n            format: (isNullOrUndefined(this.dateFormat) ? this.getFormat('dateFormats') : this.dateFormat),\n            change: function (args) {\n                if (args.value) {\n                    self.triggerChangeEvent();\n                }\n            }\n        });\n        this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n    };\n    RecurrenceEditor.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.getCalendarMode()));\n        }\n        else {\n            format = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.' + formatType + '.short', cldrData);\n        }\n        return format;\n    };\n    RecurrenceEditor.prototype.dayButtonRender = function () {\n        var _this = this;\n        var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {\n            var btn = btns_1[_i];\n            var button = new Button({ isToggle: true, enableRtl: this.enableRtl }, btn);\n            this.dayButtons.push(button);\n            EventHandler.add(btn, 'click', function (args) {\n                var btns = [].slice.call(_this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n                var element = args.target;\n                if (!element.classList.contains(PRIMARY)) {\n                    addClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n                else if (btns.length > 1) {\n                    removeClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n            });\n        }\n    };\n    RecurrenceEditor.prototype.radioButtonRender = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.onMonthDay = new RadioButton({\n            label: this.localeObj.getConstant(RADIOLABEL),\n            enableRtl: this.enableRtl,\n            name: 'monthType',\n            value: 'day',\n            change: function () {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n        this.monthButtons.push(this.onMonthDay);\n        this.onWeekDay = new RadioButton({\n            label: this.localeObj.getConstant('monthExpander'),\n            cssClass: 'e-month-type',\n            name: 'monthType',\n            enableRtl: this.enableRtl,\n            value: 'daypos',\n            change: function () {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n        this.monthButtons.push(this.onWeekDay);\n    };\n    RecurrenceEditor.prototype.numericTextboxRender = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.recurrenceCount = new NumericTextBox({\n            value: 10,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 999,\n            change: function () {\n                self.triggerChangeEvent();\n            }\n        });\n        this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n        this.monthDate = new NumericTextBox({\n            value: 1,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 31,\n            change: function () {\n                self.onMonthDay.setProperties({ checked: true });\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n        this.repeatInterval = new NumericTextBox({\n            value: 1,\n            format: '#',\n            min: 1,\n            max: 999,\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            placeholder: this.localeObj.getConstant(REPEATEVERY),\n            change: function () {\n                self.triggerChangeEvent();\n            }\n        });\n        this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n    };\n    RecurrenceEditor.prototype.renderComponent = function () {\n        this.setTemplate();\n        this.renderDropdowns();\n        this.renderDatePickers();\n        this.dayButtonRender();\n        this.radioButtonRender();\n        this.numericTextboxRender();\n    };\n    RecurrenceEditor.prototype.rotateArray = function (data, count) {\n        var temp;\n        for (var index = 0; index < count; index++) {\n            temp = data.shift();\n            data.push(temp);\n        }\n    };\n    RecurrenceEditor.prototype.getEndData = function () {\n        var endData = [NEVER, UNTIL$1, COUNT];\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var dataSource = [];\n        endData.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: data });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayPosition = function (date) {\n        var temp = new Date(date.getTime());\n        var endDate = new Date(date.getTime());\n        var day = date.getDay();\n        var positionCollection = [];\n        temp = this.calendarUtil.getMonthStartDate(temp);\n        endDate = this.calendarUtil.getMonthEndDate(endDate);\n        while (temp < endDate) {\n            if (temp.getDay() === day) {\n                positionCollection.push(temp.getTime());\n            }\n            temp.setDate(temp.getDate() + 1);\n        }\n        if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n            return -1;\n        }\n        return (positionCollection.indexOf(date.getTime()) + 1);\n    };\n    RecurrenceEditor.prototype.getRepeatData = function () {\n        var data = [];\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.frequencies.forEach(function (element) {\n            var textValue = (element === NONE) ? NEVER : element;\n            data.push({ text: self.localeObj.getConstant(textValue), value: element });\n        });\n        return data;\n    };\n    RecurrenceEditor.prototype.getMonthPosData = function () {\n        var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n        var monthposValue = {\n            first: 1,\n            second: 2,\n            third: 3,\n            fourth: 4,\n            last: -1\n        };\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var dataSource = [];\n        monthpos.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: monthposValue[\"\" + data] });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayData = function (format) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        var dayData = [];\n        var cldrObj;\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format;\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {\n            var obj = weekday_1[_i];\n            var day = getValue(obj, cldrObj);\n            dayData.push({ text: format === 'narrow' ? day : capitalizeFirstWord(day, 'single'), value: valueData[\"\" + obj] });\n        }\n        return dayData;\n    };\n    RecurrenceEditor.prototype.getMonthData = function () {\n        var monthData = [];\n        var cldrObj;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            monthData.push({\n                text: capitalizeFirstWord(getValue(obj, cldrObj), 'single'),\n                value: obj\n            });\n        }\n        return monthData;\n    };\n    RecurrenceEditor.prototype.setTemplate = function () {\n        var dayData = this.getDayData('narrow');\n        var fullDay = this.getDayData('wide');\n        this.element.innerHTML = '<div class=\"' + HEADER + '\">' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT +\n            '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' +\n            '</div><div class=\"' + INPUTWARAPPER + ' ' +\n            INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"><tr>' +\n            '<td><input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + REPEATINTERVAL + '\" class=\"' + REPEATINTERVAL +\n            '\"title=\"' + this.localeObj.getConstant('repeatEvery') + '\" /></td>' +\n            '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' +\n            '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON$1) + '</div>' +\n            '<div class=\"' + YEAREXPANDERWRAPPER + '\">' +\n            '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' +\n            this.localeObj.getConstant('yearExpander') + '\"/>' +\n            '</div>' +\n            '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' +\n            '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\"><tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' +\n            '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + MONTHDAYWRAPPER + '\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' +\n            this.localeObj.getConstant('on') + '\" />' +\n            '</div></td></tr>' +\n            '<tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' +\n            '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + DAYPOSITION + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' +\n            '</div></td></tr></table>' +\n            '</div></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' +\n            '<div class=' + ENDONLABEL + '>' + this.localeObj.getConstant(END) + '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL$1) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' +\n            '<input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + ENDONCOUNT + '\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' +\n            '</div></div>' +\n            '</div></div>';\n    };\n    RecurrenceEditor.prototype.getSelectedDaysData = function () {\n        var ruleData = RULEBYDAY + EQUAL;\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var index = 0; index < elements.length; index++) {\n            ruleData += weekday[parseInt(elements[parseInt(index.toString(), 10)].getAttribute('data-index'), 10)] + (index === (elements.length - 1) ? '' : COMMA);\n        }\n        return ruleData + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getSelectedMonthData = function () {\n        var ruleData;\n        if (this.onWeekDay.checked) {\n            ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON\n                + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n        }\n        else {\n            ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.getIntervalData = function () {\n        return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getEndOnCount = function () {\n        return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getYearMonthRuleData = function () {\n        return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.updateWeekButton = function (keys) {\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {\n            var obj = _a[_i];\n            var index = parseInt(obj.element.getAttribute('data-index'), 10);\n            if (keys.indexOf(weekday[parseInt(index.toString(), 10)]) !== -1) {\n                obj.setProperties({ isPrimary: true });\n            }\n            else {\n                obj.setProperties({ isPrimary: false });\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateMonthUI = function () {\n        if (this.ruleObject.monthDay.length) {\n            this.monthDate.setProperties({ value: this.ruleObject.monthDay[0] });\n            this.onMonthDay.setProperties({ checked: true });\n        }\n        else {\n            this.onWeekDay.setProperties({ checked: true });\n            this.monthWeekPos.setProperties({ value: this.ruleObject.setPosition });\n            for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (valueData[\"\" + key] === this.ruleObject.day[0]) {\n                    this.monthWeekDays.setProperties({ value: this.ruleObject.day[0] });\n                    break;\n                }\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateUI = function (repeat, state) {\n        this.repeatInterval.setProperties({ value: this.ruleObject.interval });\n        switch (state) {\n            case UNTIL$1:\n                this.untilDateObj.setProperties({ value: this.ruleObject.until });\n                break;\n            case COUNT:\n                this.recurrenceCount.setProperties({ value: this.ruleObject.count });\n                break;\n        }\n        switch (repeat) {\n            case WEEKLY:\n                this.updateWeekButton(this.ruleObject.day);\n                break;\n            case YEARLY:\n                this.monthValue.setProperties({ index: (this.ruleObject.month[0] - 1) });\n                this.updateMonthUI();\n                break;\n            case MONTHLY:\n                this.updateMonthUI();\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.getUntilData = function () {\n        if (!this.untilDateObj.value) {\n            return '';\n        }\n        var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n        return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.destroyComponents = function () {\n        if (!this.recurrenceCount.isDestroyed) {\n            this.recurrenceCount.destroy();\n            this.recurrenceCount = null;\n        }\n        if (!this.monthDate.isDestroyed) {\n            this.monthDate.destroy();\n            this.monthDate = null;\n        }\n        if (!this.repeatInterval.isDestroyed) {\n            this.repeatInterval.destroy();\n            this.repeatInterval = null;\n        }\n        if (!this.untilDateObj.isDestroyed) {\n            this.untilDateObj.destroy();\n            this.untilDateObj = null;\n        }\n        if (!this.repeatType.isDestroyed) {\n            this.repeatType.destroy();\n            this.repeatType = null;\n        }\n        if (!this.endType.isDestroyed) {\n            this.endType.destroy();\n            this.endType = null;\n        }\n        if (!this.monthWeekPos.isDestroyed) {\n            this.monthWeekPos.destroy();\n            this.monthWeekPos = null;\n        }\n        if (!this.monthWeekDays.isDestroyed) {\n            this.monthWeekDays.destroy();\n            this.monthWeekDays = null;\n        }\n        if (!this.monthValue.isDestroyed) {\n            this.monthValue.destroy();\n            this.monthValue = null;\n        }\n        if (!this.onMonthDay.isDestroyed) {\n            this.onMonthDay.destroy();\n            this.onMonthDay = null;\n        }\n        if (!this.onWeekDay.isDestroyed) {\n            this.onWeekDay.destroy();\n            this.onWeekDay = null;\n        }\n        this.dayButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.dayButtons = [];\n        this.monthButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.monthButtons = [];\n    };\n    RecurrenceEditor.prototype.resetFields = function () {\n        this.startState(NONE, NEVER, this.startDate);\n        this.setDefaultValue();\n    };\n    RecurrenceEditor.prototype.updateRuleUntilDate = function (startDate) {\n        if (this.untilDateObj.value && startDate) {\n            var untilDate = this.untilDateObj.value;\n            var newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());\n            this.untilDateObj.setProperties({ value: newUntilDate });\n        }\n    };\n    RecurrenceEditor.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    RecurrenceEditor.prototype.getRuleSummary = function (rule) {\n        if (rule === void 0) { rule = this.getRecurrenceRule(); }\n        return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceDates = function (startDate, rule, excludeDate, maximumCount, viewDate) {\n        viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n        return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceRule = function () {\n        var ruleData = RULEFREQ + EQUAL;\n        switch (this.repeatType.value) {\n            case DAILY:\n                ruleData += RULEDAILY + SEMICOLON;\n                break;\n            case WEEKLY:\n                ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n                break;\n            case MONTHLY:\n                ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n                break;\n            case YEARLY:\n                ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n                break;\n            case NONE:\n                return '';\n        }\n        ruleData += this.getIntervalData();\n        switch (this.endType.value) {\n            case UNTIL$1:\n                ruleData += this.getUntilData();\n                break;\n            case COUNT:\n                ruleData += this.getEndOnCount();\n                break;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.setRecurrenceRule = function (rule, startDate) {\n        if (startDate === void 0) { startDate = this.startDate; }\n        if (!rule) {\n            this.repeatType.setProperties({ value: NONE });\n            return;\n        }\n        this.renderStatus = false;\n        this.ruleObject = extractObjectFromRule(rule);\n        var endon = this.ruleObject.count ? COUNT : (this.ruleObject.until ? UNTIL$1 : NEVER);\n        switch (this.ruleObject.freq) {\n            case RULEDAILY:\n                this.startState(DAILY, endon, startDate);\n                this.updateUI(DAILY, endon);\n                break;\n            case RULEWEEKLY:\n                this.startState(WEEKLY, endon, startDate);\n                this.updateUI(WEEKLY, endon);\n                break;\n            case RULEMONTHLY:\n                this.startState(MONTHLY, endon, startDate);\n                this.updateUI(MONTHLY, endon);\n                break;\n            case RULEYEARLY:\n                this.startState(YEARLY, endon, startDate);\n                this.updateUI(YEARLY, endon);\n                break;\n        }\n        this.renderStatus = true;\n        this.triggerChangeEvent();\n    };\n    RecurrenceEditor.prototype.detachInputs = function () {\n        var inputElements = [].slice.call(this.element.querySelectorAll('input'));\n        for (var _i = 0, inputElements_1 = inputElements; _i < inputElements_1.length; _i++) {\n            var element = inputElements_1[_i];\n            detach(element);\n        }\n    };\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    RecurrenceEditor.prototype.destroy = function () {\n        if (!this.isDestroyed) {\n            this.destroyComponents();\n            _super.prototype.destroy.call(this);\n            var removeClasses = ['e-' + this.getModuleName()];\n            if (this.cssClass) {\n                removeClasses = removeClasses.concat(this.cssClass.split(' '));\n            }\n            removeClass([this.element], removeClasses);\n            this.detachInputs();\n            while (this.element.firstElementChild) {\n                this.element.removeChild(this.element.firstElementChild);\n            }\n        }\n    };\n    /**\n     * Get component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    RecurrenceEditor.prototype.getModuleName = function () {\n        return 'recurrenceeditor';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted state\n     */\n    RecurrenceEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    RecurrenceEditor.prototype.render = function () {\n        this.initialize();\n        this.rtlClass(this.enableRtl);\n        this.renderStatus = true;\n        this.renderComplete();\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {RecurrenceEditorModel} newProp Accepts the changed properties new values\n     * @param {RecurrenceEditorModel} oldProp Accepts the changed properties old values\n     * @returns {void}\n     * @private\n     */\n    RecurrenceEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'startDate':\n                    this.selectMonthDay(newProp.startDate);\n                    this.updateUntilDate(newProp.startDate);\n                    this.endType.setProperties({ index: 0 });\n                    break;\n                case 'enableRtl':\n                    this.rtlClass(newProp.enableRtl);\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'selectedType':\n                    this.repeatType.setProperties({ index: this.selectedType });\n                    break;\n                case 'minDate':\n                    this.untilDateObj.setProperties({ minDate: this.minDate });\n                    break;\n                case 'maxDate':\n                    this.untilDateObj.setProperties({ maxDate: this.maxDate });\n                    break;\n                case 'value':\n                    if (this.getRecurrenceRule() !== this.value) {\n                        this.setRecurrenceRule(this.value);\n                    }\n                    break;\n                case 'calendarMode':\n                    this.calendarMode = newProp.calendarMode;\n                    this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n                    break;\n                case 'locale':\n                case 'frequencies':\n                case 'firstDayOfWeek':\n                    this.refresh();\n                    break;\n                case 'dateFormat':\n                    this.untilDateObj.setProperties({ format: newProp.dateFormat });\n                    break;\n            }\n        }\n    };\n    __decorate$1([\n        Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])\n    ], RecurrenceEditor.prototype, \"frequencies\", void 0);\n    __decorate$1([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n    __decorate$1([\n        Property(new Date())\n    ], RecurrenceEditor.prototype, \"startDate\", void 0);\n    __decorate$1([\n        Property()\n    ], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n    __decorate$1([\n        Property('Gregorian')\n    ], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n    __decorate$1([\n        Property()\n    ], RecurrenceEditor.prototype, \"cssClass\", void 0);\n    __decorate$1([\n        Property()\n    ], RecurrenceEditor.prototype, \"value\", void 0);\n    __decorate$1([\n        Property(new Date(1900, 0, 1))\n    ], RecurrenceEditor.prototype, \"minDate\", void 0);\n    __decorate$1([\n        Property(new Date(2099, 11, 31))\n    ], RecurrenceEditor.prototype, \"maxDate\", void 0);\n    __decorate$1([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"selectedType\", void 0);\n    __decorate$1([\n        Event()\n    ], RecurrenceEditor.prototype, \"change\", void 0);\n    RecurrenceEditor = __decorate$1([\n        NotifyPropertyChanges\n    ], RecurrenceEditor);\n    return RecurrenceEditor;\n}(Component));\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar EVENT_FIELD$1 = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @__PURE__ @class */ (function () {\n    function EventWindow(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\n        this.renderEventWindow();\n    }\n    EventWindow.prototype.renderEventWindow = function () {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            animationSettings: { effect: 'Zoom' },\n            content: this.getEventWindowContent(),\n            cssClass: EVENT_WINDOW_DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            height: this.parent.isAdaptive ? '100%' : 'auto',\n            minHeight: '300px',\n            isModal: true,\n            showCloseIcon: this.parent.isAdaptive ? false : true,\n            target: document.body,\n            visible: false,\n            width: '500px',\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        };\n        if (this.parent.isAdaptive) {\n            dialogModel.cssClass = EVENT_WINDOW_DIALOG_CLASS + ' ' + DEVICE_CLASS;\n            dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n        }\n        else {\n            dialogModel.buttons = [{\n                    buttonModel: {\n                        content: this.l10n.getConstant('deleteButton'), cssClass: DELETE_EVENT_CLASS,\n                        disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n                    },\n                    click: this.eventDelete.bind(this)\n                }, {\n                    buttonModel: {\n                        content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                        isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n                    },\n                    click: this.eventSave.bind(this)\n                }, {\n                    buttonModel: { cssClass: EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                    click: this.dialogClose.bind(this)\n                }];\n            dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n        }\n        this.dialogObject = new Dialog(dialogModel, this.element);\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n        addClass([this.element.parentElement], EVENT_WINDOW_DIALOG_CLASS + '-container');\n        if (this.parent.isAdaptive) {\n            EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n            EventHandler.add(this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n        }\n        EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.refresh = function () {\n        this.destroy(true);\n        this.renderEventWindow();\n    };\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\n        if (this.recurrenceEditor) {\n            var recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    };\n    EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        if (this.parent.editorTemplate) {\n            this.recurrenceEditor = recurrenceEditor;\n        }\n    };\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n        this.parent.currentAction = type;\n        this.parent.removeNewEventElement();\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        if (type === 'Add') {\n            var eventObj = {};\n            this.cellClickAction = !isEventData;\n            this.parent.activeCellsData = data;\n            var event_1 = data;\n            if (this.cellClickAction) {\n                this.convertToEventData(event_1, eventObj);\n            }\n            else {\n                this.parent.activeCellsData = {\n                    startTime: (event_1.startTime || event_1[this.fields.startTime]),\n                    endTime: (event_1.endTime || event_1[this.fields.endTime]),\n                    isAllDay: (event_1.isAllDay || event_1[this.fields.isAllDay]),\n                    element: event_1.element,\n                    groupIndex: event_1.groupIndex\n                };\n                eventObj = event_1;\n            }\n            data = eventObj;\n        }\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n        }\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n        }\n        switch (type) {\n            case 'Add':\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n            case 'EditFollowingEvents':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    };\n    EventWindow.prototype.setDialogContent = function () {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.preventEventSave = function (e) {\n        if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n            this.isEnterKey = true;\n        }\n    };\n    EventWindow.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        var endTime = this.eventData[this.fields.endTime].getTime();\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        var saveObj = this.getInstance(EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        if (saveObj) {\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n            saveObj.dataBind();\n        }\n        var deleteObj = this.getInstance(DELETE_EVENT_CLASS);\n        if (deleteObj) {\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n            deleteObj.dataBind();\n        }\n        var callBackPromise = new Deferred();\n        this.parent.trigger(popupOpen, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n            if (_this.eventData[_this.fields.endTime].getTime() === endTime && !_this.cellClickAction &&\n                _this.eventData[_this.fields.endTime].getHours() === 0 &&\n                _this.eventData[_this.fields.endTime].getMinutes() === 0) {\n                _this.eventData = extend({}, _this.eventData, null, true);\n                _this.trimAllDay(_this.eventData);\n            }\n            _this.refreshDateTimePicker(_this.duration);\n            if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n                var startObj = _this.getInstance(EVENT_WINDOW_START_CLASS);\n                var endObj = _this.getInstance(EVENT_WINDOW_END_CLASS);\n                endObj.value = new Date(startObj.value.getTime() + (MS_PER_MINUTE * popupArgs.duration));\n                endObj.dataBind();\n            }\n            if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n                _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.onBeforeClose = function (args) {\n        var _this = this;\n        if (args.isInteracted) {\n            this.isCrudAction = false;\n        }\n        var eventProp = {\n            type: 'Editor',\n            event: args.event || this.dialogEvent,\n            data: this.eventCrudData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        var callBackPromise = new Deferred();\n        this.parent.trigger(popupClose, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            if (!popupArgs.cancel) {\n                if (_this.isCrudAction) {\n                    args.cancel = _this.processCrudActions(popupArgs.data);\n                    _this.isCrudAction = args.cancel;\n                }\n                if (!_this.isCrudAction) {\n                    _this.resetForm();\n                    _this.parent.eventBase.focusElement(true);\n                    _this.eventCrudData = null;\n                }\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.getEventWindowContent = function () {\n        var container = createElement('div', { className: FORM_CONTAINER_CLASS });\n        var form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        this.renderFormElements(form);\n        container.appendChild(form);\n        return container;\n    };\n    EventWindow.prototype.renderFormElements = function (form, args) {\n        var _this = this;\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            if (args) {\n                if (this.fieldValidator) {\n                    this.fieldValidator.destroy();\n                    this.fieldValidator = null;\n                }\n                if (this.recurrenceEditor) {\n                    this.recurrenceEditor.destroy();\n                    this.recurrenceEditor = null;\n                }\n                this.destroyComponents();\n                var formElements = [].slice.call(form.children);\n                for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n                    var element = formElements_1[_i];\n                    remove(element);\n                }\n                this.parent.resetTemplates(['editorTemplate']);\n            }\n            var templateId = this.parent.element.id + '_editorTemplate';\n            var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n            append(tempEle, form);\n            this.parent.renderTemplates(function () {\n                if (_this.element) {\n                    _this.applyFormValidation();\n                }\n            });\n        }\n        else {\n            form.appendChild(this.getDefaultEventWindowContent());\n        }\n    };\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\n        var parentDiv = this.createDivElement(EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        var titleLocationDiv = this.createDivElement(EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        parentDiv.appendChild(titleLocationDiv);\n        titleLocationDiv.appendChild(this.renderTextBox(SUBJECT_CLASS));\n        titleLocationDiv.querySelector('.' + SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n        titleLocationDiv.appendChild(this.renderTextBox(LOCATION_CLASS));\n        titleLocationDiv.querySelector('.' + LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n        var startEndDateTimeDiv = this.createDivElement(EVENT_WINDOW_START_END_DIV_CLASS);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n        startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_END_CLASS));\n        startEndDateTimeDiv.querySelector('.' + EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n        var allDayTimezoneDiv = this.createDivElement(EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(EVENT_WINDOW_ALL_DAY_CLASS));\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(TIME_ZONE_CLASS));\n        var timezoneParentDiv = this.createDivElement(EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        parentDiv.appendChild(timezoneParentDiv);\n        timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_START_TZ_CLASS));\n        timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_END_TZ_CLASS));\n        var repeatParentDiv = this.createDivElement(EVENT_WINDOW_REPEAT_DIV_CLASS);\n        parentDiv.appendChild(repeatParentDiv);\n        var repeatDiv = this.renderCheckBox(EVENT_WINDOW_REPEAT_CLASS);\n        var repeatEditContainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        var button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditContainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        repeatDiv.appendChild(repeatEditContainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        else {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        if (this.parent.resourceCollection.length > 0) {\n            var resourceParentDiv = this.createDivElement(EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        var description = this.createDivElement(DESCRIPTION_CLASS + '-row');\n        description.appendChild(this.renderTextBox(DESCRIPTION_CLASS));\n        description.querySelector('.' + DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n        parentDiv.appendChild(description);\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    };\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n        var recurrenceEditor = createElement('div', { id: this.parent.element.id + '_recurrence_editor' });\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n        this.updateMinMaxDateToEditor();\n    };\n    EventWindow.prototype.createDivElement = function (className) {\n        return createElement('div', { className: className });\n    };\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '', id: fieldName,\n                title: ((this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))) === '') ?\n                    fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n            }\n        });\n    };\n    EventWindow.prototype.getSlotDuration = function () {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    };\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n        var dateTimeDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        var dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            calendarMode: this.parent.calendarMode,\n            min: this.parent.minDate,\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            floatLabelType: 'Always',\n            timeFormat: this.parent.activeViewOptions.timeFormat,\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            width: '100%'\n        });\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    };\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\n        var elementSelector = '.' + EVENT_WINDOW_START_CLASS + ',.' + EVENT_WINDOW_END_CLASS;\n        var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n            var element = startEndElement_1[_i];\n            var instance = element.ej2_instances[0];\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n            instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n            instance.step = duration || this.getSlotDuration();\n            instance.dataBind();\n        }\n    };\n    EventWindow.prototype.onTimeChange = function () {\n        var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n            var duration = 0;\n            if (this.cellClickAction) {\n                duration = MS_PER_MINUTE * this.duration;\n                this.eventWindowTime.startTime = startObj.value;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            var endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\n            if (this.cellClickAction) {\n                this.eventWindowTime.endTime = endDate;\n            }\n            endObj.value = endDate;\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n        }\n    };\n    EventWindow.prototype.renderResourceDetails = function (resourceData) {\n        var fieldName = resourceData.field;\n        var value = 'e-' + fieldName;\n        var labelValue = resourceData.title;\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' +\n            resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n        if (resourceData.allowMultiple) {\n            var listObj = new MultiSelect({\n                enableRtl: this.parent.enableRtl,\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box'\n            });\n            listObj.appendTo(resourceInput);\n        }\n        else {\n            var dropDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate\n            });\n            dropDownList.appendTo(resourceInput);\n        }\n        return resourceDiv;\n    };\n    EventWindow.prototype.renderDropDown = function (value) {\n        var _this = this;\n        var fieldName = this.getFieldName(value);\n        var timezoneDiv = this.createDivElement(value + '-container');\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        var dropDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: this.parent.timezoneDataSource,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n            noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n            filtering: function (e) {\n                var query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(_this.parent.timezoneDataSource, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName, role: 'option' },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px'\n        });\n        dropDownList.appendTo(timezoneInput);\n        return timezoneDiv;\n    };\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n            return;\n        }\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[parseInt(i.toString(), 10)].field === fieldName && i < resourceCollection.length - 1) {\n                var resObject = this.createInstance(i);\n                var datasource = [];\n                var _loop_1 = function (j) {\n                    var resourceModel = resourceCollection[i + 1];\n                    // eslint-disable-next-line max-len\n                    var filter = resourceModel.dataSource.filter(function (data) {\n                        return data[resourceModel.groupIDField] === args.value[parseInt(j.toString(), 10)];\n                    })[0];\n                    var groupId = (!isNullOrUndefined(filter)) ?\n                        filter[resourceCollection[i + 1].groupIDField] : null;\n                    var filterRes = this_1.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                };\n                var this_1 = this;\n                for (var j = 0; j < args.value.length; j++) {\n                    _loop_1(j);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.createInstance = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        resObject.clear();\n        return resObject;\n    };\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[parseInt(i.toString(), 10)].field === fieldName) {\n                var resObj = this.createInstance(i);\n                var groupId = args.itemData[resourceCollection[parseInt(i.toString(), 10)].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                var resValue = (resObj.dataSource.length > 0) ?\n                    resObj.dataSource[0][resourceCollection[i + 1].idField] : null;\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        return resourceData.dataSource.filter(function (data) {\n            return data[resourceData.groupIDField] === groupId;\n        });\n    };\n    EventWindow.prototype.onTimezoneChange = function (args) {\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderCheckBox = function (value) {\n        var checkBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        var checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    };\n    EventWindow.prototype.renderTextBox = function (value) {\n        var textBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var elementType = (value === DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD$1, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    };\n    EventWindow.prototype.getFieldName = function (name) {\n        var fieldName = '';\n        switch (name) {\n            case SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    };\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\n        var labelText = '';\n        switch (fieldName) {\n            case SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    };\n    EventWindow.prototype.onChange = function (args) {\n        var targetSelector = \".\" + EVENT_WINDOW_ALL_DAY_CLASS + \",.\" + TIME_ZONE_CLASS + \",.\" + EVENT_WINDOW_REPEAT_CLASS;\n        var target = closest(args.event.target, targetSelector);\n        if (target.classList.contains(EVENT_WINDOW_ALL_DAY_CLASS)) {\n            this.onAllDayChange(args.checked);\n        }\n        else if (target.classList.contains(TIME_ZONE_CLASS)) {\n            this.timezoneChangeStyle(args.checked);\n        }\n        else if (target.classList.contains(EVENT_WINDOW_REPEAT_CLASS)) {\n            this.onRepeatChange(args.checked);\n        }\n    };\n    EventWindow.prototype.renderRepeatDialog = function () {\n        var element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    };\n    EventWindow.prototype.loadRecurrenceEditor = function () {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    };\n    EventWindow.prototype.onRepeatChange = function (state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    };\n    EventWindow.prototype.repeatSaveDialog = function () {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    };\n    EventWindow.prototype.closeRepeatDialog = function () {\n        this.repeatDialogObject.hide();\n    };\n    EventWindow.prototype.repeatCancelDialog = function () {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    };\n    EventWindow.prototype.repeatOpenDialog = function () {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    };\n    EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n        if (!this.parent.eventSettings.allowAdding) {\n            return;\n        }\n        if (this.parent.isAdaptive && repeatType && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        this.element.querySelector('.' + FORM_CLASS).removeAttribute('data-id');\n        this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        var deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\n                    this.recurrenceEditor.selectedType : 0\n            });\n            this.repeatRule = this.recurrenceEditor.value;\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule] || repeatType) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            var saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (cellsData.RecurrenceRule) {\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n        }\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj);\n        }\n    };\n    EventWindow.prototype.applyFormValidation = function () {\n        var form = this.element.querySelector('.' + FORM_CLASS);\n        if (!form) {\n            return;\n        }\n        var getValidationRule = function (rules) {\n            return (rules && Object.keys(rules).length > 0) ? rules : undefined;\n        };\n        var rules = {};\n        var subjectRule = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        if (!isNullOrUndefined(subjectRule)) {\n            rules[this.parent.eventSettings.fields.subject.name] = subjectRule;\n        }\n        var locationRule = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        if (!isNullOrUndefined(locationRule)) {\n            rules[this.parent.eventSettings.fields.location.name] = locationRule;\n        }\n        var startTimeRule = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        if (!isNullOrUndefined(startTimeRule)) {\n            rules[this.parent.eventSettings.fields.startTime.name] = startTimeRule;\n        }\n        var endTimeRule = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        if (!isNullOrUndefined(endTimeRule)) {\n            rules[this.parent.eventSettings.fields.endTime.name] = endTimeRule;\n        }\n        var descriptionRule = getValidationRule(this.parent.eventSettings.fields.description.validation);\n        if (!isNullOrUndefined(descriptionRule)) {\n            rules[this.parent.eventSettings.fields.description.name] = descriptionRule;\n        }\n        this.fieldValidator = new FieldValidator();\n        this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n    };\n    EventWindow.prototype.showDetails = function (eventData) {\n        this.eventData = eventData;\n        var eventObj = extend({}, eventData, null, true);\n        if ((!this.cellClickAction || this.cellClickAction && !isNullOrUndefined(this.parent.editorTemplate)) &&\n            eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n            this.trimAllDay(eventObj);\n        }\n        var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n        var keyNames = Object.keys(eventObj);\n        for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {\n            var curElement = formElements_2[_i];\n            var columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[\"\" + columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            var timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    };\n    EventWindow.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n        var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);\n        var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        var format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], DISABLE_CLASS);\n            if (this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' +\n                this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n            removeClass(this.element.querySelectorAll('.e-time-icon'), EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n        }\n    };\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n        var startDate;\n        var endDate;\n        if (allDayStatus) {\n            startDate = resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                var temp = addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\n            }\n            else {\n                endDate = resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n            }\n        }\n        else {\n            var start = this.parent.activeCellsData.startTime;\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n            if (this.parent.activeCellsData.isAllDay) {\n                var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n            }\n        }\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n        }\n        return format;\n    };\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n        if (!this.parent.eventSettings.allowEditing) {\n            return;\n        }\n        if (!this.parent.isAdaptive) {\n            removeClass([this.element.querySelector('.' + DELETE_EVENT_CLASS)], DISABLE_CLASS);\n        }\n        this.element.querySelector('.' + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        this.element.querySelector('.' + FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            var timezoneObj = this.getInstance(TIME_ZONE_CLASS + '.' + EVENT_FIELD$1);\n            var timezoneValue = void 0;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            var saveButton = this.element.querySelector('.' + EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            var deleteButton = this.element.querySelector('.' + DELETE_EVENT_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            var saveIcon = this.element.querySelector('.' + EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.disableButton = function (element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    };\n    EventWindow.prototype.renderRecurrenceEditor = function () {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    };\n    EventWindow.prototype.updateMinMaxDateToEditor = function () {\n        var startDate = this.element.querySelector('.e-start');\n        var endDate = this.element.querySelector('.e-end');\n        if (startDate && endDate) {\n            var startObj = startDate.ej2_instances[0];\n            var endObj = endDate.ej2_instances[0];\n            startObj.min = this.parent.minDate;\n            startObj.max = this.parent.maxDate;\n            endObj.min = this.parent.minDate;\n            endObj.max = this.parent.maxDate;\n            startObj.dataBind();\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n            if (untilDate) {\n                var untilObj = untilDate.ej2_instances[0];\n                untilObj.min = this.parent.minDate;\n                untilObj.max = this.parent.maxDate;\n                untilObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        var data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    };\n    EventWindow.prototype.dialogClose = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.resetForm = function () {\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n            this.recurrenceEditor.resetFields();\n        }\n    };\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\n        var timezoneDiv = this.element.querySelector('.' + EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n        if (value) {\n            addClass([timezoneDiv], ENABLE_CLASS);\n            var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);\n            var timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                var found = timezone.some(function (tz) { return tz.Value === localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], ENABLE_CLASS);\n        }\n    };\n    EventWindow.prototype.resetFormFields = function () {\n        var formElement = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n            var currentElement = formElement_1[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(currentElement);\n            }\n        }\n    };\n    EventWindow.prototype.eventSave = function (event, alert) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        var formElement = this.element.querySelector('.' + FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        var dataCollection = this.getEventDataFromEditor();\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\n            return;\n        }\n        this.eventCrudData = dataCollection.eventData;\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.getEventDataFromEditor = function () {\n        var eventObj = extend({}, this.getObjectFromFormData(EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        delete eventObj.Timezone;\n        delete eventObj.Repeat;\n        this.setDefaultValueToObject(eventObj);\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n        var tempObj = extend({}, eventObj, null, true);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\n                : resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\n                : addDays(resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        return { eventData: eventObj, tempData: tempObj };\n    };\n    EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n        var alertType;\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return true;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return true;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            if (this.parent.currentAction !== 'EditOccurrence') {\n                alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            }\n            var isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.processCrudActions = function (eventObj) {\n        var _this = this;\n        this.parent.uiStateValues.isBlock = false;\n        var resourceData = this.getResourceData(eventObj);\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !isNullOrUndefined(resourceData);\n        var eventId = this.getEventIdFromForm();\n        if (!isNullOrUndefined(eventId)) {\n            var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            var editedData = this.parent.eventsData.filter(function (data) {\n                return data[_this.fields.id] === eveId_1;\n            })[0];\n            if (isNullOrUndefined(editedData)) {\n                editedData = this.parent.blockData.filter(function (data) {\n                    return data[_this.fields.id] === eveId_1;\n                })[0];\n            }\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return false;\n            }\n            var currentAction = void 0;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId_1 = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n                        return true;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        return this.parent.uiStateValues.isBlock;\n    };\n    EventWindow.prototype.getResourceData = function (eventObj) {\n        var resourceData = null;\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\n            && this.parent.resourceBase.resourceCollection.length > 0) {\n            var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            resourceData = eventObj[lastResourceData.field];\n        }\n        return resourceData;\n    };\n    EventWindow.prototype.getObjectFromFormData = function (className) {\n        var formElement = this.getFormElements(className);\n        var eventObj = {};\n        for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n            var currentElement = formElement_2[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[\"\" + columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    };\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.l10n.getConstant('addTitle');\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    };\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n        var alertMessage;\n        var recEditor = this.recurrenceEditor;\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            var activeEvent = this.parent.activeEventData.event;\n            var excludedEvents = [];\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\n                && !isNullOrUndefined(activeEvent)) {\n                var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n                var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n                if (seriesEvents.length > 0) {\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n                }\n                else {\n                    var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n                }\n                if (this.parent.currentAction === 'EditSeries'\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                    excludedEvents.push(this.eventData);\n                }\n            }\n            if (excludedEvents.length > 0) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                var temp = [];\n                var tempDiff = [];\n                var tempValue = void 0;\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) > (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\n                            temp[parseInt(index.toString(), 10)] =\n                                (types.length > index) ? obj[types[parseInt(index.toString(), 10)]] :\n                                    temp[index - types.length] + (7 * interval);\n                        }\n                        tempValue = temp.sort(function (a, b) { return a - b; });\n                        for (var index = 1; index < tempValue.length; index++) {\n                            tempDiff.push(tempValue[parseInt(index.toString(), 10)] - tempValue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        if (isNullOrUndefined(interval)) {\n            alertMessage = 'createError';\n        }\n        return alertMessage;\n    };\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n        var recIndex;\n        for (var index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[parseInt(index.toString(), 10)][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    };\n    EventWindow.prototype.trimAllDay = function (data) {\n        if (data[this.fields.isAllDay]) {\n            var temp = addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    };\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n        var _this = this;\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        var recurColl = this.parent.getOccurrencesByID(eventId);\n        var excludedDatas = this.parent.eventsData.filter(function (data) {\n            return data[_this.fields.recurrenceID] === eventId;\n        });\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n            var data = recurColl_1[_i];\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        var index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        var currentStartTime = new Date(+currentData[this.fields.startTime]);\n        var currentEndTime = new Date(+currentData[this.fields.endTime]);\n        var nextStartTime;\n        var nextEndTime;\n        if (index !== recurColl.length - 1) {\n            nextStartTime = new Date(+recurColl[index + 1][this.fields.startTime]);\n            nextEndTime = new Date(+recurColl[index + 1][this.fields.endTime]);\n        }\n        var lastEndTime = new Date(+recurColl[recurColl.length - 1][this.fields.endTime]);\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                if (!(nextStartTime.getTime() >= currentEndTime.getTime()) &&\n                    (resetTime(lastEndTime).getTime() >=\n                        resetTime(currentStartTime).getTime()) ||\n                    resetTime(lastEndTime).getTime() < resetTime(currentStartTime).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n                else if (!(resetTime(currentStartTime).getTime() <\n                    resetTime(nextStartTime).getTime())) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            var previousStartTime = new Date(+recurColl[index - 1][this.fields.startTime]);\n            var previousEndTime = new Date(+recurColl[index - 1][this.fields.endTime]);\n            if (index === recurColl.length - 1) {\n                if (resetTime(new Date(+recurColl[(recurColl.length - 1) - index][this.fields.startTime])).getTime() >\n                    resetTime(currentStartTime).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n                else if (!((previousEndTime.getTime() <= currentStartTime.getTime()) &&\n                    (resetTime(currentStartTime).getTime() > resetTime(previousStartTime).getTime()))) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n            }\n            else if (!(((resetTime(previousStartTime).getTime() < resetTime(currentStartTime).getTime()) ||\n                resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() >\n                    resetTime(currentStartTime).getTime()) &&\n                ((resetTime(nextStartTime).getTime() > resetTime(currentStartTime).getTime()) ||\n                    (lastEndTime.getTime() < currentStartTime.getTime())))) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return true;\n            }\n            else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && nextStartTime.getTime() >\n                currentEndTime.getTime()) || (resetTime(nextEndTime).getTime() <\n                resetTime(currentStartTime).getTime()) ||\n                (resetTime(previousStartTime).getTime() > resetTime(currentEndTime).getTime()) ||\n                !(resetTime(currentStartTime).getTime() < resetTime(nextStartTime).getTime())) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n        var _this = this;\n        var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        var resourceData = eventObj[lastResourceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData.reverse() : [resourceData].reverse();\n        var lastLevel = this.parent.resourceBase.lastResourceLevel;\n        var eventList = [];\n        var _loop_2 = function (i) {\n            var events = extend({}, eventObj, null, true);\n            events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n            var temp = [];\n            var addValues = function () {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\n                        for (var k = 1; k < temp.length; k++) {\n                            temp[parseInt(k.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[parseInt(k.toString(), 10)]);\n                            _this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = eventObj[_this.fields.id];\n                        _this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (var j = 0; j < temp.length; j++) {\n                            temp[parseInt(j.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[parseInt(j.toString(), 10)]);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this_2.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastLevel))) {\n                var lastResource = lastResourceData.dataSource;\n                var resCol = this_2.parent.resourceCollection;\n                var index = void 0;\n                if (resCol.length > 1) {\n                    index =\n                        findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)], events, resCol);\n                }\n                else {\n                    index =\n                        findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)]);\n                }\n                if (index < 0) {\n                    return { value: void 0 };\n                }\n                var groupId_1 = lastResource[parseInt(index.toString(), 10)][lastResourceData.groupIDField];\n                var filter = lastLevel.filter(function (obj) { return obj.resourceData[lastResourceData.idField] ===\n                    resourceData[parseInt(i.toString(), 10)]; }).\n                    filter(function (obj) { return obj.resourceData[lastResourceData.groupIDField] === groupId_1; })[0];\n                var groupOrder = filter.groupOrder;\n                for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[parseInt(index_1.toString(), 10)].field;\n                    events[\"\" + field] = (groupOrder[parseInt(index_1.toString(), 10)] instanceof Array) ? groupOrder[parseInt(index_1.toString(), 10)][0] :\n                        groupOrder[parseInt(index_1.toString(), 10)];\n                }\n                addValues();\n            }\n            else {\n                for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[parseInt(index.toString(), 10)].field;\n                    if (events[\"\" + field] instanceof Array && events[\"\" + field].length > 1) {\n                        for (var k = 0; k < events[\"\" + field].length; k++) {\n                            var event_3 = extend({}, events, null, true);\n                            event_3[\"\" + field] = eventObj[\"\" + field][parseInt(k.toString(), 10)];\n                            event_3[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                            temp.push(event_3);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[\"\" + field] = (eventObj[\"\" + field] instanceof Array) ?\n                                eventObj[\"\" + field][0] : eventObj[\"\" + field];\n                            events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                        }\n                        else {\n                            for (var l = 0; l < temp.length; l++) {\n                                temp[parseInt(l.toString(), 10)][\"\" + field] = (eventObj[\"\" + field] instanceof Array) ?\n                                    eventObj[\"\" + field][0] : eventObj[\"\" + field];\n                            }\n                        }\n                    }\n                }\n                events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                addValues();\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < resourceData.length; i++) {\n            var state_1 = _loop_2(i);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        if (eventList.length > 0) {\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n                var event_4 = eventList_1[_i];\n                event_4[this.fields.recurrenceException] = null;\n                event_4[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    };\n    EventWindow.prototype.getEventIdFromForm = function () {\n        return this.element.querySelector('.' + FORM_CLASS).getAttribute('data-id');\n    };\n    EventWindow.prototype.getFormElements = function (className) {\n        var elements = [];\n        if (className === EVENT_WINDOW_DIALOG_CLASS) {\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD$1));\n        }\n        else {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD$1));\n        }\n        return elements;\n    };\n    EventWindow.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = this.parent.enableHtmlSanitizer ?\n                    SanitizeHtmlHelper.sanitize(element.value) : element.value;\n            }\n        }\n        return value;\n    };\n    EventWindow.prototype.setValueToElement = function (element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(EVENT_WINDOW_START_CLASS)) {\n                this.eventWindowTime.startTime = new Date('' + value);\n            }\n            else {\n                this.eventWindowTime.endTime = new Date('' + value);\n            }\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    };\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = this.parent.getCurrentTime();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            var dateValue = this.parent.getCurrentTime();\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\n            instance.value = dateValue;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    };\n    EventWindow.prototype.getInstance = function (className) {\n        var element = this.element.querySelector('.' + className);\n        return element ? element.ej2_instances[0] : null;\n    };\n    EventWindow.prototype.eventDelete = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n            case 'Save':\n                this.parent.currentAction = 'Delete';\n                break;\n            case 'EditFollowingEvents':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteFollowingEvents';\n                }\n                break;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    };\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    };\n    EventWindow.prototype.destroyComponents = function () {\n        var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {\n            var element = formElements_3[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances;\n            }\n            if (instance && instance[0]) {\n                instance[0].destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    };\n    EventWindow.prototype.detachComponents = function () {\n        var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElements_4 = formElements; _i < formElements_4.length; _i++) {\n            var element = formElements_4[_i];\n            detach(element);\n        }\n    };\n    EventWindow.prototype.destroy = function (isIgnore) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.resetTemplates(['editorTemplate']);\n        }\n        this.destroyComponents();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n            detach(this.recurrenceEditor.element);\n            this.recurrenceEditor = null;\n        }\n        if (this.fieldValidator) {\n            this.fieldValidator.destroy();\n            this.fieldValidator = null;\n        }\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            this.repeatDialogObject = null;\n        }\n        this.detachComponents();\n        if (this.dialogObject) {\n            if (this.dialogObject.element) {\n                var form = this.dialogObject.element.querySelector('form');\n                removeChildren(form);\n                detach(form);\n                EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n            }\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n        if (!isIgnore) {\n            this.l10n = null;\n            this.parent = null;\n            this.fields = null;\n            this.buttonObj = null;\n            this.repeatStatus = null;\n            this.eventWindowTime = null;\n            this.dialogEvent = null;\n        }\n    };\n    return EventWindow;\n}());\n\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @__PURE__ @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n        this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n        return this.renderedLength;\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: VIRTUAL_TRACK_CLASS });\n        if (this.isHorizontalScroll) {\n            var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n            wrap.style.width = (colCount * this.itemSize) + 'px';\n        }\n        else {\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        }\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        if (this.isHorizontalScroll) {\n            this.itemSize = getElementWidthFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;\n        }\n        else {\n            this.itemSize = getElementHeightFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;\n        }\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.setTabIndex();\n        if (this.parent.crudModule) {\n            this.parent.crudModule.refreshProcessedData(true);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.parent.notify(contentReady, {});\n        }\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var conWrap = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.isHorizontalScroll) {\n            this.horizontalScrolling(conWrap);\n        }\n        else {\n            var resWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n            var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n            var conTable = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n            addClass([conWrap], 'e-transition');\n            this.renderedLength = resWrap.querySelector('tbody').children.length;\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var scrollHeight = this.parent.rowAutoHeight ?\n                (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n            var resCollection = [];\n            if ((conWrap.scrollTop) - this.translateY < 0) {\n                resCollection = this.upScroll(conWrap, firstTDIndex);\n            }\n            else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n                resCollection = this.downScroll(conWrap, firstTDIndex);\n            }\n            if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n                this.parent.showSpinner();\n                var selectedEle = this.parent.getSelectedCells();\n                this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n                this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n                this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n                window.clearTimeout(this.timeValue);\n                this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n            }\n        }\n    };\n    VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n        var _this = this;\n        var resCollection = [];\n        var scrollWidth = this.bufferCount * this.itemSize;\n        if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n            resCollection = this.leftScroll(conWrap);\n        }\n        else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n            resCollection = this.rightScroll(conWrap);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            if (this.parent.resourceBase.expandedResources.length !== resCollection.length ||\n                this.parent.resourceBase.expandedResources[0] !== resCollection[0] ||\n                this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !==\n                    resCollection[resCollection.length - 1]) {\n                this.parent.showSpinner();\n                var colLevels = this.parent.activeView.colLevels.slice(0);\n                this.updateHorizontalContent(conWrap, resCollection);\n                setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateX(\" + this.translateY + \"px)\" });\n                this.parent.activeView.colLevels = colLevels;\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.leftScroll = function (conWrap) {\n        var index = 0;\n        index = (~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize)) - this.renderedLength;\n        index = (index > 0) ? index : 0;\n        return this.getCollection(index, index + this.renderedLength);\n    };\n    VirtualScroll.prototype.rightScroll = function (conWrap) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var nextSetIndex = 0;\n        nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n        var lastIndex = nextSetIndex + this.renderedLength;\n        lastIndex = (lastIndex > lastLevel.length - 1) ? lastLevel.length - 1 : lastIndex;\n        return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n    };\n    VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n        this.translateY = startIndex * this.itemSize;\n        var lastLevel = this.getResCollection(startIndex, endIndex);\n        if (this.parent.enableRtl) {\n            this.translateY = -this.translateY;\n        }\n        return lastLevel;\n    };\n    VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var resCollection = [];\n        var index = { startIndex: 0, endIndex: 0 };\n        if (this.parent.activeViewOptions.group.byDate) {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() ===\n                this.parent.resourceBase.expandedResources[0].date.getTime() &&\n                lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n            this.setRenderedDates(resCollection);\n        }\n        else {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex &&\n                lastLevel[parseInt(endIndex.toString(), 10)].groupIndex ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.startIndex = index.startIndex;\n            resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n        }\n        this.translateY = index.startIndex * this.itemSize;\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n            return firstItem.date.getTime() <= data.date.getTime() &&\n                data.date.getTime() <= lastItem.date.getTime();\n        });\n        this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n            return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n        });\n        this.parent.resourceBase.renderedResources = resCollection;\n        this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n        var index = 0;\n        data.filter(function (data) {\n            if (firstItem === data) {\n                colIndex.startIndex = index;\n            }\n            else if (lastItem === data) {\n                colIndex.endIndex = index + data.colSpan;\n            }\n            index += data.colSpan;\n        });\n        if (firstItem === lastItem) {\n            colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n        }\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (var i = 0; i < renderedLength; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n        this.parent.resourceBase.expandedResources = resCollection;\n        var selectedEle = this.parent.getSelectedCells();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n        for (var i = 0; i < renderedLength; i++) {\n            remove(conWrap.querySelector('tbody tr'));\n        }\n        if (this.parent.currentView === 'Month') {\n            if (this.parent.activeViewOptions.group.byDate) {\n                this.parent.activeView.colLevels[0] = resCollection;\n            }\n            else {\n                this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n            }\n            var contentRows = this.parent.activeView.getContentRows();\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n        else {\n            var col = [].slice.call(conWrap.querySelector('colgroup').children);\n            for (var i = 0; i < col.length; i++) {\n                remove(col[parseInt(i.toString(), 10)]);\n            }\n            this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n            var contentRows = this.parent.activeView.getContentRows();\n            var table = conWrap.querySelector('table');\n            var thead = conWrap.querySelector('thead');\n            var colGroupEle_1 = conWrap.querySelector('colgroup');\n            resCollection.forEach(function () {\n                colGroupEle_1.appendChild(createElement('col'));\n            });\n            thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n            }\n            prepend([thead], table);\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n        if (this.parent.currentView !== 'Month') {\n            var dateCol_1 = resCollection.map(function (x) { return x.date; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = dateCol_1; });\n        }\n        else {\n            var dateCol_2 = resCollection.map(function (x) { return x.date.getDay(); });\n            var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) { return dateCol_2.indexOf(x.getDay()) >= 0; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = renderDates_1; });\n        }\n    };\n    VirtualScroll.prototype.setTabIndex = function () {\n        var resColWrap = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach(function (element) {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        var focusResCell = this.parent.element.querySelector(\".\" + RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n        this.focusedEle = null;\n    };\n    return VirtualScroll;\n}());\n\n/**\n * Schedule DOM rendering\n */\nvar Render = /** @__PURE__ @class */ (function () {\n    function Render(parent) {\n        this.parent = parent;\n    }\n    Render.prototype.render = function (viewName, isDataRefresh) {\n        if (isDataRefresh === void 0) { isDataRefresh = true; }\n        this.initializeLayout(viewName);\n        if (this.parent.activeView && isDataRefresh) {\n            this.parent.crudModule.refreshDataManager();\n        }\n    };\n    Render.prototype.initializeLayout = function (viewName) {\n        if (this.parent.activeView) {\n            var templates = [\n                'cellTemplate', 'eventTemplate', 'tooltipTemplate', 'majorSlotTemplate', 'minorSlotTemplate',\n                'headerTooltipTemplate', 'dateHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate',\n                'headerIndentTemplate', 'resourceHeaderTemplate', 'cellHeaderTemplate', 'dateRangeTemplate'\n            ];\n            this.parent.resetTemplates(templates);\n            this.parent.activeView.removeEventListener();\n            this.parent.activeView.destroy();\n        }\n        switch (viewName) {\n            case 'Day':\n                this.parent.activeView = this.parent.dayModule;\n                break;\n            case 'Week':\n                this.parent.activeView = this.parent.weekModule;\n                break;\n            case 'WorkWeek':\n                this.parent.activeView = this.parent.workWeekModule;\n                break;\n            case 'Month':\n                this.parent.activeView = this.parent.monthModule;\n                break;\n            case 'Year':\n                this.parent.activeView = this.parent.yearModule;\n                break;\n            case 'Agenda':\n                this.parent.activeView = this.parent.agendaModule;\n                break;\n            case 'MonthAgenda':\n                this.parent.activeView = this.parent.monthAgendaModule;\n                break;\n            case 'TimelineDay':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-day-view';\n                break;\n            case 'TimelineWorkWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n                break;\n            case 'TimelineWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                this.parent.activeView.viewClass = 'e-timeline-week-view';\n                break;\n            case 'TimelineMonth':\n                this.parent.activeView = this.parent.timelineMonthModule;\n                break;\n            case 'TimelineYear':\n                this.parent.activeView = this.parent.timelineYearModule;\n                break;\n        }\n        if (isNullOrUndefined(this.parent.activeView)) {\n            var firstView = this.parent.viewCollections[0].option;\n            if (firstView) {\n                this.parent.setProperties({ currentView: firstView }, true);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.updateActiveView();\n                    this.parent.headerModule.setCalendarView();\n                }\n                return this.initializeLayout(firstView);\n            }\n            throw Error('Inject required modules');\n        }\n        this.parent.activeView.viewIndex = this.parent.viewIndex;\n        this.updateLabelText(viewName);\n        this.parent.activeView.addEventListener();\n        this.parent.activeView.getRenderDates();\n        this.parent.uiStateValues.isGroupAdaptive = this.parent.activeViewOptions.group.resources.length > 0 &&\n            (this.parent.enableAdaptiveUI && !this.parent.isAdaptive ||\n                this.parent.isAdaptive && this.parent.activeViewOptions.group.enableCompactView);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.destroy();\n            this.parent.virtualScrollModule = null;\n        }\n        if ((['Agenda', 'MonthAgenda', 'Year', 'TimelineYear'].indexOf(this.parent.currentView) === -1 ||\n            (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.orientation === 'Vertical'))\n            && this.parent.activeViewOptions.allowVirtualScrolling\n            && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n            if (this.parent.activeView.isTimelineView()) {\n                this.parent.uiStateValues.top = 0;\n            }\n            else {\n                this.parent.virtualScrollModule.isHorizontalScroll = true;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n        this.updateHeader();\n        this.parent.currentTimezoneDate = this.parent.getCurrentTime();\n        this.parent.activeView.renderLayout(CURRENT_PANEL_CLASS);\n        this.parent.renderTemplates();\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.destroy();\n            this.parent.eventTooltip = null;\n        }\n        if (this.parent.eventSettings.enableTooltip || (this.parent.activeViewOptions.group.resources.length > 0\n            && this.parent.activeViewOptions.group.headerTooltipTemplate)) {\n            this.parent.eventTooltip = new EventTooltip(this.parent);\n        }\n    };\n    Render.prototype.updateHeader = function () {\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);\n            if (this.parent.activeViewOptions.readonly) {\n                addClass([this.parent.element], READ_ONLY);\n            }\n            else if (this.parent.element.classList.contains(READ_ONLY)) {\n                removeClass([this.parent.element], READ_ONLY);\n            }\n            this.parent.headerModule.updateDateRange();\n            this.parent.headerModule.updateHeaderItems('remove');\n        }\n    };\n    Render.prototype.updateLabelText = function (view) {\n        var content = this.parent.activeView.getLabelText(view);\n        this.parent.element.setAttribute('role', 'main');\n        this.parent.element.setAttribute('aria-label', content);\n    };\n    return Render;\n}());\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\nvar WorkHours = /** @__PURE__ @class */ (function (_super) {\n    __extends$5(WorkHours, _super);\n    function WorkHours() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$2([\n        Property(true)\n    ], WorkHours.prototype, \"highlight\", void 0);\n    __decorate$2([\n        Property('09:00')\n    ], WorkHours.prototype, \"start\", void 0);\n    __decorate$2([\n        Property('18:00')\n    ], WorkHours.prototype, \"end\", void 0);\n    return WorkHours;\n}(ChildProperty));\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\nvar TimeScale = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(TimeScale, _super);\n    function TimeScale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$3([\n        Property(true)\n    ], TimeScale.prototype, \"enable\", void 0);\n    __decorate$3([\n        Property(60)\n    ], TimeScale.prototype, \"interval\", void 0);\n    __decorate$3([\n        Property(2)\n    ], TimeScale.prototype, \"slotCount\", void 0);\n    __decorate$3([\n        Property()\n    ], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n    __decorate$3([\n        Property()\n    ], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n    return TimeScale;\n}(ChildProperty));\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\nvar QuickInfoTemplates = /** @__PURE__ @class */ (function (_super) {\n    __extends$7(QuickInfoTemplates, _super);\n    function QuickInfoTemplates() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$4([\n        Property('Both')\n    ], QuickInfoTemplates.prototype, \"templateType\", void 0);\n    __decorate$4([\n        Property()\n    ], QuickInfoTemplates.prototype, \"header\", void 0);\n    __decorate$4([\n        Property()\n    ], QuickInfoTemplates.prototype, \"content\", void 0);\n    __decorate$4([\n        Property()\n    ], QuickInfoTemplates.prototype, \"footer\", void 0);\n    return QuickInfoTemplates;\n}(ChildProperty));\n\nvar __extends$8 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\nvar HeaderRows = /** @__PURE__ @class */ (function (_super) {\n    __extends$8(HeaderRows, _super);\n    function HeaderRows() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$5([\n        Property()\n    ], HeaderRows.prototype, \"option\", void 0);\n    __decorate$5([\n        Property()\n    ], HeaderRows.prototype, \"template\", void 0);\n    return HeaderRows;\n}(ChildProperty));\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\n/**\n * Schedule CRUD operations\n */\nvar Crud = /** @__PURE__ @class */ (function () {\n    function Crud(parent) {\n        this.parent = parent;\n        this.crudObj = { sourceEvent: null, targetEvent: null, isCrudAction: false };\n    }\n    Crud.prototype.getQuery = function () {\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        return this.parent.dataModule.generateQuery(start, end);\n    };\n    Crud.prototype.getTable = function () {\n        if (this.parent.eventSettings.query) {\n            var query = this.parent.eventSettings.query.clone();\n            return query.fromTable;\n        }\n        return null;\n    };\n    Crud.prototype.refreshDataManager = function () {\n        var _this = this;\n        if (!this.parent.activeView) {\n            return;\n        }\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e); }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    Crud.prototype.dataManagerSuccess = function (e) {\n        var _this = this;\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(dataBinding, e, function (args) {\n            var resultData = extend([], args.result, null, true);\n            _this.parent.eventsData = resultData.filter(function (data) { return !data[_this.parent.eventFields.isBlock]; });\n            _this.parent.blockData = resultData.filter(function (data) { return data[_this.parent.eventFields.isBlock]; });\n            _this.refreshProcessedData();\n            if (_this.parent.dragAndDropModule && _this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                _this.parent.dragAndDropModule.navigationWrapper();\n            }\n            _this.parent.trigger(dataBound, null, function () {\n                _this.parent.hideSpinner();\n                if (_this.parent.isPrinting) {\n                    _this.parent.notify(print$1, {});\n                }\n            });\n        });\n    };\n    Crud.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    Crud.prototype.refreshProcessedData = function (isVirtualScrollAction) {\n        if (isVirtualScrollAction === void 0) { isVirtualScrollAction = false; }\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.actionObj.action = '';\n            removeClass([this.parent.element], 'e-event-action');\n        }\n        if (this.parent.activeViewOptions && this.parent.activeViewOptions.eventTemplate) {\n            var templateNames = ['eventTemplate'];\n            if (this.crudObj.isCrudAction &&\n                ['Agenda', 'MonthAgenda', 'Year', 'TimelineYear'].indexOf(this.parent.currentView) === -1) {\n                templateNames = [];\n                for (var i = 0, len = this.crudObj.sourceEvent.length; i < len; i++) {\n                    templateNames.push('eventTemplate_' + this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex);\n                    if (this.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                        this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                        templateNames.push('eventTemplate_' + this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex);\n                    }\n                }\n            }\n            if (templateNames.length > 0) {\n                this.parent.resetTemplates(templateNames);\n            }\n        }\n        if (isVirtualScrollAction) {\n            this.parent.notify(dataReady, { processedData: this.parent.eventsProcessed });\n            return;\n        }\n        var eventsData = this.parent.eventsData || [];\n        var blockData = this.parent.blockData || [];\n        var data = eventsData.concat(blockData);\n        this.parent.notify(dataReady, { processedData: this.parent.eventBase ? this.parent.eventBase.processData(data) : [] });\n    };\n    Crud.prototype.refreshData = function (args) {\n        var _this = this;\n        var actionArgs = {\n            requestType: args.requestType, cancel: false, data: args.data,\n            addedRecords: args.editParams.addedRecords, changedRecords: args.editParams.changedRecords,\n            deletedRecords: args.editParams.deletedRecords\n        };\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element) {\n            this.parent.dragAndDropModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element) {\n            this.parent.resizeModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.isSpecificResourceEvents()) {\n            if (args.requestType === 'eventCreated' || args.requestType === 'eventRemoved') {\n                this.crudObj.isCrudAction = true;\n                this.crudObj.sourceEvent = [];\n                var crudData = args.data instanceof Array ? (args.data.length === 0 &&\n                    args.requestType === 'eventRemoved' ? args.editParams.deletedRecords : args.data) :\n                    ((typeof args.data === 'string' || typeof args.data === 'number') && args.requestType === 'eventRemoved') ?\n                        args.editParams.deletedRecords : [args.data];\n                var _loop_1 = function (data) {\n                    this_1.crudObj.isCrudAction = !(args.requestType === 'eventRemoved' && !isNullOrUndefined(data.parent));\n                    var groupIndex = this_1.parent.eventBase.getGroupIndexFromEvent(data);\n                    if (groupIndex > -1 && this_1.parent.crudModule.crudObj.sourceEvent.filter(function (tdData) { return tdData.groupIndex === groupIndex; }).length === 0\n                        && this_1.crudObj.isCrudAction) {\n                        this_1.crudObj.sourceEvent.push(this_1.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)]);\n                    }\n                };\n                var this_1 = this;\n                for (var _i = 0, crudData_1 = crudData; _i < crudData_1.length; _i++) {\n                    var data = crudData_1[_i];\n                    _loop_1(data);\n                }\n                this.crudObj.targetEvent = this.crudObj.sourceEvent;\n            }\n        }\n        if (this.parent.dataModule.dataManager.dataSource.offline) {\n            this.parent.trigger(actionComplete, actionArgs, function (offlineArgs) {\n                if (!offlineArgs.cancel) {\n                    _this.refreshDataManager();\n                }\n            });\n        }\n        else {\n            args.promise.then(function () {\n                if (!_this.parent || _this.parent && _this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(actionComplete, actionArgs, function (onlineArgs) {\n                    if (!onlineArgs.cancel) {\n                        _this.refreshDataManager();\n                    }\n                });\n            }).catch(function (e) {\n                if (!_this.parent || _this.parent && _this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(actionFailure, { error: e });\n            });\n        }\n    };\n    Crud.prototype.addEvent = function (eventData) {\n        var _this = this;\n        if (this.parent.eventSettings.allowAdding && !this.parent.activeViewOptions.readonly) {\n            if (!this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                return;\n            }\n            var addEvents = (eventData instanceof Array) ? eventData : [eventData];\n            if (addEvents.length === 0) {\n                return;\n            }\n            var args = {\n                requestType: 'eventCreate', cancel: false, data: addEvents,\n                addedRecords: addEvents, changedRecords: [], deletedRecords: []\n            };\n            this.parent.trigger(actionBegin, args, function (addArgs) {\n                if (!addArgs.cancel) {\n                    var fields = _this.parent.eventFields;\n                    var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                    var promise = void 0;\n                    if (addArgs.addedRecords instanceof Array) {\n                        for (var _i = 0, _a = addArgs.addedRecords; _i < _a.length; _i++) {\n                            var event_1 = _a[_i];\n                            event_1 = _this.parent.eventBase.updateEventDateTime(event_1);\n                            var eventData_1 = extend({}, _this.parent.eventBase.processTimezone(event_1, true), null, true);\n                            editParams.addedRecords.push(eventData_1);\n                        }\n                        promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                    }\n                    else {\n                        var event_2 = _this.parent.eventBase.processTimezone(addArgs.addedRecords, true);\n                        editParams.addedRecords.push(event_2);\n                        promise = _this.parent.dataModule.dataManager.insert(event_2, _this.getTable(), _this.getQuery());\n                    }\n                    var crudArgs = {\n                        requestType: 'eventCreated', cancel: false, data: addArgs.addedRecords, promise: promise, editParams: editParams\n                    };\n                    _this.refreshData(crudArgs);\n                }\n            });\n        }\n    };\n    Crud.prototype.saveEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowEditing && !this.parent.activeViewOptions.readonly) {\n            if (this.parent.currentAction !== 'EditFollowingEvents' && !this.isBlockEvent(eventData)\n                && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                this.parent.crudModule.crudObj.isCrudAction = false;\n                return;\n            }\n            var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n            if (updateEvents.length === 0) {\n                return;\n            }\n            this.parent.currentAction = action;\n            if (action) {\n                switch (action) {\n                    case 'Save':\n                        this.processSave(eventData);\n                        break;\n                    case 'EditOccurrence':\n                        this.processOccurrences(eventData, action);\n                        break;\n                    case 'EditFollowingEvents':\n                        this.processFollowSeries(eventData, action);\n                        break;\n                    case 'EditSeries':\n                        this.processEntireSeries(eventData, action);\n                        break;\n                }\n            }\n            else {\n                var args = {\n                    requestType: 'eventChange', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n                };\n                this.parent.trigger(actionBegin, args, function (saveArgs) {\n                    if (!saveArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (saveArgs.changedRecords instanceof Array) {\n                            for (var _i = 0, _a = saveArgs.changedRecords; _i < _a.length; _i++) {\n                                var event_3 = _a[_i];\n                                event_3 = _this.parent.eventBase.updateEventDateTime(event_3);\n                                var eventData_2 = extend({}, _this.parent.eventBase.processTimezone(event_3, true), null, true);\n                                editParams.changedRecords.push(eventData_2);\n                            }\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            var event_4 = _this.parent.eventBase.processTimezone(saveArgs.changedRecords, true);\n                            editParams.changedRecords.push(event_4);\n                            promise = _this.parent.dataModule.dataManager.update(fields.id, event_4, _this.getTable(), _this.getQuery());\n                        }\n                        var crudArgs = {\n                            requestType: 'eventChanged', cancel: false,\n                            data: saveArgs.changedRecords, promise: promise, editParams: editParams\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.deleteEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowDeleting && !this.parent.activeViewOptions.readonly) {\n            this.parent.currentAction = action;\n            var deleteEvents = [];\n            if (typeof eventData === 'string' || typeof eventData === 'number') {\n                deleteEvents = this.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[_this.parent.eventFields.id] === eventData;\n                });\n            }\n            else {\n                deleteEvents = (eventData instanceof Array ? eventData : [eventData]);\n            }\n            if (deleteEvents.length === 0) {\n                return;\n            }\n            if (action) {\n                switch (action) {\n                    case 'Delete':\n                        this.processDelete(deleteEvents);\n                        break;\n                    case 'DeleteOccurrence':\n                        this.processOccurrences(deleteEvents, action);\n                        break;\n                    case 'DeleteFollowingEvents':\n                        this.processFollowSeries(deleteEvents, action);\n                        break;\n                    case 'DeleteSeries':\n                        this.processEntireSeries(deleteEvents, action);\n                        break;\n                }\n            }\n            else {\n                var args = {\n                    requestType: 'eventRemove', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: [], deletedRecords: deleteEvents\n                };\n                this.parent.trigger(actionBegin, args, function (deleteArgs) {\n                    if (!deleteArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (deleteArgs.deletedRecords.length > 1) {\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deleteArgs.deletedRecords);\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            editParams.deletedRecords.push(deleteArgs.deletedRecords[0]);\n                            promise = _this.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], _this.getTable(), _this.getQuery());\n                        }\n                        _this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n                        var crudArgs = {\n                            requestType: 'eventRemoved', cancel: false,\n                            data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.processOccurrences = function (eventData, action) {\n        var _this = this;\n        var occurrenceData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_3 = eventData; _i < eventData_3.length; _i++) {\n                var event_5 = eventData_3[_i];\n                occurrenceData.push({ occurrence: event_5, parent: this.getParentEvent(event_5) });\n            }\n        }\n        else {\n            occurrenceData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditOccurrence' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n        };\n        args.data = occurrenceData;\n        this.parent.trigger(actionBegin, args, function (occurrenceArgs) {\n            if (!occurrenceArgs.cancel) {\n                var fields = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var occurrenceEvents = (occurrenceData instanceof Array ? occurrenceData : [occurrenceData]);\n                var _loop_2 = function (a, count) {\n                    var childEvent = occurrenceArgs.changedRecords[parseInt(a.toString(), 10)];\n                    var parentEvent = occurrenceEvents[parseInt(a.toString(), 10)].parent;\n                    var parentException = parentEvent[fields.recurrenceException];\n                    var editedData = void 0;\n                    var exceptionDate = void 0;\n                    switch (action) {\n                        case 'EditOccurrence':\n                            editedData = _this.parent.eventsProcessed.filter(function (event) { return event.Guid === childEvent.Guid; })[0];\n                            exceptionDate = _this.excludeDateCheck(editedData[fields.startTime], parentException);\n                            if (exceptionDate !== parentEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] = exceptionDate;\n                                childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);\n                                childEvent[fields.recurrenceID] = parentEvent[fields.id];\n                                childEvent[fields.followingID] = null;\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                                editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            else {\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            break;\n                        case 'DeleteOccurrence':\n                            if (!childEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] =\n                                    _this.excludeDateCheck(childEvent[fields.startTime], parentException);\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            }\n                            if (childEvent[fields.id] !== parentEvent[fields.id]) {\n                                editParams.deletedRecords.push(childEvent);\n                                isDeletedRecords = true;\n                            }\n                            break;\n                    }\n                };\n                for (var a = 0, count = occurrenceArgs.changedRecords.length; a < count; a++) {\n                    _loop_2(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(occurrenceArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditOccurrence' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? occurrenceArgs.deletedRecords : occurrenceArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processFollowSeries = function (eventData, action) {\n        var _this = this;\n        var followData = [];\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_4 = eventData; _i < eventData_4.length; _i++) {\n                var event_6 = eventData_4[_i];\n                followData.push({ occurrence: event_6, parent: this.getParentEvent(event_6) });\n            }\n        }\n        else {\n            followData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateFollowEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditFollowingEvents' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateFollowEvents, deletedRecords: []\n        };\n        args.data = followData;\n        this.parent.trigger(actionBegin, args, function (followArgs) {\n            if (!followArgs.cancel) {\n                var fields_1 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var followEvents = followData instanceof Array ? followData : [followData];\n                var _loop_3 = function (a, count) {\n                    var childEvent = followArgs.changedRecords[parseInt(a.toString(), 10)];\n                    var parentEvent = followEvents[parseInt(a.toString(), 10)].parent;\n                    var followData_1 = _this.parent.eventBase.getEventCollections(parentEvent, childEvent);\n                    var isSpanned = void 0;\n                    switch (action) {\n                        case 'EditFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent);\n                            isSpanned = !_this.parent.eventBase.isFollowingEvent(parentEvent, childEvent);\n                            childEvent[fields_1.followingID] = isSpanned ? null : parentEvent[fields_1.id];\n                            childEvent[fields_1.recurrenceID] = null;\n                            editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            if (!_this.parent.uiStateValues.isIgnoreOccurrence) {\n                                childEvent[fields_1.recurrenceException] = null;\n                                if (followData_1.occurrence.length > 0) {\n                                    var rule = followData_1.occurrence.slice(-1)[0][fields_1.recurrenceRule];\n                                    if (rule.indexOf('COUNT') === -1) {\n                                        childEvent[fields_1.recurrenceRule] = rule;\n                                    }\n                                }\n                                if (followData_1.follow.length > 0) {\n                                    childEvent[fields_1.recurrenceRule] = followData_1.follow.slice(-1)[0][fields_1.recurrenceRule];\n                                    editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.follow);\n                                }\n                                if (isSpanned) {\n                                    followData_1.occurrence = followData_1.occurrence.filter(function (eventObj) {\n                                        return eventObj[fields_1.recurrenceID] === childEvent[fields_1.id];\n                                    });\n                                }\n                                editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence);\n                            }\n                            break;\n                        case 'DeleteFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent[fields_1.startTime]);\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence).concat(followData_1.follow);\n                            break;\n                    }\n                };\n                for (var a = 0, count = followArgs.changedRecords.length; a < count; a++) {\n                    _loop_3(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_1.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(followArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditFollowingEvents' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: followArgs.changedRecords, promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processEntireSeries = function (eventData, action) {\n        var _this = this;\n        var seriesData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_5 = eventData; _i < eventData_5.length; _i++) {\n                var event_7 = eventData_5[_i];\n                seriesData.push(this.getParentEvent(event_7, true));\n            }\n        }\n        else {\n            seriesData = this.getParentEvent(eventData, true);\n        }\n        var updateSeriesEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditSeries' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateSeriesEvents, deletedRecords: []\n        };\n        args.data = seriesData;\n        this.parent.trigger(actionBegin, args, function (seriesArgs) {\n            if (!seriesArgs.cancel) {\n                var fields_2 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];\n                var _loop_4 = function (a, count) {\n                    var childEvent = seriesArgs.changedRecords[parseInt(a.toString(), 10)];\n                    var parentEvent = seriesEvents[parseInt(a.toString(), 10)];\n                    var eventCollections = _this.parent.eventBase.getEventCollections(parentEvent);\n                    var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n                    switch (action) {\n                        case 'EditSeries':\n                            childEvent[fields_2.id] = parentEvent[fields_2.id];\n                            childEvent[fields_2.recurrenceID] = null;\n                            childEvent[fields_2.followingID] = null;\n                            if (_this.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields_2.recurrenceException]) {\n                                var originalParent = _this.parent.eventsData.filter(function (eventObj) {\n                                    return eventObj[fields_2.id] === childEvent[fields_2.id];\n                                });\n                                if (originalParent.length > 0) {\n                                    childEvent[fields_2.recurrenceRule] = originalParent[0][fields_2.recurrenceRule];\n                                }\n                            }\n                            else {\n                                childEvent[fields_2.recurrenceException] = null;\n                                editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents);\n                            }\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            _this.parent.uiStateValues.isIgnoreOccurrence = false;\n                            break;\n                        case 'DeleteSeries':\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents.concat(parentEvent));\n                            isDeletedRecords = true;\n                            break;\n                    }\n                };\n                for (var a = 0, count = seriesArgs.changedRecords.length; a < count; a++) {\n                    _loop_4(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_2.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(seriesArgs.changedRecords);\n                var crudArgs = {\n                    requestType: action === 'EditSeries' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processDelete = function (eventData) {\n        var _this = this;\n        var deleteData = [];\n        for (var _i = 0, eventData_6 = eventData; _i < eventData_6.length; _i++) {\n            var eventObj = eventData_6[_i];\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                deleteData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                deleteData.push(eventObj);\n            }\n        }\n        var args = {\n            requestType: 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: [], deletedRecords: eventData\n        };\n        args.data = deleteData;\n        this.parent.trigger(actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var fields_3 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var _loop_5 = function (a, count) {\n                    var isDelete = isNullOrUndefined(deleteArgs.deletedRecords[parseInt(a.toString(), 10)][_this.parent.eventFields.recurrenceRule]);\n                    if (!isDelete) {\n                        var parentEvent_1 = deleteData[parseInt(a.toString(), 10)].parent;\n                        var isEdited = editParams.changedRecords.filter(function (obj) {\n                            return obj[fields_3.id] === parentEvent_1[fields_3.id];\n                        });\n                        var editedDate = deleteArgs.deletedRecords[parseInt(a.toString(), 10)][fields_3.startTime];\n                        if (isEdited.length > 0) {\n                            var editedData = isEdited[0];\n                            editedData[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, editedData[fields_3.recurrenceException]);\n                        }\n                        else {\n                            parentEvent_1[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, parentEvent_1[fields_3.recurrenceException]);\n                        }\n                        if (isEdited.length === 0) {\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent_1, true));\n                        }\n                        isDelete = deleteArgs.deletedRecords[parseInt(a.toString(), 10)][fields_3.id] !== parentEvent_1[fields_3.id];\n                    }\n                    if (isDelete) {\n                        editParams.deletedRecords.push(deleteArgs.deletedRecords[parseInt(a.toString(), 10)]);\n                    }\n                };\n                for (var a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {\n                    _loop_5(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_3.id, _this.getTable(), _this.getQuery());\n                var crudArgs = {\n                    requestType: 'eventRemoved', cancel: false, data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processSave = function (data) {\n        var _this = this;\n        var eventData = (data instanceof Array) ? data : [data];\n        var editData = [];\n        for (var _i = 0, eventData_7 = eventData; _i < eventData_7.length; _i++) {\n            var eventObj = eventData_7[_i];\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                editData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                editData.push(eventObj);\n            }\n        }\n        var args = { requestType: 'eventChange', cancel: false, addedRecords: [], changedRecords: eventData, deletedRecords: [] };\n        args.data = editData;\n        this.parent.trigger(actionBegin, args, function (editArgs) {\n            if (!editArgs.cancel) {\n                var fields = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                for (var _i = 0, _a = editArgs.changedRecords; _i < _a.length; _i++) {\n                    var record = _a[_i];\n                    if (!isNullOrUndefined(record[fields.recurrenceRule]) && isNullOrUndefined(record[fields.recurrenceException])) {\n                        var exceptionString = getRecurrenceStringFromDate(record[fields.startTime]);\n                        var parentEle = _this.getParentEvent(record);\n                        parentEle[fields.recurrenceException] = isNullOrUndefined(parentEle[fields.recurrenceException]) ?\n                            exceptionString : parentEle[fields.recurrenceException].concat(',' + exceptionString);\n                        record[fields.id] = _this.parent.getEventMaxID();\n                        record[fields.recurrenceException] = exceptionString;\n                        editParams.addedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n                        editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEle, true));\n                    }\n                    else {\n                        editParams.changedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n                    }\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                var crudArgs = { requestType: 'eventChanged', cancel: false, data: editArgs.changedRecords, promise: promise, editParams: editParams };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.getParentEvent = function (event, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;\n        if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(parentEvent);\n        }\n        return parentEvent;\n    };\n    Crud.prototype.excludeDateCheck = function (eventStartTime, exceptionDateList) {\n        var exDate = getRecurrenceStringFromDate(eventStartTime);\n        if (!isNullOrUndefined(exceptionDateList)) {\n            if (exceptionDateList.indexOf(exDate) === -1) {\n                exceptionDateList = !(isNullOrUndefined(exceptionDateList)) ? exceptionDateList + ',' + exDate : exDate;\n            }\n        }\n        else {\n            exceptionDateList = exDate;\n        }\n        return exceptionDateList;\n    };\n    Crud.prototype.processRecurrenceRule = function (parentEvent, followEvent) {\n        var fields = this.parent.eventFields;\n        var recurrenceRule = parentEvent[fields.recurrenceRule];\n        var endDate;\n        if (followEvent instanceof Date) {\n            endDate = new Date(+followEvent);\n        }\n        else {\n            endDate = new Date(+followEvent[fields.startTime]);\n            var newRecurrenceRule = followEvent[fields.recurrenceRule];\n            if (newRecurrenceRule) {\n                var startDate = parentEvent[fields.startTime];\n                var ruleException = (this.parent.currentAction === 'DeleteFollowingEvents') ? followEvent[fields.recurrenceException] : null;\n                var dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);\n                var untilDate = new Date(dateCollection.slice(-1)[0]);\n                untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());\n                endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());\n                followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, new Date(+untilDate), false);\n            }\n        }\n        parentEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(recurrenceRule, addDays(new Date(endDate.getTime()), -1), true);\n    };\n    Crud.prototype.getUpdatedRecurrenceRule = function (recurrenceRule, untilDate, isParent) {\n        var splitRule = recurrenceRule.split(';');\n        var updatedRule = '';\n        for (var _i = 0, splitRule_1 = splitRule; _i < splitRule_1.length; _i++) {\n            var rule = splitRule_1[_i];\n            if (rule !== '') {\n                var ruleKey = rule.split('=')[0];\n                var ruleValue = rule.split('=')[1];\n                if (ruleKey === 'COUNT' || ruleKey === 'UNTIL') {\n                    ruleValue = getRecurrenceStringFromDate(untilDate);\n                    rule = rule.replace(rule, 'UNTIL=' + ruleValue);\n                }\n                updatedRule += rule + ';';\n            }\n        }\n        if (isParent && updatedRule.indexOf('UNTIL') === -1) {\n            updatedRule += 'UNTIL=' + getRecurrenceStringFromDate(untilDate);\n        }\n        return updatedRule;\n    };\n    Crud.prototype.isBlockEvent = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var value = false;\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_8 = eventCollection_1[_i];\n            value = event_8[this.parent.eventFields.isBlock] || false;\n        }\n        return value;\n    };\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n    Crud.prototype.destroy = function () {\n        this.crudObj = null;\n        this.parent = null;\n    };\n    return Crud;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Work cell interactions\n */\nvar WorkCellInteraction = /** @__PURE__ @class */ (function () {\n    function WorkCellInteraction(parent) {\n        this.parent = parent;\n        EventHandler.add(this.parent.element, 'mouseover', this.onHover, this);\n    }\n    WorkCellInteraction.prototype.cellMouseDown = function (e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        this.parent.notify(cellMouseDown, { event: e });\n    };\n    WorkCellInteraction.prototype.cellClick = function (e) {\n        var _this = this;\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (isNullOrUndefined(target)) {\n            return;\n        }\n        if (!isNullOrUndefined(closest(e.target, '.' + NEW_EVENT_CLASS))) {\n            this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n            return;\n        }\n        var navigateEle = closest(e.target, '.' + NAVIGATE_CLASS);\n        var navigateView = this.parent.getNavigateView();\n        var sameView = this.parent.currentView === navigateView;\n        if (isNullOrUndefined(navigateEle) || sameView ||\n            isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n            if (this.parent.activeViewOptions.readonly && this.parent.currentView !== 'MonthAgenda') {\n                if (this.parent.quickPopup) {\n                    this.parent.quickPopup.quickPopupHide();\n                }\n                return;\n            }\n            if (this.parent.isAdaptive && (e.target.classList.contains(MORE_INDICATOR_CLASS) ||\n                closest(e.target, '.' + MORE_INDICATOR_CLASS))) {\n                return;\n            }\n            var isWorkCell_1 = target.classList.contains(WORK_CELLS_CLASS) ||\n                target.classList.contains(ALLDAY_CELLS_CLASS);\n            if (isWorkCell_1 && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n                this.parent.keyboardInteractionModule.onMouseSelection(e);\n                return;\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(cellClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (isWorkCell_1) {\n                        _this.parent.selectCell(target);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            element: clickArgs.element,\n                            groupIndex: clickArgs.groupIndex, type: 'Cell'\n                        };\n                        _this.parent.notify(inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(cellClick, clickArgs);\n                    }\n                }\n                else {\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n            });\n        }\n        else {\n            var date = this.parent.getDateFromElement(target);\n            if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    WorkCellInteraction.prototype.cellDblClick = function (e) {\n        var _this = this;\n        var queryStr = '.' + WORK_CELLS_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' + HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e) || isNullOrUndefined(target)) {\n            return;\n        }\n        var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellDoubleClick' });\n        this.parent.trigger(cellDoubleClick, args, function (clickArgs) {\n            var date = new Date(clickArgs.startTime.getTime());\n            if (!_this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n                return;\n            }\n            if (!clickArgs.cancel) {\n                _this.parent.eventWindow.openEditor(_this.parent.activeCellsData, 'Add');\n            }\n        });\n    };\n    WorkCellInteraction.prototype.onHover = function (e) {\n        var targetSelector = '.' + WORK_CELLS_CLASS + ',.' + TIME_SLOT_CLASS + ',.' + ALLDAY_CELLS_CLASS + ',.' +\n            HEADER_CELLS_CLASS + ',.' + RESOURCE_CELLS_CLASS + ',.' + APPOINTMENT_CLASS + ',.' + WEEK_NUMBER_CLASS +\n            ',.' + MONTH_HEADER_CLASS;\n        var hoverTarget = closest(e.target, targetSelector);\n        if (hoverTarget) {\n            var hoverArgs = { element: hoverTarget, event: e };\n            this.parent.trigger(hover, hoverArgs);\n        }\n    };\n    WorkCellInteraction.prototype.isPreventAction = function (e) {\n        if (closest(e.target, '.' + NAVIGATE_CLASS)) {\n            return false;\n        }\n        if (closest(e.target, '.' + APPOINTMENT_WRAPPER_CLASS) &&\n            !closest(e.target, '.' + MORE_INDICATOR_CLASS)) {\n            return true;\n        }\n        var target = closest(e.target, '.' + APPOINTMENT_CLASS + ',.' + RESOURCE_GROUP_CELLS_CLASS);\n        if (!isNullOrUndefined(target)) {\n            return true;\n        }\n        target = closest(e.target, '.' + HEADER_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    WorkCellInteraction.prototype.destroy = function () {\n        EventHandler.remove(this.parent.element, 'mouseover', this.onHover);\n    };\n    return WorkCellInteraction;\n}());\n\nvar __extends$11 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$8 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\nvar FieldOptions = /** @__PURE__ @class */ (function (_super) {\n    __extends$11(FieldOptions, _super);\n    function FieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$8([\n        Property()\n    ], FieldOptions.prototype, \"name\", void 0);\n    __decorate$8([\n        Property()\n    ], FieldOptions.prototype, \"default\", void 0);\n    __decorate$8([\n        Property()\n    ], FieldOptions.prototype, \"title\", void 0);\n    __decorate$8([\n        Property({})\n    ], FieldOptions.prototype, \"validation\", void 0);\n    return FieldOptions;\n}(ChildProperty));\n\nvar __extends$10 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\nvar Field = /** @__PURE__ @class */ (function (_super) {\n    __extends$10(Field, _super);\n    function Field() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$7([\n        Property('Id')\n    ], Field.prototype, \"id\", void 0);\n    __decorate$7([\n        Property('IsBlock')\n    ], Field.prototype, \"isBlock\", void 0);\n    __decorate$7([\n        Complex({ name: 'Subject' }, FieldOptions)\n    ], Field.prototype, \"subject\", void 0);\n    __decorate$7([\n        Complex({ name: 'StartTime' }, FieldOptions)\n    ], Field.prototype, \"startTime\", void 0);\n    __decorate$7([\n        Complex({ name: 'EndTime' }, FieldOptions)\n    ], Field.prototype, \"endTime\", void 0);\n    __decorate$7([\n        Complex({ name: 'StartTimezone' }, FieldOptions)\n    ], Field.prototype, \"startTimezone\", void 0);\n    __decorate$7([\n        Complex({ name: 'EndTimezone' }, FieldOptions)\n    ], Field.prototype, \"endTimezone\", void 0);\n    __decorate$7([\n        Complex({ name: 'Location' }, FieldOptions)\n    ], Field.prototype, \"location\", void 0);\n    __decorate$7([\n        Complex({ name: 'Description' }, FieldOptions)\n    ], Field.prototype, \"description\", void 0);\n    __decorate$7([\n        Complex({ name: 'IsAllDay' }, FieldOptions)\n    ], Field.prototype, \"isAllDay\", void 0);\n    __decorate$7([\n        Complex({ name: 'RecurrenceID' }, FieldOptions)\n    ], Field.prototype, \"recurrenceID\", void 0);\n    __decorate$7([\n        Complex({ name: 'RecurrenceRule' }, FieldOptions)\n    ], Field.prototype, \"recurrenceRule\", void 0);\n    __decorate$7([\n        Complex({ name: 'RecurrenceException' }, FieldOptions)\n    ], Field.prototype, \"recurrenceException\", void 0);\n    __decorate$7([\n        Property('IsReadonly')\n    ], Field.prototype, \"isReadonly\", void 0);\n    __decorate$7([\n        Property('FollowingID')\n    ], Field.prototype, \"followingID\", void 0);\n    return Field;\n}(ChildProperty));\n\nvar __extends$9 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\nvar EventSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$9(EventSettings, _super);\n    function EventSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$6([\n        Property()\n    ], EventSettings.prototype, \"template\", void 0);\n    __decorate$6([\n        Property([])\n    ], EventSettings.prototype, \"dataSource\", void 0);\n    __decorate$6([\n        Property()\n    ], EventSettings.prototype, \"query\", void 0);\n    __decorate$6([\n        Complex({}, Field)\n    ], EventSettings.prototype, \"fields\", void 0);\n    __decorate$6([\n        Property(false)\n    ], EventSettings.prototype, \"enableTooltip\", void 0);\n    __decorate$6([\n        Property('AllDayRow')\n    ], EventSettings.prototype, \"spannedEventPlacement\", void 0);\n    __decorate$6([\n        Property(1)\n    ], EventSettings.prototype, \"minimumEventDuration\", void 0);\n    __decorate$6([\n        Property()\n    ], EventSettings.prototype, \"tooltipTemplate\", void 0);\n    __decorate$6([\n        Property()\n    ], EventSettings.prototype, \"resourceColorField\", void 0);\n    __decorate$6([\n        Property(false)\n    ], EventSettings.prototype, \"editFollowingEvents\", void 0);\n    __decorate$6([\n        Property(true)\n    ], EventSettings.prototype, \"allowAdding\", void 0);\n    __decorate$6([\n        Property(true)\n    ], EventSettings.prototype, \"allowEditing\", void 0);\n    __decorate$6([\n        Property(true)\n    ], EventSettings.prototype, \"allowDeleting\", void 0);\n    __decorate$6([\n        Property(false)\n    ], EventSettings.prototype, \"enableMaxHeight\", void 0);\n    __decorate$6([\n        Property(false)\n    ], EventSettings.prototype, \"enableIndicator\", void 0);\n    __decorate$6([\n        Property(false)\n    ], EventSettings.prototype, \"ignoreWhitespace\", void 0);\n    __decorate$6([\n        Property()\n    ], EventSettings.prototype, \"sortComparer\", void 0);\n    __decorate$6([\n        Property()\n    ], EventSettings.prototype, \"includeFiltersInQuery\", void 0);\n    return EventSettings;\n}(ChildProperty));\n\nvar __extends$12 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$9 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\nvar Group = /** @__PURE__ @class */ (function (_super) {\n    __extends$12(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$9([\n        Property(false)\n    ], Group.prototype, \"byDate\", void 0);\n    __decorate$9([\n        Property(true)\n    ], Group.prototype, \"byGroupID\", void 0);\n    __decorate$9([\n        Property(false)\n    ], Group.prototype, \"allowGroupEdit\", void 0);\n    __decorate$9([\n        Property([])\n    ], Group.prototype, \"resources\", void 0);\n    __decorate$9([\n        Property(true)\n    ], Group.prototype, \"enableCompactView\", void 0);\n    __decorate$9([\n        Property()\n    ], Group.prototype, \"headerTooltipTemplate\", void 0);\n    __decorate$9([\n        Property(false)\n    ], Group.prototype, \"hideNonWorkingDays\", void 0);\n    return Group;\n}(ChildProperty));\n\nvar __extends$13 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$10 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\nvar Resources = /** @__PURE__ @class */ (function (_super) {\n    __extends$13(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$10([\n        Property()\n    ], Resources.prototype, \"field\", void 0);\n    __decorate$10([\n        Property()\n    ], Resources.prototype, \"title\", void 0);\n    __decorate$10([\n        Property()\n    ], Resources.prototype, \"name\", void 0);\n    __decorate$10([\n        Property(false)\n    ], Resources.prototype, \"allowMultiple\", void 0);\n    __decorate$10([\n        Property([])\n    ], Resources.prototype, \"dataSource\", void 0);\n    __decorate$10([\n        Property()\n    ], Resources.prototype, \"query\", void 0);\n    __decorate$10([\n        Property('Id')\n    ], Resources.prototype, \"idField\", void 0);\n    __decorate$10([\n        Property('Text')\n    ], Resources.prototype, \"textField\", void 0);\n    __decorate$10([\n        Property('Expanded')\n    ], Resources.prototype, \"expandedField\", void 0);\n    __decorate$10([\n        Property('GroupID')\n    ], Resources.prototype, \"groupIDField\", void 0);\n    __decorate$10([\n        Property('Color')\n    ], Resources.prototype, \"colorField\", void 0);\n    __decorate$10([\n        Property('StartHour')\n    ], Resources.prototype, \"startHourField\", void 0);\n    __decorate$10([\n        Property('EndHour')\n    ], Resources.prototype, \"endHourField\", void 0);\n    __decorate$10([\n        Property('WorkDays')\n    ], Resources.prototype, \"workDaysField\", void 0);\n    __decorate$10([\n        Property('CssClass')\n    ], Resources.prototype, \"cssClassField\", void 0);\n    return Resources;\n}(ChildProperty));\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nvar ResourceBase = /** @__PURE__ @class */ (function () {\n    function ResourceBase(parent) {\n        this.resourceCollection = [];\n        this.leftPixel = 25;\n        this.resourceDateTree = [];\n        this.parent = parent;\n    }\n    ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n        var resColTd = createElement('td', { className: RESOURCE_LEFT_TD_CLASS });\n        var resColDiv = createElement('div', { className: RESOURCE_TEXT_CLASS });\n        if (this.parent.activeViewOptions.headerIndentTemplate) {\n            var data = { className: [resColTd.className], type: 'emptyCells' };\n            this.parent.renderHeaderIndentTemplate(data, resColTd);\n        }\n        else {\n            resColTd.appendChild(resColDiv);\n        }\n        var args = { elementType: 'emptyCells', element: resColTd };\n        this.parent.trigger(renderCell, args);\n        tr.appendChild(resColTd);\n    };\n    ResourceBase.prototype.hideResourceRows = function (tBody) {\n        if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n            return;\n        }\n        var trCount = this.lastResourceLevel.length;\n        for (var i = 0; i < trCount; i++) {\n            var resData = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n            var res = this.lastResourceLevel[parseInt(i.toString(), 10)].resource;\n            if (resData.ClassName === RESOURCE_PARENT_CLASS && !resData[res.expandedField] &&\n                !isNullOrUndefined(resData[res.expandedField])) {\n                var trCollection = [].slice.call(tBody.children);\n                var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n                addClass(slicedCollection, HIDDEN_CLASS);\n            }\n        }\n    };\n    ResourceBase.prototype.createResourceColumn = function () {\n        var resColl = this.resourceCollection;\n        var resDiv = createElement('div', { className: RESOURCE_COLUMN_WRAP_CLASS });\n        var tbl = this.parent.activeView.createTableLayout(RESOURCE_COLUMN_TABLE_CLASS);\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([tbl], AUTO_HEIGHT);\n        }\n        var tBody = tbl.querySelector('tbody');\n        var resData = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n        if (this.parent.virtualScrollModule) {\n            var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n            this.setExpandedResources();\n            resData = this.expandedResources.slice(0, resourceCount);\n            this.renderedResources = resData;\n        }\n        append(this.getContentRows(resData), tBody);\n        this.hideResourceRows(tBody);\n        tbl.appendChild(tBody);\n        resDiv.appendChild(tbl);\n        return resDiv;\n    };\n    ResourceBase.prototype.setRenderedResources = function () {\n        var resColl = this.resourceCollection;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var temp = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n    };\n    ResourceBase.prototype.setExpandedResources = function () {\n        var resources = [];\n        for (var i = 0; i < this.lastResourceLevel.length; i++) {\n            var resource = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n            var count = resource.Count;\n            resources.push(this.lastResourceLevel[parseInt(i.toString(), 10)]);\n            var isExpanded = resource[this.lastResourceLevel[parseInt(i.toString(), 10)].resource.expandedField];\n            if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n                i = i + count;\n            }\n        }\n        this.expandedResources = resources;\n    };\n    ResourceBase.prototype.getContentRows = function (resData, isVirtualScroll) {\n        var resRows = [];\n        var left;\n        var rIndex;\n        var resColl = this.resourceCollection;\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { tabindex: isVirtualScroll ? '-1' : '0' } });\n        for (var i = 0; i < resData.length; i++) {\n            var ntd = td.cloneNode();\n            rIndex = findIndexInData(resColl, 'name', resData[parseInt(i.toString(), 10)].resource.name);\n            if (rIndex === resColl.length - 1) {\n                extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: RESOURCE_CHILD_CLASS });\n                this.renderedResources[parseInt(i.toString(), 10)].className = [RESOURCE_CHILD_CLASS];\n            }\n            else {\n                extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: RESOURCE_PARENT_CLASS });\n                this.renderedResources[parseInt(i.toString(), 10)].className = [RESOURCE_PARENT_CLASS];\n            }\n            left = (rIndex * this.leftPixel) + 'px';\n            if (resData[parseInt(i.toString(), 10)].resourceData.ClassName === RESOURCE_PARENT_CLASS\n                && !isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData.Count) && (resData[parseInt(i.toString(), 10)].resourceData.Count > 0)) {\n                var iconClass = void 0;\n                if (resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField] ||\n                    isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField])) {\n                    iconClass = RESOURCE_COLLAPSE_CLASS;\n                }\n                else {\n                    iconClass = RESOURCE_EXPAND_CLASS;\n                }\n                var iconDiv = createElement('div');\n                addClass([iconDiv], [RESOURCE_TREE_ICON_CLASS, iconClass]);\n                this.setMargin(iconDiv, left);\n                ntd.appendChild(iconDiv);\n                if (this.resourceCollection.length > 1) {\n                    EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n                }\n            }\n            this.parent.activeView.setResourceHeaderContent(ntd, resData[parseInt(i.toString(), 10)], RESOURCE_TEXT_CLASS);\n            ntd.setAttribute('data-group-index', resData[parseInt(i.toString(), 10)].groupIndex.toString());\n            ntd.setAttribute('aria-label', resData[parseInt(i.toString(), 10)].resourceData[resData[parseInt(i.toString(), 10)].resource.textField] + ' resource');\n            if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n                this.setMargin(ntd.querySelector('.' + RESOURCE_TEXT_CLASS), left);\n            }\n            var classCollection = [RESOURCE_CELLS_CLASS, resData[parseInt(i.toString(), 10)].resourceData.ClassName];\n            addClass([ntd], classCollection);\n            var args = { elementType: 'resourceHeader', element: ntd, groupIndex: resData[parseInt(i.toString(), 10)].groupIndex };\n            this.parent.trigger(renderCell, args);\n            var ntr = tr.cloneNode();\n            ntr.appendChild(ntd);\n            resRows.push(ntr);\n        }\n        return resRows;\n    };\n    ResourceBase.prototype.setMargin = function (element, value) {\n        if (!this.parent.enableRtl) {\n            element.style.marginLeft = value;\n        }\n        else {\n            element.style.marginRight = value;\n        }\n    };\n    ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n        var collection;\n        for (var y = 0; y < parentCollection.length; y++) {\n            var data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n            for (var x = 0; x < data.length; x++) {\n                var totalCount = 0;\n                if (this.parent.activeViewOptions.group.byGroupID) {\n                    var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[parseInt(x.toString(), 10)][parentCollection[parentCollection.length - (y + 1)].idField]);\n                    collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n                }\n                else {\n                    collection = wholeCollection[wholeCollection.length - 1].dataSource;\n                }\n                for (var z = 0; z < collection.length; z++) {\n                    totalCount = totalCount + parseInt(collection[parseInt(z.toString(), 10)].Count, 10);\n                }\n                totalCount = totalCount + parseInt(data[parseInt(x.toString(), 10)].Count, 10);\n                extend(data[parseInt(x.toString(), 10)], { Count: totalCount });\n            }\n            wholeCollection = wholeCollection.slice(0, -1);\n        }\n    };\n    ResourceBase.prototype.onTreeIconClick = function (e) {\n        var _this = this;\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        var target = e.target;\n        var hide;\n        var trElement = closest(target, '.' + RESOURCE_PARENT_CLASS)\n            .parentElement;\n        var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n        var args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: !target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n        };\n        this.parent.trigger(actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                if (target.classList.contains(RESOURCE_COLLAPSE_CLASS)) {\n                    classList(target, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n                    hide = true;\n                }\n                else {\n                    classList(target, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n                    hide = false;\n                }\n                var eventElements = [].slice.call(_this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS + ',.' + MORE_INDICATOR_CLASS));\n                for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {\n                    var element = eventElements_1[_i];\n                    remove(element);\n                }\n                if (_this.parent.virtualScrollModule) {\n                    _this.updateVirtualContent(index, hide, e, target);\n                }\n                else {\n                    _this.updateContent(index, hide);\n                }\n                var data = { cssProperties: _this.parent.getCssProperties(), module: 'scroll' };\n                _this.parent.notify(scrollUiUpdate, data);\n                args = {\n                    cancel: false, event: e, groupIndex: index,\n                    requestType: target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n                };\n                _this.parent.refreshEvents(false);\n                _this.parent.trigger(actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.updateContent = function (index, hide) {\n        var rowCollection = [];\n        var workCellCollection = [];\n        var headerRowCollection = [];\n        var pNode;\n        var clickedRes = this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData;\n        var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n        var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n        var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' .' + APPOINTMENT_CONTAINER_CLASS));\n        for (var j = 0; j < clickedRes.Count; j++) {\n            rowCollection.push(resRows[index + j + 1]);\n            workCellCollection.push(contentRows[index + j + 1]);\n            headerRowCollection.push(eventRows[index + j + 1]);\n        }\n        var clonedCollection = this.lastResourceLevel;\n        for (var i = 0; i < rowCollection.length; i++) {\n            var expanded = true;\n            pNode = rowCollection[parseInt(i.toString(), 10)].children[0].classList.contains(RESOURCE_PARENT_CLASS);\n            clonedCollection[parseInt(index.toString(), 10)].resourceData[clonedCollection[parseInt(index.toString(), 10)].resource.expandedField] = !hide;\n            if (hide) {\n                if (pNode) {\n                    var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n                    if (trElem) {\n                        classList(trElem, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);\n                    }\n                }\n                if (!rowCollection[parseInt(i.toString(), 10)].classList.contains(HIDDEN_CLASS)) {\n                    addClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], HIDDEN_CLASS);\n                }\n            }\n            else {\n                if (pNode) {\n                    var rowIndex = rowCollection[parseInt(i.toString(), 10)].rowIndex;\n                    if (!clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField]\n                        && !isNullOrUndefined(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField])) {\n                        rowCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        workCellCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        headerRowCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        expanded = false;\n                    }\n                    if (expanded) {\n                        var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + RESOURCE_TREE_ICON_CLASS);\n                        if (trElem) {\n                            classList(trElem, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);\n                        }\n                    }\n                }\n                if (rowCollection[parseInt(i.toString(), 10)].classList.contains(HIDDEN_CLASS)) {\n                    removeClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], HIDDEN_CLASS);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.updateVirtualContent = function (index, expand, e, target) {\n        this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData[this.lastResourceLevel[parseInt(index.toString(), 10)].resource.expandedField] = !expand;\n        this.setExpandedResources();\n        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n        this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n        if (this.renderedResources.length < resourceCount) {\n            var sIndex = this.expandedResources.length - resourceCount;\n            sIndex = (sIndex > 0) ? sIndex : 0;\n            this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n        }\n        var virtualTrack = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n        this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n        var resTable = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n        var contentTable = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' ' + 'table');\n        var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n        var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n        if (!isNullOrUndefined(timeIndicator)) {\n            timeIndicator.style.height =\n                this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight + 'px';\n        }\n    };\n    ResourceBase.prototype.renderResourceHeader = function () {\n        var resourceWrapper = createElement('div', { className: RESOURCE_TOOLBAR_CONTAINER });\n        resourceWrapper.innerHTML = '<div class=\"' + RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + RESOURCE_MENU + '\">' +\n            '<div class=\"e-icons ' + RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + RESOURCE_LEVEL_TITLE + '\"></div></div>';\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + CONTENT_WRAP_CLASS);\n            target.insertBefore(resourceWrapper, target.querySelector('.' + WRAPPER_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n        }\n        this.renderResourceHeaderText();\n        EventHandler.add(resourceWrapper.querySelector('.' + RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    };\n    ResourceBase.prototype.renderResourceTree = function () {\n        this.popupOverlay = createElement('div', { className: RESOURCE_TREE_POPUP_OVERLAY });\n        var treeWrapper = createElement('div', { className: RESOURCE_TREE_POPUP + ' e-popup-close' });\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + WRAPPER_CONTAINER_CLASS);\n            target.insertBefore(treeWrapper, target.children[0]);\n            target.appendChild(this.popupOverlay);\n        }\n        else {\n            this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n            this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n        }\n        var resourceTree = createElement('div', { className: RESOURCE_TREE });\n        treeWrapper.appendChild(resourceTree);\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            fields: {\n                dataSource: [].slice.call(this.generateTreeData()),\n                id: 'resourceId',\n                text: 'resourceName',\n                child: 'resourceChild'\n            },\n            nodeTemplate: this.parent.resourceHeaderTemplate,\n            nodeClicked: this.resourceClick.bind(this),\n            created: this.resourceTreeCreated.bind(this)\n        });\n        this.treeViewObj.appendTo(resourceTree);\n        this.treeViewObj.expandAll();\n        this.treePopup = new Popup(treeWrapper, {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            content: this.treeViewObj.element,\n            relateTo: this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ?\n                WRAPPER_CONTAINER_CLASS : TABLE_CONTAINER_CLASS))\n        });\n        this.parent.on(documentClick, this.documentClick, this);\n    };\n    ResourceBase.prototype.resourceTreeCreated = function () {\n        if (this.parent.activeViewOptions.resourceHeaderTemplate && this.parent.portals && this.treeViewObj.portals) {\n            this.parent.portals = this.parent.portals.concat(this.treeViewObj.portals);\n            this.parent.renderTemplates();\n        }\n    };\n    ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n        var _this = this;\n        var treeCollection = [];\n        var resTreeColl = [];\n        var groupIndex = 0;\n        var _loop_1 = function (i, len) {\n            var treeHandler = function (treeLevel, index, levelId) {\n                var resource = _this.resourceCollection[parseInt(index.toString(), 10)];\n                var treeArgs;\n                var resObj;\n                if (!isTimeLine) {\n                    treeArgs = {\n                        resourceId: levelId,\n                        resourceName: treeLevel.resourceData[resource.textField],\n                        resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData\n                    };\n                }\n                else {\n                    resObj = {\n                        type: 'resourceHeader', resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData, groupIndex: groupIndex,\n                        groupOrder: treeLevel.groupOrder\n                    };\n                    resTreeColl.push(resObj);\n                    groupIndex++;\n                }\n                if (treeLevel.child.length > 0 && !isTimeLine) {\n                    treeArgs.resourceChild = [];\n                }\n                var count = 1;\n                for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n                    var tree = _a[_i];\n                    if (!isTimeLine) {\n                        treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n                    }\n                    else {\n                        treeHandler(tree, index + 1, levelId + '-' + count);\n                    }\n                    count += 1;\n                }\n                if (isTimeLine) {\n                    extend(resObj.resourceData, { Count: count - 1 });\n                }\n                return treeArgs;\n            };\n            if (!isTimeLine) {\n                treeCollection.push(treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString()));\n            }\n            else {\n                treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString());\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        if (isTimeLine) {\n            this.lastResourceLevel = resTreeColl;\n            return resTreeColl;\n        }\n        else {\n            return treeCollection;\n        }\n    };\n    ResourceBase.prototype.renderResourceHeaderText = function () {\n        var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var headerCollection = [];\n        var _loop_2 = function (i, len) {\n            var resourceLevel = this_2.resourceCollection[parseInt(i.toString(), 10)];\n            var resourceText = resourceLevel.dataSource.filter(function (resData) {\n                return resData[resourceLevel.idField] === resource.groupOrder[parseInt(i.toString(), 10)];\n            });\n            var resourceName = createElement('div', { className: RESOURCE_NAME });\n            this_2.parent.sanitize(resourceText[0][resourceLevel.textField], resourceName);\n            headerCollection.push(resourceName);\n            var levelIcon = createElement('div', { className: 'e-icons e-icon-next' });\n            headerCollection.push(levelIcon);\n        };\n        var this_2 = this;\n        for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n            _loop_2(i, len);\n        }\n        headerCollection.pop();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        var headerWrapper = target.querySelector('.' + RESOURCE_LEVEL_TITLE);\n        removeChildren(headerWrapper);\n        for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {\n            var header = headerCollection_1[_i];\n            headerWrapper.appendChild(header);\n        }\n        if (this.lastResourceLevel.length === 1) {\n            addClass([this.parent.element.querySelector('.' + RESOURCE_MENU)], DISABLE_CLASS);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.menuClick = function (event) {\n        if (this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP).classList.contains(POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], ENABLE_CLASS);\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.selectResourceByIndex = function (groupIndex) {\n        if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {\n            this.triggerEvents(groupIndex);\n        }\n    };\n    ResourceBase.prototype.resourceClick = function (event) {\n        if (!event.node.classList.contains('e-has-child')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], ENABLE_CLASS);\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            var groupIndex = treeNodes.indexOf(event.node);\n            this.triggerEvents(groupIndex, event);\n            event.event.preventDefault();\n        }\n    };\n    ResourceBase.prototype.triggerEvents = function (groupIndex, event) {\n        var _this = this;\n        var args = { cancel: false, event: (event) ? event.event : null, groupIndex: groupIndex, requestType: 'resourceChange' };\n        this.parent.trigger(actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                _this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n                _this.parent.renderModule.render(_this.parent.currentView);\n                args = {\n                    cancel: false, event: (event) ? event.event : null, groupIndex: _this.parent.uiStateValues.groupIndex, requestType: 'resourceChanged'\n                };\n                _this.parent.trigger(actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.documentClick = function (args) {\n        if (closest(args.event.target, '.' + RESOURCE_TREE_POPUP)) {\n            return;\n        }\n        var treeWrapper = this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP);\n        if (treeWrapper && treeWrapper.classList.contains(POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promises = [];\n        for (var _i = 0, _a = this.parent.resources; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var dataModule = new Data(this.parent, resource.dataSource, resource.query);\n            promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n        Promise.all(promises).then(function (e) { return _this.dataManagerSuccess(e, isSetModel); })\n            .catch(function (e) { return _this.parent.crudModule.dataManagerFailure(e); });\n    };\n    ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.resourceCollection = [];\n        for (var i = 0, length_1 = e.length; i < length_1; i++) {\n            var resource = this.parent.resources[parseInt(i.toString(), 10)];\n            var resourceObj = this.getResourceModel(resource, e[parseInt(i.toString(), 10)].result);\n            this.parent.resourceCollection.push(resourceObj);\n        }\n        this.refreshLayout(isSetModel);\n    };\n    ResourceBase.prototype.getResourceModel = function (resource, resourceData) {\n        var resourceObj = {\n            field: resource.field,\n            title: resource.title,\n            name: resource.name,\n            allowMultiple: resource.allowMultiple,\n            dataSource: resourceData || resource.dataSource,\n            idField: resource.idField,\n            textField: resource.textField,\n            groupIDField: resource.groupIDField,\n            colorField: resource.colorField,\n            startHourField: resource.startHourField,\n            endHourField: resource.endHourField,\n            workDaysField: resource.workDaysField,\n            expandedField: resource.expandedField,\n            cssClassField: resource.cssClassField\n        };\n        return resourceObj;\n    };\n    ResourceBase.prototype.refreshLayout = function (isSetModel) {\n        if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !(this.parent.enablePersistence)) {\n            this.parent.uiStateValues.groupIndex = 0;\n        }\n        this.parent.renderElements(isSetModel);\n    };\n    ResourceBase.prototype.setResourceCollection = function () {\n        var requiredResources = [];\n        this.resourceCollection = [];\n        this.colorIndex = null;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index_1 = findIndexInData(this.parent.resourceCollection, 'name', resource);\n                if (index_1 >= 0) {\n                    requiredResources.push(this.parent.resourceCollection[parseInt(index_1.toString(), 10)]);\n                }\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            requiredResources = this.parent.resourceCollection;\n        }\n        var index = 0;\n        for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n            var resource = requiredResources_1[_b];\n            var resources = this.getResourceModel(resource);\n            if (resource.name === this.parent.eventSettings.resourceColorField) {\n                this.colorIndex = index;\n            }\n            index++;\n            this.resourceCollection.push(resources);\n        }\n        if (isNullOrUndefined(this.colorIndex)) {\n            this.colorIndex = this.resourceCollection.length - 1;\n        }\n    };\n    ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n        var _this = this;\n        var resources = this.resourceCollection;\n        var resTreeGroup = [];\n        var lastColumnDates = [];\n        var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n            var resTree = [];\n            var resource = resources[0];\n            if (resource) {\n                var data = void 0;\n                if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n                    var id_1 = prevResourceData[prevResource.idField];\n                    data = resource.dataSource.filter(function (e) {\n                        return e[resource.groupIDField] === id_1;\n                    });\n                }\n                else {\n                    data = resource.dataSource;\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var groupOrder = [];\n                    if (prevOrder && prevOrder.length > 0) {\n                        groupOrder = groupOrder.concat(prevOrder);\n                    }\n                    groupOrder.push(data[parseInt(i.toString(), 10)][resource.idField]);\n                    var items = group(resources.slice(1), index + 1, resource, data[parseInt(i.toString(), 10)], groupOrder);\n                    // Here validate child item empty top level resource only\n                    if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n                        continue;\n                    }\n                    var dateCol = [];\n                    var renderDates = _this.parent.activeView.renderDates;\n                    var resWorkDays = void 0;\n                    if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n                        var workDays = data[parseInt(i.toString(), 10)][resource.workDaysField];\n                        var resStartHour = data[parseInt(i.toString(), 10)][resource.startHourField];\n                        var resEndHour = data[parseInt(i.toString(), 10)][resource.endHourField];\n                        if (workDays && workDays.length > 0) {\n                            renderDates = _this.parent.activeView.getRenderDates(workDays);\n                            resWorkDays = workDays;\n                            dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n                        }\n                        else {\n                            resWorkDays = _this.parent.activeViewOptions.workDays;\n                            dateCol = innerDates;\n                        }\n                        var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n                        lastColumnDates = lastColumnDates.concat(dateSlots);\n                    }\n                    var resCssClass = data[parseInt(i.toString(), 10)][resource.cssClassField];\n                    var slotData = {\n                        type: 'resourceHeader', className: ['e-resource-cells'],\n                        resourceLevelIndex: index, groupOrder: groupOrder,\n                        resource: resource, resourceData: data[parseInt(i.toString(), 10)],\n                        colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n                        renderDates: renderDates, workDays: resWorkDays, cssClass: resCssClass,\n                        child: items\n                    };\n                    resTree.push(slotData);\n                }\n                if (!resTreeGroup[parseInt(index.toString(), 10)]) {\n                    resTreeGroup[parseInt(index.toString(), 10)] = [];\n                }\n                if (resTree.length > 0) {\n                    resTreeGroup[parseInt(index.toString(), 10)].push(resTree);\n                }\n                return resTree;\n            }\n            return [];\n        };\n        this.resourceTreeLevel = group(resources, 0);\n        return (isTimeLine) ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    };\n    ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n        var dateSlots = extend([], renderDates, null, true);\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var dateSlot = dateSlots_1[_i];\n            if (startHour) {\n                dateSlot.startHour = this.parent.getStartEndTime(startHour);\n            }\n            if (endHour) {\n                dateSlot.endHour = this.parent.getStartEndTime(endHour);\n            }\n            if (groupOrder) {\n                dateSlot.groupOrder = groupOrder;\n            }\n        }\n        return dateSlots;\n    };\n    ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n        var headerLevels = [];\n        for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n            var temp = 0;\n            for (var _i = 0, _a = resTreeGroup[parseInt(i.toString(), 10)]; _i < _a.length; _i++) {\n                var currentLevelChilds = _a[_i];\n                for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n                    var currentLevelChild = currentLevelChilds_1[_b];\n                    if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {\n                        var nextLevelChilds = resTreeGroup[parseInt((i + 1).toString(), 10)][parseInt(temp.toString(), 10)];\n                        if (!nextLevelChilds) {\n                            continue;\n                        }\n                        var colSpan = 0;\n                        for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n                            var nextLevelChild = nextLevelChilds_1[_c];\n                            if (!this.parent.activeViewOptions.group.byGroupID || (this.parent.activeViewOptions.group.byGroupID &&\n                                nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] ===\n                                    currentLevelChild.resourceData[currentLevelChild.resource.idField])) {\n                                colSpan += nextLevelChild.colSpan;\n                            }\n                        }\n                        currentLevelChild.colSpan = colSpan;\n                    }\n                    currentLevelChild.groupIndex = temp;\n                    temp++;\n                    headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                    headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n                }\n            }\n        }\n        this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n        if (!this.parent.activeViewOptions.group.byDate) {\n            var index = 0;\n            for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n                var lastLevelResource = _e[_d];\n                for (var i = 0; i < lastLevelResource.colSpan; i++) {\n                    lastColumnDates[parseInt(index.toString(), 10)].groupIndex = lastLevelResource.groupIndex;\n                    index++;\n                }\n            }\n            headerLevels.push(lastColumnDates);\n            return headerLevels;\n        }\n        var dateHeaderLevels = [];\n        var levels = extend([], headerLevels, null, true);\n        var datesColumn = [];\n        if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n            var renderDates_1 = [];\n            var dateIndex = 0;\n            var _loop_3 = function (headerDate) {\n                this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)] = [];\n                var currentDateLevels = [];\n                var _loop_4 = function (j) {\n                    var workDays = this_3.lastResourceLevel[parseInt(j.toString(), 10)].resourceData[this_3.lastResourceLevel[parseInt(j.toString(), 10)].resource.workDaysField];\n                    if (!workDays) {\n                        workDays = this_3.parent.activeViewOptions.workDays;\n                    }\n                    if (workDays.indexOf(headerDate.date.getDay()) !== -1) {\n                        var resTd_1 = extend({}, this_3.lastResourceLevel[parseInt(j.toString(), 10)], null, true);\n                        resTd_1.date = headerDate.date;\n                        this_3.lastResourceLevel[parseInt(j.toString(), 10)].workDays = workDays;\n                        resTd_1.startHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd_1.endHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.endHourField]) ||\n                            headerDate.endHour;\n                        this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)].push(resTd_1);\n                        var _loop_5 = function (k) {\n                            if (!currentDateLevels[parseInt(k.toString(), 10)]) {\n                                currentDateLevels[parseInt(k.toString(), 10)] = [];\n                            }\n                            if (k === resTd_1.groupOrder.length - 1) {\n                                if (!renderDates_1[parseInt(j.toString(), 10)]) {\n                                    renderDates_1[parseInt(j.toString(), 10)] = [];\n                                }\n                                var filterDates = resTd_1.renderDates.filter(function (x) { return x.getDay() === headerDate.date.getDay(); });\n                                renderDates_1[parseInt(j.toString(), 10)] = renderDates_1[parseInt(j.toString(), 10)].concat(filterDates);\n                                currentDateLevels[parseInt(k.toString(), 10)].push(resTd_1);\n                                return \"continue\";\n                            }\n                            var currentLevel = levels[parseInt(k.toString(), 10)];\n                            var filteredResource = currentLevel.filter(function (data) {\n                                return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                            });\n                            if (filteredResource && filteredResource.length > 0) {\n                                var existedResource = currentDateLevels[parseInt(k.toString(), 10)].filter(function (data) {\n                                    return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                                });\n                                if (existedResource && existedResource.length > 0) {\n                                    existedResource[0].colSpan += 1;\n                                }\n                                else {\n                                    var filteredTd = extend({}, filteredResource[0], null, true);\n                                    filteredTd.colSpan = 1;\n                                    currentDateLevels[parseInt(k.toString(), 10)].push(filteredTd);\n                                }\n                            }\n                        };\n                        for (var k = 0; k < resTd_1.groupOrder.length; k++) {\n                            _loop_5(k);\n                        }\n                    }\n                };\n                for (var j = 0; j < this_3.lastResourceLevel.length; j++) {\n                    _loop_4(j);\n                }\n                if (currentDateLevels.length > 0) {\n                    for (var l = 0; l < levels.length; l++) {\n                        if (!dateHeaderLevels[parseInt(l.toString(), 10)]) {\n                            dateHeaderLevels[parseInt(l.toString(), 10)] = [];\n                        }\n                        dateHeaderLevels[parseInt(l.toString(), 10)] = dateHeaderLevels[parseInt(l.toString(), 10)].concat(currentDateLevels[parseInt(l.toString(), 10)]);\n                    }\n                    headerDate.colSpan = currentDateLevels[currentDateLevels.length - 1].length;\n                    datesColumn.push(headerDate);\n                }\n                dateIndex++;\n            };\n            var this_3 = this;\n            for (var _f = 0, headerDates_1 = headerDates; _f < headerDates_1.length; _f++) {\n                var headerDate = headerDates_1[_f];\n                _loop_3(headerDate);\n            }\n            this.resourceDateTree = this.resourceDateTree.filter(function (data) { return data.length > 0; });\n            this.lastResourceLevel.forEach(function (x, index) {\n                if (renderDates_1[parseInt(index.toString(), 10)]) {\n                    x.renderDates = renderDates_1[parseInt(index.toString(), 10)].sort(function (a, b) { return a.getTime() - b.getTime(); });\n                }\n            });\n            dateHeaderLevels.unshift(datesColumn);\n            return dateHeaderLevels;\n        }\n        var dateColSpan = 0;\n        for (var _g = 0, _h = levels[0]; _g < _h.length; _g++) {\n            var firstRowTd = _h[_g];\n            dateColSpan += firstRowTd.colSpan;\n        }\n        for (var _j = 0, headerDates_2 = headerDates; _j < headerDates_2.length; _j++) {\n            var headerDate = headerDates_2[_j];\n            headerDate.colSpan = dateColSpan;\n            datesColumn.push(headerDate);\n            var resGroup = extend([], levels, null, true);\n            for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n                if (k === resGroup.length - 1) {\n                    for (var _k = 0, _l = resGroup[parseInt(k.toString(), 10)]; _k < _l.length; _k++) {\n                        var resTd = _l[_k];\n                        resTd.date = headerDate.date;\n                        resTd.workDays = headerDate.workDays;\n                        resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) ||\n                            headerDate.endHour;\n                    }\n                }\n                if (!dateHeaderLevels[parseInt(k.toString(), 10)]) {\n                    dateHeaderLevels[parseInt(k.toString(), 10)] = [];\n                }\n                dateHeaderLevels[parseInt(k.toString(), 10)] = dateHeaderLevels[parseInt(k.toString(), 10)].concat(resGroup[parseInt(k.toString(), 10)]);\n            }\n        }\n        dateHeaderLevels.unshift(datesColumn);\n        return dateHeaderLevels;\n    };\n    ResourceBase.prototype.setResourceValues = function (eventObj, groupIndex) {\n        var _this = this;\n        var setValues = function (index, field, value) {\n            if (_this.resourceCollection[parseInt(index.toString(), 10)].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {\n                eventObj[\"\" + field] = [value];\n            }\n            else {\n                eventObj[\"\" + field] = value;\n            }\n        };\n        if (groupIndex === void 0) {\n            groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                this.parent.activeCellsData.groupIndex;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n            var groupOrder = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, groupOrder[parseInt(index.toString(), 10)]);\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                var data = this.resourceCollection[parseInt(index.toString(), 10)].dataSource[0];\n                if (data) {\n                    setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, data[this.resourceCollection[parseInt(index.toString(), 10)].idField]);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n        var colorFieldIndex = (!isNullOrUndefined(groupOrder) &&\n            this.colorIndex > groupOrder.length - 1) ? groupOrder.length - 1 : this.colorIndex;\n        var resource = this.resourceCollection[parseInt(colorFieldIndex.toString(), 10)];\n        if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[parseInt(colorFieldIndex.toString(), 10)];\n        var data = this.filterData(resource.dataSource, resource.idField, id);\n        if (data.length > 0) {\n            return data[0][resource.colorField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getCssClass = function (eventObj) {\n        var resource = this.resourceCollection.slice(-1)[0];\n        if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n        if (data.length > 0) {\n            return data[0][resource.cssClassField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getResourceRenderDates = function () {\n        // eslint-disable-next-line prefer-spread\n        var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function (e) { return e.renderDates; }));\n        var removeDuplicateDates = function (dateColl) { return dateColl.filter(function (date, index, dates) {\n            return dates.map(function (dateObj) { return dateObj.getTime(); }).indexOf(date.getTime()) === index;\n        }); };\n        var renderDates = removeDuplicateDates(resourceDates);\n        renderDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        return renderDates;\n    };\n    ResourceBase.prototype.filterData = function (dataSource, field, value) {\n        return dataSource.filter(function (data) { return data[\"\" + field] === value; });\n    };\n    ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n        if (this.parent.activeViewOptions.group.allowGroupEdit) {\n            var resourceObj = {};\n            for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n                var groupIndex = groupEditIndex_1[_i];\n                var resourceLevel = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n                for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n                    var fieldName = this.resourceCollection[parseInt(level.toString(), 10)].field;\n                    if (isNullOrUndefined(resourceObj[\"\" + fieldName])) {\n                        resourceObj[\"\" + fieldName] = [];\n                    }\n                    resourceObj[\"\" + fieldName].push(resourceLevel[parseInt(level.toString(), 10)]);\n                }\n            }\n            eventObj = extend(eventObj, resourceObj);\n        }\n        else {\n            for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n                if (this.lastResourceLevel[parseInt(index.toString(), 10)]) {\n                    eventObj[this.resourceCollection[parseInt(level.toString(), 10)].field] = this.lastResourceLevel[parseInt(index.toString(), 10)].groupOrder[parseInt(level.toString(), 10)];\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.addResource = function (resources, name, index) {\n        var resourceCollection = (resources instanceof Array) ? resources : [resources];\n        var _loop_6 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (addObj, i) {\n                    return new DataManager({ json: resource.dataSource }).insert(addObj, null, null, index + i);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_1 = _loop_6(resource);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.removeResource = function (resourceId, name) {\n        var resourceCollection = (resourceId instanceof Array) ? resourceId : [resourceId];\n        var _loop_7 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (removeObj) {\n                    return new DataManager({ json: resource.dataSource }).remove(resource.idField, removeObj);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_2 = _loop_7(resource);\n            if (state_2 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.getIndexFromResourceId = function (id, name, resourceData, event, parentField) {\n        name = name || this.parent.resourceCollection.slice(-1)[0].name;\n        if (isNullOrUndefined(resourceData)) {\n            resourceData = this.resourceCollection.filter(function (e) { return e.name === name; })[0];\n            if (isNullOrUndefined(resourceData)) {\n                return null;\n            }\n        }\n        var resource = resourceData.dataSource.filter(function (e) {\n            if (event && e[resourceData.idField] === id) {\n                if (e[resourceData.groupIDField] === event[\"\" + parentField]) {\n                    return e[resourceData.idField] === id;\n                }\n                return null;\n            }\n            else {\n                return e[resourceData.idField] === id;\n            }\n        })[0];\n        return (this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resource));\n    };\n    ResourceBase.prototype.resourceExpand = function (id, name, hide) {\n        var resource = this.parent.resourceCollection.filter(function (e) {\n            if (e.name === name) {\n                return e;\n            }\n            return null;\n        })[0];\n        var index = 0;\n        var resourceData = resource.dataSource.filter(function (e) { return e[resource.idField] === id; })[0];\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n            index = this.getIndexFromResourceId(id, name, resource);\n        }\n        else {\n            index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n        }\n        var target = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS + ' ' + (\"[data-group-index=\\\"\" + index + \"\\\"]\") +\n            ' ' + '.' + RESOURCE_TREE_ICON_CLASS);\n        if (target) {\n            if (target.classList.contains(RESOURCE_EXPAND_CLASS) && !hide) {\n                target.click();\n            }\n            else if (target.classList.contains(RESOURCE_COLLAPSE_CLASS) && hide) {\n                target.click();\n            }\n        }\n    };\n    ResourceBase.prototype.resourceScroll = function (id, name) {\n        if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n            return;\n        }\n        var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n        var levelIndex = this.parent.resourceCollection.length - 1;\n        var resource = this.parent.resourceCollection.filter(function (e, index) {\n            if (e.name === levelName) {\n                levelIndex = index;\n                return e;\n            }\n            return null;\n        })[0];\n        var scrollElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var index = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                var resourceData = resource.dataSource.filter(function (e) {\n                    return e[resource.idField] === id;\n                })[0];\n                index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n            }\n            if (this.parent.virtualScrollModule) {\n                var virtual = this.parent.element.querySelector('.' + VIRTUAL_TRACK_CLASS);\n                var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n                if (this.parent.rowAutoHeight) {\n                    scrollElement.scrollTop = 0;\n                    this.parent.virtualScrollModule.virtualScrolling();\n                }\n                scrollElement.scrollTop = (index * averageRowHeight) - (((this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight));\n                this.parent.virtualScrollModule.virtualScrolling();\n                if (this.parent.rowAutoHeight) {\n                    var td = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                    if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {\n                        scrollElement.scrollTop =\n                            (scrollElement.scrollTop < td.offsetTop) ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n                    }\n                }\n                else {\n                    scrollElement.scrollTop = (index * averageRowHeight);\n                }\n            }\n            else {\n                var td = this.parent.element.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {\n                    scrollElement.scrollTop = td.offsetTop;\n                }\n            }\n        }\n        else {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n                    index = this.lastResourceLevel.map(function (e) { return e.resourceData[resource.idField]; }).indexOf(id);\n                }\n                else {\n                    index = resource.dataSource.map(function (e) { return e[resource.idField]; }).indexOf(id);\n                }\n            }\n            var offsetTarget = this.parent.element.querySelector(\".\" + HEADER_ROW_CLASS + \":nth-child(\" + (levelIndex + 1) + \")\");\n            var offset = [].slice.call(offsetTarget.children).map(function (node) { return node.offsetLeft; });\n            scrollElement.scrollLeft = offset[parseInt(index.toString(), 10)];\n        }\n    };\n    ResourceBase.prototype.destroy = function () {\n        this.parent.off(documentClick, this.documentClick);\n        if (this.treeViewObj) {\n            if (this.treeViewObj.portals && this.treeViewObj.portals.length > 0) {\n                var treeViewTemplates = this.treeViewObj.portals.map(function (x) { return x.propName; });\n                if (treeViewTemplates.length > 0) {\n                    this.parent.resetTemplates(treeViewTemplates);\n                }\n            }\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n            remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP));\n            remove(this.parent.element.querySelector('.' + RESOURCE_TREE_POPUP_OVERLAY));\n        }\n        var resToolBarEle = this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER);\n        if (resToolBarEle) {\n            remove(resToolBarEle);\n        }\n    };\n    return ResourceBase;\n}());\n\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\nvar Schedule = /** @__PURE__ @class */ (function (_super) {\n    __extends(Schedule, _super);\n    /**\n     * Constructor for creating the Schedule widget\n     *\n     * @param {ScheduleModel} options Accepts the schedule model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    function Schedule(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.render = function () {\n        var addClasses = [];\n        var removeClasses = [];\n        addClasses.push(ROOT);\n        if (this.enableRtl) {\n            addClasses.push(RTL);\n        }\n        else {\n            removeClasses.push(RTL);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(DEVICE_CLASS);\n        }\n        if (this.allowMultiDrag) {\n            addClasses.push(MULTI_DRAG);\n        }\n        else {\n            removeClasses.push(MULTI_DRAG);\n        }\n        if (this.cssClass) {\n            var cssClass = this.cssClass.split(' ');\n            for (var _i = 0, cssClass_1 = cssClass; _i < cssClass_1.length; _i++) {\n                var cls_1 = cssClass_1[_i];\n                addClasses.push(cls_1);\n            }\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.validateDate();\n        createSpinner({ target: this.element });\n        this.scrollModule = new Scroll(this);\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        this.renderModule = new Render(this);\n        this.eventBase = new EventBase(this);\n        this.workCellAction = new WorkCellInteraction(this);\n        if (this.allowKeyboardInteraction) {\n            this.keyboardInteractionModule = new KeyboardInteraction(this);\n        }\n        this.inlineModule = new InlineEdit(this);\n        this.initializeDataModule();\n        this.renderTableContainer();\n        this.activeViewOptions = this.getActiveViewOptions();\n        this.initializeResources();\n        this.wireEvents();\n    };\n    Schedule.prototype.renderTableContainer = function () {\n        if (!this.element.querySelector('.' + TABLE_CONTAINER_CLASS)) {\n            this.element.appendChild(this.createElement('div', { className: TABLE_CONTAINER_CLASS }));\n        }\n    };\n    /**\n     * Method to render react templates\n     *\n     * @param {Function} callback - Specifies the callBack method\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderTemplates = function (callback) {\n        if (this.isReact) {\n            this.renderReactTemplates(callback);\n        }\n        else if (callback) {\n            callback();\n        }\n    };\n    /**\n     * Method to reset react templates\n     *\n     * @param {string[]} templates Accepts the template ID\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.resetTemplates = function (templates) {\n        if (this.isAngular || this.isReact) {\n            this.clearTemplate(templates);\n        }\n    };\n    /**\n     * This method renders untrusted strings and scripts securely by sanitizing them first.\n     *\n     * @param {string} value - A string value representing the HTML string value to be sanitized.\n     * @param {HTMLElement} element - An HTML element to which the sanitized or unsanitized HTML string will be assigned.\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.sanitize = function (value, element) {\n        if (this.enableHtmlSanitizer) {\n            element.innerText = SanitizeHtmlHelper.sanitize(value);\n        }\n        else {\n            element.innerHTML = value;\n        }\n    };\n    Schedule.prototype.initializeResources = function (isSetModel) {\n        if (isSetModel === void 0) { isSetModel = false; }\n        if (this.resources.length > 0) {\n            this.resourceBase = new ResourceBase(this);\n            this.resourceBase.bindResourcesData(isSetModel);\n        }\n        else {\n            this.resourceBase = null;\n            this.resourceCollection = [];\n            this.renderElements(isSetModel);\n        }\n    };\n    /**\n     * Method to render the layout elements\n     *\n     * @param {boolean} isLayoutOnly Accepts the boolean value to render layout or not\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderElements = function (isLayoutOnly) {\n        if (isLayoutOnly) {\n            this.initializeView(this.currentView);\n            this.eventWindow.refresh();\n            return;\n        }\n        this.destroyHeaderModule();\n        if (this.showHeaderBar) {\n            this.headerModule = new HeaderRenderer(this);\n        }\n        this.renderTableContainer();\n        if (Browser.isDevice || Browser.isTouch) {\n            this.scheduleTouchModule = new ScheduleTouch(this);\n        }\n        this.initializeView(this.currentView);\n        this.destroyPopups();\n        if (!this.isPrinting) {\n            this.initializePopups();\n        }\n    };\n    Schedule.prototype.validateDate = function (selectedDate) {\n        if (selectedDate === void 0) { selectedDate = this.selectedDate; }\n        // persist the selected date value\n        var date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);\n        var minDate = this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);\n        var maxDate = this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);\n        if (minDate <= maxDate) {\n            if (date < minDate) {\n                date = minDate;\n            }\n            if (date > maxDate) {\n                date = maxDate;\n            }\n            this.setProperties({ selectedDate: new Date('' + date), minDate: new Date('' + minDate), maxDate: new Date('' + maxDate) }, true);\n            if (this.eventWindow) {\n                this.eventWindow.updateMinMaxDateToEditor();\n            }\n        }\n        else {\n            throw Error('minDate should be equal or less than maxDate');\n        }\n    };\n    Schedule.prototype.getViewIndex = function (viewName) {\n        for (var item = 0; item < this.viewCollections.length; item++) {\n            var checkIndex = this.viewCollections[parseInt(item.toString(), 10)].option;\n            if (checkIndex === viewName) {\n                return item;\n            }\n        }\n        return -1;\n    };\n    Schedule.prototype.setViewOptions = function (isModuleLoad) {\n        if (isModuleLoad === void 0) { isModuleLoad = false; }\n        this.viewOptions = {};\n        this.viewCollections = [];\n        var viewName;\n        var selectedView;\n        var prevIndex = this.viewIndex;\n        var count = 0;\n        this.viewIndex = -1;\n        for (var _i = 0, _a = this.views; _i < _a.length; _i++) {\n            var view = _a[_i];\n            var isOptions = (typeof view === 'string') ? false : true;\n            if (typeof view === 'string') {\n                viewName = view;\n                if (this.currentView === viewName) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            else {\n                viewName = view.option;\n                if (view.isSelected) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            var obj = extend({ option: viewName }, isOptions ? view : {});\n            var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n            obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : '';\n            obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : '';\n            obj.dateRangeTemplateName = obj.dateRangeTemplate ? obj.option : '';\n            obj.cellTemplateName = obj.cellTemplate ? obj.option : '';\n            obj.dayHeaderTemplateName = obj.dayHeaderTemplate ? obj.option : '';\n            obj.monthHeaderTemplateName = obj.monthHeaderTemplate ? obj.option : '';\n            obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : '';\n            obj.headerIndentTemplateName = obj.headerIndentTemplate ? obj.option : '';\n            obj.eventTemplateName = obj.eventTemplate ? obj.option : '';\n            if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {\n                delete obj.firstDayOfWeek;\n            }\n            if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {\n                delete obj.interval;\n            }\n            this.viewCollections.push(obj);\n            if (isNullOrUndefined(this.viewOptions[\"\" + fieldViewName])) {\n                this.viewOptions[\"\" + fieldViewName] = [obj];\n            }\n            else {\n                this.viewOptions[\"\" + fieldViewName].push(obj);\n            }\n            count++;\n        }\n        if (!isModuleLoad && selectedView) {\n            this.setProperties({ currentView: selectedView }, true);\n        }\n        if (this.viewIndex === -1) {\n            var currentIndex = this.getViewIndex(this.currentView);\n            this.viewIndex = ((typeof this.views[0] !== 'string') && (!isNullOrUndefined(prevIndex) && prevIndex !== -1)) ? prevIndex :\n                (currentIndex === -1) ? 0 : currentIndex;\n        }\n    };\n    Schedule.prototype.getActiveViewOptions = function () {\n        var timeScale = {\n            enable: this.timeScale.enable,\n            interval: this.timeScale.interval,\n            slotCount: this.timeScale.slotCount,\n            majorSlotTemplate: this.timeScale.majorSlotTemplate,\n            minorSlotTemplate: this.timeScale.minorSlotTemplate\n        };\n        var isYearView = this.viewCollections[this.viewIndex].option.indexOf('Year') > -1;\n        var group = {\n            byDate: isYearView ? false : this.group.byDate,\n            byGroupID: this.group.byGroupID,\n            allowGroupEdit: this.group.allowGroupEdit,\n            resources: this.group.resources,\n            headerTooltipTemplate: this.group.headerTooltipTemplate,\n            enableCompactView: this.group.enableCompactView,\n            hideNonWorkingDays: ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.currentView) > -1 ? this.group.hideNonWorkingDays : false\n        };\n        var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n        var scheduleOptions = {\n            dateFormat: this.dateFormat,\n            endHour: this.endHour,\n            isSelected: false,\n            option: null,\n            readonly: this.readonly,\n            startHour: this.startHour,\n            allowVirtualScrolling: false,\n            cellHeaderTemplate: this.cellHeaderTemplate,\n            dayHeaderTemplate: this.dayHeaderTemplate,\n            monthHeaderTemplate: this.monthHeaderTemplate,\n            cellTemplate: this.cellTemplate,\n            eventTemplate: this.eventSettings.template,\n            dateHeaderTemplate: this.dateHeaderTemplate,\n            dateRangeTemplate: this.dateRangeTemplate,\n            resourceHeaderTemplate: this.resourceHeaderTemplate,\n            headerIndentTemplate: this.headerIndentTemplate,\n            firstMonthOfYear: this.firstMonthOfYear,\n            firstDayOfWeek: this.firstDayOfWeek,\n            workDays: workDays,\n            monthsCount: this.monthsCount,\n            showWeekend: this.showWeekend,\n            showWeekNumber: this.showWeekNumber,\n            displayName: null,\n            interval: 1,\n            timeScale: timeScale,\n            timeFormat: this.internalTimeFormat,\n            group: group,\n            headerRows: this.headerRows,\n            orientation: 'Horizontal',\n            numberOfWeeks: 0,\n            displayDate: null\n        };\n        var viewOptions = this.viewCollections[this.viewIndex];\n        var viewsData = extend(scheduleOptions, viewOptions, undefined, true);\n        if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {\n            viewsData.firstDayOfWeek = this.firstDayOfWeek;\n        }\n        if (viewsData.displayDate) {\n            viewsData.displayDate = viewsData.displayDate instanceof Date ? new Date(viewsData.displayDate.getTime()) :\n                new Date(viewsData.displayDate);\n        }\n        return viewsData;\n    };\n    Schedule.prototype.initializeDataModule = function () {\n        this.eventFields = {\n            id: this.eventSettings.fields.id,\n            isBlock: this.eventSettings.fields.isBlock,\n            subject: this.eventSettings.fields.subject.name,\n            startTime: this.eventSettings.fields.startTime.name,\n            endTime: this.eventSettings.fields.endTime.name,\n            startTimezone: this.eventSettings.fields.startTimezone.name,\n            endTimezone: this.eventSettings.fields.endTimezone.name,\n            location: this.eventSettings.fields.location.name,\n            description: this.eventSettings.fields.description.name,\n            isAllDay: this.eventSettings.fields.isAllDay.name,\n            recurrenceID: this.eventSettings.fields.recurrenceID.name,\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n            recurrenceException: this.eventSettings.fields.recurrenceException.name,\n            isReadonly: this.eventSettings.fields.isReadonly,\n            followingID: this.eventSettings.fields.followingID\n        };\n        this.setEditorTitles();\n        this.dataModule = new Data(this, this.eventSettings.dataSource, this.eventSettings.query);\n        this.crudModule = new Crud(this);\n    };\n    Schedule.prototype.setEditorTitles = function () {\n        this.editorTitles = {\n            subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n            startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n            endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n            isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n            startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n            endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n            location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n            description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n        };\n    };\n    Schedule.prototype.initializeView = function (viewName) {\n        this.showSpinner();\n        this.activeViewOptions = this.getActiveViewOptions();\n        if (this.resourceBase) {\n            this.resourceBase.setResourceCollection();\n        }\n        this.initializeTemplates();\n        this.renderModule.render(viewName);\n    };\n    Schedule.prototype.initializeTemplates = function () {\n        this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n        this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n        this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n        this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n        this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n        this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n        this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n        this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n        this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n        this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n        this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n        this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n        this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n        this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n    };\n    Schedule.prototype.initializePopups = function () {\n        this.eventWindow = new EventWindow(this);\n        this.quickPopup = new QuickPopups(this);\n    };\n    /**\n     * Method to get day names\n     *\n     * @param {string} type Accepts the day name\n     * @returns {string[]} Returns the collection of day names\n     * @private\n     */\n    Schedule.prototype.getDayNames = function (type) {\n        var culShortNames = [];\n        var cldrObj;\n        var nameSpace = '';\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            nameSpace = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            nameSpace = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type;\n            cldrObj = (getValue(nameSpace, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            culShortNames.push(getValue(obj, cldrObj));\n        }\n        return culShortNames;\n    };\n    Schedule.prototype.setCldrTimeFormat = function () {\n        if (!isNullOrUndefined(this.timeFormat)) {\n            this.internalTimeFormat = this.timeFormat;\n            return;\n        }\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            this.internalTimeFormat = (getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            this.internalTimeFormat = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData));\n        }\n    };\n    /**\n     * Method to get calendar mode\n     *\n     * @returns {string} Returns the calendar mode\n     * @private\n     */\n    Schedule.prototype.getCalendarMode = function () {\n        return this.calendarMode.toLowerCase();\n    };\n    /**\n     * Method to get time in string\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {string} Returns the time in string\n     * @private\n     */\n    Schedule.prototype.getTimeString = function (date) {\n        var time = this.globalize.formatDate(date, {\n            format: this.activeViewOptions.timeFormat,\n            type: 'time', calendar: this.getCalendarMode()\n        });\n        return time.toLocaleUpperCase();\n    };\n    /**\n     * Method to get  date object\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getDateTime = function (date) {\n        return date instanceof Date ? new Date(date.getTime()) : new Date(date);\n    };\n    Schedule.prototype.setCalendarMode = function () {\n        if (this.calendarMode === 'Islamic') {\n            this.calendarUtil = new Islamic();\n        }\n        else {\n            this.calendarUtil = new Gregorian();\n        }\n    };\n    /**\n     * Method to change the current view\n     *\n     * @param {View} view Accepts the view name\n     * @param {Event} event Accepts the event object\n     * @param {boolean} muteOnChange Accepts the value to enable or disable mute on change\n     * @param {number} index Accepts the index value\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.changeView = function (view, event, muteOnChange, index) {\n        var _this = this;\n        if (isNullOrUndefined(index)) {\n            index = this.getViewIndex(view);\n        }\n        if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {\n            return;\n        }\n        var previousView = this.activeViewOptions ? this.activeViewOptions.option : this.currentView;\n        var args = { requestType: 'viewNavigate', cancel: false, event: event };\n        this.trigger(actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'view', cancel: false, currentDate: _this.selectedDate, previousView: previousView, currentView: view, viewIndex: index\n                };\n                _this.trigger(navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        var isVertical = ['Day', 'Week', 'WorkWeek'].indexOf(view) > -1 && ['Day', 'Week', 'WorkWeek'].indexOf(previousView) < 0;\n                        _this.uiStateValues.isInitial = isVertical || view.indexOf('Timeline') > -1 || view.indexOf('Year') > -1;\n                        _this.uiStateValues.top = view.indexOf('Timeline') > -1 && previousView.indexOf('Timeline') < 0 ? 0 : _this.uiStateValues.top;\n                        _this.viewIndex = navigationArgs.viewIndex;\n                        _this.setProperties({ currentView: view }, true);\n                        if (_this.headerModule) {\n                            _this.headerModule.updateActiveView();\n                            _this.headerModule.setCalendarDate(_this.selectedDate);\n                            _this.headerModule.setCalendarView();\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'viewNavigate', cancel: false, event: event };\n                        _this.trigger(actionComplete, args);\n                    }\n                    else {\n                        _this.currentView = previousView;\n                    }\n                });\n            }\n            else {\n                _this.currentView = previousView;\n            }\n        });\n    };\n    /**\n     * Method to change the view date\n     *\n     * @param {Date} selectedDate Accepts the selected date\n     * @param {Event} event Accepts the event object\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.changeDate = function (selectedDate, event) {\n        var _this = this;\n        var args = { requestType: 'dateNavigate', cancel: false, event: event };\n        this.trigger(actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'date', cancel: false, previousDate: _this.selectedDate, currentDate: selectedDate\n                };\n                _this.trigger(navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        _this.uiStateValues.isInitial = _this.activeView.isTimelineView() && _this.currentView !== 'TimelineYear';\n                        _this.validateDate(navigationArgs.currentDate);\n                        if (_this.headerModule) {\n                            _this.headerModule.setCalendarDate(navigationArgs.currentDate);\n                        }\n                        if (_this.currentView === 'MonthAgenda' && _this.monthAgendaModule) {\n                            _this.monthAgendaModule.monthAgendaDate = new Date('' + _this.selectedDate);\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'dateNavigate', cancel: false, event: event };\n                        _this.trigger(actionComplete, args);\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Method to validate min and max date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean result to validate the min and max date\n     * @private\n     */\n    Schedule.prototype.isMinMaxDate = function (date) {\n        if (date === void 0) { date = this.selectedDate; }\n        return ((date.getTime() >= this.minDate.getTime()) && (date.getTime() <= this.maxDate.getTime()));\n    };\n    /**\n     * Method to validate the selected date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean value for given date is selected date or not\n     * @private\n     */\n    Schedule.prototype.isSelectedDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n    };\n    /**\n     * Method to get the current time\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object after performing the timezone conversion\n     * @private\n     */\n    Schedule.prototype.getCurrentTime = function (date) {\n        if (date === void 0) { date = new Date(); }\n        if (this.timezone) {\n            return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);\n        }\n        return date;\n    };\n    /** Method to get navigate view\n     *\n     * @returns {View} Return the navigate view name\n     * @private\n     */\n    Schedule.prototype.getNavigateView = function () {\n        if (this.activeView.isTimelineView()) {\n            return this.currentView === 'TimelineMonth' || this.currentView === 'TimelineYear' ? 'TimelineDay' : 'Agenda';\n        }\n        return 'Day';\n    };\n    Schedule.prototype.animateLayout = function () {\n        if (!this.activeView.element) {\n            return;\n        }\n        new Animation({ duration: 600, name: 'FadeIn', timingFunction: 'easeIn' }).animate(this.activeView.element);\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules\n     * @private\n     */\n    Schedule.prototype.requiredModules = function () {\n        var modules = [];\n        this.setViewOptions(true);\n        for (var _i = 0, _a = Object.keys(this.viewOptions); _i < _a.length; _i++) {\n            var view = _a[_i];\n            view = (view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek') ? 'timelineViews' : view;\n            modules.push({ member: view, args: [this] });\n        }\n        if (this.allowDragAndDrop) {\n            modules.push({ member: 'dragAndDrop', args: [this] });\n        }\n        if (this.allowResizing) {\n            modules.push({ member: 'resize', args: [this] });\n        }\n        modules.push({ member: 'excelExport', args: [this] });\n        modules.push({ member: 'iCalendarExport', args: [this] });\n        modules.push({ member: 'iCalendarImport', args: [this] });\n        modules.push({ member: 'print', args: [this] });\n        return modules;\n    };\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice || isIPadDevice();\n        this.globalize = new Internationalization(this.locale);\n        this.tzModule = new Timezone();\n        if (this && isNullOrUndefined(this.uiStateValues) || !(this.enablePersistence)) {\n            this.uiStateValues = {\n                expand: false, isInitial: true, left: 0, top: 0, isGroupAdaptive: false,\n                isIgnoreOccurrence: false, groupIndex: 0, action: false, isBlock: false, isCustomMonth: true, isPreventTimezone: false\n            };\n        }\n        this.currentTimezoneDate = this.getCurrentTime();\n        this.activeCellsData = { startTime: new Date(this.currentTimezoneDate), endTime: new Date(this.currentTimezoneDate), isAllDay: false };\n        this.activeEventData = { event: undefined, element: undefined };\n        this.getDefaultLocale();\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.setCldrTimeFormat();\n        this.setCalendarMode();\n        this.eventsData = [];\n        this.eventsProcessed = [];\n        this.blockData = [];\n        this.blockProcessed = [];\n        this.resourceCollection = [];\n        this.currentAction = null;\n        this.selectedElements = [];\n        this.setViewOptions();\n    };\n    Schedule.prototype.getDefaultLocale = function () {\n        this.defaultLocale = {\n            day: 'Day',\n            week: 'Week',\n            workWeek: 'Work Week',\n            month: 'Month',\n            year: 'Year',\n            agenda: 'Agenda',\n            weekAgenda: 'Week Agenda',\n            workWeekAgenda: 'Work Week Agenda',\n            monthAgenda: 'Month Agenda',\n            today: 'Today',\n            noEvents: 'No events',\n            emptyContainer: 'There are no events scheduled on this day.',\n            allDay: 'All day',\n            start: 'Start',\n            end: 'End',\n            more: 'more',\n            close: 'Close',\n            cancel: 'Cancel',\n            noTitle: '(No Title)',\n            delete: 'Delete',\n            deleteEvent: 'Delete Event',\n            deleteMultipleEvent: 'Delete Multiple Events',\n            selectedItems: 'Items selected',\n            deleteSeries: 'Entire Series',\n            edit: 'Edit',\n            editSeries: 'Entire Series',\n            editEvent: 'Edit Event',\n            createEvent: 'Create',\n            subject: 'Subject',\n            addTitle: 'Add title',\n            moreDetails: 'More Details',\n            save: 'Save',\n            editContent: 'How would you like to change the appointment in the series?',\n            deleteContent: 'Are you sure you want to delete this event?',\n            deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n            newEvent: 'New Event',\n            title: 'Title',\n            location: 'Location',\n            description: 'Description',\n            timezone: 'Timezone',\n            startTimezone: 'Start Timezone',\n            endTimezone: 'End Timezone',\n            repeat: 'Repeat',\n            saveButton: 'Save',\n            cancelButton: 'Cancel',\n            deleteButton: 'Delete',\n            recurrence: 'Recurrence',\n            wrongPattern: 'The recurrence pattern is not valid.',\n            seriesChangeAlert: 'Do you want to cancel the changes made to specific ' +\n                'instances of this series and match it to the whole series again?',\n            createError: 'The duration of the event must be shorter than how frequently it occurs. ' +\n                'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n            sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n            occurenceAlert: 'Cannot reschedule an occurrence of the recurring appointment if it skips over ' +\n                'a later occurrence of the same appointment.',\n            editRecurrence: 'Edit Recurrence',\n            repeats: 'Repeats',\n            alert: 'Alert',\n            startEndError: 'The selected end date occurs before the start date.',\n            invalidDateError: 'The entered date value is invalid.',\n            blockAlert: 'Events cannot be scheduled within the blocked time range.',\n            ok: 'Ok',\n            yes: 'Yes',\n            no: 'No',\n            occurrence: 'Occurrence',\n            series: 'Series',\n            previous: 'Previous',\n            next: 'Next',\n            timelineDay: 'Timeline Day',\n            timelineWeek: 'Timeline Week',\n            timelineWorkWeek: 'Timeline Work Week',\n            timelineMonth: 'Timeline Month',\n            timelineYear: 'Timeline Year',\n            editFollowingEvent: 'Following Events',\n            deleteTitle: 'Delete Event',\n            editTitle: 'Edit Event',\n            beginFrom: 'Begin From',\n            endAt: 'Ends At',\n            expandAllDaySection: 'Expand-all-day-section',\n            collapseAllDaySection: 'Collapse-all-day-section',\n            searchTimezone: 'Search Timezone',\n            noRecords: 'No records found'\n        };\n    };\n    Schedule.prototype.wireEvents = function () {\n        EventHandler.add(window, 'resize', this.onScheduleResize, this);\n        EventHandler.add(window, 'orientationchange', this.onScheduleResize, this);\n        EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n    };\n    /**\n     * Method to remove selected class\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.removeSelectedClass = function () {\n        var selectedCells = this.getSelectedCells();\n        for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n            var cell = selectedCells_1[_i];\n            if (this.currentView !== 'Year') {\n                cell.setAttribute('aria-selected', 'false');\n            }\n            cell.removeAttribute('tabindex');\n        }\n        removeClass(selectedCells, SELECTED_CELL_CLASS);\n        if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {\n            this.keyboardInteractionModule.selectedCells = [];\n        }\n    };\n    /**\n     * Method to add selected class\n     *\n     * @param {HTMLTableCellElement[]} cells Accepts the collection of elements\n     * @param {HTMLTableCellElement} focusCell Accepts the focus element\n     * @param {boolean} isPreventScroll Accepts the boolean value to prevent scroll\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.addSelectedClass = function (cells, focusCell, isPreventScroll) {\n        if (this.currentView !== 'Year') {\n            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n                var cell = cells_1[_i];\n                cell.setAttribute('aria-selected', 'true');\n            }\n        }\n        addClass(cells, SELECTED_CELL_CLASS);\n        if (focusCell) {\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus({ preventScroll: isPreventScroll || false });\n        }\n    };\n    /**\n     * Method to select cell\n     *\n     * @param {HTMLElement | HTMLTableCellElement} element Accepts the select element\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.selectCell = function (element) {\n        this.removeSelectedClass();\n        this.addSelectedClass([element], element);\n    };\n    /**\n     * Method to get all day row element\n     *\n     * @returns {Element} Returns the all day row element\n     * @private\n     */\n    Schedule.prototype.getAllDayRow = function () {\n        return this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n    };\n    /**\n     * Method to get content table element\n     *\n     * @returns {HTMLElement} Returns the content table element\n     * @private\n     */\n    Schedule.prototype.getContentTable = function () {\n        return this.activeView.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n    };\n    /**\n     * Method to get all content table rows\n     *\n     * @returns {HTMLElement[]} Returns the content table rows\n     * @private\n     */\n    Schedule.prototype.getTableRows = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr:not(.' + HIDDEN_CLASS + ')'));\n    };\n    /**\n     * Method to get work cell elements\n     *\n     * @returns {Element[]} Returns the all work cell elements\n     * @private\n     */\n    Schedule.prototype.getWorkCellElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n    };\n    /**\n     * Method to get the index from date collection\n     *\n     * @param {Date[]} collection Accepts the collections of date\n     * @param {Date} date Accepts the date object\n     * @returns {number} Returns the index compared date with date collections\n     * @private\n     */\n    Schedule.prototype.getIndexOfDate = function (collection, date) {\n        return collection.map(Number).indexOf(+date);\n    };\n    /**\n     * Method to find all day cell\n     *\n     * @param {Element} td Accepts the DOM Element\n     * @returns {boolean} Returns the boolean value\n     * @private\n     */\n    Schedule.prototype.isAllDayCell = function (td) {\n        if (['Month', 'TimelineMonth', 'TimelineYear', 'MonthAgenda'].indexOf(this.currentView) > -1 ||\n            td.classList.contains(ALLDAY_CELLS_CLASS) ||\n            td.classList.contains(HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n            return true;\n        }\n        if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 &&\n            this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Method to get date from element\n     *\n     * @param {Element} td Accepts the DOM element\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getDateFromElement = function (td) {\n        var dateString;\n        if (!isNullOrUndefined(td)) {\n            dateString = td.getAttribute('data-date');\n        }\n        if (!isNullOrUndefined(dateString)) {\n            var dateInMS = parseInt(dateString, 10);\n            var date = new Date(dateInMS);\n            return date;\n        }\n        return undefined;\n    };\n    /**\n     * Method to get target element from given selector\n     *\n     * @param {string} selector Accepts the element selector\n     * @param {number} left Accepts the pageX value\n     * @param {number} top Accepts the pageY value\n     * @returns {Element[]} Returns the collection of elements based on the given selector\n     * @private\n     */\n    Schedule.prototype.getTargetElement = function (selector, left, top) {\n        var element = document.elementFromPoint(left, top);\n        var targetElement;\n        if (element) {\n            targetElement = element.closest(selector);\n        }\n        return (targetElement) ? [targetElement] : null;\n    };\n    /**\n     * Method to process cell header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getCellHeaderTemplate = function () {\n        return this.cellHeaderTemplateFn;\n    };\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getDayHeaderTemplate = function () {\n        return this.dayHeaderTemplateFn;\n    };\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMonthHeaderTemplate = function () {\n        return this.monthHeaderTemplateFn;\n    };\n    /**\n     * Method to process cell template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getCellTemplate = function () {\n        return this.cellTemplateFn;\n    };\n    /**\n     * Method to process date header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getDateHeaderTemplate = function () {\n        return this.dateHeaderTemplateFn;\n    };\n    /**\n     * Method to process date range template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getDateRangeTemplate = function () {\n        return this.dateRangeTemplateFn;\n    };\n    /**\n     * Method to process major slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMajorSlotTemplate = function () {\n        return this.majorSlotTemplateFn;\n    };\n    /**\n     * Method to process minor slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMinorSlotTemplate = function () {\n        return this.minorSlotTemplateFn;\n    };\n    /**\n     * Method to process appointment template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getAppointmentTemplate = function () {\n        return this.appointmentTemplateFn;\n    };\n    /**\n     * Method to process appointment tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEventTooltipTemplate = function () {\n        return this.eventTooltipTemplateFn;\n    };\n    /**\n     * Method to process header tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getHeaderTooltipTemplate = function () {\n        return this.headerTooltipTemplateFn;\n    };\n    /**\n     * Method to process editor template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEditorTemplate = function () {\n        return this.editorTemplateFn;\n    };\n    /**\n     * Method to process quick info header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesHeader = function () {\n        return this.quickInfoTemplatesHeaderFn;\n    };\n    /**\n     * Method to process quick info content template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesContent = function () {\n        return this.quickInfoTemplatesContentFn;\n    };\n    /**\n     * Method to process quick info footer template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesFooter = function () {\n        return this.quickInfoTemplatesFooterFn;\n    };\n    /**\n     * Method to process resource header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getResourceHeaderTemplate = function () {\n        return this.resourceHeaderTemplateFn;\n    };\n    /**\n     * Method to process indent template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getHeaderIndentTemplate = function () {\n        return this.headerIndentTemplateFn;\n    };\n    /**\n     * Method to get dynamic CSS properties\n     *\n     * @returns {ScrollCss} Returns the CSS properties dynamically\n     * @private\n     */\n    Schedule.prototype.getCssProperties = function () {\n        var cssProps = {\n            border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n            padding: this.enableRtl ? 'paddingLeft' : 'paddingRight',\n            rtlBorder: this.enableRtl ? 'borderRightWidth' : 'borderLeftWidth',\n            rtlPadding: this.enableRtl ? 'paddingRight' : 'paddingLeft'\n        };\n        return cssProps;\n    };\n    /**\n     * Method to remove new event element in adaptive mode\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.removeNewEventElement = function () {\n        var eventClone = this.element.querySelector('.' + NEW_EVENT_CLASS);\n        if (!isNullOrUndefined(eventClone)) {\n            remove(eventClone);\n        }\n    };\n    /**\n     * Method to get start end time from string\n     *\n     * @param {string} startEndTime Accepts the start end time string value\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getStartEndTime = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = resetTime(new Date(this.currentTimezoneDate) || this.getCurrentTime());\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return null;\n    };\n    Schedule.prototype.onDocumentClick = function (args) {\n        this.notify(documentClick, { event: args });\n    };\n    Schedule.prototype.onScheduleResize = function () {\n        if (isNullOrUndefined(this.activeView) || ((this.isAdaptive || isMobile()) && document.activeElement\n            && document.activeElement.classList.contains(SUBJECT_CLASS))) {\n            return;\n        }\n        if (this.activeViewOptions.timeScale.enable && this.activeView) {\n            this.activeView.highlightCurrentTime();\n        }\n        if (this.quickPopup) {\n            this.quickPopup.onClosePopup();\n        }\n        if (this.currentView === 'Month' || ((this.currentView !== 'Agenda' && this.currentView !== 'MonthAgenda')\n            && !this.activeViewOptions.timeScale.enable) || this.activeView.isTimelineView()) {\n            this.activeView.resetColWidth();\n            this.notify(scrollUiUpdate, { cssProperties: this.getCssProperties(), isPreventScrollUpdate: true });\n            this.refreshEvents(false);\n        }\n        else {\n            this.notify(contentReady, {});\n        }\n    };\n    /**\n     * Method to process the templates\n     *\n     * @param {string} template Accepts the template in string\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Retrieves the selected cells.\n     *\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     * @private\n     */\n    Schedule.prototype.getSelectedCells = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + SELECTED_CELL_CLASS));\n    };\n    /**\n     * Method to generate the announcement string\n     *\n     * @param {Object} event Accepts the event object\n     * @param {string} subject Accepts the subject text\n     * @returns {string} Returns the announcement string\n     * @private\n     */\n    Schedule.prototype.getAnnouncementString = function (event, subject) {\n        var resourceName;\n        if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {\n            var constantText = '\"s event - ';\n            resourceName = this.quickPopup.getResourceText({ event: event }, 'event') + constantText;\n        }\n        var recordSubject = (subject || (event[this.eventFields.subject] || this.eventSettings.fields.subject.default));\n        var skeleton = 'full';\n        var startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var announcementString = recordSubject + ' ' + this.localeObj.getConstant('beginFrom') + ' '\n            + startDateText + ' ' + this.localeObj.getConstant('endAt') + ' ' + endDateText;\n        if (resourceName) {\n            announcementString = resourceName + ' ' + announcementString;\n        }\n        return announcementString;\n    };\n    /**\n     * Method to process the element boundary validation\n     *\n     * @param {number} pageY Accepts the pageY value\n     * @param {number} pageX Accepts the pageX value\n     * @returns {ResizeEdges} Returns the boundary validation object\n     * @private\n     */\n    Schedule.prototype.boundaryValidation = function (pageY, pageX) {\n        var autoScrollDistance = 30;\n        var scrollEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.element.querySelector('.' + CONTENT_WRAP_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            scrollEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            scrollEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            scrollEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            scrollEdges.right = true;\n        }\n        return scrollEdges;\n    };\n    /**\n     * Method to get the week number.\n     *\n     * @param {Date[]} dates Accepts the date collections\n     * @returns {number} Returns the week number\n     * @private\n     */\n    Schedule.prototype.getWeekNumberContent = function (dates) {\n        var weekNumber;\n        if (this.weekRule === 'FirstDay') {\n            var weekNumberDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = this.globalize.formatNumber(getWeekNumber(weekNumberDate));\n        }\n        else if (this.weekRule === 'FirstFourDayWeek') {\n            var weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            var weekLastDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            var weekMidDate = getWeekMiddleDate(weekFirstDate, weekLastDate);\n            weekNumber = this.globalize.formatNumber(getWeekNumber(weekMidDate));\n        }\n        else if (this.weekRule === 'FirstFullWeek') {\n            var weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = this.globalize.formatNumber(getWeekNumber(weekFirstDate));\n        }\n        return weekNumber;\n    };\n    /**\n     * Method to render the header indent template.\n     *\n     * @param {TdData} data Accepts the td data\n     * @param {Element} td Accepts the td element\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderHeaderIndentTemplate = function (data, td) {\n        if (this.activeViewOptions.headerIndentTemplate) {\n            var scheduleId = this.element.id + '_';\n            var viewName = this.activeViewOptions.headerIndentTemplateName;\n            var templateId = scheduleId + viewName + 'headerIndentTemplate';\n            var indentTemplate = [].slice.call(this.getHeaderIndentTemplate()(data, this, 'headerIndentTemplate', templateId, false));\n            append(indentTemplate, td);\n        }\n    };\n    /**\n     * Method to check for refreshing the targeted resource row events.\n     *\n     * @returns {boolean} Returns the boolean value\n     * @private\n     */\n    Schedule.prototype.isSpecificResourceEvents = function () {\n        return this.activeViewOptions.group.resources.length > 0 && !this.activeViewOptions.group.allowGroupEdit &&\n            !this.rowAutoHeight && !this.virtualScrollModule && this.activeViewOptions.group.byGroupID;\n    };\n    Schedule.prototype.unWireEvents = function () {\n        EventHandler.remove(window, 'resize', this.onScheduleResize);\n        EventHandler.remove(window, 'orientationchange', this.onScheduleResize);\n        EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n    };\n    /**\n     * Core method to return the component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    Schedule.prototype.getModuleName = function () {\n        return 'schedule';\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance data\n     * @private\n     */\n    Schedule.prototype.getPersistData = function () {\n        return this.addOnPersist(['currentView', 'selectedDate', 'scrollTop', 'scrollLeft']);\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isReact && isNullOrUndefined(this.activeView)) {\n            return;\n        }\n        var state = {\n            isRefresh: false, isResource: false, isDate: false, isView: false, isLayout: false, isDataManager: false\n        };\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'views':\n                    this.setViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateItems();\n                    }\n                    state.isView = true;\n                    break;\n                case 'currentView':\n                    state.isView = true;\n                    break;\n                case 'minDate':\n                case 'maxDate':\n                case 'selectedDate':\n                    state.isDate = true;\n                    break;\n                case 'dateFormat':\n                    this.activeViewOptions = this.getActiveViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange();\n                    }\n                    break;\n                case 'showHeaderBar':\n                    this.destroyHeaderModule();\n                    if (newProp.showHeaderBar) {\n                        this.headerModule = new HeaderRenderer(this);\n                        this.headerModule.updateDateRange();\n                    }\n                    this.notify(scrollUiUpdate, { cssProperties: this.getCssProperties() });\n                    if (this.activeView.isTimelineView()) {\n                        this.refreshEvents(false);\n                    }\n                    break;\n                case 'workDays':\n                    if (JSON.stringify(oldProp.workDays) !== JSON.stringify(newProp.workDays)) {\n                        state.isLayout = true;\n                    }\n                    break;\n                case 'showWeekend':\n                case 'startHour':\n                case 'endHour':\n                case 'workHours':\n                case 'readonly':\n                case 'headerRows':\n                case 'showWeekNumber':\n                case 'rowAutoHeight':\n                    state.isLayout = true;\n                    break;\n                case 'locale':\n                case 'calendarMode':\n                    this.globalize = new Internationalization(this.locale);\n                    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n                    this.setCldrTimeFormat();\n                    this.setCalendarMode();\n                    state.isRefresh = true;\n                    break;\n                case 'firstDayOfWeek':\n                    this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;\n                    if (this.eventWindow) {\n                        this.eventWindow.refreshRecurrenceEditor();\n                    }\n                    state.isLayout = true;\n                    break;\n                case 'showTimeIndicator':\n                    if (this.activeViewOptions.timeScale.enable && this.activeView) {\n                        this.activeView.highlightCurrentTime();\n                    }\n                    break;\n                case 'cellHeaderTemplate':\n                    this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;\n                    this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'cellTemplate':\n                    this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n                    this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateHeaderTemplate':\n                    this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n                    this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateRangeTemplate':\n                    this.activeViewOptions.dateRangeTemplate = newProp.dateRangeTemplate;\n                    this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange();\n                    }\n                    break;\n                case 'dayHeaderTemplate':\n                    this.activeViewOptions.dayHeaderTemplate = newProp.dayHeaderTemplate;\n                    this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'monthHeaderTemplate':\n                    this.activeViewOptions.monthHeaderTemplate = newProp.monthHeaderTemplate;\n                    this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'resourceHeaderTemplate':\n                    this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;\n                    this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'timezone':\n                    this.eventBase.timezonePropertyChange(oldProp.timezone);\n                    this.headerModule.setCalendarTimezone();\n                    break;\n                case 'enableRtl':\n                    this.setRtlClass();\n                    state.isRefresh = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, oldProp, state);\n                    break;\n            }\n        }\n        this.propertyChangeAction(state);\n    };\n    Schedule.prototype.propertyChangeAction = function (state) {\n        if (state.isRefresh) {\n            this.refresh();\n        }\n        else if (state.isResource) {\n            this.initializeResources(true);\n        }\n        else if (state.isView) {\n            this.changeView(this.currentView, null, true);\n        }\n        else if (state.isDate) {\n            this.changeDate(this.selectedDate);\n        }\n        else if (state.isLayout) {\n            this.activeCellsData = null;\n            this.initializeView(this.currentView);\n        }\n        else if (state.isDataManager && this.crudModule) {\n            if (this.dragAndDropModule) {\n                this.dragAndDropModule.actionObj.action = '';\n                removeClass([this.element], EVENT_ACTION_CLASS);\n            }\n            this.crudModule.refreshDataManager();\n        }\n    };\n    Schedule.prototype.allDayRowScrollUpdate = function () {\n        var dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        var allDayRow = this.element.querySelector('.' + ALLDAY_ROW_CLASS);\n        if (this.height === 'auto' || !this.enableAllDayScroll) {\n            addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n            if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_SCROLL)) {\n                removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);\n            }\n            if (this.uiStateValues.expand) {\n                var allDayCells = [].slice.call(this.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS));\n                allDayCells[0].style.height = (allDayRow.style.height) ? allDayRow.style.height : allDayCells[1].style.height;\n            }\n        }\n        else {\n            if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_AUTO)) {\n                removeClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);\n            }\n            this.eventBase.allDayExpandScroll(dateHeader);\n        }\n        if (!this.uiStateValues.expand) {\n            allDayRow.style.height = '';\n        }\n    };\n    Schedule.prototype.extendedPropertyChange = function (prop, newProp, oldProp, state) {\n        switch (prop) {\n            case 'width':\n            case 'height':\n            case 'enableAllDayScroll':\n                if (['Day', 'Week', 'WorkWeek'].indexOf(this.currentView) > -1) {\n                    this.allDayRowScrollUpdate();\n                }\n                this.notify(uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                break;\n            case 'cssClass':\n                if (oldProp.cssClass) {\n                    removeClass([this.element], oldProp.cssClass.split(' '));\n                }\n                if (newProp.cssClass) {\n                    addClass([this.element], newProp.cssClass.split(' '));\n                }\n                break;\n            case 'hideEmptyAgendaDays':\n            case 'agendaDaysCount':\n                this.activeViewOptions = this.getActiveViewOptions();\n                state.isView = true;\n                break;\n            case 'eventSettings':\n                this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n                break;\n            case 'allowKeyboardInteraction':\n                if (this.keyboardInteractionModule) {\n                    this.keyboardInteractionModule.destroy();\n                    this.keyboardInteractionModule = null;\n                }\n                if (newProp.allowKeyboardInteraction) {\n                    this.keyboardInteractionModule = new KeyboardInteraction(this);\n                }\n                break;\n            case 'timezoneDataSource':\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n                break;\n            case 'editorTemplate':\n                if (!isNullOrUndefined(this.editorTemplate)) {\n                    this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogContent();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickInfoTemplates.header) {\n                    this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                }\n                if (this.quickInfoTemplates.content) {\n                    this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                }\n                if (this.quickInfoTemplates.footer) {\n                    this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                }\n                break;\n            case 'group':\n                this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n                break;\n            case 'resources':\n                state.isResource = true;\n                break;\n            case 'timeScale':\n                this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n                this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'allowDragAndDrop':\n            case 'allowResizing':\n            case 'eventDragArea':\n                this.refreshEvents(false);\n                break;\n            case 'weekRule':\n                state.isLayout = true;\n                break;\n            case 'firstMonthOfYear':\n                this.activeViewOptions.firstMonthOfYear = newProp.firstMonthOfYear;\n                this.viewIndex = this.activeView.viewIndex;\n                state.isLayout = true;\n                break;\n            case 'monthsCount':\n                this.activeViewOptions.monthsCount = newProp.monthsCount;\n                this.viewIndex = this.activeView.viewIndex;\n                state.isLayout = true;\n                break;\n            case 'timeFormat':\n                this.internalTimeFormat = newProp.timeFormat || this.activeViewOptions.timeFormat;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'enableAdaptiveUI':\n                if (this.showHeaderBar && this.headerModule) {\n                    this.destroyHeaderModule();\n                    this.headerModule = new HeaderRenderer(this);\n                    this.headerModule.updateDateRange();\n                }\n                state.isLayout = true;\n                break;\n            case 'headerIndentTemplate':\n                this.activeViewOptions.headerIndentTemplate = newProp.headerIndentTemplate;\n                this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n                state.isLayout = true;\n                break;\n        }\n    };\n    Schedule.prototype.setRtlClass = function () {\n        if (this.enableRtl) {\n            addClass([this.element], 'e-rtl');\n        }\n        else {\n            removeClass([this.element], 'e-rtl');\n        }\n    };\n    Schedule.prototype.onGroupSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            if (prop === 'headerTooltipTemplate') {\n                this.headerTooltipTemplateFn = this.templateParser(newProp.headerTooltipTemplate);\n            }\n            else {\n                state.isLayout = true;\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n            }\n        }\n    };\n    Schedule.prototype.onEventSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'dataSource':\n                case 'query':\n                case 'fields':\n                case 'includeFiltersInQuery':\n                    this.initializeDataModule();\n                    state.isDataManager = true;\n                    break;\n                case 'template':\n                    this.activeViewOptions.eventTemplate = newProp.template;\n                    this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                    state.isDataManager = true;\n                    break;\n                case 'enableTooltip':\n                    if (this.eventTooltip) {\n                        this.eventTooltip.destroy();\n                        this.eventTooltip = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.eventTooltip = new EventTooltip(this);\n                    }\n                    break;\n                case 'tooltipTemplate':\n                    this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                    break;\n                case 'resourceColorField':\n                    if (this.resourceBase) {\n                        this.resourceBase.setResourceCollection();\n                    }\n                    state.isDataManager = true;\n                    break;\n                case 'editFollowingEvents':\n                    if (this.quickPopup) {\n                        this.quickPopup.refreshQuickDialog();\n                    }\n                    break;\n                case 'allowAdding':\n                case 'allowEditing':\n                case 'allowDeleting':\n                    if (this.showHeaderBar && this.headerModule) {\n                        this.headerModule.updateAddIcon();\n                    }\n                    if (this.eventWindow) {\n                        this.eventWindow.refresh();\n                    }\n                    break;\n                case 'spannedEventPlacement':\n                case 'minimumEventDuration':\n                case 'enableMaxHeight':\n                case 'enableIndicator':\n                    this.refreshEvents(false);\n                    break;\n                case 'ignoreWhitespace':\n                    state.isLayout = true;\n                    break;\n            }\n        }\n    };\n    Schedule.prototype.destroyHeaderModule = function () {\n        if (this.headerModule) {\n            this.headerModule.destroy();\n            this.headerModule = null;\n        }\n    };\n    Schedule.prototype.destroyPopups = function () {\n        if (this.quickPopup) {\n            this.quickPopup.destroy();\n            this.quickPopup = null;\n        }\n        if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n        }\n    };\n    /**\n     * Allows to show the spinner on schedule at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n     *  as its parameters.\n     *\n     * @function setWorkHours\n     * @param {Date} dates Collection of dates on which the given start and end hour range needs to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.setWorkHours = function (dates, start, end, groupIndex) {\n        var cells = [];\n        cells = this.getWorkHourCells(dates, start, end, groupIndex);\n        addClass(cells, WORK_HOURS_CLASS);\n    };\n    /**\n     * Removes or resets different working hours on the required working days by accepting the required start and end time as well as the\n     * date collection as its parameters.\n     * if no parameters has been passed to this function, it will remove all the work hours.\n     *\n     * @param {Date} dates Collection of dates on which the given start and end hour range need to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.resetWorkHours = function (dates, start, end, groupIndex) {\n        if (dates === void 0) { dates = this.activeView.renderDates; }\n        if (dates && start && end) {\n            var cells = this.getWorkHourCells(dates, start, end, groupIndex);\n            removeClass(cells, WORK_HOURS_CLASS);\n        }\n        else {\n            var workHourCells = [].slice.call(this.element.querySelectorAll('.' + WORK_HOURS_CLASS));\n            removeClass(workHourCells, WORK_HOURS_CLASS);\n        }\n    };\n    Schedule.prototype.getWorkHourCells = function (dates, start, end, groupIndex) {\n        if (['Agenda', 'MonthAgenda', 'Month', 'TimelineMonth'].indexOf(this.currentView) > -1) {\n            return [];\n        }\n        var startHour = this.getStartEndTime(start);\n        var endHour = this.getStartEndTime(end);\n        var tableEle = this.getContentTable();\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n            return [];\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        var viewStartHour = this.activeView.getStartHour();\n        if (startHour < viewStartHour) {\n            startHour = viewStartHour;\n        }\n        var viewEndHour = this.activeView.getEndHour();\n        if (endHour > viewEndHour) {\n            endHour = viewEndHour;\n        }\n        var msMajorInterval = this.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n        var startIndex = Math.round((startHour.getTime() - viewStartHour.getTime()) / msInterval);\n        var endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime()) / msInterval);\n        var tempStartIndex = startIndex;\n        var tempEndIndex = endIndex;\n        var cells = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            date = this.getDateTime(date);\n            resetTime(date);\n            var renderDates = this.activeView.renderDates;\n            if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n                renderDates = this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)].renderDates;\n            }\n            var colIndex = this.getIndexOfDate(renderDates, date);\n            if (colIndex >= 0) {\n                if (this.activeView.isTimelineView()) {\n                    var slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);\n                    startIndex = tempStartIndex + (colIndex * slotsPerDay);\n                    endIndex = tempEndIndex + (colIndex * slotsPerDay);\n                }\n                for (var i = startIndex; i < endIndex; i++) {\n                    if (this.activeView.isTimelineView()) {\n                        var rowIndex = (!isNullOrUndefined(groupIndex)) ? groupIndex : 0;\n                        cells.push(tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[parseInt(i.toString(), 10)]);\n                    }\n                    else {\n                        if (!isNullOrUndefined(groupIndex)) {\n                            var selector = '.' + WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]';\n                            var tds = [].slice.call(tableEle.rows[parseInt(i.toString(), 10)].querySelectorAll(selector));\n                            cells.push(tds[parseInt(colIndex.toString(), 10)]);\n                        }\n                        else {\n                            cells.push(tableEle.rows[parseInt(i.toString(), 10)].cells[parseInt(colIndex.toString(), 10)]);\n                        }\n                    }\n                }\n            }\n        }\n        return cells;\n    };\n    /**\n     * Retrieves the start and end time information of the specific cell element.\n     *\n     * @function getCellDetails\n     * @param {Element | Element[]} tdCol Accepts the single or collection of elements.\n     * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML element will be returned.\n     */\n    Schedule.prototype.getCellDetails = function (tdCol) {\n        var td = (tdCol instanceof Array) ? tdCol : [tdCol];\n        var firstTd = getElement(td[0]);\n        var lastTd = getElement(td.slice(-1)[0]);\n        var startTime = this.getDateFromElement(firstTd);\n        var endTime = this.getDateFromElement(lastTd);\n        if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n            return undefined;\n        }\n        var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan')) &&\n            this.headerRows.length > 0;\n        var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n        if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(ALLDAY_CELLS_CLASS) ||\n            lastTd.classList.contains(HEADER_CELLS_CLASS)) {\n            endTime = addDays(new Date(endTime.getTime()), duration);\n        }\n        else {\n            endTime = this.activeView.getEndDateFromStartDate(endTime);\n        }\n        var data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: this.isAllDayCell(firstTd),\n            element: tdCol\n        };\n        var groupIndex = firstTd.getAttribute('data-group-index');\n        if (!isNullOrUndefined(groupIndex)) {\n            data.groupIndex = parseInt(groupIndex, 10);\n        }\n        return data;\n    };\n    /**\n     * Retrieves the selected cell elements.\n     *\n     * @function getSelectedElements\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     */\n    Schedule.prototype.getSelectedElements = function () {\n        if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {\n            return this.keyboardInteractionModule.selectedCells;\n        }\n        return this.getSelectedCells();\n    };\n    /**\n     * To get the resource collection\n     *\n     * @function getResourceCollections\n     * @returns {ResourcesModel[]} Returns the resource collections\n     */\n    Schedule.prototype.getResourceCollections = function () {\n        return this.resourceCollection;\n    };\n    /**\n     * To set the resource collection\n     *\n     * @function setResourceCollections\n     * @param {ResourcesModel[]} resourceCol Accepts the resource collections in ResourcesModel type\n     * @returns {void}\n     */\n    Schedule.prototype.setResourceCollections = function (resourceCol) {\n        this.setProperties({ resources: resourceCol }, false);\n    };\n    /**\n     * Current View could be change based on the provided parameters.\n     *\n     * @function changeCurrentView\n     * @param {View} viewName Accept the view in the viewCollections.\n     * @param {number} viewIndex Accept the viewIndex in the viewCollections.\n     * @returns {void}\n     */\n    Schedule.prototype.changeCurrentView = function (viewName, viewIndex) {\n        var index = this.getViewIndex(viewName);\n        var view = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n        var viewOptions = this.viewOptions[\"\" + view];\n        if (viewOptions) {\n            index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);\n        }\n        if (index === -1 || index === this.viewIndex) {\n            return;\n        }\n        this.changeView(viewName, null, null, index);\n    };\n    /**\n     * Return the current view Index.\n     *\n     * @function getCurrentViewIndex\n     * @returns {number} Returns the view index\n     */\n    Schedule.prototype.getCurrentViewIndex = function () {\n        return this.viewIndex;\n    };\n    /**\n     * Retrieves the resource details based on the provided resource index.\n     *\n     * @param {number} index index of the resources at the last level.\n     * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n     */\n    Schedule.prototype.getResourcesByIndex = function (index) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n                return undefined;\n            }\n            var data = this.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n            var groupData = {};\n            this.resourceBase.setResourceValues(groupData, index);\n            return { resource: data.resource, resourceData: data.resourceData, groupData: groupData };\n        }\n        return undefined;\n    };\n    /**\n     * This method allows to expand the resource that available on the scheduler.\n     *\n     * @function expandResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.expandResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, false);\n        }\n    };\n    /**\n     * This method allows to collapse the resource that available on the scheduler.\n     *\n     * @function collapseResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.collapseResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, true);\n        }\n    };\n    /**\n     * Scrolls the Schedule content area to the specified time.\n     *\n     * @function scrollTo\n     * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n     * @param {Date} scrollDate Accepts the date object value.\n     * @returns {void}\n     */\n    Schedule.prototype.scrollTo = function (hour, scrollDate) {\n        if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {\n            this.activeView.scrollToDate(scrollDate);\n        }\n        else if (this.activeView.scrollToHour) {\n            this.activeView.scrollToHour(hour, scrollDate);\n        }\n    };\n    /**\n     * This method allows scroll to the position of the any resources that available on the scheduler.\n     * This method is applicable for without Agenda and Month agenda views of the schedule.\n     *\n     * @function scrollToResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} groupName Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.scrollToResource = function (resourceId, groupName) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            this.resourceBase.resourceScroll(resourceId, groupName);\n        }\n    };\n    /**\n     * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n     * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n     *\n     * @function exportToICalendar\n     * @param {string} fileName Accepts the string value.\n     * @param {Object[]} customData Accepts the collection of objects.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToICalendar = function (fileName, customData) {\n        if (this.iCalendarExportModule) {\n            this.iCalendarExportModule.initializeCalendarExport(fileName, customData);\n        }\n        else {\n            throw Error('Inject ICalendarExport module');\n        }\n    };\n    /**\n     * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n     * This method accepts the blob object or string format of an .ics file to be imported as a mandatory argument.\n     *\n     * @function importICalendar\n     * @param {Blob | string} fileContent Accepts the file object or string format of an .ics file.\n     * @returns {void}\n     */\n    Schedule.prototype.importICalendar = function (fileContent) {\n        if (this.iCalendarImportModule) {\n            this.iCalendarImportModule.initializeCalendarImport(fileContent);\n        }\n        else {\n            throw Error('Inject ICalendarImport module');\n        }\n    };\n    /**\n     * Adds the newly created event into the Schedule dataSource.\n     *\n     * @function addEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n     * @returns {void}\n     */\n    Schedule.prototype.addEvent = function (data) {\n        this.crudModule.addEvent(data);\n    };\n    /**\n     * Generates the occurrences of a single recurrence event based on the provided event.\n     *\n     * @function generateEventOccurrences\n     * @param {Object} event Accepts the parent recurrence event from which the occurrences are generated.\n     * @param {Date} startDate Accepts the start date for the event occurrences. If not provided, the event's start date will be used.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n    Schedule.prototype.generateEventOccurrences = function (event, startDate) {\n        return (this.eventBase) ? this.eventBase.generateOccurrence(event, startDate) : [];\n    };\n    /**\n     * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n     * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n     * To export only the specific events of Scheduler, you need to pass the custom data collection as\n     * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n     * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n     * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n     * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n     * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n     * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n     * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n     *\n     * @function exportToExcel\n     * @param {ExportOptions} excelExportOptions The export options to be set before start with exporting the Scheduler events to an Excel file.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToExcel = function (excelExportOptions) {\n        if (this.excelExportModule) {\n            this.excelExportModule.initializeExcelExport(excelExportOptions);\n        }\n        else {\n            throw Error('Inject ExcelExport module');\n        }\n    };\n    /**\n     * Method allows to print the scheduler.\n     *\n     * @function print\n     * @param {ScheduleModel} printOptions The export options to be set before start with exporting\n     * the Scheduler events to the print window.\n     * @returns {void}\n     */\n    Schedule.prototype.print = function (printOptions) {\n        if (this.printModule) {\n            this.printModule.print(printOptions);\n        }\n        else {\n            throw Error('Inject Print module');\n        }\n    };\n    /**\n     * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n     *\n     * @function saveEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be saved into Schedule.\n     * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n     *  The valid current action names are `EditOccurrence` or `EditSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.saveEvent = function (data, currentAction) {\n        this.crudModule.saveEvent(data, currentAction);\n    };\n    /**\n     * Deletes the events based on the provided ID or event collection in the argument list.\n     *\n     * @function deleteEvent\n     * @param {string | number | Object | Object[]} id Accepts the ID as string or number type or single or collection of the event object which needs to be removed from the Schedule.\n     * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n     *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.deleteEvent = function (id, currentAction) {\n        this.crudModule.deleteEvent(id, currentAction);\n    };\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     *\n     * @function getEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of event objects from the Schedule.\n     */\n    Schedule.prototype.getEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents();\n        }\n        else {\n            eventCollections = this.eventsData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the entire collection of block events bound to the Schedule.\n     *\n     * @function getBlockEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of block event objects from the Schedule.\n     */\n    Schedule.prototype.getBlockEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents(this.blockData);\n        }\n        else {\n            eventCollections = this.blockData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n     *\n     * @function getOccurrencesByID\n     * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n    Schedule.prototype.getOccurrencesByID = function (eventID) {\n        return this.eventBase.getOccurrencesByID(eventID);\n    };\n    /**\n     * Retrieves all the occurrences that lies between the specific start and end time range.\n     *\n     * @function getOccurrencesByRange\n     * @param {Date} startTime Denotes the start time range.\n     * @param {Date} endTime Denotes the end time range.\n     * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n     */\n    Schedule.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        startTime = this.getDateTime(startTime);\n        endTime = this.getDateTime(endTime);\n        return this.eventBase.getOccurrencesByRange(startTime, endTime);\n    };\n    /**\n     * Retrieves the dates that lies on active view of Schedule.\n     *\n     * @function getCurrentViewDates\n     * @returns {Date[]} Returns the collection of dates.\n     */\n    Schedule.prototype.getCurrentViewDates = function () {\n        return this.activeView ? this.activeView.renderDates : [];\n    };\n    /**\n     * Set the recurrence editor instance from custom editor template.\n     *\n     * @function setRecurrenceEditor\n     * @param {RecurrenceEditor} recurrenceEditor instance has passed to fetch the instance in event window.\n     * @returns {void}\n     */\n    Schedule.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        this.eventWindow.setRecurrenceEditor(recurrenceEditor);\n    };\n    /**\n     * Get the maximum id of an event.\n     *\n     * @function getEventMaxID\n     * @returns {number | string} Returns the maximum ID from scheduler data collections.\n     */\n    Schedule.prototype.getEventMaxID = function () {\n        return this.eventBase.getEventMaxID();\n    };\n    /**\n     * Get deleted occurrences from given recurrence series.\n     *\n     * @function getDeletedOccurrences\n     * @param {string | number | Object} recurrenceData Accepts the parent ID of the event object or parent event object\n     * @returns {Object[]} Returns the collection of deleted occurrence events.\n     */\n    Schedule.prototype.getDeletedOccurrences = function (recurrenceData) {\n        return this.eventBase.getDeletedOccurrences(recurrenceData);\n    };\n    /**\n     * Retrieves the events that lies on the current date range of the active view of Schedule.\n     *\n     * @function getCurrentViewEvents\n     * @returns {Object[]} Returns the collection of events.\n     */\n    Schedule.prototype.getCurrentViewEvents = function () {\n        return this.eventsProcessed;\n    };\n    /**\n     * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n     *\n     * @function refreshEvents\n     * @param {boolean} isRemoteRefresh Accepts the boolean to refresh data from remote or local\n     * @returns {void}\n     */\n    Schedule.prototype.refreshEvents = function (isRemoteRefresh) {\n        if (isRemoteRefresh === void 0) { isRemoteRefresh = true; }\n        if (isRemoteRefresh) {\n            if (this.dragAndDropModule) {\n                this.dragAndDropModule.actionObj.action = '';\n                removeClass([this.element], EVENT_ACTION_CLASS);\n            }\n            this.crudModule.refreshDataManager();\n        }\n        else {\n            if (this.uiStateValues) {\n                this.uiStateValues.isPreventTimezone = true;\n            }\n            if (this.crudModule) {\n                this.crudModule.refreshProcessedData();\n            }\n            if (this.uiStateValues) {\n                this.uiStateValues.isPreventTimezone = false;\n            }\n        }\n    };\n    /**\n     * Method to refresh the given Schedule templates\n     *\n     * @param {string} templateName Accepts the template name\n     * @returns {void}\n     */\n    Schedule.prototype.refreshTemplates = function (templateName) {\n        if (templateName) {\n            this.resetTemplates([templateName]);\n        }\n        else {\n            this.resetTemplates();\n        }\n        switch (templateName) {\n            case 'eventTemplate':\n                this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                this.refreshEvents(false);\n                break;\n            case 'dateHeaderTemplate':\n                this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                this.activeView.refreshHeader();\n                break;\n            case 'dateRangeTemplate':\n                this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n                if (this.headerModule) {\n                    this.headerModule.refresh();\n                }\n                break;\n            case 'resourceHeaderTemplate':\n                this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                if (this.activeView.isTimelineView()) {\n                    this.activeView.refreshResourceHeader();\n                }\n                else {\n                    this.activeView.refreshHeader();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickPopup) {\n                    this.quickPopup.destroy();\n                    this.quickPopup = null;\n                }\n                this.quickPopup = new QuickPopups(this);\n                this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                break;\n            case 'editorTemplate':\n                if (this.eventWindow) {\n                    this.eventWindow.destroy();\n                    this.eventWindow = null;\n                }\n                this.eventWindow = new EventWindow(this);\n                this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                break;\n            case 'tooltipTemplate':\n            case 'headerTooltipTemplate':\n                if (this.eventTooltip) {\n                    this.eventTooltip.destroy();\n                    this.eventTooltip = null;\n                }\n                this.eventTooltip = new EventTooltip(this);\n                this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n                break;\n            default:\n                this.initializeView(this.currentView);\n                break;\n        }\n    };\n    /**\n     * Refreshes the Schedule layout without re-render.\n     *\n     * @function refreshLayout\n     * @returns {void}\n     */\n    Schedule.prototype.refreshLayout = function () {\n        this.onScheduleResize();\n        if (this.headerModule) {\n            this.headerModule.refresh();\n        }\n        if (this.eventWindow) {\n            this.eventWindow.refresh();\n        }\n    };\n    /**\n     * To retrieve the appointment object from element.\n     *\n     * @function getEventDetails\n     * @param {Element} element Denotes the event UI element on the Schedule.\n     * @returns {Object} Returns the event details.\n     */\n    Schedule.prototype.getEventDetails = function (element) {\n        element = getElement(element);\n        var guid = element.getAttribute('data-guid');\n        if (guid) {\n            return this.eventBase.getEventByGuid(guid);\n        }\n        return {};\n    };\n    /**\n     * To check whether the given time range slots are available for event creation or already occupied by other events.\n     *\n     * @function isSlotAvailable\n     * @param {Date | Object} startTime Denotes the start time of the slot.\n     * @param {Date} endTime Denotes the end time of the slot.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n     */\n    Schedule.prototype.isSlotAvailable = function (startTime, endTime, groupIndex) {\n        var _this = this;\n        var eventStart;\n        var eventEnd;\n        var eventObj = this.activeEventData.event;\n        if (startTime instanceof Date || typeof (startTime) === 'string') {\n            eventStart = startTime;\n            eventEnd = endTime;\n        }\n        else {\n            eventObj = startTime;\n            eventStart = startTime[this.eventFields.startTime];\n            eventEnd = startTime[this.eventFields.endTime];\n            if (this.resourceBase) {\n                groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);\n            }\n        }\n        if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {\n            return true;\n        }\n        eventStart = this.getDateTime(eventStart);\n        eventEnd = this.getDateTime(eventEnd);\n        var eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);\n        if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n            eventCollection =\n                this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)], eventCollection);\n        }\n        if (eventObj) {\n            if (eventObj.Guid) {\n                eventCollection = eventCollection.filter(function (event) { return event.Guid !== eventObj.Guid; });\n            }\n            else {\n                eventCollection = eventCollection.filter(function (event) {\n                    return event[_this.eventFields.id] !== eventObj[_this.eventFields.id];\n                });\n            }\n        }\n        return (eventCollection.length > 0) ? false : true;\n    };\n    /**\n     * To manually open the event editor on specific time or on certain events.\n     *\n     * @function openEditor\n     * @param {Object} data It can be either cell data or event data.\n     * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n     *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n     *  and `EditSeries`.\n     * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n     *  passed event details.\n     * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n     * @returns {void}\n     */\n    Schedule.prototype.openEditor = function (data, action, isEventData, repeatType) {\n        if (action === 'Add' && !isEventData) {\n            data.startTime = this.getDateTime(data.startTime);\n            data.endTime = this.getDateTime(data.endTime);\n            if (!isNullOrUndefined(data.element)) {\n                data.element = getElement(data.element);\n            }\n        }\n        else {\n            data[this.eventFields.startTime] = this.getDateTime(data[this.eventFields.startTime]);\n            data[this.eventFields.endTime] = this.getDateTime(data[this.eventFields.endTime]);\n        }\n        this.currentAction = action;\n        if (action !== 'Add') {\n            this.activeEventData.event = data;\n        }\n        this.eventWindow.openEditor(data, action, isEventData, repeatType);\n    };\n    /**\n     * To manually close the event editor window\n     *\n     * @function closeEditor\n     * @returns {void}\n     */\n    Schedule.prototype.closeEditor = function () {\n        if (this.eventWindow) {\n            this.eventWindow.dialogClose();\n        }\n    };\n    /**\n     * To manually open the quick info popup based on cell or event details.\n     *\n     * @param {object} data Defines the cell or event data. If the data contains valid ID, it will open event quick info popup,\n     * otherwise cell quick info popup displayed.\n     * @returns {void}\n     */\n    Schedule.prototype.openQuickInfoPopup = function (data) {\n        var _this = this;\n        if (this.currentView === 'Year' || isNullOrUndefined(data)) {\n            return;\n        }\n        if (isNullOrUndefined(data[this.eventFields.id])) {\n            if (this.currentView === 'Agenda' || this.currentView === 'MonthAgenda' || isNullOrUndefined(this.activeView)) {\n                return;\n            }\n            var cellData = {\n                startTime: this.activeCellsData.startTime = this.getDateTime(data[this.eventFields.startTime]),\n                endTime: this.activeCellsData.endTime = this.getDateTime(data[this.eventFields.endTime]),\n                isAllDay: this.activeCellsData.isAllDay =\n                    !isNullOrUndefined(data[this.eventFields.isAllDay]) ? data[this.eventFields.isAllDay] : false\n            };\n            var startTime = this.activeView.getAdjustedDate(new Date(cellData.startTime));\n            if (startTime) {\n                var query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + startTime.getTime() + '\"]';\n                if (this.activeViewOptions.group.resources.length > 0 && !this.uiStateValues.isGroupAdaptive\n                    && this.resourceBase && this.eventBase) {\n                    cellData.groupIndex = this.eventBase.getGroupIndexFromEvent(data);\n                    query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + startTime.getTime() + '\"][data-group-index=\"' + cellData.groupIndex + '\"]';\n                }\n                var workCell = this.element.querySelector(query);\n                if (workCell) {\n                    workCell.focus();\n                    cellData.element = workCell;\n                    this.notify(cellClick, cellData);\n                }\n            }\n        }\n        else {\n            var app = this.getCurrentViewEvents().filter(function (item) {\n                return data[_this.eventFields.id] === item[_this.eventFields.id];\n            });\n            if (app.length <= 0) {\n                return;\n            }\n            var selectEvent = app[0];\n            if (data[this.eventFields.recurrenceRule]) {\n                var occurence = app.filter(function (x) {\n                    return x[_this.eventFields.startTime].getTime() === data[_this.eventFields.startTime].getTime();\n                });\n                if (occurence.length > 0) {\n                    selectEvent = occurence[0];\n                }\n            }\n            var element = this.element.querySelector('div[data-guid=\"' + selectEvent.Guid + '\"]');\n            if (element) {\n                this.eventBase.removeSelectedAppointmentClass();\n                this.eventBase.addSelectedAppointments([element], false);\n                this.activeEventData = { event: selectEvent, element: element };\n                if (this.currentView === 'Agenda' || this.currentView === 'MonthAgenda') {\n                    addClass([this.activeEventData.element], AGENDA_SELECTED_CELL);\n                }\n                this.notify(eventClick, this.activeEventData);\n            }\n        }\n    };\n    /**\n     * To manually close the quick info popup\n     *\n     * @function closeQuickInfoPopup\n     * @returns {void}\n     */\n    Schedule.prototype.closeQuickInfoPopup = function () {\n        if (this.quickPopup) {\n            this.quickPopup.quickPopupHide(true);\n        }\n    };\n    /**\n     * Closes the tooltip.\n     * For example, when the context menu is opened for an event,\n     * the tooltip can be closed by calling this method.\n     *\n     * @function closeTooltip\n     * @returns {void}\n     */\n    Schedule.prototype.closeTooltip = function () {\n        if (this.eventTooltip) {\n            this.eventTooltip.close();\n        }\n    };\n    /**\n     * Select the resource based on group index in mobile mode.\n     *\n     * @param {number} groupIndex Defines the resource index based on last level.\n     * @returns {void}\n     */\n    Schedule.prototype.selectResourceByIndex = function (groupIndex) {\n        if (this.resourceBase && this.uiStateValues.isGroupAdaptive) {\n            this.resourceBase.selectResourceByIndex(groupIndex);\n        }\n    };\n    /**\n     * Select the resources to the based on id.\n     *\n     * @param {string | number} id id of the resource defined in resources collection.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @returns {number} Returns the group index\n     */\n    Schedule.prototype.getIndexFromResourceId = function (id, name) {\n        if (this.resourceBase) {\n            return this.resourceBase.getIndexFromResourceId(id, name);\n        }\n        return null;\n    };\n    /**\n     * Adds the resources to the specified index.\n     *\n     * @param {Object | Object[]} resources Accepts the resource data in single or collection of data.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @param {number} index Index or position where the resource should be added.\n     * @returns {void}\n     */\n    Schedule.prototype.addResource = function (resources, name, index) {\n        this.resourceBase.addResource(resources, name, index);\n    };\n    /**\n     * Removes the specified resource.\n     *\n     * @param {string | string[] | number | number[]} resourceId Specifies the resource id to be removed.\n     * @param {string} name Specifies the resource name from which the id should be referred.\n     * @returns {void}\n     */\n    Schedule.prototype.removeResource = function (resourceId, name) {\n        this.resourceBase.removeResource(resourceId, name);\n    };\n    /**\n     * Destroys the Schedule component.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Schedule.prototype.destroy = function () {\n        if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n        }\n        this.destroyPopups();\n        this.hideSpinner();\n        this.unWireEvents();\n        this.destroyHeaderModule();\n        if (this.eventBase) {\n            this.eventBase.destroy();\n            this.eventBase = null;\n        }\n        if (this.workCellAction) {\n            this.workCellAction.destroy();\n            this.workCellAction = null;\n        }\n        if (this.inlineModule) {\n            this.inlineModule.destroy();\n            this.inlineModule = null;\n        }\n        if (this.keyboardInteractionModule) {\n            this.keyboardInteractionModule.destroy();\n            this.keyboardInteractionModule = null;\n        }\n        if (this.scrollModule) {\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n        if (this.printModule) {\n            this.printModule.destroy();\n        }\n        if (this.activeView) {\n            this.resetTemplates();\n            this.activeView.removeEventListener();\n            this.activeView.destroy();\n            this.activeView = null;\n        }\n        if (this.scheduleTouchModule) {\n            this.scheduleTouchModule.destroy();\n            this.scheduleTouchModule = null;\n        }\n        if (this.crudModule) {\n            this.crudModule.destroy();\n            this.crudModule = null;\n        }\n        if (this.dataModule) {\n            this.dataModule.destroy();\n            this.dataModule = null;\n        }\n        _super.prototype.destroy.call(this);\n        var modules = [\n            'dayModule', 'weekModule', 'workWeekModule', 'monthModule', 'monthAgendaModule', 'yearModule', 'agendaModule',\n            'timelineViewsModule', 'timelineMonthModule', 'timelineYearModule', 'resizeModule', 'dragAndDropModule',\n            'excelExportModule', 'printModule', 'iCalendarExportModule', 'iCalendarImportModule', 'tzModule', 'eventsData',\n            'eventsProcessed', 'blockData', 'blockProcessed', 'uiStateValues', 'viewCollections', 'viewOptions', 'defaultLocale',\n            'localeObj', 'selectedElements', 'resourceCollection', 'editorTitles', 'eventFields', 'activeViewOptions',\n            'activeEventData', 'activeCellsData', 'renderModule'\n        ];\n        for (var _i = 0, modules_1 = modules; _i < modules_1.length; _i++) {\n            var module = modules_1[_i];\n            this[\"\" + module] = null;\n        }\n        removeChildren(this.element);\n        var removeClasses = [ROOT, RTL, DEVICE_CLASS, MULTI_DRAG];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n    };\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"height\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showHeaderBar\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showTimeIndicator\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowSwiping\", void 0);\n    __decorate([\n        Property('Week')\n    ], Schedule.prototype, \"currentView\", void 0);\n    __decorate([\n        Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])\n    ], Schedule.prototype, \"views\", void 0);\n    __decorate([\n        Property(new Date())\n    ], Schedule.prototype, \"selectedDate\", void 0);\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], Schedule.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], Schedule.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], Schedule.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showWeekend\", void 0);\n    __decorate([\n        Property(0)\n    ], Schedule.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property('FirstDay')\n    ], Schedule.prototype, \"weekRule\", void 0);\n    __decorate([\n        Property([1, 2, 3, 4, 5])\n    ], Schedule.prototype, \"workDays\", void 0);\n    __decorate([\n        Property(12)\n    ], Schedule.prototype, \"monthsCount\", void 0);\n    __decorate([\n        Property('00:00')\n    ], Schedule.prototype, \"startHour\", void 0);\n    __decorate([\n        Property('24:00')\n    ], Schedule.prototype, \"endHour\", void 0);\n    __decorate([\n        Property(null)\n    ], Schedule.prototype, \"timeFormat\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"enableAllDayScroll\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"enableAdaptiveUI\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Complex({}, WorkHours)\n    ], Schedule.prototype, \"workHours\", void 0);\n    __decorate([\n        Complex({}, TimeScale)\n    ], Schedule.prototype, \"timeScale\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateRangeTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dayHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"monthHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showQuickInfo\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowInline\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiCellSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiRowSelection\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"quickInfoOnSelectionEnd\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"showWeekNumber\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"rowAutoHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowMultiDrag\", void 0);\n    __decorate([\n        Property(0)\n    ], Schedule.prototype, \"firstMonthOfYear\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"editorTemplate\", void 0);\n    __decorate([\n        Complex({}, QuickInfoTemplates)\n    ], Schedule.prototype, \"quickInfoTemplates\", void 0);\n    __decorate([\n        Property(7)\n    ], Schedule.prototype, \"agendaDaysCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"enableRecurrenceValidation\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"timezone\", void 0);\n    __decorate([\n        Complex({}, EventSettings)\n    ], Schedule.prototype, \"eventSettings\", void 0);\n    __decorate([\n        Property(timezoneData)\n    ], Schedule.prototype, \"timezoneDataSource\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"headerIndentTemplate\", void 0);\n    __decorate([\n        Complex({}, Group)\n    ], Schedule.prototype, \"group\", void 0);\n    __decorate([\n        Collection([], Resources)\n    ], Schedule.prototype, \"resources\", void 0);\n    __decorate([\n        Collection([], HeaderRows)\n    ], Schedule.prototype, \"headerRows\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"eventDragArea\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"moreEventsClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"hover\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"navigating\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"renderCell\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventRendered\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupOpen\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupClose\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBound\", void 0);\n    Schedule = __decorate([\n        NotifyPropertyChanges\n    ], Schedule);\n    return Schedule;\n}(Component));\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @__PURE__ @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function (multiData) {\n        var _this = this;\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            if (originalElement) {\n                var indexCol_1 = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n                if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || (!isNullOrUndefined(multiData) && multiData.length > 0)) {\n                    var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                    indexCol_1 = indexCol_1.filter(function (index) { return index !== cloneIndex_1; });\n                    indexCol_1.push(this.actionObj.groupIndex);\n                    if (multiData && multiData.length > 0) {\n                        multiData.forEach(function (data) {\n                            _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n                        });\n                    }\n                    else {\n                        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n                    }\n                }\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n        if (isMultiSelect === void 0) { isMultiSelect = false; }\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var currentAction;\n        var eventsCollection = [eventArgs.data];\n        if (isMultiSelect) {\n            eventsCollection = eventArgs.selectedData;\n        }\n        for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n            var eventObj = eventsCollection_1[_i];\n            var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n                parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n            if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n                +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n                this.parent.crudModule.crudObj.isCrudAction = false;\n                return;\n            }\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                var eveId = (eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id]);\n                if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                    eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                    currentAction = 'EditOccurrence';\n                }\n                if (this.parent.enableRecurrenceValidation\n                    && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                    return;\n                }\n            }\n            else {\n                currentAction = null;\n            }\n            if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0,\n            leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n            rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date, multiData) {\n        var index = 0;\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + APPOINTMENT_TIME);\n            if (timeElement) {\n                var startTime = this.actionObj.start;\n                var endTime = this.actionObj.end;\n                if (multiData && multiData.length > 0) {\n                    startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];\n                    endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];\n                }\n                timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' +\n                    this.parent.getTimeString(endTime);\n            }\n            index++;\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? DATE_HEADER_WRAP_CLASS : TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView() || (this.actionObj.action !== 'resize' && this.parent.virtualScrollModule)) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            if (tr) {\n                originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n            }\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? DRAG_CLONE_CLASS : RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' ||\n            this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n            var cloneEle = dynamicEle_1[_i];\n            remove(cloneEle);\n        }\n        for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n            var cloneElement = _b[_a];\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.parent.eventBase.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (this.actionObj.action === 'resize' && this.scrollEdges.right && (parent.scrollLeft + parent.offsetWidth) > parent.scrollWidth) {\n            var tdCollections = ([].slice.call(this.parent.getContentTable().querySelector('tr').children)).length - 1;\n            var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth)) /\n                this.actionObj.cellWidth);\n            xInBounds = cellIndex === tdCollections;\n        }\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function () {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        this.scrollEventArgs = e;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, EVENT_ACTION_CLASS);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n        if (isResize === void 0) { isResize = false; }\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        if (!isResize && this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length !== 0) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        var date = resetTime(event[this.parent.eventFields.startTime]).getTime();\n        var query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        var cellTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(cellTd)) {\n            return;\n        }\n        if (isResize) {\n            var dateHeader = cellTd.querySelector('.' + DATE_HEADER_CLASS);\n            var appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n        var appointmentWrapper = createElement('div', {\n            className: APPOINTMENT_CLASS,\n            innerHTML: innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ?\n                this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n            var resources = renderedResource.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            var elementSelector = \".\" + WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        if (this.resizeEdges.left || this.resizeEdges.right) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n            var event_1 = spannedEvents_1[_a];\n            var day = this.parent.getIndexOfDate(dateRender, resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[parseInt(day.toString(), 10)];\n            if (cellTd) {\n                this.monthEvent.renderElement(cellTd, appointmentElement, true);\n                this.actionObj.cloneElement.push(appointmentElement);\n            }\n        }\n    };\n    ActionBase.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\n\nvar __extends$14 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Schedule events resize actions\n */\nvar Resize = /** @__PURE__ @class */ (function (_super) {\n    __extends$14(Resize, _super);\n    function Resize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Resize.prototype.wireResizeEvent = function (element) {\n        var resizeElement = [].slice.call(element.querySelectorAll('.' + EVENT_RESIZE_CLASS));\n        for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {\n            var element_1 = resizeElement_1[_i];\n            EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);\n        }\n    };\n    Resize.prototype.resizeHelper = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n                var cloneElement = this.createCloneElement(this.actionObj.originalElement[parseInt(i.toString(), 10)]);\n                this.actionObj.cloneElement[parseInt(i.toString(), 10)] = cloneElement;\n                if (this.actionObj.element === this.actionObj.originalElement[parseInt(i.toString(), 10)]) {\n                    this.actionObj.clone = cloneElement;\n                }\n            }\n        }\n        else {\n            if (this.actionObj.element) {\n                this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            }\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var resizeTarget = closest(e.target, '.' + EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(resizeStart, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.resizeEdges = {\n                left: resizeTarget.classList.contains(LEFT_RESIZE_HANDLER),\n                right: resizeTarget.classList.contains(RIGHT_RESIZE_HANDLER),\n                top: resizeTarget.classList.contains(TOP_RESIZE_HANDLER),\n                bottom: resizeTarget.classList.contains(BOTTOM_RESIZE_HANDLER)\n            };\n            _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n            var workCell = _this.parent.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect();\n            _this.actionObj.cellWidth = workCell.width;\n            _this.actionObj.cellHeight = workCell.height;\n            var hRows = _this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n            if (_this.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n                var tr = _this.parent.getContentTable().querySelector('tr');\n                var noOfDays = 0;\n                var tdCollections = [].slice.call(tr.children);\n                for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {\n                    var td = tdCollections_1[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var trRect = tr.getBoundingClientRect();\n                _this.actionObj.cellWidth = trRect.width / noOfDays;\n                _this.actionObj.cellHeight = trRect.height;\n            }\n            var pages = _this.parent.eventBase.getPageCoordinates(e);\n            _this.actionObj.X = pages.pageX;\n            _this.actionObj.Y = pages.pageY;\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = resizeEventArgs.interval;\n            _this.actionObj.scroll = resizeEventArgs.scroll;\n            _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n            _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n            _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n            if (_this.parent.currentView === 'Month') {\n                _this.daysVariation = -1;\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            var viewElement = _this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n            EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n        });\n    };\n    Resize.prototype.resizing = function (e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.element.querySelectorAll('.' + RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(DISABLE_DATES)) {\n            return;\n        }\n        var pages = this.parent.eventBase.getPageCoordinates(e);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            var doc = document.documentElement;\n            var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var top_1 = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n            this.actionObj.pageX = pages.pageX - left;\n            this.actionObj.pageY = pages.pageY - top_1;\n        }\n        else {\n            this.actionObj.pageX = pages.pageX;\n            this.actionObj.pageY = pages.pageY;\n        }\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            resizeArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(resizing, resizeArgs);\n    };\n    Resize.prototype.updateResizingDirection = function (e) {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            this.monthResizing();\n            return;\n        }\n        var resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                var leftStyles = this.getLeftRightStyles(e, true);\n                if (parseInt(leftStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n                    var cloneElement = _a[_i];\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                var rightStyles = this.getLeftRightStyles(e, false);\n                if (parseInt(rightStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n                    var cloneElement = _c[_b];\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                var topStyles = this.getTopBottomStyles(e, true);\n                if (parseInt(topStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n                    var cloneElement = _e[_d];\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                var bottomStyles = this.getTopBottomStyles(e, false);\n                if (parseInt(bottomStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n                    var cloneElement = _g[_f];\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    };\n    Resize.prototype.monthResizing = function () {\n        this.removeCloneElement();\n        if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {\n            return;\n        }\n        var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n        if (isNullOrUndefined(td)) {\n            return;\n        }\n        var resizeTime = this.parent.getDateFromElement(td);\n        var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ?\n            parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        if ((!this.parent.enableRtl && this.resizeEdges.left) || (this.parent.enableRtl && this.resizeEdges.right)\n            || this.resizeEdges.top) {\n            startTime = resizeTime;\n        }\n        else if ((!this.parent.enableRtl && this.resizeEdges.right) || (this.parent.enableRtl && this.resizeEdges.left)\n            || this.resizeEdges.bottom) {\n            endTime = addDays(resizeTime, 1);\n        }\n        if (isSameCell && startTime < endTime) {\n            this.actionObj.start = startTime;\n            this.actionObj.end = endTime;\n            var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n            if (this.parent.currentView === 'TimelineYear') {\n                this.yearEventsRendering(event_1);\n            }\n            else {\n                this.dynamicEventsRendering(event_1);\n            }\n            this.updateOriginalElement(this.actionObj.clone);\n        }\n    };\n    Resize.prototype.yearEventsRendering = function (event) {\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        var endDate = new Date(event[this.parent.eventFields.endTime]);\n        var monthDiff = 0;\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], addDays(endDate, -1));\n        }\n        for (var i = 0; i <= monthDiff; i++) {\n            var eventObj = void 0;\n            if (this.parent.activeViewOptions.group.resources.length === 0) {\n                eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n            }\n            else {\n                eventObj = extend({}, event, null, true);\n                endDate = this.resizeEdges.left || this.resizeEdges.right ? addDays(endDate, -1) : endDate;\n                eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n            }\n            this.dynamicYearlyEventsRendering(eventObj, true);\n        }\n    };\n    Resize.prototype.getMonthDiff = function (startDate, endDate) {\n        var months;\n        months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n        months -= startDate.getMonth();\n        months += endDate.getMonth();\n        return months <= 0 ? 0 : months;\n    };\n    Resize.prototype.getEventCount = function (eventObj, month) {\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.parent.eventFields.startTime];\n        var eventEnd = eventData[this.parent.eventFields.endTime];\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        var monthEnd = addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        var count = 1;\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.parent.eventFields.startTime] = monthStart;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.parent.eventFields.endTime] = monthEnd;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() -\n                eventData[this.parent.eventFields.startTime].getTime()) / MS_PER_DAY);\n        }\n        eventData.count = count;\n        return eventData;\n    };\n    Resize.prototype.resizeStop = function (e) {\n        var _this = this;\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(resizeStop, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.isSpecificResourceEvents()) {\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n                _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n            }\n            _this.saveChangedData(resizeEventArgs);\n        });\n    };\n    Resize.prototype.verticalResizing = function (isTop) {\n        var offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        var minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        var element = this.actionObj.clone.offsetParent;\n        if (isNullOrUndefined(element)) {\n            return;\n        }\n        var resizeTime = resetTime(this.parent.getDateFromElement(element));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    };\n    Resize.prototype.horizontalResizing = function (isLeft) {\n        var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        var resizeTime;\n        var isDateHeader = false;\n        var headerName = this.parent.currentView;\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1;\n        var isTimelineMonth = this.parent.currentView === 'TimelineMonth';\n        var isWithoutScale = isTimelineMonth || isTimeViews && !this.parent.activeViewOptions.timeScale.enable;\n        if (this.parent.activeView.isTimelineView()) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                var rows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n                headerName = rows.slice(-1)[0];\n                if (isTimelineMonth && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            var cellIndex = 0;\n            var tdCollections = [].slice.call(tr.children);\n            var isLastCell = false;\n            var pixelsPerMinute = this.actionObj.cellWidth / (this.parent.activeViewOptions.timeScale.interval /\n                this.parent.activeViewOptions.timeScale.slotCount);\n            var offset = parseFloat(this.parent.enableRtl ? this.actionObj.clone.style.right :\n                this.actionObj.clone.style.left);\n            offset = Math.round(offset / pixelsPerMinute) * pixelsPerMinute;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                var noOfDays = 0;\n                for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {\n                    var td = tdCollections_2[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = Math.round(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n                if (!isLeft) {\n                    offsetValue += (this.actionObj.clone.getBoundingClientRect().width - this.actionObj.cellWidth);\n                }\n                cellIndex = Math.floor(offsetValue / Math.floor(tr.getBoundingClientRect().width / noOfDays));\n                isDateHeader = isTimeViews && headerName === 'Date';\n                cellIndex = isLeft ? cellIndex : isTimelineMonth ? cellIndex + 1 : cellIndex;\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays) ? noOfDays - 1 : cellIndex;\n            }\n            else {\n                var cellWidth = this.actionObj.cellWidth;\n                cellIndex = isLeft ? Math.floor(offset / this.actionObj.cellWidth) :\n                    Math.ceil((offset + (this.actionObj.clone.getBoundingClientRect().width - cellWidth)) / this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    var cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        !isTimelineMonth)) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    var offsetWidth = (Math.floor(offset / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.actionObj.clone.getBoundingClientRect().width - cellOffsetWidth);\n                    cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n                }\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = this.getIndex(cellIndex);\n            }\n            var resizeDate = void 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[parseInt(cellIndex.toString(), 10)].getTime());\n            }\n            else {\n                resizeDate = this.parent.getDateFromElement(tr.children[parseInt(cellIndex.toString(), 10)]);\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                if (!isLeft) {\n                    offset += this.actionObj.clone.getBoundingClientRect().width;\n                }\n                var spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offset - Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                spanMinutes = (isLastCell || (!isLeft && spanMinutes === 0)) ? this.actionObj.slotInterval : spanMinutes;\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            var originalWidth = Math.ceil((isLeft ? this.actionObj.element.getBoundingClientRect().width : 0) /\n                this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            var noOfDays = Math.ceil((this.actionObj.clone.getBoundingClientRect().width - originalWidth) /\n                this.actionObj.cellWidth);\n            var tr = closest(this.actionObj.clone, 'tr');\n            var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = this.parent.getDateFromElement(tr.children[parseInt(dayIndex.toString(), 10)]);\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        var isNotHourSlot = ['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n            !this.parent.activeViewOptions.timeScale.enable;\n        if (isLeft) {\n            if ((eventEnd.getTime() - resizeTime.getTime()) <= 0) {\n                resizeTime = isWithoutScale ? resetTime(eventEnd) : eventStart;\n            }\n            this.actionObj.start = !isNotHourSlot ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            var isTimeScaleViews = isTimeViews && this.parent.activeViewOptions.timeScale.enable;\n            var resizeEnd = ((!isTimeScaleViews || isDateHeader || isTimeViews && ['Week', 'Month', 'Year'].indexOf(headerName) > -1)\n                && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0) ? addDays(resizeTime, 1) : resizeTime;\n            if (isWithoutScale && (resizeEnd.getTime() - eventStart.getTime()) <= 0) {\n                resizeEnd = addDays(resetTime(eventStart), 1);\n            }\n            this.actionObj.end = !isNotHourSlot ? this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    };\n    Resize.prototype.getTopBottomStyles = function (e, isTop) {\n        var viewElement = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        var clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        if (!isTop && this.actionObj.clone.offsetTop + clnHeight >= this.parent.getContentTable().offsetHeight) {\n            clnHeight = this.parent.getContentTable().offsetHeight - this.actionObj.clone.offsetTop;\n        }\n        var styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    };\n    Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n        var styles = {};\n        var isTimelineView = this.parent.activeView.isTimelineView();\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        var slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        var pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        var targetWidth = isTimelineView ?\n            (this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.actionObj.element.getBoundingClientRect().width :\n                Math.ceil(this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        var left = (this.parent.enableRtl) ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (Math.ceil(pageWidth / slotInterval) * slotInterval);\n            offsetWidth = (Math.round((left + offsetWidth) / slotInterval) * slotInterval) - left;\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        var width = !isLeft && ((offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width)) ?\n            this.actionObj.clone.getBoundingClientRect().width : (offsetWidth < this.actionObj.cellWidth) ? offsetWidth : offsetWidth;\n        if (this.parent.enableRtl) {\n            var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.getBoundingClientRect().width +\n                    (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n                rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n            }\n            rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n            styles.right = formatUnit(rightValue);\n            width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : width;\n        }\n        else {\n            var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.getBoundingClientRect().width)\n                        ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.getBoundingClientRect().width &&\n                        this.actionObj.clone.getBoundingClientRect().width === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            var leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (offsetLeft < 0) {\n                offsetLeft = 0;\n                width = this.actionObj.clone.getBoundingClientRect().width;\n            }\n            var cloneWidth = Math.ceil(this.actionObj.clone.getBoundingClientRect().width / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        styles.width = formatUnit(width);\n        return styles;\n    };\n    Resize.prototype.resizeValidation = function (e) {\n        var pages = this.parent.eventBase.getPageCoordinates(e);\n        var viewDimension = this.getContentAreaDimension();\n        var isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;\n        var cellWidth = this.actionObj.cellWidth;\n        var resizeValidation = false;\n        if (this.resizeEdges.left) {\n            if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX - cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX + cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    };\n    /**\n     * Get module name\n     *\n     * @returns {string} Returns the module name..\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}(ActionBase));\n\nvar __extends$16 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar EVENT_GAP$2 = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @__PURE__ @class */ (function (_super) {\n    __extends$16(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + APPOINTMENT_CLASS :\n            '.' + APPOINTMENT_WRAPPER_CLASS + ',.' + MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            var endDate = addDays(getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = resetTime(new Date(startDate.getTime()));\n                var end = addDays(new Date(start.getTime()), 1);\n                startDate = addDays(new Date(startDate.getTime()), 1);\n                if (!this.parent.isMinMaxDate(start)) {\n                    continue;\n                }\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[parseInt(index.toString(), 10)];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: APPOINTMENT_CLASS }));\n                    }\n                }\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var _this = this;\n        var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')');\n        this.cellWidth = workCell.getBoundingClientRect().width;\n        this.cellHeader = getOuterHeight(workCell.querySelector('.' + DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        var months = this.getMonths();\n        var groupIndex = (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive) ?\n            this.parent.uiStateValues.groupIndex : undefined;\n        for (var row = 0; row < months.length; row++) {\n            var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n                    td = dayIndex + 1;\n                    eventWrapper = wrapper_1.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper) {\n                        eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = resetTime(new Date(monthStart.getTime()));\n                var dayEnd = addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (overlapIndex + 1)) + EVENT_GAP$2 +\n                        this_1.moreIndicatorHeight;\n                    var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n                    var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP$2));\n                    var moreIndicatorCount = (count - renderedAppCount) <= 0 ? 1 : (count - renderedAppCount);\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                            return \"continue\";\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        this_1.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this_1.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    _loop_1(index, count);\n                }\n                monthStart = addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n            var tr_1 = [].slice.call(this.parent.element.querySelectorAll('.' + CONTENT_TABLE_CLASS + ' tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var app = [].slice.call(ele.querySelectorAll('.' + APPOINTMENT_CLASS));\n                var appTop = tr_1[parseInt(index.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP$2;\n                app.forEach(function (app) {\n                    var overlap = parseInt(app.getAttribute('data-index'), 10);\n                    app.style.top = appTop + (overlap * _this.eventHeight) + 'px';\n                    app.removeAttribute('data-index');\n                });\n            });\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) ||\n            (isLeftRightResize && this.isResource && (dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()))) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var _this = this;\n        var contentTable = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;\n        var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        this.cellWidth = workCell.getBoundingClientRect().width;\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + EVENT_TABLE_CLASS);\n        this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources :\n                this.parent.resourceBase.lastResourceLevel;\n        var months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < months.length; month++) {\n                var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < months.length; month++) {\n                    var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                    this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {\n            var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n            appointments.forEach(function (ele) {\n                ele.style.removeProperty('left');\n                ele.style.removeProperty('right');\n            });\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CONTAINER_CLASS));\n            var conTable_1 = this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n            var tr_2 = [].slice.call(conTable_1.querySelectorAll('tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var appWrapper = [].slice.call(ele.children);\n                var row = tr_2[parseInt(index.toString(), 10)];\n                appWrapper.forEach(function (appWrap, cellIndex) {\n                    var td = row.querySelector(\"td:nth-child(\" + (cellIndex + 1) + \")\");\n                    var app = [].slice.call(appWrap.children);\n                    var width = td.getBoundingClientRect().width;\n                    var left = td.offsetLeft;\n                    if (_this.parent.enableRtl) {\n                        var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.right = right_1 + 'px';\n                        });\n                    }\n                    else {\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.left = left + 'px';\n                        });\n                    }\n                });\n            });\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n        var eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthEnd = addDays(lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        this.groupOrder = resource.groupOrder;\n        var isSpannedCollection = [];\n        var _loop_2 = function (a) {\n            var data = eventDatas[parseInt(a.toString(), 10)];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this_2.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this_2.cellHeader + (this_2.eventHeight * (a + 1)) + EVENT_GAP$2 + this_2.moreIndicatorHeight;\n            var leftValue = (this_2.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this_2.cellWidth : index * this_2.cellWidth;\n            if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {\n                return { value: void 0 };\n            }\n            if (this_2.parent.activeViewOptions.orientation === 'Vertical' && this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var isRendered = this_2.renderedEvents.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                if (isRendered.length > 0 || isSpanned.length > 0) {\n                    return \"continue\";\n                }\n            }\n            if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {\n                this_2.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this_2.updateCellHeight(td, availedHeight);\n                isSpannedCollection.push(eventData);\n            }\n            else {\n                var moreIndex = this_2.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this_2.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], { Index: overlapIndex + i }, true));\n                    }\n                }\n                return \"break\";\n            }\n        };\n        var this_2 = this;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var state_1 = _loop_2(a);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, monthDate);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP$2;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            wrap.setAttribute('data-index', eventObj.Index.toString());\n        }\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            endDate = addDays(lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventWrapper = createElement('div', {\n            className: APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n        var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        var monthEnd = addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);\n        var yearEnd = addMonths(yearStart, this.parent.monthsCount);\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n            this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);\n            var originalStartTime = eventData[this.fields.startTime];\n            var originalEndTime = new Date(eventData[this.fields.endTime] - 1);\n            isSpanned.count = (originalEndTime.getMonth() - originalStartTime.getMonth()) +\n                (this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear())) + 1;\n        }\n        else {\n            this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);\n            if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n                var end = resetTime(eventData[this.fields.endTime]).getTime();\n                var start = resetTime(eventData[this.fields.startTime]).getTime();\n                if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                    end = addDays(new Date(end), -1).getTime();\n                }\n                isSpanned.count = Math.ceil((end - start) / MS_PER_DAY) + 1;\n            }\n        }\n        eventData.isSpanned = isSpanned;\n        if (resetTime(eventStart).getTime() < resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (resetTime(eventEnd).getTime() > resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.updateSpannedEventDetails = function (eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {\n        if (eventStart.getTime() < viewStart.getTime()) {\n            eventObj[this.fields.startTime] = viewStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > viewEnd.getTime()) {\n            eventObj[this.fields.endTime] = viewEnd;\n            isSpanned.isRight = true;\n        }\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = resetTime(new Date(date.getTime())).getTime();\n                dateEnd = addDays(resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            var timeCondition = app[this.fields.isAllDay] ? resetTime(appEnd).getTime() > dateStart :\n                resetTime(appEnd).getTime() >= dateStart;\n            if (((resetTime(appStart).getTime() <= dateStart) && (timeCondition)) ||\n                (resetTime(appStart).getTime() >= dateStart) && (resetTime(appEnd).getTime() <= dateEnd)) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + MONTH_HEADER_WRAPPER + \" tbody tr,.\" + RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    YearEvent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return YearEvent;\n}(TimelineEvent));\n\nvar __extends$15 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\nvar DragAndDrop = /** @__PURE__ @class */ (function (_super) {\n    __extends$15(DragAndDrop, _super);\n    function DragAndDrop() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.widthUptoCursorPoint = 0;\n        _this.heightUptoCursorPoint = 0;\n        _this.cursorPointIndex = 0;\n        _this.isHeaderRows = false;\n        _this.isTimelineDayProcess = false;\n        _this.widthPerMinute = 0;\n        _this.heightPerMinute = 0;\n        _this.minDiff = 0;\n        _this.isStepDragging = false;\n        _this.isMorePopupOpened = false;\n        _this.isAllDayDrag = false;\n        _this.isMultiSelect = false;\n        _this.multiData = [];\n        _this.updatedData = [];\n        _this.swagData = [];\n        _this.startTime = 0;\n        _this.isAllDayTarget = false;\n        _this.targetTd = null;\n        _this.isCursorAhead = false;\n        return _this;\n    }\n    DragAndDrop.prototype.wireDragEvent = function (element) {\n        new Draggable(element, {\n            abort: '.' + EVENT_RESIZE_CLASS,\n            clone: true,\n            isDragScroll: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: (this.parent.eventDragArea) ? true : false,\n            cursorAt: (this.parent.eventDragArea) ? { left: -20, top: -20 } : { left: 0, top: 0 },\n            dragArea: this.dragArea,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this),\n            queryPositionInfo: this.dragPosition.bind(this)\n        });\n    };\n    DragAndDrop.prototype.setDragArea = function () {\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        this.dragArea = this.parent.eventDragArea && dragElement ? dragElement :\n            this.parent.element.querySelector('.' + CONTENT_TABLE_CLASS);\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        var _this = this;\n        this.setDragActionDefaultValues();\n        this.actionObj.element = e.element;\n        this.actionObj.action = 'drag';\n        var elements = [];\n        if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 ||\n            (this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1)) {\n            elements = [e.element];\n        }\n        else {\n            elements = this.parent.selectedElements;\n            this.isMultiSelect = true;\n        }\n        elements.forEach(function (ele) {\n            var cloneElement = _this.createCloneElement(ele);\n            if (ele.getAttribute('data-guid') === _this.actionObj.element.getAttribute('data-guid')) {\n                _this.actionObj.clone = cloneElement;\n                if (!_this.parent.eventDragArea && _this.parent.currentView !== 'Month' &&\n                    _this.parent.activeViewOptions.timeScale.enable && !_this.parent.activeView.isTimelineView() &&\n                    !_this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                    setStyleAttribute(_this.actionObj.clone, { cursor: 'move', left: '0%', right: '0%', width: '100%' });\n                }\n                _this.actionObj.clone.style.top = formatUnit(_this.actionObj.element.offsetTop);\n            }\n            _this.actionObj.cloneElement.push(cloneElement);\n            _this.actionObj.originalElement.push(ele);\n        });\n        return this.actionObj.clone;\n    };\n    DragAndDrop.prototype.dragPosition = function (e) {\n        if (this.parent.eventDragArea) {\n            return { left: e.left, top: e.top };\n        }\n        var cellHeight = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var leftValue = formatUnit(0);\n        if (this.parent.currentView === 'Month') {\n            leftValue = e.left;\n        }\n        var cloneRight;\n        if (this.isStepDragging) {\n            cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;\n        }\n        else {\n            cloneRight = this.actionObj.clone.getBoundingClientRect().right;\n        }\n        var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var contentWrapRight = dragArea.getBoundingClientRect().right;\n        if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear' && !this.parent.enableRtl &&\n            this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {\n            this.isCursorAhead = true;\n        }\n        if (this.parent.activeView.isTimelineView()) {\n            leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n        }\n        var topValue;\n        if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable ||\n            (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)))) {\n            topValue = formatUnit(this.actionObj.clone.offsetTop);\n        }\n        else if (this.parent.currentView === 'Month') {\n            topValue = formatUnit(0);\n        }\n        else if (this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n            topValue = formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop);\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n                right: this.parent.enableRtl && formatUnit(0)\n            });\n        }\n        else {\n            if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) &&\n                !this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                setStyleAttribute(this.actionObj.clone, {\n                    height: formatUnit(this.actionObj.cellHeight),\n                    width: formatUnit(this.actionObj.cellWidth - 1),\n                    pointerEvents: 'none'\n                });\n            }\n            var top_1 = parseInt(e.top, 10);\n            top_1 = top_1 < 0 ? 0 : top_1;\n            topValue = formatUnit(Math.ceil(top_1 / cellHeight) * cellHeight);\n            var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n            var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n            if (cloneBottom > scrollHeight) {\n                topValue = (parseInt(topValue, 10) - (cloneBottom - scrollHeight)) + 'px';\n            }\n        }\n        return { left: leftValue, top: topValue };\n    };\n    DragAndDrop.prototype.setDragActionDefaultValues = function () {\n        this.actionObj.action = 'drag';\n        this.actionObj.isAllDay = null;\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var workCell = this.parent.element.querySelector('.' + WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        var eventGuid = this.actionObj.element.getAttribute('data-guid');\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        if (!isNullOrUndefined(eventObj)) {\n            this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n        }\n        var dragArgs = {\n            cancel: false,\n            data: eventObj,\n            selectedData: this.getSelectedData(),\n            event: e,\n            excludeSelectors: null,\n            element: this.actionObj.element,\n            interval: this.actionObj.interval,\n            navigation: { enable: false, timeDelay: 2000 },\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel || (!isNullOrUndefined(_this.actionObj.element) &&\n                isNullOrUndefined(_this.actionObj.element.parentElement))) {\n                var dragObj = _this.actionObj.element.ej2_instances[0];\n                if (!isNullOrUndefined(dragObj)) {\n                    dragObj.intDestroy(e.event);\n                }\n                _this.actionObj.action = '';\n                _this.removeCloneElementClasses();\n                _this.removeCloneElement();\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];\n            _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = dragEventArgs.interval;\n            _this.actionObj.navigation = dragEventArgs.navigation;\n            _this.actionObj.scroll = dragEventArgs.scroll;\n            _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n            var viewElement = _this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            _this.widthPerMinute = (_this.actionObj.cellWidth / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.heightPerMinute = (_this.actionObj.cellHeight / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.widthUptoCursorPoint = 0;\n            _this.heightUptoCursorPoint = 0;\n            _this.cursorPointIndex = -1;\n            _this.isHeaderRows = false;\n            _this.isTimelineDayProcess = false;\n            _this.minDiff = 0;\n            _this.isMorePopupOpened = false;\n            _this.daysVariation = -1;\n            _this.isAllDayTarget = _this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n            if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== 'TimelineYear') {\n                if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) &&\n                    _this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n                    _this.isMorePopupOpened = true;\n                }\n                _this.actionObj.pageX = e.event.pageX;\n                var rows = _this.parent.activeViewOptions.headerRows;\n                _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' &&\n                    rows[rows.length - 1].option !== 'Date';\n                _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows ||\n                    _this.parent.currentView === 'TimelineMonth' || (rows.length > 0 && rows[rows.length - 1].option === 'Date');\n                _this.isStepDragging = !_this.isTimelineDayProcess && (_this.actionObj.slotInterval !== _this.actionObj.interval);\n                if (_this.isTimelineDayProcess) {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'day');\n                }\n                else {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'hour');\n                }\n            }\n            if (_this.parent.currentView === 'TimelineYear') {\n                _this.yearEvent = new YearEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Month') {\n                _this.startTime = resetTime(new Date(_this.startTime)).getTime();\n                _this.updateOriginalElement(_this.actionObj.clone);\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Day' || _this.parent.currentView === 'Week' || _this.parent.currentView === 'WorkWeek') {\n                _this.verticalEvent = new VerticalEvent(_this.parent);\n                _this.verticalEvent.initializeValues();\n                var splitEvents = _this.splitEvent(_this.actionObj.event);\n                splitEvents.forEach(function (event) {\n                    var query = \".e-day-wrapper[data-date=\\\"\" + resetTime(event[_this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n                    if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                        query = query.concat('[data-group-index = \"' + _this.actionObj.groupIndex + '\"]');\n                    }\n                    var appWrap = _this.parent.element.querySelector(query);\n                    if (appWrap) {\n                        var appEle = appWrap.querySelector('[data-id=\"' + _this.actionObj.clone.getAttribute('data-id') + '\"]');\n                        if (appEle) {\n                            addClass([appEle], EVENT_ACTION_CLASS);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    DragAndDrop.prototype.getSelectedData = function () {\n        if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n            for (var _i = 0, _a = this.parent.selectedElements; _i < _a.length; _i++) {\n                var element = _a[_i];\n                var eventGuid = element.getAttribute('data-guid');\n                var data = this.parent.eventBase.getEventByGuid(eventGuid);\n                this.multiData.push(extend({}, data, null, true));\n            }\n        }\n        return this.multiData;\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(DISABLE_DATES)) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventArgs = this.parent.eventBase.getPageCoordinates(e);\n        this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n        this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n        this.actionObj.target = e.target;\n        this.widthUptoCursorPoint = (this.widthUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute)) *\n                this.widthPerMinute : this.widthUptoCursorPoint;\n        this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n        this.heightUptoCursorPoint = (this.heightUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute)) *\n                this.heightPerMinute : this.heightUptoCursorPoint;\n        this.isAllDayDrag = (this.parent.activeViewOptions.timeScale.enable) ?\n            this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) :\n            this.actionObj.event[this.parent.eventFields.isAllDay];\n        if (this.isStepDragging && this.minDiff === 0) {\n            this.calculateMinutesDiff(eventObj);\n        }\n        if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n            var date = this.parent.getDateFromElement(this.actionObj.target);\n            if (!isNullOrUndefined(date)) {\n                var currentDate = resetTime(date);\n                var startDate = resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n                this.daysVariation = (currentDate.getTime() - startDate.getTime()) / MS_PER_DAY;\n            }\n            else {\n                this.daysVariation = 0;\n            }\n        }\n        else {\n            this.daysVariation = 0;\n        }\n        if (this.parent.eventDragArea) {\n            var targetElement = eventArgs.target;\n            this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n            this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n            var currentTarget = closest(targetElement, '.' + ROOT);\n            if (!currentTarget) {\n                this.actionObj.clone.style.height = '';\n                this.actionObj.clone.style.width = '';\n            }\n            else {\n                if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n                    this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n                }\n            }\n        }\n        this.updateScrollPosition(e);\n        this.updateNavigatingPosition(e);\n        this.updateDraggingDateTime(e);\n        var dragArgs = {\n            data: eventObj, event: e, element: this.actionObj.element, startTime: this.actionObj.start,\n            endTime: this.actionObj.end, selectedData: this.updatedData\n        };\n        if (this.parent.group.resources.length > 0) {\n            dragArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(drag, dragArgs);\n    };\n    DragAndDrop.prototype.calculateMinutesDiff = function (eventObj) {\n        if (this.parent.enableRtl) {\n            this.minDiff =\n                ((this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute) * this.actionObj.interval;\n        }\n        else {\n            this.minDiff = (this.widthUptoCursorPoint / this.widthPerMinute) * this.actionObj.interval;\n        }\n        var startDate = eventObj[this.parent.eventFields.startTime];\n        var startTime = this.parent.activeView.renderDates[0];\n        var startEndHours = getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        if (startEndHours.startHour.getTime() > startDate.getTime()) {\n            this.minDiff = this.minDiff + ((startEndHours.startHour.getTime() - startDate.getTime()) / MS_PER_MINUTE);\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        this.isCursorAhead = false;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        clearInterval(this.actionObj.navigationInterval);\n        this.actionObj.navigationInterval = null;\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        if (this.isAllowDrop(e)) {\n            return;\n        }\n        var target = ((!e.target.classList.contains('e-work-cells') && this.parent.cellTemplate) ?\n            closest(e.target, '.e-work-cells') : e.target);\n        var dragArgs = {\n            cancel: false, data: this.getChangedData(this.updatedData), selectedData: this.updatedData,\n            event: e, element: this.actionObj.element, target: target\n        };\n        this.actionObj.action = null;\n        this.parent.trigger(dragStop, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.isSpecificResourceEvents()) {\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n                var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this.actionObj.groupIndex;\n                _this.parent.crudModule.crudObj.targetEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(currentGroupIndex.toString(), 10)]];\n            }\n            _this.saveChangedData(dragEventArgs, _this.isMultiSelect);\n        });\n        this.updatedData = [];\n        this.multiData = [];\n        this.isMultiSelect = false;\n        this.parent.selectedElements = [];\n    };\n    DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.navigation.enable) {\n            var currentDate_1 = this.parent.getCurrentTime();\n            if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n                this.actionObj.navigationInterval = window.setInterval(function () {\n                    if (currentDate_1) {\n                        var crtDate = _this.parent.getCurrentTime();\n                        var end = crtDate.getSeconds();\n                        var start = currentDate_1.getSeconds() + (_this.actionObj.navigation.timeDelay / 1000);\n                        start = (start >= 60) ? start - 60 : start;\n                        if (start === end) {\n                            currentDate_1 = _this.parent.getCurrentTime();\n                            _this.viewNavigation(e);\n                            _this.updateDraggingDateTime(e);\n                        }\n                    }\n                }, this.actionObj.navigation.timeDelay);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n        if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n            this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {\n            this.morePopupEventDragging(e);\n        }\n        else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n            this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n            this.timelineEventModule.getSlotDates();\n            this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth :\n                this.parent.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect().width;\n            this.calculateTimelineTime(e);\n        }\n        else {\n            if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n                this.calculateVerticalDate(e);\n            }\n            else {\n                this.calculateVerticalTime(e);\n            }\n        }\n    };\n    DragAndDrop.prototype.navigationWrapper = function () {\n        if (!this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n                var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n                this.actionObj.index = (this.parent.activeView.renderDates.length < this.actionObj.index) ?\n                    this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n                var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n                if (!targetWrapper) {\n                    targetWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                    outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n                }\n                targetWrapper.appendChild(this.actionObj.clone);\n            }\n            else {\n                var wrapperClass = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) ?\n                    '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n                this.parent.element.querySelectorAll(wrapperClass)\n                    .item(this.actionObj.index).appendChild(this.actionObj.clone);\n                if (wrapperClass === '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n                    var elementHeight = this.getAllDayEventHeight();\n                    var event_2 = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n                    if (event_2[0].offsetHeight < elementHeight) {\n                        for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {\n                            var e = event_1[_i];\n                            e.style.height = ((elementHeight + 2) / 12) + 'em';\n                        }\n                    }\n                    this.actionObj.clone.style.height = formatUnit(elementHeight);\n                }\n                this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n            }\n        }\n        else {\n            var outWrapper = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n            }\n            else {\n                outWrapper = this.parent.element.querySelector('.' + APPOINTMENT_CONTAINER_CLASS);\n            }\n            if (!isNullOrUndefined(outWrapper)) {\n                var tarWrapper_1 = outWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n                if (!tarWrapper_1) {\n                    tarWrapper_1 = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                    outWrapper.appendChild(tarWrapper_1);\n                }\n                this.actionObj.cloneElement.forEach(function (ele) {\n                    tarWrapper_1.appendChild(ele);\n                });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.viewNavigation = function (e) {\n        var navigationType;\n        var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (dragArea && ((!this.scrollEdges.top && !this.scrollEdges.bottom) ||\n            closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n            if ((dragArea.scrollLeft === 0) &&\n                (Math.round(this.actionObj.X) <=\n                    Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'next' : 'previous';\n            }\n            else if ((Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth) &&\n                (Math.round(this.actionObj.X) >=\n                    Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'previous' : 'next';\n            }\n            if (navigationType) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n            }\n        }\n    };\n    DragAndDrop.prototype.morePopupEventDragging = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'td')))) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(e.target, 'td');\n        if (this.parent.currentView === 'TimelineYear' && (!td.classList.contains(WORK_CELLS_CLASS) || td.classList.contains(OTHERMONTH_CLASS))) {\n            return;\n        }\n        var dragStart$$1 = this.parent.getDateFromElement(td);\n        var dragEnd = new Date(dragStart$$1.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        this.actionObj.start = new Date(dragStart$$1.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n        this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n        var eventContainer = td;\n        var eventWrapper;\n        if (this.parent.activeView.isTimelineView()) {\n            var rowIndex = closest(td, 'tr').rowIndex;\n            eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n        }\n        eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n    };\n    DragAndDrop.prototype.calculateVerticalTime = function (e) {\n        var _this = this;\n        if (isNullOrUndefined(this.actionObj.target) ||\n            (this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr'))) ||\n            (!(closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS)) &&\n                !(closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)))) {\n            return;\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.swapDragging(e);\n        }\n        var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventStart = eventObj[this.parent.eventFields.startTime];\n        var eventEnd = eventObj[this.parent.eventFields.endTime];\n        var eventDuration = getUniversalTime(eventEnd) - getUniversalTime(eventStart);\n        var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight)\n            * this.actionObj.cellHeight;\n        offsetTop = offsetTop < 0 ? 0 : offsetTop;\n        if (this.scrollEdges.top || this.scrollEdges.bottom) {\n            offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint +\n                this.actionObj.cellHeight + window.pageYOffset :\n                (dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset) +\n                    (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n            offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n            if (dragArea.scrollTop > 0) {\n                this.actionObj.clone.style.top = formatUnit(offsetTop);\n            }\n        }\n        var rowIndex = (this.parent.activeViewOptions.timeScale.enable) ? (offsetTop / this.actionObj.cellHeight) : 0;\n        var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n        var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n        var tr;\n        if (this.isAllDayDrag) {\n            tr = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS);\n        }\n        else {\n            var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n            tr = trCollections[parseInt(rowIndex.toString(), 10)];\n        }\n        var index;\n        if (closest(this.actionObj.target, 'td').classList.contains(WORK_CELLS_CLASS) ||\n            closest(this.actionObj.target, 'td').classList.contains(ALLDAY_CELLS_CLASS)) {\n            index = closest(this.actionObj.target, 'td').cellIndex;\n        }\n        var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n        this.actionObj.index = colIndex;\n        if (isNullOrUndefined(tr)) {\n            return;\n        }\n        var td = tr.children[parseInt(colIndex.toString(), 10)];\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var dragStart$$1;\n        var dragEnd;\n        if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            dragStart$$1 = this.parent.getDateFromElement(td);\n            dragStart$$1.setMinutes(dragStart$$1.getMinutes() + (diffInMinutes / heightPerMinute));\n            dragEnd = new Date(dragStart$$1.getTime());\n            if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n            }\n            else {\n                dragEnd.setMilliseconds(eventDuration);\n            }\n        }\n        else {\n            dragStart$$1 = this.parent.getDateFromElement(td);\n            dragStart$$1.setDate(dragStart$$1.getDate() - this.daysVariation);\n            dragStart$$1.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            dragEnd = new Date(dragStart$$1.getTime());\n            dragEnd.setMilliseconds(eventDuration);\n            if (!this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) &&\n                this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd = addDays(resetTime(dragEnd), 1);\n            }\n            var index_1 = this.parent.activeViewOptions.group.byDate || (this.parent.virtualScrollModule &&\n                !this.parent.activeViewOptions.timeScale.enable) ? colIndex : undefined;\n            this.updateAllDayEvents(dragStart$$1, dragEnd, index_1);\n        }\n        this.actionObj.start = new Date(+dragStart$$1);\n        this.actionObj.end = new Date(+dragEnd);\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        var dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicWrappers_1 = dynamicWrappers; _i < dynamicWrappers_1.length; _i++) {\n            var wrapper = dynamicWrappers_1[_i];\n            remove(wrapper);\n        }\n        if (this.multiData.length > 0) {\n            if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n                var targetCellTime_1 = parseInt((closest(this.actionObj.target, 'td')).getAttribute('data-date'), 10);\n                this.multiData.forEach(function (data) {\n                    _this.swagData.push(extend({}, data, null, true));\n                    if (data[_this.parent.eventFields.isAllDay]) {\n                        data[_this.parent.eventFields.startTime] =\n                            new Date(data[_this.parent.eventFields.startTime].getTime() + (targetCellTime_1 - _this.startTime));\n                        var startTime = new Date(data[_this.parent.eventFields.startTime]);\n                        var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this.actionObj.slotInterval));\n                        data[_this.parent.eventFields.endTime] = endTime;\n                        data[_this.parent.eventFields.isAllDay] = false;\n                    }\n                });\n                this.startTime = targetCellTime_1;\n            }\n            if (this.isAllDayTarget && this.isAllDayDrag &&\n                !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n                this.multiData = this.swagData;\n                this.swagData = [];\n                var eventObj_1 = extend({}, this.actionObj.event, null, true);\n                this.startTime = eventObj_1[this.parent.eventFields.startTime].getTime();\n            }\n            var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (var index_2 = 0; index_2 < this.multiData.length; index_2++) {\n                this.updatedData[parseInt(index_2.toString(), 10)] =\n                    this.updateMultipleData(this.multiData[parseInt(index_2.toString(), 10)], startTimeDiff);\n                var dayIndex = this.getDayIndex(this.updatedData[parseInt(index_2.toString(), 10)]);\n                if (dayIndex >= 0) {\n                    var wrapper = this.getEventWrapper(dayIndex, this.updatedData[parseInt(index_2.toString(), 10)][this.parent.eventFields.isAllDay]);\n                    this.appendCloneElement(wrapper, this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n                    this.updateEventHeight(this.updatedData[parseInt(index_2.toString(), 10)], index_2, dayIndex);\n                }\n                else {\n                    if (!isNullOrUndefined(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)].parentNode)) {\n                        remove(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n                    }\n                }\n            }\n        }\n        else {\n            this.updateEventHeight(event);\n        }\n        this.updateTimePosition(this.actionObj.start, this.updatedData);\n    };\n    DragAndDrop.prototype.splitEvent = function (event) {\n        var eventFields = this.parent.eventFields;\n        var eventData = [];\n        var startTime = event[eventFields.startTime];\n        var endTime = event[eventFields.endTime];\n        if (resetTime(new Date(startTime.getTime())) < resetTime(new Date(endTime.getTime()))) {\n            var startReferenceDate = resetTime(new Date(startTime.getTime()));\n            var endReferenceDate = new Date(startReferenceDate.getTime());\n            for (var i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {\n                endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                var eventObj = extend({}, event, null, true);\n                eventObj[eventFields.startTime] = new Date(startReferenceDate);\n                eventObj[eventFields.endTime] = new Date(endReferenceDate);\n                startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                eventData.push(eventObj);\n            }\n            var index = eventData.length - 1;\n            eventData[0][eventFields.startTime] = startTime;\n            eventData[parseInt(index.toString(), 10)][eventFields.endTime] = endTime;\n        }\n        else {\n            eventData.push(event);\n        }\n        return eventData;\n    };\n    DragAndDrop.prototype.updateMultipleData = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable &&\n            ((this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay]) ||\n                (!this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay]))) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        if (eventObj[this.parent.eventFields.isAllDay]) {\n            var differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n            var day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n            var startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n            eventObj[this.parent.eventFields.startTime] = resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n            eventObj[this.parent.eventFields.endTime] = addDays(eventObj[this.parent.eventFields.startTime], day);\n        }\n        else {\n            eventObj[this.parent.eventFields.startTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n            eventObj[this.parent.eventFields.endTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n        }\n        return eventObj;\n    };\n    DragAndDrop.prototype.getDayIndex = function (event) {\n        var eventObj = extend({}, event, null, true);\n        var startDate = resetTime(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.activeViewOptions.timeScale.enable && !eventObj[this.parent.eventFields.isAllDay]) {\n            var startHour = this.parent.activeView.getStartHour();\n            startDate.setMilliseconds(startHour.getTime() - resetTime(startHour).getTime());\n        }\n        var startTime = startDate.getTime();\n        var query = '';\n        var wrapper = DAY_WRAPPER_CLASS;\n        if (this.parent.activeViewOptions.timeScale.enable && (eventObj[this.parent.eventFields.isAllDay])) {\n            wrapper = ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n        }\n        else {\n            wrapper = WORK_CELLS_CLASS;\n        }\n        query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        this.targetTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(this.targetTd)) {\n            return -1;\n        }\n        return this.targetTd.cellIndex;\n    };\n    DragAndDrop.prototype.updateEventHeight = function (event, index, colIndex) {\n        this.verticalEvent.initializeValues();\n        var datesCount = this.verticalEvent.getStartCount();\n        if (!this.parent.uiStateValues.isGroupAdaptive) {\n            for (var i = 0; i < this.actionObj.groupIndex; i++) {\n                if (this.verticalEvent.dateRender[parseInt(i.toString(), 10)]) {\n                    datesCount = datesCount + this.verticalEvent.dateRender[parseInt(i.toString(), 10)].length;\n                }\n            }\n        }\n        var indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;\n        var target = (this.parent.activeViewOptions.group.byDate &&\n            !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target))) ? true : false;\n        if (target || !this.parent.activeViewOptions.group.byDate) {\n            var dynamicIndex = -1;\n            var dayIndex = !this.parent.activeViewOptions.group.byDate ?\n                isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount\n                : this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(indexGroup.toString(), 10)], resetTime(\n                // eslint-disable-next-line max-len\n                this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n            var splitEvents = this.splitEvent(event);\n            var events_1 = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 ||\n                this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' ? [event] : splitEvents;\n            for (var i = 0; i < events_1.length; i++) {\n                if (i > 0) {\n                    var filterQuery = \".e-day-wrapper[data-date=\\\"\" + resetTime(events_1[parseInt(i.toString(), 10)][this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n                    if (this.parent.activeViewOptions.group.resources.length > 0) {\n                        filterQuery = filterQuery.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n                    }\n                    var appWrap = this.parent.element.querySelector(filterQuery);\n                    if (appWrap) {\n                        dayIndex = dayIndex + 1;\n                        dynamicIndex = appWrap.cellIndex;\n                    }\n                    else {\n                        dayIndex = -1;\n                    }\n                }\n                if (dayIndex >= 0) {\n                    var record = this.verticalEvent.isSpannedEvent(events_1[parseInt(i.toString(), 10)], dayIndex, indexGroup);\n                    var eStart = record[this.verticalEvent.fields.startTime];\n                    var eEnd = record[this.verticalEvent.fields.endTime];\n                    var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) :\n                        this.actionObj.element.offsetHeight;\n                    var topValue = this.parent.activeViewOptions.timeScale.enable ?\n                        this.verticalEvent.getTopValue(eStart, dayIndex, indexGroup) : this.actionObj.element.offsetTop;\n                    if (isNullOrUndefined(index)) {\n                        if (i === 0) {\n                            this.actionObj.clone.style.top = formatUnit(topValue);\n                            this.actionObj.clone.style.height = formatUnit(appHeight);\n                        }\n                        else {\n                            this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                        }\n                    }\n                    else {\n                        var appWidth = this.actionObj.cellWidth;\n                        if (event[this.parent.eventFields.isAllDay]) {\n                            topValue = this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop;\n                            appHeight = this.getAllDayEventHeight();\n                            var timeDiff = event[this.parent.eventFields.endTime].getTime() -\n                                event[this.parent.eventFields.startTime].getTime();\n                            var allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n                            if (allDayDifference >= 0) {\n                                appWidth = (allDayDifference * this.actionObj.cellWidth);\n                            }\n                        }\n                        if (this.actionObj.cloneElement[parseInt(index.toString(), 10)]) {\n                            if (i === 0) {\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.top = formatUnit(topValue);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.height = formatUnit(appHeight);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.width = formatUnit(appWidth);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.left = formatUnit(0);\n                            }\n                            else {\n                                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    DragAndDrop.prototype.renderSpannedEvents = function (record, index, top, height) {\n        var startTime = record[this.parent.eventFields.startTime].getTime();\n        var endTime = record[this.parent.eventFields.endTime].getTime();\n        if (startTime !== endTime) {\n            var appointmentElement = this.verticalEvent.\n                createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);\n            addClass([appointmentElement], [CLONE_ELEMENT_CLASS, 'e-dynamic-clone']);\n            setStyleAttribute(appointmentElement, {\n                'width': '100%',\n                'height': height + 'px',\n                'top': top + 'px',\n                'border': '0px'\n            });\n            var appointmentWrap = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_WRAPPER_CLASS));\n            appointmentWrap[parseInt(index.toString(), 10)].appendChild(appointmentElement);\n        }\n    };\n    DragAndDrop.prototype.getRenderedDates = function () {\n        var _this = this;\n        var _a, _b;\n        var renderDates = this.parent.activeView.renderDates;\n        (_a = this.parent.eventBase.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.eventBase.slots = [];\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            renderDates = resources[0].renderDates;\n            (_b = this.parent.eventBase.slots).push.apply(_b, renderDates.map(function (date) { return +date; }));\n        }\n        return renderDates;\n    };\n    DragAndDrop.prototype.updateAllDayEvents = function (startDate, endDate, colIndex) {\n        this.parent.eventBase.slots = [];\n        var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n        var renderDates = this.getRenderedDates();\n        var events = this.parent.eventBase.splitEvent(event, renderDates);\n        var query = \".e-all-day-cells[data-date=\\\"\" + events[0][this.parent.eventFields.startTime].getTime() + \"\\\"]\";\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n        }\n        var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n        if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n            var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n            this.appendCloneElement(this.getEventWrapper(cellIndex));\n            // eslint-disable-next-line max-len\n            this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.swapDragging = function (e) {\n        var colIndex = closest(this.actionObj.target, 'td').cellIndex;\n        if (closest(this.actionObj.target, '.' + DATE_HEADER_WRAP_CLASS) &&\n            !closest(this.actionObj.clone, '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n            addClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = true;\n            var eventHeight = this.getAllDayEventHeight();\n            var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + ALLDAY_CELLS_CLASS + ':first-child'));\n            if (allDayElement[0].offsetHeight < eventHeight) {\n                for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {\n                    var element = allDayElement_1[_i];\n                    element.style.height = ((eventHeight + 2) / 12) + 'em';\n                }\n            }\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(this.actionObj.cellWidth),\n                height: formatUnit(eventHeight),\n                top: formatUnit(this.parent.element.querySelector('.' + ALLDAY_ROW_CLASS).offsetTop)\n            });\n        }\n        if (closest(this.actionObj.target, '.' + WORK_CELLS_CLASS) &&\n            !closest(this.actionObj.clone, '.' + DAY_WRAPPER_CLASS)) {\n            removeClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = false;\n            // eslint-disable-next-line max-len\n            var height = (this.actionObj.element.offsetHeight === 0) ? this.actionObj.height : this.actionObj.element.offsetHeight;\n            setStyleAttribute(this.actionObj.clone, {\n                left: formatUnit(0),\n                height: formatUnit(height),\n                width: formatUnit(this.actionObj.cellWidth)\n            });\n        }\n    };\n    DragAndDrop.prototype.calculateVerticalDate = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'tr'))) ||\n            (e.target && e.target.tagName === 'DIV')) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n            this.removeCloneElement();\n        }\n        var eventDuration = getUniversalTime(eventObj[this.parent.eventFields.endTime]) -\n            getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n        var td = closest(this.actionObj.target, 'td');\n        if (!isNullOrUndefined(td)) {\n            var tr = td.parentElement;\n            this.actionObj.index = (tr.rowIndex * tr.children.length) + td.cellIndex;\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n            td = workCells[this.actionObj.index];\n            var currentDate = this.parent.getDateFromElement(td);\n            if (!isNullOrUndefined(currentDate)) {\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n                }\n                var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n                var dragStart$$1 = new Date(timeString.getTime());\n                var startTimeDiff = getUniversalTime(eventObj[this.parent.eventFields.startTime]) -\n                    getUniversalTime(resetTime(new Date(+eventObj[this.parent.eventFields.startTime])));\n                dragStart$$1.setMilliseconds(startTimeDiff);\n                var dragEnd = new Date(dragStart$$1.getTime());\n                dragEnd.setMilliseconds(eventDuration);\n                this.actionObj.start = new Date(dragStart$$1.getTime());\n                this.actionObj.end = new Date(dragEnd.getTime());\n            }\n        }\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        if (this.multiData && this.multiData.length > 0) {\n            var startTime = resetTime(new Date(event[this.parent.eventFields.startTime]));\n            var startTimeDiff = startTime.getTime() - this.startTime;\n            if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n                startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n                startTimeDiff -= new Date(this.startTime).getMonth();\n                startTimeDiff += startTime.getMonth();\n            }\n            for (var index = 0; index < this.multiData.length; index++) {\n                this.updatedData[parseInt(index.toString(), 10)] =\n                    this.updateMultipleVerticalDate(this.multiData[parseInt(index.toString(), 10)], startTimeDiff);\n                if (this.parent.currentView === 'TimelineYear') {\n                    this.dynamicYearlyEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n                }\n                else {\n                    this.dynamicEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n                }\n            }\n        }\n        else {\n            if (this.parent.currentView === 'TimelineYear') {\n                this.dynamicYearlyEventsRendering(event);\n            }\n            else {\n                this.dynamicEventsRendering(event);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateMultipleVerticalDate = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n        }\n        else {\n            var differInDays = Math.ceil(timeDifference / MS_PER_DAY);\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n        }\n        eventObj[this.parent.eventFields.endTime] =\n            new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n        return eventObj;\n    };\n    DragAndDrop.prototype.calculateTimelineTime = function (e) {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = getUniversalTime(eventObj[this.parent.eventFields.endTime]) -\n            getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n        var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth :\n            parseInt(this.actionObj.clone.style.left, 10);\n        offsetLeft = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth)) * this.actionObj.cellWidth;\n        var rightOffset;\n        if (this.parent.enableRtl) {\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n        }\n        offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n        var colIndex = this.getColumnIndex(offsetLeft);\n        var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var contentWrapRight = dragArea.getBoundingClientRect().right;\n        var cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl &&\n            this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right &&\n            !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);\n        var leftVal = (this.parent.eventDragArea) ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n        if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {\n            this.isCursorAhead = true;\n        }\n        var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n        if (this.parent.enableRtl) {\n            cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) /\n                this.actionObj.cellWidth)) - 1;\n        }\n        if (this.cursorPointIndex < 0) {\n            this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n        }\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n        index = index < 0 ? 0 : index;\n        var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[parseInt(index.toString(), 10)].getTime()) :\n            this.parent.getDateFromElement(tr.children[parseInt(index.toString(), 10)]);\n        if (this.isStepDragging) {\n            var widthDiff = this.getWidthDiff(tr, index);\n            if (widthDiff !== 0) {\n                var timeDiff = Math.round(widthDiff / this.widthPerMinute);\n                eventStart.setMinutes(eventStart.getMinutes() + (timeDiff * this.actionObj.interval));\n                if (this.isCursorAhead || cursorDrag) {\n                    eventStart.setMilliseconds(-(eventDuration));\n                }\n                else {\n                    eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n                }\n            }\n            else {\n                eventStart = this.actionObj.start;\n            }\n        }\n        else {\n            if (this.isCursorAhead || cursorDrag) {\n                var minutes = this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval;\n                eventStart.setMinutes(eventStart.getMinutes() + minutes);\n                eventStart.setMilliseconds(-(eventDuration));\n                if (eventStart.getTime() === resetTime(eventStart).getTime() && eventStart.getMinutes() === 0 && eventDuration === 0) {\n                    eventStart.setMinutes(-minutes);\n                }\n            }\n            else {\n                eventStart.setMinutes(eventStart.getMinutes() -\n                    (this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval)));\n            }\n        }\n        eventStart = this.calculateIntervalTime(eventStart);\n        if (this.isTimelineDayProcess) {\n            var eventSrt = eventObj[this.parent.eventFields.startTime];\n            eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n        }\n        if (this.parent.eventDragArea) {\n            var targetDate = this.parent.getDateFromElement(e.target);\n            if (!isNullOrUndefined(targetDate)) {\n                if (!this.parent.activeViewOptions.timeScale.enable || (this.parent.currentView === 'TimelineMonth')) {\n                    var eventSrt = eventObj[this.parent.eventFields.startTime];\n                    eventStart = new Date(targetDate.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds()));\n                }\n                else {\n                    eventStart = targetDate;\n                }\n            }\n        }\n        var eventEnd = new Date(eventStart.getTime());\n        eventEnd.setMilliseconds(eventDuration);\n        var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n        if (this.multiData.length > 0) {\n            var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (var i = 0; i < this.multiData.length; i++) {\n                this.updatedData[parseInt(i.toString(), 10)] =\n                    this.updateMultipleData(this.multiData[parseInt(i.toString(), 10)], startTimeDiff);\n            }\n            eventsData = this.updatedData;\n        }\n        for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n            var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[parseInt(dataIndex.toString(), 10)] : this.actionObj.clone;\n            if (isNullOrUndefined(this.parent.eventDragArea)) {\n                var events_2 = this.timelineEventModule.splitEvent(eventsData[parseInt(dataIndex.toString(), 10)], this.timelineEventModule.dateRender);\n                var eventData = events_2[0].data;\n                var startTime = this.timelineEventModule.getStartTime(events_2[0], eventData);\n                var endTime = this.timelineEventModule.getEndTime(events_2[0], eventData);\n                // eslint-disable-next-line max-len\n                var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);\n                // eslint-disable-next-line max-len\n                var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, resetTime(new Date(startTime.getTime())));\n                day = day < 0 ? 0 : day;\n                var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n                if (this.parent.enableRtl) {\n                    cloneElement.style.right = formatUnit(left);\n                }\n                else {\n                    cloneElement.style.left = formatUnit(left);\n                }\n                if (!this.isMorePopupOpened) {\n                    cloneElement.style.width = formatUnit(width);\n                }\n            }\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.calculateResourceGroupingPosition(e, cloneElement);\n            }\n            this.actionObj.start = new Date(eventStart.getTime());\n            this.actionObj.end = new Date(eventEnd.getTime());\n            this.updateTimePosition(this.actionObj.start, this.updatedData);\n        }\n    };\n    DragAndDrop.prototype.getOffsetValue = function (offsetLeft, rightOffset) {\n        if (this.scrollEdges.left || this.scrollEdges.right) {\n            var viewEle = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (this.parent.enableRtl) {\n                rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n                if (this.scrollEdges.right) {\n                    rightOffset = (rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth) -\n                        (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                else {\n                    rightOffset = rightOffset + this.widthUptoCursorPoint;\n                    if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n                        this.actionObj.clone.style.width =\n                            formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n                        rightOffset = (viewEle.scrollLeft - viewEle.scrollWidth);\n                    }\n                }\n                if (isNullOrUndefined(this.parent.eventDragArea)) {\n                    this.actionObj.clone.style.left = formatUnit(rightOffset);\n                }\n            }\n            else {\n                if (this.scrollEdges.left) {\n                    offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n                    if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n                        viewEle.scrollLeft = viewEle.scrollLeft - 1;\n                    }\n                    else if (this.actionObj.clone.offsetLeft === 0) {\n                        offsetLeft = viewEle.scrollLeft;\n                    }\n                }\n                else {\n                    offsetLeft = (viewEle.scrollLeft + viewEle.offsetWidth -\n                        this.actionObj.clone.offsetWidth) + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n                if (isNullOrUndefined(this.parent.eventDragArea)) {\n                    this.actionObj.clone.style.left = formatUnit(offsetLeft);\n                }\n            }\n        }\n        return offsetLeft;\n    };\n    DragAndDrop.prototype.getWidthDiff = function (tr, index) {\n        var pages = this.scrollArgs.element.getBoundingClientRect();\n        if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n            var targetLeft = tr.children[parseInt(index.toString(), 10)].offsetLeft;\n            var pageX = this.actionObj.pageX - pages.left;\n            if (this.parent.enableRtl) {\n                return (targetLeft + this.actionObj.cellWidth) - (this.scrollArgs.element.scrollLeft + pageX);\n            }\n            else {\n                return (this.scrollArgs.element.scrollLeft + pageX) - targetLeft;\n            }\n        }\n        return 0;\n    };\n    DragAndDrop.prototype.getColumnIndex = function (offsetLeft) {\n        var index = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth));\n        if (this.isHeaderRows) {\n            return index;\n        }\n        return this.getIndex(index);\n    };\n    DragAndDrop.prototype.getCursorCurrentIndex = function (colIndex, cloneIndex, tr) {\n        var index = colIndex + cloneIndex;\n        if (this.isHeaderRows) {\n            var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n            return (index > dateLength - 1) ? dateLength - 1 : index;\n        }\n        return (index > tr.children.length - 1) ? tr.children.length - 1 : index;\n    };\n    DragAndDrop.prototype.cursorIndex = function (e, event, left, index) {\n        var td = closest(e.target, '.e-work-cells');\n        if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n            var targetDate = this.parent.getDateFromElement(td);\n            if (this.isHeaderRows) {\n                var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n                targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n            }\n            var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n            if (this.isTimelineDayProcess) {\n                this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / (MS_PER_DAY)));\n            }\n            else {\n                var widthDiff = Math.floor((timeDiff / MS_PER_MINUTE) / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n                this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n                this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n            }\n        }\n        else {\n            this.cursorPointIndex = 0;\n        }\n    };\n    DragAndDrop.prototype.calculateResourceGroupingPosition = function (e, cloneElement) {\n        var dragArea = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n        var translateY = getTranslateY(dragArea.querySelector('table'));\n        translateY = (isNullOrUndefined(translateY)) ? 0 : translateY;\n        var rowHeight = (this.parent.rowAutoHeight) ?\n            ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n        var rowIndex = Math.floor(Math.floor((this.actionObj.Y +\n            (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset))) -\n            dragArea.getBoundingClientRect().top) / rowHeight);\n        rowIndex = (rowIndex < 0) ? 0 : (rowIndex > trCollection.length - 1) ? trCollection.length - 1 : rowIndex;\n        this.actionObj.index = rowIndex;\n        var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n        var eventWrapper = eventContainer.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper, cloneElement);\n        var td = closest(this.actionObj.target, 'td');\n        this.actionObj.groupIndex = (td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)))\n            ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var top = trCollection[parseInt(rowIndex.toString(), 10)].getBoundingClientRect().height * rowIndex;\n        if (this.parent.rowAutoHeight) {\n            var cursorElement = this.getCursorElement(e);\n            if (cursorElement) {\n                top = cursorElement.classList.contains(WORK_CELLS_CLASS) ? cursorElement.offsetTop :\n                    (cursorElement.offsetParent && cursorElement.offsetParent.classList.contains(APPOINTMENT_CLASS)) ?\n                        cursorElement.offsetParent.offsetTop : top;\n            }\n        }\n        cloneElement.style.top = formatUnit(top);\n    };\n    DragAndDrop.prototype.appendCloneElement = function (element, cloneElement) {\n        if (cloneElement === void 0) { cloneElement = null; }\n        cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        else {\n            element.appendChild(cloneElement);\n        }\n    };\n    DragAndDrop.prototype.getEventWrapper = function (index, isAllDayDrag) {\n        var eventWrapper;\n        if (isNullOrUndefined(isAllDayDrag)) {\n            isAllDayDrag = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var wrapperClass = isAllDayDrag ? '.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + APPOINTMENT_WRAPPER_CLASS;\n            eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n        }\n        else {\n            var targetWrapper = this.parent.element.querySelectorAll('.' + WORK_CELLS_CLASS).item(index);\n            eventWrapper = targetWrapper.querySelector('.' + APPOINTMENT_WRAPPER_CLASS);\n            if (!eventWrapper) {\n                eventWrapper = createElement('div', { className: APPOINTMENT_WRAPPER_CLASS });\n                targetWrapper.appendChild(eventWrapper);\n            }\n        }\n        return eventWrapper;\n    };\n    DragAndDrop.prototype.getAllDayEventHeight = function () {\n        var eventWrapper = createElement('div', { className: APPOINTMENT_CLASS });\n        this.parent.element.querySelector('.' + ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n        var eventHeight = eventWrapper.offsetHeight;\n        remove(eventWrapper);\n        return eventHeight;\n    };\n    DragAndDrop.prototype.isAllowDrop = function (e) {\n        if (!this.actionObj.excludeSelectors) {\n            return false;\n        }\n        var dropSelectors = this.actionObj.excludeSelectors.split(',');\n        var isAllowDrop = false;\n        for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n            var selector = dropSelectors_1[_i];\n            if (e.target.classList.contains(selector)) {\n                isAllowDrop = true;\n                break;\n            }\n        }\n        return isAllowDrop;\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name\n     */\n    DragAndDrop.prototype.getModuleName = function () {\n        return 'dragAndDrop';\n    };\n    return DragAndDrop;\n}(ActionBase));\n\n/**\n * view base\n */\nvar ViewBase = /** @__PURE__ @class */ (function () {\n    /**\n     * Constructor\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function ViewBase(parent) {\n        this.previousNextAction = 'next';\n        this.parent = parent;\n    }\n    ViewBase.prototype.isTimelineView = function () {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    };\n    ViewBase.prototype.getContentRows = function () {\n        return [];\n    };\n    ViewBase.prototype.refreshHeader = function () {\n        // Method to refresh the date header\n    };\n    ViewBase.prototype.refreshResourceHeader = function () {\n        remove(this.element.querySelector('tbody').lastElementChild.firstElementChild);\n        var resTd = createElement('td');\n        resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n        prepend([resTd], this.element.querySelector('tbody').lastElementChild);\n        this.parent.notify(contentReady, {});\n    };\n    ViewBase.prototype.getDayName = function (date) {\n        return this.parent.getDayNames('abbreviated')[date.getDay()];\n    };\n    ViewBase.prototype.getDate = function (date) {\n        return this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() });\n    };\n    ViewBase.prototype.getTime = function (date) {\n        if (this.parent.isAdaptive) {\n            if (this.parent.activeViewOptions.timeFormat === 'HH:mm' || this.parent.activeViewOptions.timeFormat === 'HH.mm') {\n                return this.parent.globalize.formatDate(date, { format: 'H', calendar: this.parent.getCalendarMode() });\n            }\n            return this.parent.globalize.formatDate(date, { skeleton: 'h', calendar: this.parent.getCalendarMode() });\n        }\n        return this.parent.getTimeString(date);\n    };\n    ViewBase.prototype.getTimelineDate = function (date) {\n        var text = this.parent.globalize.formatDate(date, { skeleton: 'MMMd', calendar: this.parent.getCalendarMode() }) + ', ' +\n            this.parent.getDayNames('wide')[date.getDay()];\n        return capitalizeFirstWord(text, 'multiple');\n    };\n    ViewBase.prototype.createEventTable = function (trCount) {\n        var eventTable = createElement('div', { className: EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    };\n    ViewBase.prototype.getEventRows = function (trCount) {\n        var eventRows = [];\n        var eventContainer;\n        for (var row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    };\n    ViewBase.prototype.collapseRows = function (wrap) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + EVENT_TABLE_CLASS));\n        }\n    };\n    ViewBase.prototype.createTableLayout = function (className) {\n        var clsName = className || '';\n        var table = createElement('table', { className: SCHEDULE_TABLE_CLASS + ' ' + clsName });\n        var tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    };\n    ViewBase.prototype.setAriaAttributes = function (table) {\n        table.setAttribute('role', 'grid');\n        table.setAttribute('aria-label', this.getLabelText(this.parent.currentView));\n    };\n    ViewBase.prototype.createColGroup = function (table, lastRow) {\n        var length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map(function (value) { return value.colSpan; }).reduce(function (prev, next) { return prev + next; });\n        }\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    };\n    ViewBase.prototype.getScrollXIndent = function (content) {\n        return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;\n    };\n    ViewBase.prototype.scrollTopPanel = function (target) {\n        this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    };\n    ViewBase.prototype.scrollHeaderLabels = function (target) {\n        var headerTable = this.element.querySelector('.e-date-header-wrap table');\n        var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        var applyLeft = function (headerCells, isRtl) {\n            var currentCell;\n            var tdLeft = 0;\n            var colSpan = 0;\n            var hiddenLeft = isRtl ? -(target.scrollLeft) : target.scrollLeft;\n            for (var _i = 0, headerCells_2 = headerCells; _i < headerCells_2.length; _i++) {\n                var cell = headerCells_2[_i];\n                colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = cell;\n                    break;\n                }\n                tdLeft += cell.offsetWidth;\n            }\n            if (!isNullOrUndefined(currentCell)) {\n                currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n            }\n        };\n        var classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (var _i = 0, classNames_1 = classNames; _i < classNames_1.length; _i++) {\n            var className = classNames_1[_i];\n            var headerCells = [].slice.call(this.element.querySelectorAll(className));\n            if (headerCells.length > 0) {\n                for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {\n                    var element = headerCells_1[_a];\n                    element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n                }\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    };\n    ViewBase.prototype.addAttributes = function (td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    };\n    ViewBase.prototype.getHeaderBarHeight = function () {\n        var headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resHeader = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    };\n    ViewBase.prototype.renderPanel = function (type) {\n        if (type === PREVIOUS_PANEL_CLASS) {\n            prepend([this.element], this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    };\n    ViewBase.prototype.setPanel = function (panel) {\n        this.element = panel;\n    };\n    ViewBase.prototype.getPanel = function () {\n        return this.element;\n    };\n    ViewBase.prototype.getDatesHeaderElement = function () {\n        return this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n        return []; // Here getDateSlots only need in vertical and month views\n    };\n    ViewBase.prototype.generateColumnLevels = function () {\n        return []; // Here generateColumnLevels only need in vertical and month views\n    };\n    ViewBase.prototype.getColumnLevels = function () {\n        return this.colLevels;\n    };\n    ViewBase.prototype.highlightCurrentTime = function () {\n        // Here showTimeIndicator functionalities\n    };\n    ViewBase.prototype.getStartDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.getEndDate = function () {\n        return this.renderDates[this.renderDates.length - 1];\n    };\n    ViewBase.prototype.startDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.endDate = function () {\n        return addDays(this.renderDates[this.renderDates.length - 1], 1);\n    };\n    ViewBase.prototype.getStartHour = function () {\n        var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    };\n    ViewBase.prototype.getEndHour = function () {\n        var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    };\n    ViewBase.prototype.isCurrentDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date(this.parent.currentTimezoneDate).setHours(0, 0, 0, 0);\n    };\n    ViewBase.prototype.isCurrentMonth = function (date) {\n        if (this.parent.activeViewOptions.displayDate || this.parent.activeViewOptions.numberOfWeeks > 0) {\n            return this.parent.activeView.getStartDate().getTime() <= this.parent.getCurrentTime().getTime() &&\n                this.parent.activeView.getEndDate().getTime() >= this.parent.getCurrentTime().getTime();\n        }\n        return date.getFullYear() ===\n            this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    };\n    ViewBase.prototype.isWorkDay = function (date, workDays) {\n        if (workDays === void 0) { workDays = this.parent.activeViewOptions.workDays; }\n        if (workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        return !(getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) ||\n            !this.isWorkDay(date, workDays));\n    };\n    ViewBase.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            var selectedDate = resetTime(this.parent.selectedDate);\n            var start = getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_1 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            var start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_2 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else {\n            var dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount :\n                this.parent.activeViewOptions.interval;\n            var start = resetTime(this.parent.selectedDate);\n            do {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = addDays(start, 1);\n            } while (dayCount !== renderDates.length);\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    ViewBase.prototype.getNextPreviousDate = function (type) {\n        this.previousNextAction = type;\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            if (this.parent.activeViewOptions.showWeekend) {\n                var daysCount = this.parent.activeViewOptions.interval;\n                return addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n            }\n            else {\n                var date = void 0;\n                if (type === 'next') {\n                    date = addDays(this.renderDates.slice(-1)[0], 1);\n                    while (!this.isWorkDay(date)) {\n                        date = addDays(date, 1);\n                    }\n                }\n                else {\n                    date = addDays(this.renderDates[0], -1);\n                    var count = 0;\n                    do {\n                        if (this.isWorkDay(date)) {\n                            count += 1;\n                        }\n                        if (this.parent.activeViewOptions.interval !== count) {\n                            date = addDays(date, -1);\n                        }\n                    } while (this.parent.activeViewOptions.interval !== count);\n                }\n                return date;\n            }\n        }\n        var weekLength = type === 'next' ? WEEK_LENGTH : -WEEK_LENGTH;\n        return addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n    };\n    ViewBase.prototype.getLabelText = function (view) {\n        var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        return this.parent.localeObj.getConstant(viewStr) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'long', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    ViewBase.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive) {\n            var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    };\n    ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n        var globalize = this.parent.globalize;\n        var mode = this.parent.getCalendarMode();\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var text = '';\n            if (!endDate) {\n                text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });\n                return capitalizeFirstWord(text, 'multiple');\n            }\n            text = (globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) +\n                ' - ' + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }));\n            return capitalizeFirstWord(text, 'multiple');\n        }\n        var formattedStr;\n        var longDateFormat;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n        }\n        else {\n            longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n        }\n        if (!endDate) {\n            return capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), 'single');\n        }\n        var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });\n        }\n        return capitalizeFirstWord(formattedStr, 'multiple');\n    };\n    ViewBase.prototype.getMobileDateElement = function (date, className) {\n        var wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' +\n                capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }), 'single') + '</div>'\n        });\n        return wrap;\n    };\n    ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n        if (className === void 0) { className = TEXT_ELLIPSIS; }\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            var data = { resource: tdData.resource, resourceData: tdData.resourceData };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n            var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n            append(quickTemplate, tdElement);\n        }\n        else {\n            var resourceText = createElement('div', { className: className });\n            this.parent.sanitize(tdData.resourceData[tdData.resource.textField], resourceText);\n            tdElement.appendChild(resourceText);\n        }\n    };\n    ViewBase.prototype.renderResourceMobileLayout = function () {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    };\n    ViewBase.prototype.addAutoHeightClass = function (element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], AUTO_HEIGHT);\n        }\n    };\n    ViewBase.prototype.getColElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + CONTENT_WRAP_CLASS + ' col, .' + DATE_HEADER_WRAP_CLASS + ' col'));\n    };\n    ViewBase.prototype.setColWidth = function (content) {\n        if (this.isTimelineView()) {\n            var colElements = this.getColElements();\n            var contentBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n            var colWidth_1 = (contentBody.getBoundingClientRect().width / (colElements.length / 2));\n            if (content.offsetHeight !== content.clientHeight) {\n                var resourceColumn = this.parent.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n                if (!isNullOrUndefined(resourceColumn)) {\n                    setStyleAttribute(resourceColumn, { 'height': formatUnit(content.clientHeight) });\n                }\n            }\n            var cssClass = \".\" + HEADER_CELLS_CLASS + \",.\" + TIME_SLOT_CLASS + \",.\" + HEADER_WEEK_CELLS_CLASS + \",.\" + HEADER_MONTH_CELLS_CLASS + \",.\" + HEADER_YEAR_CELLS_CLASS;\n            var headerCellElements = [].slice.call(this.element.querySelectorAll(cssClass));\n            headerCellElements.forEach(function (ele) {\n                var colSpan = isNullOrUndefined(ele.getAttribute('colspan')) ? '1' : ele.getAttribute('colspan');\n                var headerCellColSpan = parseInt(colSpan, 10);\n                setStyleAttribute(ele, { 'width': formatUnit(colWidth_1 * headerCellColSpan) });\n            });\n        }\n    };\n    ViewBase.prototype.resetColWidth = function () {\n        var colElements = this.getColElements();\n        for (var _i = 0, colElements_1 = colElements; _i < colElements_1.length; _i++) {\n            var col = colElements_1[_i];\n            col.style.width = '';\n        }\n    };\n    ViewBase.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n    };\n    ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n        if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n            var treeIcons = [].slice.call(this.element.querySelectorAll('.' + RESOURCE_TREE_ICON_CLASS));\n            for (var _i = 0, treeIcons_1 = treeIcons; _i < treeIcons_1.length; _i++) {\n                var icon = treeIcons_1[_i];\n                EventHandler.clearEvents(icon);\n                EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n            }\n        }\n    };\n    ViewBase.prototype.scrollToDate = function (scrollDate) {\n        if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        var scrollWrap = this.getContentAreaElement();\n        var tdDate = new Date(resetTime(new Date(+scrollDate)).getTime()).getTime();\n        var dateElement = scrollWrap.querySelector(\".\" + WORK_CELLS_CLASS + \"[data-date=\\\"\" + tdDate + \"\\\"]\");\n        if (this.parent.currentView === 'Month' && dateElement) {\n            if (scrollWrap.scrollWidth > scrollWrap.clientWidth) {\n                if (!this.parent.enableRtl) {\n                    scrollWrap.scrollLeft = dateElement.offsetLeft;\n                }\n                else {\n                    scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n                }\n            }\n            scrollWrap.scrollTop = dateElement.offsetTop;\n        }\n        if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n            if (!this.parent.enableRtl) {\n                scrollWrap.scrollLeft = dateElement.offsetLeft;\n            }\n            else {\n                scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n            }\n        }\n    };\n    ViewBase.prototype.setPersistence = function () {\n        if (this.parent.enablePersistence) {\n            var contentWrap = this.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(contentWrap)) {\n                this.parent.scrollLeft = contentWrap.scrollLeft;\n                this.parent.scrollTop = contentWrap.scrollTop;\n            }\n        }\n    };\n    ViewBase.prototype.retainScrollPosition = function () {\n        if (this.parent.enablePersistence) {\n            var conWrap = this.parent.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n                conWrap.scrollTop = this.parent.scrollTop;\n                conWrap.scrollLeft = this.parent.scrollLeft;\n            }\n        }\n    };\n    ViewBase.prototype.getViewStartDate = function () {\n        var startDate = this.renderDates[0];\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n        }\n        return startDate;\n    };\n    ViewBase.prototype.getViewEndDate = function () {\n        var endDate = addDays(this.renderDates[this.renderDates.length - 1], 1);\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            endDate = addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n        }\n        return endDate;\n    };\n    ViewBase.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === 'Month' ||\n            (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else if (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length > 0) {\n            startTime.setHours(0, 0, 0, 0);\n            return new Date(startTime.setDate(1));\n        }\n        return null;\n    };\n    ViewBase.prototype.resetColLevels = function () {\n        this.parent.resourceBase.expandedResources = [];\n        var renderedCount = this.parent.virtualScrollModule.getRenderedCount();\n        var lastLevel = this.parent.activeViewOptions.group.byDate ? this.colLevels[0] :\n            this.parent.resourceBase.renderedResources;\n        var index = 0;\n        for (var i = 0; i < lastLevel.length; i++) {\n            if (index >= renderedCount) {\n                break;\n            }\n            index += lastLevel[parseInt(i.toString(), 10)].colSpan;\n            this.parent.resourceBase.expandedResources.push(lastLevel[parseInt(i.toString(), 10)]);\n        }\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.colLevels[0] = this.parent.resourceBase.expandedResources;\n            this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources);\n        }\n        else {\n            this.colLevels[this.colLevels.length - 2] = this.parent.resourceBase.expandedResources;\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources;\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.colLevels[this.colLevels.length - 1] = this.colLevels[this.colLevels.length - 1].slice(0, index);\n            this.parent.resourceBase.expandedResources = this.colLevels[this.colLevels.length - 1];\n        }\n    };\n    ViewBase.prototype.destroy = function () {\n        if (this.element && this.element.parentNode) {\n            remove(this.element);\n        }\n        this.element = null;\n        this.renderDates = null;\n        this.colLevels = null;\n    };\n    return ViewBase;\n}());\n\nvar __extends$18 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * vertical view\n */\nvar VerticalView = /** @__PURE__ @class */ (function (_super) {\n    __extends$18(VerticalView, _super);\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        _this.appointment = null;\n        return _this;\n    }\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.scrollUiUpdate);\n            this.parent.off(dataReady, this.renderEvents);\n        }\n    };\n    VerticalView.prototype.renderEvents = function () {\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n        this.appointment.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onAdaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.removeNewEventElement();\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        if (!this.parent) {\n            return;\n        }\n        var dateHeader = this.parent.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timeCells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setContentHeight(content, timeCells, scrollerHeight);\n        this.setColWidth(content);\n        var scrollBarWidth = getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        var isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                if (this.parent.currentView.indexOf('Timeline') > -1) {\n                    content.scrollTop = this.parent.uiStateValues.top;\n                }\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timeCells) {\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (!isNullOrUndefined(scrollDate)) {\n            var headerElement = this.element.querySelector('.' + HEADER_CELLS_CLASS + '[data-date=\"' + new Date(resetTime(scrollDate)).getTime() + '\"]');\n            if (headerElement) {\n                if (this.parent.enableRtl) {\n                    var conWrap = this.element.querySelector('.' + CONTENT_TABLE_CLASS);\n                    this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n                }\n                else {\n                    this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n                }\n            }\n        }\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.scrollToDate = function (scrollDate) {\n        this.scrollToHour(null, scrollDate);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                while (columnLevels[0].length === 0) {\n                    this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction) }, true);\n                    this.parent.activeView.getRenderDates();\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n                        this.parent.headerModule.updateDateRange();\n                    }\n                    level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n                    columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n                }\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    // eslint-disable-next-line max-len\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList$$1 = [HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList$$1.push(CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList$$1, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        var currentDate = this.parent.getCurrentTime();\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    var interval = MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\n                    if (interval <= (MS_PER_MINUTE - 1000)) {\n                        window.setTimeout(function () {\n                            if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                                _this.clearCurrentTimeIndicatorTimer();\n                                _this.changeCurrentTimePosition();\n                                _this.updateCurrentTimeIndicatorTimer();\n                            }\n                        }, interval);\n                    }\n                    this.updateCurrentTimeIndicatorTimer();\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            var currentDate = resetTime(this.parent.getCurrentTime());\n            if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling &&\n                this.parent.activeViewOptions.group.byDate) {\n                for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n                    var resource = _a[_i];\n                    if (resetTime(resource.date).getTime() === currentDate.getTime()) {\n                        currentDateIndex.push(count);\n                    }\n                    count += 1;\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n                    var resource = _c[_b];\n                    var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n                    if (index >= 0) {\n                        var resIndex = this.parent.activeViewOptions.group.byDate ?\n                            (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                        currentDateIndex.push(resIndex);\n                    }\n                    count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n                }\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n        var _this = this;\n        this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, MS_PER_MINUTE);\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + PREVIOUS_TIMELINE_CLASS + ',.' + CURRENT_TIMELINE_CLASS + ',.' + CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', { className: PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', { className: CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + HIDE_CHILDS_CLASS), HIDE_CHILDS_CLASS);\n            if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n                addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return parseFloat(this.element.querySelector('.' + WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: date, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(contentReady, {});\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            var levels = this.colLevels.slice(0);\n            if (this.parent.virtualScrollModule) {\n                this.resetColLevels();\n            }\n            var wrap = this.renderContentArea();\n            workTd.appendChild(wrap);\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n            if (this.parent.virtualScrollModule) {\n                this.colLevels = levels;\n                this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n            }\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var nth;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(WEEK_NUMBER_CLASS);\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            nth = this.createTd(data_1);\n            this.parent.renderHeaderIndentTemplate(data_1, nth);\n            ntr_1.appendChild(nth);\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false', 'aria-label': 'Expand section'\n            },\n            className: ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                ICON + ' ' + DISABLE_CLASS\n        });\n        var data = { className: [ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        this.parent.renderHeaderIndentTemplate(data, nth);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr', { className: HEADER_ROW_CLASS });\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr', { className: ALLDAY_ROW_CLASS });\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n            td.className = [ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [TIME_CELLS_CLASS, TIME_SLOT_CLASS] : [TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.getContentRows = function () {\n        var _this = this;\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        return rows;\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        var cellDate = resetTime(tdData.date);\n        if (!this.parent.isMinMaxDate(cellDate)) {\n            clsName.push(DISABLE_DATES);\n        }\n        setTime(cellDate, getDateInMs(r.date));\n        var type = 'workCells';\n        if (tdData.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [WORK_CELLS_CLASS] : [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            var duration = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\n                - new Date(msStartHour).getTimezoneOffset()) / duration);\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    VerticalView.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.getTimeSlotRows();\n            var startDate = new Date(new Date(timeSlots[0].date.getTime()).\n                setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n                    startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n                    return new Date(startTime);\n                }\n            }\n        }\n        return null;\n    };\n    VerticalView.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            if (this.appointment) {\n                this.appointment.destroy();\n                this.appointment = null;\n            }\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return VerticalView;\n}(ViewBase));\n\nvar __extends$17 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * day view\n */\nvar Day = /** @__PURE__ @class */ (function (_super) {\n    __extends$17(Day, _super);\n    /**\n     * Constructor for day view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function Day(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    Day.prototype.getModuleName = function () {\n        return 'day';\n    };\n    return Day;\n}(VerticalView));\n\nvar __extends$19 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * week view\n */\nvar Week = /** @__PURE__ @class */ (function (_super) {\n    __extends$19(Week, _super);\n    /**\n     * Constructor for week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function Week(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-week-view';\n        return _this;\n    }\n    Week.prototype.startDate = function () {\n        return this.getViewStartDate();\n    };\n    Week.prototype.endDate = function () {\n        return this.getViewEndDate();\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    Week.prototype.getModuleName = function () {\n        return 'week';\n    };\n    return Week;\n}(VerticalView));\n\nvar __extends$20 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * work week view\n */\nvar WorkWeek = /** @__PURE__ @class */ (function (_super) {\n    __extends$20(WorkWeek, _super);\n    /**\n     * Constructor for work week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function WorkWeek(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-work-week-view';\n        return _this;\n    }\n    WorkWeek.prototype.startDate = function () {\n        return this.getViewStartDate();\n    };\n    WorkWeek.prototype.endDate = function () {\n        return this.getViewEndDate();\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    WorkWeek.prototype.getModuleName = function () {\n        return 'workWeek';\n    };\n    return WorkWeek;\n}(VerticalView));\n\nvar __extends$21 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * month view\n */\nvar Month = /** @__PURE__ @class */ (function (_super) {\n    __extends$21(Month, _super);\n    function Month(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'wide';\n        _this.viewClass = 'e-month-view';\n        _this.isInverseTableSelect = false;\n        _this.monthEvent = null;\n        _this.monthDates = {};\n        return _this;\n    }\n    Month.prototype.addEventListener = function () {\n        this.parent.on(scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(dataReady, this.onDataReady, this);\n        this.parent.on(cellClick, this.onCellClick, this);\n    };\n    Month.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.onScrollUIUpdate);\n            this.parent.off(dataReady, this.onDataReady);\n            this.parent.off(cellClick, this.onCellClick);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onDataReady = function (args) {\n        this.monthEvent = new MonthEvent(this.parent);\n        this.monthEvent.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onCellClick = function (event) { };\n    Month.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n        this.parent.uiStateValues.top = e.target.scrollTop;\n        this.parent.uiStateValues.left = e.target.scrollLeft;\n        this.setPersistence();\n    };\n    Month.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    Month.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + WEEK_NUMBER_WRAPPER_CLASS);\n    };\n    Month.prototype.onScrollUIUpdate = function (args) {\n        var headerHeight = this.getHeaderBarHeight();\n        var header = this.getDatesHeaderElement();\n        var content = this.getContentAreaElement();\n        var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        var leftPanel = this.getLeftPanelElement();\n        if (this.parent.height !== 'auto') {\n            this.setContentHeight(content, leftPanel, height);\n        }\n        var scrollBarWidth = getScrollBarWidth();\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        this.setColWidth(content);\n        if (args.scrollPosition || !args.isPreventScrollUpdate && this.parent.currentView === 'TimelineMonth') {\n            var top_1 = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.top : args.scrollPosition.top;\n            if (leftPanel) {\n                leftPanel.scrollTop = top_1;\n            }\n            content.scrollTop = top_1;\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToSelectedDate();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                content.scrollLeft = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.left :\n                    args.scrollPosition.left;\n            }\n        }\n        else {\n            this.scrollToSelectedDate();\n        }\n        this.retainScrollPosition();\n    };\n    Month.prototype.scrollToSelectedDate = function () {\n        var headerCell = this.element.querySelector('.' + HEADER_CELLS_CLASS + '[data-date=\"'\n            + this.parent.selectedDate.getTime().toString() + '\"]');\n        var content = this.getContentAreaElement();\n        if (!isNullOrUndefined(headerCell)) {\n            content.scrollLeft = !this.parent.enableRtl ?\n                headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n        }\n        else {\n            content.scrollLeft = 0;\n        }\n        if (content.scrollLeft === 0 && this.parent.uiStateValues.isInitial) {\n            this.parent.uiStateValues.left = 0;\n        }\n    };\n    Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = (this.parent.activeViewOptions.interval > 1) ?\n                    this.getContentAreaElement().firstElementChild.offsetHeight :\n                    this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    };\n    Month.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var levels_1 = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays);\n                if (this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                    var index = levels_1.findIndex(function (x, index) {\n                        return index !== 0 && x.date.getDay() === levels_1[0].date.getDay();\n                    });\n                    levels_1 = index > -1 ? levels_1.slice(0, index) : levels_1;\n                }\n                colLevels = [levels_1];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Month.prototype.getDateSlots = function (renderDates, workDays) {\n        var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : workDays.length;\n        var dateSlots = [];\n        var isCurrentMonth = this.isCurrentMonth(this.parent.selectedDate);\n        for (var col = 0; col < count; col++) {\n            var classList$$1 = [HEADER_CELLS_CLASS];\n            var currentDateIndex = renderDates.slice(0, count).map(function (date) { return date.getDay(); });\n            if (isCurrentMonth && currentDateIndex.indexOf(this.parent.currentTimezoneDate.getDay()) === col) {\n                classList$$1.push(CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[parseInt(col.toString(), 10)], type: 'monthDay', className: classList$$1, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    Month.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    };\n    Month.prototype.renderLayout = function (type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        this.setPanel(createElement('div', { className: TABLE_WRAP_CLASS }));\n        var clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n            if (this.parent.currentView !== 'Month') {\n                this.parent.activeViewOptions.group.hideNonWorkingDays = false;\n            }\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(IGNORE_WHITESPACE);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(contentReady, {});\n        if (this.parent.uiStateValues.isCustomMonth) {\n            this.parent.uiStateValues.isCustomMonth = false;\n        }\n    };\n    Month.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(contentReady, {});\n    };\n    Month.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    Month.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    Month.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    };\n    Month.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        var workTd = createElement('td');\n        var levels = this.colLevels.slice(0);\n        if (this.parent.virtualScrollModule) {\n            this.resetColLevels();\n        }\n        var wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        var contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            var monthAgendaWrapper = createElement('div', { className: TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.colLevels = levels;\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    };\n    Month.prototype.renderWeekNumberContent = function () {\n        var dateCol = this.renderDates.map(function (date) { return new Date(+date); });\n        var td = createElement('td');\n        var contentWrapper = createElement('div', { className: WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        var contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (var i = 0, length_1 = (this.renderDates.length / noOfDays); i < length_1; i++) {\n            var dates = dateCol.splice(0, noOfDays);\n            var weekNumber = this.parent.getWeekNumberContent(dates);\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    };\n    Month.prototype.renderAppointmentContainer = function () {\n        //Here needs to render mobile view appointment details on selected date\n    };\n    Month.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var table = this.createTableLayout();\n        if (this.parent.currentView === 'Month') {\n            var thead = createElement('thead');\n            thead.appendChild(createElement('tr'));\n            prepend([thead], table);\n        }\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        var trEle = createElement('tr');\n        for (var i = 0; i < this.colLevels.length; i++) {\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            var ntr = trEle.cloneNode();\n            for (var j = 0; j < level.length; j++) {\n                var td = level[parseInt(j.toString(), 10)];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    };\n    Month.prototype.createHeaderCell = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            var ele = createElement('span', { innerHTML: capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single') });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                var cellArgs = { date: td.date, type: td.type };\n                var elementId = this.parent.element.id + '_';\n                var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                var templateId = elementId + viewName + 'dateHeaderTemplate';\n                var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n                if (dateTemplate && dateTemplate.length) {\n                    append(dateTemplate, tdEle);\n                }\n            }\n            else {\n                var ele = createElement('span', { className: NAVIGATE_CLASS });\n                var skeleton = 'full';\n                var title = this.parent.globalize.formatDate(td.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', capitalizeFirstWord(title, 'multiple'));\n                var innerText = (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                    this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                    this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                ele.innerHTML = capitalizeFirstWord(innerText, 'single');\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return tdEle;\n    };\n    Month.prototype.getContentSlots = function () {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        var slotDatas = [];\n        var prepareSlots = function (rowIndex, renderDate, resData, classList$$1) {\n            var data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList$$1 || [WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[parseInt(rowIndex.toString(), 10)]) {\n                slotDatas[parseInt(rowIndex.toString(), 10)] = [];\n            }\n            slotDatas[parseInt(rowIndex.toString(), 10)].push(data);\n        };\n        var includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n                var res = _a[_i];\n                var dates = res.renderDates.map(function (date) { return new Date(+date); });\n                var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : res.workDays.length;\n                for (var i = 0; i < (res.renderDates.length / count); i++) {\n                    var colDates = dates.splice(0, count);\n                    for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n                        var colDate = colDates_1[_b];\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            var dates = this.renderDates.map(function (date) { return new Date(+date); });\n            var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            var level = this.colLevels.slice(0, 1)[0];\n            var startIndex = this.renderDates.map(Number).indexOf(+level[0].date);\n            for (var i = 0; i < (this.renderDates.length / count); i++) {\n                var colDates = dates.splice(0, count);\n                var k = startIndex;\n                var _loop_1 = function (j) {\n                    var colDate = colDates[parseInt(k.toString(), 10)];\n                    k++;\n                    if (includeResource) {\n                        var lastRow = this_1.colLevels[(this_1.colLevels.length - 1)];\n                        var rowCount = lastRow.length / count;\n                        var resourcesTd = lastRow.slice(0, rowCount);\n                        if (this_1.parent.activeViewOptions.group.hideNonWorkingDays) {\n                            resourcesTd = lastRow.filter(function (x) { return x.date.getDay() === colDate.getDay(); });\n                            if (resourcesTd.length === 0) {\n                                j = j - 1;\n                                return out_j_1 = j, \"continue\";\n                            }\n                        }\n                        for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            var clsList = void 0;\n                            if (resIndex !== 0) {\n                                clsList = [WORK_CELLS_CLASS, DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[parseInt(resIndex.toString(), 10)], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this_1.colLevels[this_1.colLevels.length - 1][0]);\n                    }\n                    out_j_1 = j;\n                };\n                var this_1 = this, out_j_1;\n                for (var j = startIndex; j < (this.colLevels[0].length + startIndex) && j < colDates.length; j++) {\n                    _loop_1(j);\n                    j = out_j_1;\n                }\n            }\n        }\n        return slotDatas;\n    };\n    Month.prototype.updateClassList = function (data) {\n        if (!this.isCustomMonth() && this.isOtherMonth(data.date)) {\n            data.className.push(OTHERMONTH_CLASS);\n        }\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(DISABLE_DATES);\n        }\n        this.updateSelectedCellClass(data);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.updateSelectedCellClass = function (data) {\n        return;\n    };\n    Month.prototype.isOtherMonth = function (date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    };\n    Month.prototype.renderContentArea = function () {\n        var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        var monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        var tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    };\n    Month.prototype.getContentRows = function () {\n        var trows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var slotDatas = this.getContentSlots();\n        for (var row = 0; row < slotDatas.length; row++) {\n            var ntr = tr.cloneNode();\n            for (var col = 0; col < slotDatas[parseInt(row.toString(), 10)].length; col++) {\n                var ntd = this.createContentTd(slotDatas[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    };\n    Month.prototype.createContentTd = function (data, td) {\n        var ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        var type = data.type;\n        if (data.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: data.date, type: type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(cellTemplate, ntd);\n        }\n        var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(renderCell, args);\n        return ntd;\n    };\n    Month.prototype.renderDateHeaderElement = function (data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var dateHeader = createElement('div', { className: DATE_HEADER_CLASS });\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n            var args = { date: data.date, type: data.type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n            var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n            append(cellHeaderTemplate, dateHeader);\n        }\n        else {\n            var innerText = (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n            dateHeader.innerHTML = capitalizeFirstWord(innerText, 'single');\n        }\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], NAVIGATE_CLASS);\n            var skeleton = 'full';\n            var announcementText = this.parent.globalize.formatDate(data.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            ntd.setAttribute('aria-label', announcementText);\n        }\n    };\n    Month.prototype.getMonthStart = function (currentDate) {\n        var useDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && (this.parent.uiStateValues.isCustomMonth || this.isCustomRange());\n        var date = useDisplayDate ? this.parent.activeViewOptions.displayDate : !(this.parent.uiStateValues.isCustomMonth ||\n            this.isCustomRange()) && this.isCustomMonth() ? currentDate : this.parent.calendarUtil.firstDateOfMonth(currentDate);\n        var monthStart = getWeekFirstDate(date, this.parent.activeViewOptions.firstDayOfWeek);\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    Month.prototype.getMonthEnd = function (currentDate) {\n        if (this.isCustomMonth()) {\n            var start = this.getMonthStart(currentDate);\n            var numberOfDays = WEEK_LENGTH * (this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : DEFAULT_WEEKS);\n            return addDays(start, (numberOfDays - 1));\n        }\n        else {\n            var endDate = addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n            var lastWeekOfMonth = getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n            return addDays(lastWeekOfMonth, WEEK_LENGTH - 1);\n        }\n    };\n    Month.prototype.isCustomRange = function () {\n        var dates = this.parent.getCurrentViewDates();\n        if (dates && dates.length > 0) {\n            var selectedTime = resetTime(this.parent.selectedDate).getTime();\n            var weekFirstDate = getWeekFirstDate(dates[dates.length - 1], this.parent.activeViewOptions.firstDayOfWeek);\n            return !(selectedTime >= getWeekFirstDate(dates[0], this.parent.activeViewOptions.firstDayOfWeek).getTime() &&\n                selectedTime <= addDays(weekFirstDate, 6).getTime());\n        }\n        return false;\n    };\n    Month.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        var currentDate = resetTime(this.parent.selectedDate);\n        var start = this.getMonthStart(currentDate);\n        var monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = addDays(start, 1);\n            if (start.getHours() > 0) {\n                start = resetTime(start);\n            }\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    Month.prototype.getNextPreviousDate = function (type) {\n        if (this.isCustomMonth()) {\n            var dates = this.parent.getCurrentViewDates();\n            var date = getWeekFirstDate(type === 'next' ? dates[dates.length - 1]\n                : dates[0], this.parent.activeViewOptions.firstDayOfWeek);\n            return addDays(date, type === 'next' ? WEEK_LENGTH : -(this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : DEFAULT_WEEKS) * WEEK_LENGTH);\n        }\n        else {\n            return addMonths(this.parent.selectedDate, ((type === 'next' ? 1 : -1) * this.parent.activeViewOptions.interval));\n        }\n    };\n    Month.prototype.getStartDate = function () {\n        return this.getMonthStart(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDate = function () {\n        return this.getMonthEnd(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDateFromStartDate = function (start) {\n        return addDays(new Date(start.getTime()), 1);\n    };\n    Month.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var startDate = this.parent.selectedDate;\n            var endDate = void 0;\n            var updateCustomRange = false;\n            if (this.isCustomMonth()) {\n                var dates = this.parent.getCurrentViewDates();\n                updateCustomRange = dates[0].getMonth() !== dates[dates.length - 1].getMonth() ||\n                    dates[0].getFullYear() !== dates[dates.length - 1].getFullYear();\n                if (updateCustomRange) {\n                    startDate = dates[0];\n                    endDate = dates[dates.length - 1];\n                }\n            }\n            var isUpdateDateRange = (this.parent.currentView !== 'Month' || !this.isCustomMonth());\n            if (this.parent.activeViewOptions.interval > 1 && isUpdateDateRange || updateCustomRange) {\n                endDate = endDate ? endDate : addMonths(lastDateOfMonth(startDate), this.parent.activeViewOptions.interval - 1);\n                if (startDate.getFullYear() === endDate.getFullYear()) {\n                    var monthNames = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                    return capitalizeFirstWord(monthNames, 'single');\n                }\n                var text = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    startDate.getFullYear() + ' - ' +\n                    this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() }) +\n                    this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                return capitalizeFirstWord(text, 'single');\n            }\n            var format = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return capitalizeFirstWord(this.parent.globalize.formatDate(startDate, { format: format, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.parent.selectedDate);\n    };\n    Month.prototype.getLabelText = function (view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    Month.prototype.createWeekNumberElement = function (text) {\n        var tr = createElement('tr');\n        var td = createElement('td', {\n            className: WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        var args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(renderCell, args);\n        return tr;\n    };\n    Month.prototype.unWireEvents = function () {\n        var contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (contentScrollableEle) {\n            EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        }\n    };\n    Month.prototype.isCustomMonth = function () {\n        return this.parent.currentView === 'Month' &&\n            (!isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0);\n    };\n    Month.prototype.getModuleName = function () {\n        return 'month';\n    };\n    Month.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.monthEvent) {\n                this.monthEvent.destroy();\n                this.monthEvent = null;\n            }\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Month;\n}(ViewBase));\n\nvar __extends$22 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * year view\n */\nvar Year = /** @__PURE__ @class */ (function (_super) {\n    __extends$22(Year, _super);\n    function Year(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-year-view';\n        _this.isInverseTableSelect = false;\n        _this.yearEventModule = null;\n        return _this;\n    }\n    Year.prototype.getModuleName = function () {\n        return 'year';\n    };\n    Year.prototype.renderLayout = function (className) {\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        this.setPanel(createElement('div', { className: TABLE_WRAP_CLASS }));\n        var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n        addClass([this.element], [this.viewClass, viewTypeClass, className]);\n        this.renderPanel(className);\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            addClass([this.element], [VIRTUAL_SCROLL_CLASS]);\n        }\n        var calendarTable = this.createTableLayout(OUTER_TABLE_CLASS);\n        this.element.appendChild(calendarTable);\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        var calendarTBody = calendarTable.querySelector('tbody');\n        this.rowCount = this.getRowColumnCount('row');\n        this.columnCount = this.getRowColumnCount('column');\n        this.renderHeader(calendarTBody);\n        this.renderContent(calendarTBody);\n        if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n            this.generateColumnLevels();\n            this.renderResourceMobileLayout();\n        }\n        EventHandler.add(this.element.querySelector('.' + CONTENT_WRAP_CLASS), 'scroll', this.onContentScroll, this);\n        this.parent.notify(contentReady, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Year.prototype.renderHeader = function (headerWrapper) { };\n    Year.prototype.renderContent = function (content) {\n        var tr = createElement('tr');\n        content.appendChild(tr);\n        var td = createElement('td');\n        tr.appendChild(td);\n        this.element.querySelector('tbody').appendChild(tr);\n        var contentWrapper = createElement('div', { className: CONTENT_WRAP_CLASS });\n        td.appendChild(contentWrapper);\n        var calendarTable = this.createTableLayout('e-calendar-table');\n        contentWrapper.appendChild(calendarTable);\n        var cTr = createElement('tr');\n        calendarTable.querySelector('tbody').appendChild(cTr);\n        var cTd = createElement('td');\n        cTr.appendChild(cTd);\n        var calendarWrapper = createElement('div', { className: 'e-calendar-wrapper' });\n        cTd.appendChild(calendarWrapper);\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var calendarElement = createElement('div', {\n                className: 'e-month-calendar e-calendar',\n                attrs: { 'data-role': 'calendar' }\n            });\n            calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n            calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n            calendarWrapper.appendChild(calendarElement);\n        }\n        this.renderDates.splice(0, 1);\n    };\n    Year.prototype.renderCalendarHeader = function (currentDate) {\n        var headerWrapper = createElement('div', { className: 'e-header e-month' });\n        var headerContent = createElement('div', { className: 'e-day e-title' });\n        if (this.parent.activeViewOptions.monthHeaderTemplate) {\n            var args = { date: currentDate, type: 'monthHeader' };\n            this.renderTemplates(this.parent.getMonthHeaderTemplate(), args, 'monthHeaderTemplate', this.parent.activeViewOptions.monthHeaderTemplateName, headerContent);\n        }\n        else {\n            headerContent.innerHTML = this.getMonthName(currentDate);\n        }\n        headerWrapper.appendChild(headerContent);\n        this.parent.trigger(renderCell, { elementType: 'headerCells', element: headerContent, date: currentDate });\n        return headerWrapper;\n    };\n    Year.prototype.renderCalendarContent = function (currentDate) {\n        var dateCollection = this.getMonthDates(currentDate);\n        var contentWrapper = createElement('div', { className: 'e-content e-month' });\n        var contentTable = this.createTableLayout('e-calendar-table ' + CONTENT_TABLE_CLASS);\n        contentWrapper.appendChild(contentTable);\n        this.setAriaAttributes(contentTable);\n        var thead = createElement('thead', { className: 'e-week-header' });\n        var tr = createElement('tr');\n        var currentWeek = getWeekFirstDate(firstDateOfMonth(currentDate), this.parent.firstDayOfWeek);\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('th'));\n        }\n        for (var i = 0; i < WEEK_LENGTH; i++) {\n            if (this.parent.activeViewOptions.dayHeaderTemplate) {\n                var th = createElement('th');\n                var args = { date: currentWeek, type: 'dayHeader' };\n                this.renderTemplates(this.parent.getDayHeaderTemplate(), args, 'dayHeaderTemplate', this.parent.activeViewOptions.dayHeaderTemplateName, th);\n                tr.appendChild(th);\n            }\n            else {\n                tr.appendChild(createElement('th', { innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()] }));\n            }\n            currentWeek = new Date(currentWeek.getTime() + MS_PER_DAY);\n        }\n        thead.appendChild(tr);\n        prepend([thead], contentTable);\n        var tbody = contentTable.querySelector('tbody');\n        while (dateCollection.length > 0) {\n            var weekDates = dateCollection.splice(0, WEEK_LENGTH);\n            var tr_1 = createElement('tr');\n            if (this.parent.activeViewOptions.showWeekNumber) {\n                var weekNumber = this.parent.getWeekNumberContent(weekDates);\n                var td = createElement('td', {\n                    className: 'e-week-number',\n                    attrs: { 'title': this.parent.localeObj.getConstant('week') + ' ' + weekNumber },\n                    innerHTML: weekNumber\n                });\n                tr_1.appendChild(td);\n                this.parent.trigger(renderCell, { elementType: 'weekNumberCells', element: td });\n            }\n            for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n                var date = weekDates_1[_i];\n                var td = createElement('td', {\n                    className: 'e-cell ' + WORK_CELLS_CLASS,\n                    attrs: { 'data-date': date.getTime().toString() }\n                });\n                if (this.parent.activeViewOptions.cellHeaderTemplate) {\n                    var args = { date: date, type: 'monthCells' };\n                    this.renderTemplates(this.parent.getCellHeaderTemplate(), args, 'cellHeaderTemplate', this.parent.activeViewOptions.cellHeaderTemplateName, td);\n                }\n                else {\n                    var span = createElement('span', {\n                        className: 'e-day', innerHTML: this.parent.globalize.formatDate(date, { skeleton: 'd', calendar: this.parent.getCalendarMode() }),\n                        attrs: { title: this.parent.globalize.formatDate(date, { type: 'date', skeleton: 'full' }) }\n                    });\n                    td.appendChild(span);\n                }\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var args = { date: date, type: 'monthCells' };\n                    this.renderTemplates(this.parent.getCellTemplate(), args, 'cellTemplate', this.parent.activeViewOptions.cellTemplateName, td);\n                }\n                var classList$$1 = [];\n                if (currentDate.getMonth() !== date.getMonth()) {\n                    classList$$1.push(OTHERMONTH_CLASS);\n                }\n                if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n                    classList$$1 = classList$$1.concat(['e-today', 'e-selected']);\n                }\n                if (classList$$1.length > 0) {\n                    addClass([td], classList$$1);\n                }\n                tr_1.appendChild(td);\n                if (currentDate.getMonth() === date.getMonth()) {\n                    this.renderDates.push(new Date(date));\n                }\n                if (!this.parent.isMinMaxDate(date)) {\n                    addClass([td], DISABLE_DATES);\n                }\n                else {\n                    EventHandler.add(td, 'click', this.onCellClick, this);\n                    if (!this.parent.isAdaptive) {\n                        EventHandler.add(td, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n                    }\n                }\n                this.parent.trigger(renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n            tbody.appendChild(tr_1);\n        }\n        return contentWrapper;\n    };\n    Year.prototype.createTableColGroup = function (count) {\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < count; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        return colGroupEle;\n    };\n    Year.prototype.getMonthName = function (date) {\n        var month = this.parent.globalize.formatDate(date, {\n            format: this.parent.activeViewOptions.dateFormat || 'MMMM y',\n            calendar: this.parent.getCalendarMode()\n        });\n        return capitalizeFirstWord(month, 'multiple');\n    };\n    Year.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        colLevels.pop();\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    // eslint-disable-next-line max-len\n    Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n        if (startHour === void 0) { startHour = this.parent.workHours.start; }\n        if (endHour === void 0) { endHour = this.parent.workHours.end; }\n        var dateCol = [{\n                date: renderDates[0], type: 'dateHeader', className: [HEADER_CELLS_CLASS], colSpan: 1, workDays: workDays,\n                startHour: new Date(+this.parent.globalize.parseDate(startHour, { skeleton: 'Hm' })),\n                endHour: new Date(+this.parent.globalize.parseDate(endHour, { skeleton: 'Hm' }))\n            }];\n        return dateCol;\n    };\n    Year.prototype.getMonthDates = function (date) {\n        var startDate = getWeekFirstDate(firstDateOfMonth(date), this.parent.firstDayOfWeek);\n        var endDate = addDays(new Date(+startDate), (6 * WEEK_LENGTH));\n        var dateCollection = [];\n        for (var start = startDate; start.getTime() < endDate.getTime(); start = addDays(start, 1)) {\n            dateCollection.push(resetTime(new Date(start)));\n        }\n        return dateCollection;\n    };\n    Year.prototype.getRowColumnCount = function (type) {\n        var months = this.getMonths();\n        var year = this.parent.selectedDate.getFullYear();\n        var monthDaysCount = [];\n        for (var _i = 0, months_2 = months; _i < months_2.length; _i++) {\n            var month = months_2[_i];\n            monthDaysCount.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n        var maxCount = Math.max.apply(Math, monthDaysCount);\n        var count;\n        if (type === 'row') {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? months.length : maxCount;\n        }\n        else {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : months.length;\n        }\n        return count;\n    };\n    Year.prototype.isCurrentDate = function (date) {\n        return resetTime(new Date()).getTime() === resetTime(new Date(date.getTime())).getTime();\n    };\n    Year.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.activeViewOptions.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    Year.prototype.renderTemplates = function (fn, args, tName, vName, ele) {\n        var templateId = this.parent.element.id + '_' + vName + tName;\n        var template = [].slice.call(fn(args, this.parent, tName, templateId, false));\n        append(template, ele);\n    };\n    Year.prototype.onCellClick = function (e) {\n        var target = closest(e.target, '.' + WORK_CELLS_CLASS);\n        var startDate = this.parent.getDateFromElement(target);\n        this.parent.activeCellsData = this.parent.getCellDetails(target);\n        var isPrevious = startDate.getTime() < this.getStartDate().getTime();\n        if (isPrevious || startDate.getTime() > this.getEndDate().getTime()) {\n            this.parent.changeDate(this.parent.activeView.getNextPreviousDate(isPrevious ? 'previous' : 'next'), e);\n            var activeDate = this.parent.activeCellsData.startTime.getTime();\n            var inRange = activeDate >= this.getStartDate().getTime() && activeDate <= this.getEndDate().getTime();\n            var dateAttr = inRange ? activeDate : (isPrevious ? this.getEndDate() : this.getStartDate()).getTime();\n            var selectedCell = this.parent.element.querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + dateAttr + '\"]');\n            this.parent.selectCell(selectedCell);\n            this.parent.activeCellsData = this.parent.getCellDetails(selectedCell);\n        }\n        else {\n            var endDate = addDays(new Date(startDate.getTime()), 1);\n            var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n            var moreEventArgs = { date: startDate, event: filteredEvents, element: e.target };\n            if (target.classList.contains(OTHERMONTH_CLASS)) {\n                target = this.parent.element.querySelector(':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + target.getAttribute('data-date') + '\"]');\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(cellClick, args);\n            this.parent.quickPopup.moreEventClick(moreEventArgs, endDate);\n        }\n    };\n    Year.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var headerWrapper = this.getDatesHeaderElement();\n        this.parent.notify(virtualScroll, e);\n        if (headerWrapper) {\n            headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n        }\n        var scrollTopSelector = \".\" + MONTH_HEADER_WRAPPER + \",.\" + RESOURCE_COLUMN_WRAP_CLASS;\n        var scrollTopElement = this.element.querySelector(scrollTopSelector);\n        if (scrollTopElement) {\n            scrollTopElement.scrollTop = target.scrollTop;\n        }\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n        this.parent.uiStateValues.left = e.target.scrollLeft;\n        this.setPersistence();\n    };\n    Year.prototype.onScrollUiUpdate = function (args) {\n        var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n        var headerWrapper = this.element.querySelector('.' + DATE_HEADER_CONTAINER_CLASS);\n        if (headerWrapper) {\n            height -= headerWrapper.offsetHeight;\n        }\n        var contentWrapper = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (contentWrapper) {\n            contentWrapper.style.height = formatUnit(height);\n        }\n        if (!this.parent.isAdaptive && headerWrapper) {\n            var scrollBarWidth = getScrollBarWidth();\n            if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n                headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n            }\n            else {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n                headerWrapper.style[args.cssProperties.padding] = '';\n            }\n        }\n        this.setColWidth(this.getContentAreaElement());\n        var leftPanelSelector = \".\" + MONTH_HEADER_WRAPPER + \",.\" + RESOURCE_COLUMN_WRAP_CLASS;\n        var leftPanelElement = this.element.querySelector(leftPanelSelector);\n        if (leftPanelElement) {\n            var isYScroll = contentWrapper.scrollWidth > contentWrapper.clientWidth;\n            leftPanelElement.style.height = formatUnit(height - (isYScroll ? 17 : 0));\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.parent.uiStateValues.isInitial = false;\n                this.parent.uiStateValues.top = this.parent.uiStateValues.left = 0;\n            }\n            else {\n                if (leftPanelElement) {\n                    leftPanelElement.scrollTop = this.parent.uiStateValues.top;\n                }\n                contentWrapper.scrollTop = this.parent.uiStateValues.top;\n                contentWrapper.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        this.retainScrollPosition();\n    };\n    Year.prototype.getStartDate = function () {\n        return new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear % 12, 1);\n    };\n    Year.prototype.getEndDate = function () {\n        return addDays(addMonths(this.getStartDate(), this.parent.monthsCount), -1);\n    };\n    Year.prototype.startDate = function () {\n        return this.parent.currentView === 'Year' ? getWeekFirstDate(this.getStartDate(), this.parent.firstDayOfWeek) : this.getStartDate();\n    };\n    Year.prototype.endDate = function () {\n        return this.parent.currentView === 'Year' ? addDays(getWeekLastDate(this.getEndDate(), this.parent.firstDayOfWeek), 1) :\n            addDays(this.getEndDate(), 1);\n    };\n    Year.prototype.getEndDateFromStartDate = function (start) {\n        var date = new Date(start.getTime());\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            date = lastDateOfMonth(date);\n        }\n        return addDays(new Date(date.getTime()), 1);\n    };\n    Year.prototype.getNextPreviousDate = function (type) {\n        return addYears(this.parent.selectedDate, ((type === 'next') ? 1 : -1));\n    };\n    Year.prototype.getDateRangeText = function () {\n        var startDate = this.getStartDate();\n        var endDate = this.getEndDate();\n        if (startDate.getFullYear() !== endDate.getFullYear()) {\n            return this.parent.globalize.formatDate(startDate, { skeleton: 'yMMM' }) + ' - ' + this.parent.globalize.formatDate(endDate, { skeleton: 'yMMM' });\n        }\n        else {\n            return this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'y' });\n        }\n    };\n    Year.prototype.addEventListener = function () {\n        this.parent.on(scrollUiUpdate, this.onScrollUiUpdate, this);\n        this.parent.on(dataReady, this.onDataReady, this);\n    };\n    Year.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.onScrollUiUpdate);\n            this.parent.off(dataReady, this.onDataReady);\n        }\n    };\n    Year.prototype.onDataReady = function (args) {\n        this.yearEventModule = new YearEvent(this.parent);\n        this.yearEventModule.renderAppointments();\n        this.parent.notify(eventsLoaded, args);\n    };\n    Year.prototype.scrollToDate = function (scrollDate) {\n        var date = +new Date(resetTime(scrollDate));\n        var element = this.element.querySelector('.' + WORK_CELLS_CLASS + ':not(.' + OTHERMONTH_CLASS + ')[data-date=\"' + date + '\"]');\n        if (element) {\n            element = closest(element, '.e-month-calendar');\n            this.getContentAreaElement().scrollTop = element.offsetTop;\n        }\n    };\n    Year.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            var contentScroll = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (contentScroll) {\n                EventHandler.remove(contentScroll, 'scroll', this.onContentScroll);\n            }\n            if (this.yearEventModule) {\n                this.yearEventModule.destroy();\n                this.yearEventModule = null;\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Year;\n}(ViewBase));\n\nvar __extends$24 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar AgendaBase = /** @__PURE__ @class */ (function (_super) {\n    __extends$24(AgendaBase, _super);\n    function AgendaBase(parent) {\n        return _super.call(this, parent) || this;\n    }\n    // eslint-disable-next-line max-len\n    AgendaBase.prototype.createAgendaContentElement = function (type, listData, aTd, groupOrder, groupIndex) {\n        var _this = this;\n        var listElement;\n        var fieldMapping = this.parent.eventFields;\n        if (type === 'noEvents') {\n            var noEvents = [{ 'subject': this.parent.localeObj.getConstant('noEvents') }];\n            listElement = ListBase.createList(this.parent.createElement, noEvents, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass,\n                template: \"<div class=\\\"\" + AGENDA_NO_EVENT_CLASS + \"\\\">\" + this.parent.localeObj.getConstant('noEvents') + \"</div>\"\n            });\n            if (listElement.querySelector('.e-agenda-item').children.length === 0) {\n                listElement.firstElementChild.appendChild(createElement('div', { className: AGENDA_NO_EVENT_CLASS, innerHTML: this.parent.localeObj.getConstant('noEvents') }));\n            }\n        }\n        else {\n            listElement = ListBase.createList(this.parent.createElement, listData, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass\n            });\n            var listElements = [].slice.call(listElement.children);\n            listElements.forEach(function (element, li) {\n                var appWrapper = createElement('div', {\n                    className: APPOINTMENT_CLASS, attrs: {\n                        'data-id': 'Appointment_' + listData[parseInt(li.toString(), 10)][\"\" + _this.parent.eventFields.id],\n                        'data-guid': listData[parseInt(li.toString(), 10)].Guid,\n                        'role': 'button',\n                        'tabindex': '0',\n                        'aria-disabled': _this.parent.eventBase.getReadonlyAttribute(listData[parseInt(li.toString(), 10)]),\n                        'aria-label': _this.parent.getAnnouncementString(listData[parseInt(li.toString(), 10)])\n                    }\n                });\n                if (!isNullOrUndefined(groupIndex)) {\n                    appWrapper.setAttribute('data-group-index', groupIndex.toString());\n                }\n                _this.parent.eventBase.applyResourceColor(appWrapper, listData[parseInt(li.toString(), 10)], 'borderColor', groupOrder);\n                var templateEle;\n                if (!isNullOrUndefined(_this.parent.activeViewOptions.eventTemplate)) {\n                    addClass([appWrapper], EVENT_TEMPLATE);\n                    var scheduleId = _this.parent.element.id + '_';\n                    var viewName = _this.parent.activeViewOptions.eventTemplateName;\n                    var templateId = scheduleId + viewName + 'eventTemplate';\n                    templateEle = _this.parent.getAppointmentTemplate()(listData[parseInt(li.toString(), 10)], _this.parent, 'eventTemplate', templateId, false);\n                    if (!isNullOrUndefined(listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceRule])) {\n                        var iconClass = (listData[parseInt(li.toString(), 10)][fieldMapping.id] ===\n                            listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceID]) ?\n                            EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                        appWrapper.appendChild(createElement('div', { className: ICON + ' ' + iconClass }));\n                    }\n                }\n                else {\n                    templateEle = _this.createAppointment(listData[parseInt(li.toString(), 10)]);\n                }\n                append([].slice.call(templateEle), appWrapper);\n                removeChildren(element);\n                element.appendChild(appWrapper);\n                var args = {\n                    data: extend({}, listData[parseInt(li.toString(), 10)], null, true),\n                    element: element, cancel: false\n                };\n                _this.parent.trigger(eventRendered, args, function (eventArgs) {\n                    if (eventArgs.cancel) {\n                        remove(element);\n                    }\n                });\n            });\n        }\n        aTd.appendChild(listElement);\n        if ((this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0)\n            || this.parent.currentView === 'Agenda') {\n            addClass([aTd], AGENDA_DAY_BORDER_CLASS);\n        }\n        this.parent.renderTemplates();\n        return aTd;\n    };\n    AgendaBase.prototype.createAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var eventSubject = (event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventLocation = (event[fieldMapping.location] || this.parent.eventSettings.fields.location.default);\n        var appSubjectWrap = createElement('div', { className: SUBJECT_WRAP });\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            eventSubject += ',';\n        }\n        var appSubjectText = createElement('div', { className: SUBJECT_CLASS });\n        this.parent.sanitize(eventSubject, appSubjectText);\n        appSubjectWrap.appendChild(appSubjectText);\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            var appLocation = createElement('div', { className: LOCATION_CLASS });\n            this.parent.sanitize(eventLocation, appLocation);\n            appSubjectWrap.appendChild(appLocation);\n        }\n        if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n            var iconClass = (event[fieldMapping.id] === event[fieldMapping.recurrenceID]) ?\n                EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appSubjectWrap.appendChild(createElement('div', { className: ICON + ' ' + iconClass }));\n        }\n        var strDate = event[fieldMapping.startTime];\n        var endDate = event[fieldMapping.endTime];\n        var isAllDay = event[fieldMapping.isAllDay];\n        var allDayStr = this.parent.localeObj.getConstant('allDay');\n        var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n        if (!isNullOrUndefined(event.data)) {\n            var milliSeconds = (endDate.getTimezoneOffset() !== strDate.getTimezoneOffset()) ?\n                (endDate.getTime() - strDate.getTime() + 3600000) : (endDate.getTime() - strDate.getTime());\n            var eventString = (milliSeconds / MS_PER_DAY) >= 1 ? allDayStr : timeStr;\n            allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' '\n                + event.data.index + '/' + event.data.count + ')';\n        }\n        var displayStr = (!isNullOrUndefined(event.data) || isAllDay) ? allDayStr : timeStr;\n        var appDateTime = createElement('div', { className: DATE_TIME_CLASS, innerHTML: displayStr });\n        return [appSubjectWrap, appDateTime];\n    };\n    AgendaBase.prototype.processAgendaEvents = function (events) {\n        var eventsProcessed = [];\n        if (isNullOrUndefined(events)) {\n            return eventsProcessed;\n        }\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            var spanned = this.parent.eventBase.splitEventByDay(event_1);\n            eventsProcessed = eventsProcessed.concat(spanned.length > 1 ? spanned : event_1);\n        }\n        return eventsProcessed;\n    };\n    AgendaBase.prototype.wireEventActions = function () {\n        var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + APPOINTMENT_CLASS));\n        for (var _i = 0, eventElement_1 = eventElement; _i < eventElement_1.length; _i++) {\n            var element = eventElement_1[_i];\n            this.parent.eventBase.wireAppointmentEvents(element, this.parent.getEventDetails(element), true);\n        }\n        var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n        for (var _a = 0, dateHeaderElement_1 = dateHeaderElement; _a < dateHeaderElement_1.length; _a++) {\n            var element = dateHeaderElement_1[_a];\n            EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n    };\n    AgendaBase.prototype.calculateResourceTableElement = function (tBody, noOfDays, agendaDate) {\n        if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n            var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n            this.parent.resourceBase.generateResourceLevels(level);\n        }\n        var agendaLastDate = addDays(new Date(agendaDate.getTime()), noOfDays);\n        var days = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n        var resColl = this.parent.resourceBase.resourceCollection;\n        var resData = this.parent.resourceBase.lastResourceLevel;\n        var initialDate = agendaDate;\n        for (var i = 0; i < days; i++) {\n            var lastLevelInfo = [];\n            var tempLastLevelInfo = [];\n            var tempIndex = 0;\n            var eventObj = void 0;\n            var dateObj = void 0;\n            var firstDate = addDays(initialDate, i);\n            var finalDate = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda')\n                ? addDays(firstDate, 1) : agendaLastDate;\n            var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n            if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                for (var res = 0; res < resData.length; res++) {\n                    noOfDays = (!this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n                    var data = [];\n                    agendaDate = firstDate;\n                    // eslint-disable-next-line max-len\n                    var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[parseInt(res.toString(), 10)]);\n                    if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                        for (var r = 0; r < noOfDays; r++) {\n                            // eslint-disable-next-line max-len\n                            var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, addDays(agendaDate, 1), resDataCollection, undefined);\n                            if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays ||\n                                this.parent.currentView === 'MonthAgenda') {\n                                data.push(resDayCollection[0]);\n                                eventObj = {\n                                    rowSpan: 1, type: 'eventColumn', resource: resColl[resColl.length - 1],\n                                    groupIndex: resData[parseInt(res.toString(), 10)].groupIndex,\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    eventData: resDayCollection, date: agendaDate\n                                };\n                                dateObj = {\n                                    rowSpan: 1, type: 'dateColumn', resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    date: agendaDate\n                                };\n                                if (!lastLevelInfo[parseInt(tempIndex.toString(), 10)]) {\n                                    lastLevelInfo[parseInt(tempIndex.toString(), 10)] = [];\n                                }\n                                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(eventObj);\n                                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(dateObj);\n                                tempIndex++;\n                            }\n                            agendaDate = addDays(agendaDate, 1);\n                            if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate\n                                || this.parent.currentView === 'MonthAgenda') {\n                                lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = AGENDA_DAY_BORDER_CLASS;\n                                var tempObj = {\n                                    rowSpan: data.length, type: 'resourceColumn', resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder.slice(0, -1),\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    groupIndex: (lastLevelInfo.length - data.length), className: [RESOURCE_NAME],\n                                    date: agendaDate\n                                };\n                                lastLevelInfo[parseInt((lastLevelInfo.length - data.length).toString(), 10)].push(tempObj);\n                                tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                                break;\n                            }\n                        }\n                    }\n                }\n                var topResources = resColl.slice(0, -1);\n                var tempGroupedData = [];\n                var totalRowSpan = 0;\n                for (var y = 0; y < topResources.length; y++) {\n                    var data = topResources[topResources.length - (y + 1)].dataSource;\n                    for (var x = 0; x < data.length; x++) {\n                        var z = 0;\n                        for (var u = 0; u < tempLastLevelInfo.length; u++) {\n                            // eslint-disable-next-line max-len\n                            if (tempLastLevelInfo[parseInt(u.toString(), 10)].groupOrder[topResources.length - (y + 1)] === data[parseInt(x.toString(), 10)][topResources[topResources.length - (y + 1)].idField]) {\n                                totalRowSpan = totalRowSpan + tempLastLevelInfo[parseInt(u.toString(), 10)].rowSpan;\n                                tempGroupedData.push(extend({}, tempLastLevelInfo[parseInt(u.toString(), 10)], null, true));\n                            }\n                            if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                                tempGroupedData[0].rowSpan = totalRowSpan;\n                                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                                tempGroupedData[0].resourceData = data[parseInt(x.toString(), 10)];\n                                tempGroupedData[0].date = agendaDate;\n                                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                                tempGroupedData = [];\n                                totalRowSpan = 0;\n                            }\n                        }\n                    }\n                }\n                this.createResourceTableRow(lastLevelInfo, tBody);\n            }\n        }\n        var totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n        if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            this.renderEmptyContent(tBody, initialDate);\n        }\n    };\n    AgendaBase.prototype.createResourceTableRow = function (tContent, tBody) {\n        var tr = createElement('tr');\n        var ntr;\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var tempData;\n        var rowSpan = 0;\n        var level;\n        if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            var tContentCollection = [];\n            var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n            for (var w = 0; w < tContent.length; w++) {\n                tContentCollection = tContentCollection.concat(tContent[parseInt(w.toString(), 10)]);\n            }\n            level = (parentCollection.length > 0) ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n            var rowSpanCollection = tContentCollection.filter(function (data) { return data.type === level; });\n            for (var x = 0; x < rowSpanCollection.length; x++) {\n                rowSpan = rowSpan + rowSpanCollection[parseInt(x.toString(), 10)].rowSpan;\n            }\n        }\n        for (var row = 0; row < tContent.length; row++) {\n            ntr = tr.cloneNode();\n            for (var col = tContent[parseInt(row.toString(), 10)].length - 1; col >= 0; col--) {\n                var data = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n                var ntd = td.cloneNode();\n                if (data.type === 'dateColumn') {\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        tempData = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n                        continue;\n                    }\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    ntd.appendChild(this.createDateHeaderElement(data.date));\n                    var className = [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS];\n                    if (data.cssClass) {\n                        className.push(data.cssClass);\n                    }\n                    addClass([ntd], className);\n                    if (this.isCurrentDate(new Date(data.date.getTime()))) {\n                        addClass(ntd.childNodes, AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else if (data.type === 'eventColumn') {\n                    var elementType = (data.eventData.length === 0) ? 'noEvents' : 'data';\n                    ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        addClass([ntd], [AGENDA_CELLS_CLASS, AGENDA_DAY_PADDING_CLASS]);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else {\n                    ntd.setAttribute('rowspan', data.rowSpan.toString());\n                    addClass([ntd], AGENDA_RESOURCE_CLASS);\n                    this.setResourceHeaderContent(ntd, data, data.className[0]);\n                    ntr.appendChild(ntd);\n                }\n            }\n            if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n                var ntd = td.cloneNode();\n                ntd.setAttribute('data-date', tempData.date.getTime().toString());\n                ntd.setAttribute('rowspan', rowSpan.toString());\n                ntd.appendChild(this.createDateHeaderElement(tempData.date));\n                addClass([ntd], [AGENDA_CELLS_CLASS, AGENDA_DATE_CLASS, DATE_BORDER_CLASS]);\n                var daysCount = getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n                ntr.setAttribute('data-row-index', daysCount.toString());\n                if (this.parent.element.querySelector(\".e-agenda-view tr[data-row-index=\\\"\" + daysCount + \"\\\"]\")) {\n                    break;\n                }\n                ntr.insertBefore(ntd, ntr.childNodes[0]);\n            }\n            tBody.appendChild(ntr);\n        }\n    };\n    AgendaBase.prototype.createDateHeaderElement = function (date) {\n        var dateHeader;\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            dateHeader = createElement('div', { className: AGENDA_HEADER_CLASS });\n            var args = { date: date, type: 'dateHeader' };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'dateHeaderTemplate';\n            var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false));\n            append(dateTemplate, dateHeader);\n        }\n        else {\n            dateHeader = this.getMobileDateElement(date, AGENDA_HEADER_CLASS);\n        }\n        return dateHeader;\n    };\n    AgendaBase.prototype.renderEmptyContent = function (tBody, agendaDate) {\n        var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n        var eTd = eTr.children[0];\n        var noEvents = createElement('div', {\n            className: AGENDA_EMPTY_EVENT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noEvents')\n        });\n        eTd.appendChild(noEvents);\n        tBody.appendChild(eTr);\n    };\n    AgendaBase.prototype.createTableRowElement = function (date, type) {\n        var daysCount = getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n        var tr = createElement('tr', { attrs: { 'data-row-index': daysCount.toString() } });\n        var td = createElement('td', {\n            attrs: {\n                'class': (type === 'monthHeader') ? MONTH_HEADER_CLASS : AGENDA_CELLS_CLASS,\n                'aria-selected': 'false',\n                'data-column-index': daysCount.toString(),\n                'data-date': date.getTime().toString()\n            }\n        });\n        var dTd = td.cloneNode();\n        var aTd = td.cloneNode();\n        tr.appendChild(dTd);\n        if (type !== 'noEvents') {\n            tr.appendChild(aTd);\n        }\n        return tr;\n    };\n    AgendaBase.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    return AgendaBase;\n}(ViewBase));\n\nvar __extends$23 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * agenda view\n */\nvar Agenda = /** @__PURE__ @class */ (function (_super) {\n    __extends$23(Agenda, _super);\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        return _this;\n    }\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = resetTime(this.parent.selectedDate);\n        this.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ?\n            args.processedData : this.parent.eventsProcessed;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n        var agendaDate = resetTime(this.parent.selectedDate);\n        var tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n        removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.wireEventActions();\n        var contentArea = closest(tBody, '.' + CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var data = _a[_i];\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.refreshHeader = function () {\n        var tBody = this.element.querySelector('.' + CONTENT_TABLE_CLASS + ' tbody');\n        if (this.parent.activeViewOptions.group.byDate) {\n            removeChildren(tBody);\n        }\n        else {\n            remove(tBody.firstElementChild);\n        }\n        var agendaDate = resetTime(this.parent.selectedDate);\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n    };\n    Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            var contentArea = this.getContentAreaElement();\n            var contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                var emptyTBody_1 = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody_1, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.renderEmptyContent(tBody, agendaDate);\n        }\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            agendaDate = isObject[0][fieldMapping.startTime];\n            agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange();\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n            }\n            else {\n                for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n                    var filterData = this.appointmentFiltering(agendaDate);\n                    var nTr = this.createTableRowElement(agendaDate, 'data');\n                    if (this.element.querySelector('tr[data-row-index=\"' + parseInt(nTr.getAttribute('data-row-index'), 10) + '\"]')) {\n                        agendaDate = addDays(agendaDate, 1);\n                        continue;\n                    }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    Agenda.prototype.agendaScrolling = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event);\n        var scrollDate = this.parent.getDateFromElement(topElement);\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n                        var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight >= (scrollHeight - 5)) {\n            filterDate = this.getPreviousNextDate(addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[parseInt(a.toString(), 10)];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(date);\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            var filterData = this.appointmentFiltering(currentDate);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                daysCount++;\n            }\n            currentDate = addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: addDays(endDate, 1) } : { start: endDate, end: addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = resetTime(new Date(startDate.getTime()));\n            dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fields = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fields.startTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fieldMapping.endTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return resetTime(addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'next') ? 1 : -1;\n        return addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var element = closest(e.currentTarget, '.' + AGENDA_CELLS_CLASS);\n        var date = this.parent.getDateFromElement(element);\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setProperties({ selectedDate: date }, true);\n            this.parent.changeView('Day', e);\n        }\n    };\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + CONTENT_WRAP_CLASS), scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(scrollUiUpdate, this.onAgendaScrollUiUpdate);\n            this.parent.off(dataReady, this.eventLoad);\n        }\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n        }\n    };\n    Agenda.prototype.scrollToDate = function (scrollDate) {\n        var date = new Date(+resetTime(scrollDate));\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, addDays(date, 1), true).length > 0) {\n                this.parent.changeDate(date);\n            }\n        }\n        else {\n            var dateElement = this.element.querySelector('.' + AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n            if (dateElement) {\n                this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n            }\n        }\n    };\n    Agenda.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Agenda;\n}(AgendaBase));\n\nvar __extends$25 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * month agenda view\n */\nvar MonthAgenda = /** @__PURE__ @class */ (function (_super) {\n    __extends$25(MonthAgenda, _super);\n    function MonthAgenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'narrow';\n        _this.viewClass = 'e-month-agenda-view';\n        _this.monthAgendaDate = new Date('' + parent.selectedDate);\n        return _this;\n    }\n    MonthAgenda.prototype.getModuleName = function () {\n        return 'monthAgenda';\n    };\n    MonthAgenda.prototype.renderAppointmentContainer = function () {\n        var contentArea = this.getContentAreaElement();\n        var wrapperContainer = createElement('div', { className: WRAPPER_CONTAINER_CLASS });\n        contentArea.appendChild(wrapperContainer);\n        var appWrap = createElement('div', { className: APPOINTMENT_WRAP_CLASS });\n        wrapperContainer.appendChild(appWrap);\n        this.appendAppContainer(appWrap);\n        this.setEventWrapperHeight();\n    };\n    MonthAgenda.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive) {\n            return 'narrow';\n        }\n        return 'abbreviated';\n    };\n    MonthAgenda.prototype.updateSelectedCellClass = function (data) {\n        if (resetTime(data.date).getTime() === resetTime(this.monthAgendaDate).getTime()) {\n            data.className.push(SELECTED_CELL_CLASS);\n        }\n    };\n    MonthAgenda.prototype.setEventWrapperHeight = function () {\n        var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n        var resourceWrapper = this.parent.element.querySelector('.' + RESOURCE_HEADER_TOOLBAR);\n        if (resourceWrapper) {\n            headerHeight += resourceWrapper.offsetHeight;\n        }\n        var contentArea = this.getContentAreaElement().firstElementChild;\n        var dateHeader = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        var availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight;\n        var contentAreaHeight = (this.parent.activeViewOptions.interval > 1) ?\n            Math.round(availHeight * 0.8) : contentArea.offsetHeight;\n        var appContainerHeight = availHeight - contentAreaHeight;\n        var wrapperContainer = this.element.querySelector('.' + WRAPPER_CONTAINER_CLASS);\n        var eventWrapper = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            if (this.parent.activeViewOptions.interval > 1) {\n                contentArea.style.height = formatUnit(contentAreaHeight);\n                EventHandler.add(contentArea, 'scroll', this.onContentScroll, this);\n            }\n            wrapperContainer.style.height = eventWrapper.style.height = formatUnit(appContainerHeight);\n        }\n    };\n    MonthAgenda.prototype.onDataReady = function (args) {\n        this.setEventWrapperHeight();\n        this.clearElements();\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.agendaBase = this.getAgendaBase();\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var count = 0;\n        for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            var filterData = this.appointmentFiltering(date);\n            var workCell = this.element.querySelectorAll('.' + WORK_CELLS_CLASS)[parseInt(count.toString(), 10)];\n            if (filterData.length > 0) {\n                if (!workCell.querySelector('.' + APPOINTMENT_INDICATOR_CLASS)) {\n                    workCell.appendChild(createElement('div', { className: APPOINTMENT_INDICATOR_CLASS }));\n                }\n                if (date.getTime() === resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n                    this.onEventRender(filterData, date);\n                }\n            }\n            count++;\n        }\n        this.parent.notify(eventsLoaded, {});\n    };\n    MonthAgenda.prototype.onCellClick = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        var filterData = this.appointmentFiltering(event.startTime);\n        this.onEventRender(filterData, event.startTime);\n        this.parent.notify(eventsLoaded, {});\n        this.monthAgendaDate = new Date('' + event.startTime);\n    };\n    MonthAgenda.prototype.onEventRender = function (events, date) {\n        this.agendaBase = this.getAgendaBase();\n        var appWrap = this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS);\n        removeChildren(appWrap);\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            if (events.length > 0) {\n                var appContainer = createElement('div', { className: APPOINTMENT_CONTAINER_CLASS });\n                appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        else {\n            if (events.length > 0) {\n                var table = this.createTableLayout();\n                var tBody = table.querySelector('tbody');\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n                table.appendChild(tBody);\n                appWrap.appendChild(table);\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        this.agendaBase.wireEventActions();\n    };\n    MonthAgenda.prototype.appointmentFiltering = function (date) {\n        var dateStart = resetTime(new Date(date.getTime()));\n        var dateEnd = setTime(new Date(dateStart.getTime()), MS_PER_DAY);\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    };\n    MonthAgenda.prototype.clearElements = function () {\n        var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + APPOINTMENT_INDICATOR_CLASS));\n        for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n            var appointmentIndicator = appointmentIndicators_1[_i];\n            remove(appointmentIndicator);\n        }\n        this.appendAppContainer(this.element.querySelector('.' + APPOINTMENT_WRAP_CLASS));\n    };\n    MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n        var app = createElement('div', { className: APPOINTMENT_CONTAINER_CLASS });\n        addClass([app], AGENDA_NO_EVENT_CLASS);\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n        removeChildren(appWrap);\n        appWrap.appendChild(app);\n    };\n    MonthAgenda.prototype.getNextPreviousDate = function (type) {\n        var selectedDate = this.parent.selectedDate;\n        var interval = (type === 'next') ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n        var navigateDate = addMonths(this.parent.selectedDate, interval);\n        var month = (type === 'next') ? 2 : 0;\n        var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n        var date = (lastDate >= this.monthAgendaDate.getDate()) ? this.monthAgendaDate.getDate() : lastDate;\n        this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n        return this.monthAgendaDate;\n    };\n    MonthAgenda.prototype.getAgendaBase = function () {\n        return this.agendaBase || new AgendaBase(this.parent);\n    };\n    MonthAgenda.prototype.destroy = function () {\n        if (this.agendaBase) {\n            this.agendaBase.destroy();\n            this.agendaBase = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return MonthAgenda;\n}(Month));\n\n/**\n * timeline header rows\n */\nvar TimelineHeaderRow = /** @__PURE__ @class */ (function () {\n    function TimelineHeaderRow(parent, renderDates) {\n        this.parent = parent;\n        this.renderDates = renderDates;\n    }\n    TimelineHeaderRow.prototype.groupByYear = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var d = dates_1[_i];\n            var key = d.getFullYear();\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByMonth = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_2 = dates; _i < dates_2.length; _i++) {\n            var d = dates_2[_i];\n            var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByWeek = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_3 = dates; _i < dates_3.length; _i++) {\n            var d = dates_3[_i];\n            var jsDate = +new Date(1970, 0, 1);\n            var tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n            var key = Math.ceil(((((+d - jsDate) - (tzOffsetDiff * 60 * 1000)) / MS_PER_DAY) + new Date(jsDate).getDay() + 1) / 7);\n            if (this.parent.firstDayOfWeek && this.parent.firstDayOfWeek > new Date(+d).getDay()) {\n                key = key - 1;\n            }\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.generateSlots = function (data, colspan, row, cls, type) {\n        var _this = this;\n        var dateParser = function (date, format) {\n            return _this.parent.globalize.formatDate(date, { format: format, calendar: _this.parent.getCalendarMode() });\n        };\n        var tdDatas = [];\n        var keys = Object.keys(data);\n        for (var i = 0; i < keys.length; i++) {\n            var dates = data[keys[parseInt(i.toString(), 10)]];\n            var htmlCol = void 0;\n            if (row.template) {\n                var args = { date: dates[0], type: type };\n                var templateId = this.parent.element.id + '_headerRowTemplate';\n                htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n            }\n            else {\n                var viewTemplate = void 0;\n                switch (row.option) {\n                    case 'Year':\n                        viewTemplate = \"<span class=\\\"e-header-year\\\">\" + dateParser(dates[0], 'y') + \"</span>\";\n                        break;\n                    case 'Month':\n                        viewTemplate = \"<span class=\\\"e-header-month\\\">\" + capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single') + \"</span>\";\n                        break;\n                    case 'Week':\n                        viewTemplate = \"<span class=\\\"e-header-week\\\">\" + this.parent.getWeekNumberContent(dates) + \"</span>\";\n                }\n                var headerWrapper = createElement('div', { innerHTML: viewTemplate });\n                htmlCol = [].slice.call(headerWrapper.childNodes);\n            }\n            tdDatas.push({ date: dates[0], type: type, className: [cls], colSpan: dates.length * colspan, template: htmlCol });\n        }\n        return tdDatas;\n    };\n    TimelineHeaderRow.prototype.generateColumnLevels = function (dateSlots, hourSlots) {\n        var levels = [];\n        var rows = this.parent.activeViewOptions.headerRows;\n        var lastLevelColspan = 1;\n        if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n            lastLevelColspan = hourSlots.length / dateSlots.length;\n        }\n        var tdDatas = [];\n        var byYear;\n        var byMonth;\n        var byWeek;\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            switch (row.option) {\n                case 'Year':\n                    byYear = this.groupByYear(this.renderDates);\n                    tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Month':\n                    byMonth = this.groupByMonth(this.renderDates);\n                    tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Week':\n                    byWeek = this.groupByWeek(this.renderDates);\n                    tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Date':\n                    tdDatas = dateSlots;\n                    tdDatas = tdDatas.map(function (value) {\n                        value.colSpan = lastLevelColspan;\n                        return value;\n                    });\n                    levels.push(tdDatas);\n                    break;\n                case 'Hour':\n                    if (hourSlots.length > 0) {\n                        levels.push(hourSlots);\n                    }\n                    break;\n            }\n        }\n        return levels;\n    };\n    return TimelineHeaderRow;\n}());\n\nvar __extends$26 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * timeline views\n */\nvar TimelineViews = /** @__PURE__ @class */ (function (_super) {\n    __extends$26(TimelineViews, _super);\n    function TimelineViews(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.timelineAppointment = null;\n        _this.baseCssClass = 'e-timeline-view';\n        return _this;\n    }\n    TimelineViews.prototype.getModuleName = function () {\n        return 'timelineViews';\n    };\n    TimelineViews.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineViews.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineViews.prototype.scrollToWorkHour = function () {\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight &&\n            !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0)\n            : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n        var queryString = '[data-date=\"' + new Date(currDateTime).getTime().toString() + '\"]';\n        var firstWorkHourCell = this.element.querySelector(queryString);\n        if (firstWorkHourCell) {\n            this.getContentAreaElement().scrollLeft = !this.parent.enableRtl ? firstWorkHourCell.offsetLeft :\n                -(this.parent.getContentTable().offsetWidth - firstWorkHourCell.offsetLeft - firstWorkHourCell.offsetWidth);\n        }\n    };\n    TimelineViews.prototype.scrollToHour = function (hour, scrollDate) {\n        var date;\n        var index;\n        if (scrollDate) {\n            index = this.parent.getIndexOfDate(this.renderDates, resetTime(scrollDate));\n            if (index >= 0) {\n                date = scrollDate;\n                if (!isNullOrUndefined(hour)) {\n                    var timeString = hour.split(':');\n                    if (timeString.length === 2) {\n                        date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n                    }\n                }\n            }\n        }\n        date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        var scrollLeft;\n        if (isNullOrUndefined(hour) || !this.parent.activeViewOptions.timeScale.enable) {\n            scrollLeft = index * this.getWorkCellWidth();\n        }\n        else {\n            scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) :\n                this.getLeftFromDateTime([index], date);\n        }\n        this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n    };\n    TimelineViews.prototype.generateColumnLevels = function () {\n        var levels = [];\n        var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        levels.push(dateSlots);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n            levels.push(hourSlots);\n        }\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n        }\n        return levels;\n    };\n    TimelineViews.prototype.generateTimeSlots = function (dateSlots) {\n        var _this = this;\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.first ? [TIME_SLOT_CLASS] : [TIME_SLOT_CLASS, TIME_CELLS_CLASS];\n            r.workDays = _this.parent.activeViewOptions.workDays;\n            return r;\n        };\n        var timeSlotData = this.getTimeSlotRows(handler);\n        var slots = [];\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var data = dateSlots_1[_i];\n            data.colSpan = timeSlotData.length;\n            var tempTimeSlots = extend([], timeSlotData, null, true);\n            for (var _a = 0, tempTimeSlots_1 = tempTimeSlots; _a < tempTimeSlots_1.length; _a++) {\n                var slot = tempTimeSlots_1[_a];\n                var cellDate = resetTime(new Date('' + data.date));\n                slot.date = setTime(cellDate, getDateInMs(slot.date));\n                slots.push(slot);\n            }\n        }\n        return slots;\n    };\n    TimelineViews.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n        var height = this.element.querySelector('.' + CONTENT_TABLE_CLASS).offsetHeight;\n        var headerWrap = this.element.querySelector('.' + DATE_HEADER_WRAP_CLASS);\n        var contentWrap = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n        contentWrap.appendChild(createElement('div', {\n            className: CURRENT_TIMELINE_CLASS,\n            styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n        }));\n        if (this.parent.virtualScrollModule) {\n            var timeIndicator = this.parent.element.querySelector('.' + CURRENT_TIMELINE_CLASS);\n            var element = this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS + ' table');\n            setStyleAttribute(timeIndicator, {\n                transform: element.style.transform\n            });\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: CURRENT_TIME_CLASS\n        });\n        headerWrap.appendChild(currentTimeEle);\n        currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - (currentTimeEle.offsetWidth / 2));\n    };\n    TimelineViews.prototype.getLeftFromDateTime = function (currentDateIndex, date) {\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var diffInDates = 0;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        if (!isNullOrUndefined(currentDateIndex)) {\n            var end = (endHour.getHours() === 0) ? 24 : endHour.getHours();\n            if (currentDateIndex[0] !== 0) {\n                diffInDates = (currentDateIndex[0]) * ((end - startHour.getHours()) * 60) + (endHour.getMinutes() - startHour.getMinutes());\n            }\n            diffInMinutes = diffInDates + diffInMinutes;\n        }\n        return (diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    TimelineViews.prototype.getWorkCellWidth = function () {\n        return this.element.querySelector('.e-work-cells').getBoundingClientRect().width;\n    };\n    TimelineViews.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineViews.prototype.createAllDayRow = function (table, tdData) { };\n    TimelineViews.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        var index = this.parent.getIndexOfDate(this.renderDates, resetTime(this.parent.getCurrentTime()));\n        if (index >= 0) {\n            currentDateIndex.push(index);\n        }\n        return currentDateIndex;\n    };\n    TimelineViews.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            tr.appendChild(resTd);\n        }\n        var workTd = createElement('td');\n        var wrap = this.renderContentArea();\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    TimelineViews.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineViews.prototype.getResourceTdData = function (i, tdData) {\n        var resLevel = this.parent.resourceBase.renderedResources[parseInt(i.toString(), 10)];\n        var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n        var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n        tdData.startHour = this.parent.getStartEndTime(resSHr);\n        tdData.endHour = this.parent.getStartEndTime(resEHr);\n        tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n        tdData.className = resLevel.className;\n        tdData.groupIndex = resLevel.groupIndex;\n        tdData.groupOrder = resLevel.groupOrder;\n        return tdData;\n    };\n    TimelineViews.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n    };\n    TimelineViews.prototype.getContentRows = function () {\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var trCount = this.getRowCount();\n        for (var i = 0; i < trCount; i++) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    tdData = this.getResourceTdData(i, tdData);\n                }\n                var ntd = this.createContentTd(tdData, tdData, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n        }\n        return rows;\n    };\n    TimelineViews.prototype.getContentTdClass = function (r) {\n        return (r.first || !this.parent.activeViewOptions.timeScale.enable) ? [WORK_CELLS_CLASS] :\n            [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];\n    };\n    TimelineViews.prototype.renderEvents = function () {\n        this.timelineAppointment = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        this.timelineAppointment.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    };\n    TimelineViews.prototype.getAdjustedDate = function (date) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(date.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.colLevels[this.colLevels.length - 1];\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > date.getTime()) {\n                    return timeSlots[i - 1].date;\n                }\n            }\n        }\n        return null;\n    };\n    TimelineViews.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.timelineAppointment) {\n            this.timelineAppointment.destroy();\n            this.timelineAppointment = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return TimelineViews;\n}(VerticalView));\n\nvar __extends$27 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * timeline month view\n */\nvar TimelineMonth = /** @__PURE__ @class */ (function (_super) {\n    __extends$27(TimelineMonth, _super);\n    function TimelineMonth(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-month-view';\n        _this.isInverseTableSelect = true;\n        _this.appointment = null;\n        return _this;\n    }\n    TimelineMonth.prototype.getModuleName = function () {\n        return 'timelineMonth';\n    };\n    TimelineMonth.prototype.onDataReady = function () {\n        this.appointment = new TimelineEvent(this.parent, 'day');\n        this.appointment.renderAppointments();\n        this.parent.notify(eventsLoaded, {});\n    };\n    TimelineMonth.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineMonth.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineMonth.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n        content.style.height = formatUnit(height);\n    };\n    TimelineMonth.prototype.getDateSlots = function (renderDates, workDays) {\n        var dateSlots = [];\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList$$1 = [HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList$$1.push(CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: col, type: 'dateHeader', className: classList$$1, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    TimelineMonth.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n    };\n    TimelineMonth.prototype.renderContent = function () {\n        var contentTr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            contentTr.appendChild(resTd);\n        }\n        var contentTd = createElement('td');\n        this.element.querySelector('tbody').appendChild(contentTr);\n        var wrap = createElement('div', { className: CONTENT_WRAP_CLASS });\n        wrap.appendChild(this.renderContentArea());\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        contentTd.appendChild(wrap);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        contentTr.appendChild(contentTd);\n    };\n    TimelineMonth.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineMonth.prototype.getContentSlots = function () {\n        var slotDatas = [];\n        for (var row = 0; row < this.getRowCount(); row++) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var data = _a[_i];\n                data.className = [WORK_CELLS_CLASS];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    var resLevel = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n                    data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n                    data.className = data.className.concat(resLevel.className);\n                    data.groupIndex = resLevel.groupIndex;\n                    data.groupOrder = resLevel.groupOrder;\n                }\n                var slotData = {\n                    date: new Date(+data.date), colSpan: data.colSpan, groupIndex: data.groupIndex, workDays: data.workDays,\n                    type: 'monthCells', className: data.className\n                };\n                if (!slotDatas[parseInt(row.toString(), 10)]) {\n                    slotDatas[parseInt(row.toString(), 10)] = [];\n                }\n                slotDatas[parseInt(row.toString(), 10)].push(slotData);\n            }\n        }\n        return slotDatas;\n    };\n    TimelineMonth.prototype.updateClassList = function (data) {\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(DISABLE_DATES);\n        }\n    };\n    TimelineMonth.prototype.unWireEvents = function () {\n        EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    };\n    TimelineMonth.prototype.getMonthStart = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    TimelineMonth.prototype.getMonthEnd = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(resetTime(currentDate));\n        return this.parent.calendarUtil.lastDateOfMonth(addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    };\n    TimelineMonth.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        colLevels.push(level);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            colLevels = renderGn.generateColumnLevels(level, hourSlots);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    TimelineMonth.prototype.getAdjustedDate = function (startTime) {\n        var timeSlots = this.colLevels[this.colLevels.length - 1];\n        for (var i = 0; i < timeSlots.length; i++) {\n            if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startTime.getTime()) {\n                return timeSlots[i - 1].date;\n            }\n        }\n        return null;\n    };\n    TimelineMonth.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            var contentScrollableEle = this.element.querySelector('.' + CONTENT_WRAP_CLASS);\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n        }\n        if (this.appointment) {\n            this.appointment.destroy();\n            this.appointment = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return TimelineMonth;\n}(Month));\n\nvar __extends$28 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * timeline year view\n */\nvar TimelineYear = /** @__PURE__ @class */ (function (_super) {\n    __extends$28(TimelineYear, _super);\n    function TimelineYear(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-year-view';\n        _this.isInverseTableSelect = true;\n        return _this;\n    }\n    TimelineYear.prototype.getModuleName = function () {\n        return 'timelineYear';\n    };\n    TimelineYear.prototype.renderHeader = function (headerWrapper) {\n        var tr = createElement('tr');\n        headerWrapper.appendChild(tr);\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        else {\n            var leftHeaderCells = createElement('td', { className: LEFT_INDENT_CLASS });\n            tr.appendChild(leftHeaderCells);\n            leftHeaderCells.appendChild(this.renderResourceHeader(LEFT_INDENT_WRAP_CLASS));\n        }\n        var isHorizontal = this.parent.activeViewOptions.orientation === 'Horizontal';\n        var isGroup = this.parent.activeViewOptions.group.resources.length > 0;\n        this.isInverseTableSelect = isHorizontal && !isGroup ? false : true;\n        var td = createElement('td');\n        tr.appendChild(td);\n        var container = createElement('div', { className: DATE_HEADER_CONTAINER_CLASS });\n        td.appendChild(container);\n        if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            container.appendChild(this.renderResourceHeader(DATE_HEADER_WRAP_CLASS));\n            this.columnCount = this.colLevels.slice(-1)[0].length;\n        }\n        else {\n            var wrapper = createElement('div', { className: DATE_HEADER_WRAP_CLASS });\n            container.appendChild(wrapper);\n            var table = this.createTableLayout();\n            wrapper.appendChild(table);\n            table.appendChild(this.createTableColGroup(this.columnCount));\n            var innerTr = createElement('tr');\n            table.querySelector('tbody').appendChild(innerTr);\n            var months = this.getMonths();\n            var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n            for (var column = 0; column < this.columnCount; column++) {\n                var date = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], 1);\n                var innerTd = createElement('td', { className: HEADER_CELLS_CLASS });\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    if (this.parent.dayHeaderTemplate) {\n                        append(this.renderDayMonthHeaderTemplate(dayHeaderDates[parseInt(column.toString(), 10)], column, 'dayHeaderTemplate'), innerTd);\n                    }\n                    else {\n                        innerTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[column % 7] + \"</span>\";\n                    }\n                }\n                else {\n                    if (this.parent.monthHeaderTemplate) {\n                        append(this.renderDayMonthHeaderTemplate(date, months[parseInt(column.toString(), 10)], 'monthHeaderTemplate'), innerTd);\n                    }\n                    else {\n                        innerTd.innerHTML = \"<span>\" + this.getMonthName(date) + \"</span>\";\n                    }\n                    innerTd.setAttribute('data-date', date.getTime().toString());\n                }\n                innerTr.appendChild(innerTd);\n                this.parent.trigger(renderCell, { elementType: 'headerCells', element: innerTd });\n            }\n        }\n    };\n    TimelineYear.prototype.renderResourceHeader = function (className) {\n        var wrap = createElement('div', { className: className });\n        var tbl = this.createTableLayout();\n        wrap.appendChild(tbl);\n        var trEle = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.colLevels = this.generateColumnLevels();\n        }\n        else {\n            var colData = [{ className: [HEADER_CELLS_CLASS], type: 'headerCell' }];\n            this.colLevels = [colData];\n        }\n        for (var _i = 0, _a = this.colLevels; _i < _a.length; _i++) {\n            var col = _a[_i];\n            var ntr = trEle.cloneNode();\n            var count = className === DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n            for (var _b = 0, count_1 = count; _b < count_1.length; _b++) {\n                var c = count_1[_b];\n                var tdEle = createElement('td');\n                if (c.className) {\n                    addClass([tdEle], c.className);\n                }\n                if (className === DATE_HEADER_WRAP_CLASS) {\n                    if (c.template) {\n                        append(c.template, tdEle);\n                    }\n                    if (c.colSpan) {\n                        tdEle.setAttribute('colspan', c.colSpan.toString());\n                    }\n                    if (c.groupIndex > -1) {\n                        tdEle.setAttribute('data-group-index', c.groupIndex.toString());\n                    }\n                    this.setResourceHeaderContent(tdEle, c);\n                }\n                if (className === LEFT_INDENT_WRAP_CLASS) {\n                    this.parent.renderHeaderIndentTemplate(c, tdEle);\n                }\n                var args = { elementType: c.type, element: tdEle, date: c.date, groupIndex: c.groupIndex };\n                this.parent.trigger(renderCell, args);\n                ntr.appendChild(tdEle);\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        if (className === DATE_HEADER_WRAP_CLASS) {\n            tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n        }\n        return wrap;\n    };\n    TimelineYear.prototype.renderContent = function (contentWrapper) {\n        var tr = createElement('tr');\n        contentWrapper.appendChild(tr);\n        var firstTd = createElement('td');\n        var lastTd = createElement('td');\n        var tdCollection = [];\n        var monthTBody;\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            tdCollection.push(firstTd);\n            firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            this.rowCount = this.parent.resourceBase.renderedResources.length;\n        }\n        else {\n            tdCollection.push(firstTd);\n            var monthWrapper = createElement('div', { className: MONTH_HEADER_WRAPPER });\n            firstTd.appendChild(monthWrapper);\n            monthWrapper.appendChild(this.createTableLayout());\n            monthTBody = monthWrapper.querySelector('tbody');\n        }\n        tdCollection.push(lastTd);\n        append(tdCollection, tr);\n        var content = createElement('div', { className: CONTENT_WRAP_CLASS });\n        lastTd.appendChild(content);\n        var contentTable = this.createTableLayout(CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(contentTable);\n        content.appendChild(contentTable);\n        var eventWrapper = createElement('div', { className: EVENT_TABLE_CLASS });\n        content.appendChild(eventWrapper);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(content);\n        }\n        var contentTBody = contentTable.querySelector('tbody');\n        if (this.parent.rowAutoHeight) {\n            var addClassTable = [contentTable];\n            var monthHeader = this.parent.element.querySelector('.' + MONTH_HEADER_WRAPPER + ' .' + SCHEDULE_TABLE_CLASS);\n            if (monthHeader) {\n                addClassTable.push(monthHeader);\n            }\n            addClass(addClassTable, AUTO_HEIGHT);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : this.columnCount;\n            contentTable.appendChild(this.createTableColGroup(colCount));\n            this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n        }\n        else {\n            contentTable.appendChild(this.createTableColGroup(this.columnCount));\n            this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n        }\n    };\n    TimelineYear.prototype.renderDefaultContent = function (wrapper, monthBody, contentBody) {\n        var months = this.getMonths();\n        var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n        for (var month = 0; month < this.rowCount; month++) {\n            wrapper.appendChild(createElement('div', { className: APPOINTMENT_CONTAINER_CLASS }));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var tr = createElement('tr');\n            var monthTr = tr.cloneNode();\n            monthBody.appendChild(monthTr);\n            var contentTr = tr.cloneNode();\n            contentBody.appendChild(contentTr);\n            var monthTd = createElement('td', { className: MONTH_HEADER_CLASS });\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                if (this.parent.monthHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(monthStart, month, 'monthHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n                }\n                monthTd.setAttribute('data-date', monthDate.getTime().toString());\n            }\n            else {\n                if (this.parent.dayHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(dayHeaderDates[parseInt(month.toString(), 10)], month, 'dayHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[month % 7] + \"</span>\";\n                }\n            }\n            monthTr.appendChild(monthTd);\n            this.parent.trigger(renderCell, { elementType: 'leftHeaderCells', element: monthTd });\n            var date = new Date(monthStart.getTime());\n            for (var column = 0; column < this.columnCount; column++) {\n                var isDateAvail = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], 1);\n                    monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                    monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n                    var dayDate = (month - monthStart.getDay()) + 1;\n                    date = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], dayDate);\n                    isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n                }\n                else {\n                    isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n                }\n                var announcementText = this.parent.globalize.formatDate(date, {\n                    skeleton: 'full', calendar: this.parent.getCalendarMode()\n                });\n                var td = createElement('td', {\n                    className: WORK_CELLS_CLASS, attrs: { 'aria-selected': 'false', 'aria-label': announcementText }\n                });\n                contentTr.appendChild(td);\n                var dateHeader = createElement('div', {\n                    className: DATE_HEADER_CLASS + ' ' + NAVIGATE_CLASS,\n                    innerHTML: (isDateAvail) ?\n                        this.parent.globalize.formatDate(date, { skeleton: 'd', calendar: this.parent.getCalendarMode() }) : ''\n                });\n                if (isDateAvail) {\n                    var tds = [td];\n                    var classList$$1 = [];\n                    if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n                        classList$$1.push(WORKDAY_CLASS);\n                    }\n                    if (!this.parent.isMinMaxDate(date)) {\n                        addClass([td], DISABLE_DATES);\n                    }\n                    if (this.isCurrentDate(date)) {\n                        classList$$1.push(CURRENT_DAY_CLASS);\n                        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                            tds.push(this.element.querySelector('.' + HEADER_CELLS_CLASS + (\":nth-child(\" + (column + 1) + \")\")));\n                        }\n                        else {\n                            tds.push(this.element.querySelectorAll('.' + MONTH_HEADER_CLASS).item(month));\n                        }\n                    }\n                    if (classList$$1.length > 0) {\n                        addClass(tds, classList$$1);\n                    }\n                }\n                else {\n                    addClass([td], OTHERMONTH_CLASS);\n                    if (!this.parent.isMinMaxDate(date)) {\n                        addClass([td], DISABLE_DATES);\n                    }\n                }\n                if (td.classList.contains(OTHERMONTH_CLASS)) {\n                    continue;\n                }\n                else {\n                    this.renderDates.push(new Date(date));\n                }\n                td.appendChild(dateHeader);\n                if (isDateAvail) {\n                    td.setAttribute('data-date', date.getTime().toString());\n                    this.wireEvents(td);\n                }\n                this.renderCellTemplate({ date: date, type: 'workCells' }, td);\n                this.parent.trigger(renderCell, { elementType: 'workCells', element: td, date: date });\n                if (isDateAvail) {\n                    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                        date = addDays(new Date(date.getTime()), 1);\n                    }\n                }\n            }\n        }\n        this.renderDates.splice(0, 1);\n    };\n    TimelineYear.prototype.getContentRows = function () {\n        var tRow = [];\n        var monthCells = this.getMonths();\n        for (var row = 0; row < this.parent.resourceBase.renderedResources.length; row++) {\n            var tr = createElement('tr');\n            tRow.push(tr);\n            var resData = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                resData = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n            }\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), monthCells[parseInt(row.toString(), 10)], 1);\n            var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            for (var month = 0; month < this.columnCount; month++) {\n                var classList$$1 = [];\n                var groupIndex = resData.groupIndex;\n                classList$$1 = classList$$1.concat(resData.className);\n                if (classList$$1.indexOf(RESOURCE_PARENT_CLASS) > -1) {\n                    classList$$1.push(RESOURCE_GROUP_CELLS_CLASS);\n                }\n                else {\n                    classList$$1.push(WORKDAY_CLASS);\n                }\n                monthDate = new Date(this.parent.selectedDate.getFullYear(), monthCells[parseInt(month.toString(), 10)], 1);\n                date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                var tdELe = createElement('td', {\n                    className: WORK_CELLS_CLASS,\n                    attrs: {\n                        'aria-selected': 'false',\n                        'data-date': date.getTime().toString()\n                    }\n                });\n                addClass([tdELe], classList$$1);\n                tdELe.setAttribute('data-group-index', groupIndex.toString());\n                this.renderCellTemplate({ date: date, type: 'resourceGroupCells', groupIndex: groupIndex }, tdELe);\n                this.wireEvents(tdELe);\n                this.parent.trigger(renderCell, { elementType: 'resourceGroupCells', element: tdELe, date: date });\n                tr.appendChild(tdELe);\n            }\n        }\n        return tRow;\n    };\n    TimelineYear.prototype.renderResourceContent = function (wrapper, monthBody, contentBody) {\n        var months = this.getMonths();\n        for (var row = 0; row < this.rowCount; row++) {\n            wrapper.appendChild(createElement('div', { className: APPOINTMENT_CONTAINER_CLASS }));\n            var tr = createElement('tr');\n            contentBody.appendChild(tr);\n            var resData = void 0;\n            if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                resData = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n            }\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n            var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                var monthTr = tr.cloneNode();\n                monthBody.appendChild(monthTr);\n                var monthTd = createElement('td', {\n                    className: MONTH_HEADER_CLASS,\n                    attrs: { 'data-date': date.getTime().toString() }\n                });\n                if (this.parent.monthHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(monthDate, row, 'monthHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n                }\n                monthTr.appendChild(monthTd);\n            }\n            for (var month = 0; month < this.columnCount; month++) {\n                var classList$$1 = [];\n                var groupIndex = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    groupIndex = resData.groupIndex;\n                    classList$$1 = classList$$1.concat(resData.className);\n                    if (classList$$1.indexOf(RESOURCE_PARENT_CLASS) > -1) {\n                        classList$$1.push(RESOURCE_GROUP_CELLS_CLASS);\n                    }\n                    else {\n                        classList$$1.push(WORKDAY_CLASS);\n                    }\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                    date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                }\n                else {\n                    groupIndex = this.colLevels.slice(-1)[0][parseInt(month.toString(), 10)].groupIndex;\n                    classList$$1.push(WORKDAY_CLASS);\n                }\n                var td = createElement('td', {\n                    className: WORK_CELLS_CLASS,\n                    attrs: {\n                        'aria-selected': 'false',\n                        'data-date': date.getTime().toString()\n                    }\n                });\n                addClass([td], classList$$1);\n                td.setAttribute('data-group-index', groupIndex.toString());\n                this.renderCellTemplate({ date: date, type: 'resourceGroupCells', groupIndex: groupIndex }, td);\n                this.wireEvents(td);\n                tr.appendChild(td);\n                this.parent.trigger(renderCell, { elementType: 'resourceGroupCells', element: td, date: date });\n            }\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            this.collapseRows(this.parent.element.querySelector('.' + CONTENT_WRAP_CLASS));\n        }\n    };\n    TimelineYear.prototype.renderDayMonthHeaderTemplate = function (date, column, type) {\n        var args = { date: date, type: type === 'dayHeaderTemplate' ? 'dayHeader' : 'monthHeader' };\n        var dayId = \"schedule_\" + this.parent.activeViewOptions.dayHeaderTemplateName + \"dayHeaderTemplate\";\n        var monthId = \"schedule_\" + this.parent.activeViewOptions.dayHeaderTemplateName + \"monthHeaderTemplate\";\n        if (type === 'dayHeaderTemplate') {\n            args.day = this.parent.getDayNames('wide')[column % 7];\n            return [].slice.call(this.parent.getDayHeaderTemplate()(args, this.parent, 'dayHeaderTemplate', dayId, false));\n        }\n        else {\n            return [].slice.call(this.parent.getMonthHeaderTemplate()(args, this.parent, 'monthHeaderTemplate', monthId, false));\n        }\n    };\n    TimelineYear.prototype.renderCellTemplate = function (data, td) {\n        if (!this.parent.activeViewOptions.cellTemplate || td.classList.contains(OTHERMONTH_CLASS)) {\n            return;\n        }\n        var args = { date: data.date, type: data.type };\n        if (data.groupIndex) {\n            args.groupIndex = data.groupIndex;\n        }\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.cellTemplateName;\n        var templateId = scheduleId + viewName + 'cellTemplate';\n        var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n        append(cellTemplate, td);\n    };\n    TimelineYear.prototype.scrollToDate = function (scrollDate) {\n        var date;\n        if (this.parent.activeViewOptions.group.resources !== null && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            date = +new Date(resetTime(firstDateOfMonth(scrollDate)));\n        }\n        else {\n            date = +new Date(resetTime(scrollDate));\n        }\n        var element = this.element.querySelector('[data-date=\"' + date + '\"]');\n        if (element) {\n            var wrap = this.getScrollableElement();\n            if (this.parent.enableRtl) {\n                var conTable = this.element.querySelector('.' + CONTENT_TABLE_CLASS);\n                wrap.scrollLeft = -(conTable.offsetWidth - element.offsetLeft - element.offsetWidth);\n            }\n            else {\n                wrap.scrollLeft = element.offsetLeft;\n            }\n            wrap.scrollTop = element.offsetTop;\n        }\n    };\n    TimelineYear.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    TimelineYear.prototype.wireEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    return TimelineYear;\n}(Year));\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * ICalendar Export Module\n */\nvar ICalendarExport = /** @__PURE__ @class */ (function () {\n    function ICalendarExport(parent) {\n        this.parent = parent;\n    }\n    ICalendarExport.prototype.initializeCalendarExport = function (fileName, customData) {\n        var icsString = this.getCalendarString(fileName, customData);\n        this.download(icsString, fileName);\n    };\n    ICalendarExport.prototype.getCalendarString = function (fileName, customData) {\n        var _this = this;\n        var eventsData = (customData) ? customData :\n            extend([], this.parent.eventsData, null, true);\n        eventsData = this.parent.eventBase.sortByTime(eventsData);\n        var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n        var iCalendarEvents = [];\n        var filterCollection = [];\n        var timeZone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var fields = this.parent.eventFields;\n        eventsData.forEach(function (eventObj) {\n            var uId = eventObj[fields.id] || eventObj.Guid || _this.parent.eventBase.generateGuid();\n            var editedExDate = [];\n            if (eventObj[fields.recurrenceID]) {\n                var filter = _this.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n                uId = filter.length > 0 ? filter[0].UID : uId;\n            }\n            if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n                var exDate = (eventObj[fields.recurrenceException]).split(',');\n                var editedObj = _this.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n                editedObj.forEach(function (edited) {\n                    editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n                });\n                var exceptionDateList = exDate.filter(function (value) { return editedExDate.indexOf(value) === -1; });\n                eventObj[fields.recurrenceException] = (exceptionDateList.length > 0) ? (exceptionDateList.join(',') + ',') : '';\n            }\n            var startZone = (eventObj[fields.startTimezone] || timeZone);\n            var endZone = (eventObj[fields.endTimezone] || timeZone);\n            var readonly = (eventObj[fields.isReadonly]) ? (eventObj[fields.isReadonly]) : false;\n            var calendarEvent = [\n                'BEGIN:VEVENT',\n                'LOCATION:' + (eventObj[fields.location] || ''),\n                'SUMMARY:' + (eventObj[fields.subject] || ''),\n                'UID:' + uId,\n                'DESCRIPTION:' + (eventObj[fields.description] || ''),\n                'ISREADONLY:' + readonly,\n                'END:VEVENT'\n            ];\n            if (eventObj[fields.isAllDay]) {\n                calendarEvent.splice(4, 0, 'DTEND;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.endTime], true));\n                calendarEvent.splice(4, 0, 'DTSTART;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.startTime], true));\n            }\n            else if (!eventObj[fields.isAllDay] && !eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'DTEND:' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART:' + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            else {\n                calendarEvent.splice(4, 0, 'DTEND;TZID=\"' + endZone + '\":' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            if (eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n            }\n            if (eventObj[fields.recurrenceException]) {\n                var exDate = eventObj[fields.recurrenceException].split(',');\n                for (var i = 0; i < exDate.length - 1; i++) {\n                    calendarEvent.splice(5, 0, 'EXDATE:' +\n                        _this.convertDateToString(getDateFromRecurrenceDateString(exDate[parseInt(i.toString(), 10)]), eventObj[fields.isAllDay]));\n                }\n            }\n            if (eventObj[fields.recurrenceID]) {\n                calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime], eventObj[fields.isAllDay]));\n            }\n            var customFields = _this.customFieldFilter(eventObj, fields);\n            if (customFields.length > 0) {\n                customFields.forEach(function (customField) {\n                    return calendarEvent.splice(4, 0, customField + ':' + (eventObj[\"\" + customField] || ''));\n                });\n            }\n            var app = extend({}, eventObj);\n            app.UID = uId;\n            filterCollection.push(app);\n            iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n        });\n        var iCalendar = [\n            'BEGIN:VCALENDAR',\n            'PRODID:-//Syncfusion Inc//Scheduler//EN',\n            'VERSION:2.0',\n            'CALSCALE:GREGORIAN',\n            'METHOD:PUBLISH',\n            'X-WR-CALNAME:' + (fileName || 'Calendar'),\n            'X-WR-TIMEZONE:' + timeZone\n        ].join(SEPARATOR);\n        var icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n        return icsString;\n    };\n    ICalendarExport.prototype.customFieldFilter = function (eventObj, fields) {\n        var defaultFields = Object.keys(fields).map(function (key) { return fields[\"\" + key]; });\n        var eventFields = Object.keys(eventObj);\n        return eventFields.filter(function (value) { return (defaultFields.indexOf(value) === -1) && (value !== 'Guid'); });\n    };\n    ICalendarExport.prototype.convertDateToString = function (eventDate, allDay) {\n        var year = ('0000' + (eventDate.getFullYear().toString())).slice(-4);\n        var month = ('00' + ((eventDate.getMonth() + 1).toString())).slice(-2);\n        var date = ('00' + ((eventDate.getDate()).toString())).slice(-2);\n        var hours = ('00' + (eventDate.getHours().toString())).slice(-2);\n        var minutes = ('00' + (eventDate.getMinutes().toString())).slice(-2);\n        var seconds = ('00' + (eventDate.getSeconds().toString())).slice(-2);\n        var timeString = (allDay) ? year + month + date : year + month + date + 'T' + hours + minutes + seconds;\n        return timeString;\n    };\n    ICalendarExport.prototype.download = function (icsString, fileName) {\n        var buffer = new Blob([icsString], { type: 'data:text/calendar;charset=utf8' });\n        fileName = (fileName || 'Calendar') + '.ics';\n        if (navigator.msSaveBlob) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            var downloadLink_1 = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            downloadLink_1.download = fileName;\n            downloadLink_1.href = URL.createObjectURL(buffer);\n            var event_1 = document.createEvent('MouseEvent');\n            event_1.initEvent('click', true, true);\n            downloadLink_1.dispatchEvent(event_1);\n            setTimeout(function () {\n                URL.revokeObjectURL(downloadLink_1.href);\n                downloadLink_1.href = undefined;\n            });\n        }\n    };\n    ICalendarExport.prototype.filterEvents = function (data, field, value) {\n        return data.filter(function (e) { return e[\"\" + field] === value; });\n    };\n    ICalendarExport.prototype.getModuleName = function () {\n        return 'iCalendarExport';\n    };\n    ICalendarExport.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent = null;\n    };\n    return ICalendarExport;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * ICalendar Import Module\n */\nvar ICalendarImport = /** @__PURE__ @class */ (function () {\n    function ICalendarImport(parent) {\n        this.allDay = false;\n        this.parent = parent;\n    }\n    ICalendarImport.prototype.initializeCalendarImport = function (fileContent) {\n        var _this = this;\n        if (fileContent && fileContent instanceof Blob) {\n            var fileReader_1 = new FileReader();\n            fileReader_1.onload = function () {\n                var iCalString = fileReader_1.result;\n                _this.iCalendarParser(iCalString);\n            };\n            fileReader_1.readAsText(fileContent, 'UTF-8');\n        }\n        else if (fileContent && typeof fileContent === 'string') {\n            this.iCalendarParser(fileContent);\n        }\n    };\n    ICalendarImport.prototype.iCalendarParser = function (iCalString) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var events = [];\n        var uId = 'UID';\n        var calArray = iCalString.replace(new RegExp('\\\\r', 'g'), '').split('\\n');\n        var isEvent = false;\n        var curEvent;\n        // eslint-disable-next-line prefer-const\n        var id = this.parent.eventBase.getEventMaxID();\n        var count = 0;\n        calArray.forEach(function (element) {\n            var index;\n            var type;\n            var value;\n            if (!isEvent && element === 'BEGIN:VEVENT') {\n                isEvent = true;\n                curEvent = {};\n            }\n            if (isEvent && element === 'END:VEVENT') {\n                isEvent = false;\n                events.push(curEvent);\n                curEvent = null;\n            }\n            if (isEvent) {\n                index = element.indexOf(':');\n                type = element.substr(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                value = element.substr(index + 1, element.length - (index + 1)).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n                if (element.indexOf('SUMMARY') !== -1) {\n                    type = 'SUMMARY';\n                }\n                if (element.indexOf('DTSTART') !== -1) {\n                    curEvent[fields.startTime] = _this.dateParsing(element);\n                    curEvent[fields.isAllDay] = _this.allDay;\n                    _this.allDay = false;\n                }\n                else if (element.indexOf('DTEND') !== -1) {\n                    curEvent[fields.endTime] = _this.dateParsing(element);\n                }\n                else if (element.indexOf('EXDATE') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = (isNullOrUndefined(curEvent[fields.recurrenceException])) ?\n                        value : curEvent[fields.recurrenceException] + ',' + value;\n                }\n                else if (element.indexOf('RECURRENCE-ID') !== -1) {\n                    value = getRecurrenceStringFromDate(_this.dateParsing(element));\n                    curEvent[fields.recurrenceException] = value;\n                    curEvent[fields.recurrenceID] = value;\n                }\n                else {\n                    switch (type) {\n                        case 'BEGIN':\n                            break;\n                        case 'UID':\n                            curEvent[\"\" + uId] = value;\n                            if (typeof (id) == 'number') {\n                                curEvent[fields.id] = parseInt(value, 10);\n                                if (isNaN(curEvent[fields.id])) {\n                                    curEvent[fields.id] = id + count;\n                                    count++;\n                                }\n                            }\n                            else {\n                                curEvent[fields.id] = value;\n                            }\n                            break;\n                        case 'SUMMARY':\n                            curEvent[fields.subject] = value;\n                            break;\n                        case 'LOCATION':\n                            curEvent[fields.location] = value;\n                            break;\n                        case 'DESCRIPTION':\n                            curEvent[fields.description] = value;\n                            break;\n                        case 'ISREADONLY':\n                            curEvent[fields.isReadonly] = (value.indexOf('true') > -1);\n                            break;\n                        case 'RRULE':\n                            curEvent[fields.recurrenceRule] = value;\n                            break;\n                        default:\n                            if (_this.parent.resourceCollection.length > 0) {\n                                var resData = _this.parent.resourceCollection.filter(function (data) { return data.field === type; });\n                                curEvent[\"\" + type] = (resData.length > 0 && (typeof (resData[0].dataSource[0][resData[0].idField]) == 'number')) ? parseInt(value, 10) : value;\n                            }\n                            else {\n                                curEvent[\"\" + type] = value;\n                            }\n                    }\n                }\n            }\n        });\n        var app = extend([], events, null, true);\n        this.parent.addEvent(this.processOccurrence(app, id));\n    };\n    ICalendarImport.prototype.processOccurrence = function (app, maxId) {\n        var _this = this;\n        var appoint = [];\n        var uId = 'UID';\n        var fields = this.parent.eventFields;\n        var appointmentIds = [];\n        this.parent.eventsData.forEach(function (eventObj) {\n            appointmentIds.push(eventObj[fields.id]);\n        });\n        app.forEach(function (eventObj) {\n            var parentObj;\n            var id;\n            // eslint-disable-next-line no-prototype-builtins\n            if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                parentObj = eventObj;\n                id = eventObj[fields.id];\n            }\n            if (appointmentIds.indexOf(eventObj[fields.id]) < 0) {\n                var data = app.filter(function (data) { return data.UID === eventObj[\"\" + uId]; });\n                if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n                    id = typeof (maxId) === 'number' ? maxId++ : id;\n                    for (var i = 0; i < data.length; i++) {\n                        // eslint-disable-next-line no-prototype-builtins\n                        if (data[parseInt(i.toString(), 10)].hasOwnProperty(fields.recurrenceID)) {\n                            var exdate = data[parseInt(i.toString(), 10)][fields.recurrenceID];\n                            data[parseInt(i.toString(), 10)][fields.id] = typeof (maxId) === 'number' ? maxId++ : _this.parent.eventBase.generateGuid();\n                            data[parseInt(i.toString(), 10)][fields.recurrenceID] = id;\n                            data[parseInt(i.toString(), 10)][fields.recurrenceException] = null;\n                            parentObj[fields.recurrenceException] =\n                                _this.getExcludeDateString(parentObj[fields.recurrenceException], exdate);\n                            delete data[parseInt(i.toString(), 10)][\"\" + uId];\n                            appoint.push(data[parseInt(i.toString(), 10)]);\n                        }\n                    }\n                    delete parentObj[\"\" + uId];\n                    parentObj[fields.id] = id;\n                    appoint.push(parentObj);\n                    // eslint-disable-next-line no-prototype-builtins\n                }\n                else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                    delete eventObj[\"\" + uId];\n                    eventObj[fields.id] = typeof (maxId) === 'number' ? maxId++ : id;\n                    appoint.push(eventObj);\n                }\n            }\n        });\n        return appoint;\n    };\n    ICalendarImport.prototype.getExcludeDateString = function (parentException, occurrenceException) {\n        if (isNullOrUndefined(parentException)) {\n            return occurrenceException;\n        }\n        else if (isNullOrUndefined(occurrenceException)) {\n            return parentException;\n        }\n        var parentExDate = parentException.split(',').map(function (x) { return x.split('T')[0]; });\n        var childExDate = occurrenceException.split(',').map(function (x) { return x.split('T')[0]; });\n        var exDate = parentExDate.filter(function (x) { return childExDate.indexOf(x) > -1; });\n        if (exDate.length > 0) {\n            return parentException;\n        }\n        return parentException + ',' + occurrenceException;\n    };\n    ICalendarImport.prototype.getDateString = function (value) {\n        value = value || '';\n        // eslint-disable-next-line no-useless-escape\n        return (value.replace(/\\\\\\,/g, ',').replace(/\\\\\\;/g, ';').replace(/\\\\[nN]/g, '\\n').replace(/\\\\\\\\/g, '\\\\'));\n    };\n    ICalendarImport.prototype.dateParsing = function (element) {\n        var split = element.split(':');\n        var value = split[split.length - 1];\n        var newDate = new Date(this.getDateString(value));\n        if (element && (element.indexOf('VALUE=DATE') > -1 || element.indexOf('RECURRENCE-ID;TZID') > -1)) {\n            var data_1 = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n            if (data_1 !== null) {\n                newDate = new Date(parseInt(data_1[1], 10), parseInt(data_1[2], 10) - 1, parseInt(data_1[3], 10));\n            }\n            if (element.indexOf('DTSTART') > -1) {\n                this.allDay = true;\n            }\n        }\n        var data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n        if (data !== null) {\n            if (data[7] === 'Z') {\n                newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n            }\n            else {\n                newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n            }\n        }\n        return newDate;\n    };\n    ICalendarImport.prototype.getModuleName = function () {\n        return 'iCalendarImport';\n    };\n    ICalendarImport.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n    };\n    return ICalendarImport;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Excel Export Module\n */\nvar ExcelExport = /** @__PURE__ @class */ (function () {\n    function ExcelExport(parent) {\n        this.parent = parent;\n    }\n    ExcelExport.prototype.initializeExcelExport = function (excelExportOptions) {\n        if (excelExportOptions === void 0) { excelExportOptions = {}; }\n        var exportColumns = this.getExportColumns(excelExportOptions);\n        var exportName = excelExportOptions.fileName || 'Schedule';\n        var exportType = excelExportOptions.exportType || 'xlsx';\n        var isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n        var separator;\n        if (!isNullOrUndefined(excelExportOptions.separator) && excelExportOptions.separator !== ',') {\n            separator = excelExportOptions.separator;\n        }\n        var eventCollection;\n        if (excelExportOptions.customData) {\n            eventCollection = !isIncludeOccurrences ? excelExportOptions.customData :\n                this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n        }\n        else {\n            eventCollection = !isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed;\n        }\n        this.processWorkbook(exportColumns, exportName, exportType, eventCollection, separator);\n    };\n    ExcelExport.prototype.processWorkbook = function (fields, name, type, eventCollection, separator) {\n        var _this = this;\n        var columns = [];\n        var rows = [];\n        var columnHeader = [];\n        fields.forEach(function (field, i) { columns.push({ index: i + 1, width: (field.name === 'Id' ? 50 : 150) }); });\n        var style = { fontSize: 12, borders: { color: '#E0E0E0' }, bold: true };\n        fields.forEach(function (field, i) { columnHeader.push({ index: i + 1, value: field.text, style: style }); });\n        rows.push({ index: 1, cells: columnHeader });\n        eventCollection.forEach(function (event, i) {\n            var columnData = [];\n            fields.forEach(function (field, n) {\n                var columnRule = { index: n + 1, value: event[field.name] || '' };\n                if (field.name === _this.parent.eventFields.startTime || field.name === _this.parent.eventFields.endTime) {\n                    var styleRule = { fontSize: 12, numberFormat: 'm/d/yyyy h:mm AM/PM' };\n                    columnRule = extend({}, columnRule, { style: styleRule }, true);\n                }\n                columnData.push(columnRule);\n            });\n            rows.push({ index: i + 2, cells: columnData });\n        });\n        var workSheet = [{ columns: columns, rows: rows }];\n        var book = new Workbook({ worksheets: workSheet }, type, this.parent.locale, undefined, separator);\n        book.save(name + '.' + type);\n    };\n    ExcelExport.prototype.getExportColumns = function (exportOptions) {\n        var _this = this;\n        var exportColumns = exportOptions.fieldsInfo || [];\n        if (exportColumns.length === 0) {\n            var fields = exportOptions.fields || Object.keys(this.parent.eventFields).map(function (field) {\n                return _this.parent.eventFields[\"\" + field];\n            });\n            fields.forEach(function (field) { exportColumns.push({ name: field, text: field }); });\n        }\n        return exportColumns;\n    };\n    ExcelExport.prototype.getModuleName = function () {\n        return 'excelExport';\n    };\n    ExcelExport.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return ExcelExport;\n}());\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Print Module\n */\nvar Print = /** @__PURE__ @class */ (function () {\n    function Print(parent) {\n        this.parent = parent;\n    }\n    Print.prototype.print = function (printOptions) {\n        if (isNullOrUndefined(printOptions)) {\n            this.printScheduler();\n        }\n        else {\n            this.printSchedulerWithModel(printOptions);\n        }\n    };\n    Print.prototype.printScheduler = function () {\n        var clone = this.parent.element.cloneNode(true);\n        clone.id = this.parent.element.id + '_print';\n        document.body.appendChild(clone);\n        var className = this.parent.currentView === 'MonthAgenda' ? '.e-appointment-wrap' : '.e-content-wrap';\n        var scrollableEle = this.parent.element.querySelector(className);\n        var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n        var reference = '';\n        for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n            var link = links_1[_i];\n            reference += link.outerHTML;\n        }\n        var div = createElement('div');\n        clone.style.width = this.parent.element.offsetWidth + 'px';\n        var elementWidth = Math.round((parseInt(clone.style.width, 10)) / 100) * 100;\n        div.appendChild(clone);\n        var printWindow = window.open('', 'print', 'height=550,width=' + elementWidth + ',tabbar=no');\n        printWindow.document.write('<!DOCTYPE html><html><head>' + reference + '</head><body>' + div.innerHTML +\n            '<script>(function() { window.ready = true; })();</script></body></html>');\n        printWindow.document.close();\n        printWindow.focus();\n        setTimeout(function () {\n            if (printWindow.ready && scrollableEle) {\n                // eslint-disable-next-line no-self-assign\n                scrollableEle.scrollLeft = scrollableEle.scrollLeft;\n                // eslint-disable-next-line no-self-assign\n                scrollableEle.scrollTop = scrollableEle.scrollTop;\n                var headerTimeCellsScroll = printWindow.document.querySelector('.e-date-header-wrap');\n                if (headerTimeCellsScroll) {\n                    headerTimeCellsScroll.scrollLeft = scrollableEle.scrollLeft;\n                }\n                var timeCellsScroll = printWindow.document.querySelector('.e-time-cells-wrap');\n                if (timeCellsScroll) {\n                    timeCellsScroll.scrollTop = scrollableEle.scrollTop;\n                }\n                printWindow.print();\n                printWindow.close();\n            }\n        }, 500);\n    };\n    Print.prototype.printSchedulerWithModel = function (printOptions) {\n        var element = createElement('div', { id: this.parent.element.id + '_print', className: 'e-print-schedule' });\n        document.body.appendChild(element);\n        Schedule.Inject(Day, Week, WorkWeek, Month, Agenda, MonthAgenda, TimelineViews, TimelineMonth, Year, TimelineYear);\n        this.printInstance = new Schedule(this.getPrintScheduleModel(printOptions));\n        this.printInstance.isPrinting = true;\n        this.printInstance.appendTo(element);\n        this.printInstance.on(print$1, this.contentReady, this);\n        this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWindow.moveTo(0, 0);\n        this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.getPrintScheduleModel = function (printOptions) {\n        var printModel = {};\n        var scheduleProps = ['agendaDaysCount', 'calendarMode', 'cssClass', 'currentView',\n            'dateFormat', 'enableRtl', 'endHour', 'eventSettings', 'firstDayOfWeek',\n            'firstMonthOfYear', 'group', 'height', 'locale', 'maxDate', 'minDate', 'readonly',\n            'resources', 'rowAutoHeight', 'selectedDate', 'showHeaderBar', 'showTimeIndicator', 'showWeekNumber',\n            'showWeekend', 'startHour', 'timeFormat', 'timeScale', 'timezone', 'views', 'width', 'workDays', 'workHours',\n            'dateHeaderTemplate', 'dateRangeTemplate', 'cellHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate',\n            'cellTemplate', 'resourceHeaderTemplate', 'headerIndentTemplate', 'actionBegin', 'actionComplete', 'actionFailure',\n            'created', 'dataBinding', 'dataBound', 'destroyed', 'eventRendered', 'moreEventsClick', 'navigating', 'popupOpen', 'popupClose', 'renderCell'\n        ];\n        var scheduleTemplates = ['cellHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate', 'cellTemplate',\n            'dateHeaderTemplate', 'dateRangeTemplate', 'eventTemplate', 'resourceHeaderTemplate', 'headerIndentTemplate'];\n        var scheduleEvents = ['actionBegin', 'actionComplete', 'actionFailure', 'created', 'dataBinding', 'dataBound',\n            'destroyed', 'eventRendered', 'moreEventsClick', 'navigating', 'popupOpen', 'popupClose', 'renderCell'];\n        var eventSettings;\n        var group;\n        var timeScale;\n        var views;\n        for (var _i = 0, scheduleProps_1 = scheduleProps; _i < scheduleProps_1.length; _i++) {\n            var key = scheduleProps_1[_i];\n            switch (key) {\n                case 'eventSettings': {\n                    eventSettings = Object.assign({}, this.parent.eventSettings.properties);\n                    eventSettings.dataSource = this.parent.eventsData;\n                    var eventTemplate = !isNullOrUndefined(printOptions.eventSettings) &&\n                        !isNullOrUndefined(printOptions.eventSettings.template) ? printOptions.eventSettings.template : eventSettings.template;\n                    eventSettings.template = typeof (eventTemplate) === 'function' ? null : eventTemplate;\n                    printModel.eventSettings = eventSettings;\n                    break;\n                }\n                case 'group':\n                    group = isNullOrUndefined(printOptions.group) ? this.parent.group : printOptions.group;\n                    group.headerTooltipTemplate = null;\n                    printModel.group = group;\n                    break;\n                case 'timeScale':\n                    timeScale = isNullOrUndefined(printOptions.timeScale) ? this.parent.timeScale : printOptions.timeScale;\n                    timeScale.majorSlotTemplate = typeof (timeScale.majorSlotTemplate) === 'function' ? null : timeScale.majorSlotTemplate;\n                    timeScale.minorSlotTemplate = typeof (timeScale.minorSlotTemplate) === 'function' ? null : timeScale.minorSlotTemplate;\n                    printOptions.timeScale = timeScale;\n                    break;\n                case 'views':\n                    views = isNullOrUndefined(printOptions.views) ? this.parent.views : printOptions.views;\n                    if (views && views.length > 0 && typeof (views[0]) === 'object') {\n                        var _loop_1 = function (view) {\n                            scheduleTemplates.forEach(function (x) {\n                                if (!isNullOrUndefined(view[\"\" + x])) {\n                                    view[\"\" + x] = typeof (view[\"\" + x]) === 'function' ? null : view[\"\" + x];\n                                }\n                            });\n                        };\n                        for (var _a = 0, views_1 = views; _a < views_1.length; _a++) {\n                            var view = views_1[_a];\n                            _loop_1(view);\n                        }\n                    }\n                    printModel.views = views;\n                    break;\n                default:\n                    if (scheduleTemplates.indexOf(key) > -1) {\n                        printModel[\"\" + key] = isNullOrUndefined(printOptions[\"\" + key]) ?\n                            (typeof (this.parent[\"\" + key]) === 'function' ? null : this.parent[\"\" + key]) :\n                            (typeof (printOptions[\"\" + key]) === 'function' ? null : printOptions[\"\" + key]);\n                        break;\n                    }\n                    if (scheduleEvents.indexOf(key) > -1) {\n                        printModel[\"\" + key] = printOptions[\"\" + key];\n                        break;\n                    }\n                    printModel[\"\" + key] = isNullOrUndefined(printOptions[\"\" + key]) ?\n                        this.parent[\"\" + key] : printOptions[\"\" + key];\n                    break;\n            }\n        }\n        return printModel;\n    };\n    Print.prototype.contentReady = function () {\n        var _this = this;\n        this.printWindow = print(this.printInstance.element, this.printWindow);\n        this.printWindow.onbeforeunload = function () {\n            _this.printInstance.off(print$1, _this.contentReady);\n            _this.printInstance.element.remove();\n            _this.printInstance.destroy();\n            _this.printInstance = null;\n            _this.printWindow = null;\n        };\n    };\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return Print;\n}());\n\n/**\n * Exporting modules\n */\n\n/**\n * Schedule component exported items\n */\n\n/**\n * Recurrence-Editor component exported items\n */\n\n/**\n * Calendar util exported items\n */\n\n/**\n * Export Schedule components\n */\n\nexport { Schedule, cellClick, cellDoubleClick, moreEventsClick, select, hover, actionBegin, actionComplete, actionFailure, navigating, renderCell, eventClick, eventRendered, dataBinding, dataBound, popupOpen, popupClose, dragStart, drag, dragStop, resizeStart, resizing, resizeStop, inlineClick, cellSelect, initialLoad, initialEnd, print$1 as print, dataReady, eventsLoaded, contentReady, scroll, virtualScroll, scrollUiUpdate, uiUpdate, documentClick, cellMouseDown, WEEK_LENGTH, DEFAULT_WEEKS, MS_PER_DAY, MS_PER_MINUTE, getElementHeightFromClass, getElementWidthFromClass, getTranslateY, getTranslateX, getWeekFirstDate, getWeekLastDate, firstDateOfMonth, lastDateOfMonth, getWeekNumber, getWeekMiddleDate, setTime, resetTime, getDateInMs, getDateCount, addDays, addMonths, addYears, getStartEndHours, getMaxDays, getDaysCount, getDateFromString, getScrollBarWidth, findIndexInData, getOuterHeight, removeChildren, isDaylightSavingTime, getUniversalTime, isMobile, isIPadDevice, capitalizeFirstWord, Resize, DragAndDrop, HeaderRenderer, ViewBase, Day, Week, WorkWeek, Month, Year, Agenda, MonthAgenda, TimelineViews, TimelineMonth, TimelineYear, Timezone, timezoneData, ICalendarExport, ICalendarImport, ExcelExport, Print, RecurrenceEditor, generateSummary, generate, getDateFromRecurrenceDateString, extractObjectFromRule, getCalendarUtil, getRecurrenceStringFromDate, Gregorian, Islamic };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}